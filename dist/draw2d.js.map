{"version":3,"file":"draw2d.js","mappings":"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AAI,IAC5D,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5D,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5D,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5D,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5D,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5D,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5D,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5D,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5D,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAG5DC,EAAY,CACV,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC/D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,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","sources":["webpack://draw2d/webpack/universalModuleDefinition","webpack://draw2d/./src/lib/Class.exec.js","webpack://draw2d/./src/lib/pathfinding.exec.js","webpack://draw2d/./src/lib/raphael.exec.js","webpack://draw2d/./src/Canvas.js","webpack://draw2d/./src/Configuration.js","webpack://draw2d/./src/Connection.js","webpack://draw2d/./src/Figure.js","webpack://draw2d/./src/HeadlessCanvas.js","webpack://draw2d/./src/HybridPort.js","webpack://draw2d/./src/InputPort.js","webpack://draw2d/./src/OutputPort.js","webpack://draw2d/./src/Port.js","webpack://draw2d/./src/ResizeHandle.js","webpack://draw2d/./src/SVGFigure.js","webpack://draw2d/./src/Selection.js","webpack://draw2d/./src/SetFigure.js","webpack://draw2d/./src/VectorFigure.js","webpack://draw2d/./src/command/Command.js","webpack://draw2d/./src/command/CommandAdd.js","webpack://draw2d/./src/command/CommandAddVertex.js","webpack://draw2d/./src/command/CommandAssignFigure.js","webpack://draw2d/./src/command/CommandAttr.js","webpack://draw2d/./src/command/CommandBoundingBox.js","webpack://draw2d/./src/command/CommandCollection.js","webpack://draw2d/./src/command/CommandConnect.js","webpack://draw2d/./src/command/CommandDelete.js","webpack://draw2d/./src/command/CommandDeleteGroup.js","webpack://draw2d/./src/command/CommandGroup.js","webpack://draw2d/./src/command/CommandMove.js","webpack://draw2d/./src/command/CommandMoveConnection.js","webpack://draw2d/./src/command/CommandMoveLine.js","webpack://draw2d/./src/command/CommandMoveVertex.js","webpack://draw2d/./src/command/CommandMoveVertices.js","webpack://draw2d/./src/command/CommandReconnect.js","webpack://draw2d/./src/command/CommandRemoveVertex.js","webpack://draw2d/./src/command/CommandReplaceVertices.js","webpack://draw2d/./src/command/CommandResize.js","webpack://draw2d/./src/command/CommandRotate.js","webpack://draw2d/./src/command/CommandStack.js","webpack://draw2d/./src/command/CommandStackEvent.js","webpack://draw2d/./src/command/CommandStackEventListener.js","webpack://draw2d/./src/command/CommandType.js","webpack://draw2d/./src/command/CommandUngroup.js","webpack://draw2d/./src/decoration/connection/ArrowDecorator.js","webpack://draw2d/./src/decoration/connection/BarDecorator.js","webpack://draw2d/./src/decoration/connection/CircleDecorator.js","webpack://draw2d/./src/decoration/connection/Decorator.js","webpack://draw2d/./src/decoration/connection/DiamondDecorator.js","webpack://draw2d/./src/geo/Line.js","webpack://draw2d/./src/geo/Point.js","webpack://draw2d/./src/geo/PositionConstants.js","webpack://draw2d/./src/geo/Ray.js","webpack://draw2d/./src/geo/Rectangle.js","webpack://draw2d/./src/geo/Util.js","webpack://draw2d/./src/index.js","webpack://draw2d/./src/io/Reader.js","webpack://draw2d/./src/io/Writer.js","webpack://draw2d/./src/io/json/Reader.js","webpack://draw2d/./src/io/json/Writer.js","webpack://draw2d/./src/io/png/Writer.js","webpack://draw2d/./src/io/svg/Writer.js","webpack://draw2d/./src/layout/anchor/CenterEdgeConnectionAnchor.js","webpack://draw2d/./src/layout/anchor/ChopboxConnectionAnchor.js","webpack://draw2d/./src/layout/anchor/ConnectionAnchor.js","webpack://draw2d/./src/layout/anchor/FanConnectionAnchor.js","webpack://draw2d/./src/layout/anchor/ShortesPathConnectionAnchor.js","webpack://draw2d/./src/layout/connection/CircuitConnectionRouter.js","webpack://draw2d/./src/layout/connection/ConnectionRouter.js","webpack://draw2d/./src/layout/connection/DirectRouter.js","webpack://draw2d/./src/layout/connection/FanConnectionRouter.js","webpack://draw2d/./src/layout/connection/InteractiveManhattanConnectionRouter.js","webpack://draw2d/./src/layout/connection/ManhattanBridgedConnectionRouter.js","webpack://draw2d/./src/layout/connection/ManhattanConnectionRouter.js","webpack://draw2d/./src/layout/connection/MazeConnectionRouter.js","webpack://draw2d/./src/layout/connection/MuteableManhattanConnectionRouter.js","webpack://draw2d/./src/layout/connection/RubberbandRouter.js","webpack://draw2d/./src/layout/connection/SketchConnectionRouter.js","webpack://draw2d/./src/layout/connection/SplineConnectionRouter.js","webpack://draw2d/./src/layout/connection/VertexRouter.js","webpack://draw2d/./src/layout/locator/BottomLocator.js","webpack://draw2d/./src/layout/locator/CenterLocator.js","webpack://draw2d/./src/layout/locator/ConnectionLocator.js","webpack://draw2d/./src/layout/locator/DraggableLocator.js","webpack://draw2d/./src/layout/locator/InputPortLocator.js","webpack://draw2d/./src/layout/locator/LeftLocator.js","webpack://draw2d/./src/layout/locator/Locator.js","webpack://draw2d/./src/layout/locator/ManhattanMidpointLocator.js","webpack://draw2d/./src/layout/locator/OutputPortLocator.js","webpack://draw2d/./src/layout/locator/ParallelMidpointLocator.js","webpack://draw2d/./src/layout/locator/PolylineMidpointLocator.js","webpack://draw2d/./src/layout/locator/PortLocator.js","webpack://draw2d/./src/layout/locator/RightLocator.js","webpack://draw2d/./src/layout/locator/SmartDraggableLocator.js","webpack://draw2d/./src/layout/locator/TopLocator.js","webpack://draw2d/./src/layout/locator/XYAbsPortLocator.js","webpack://draw2d/./src/layout/locator/XYRelPortLocator.js","webpack://draw2d/./src/layout/mesh/ExplodeLayouter.js","webpack://draw2d/./src/layout/mesh/MeshLayouter.js","webpack://draw2d/./src/layout/mesh/ProposedMeshChange.js","webpack://draw2d/./src/lib/jquery.autoresize.js","webpack://draw2d/./src/lib/jquery.contextmenu.js","webpack://draw2d/./src/packages.js","webpack://draw2d/./src/policy/EditPolicy.js","webpack://draw2d/./src/policy/canvas/BoundingboxSelectionPolicy.js","webpack://draw2d/./src/policy/canvas/CanvasPolicy.js","webpack://draw2d/./src/policy/canvas/CoronaDecorationPolicy.js","webpack://draw2d/./src/policy/canvas/DecorationPolicy.js","webpack://draw2d/./src/policy/canvas/DefaultKeyboardPolicy.js","webpack://draw2d/./src/policy/canvas/DropInterceptorPolicy.js","webpack://draw2d/./src/policy/canvas/ExtendedKeyboardPolicy.js","webpack://draw2d/./src/policy/canvas/FadeoutDecorationPolicy.js","webpack://draw2d/./src/policy/canvas/GhostMoveSelectionPolicy.js","webpack://draw2d/./src/policy/canvas/KeyboardPolicy.js","webpack://draw2d/./src/policy/canvas/PanningSelectionPolicy.js","webpack://draw2d/./src/policy/canvas/ReadOnlySelectionPolicy.js","webpack://draw2d/./src/policy/canvas/SelectionPolicy.js","webpack://draw2d/./src/policy/canvas/ShowChessboardEditPolicy.js","webpack://draw2d/./src/policy/canvas/ShowDimetricGridEditPolicy.js","webpack://draw2d/./src/policy/canvas/ShowDotEditPolicy.js","webpack://draw2d/./src/policy/canvas/ShowGridEditPolicy.js","webpack://draw2d/./src/policy/canvas/SingleSelectionPolicy.js","webpack://draw2d/./src/policy/canvas/SnapToCenterEditPolicy.js","webpack://draw2d/./src/policy/canvas/SnapToDimetricGridEditPolicy.js","webpack://draw2d/./src/policy/canvas/SnapToEditPolicy.js","webpack://draw2d/./src/policy/canvas/SnapToGeometryEditPolicy.js","webpack://draw2d/./src/policy/canvas/SnapToGridEditPolicy.js","webpack://draw2d/./src/policy/canvas/SnapToInBetweenEditPolicy.js","webpack://draw2d/./src/policy/canvas/SnapToVerticesEditPolicy.js","webpack://draw2d/./src/policy/canvas/WheelZoomPolicy.js","webpack://draw2d/./src/policy/canvas/ZoomPolicy.js","webpack://draw2d/./src/policy/connection/ClickConnectionCreatePolicy.js","webpack://draw2d/./src/policy/connection/ComposedConnectionCreatePolicy.js","webpack://draw2d/./src/policy/connection/ConnectionCreatePolicy.js","webpack://draw2d/./src/policy/connection/DragConnectionCreatePolicy.js","webpack://draw2d/./src/policy/connection/OrthogonalConnectionCreatePolicy.js","webpack://draw2d/./src/policy/figure/AntSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/BigRectangleSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/BusSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/DragDropEditPolicy.js","webpack://draw2d/./src/policy/figure/FigureEditPolicy.js","webpack://draw2d/./src/policy/figure/GlowSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/HBusSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/HorizontalEditPolicy.js","webpack://draw2d/./src/policy/figure/RaftSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/RectangleSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/RegionEditPolicy.js","webpack://draw2d/./src/policy/figure/ResizeSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/RoundRectangleSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/SelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/SelectionPolicy.js","webpack://draw2d/./src/policy/figure/SlimSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/VBusSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/VertexSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/figure/VerticalEditPolicy.js","webpack://draw2d/./src/policy/figure/WidthSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/line/LineSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/line/OrthogonalSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/line/VertexSelectionFeedbackPolicy.js","webpack://draw2d/./src/policy/port/ElasticStrapFeedbackPolicy.js","webpack://draw2d/./src/policy/port/IntrusivePortsFeedbackPolicy.js","webpack://draw2d/./src/policy/port/PortFeedbackPolicy.js","webpack://draw2d/./src/shape/analog/OpAmp.js","webpack://draw2d/./src/shape/analog/ResistorBridge.js","webpack://draw2d/./src/shape/analog/ResistorVertical.js","webpack://draw2d/./src/shape/analog/VoltageSupplyHorizontal.js","webpack://draw2d/./src/shape/analog/VoltageSupplyVertical.js","webpack://draw2d/./src/shape/arrow/CalligrapherArrowDownLeft.js","webpack://draw2d/./src/shape/arrow/CalligrapherArrowLeft.js","webpack://draw2d/./src/shape/basic/Arc.js","webpack://draw2d/./src/shape/basic/Circle.js","webpack://draw2d/./src/shape/basic/Diamond.js","webpack://draw2d/./src/shape/basic/GhostVertexResizeHandle.js","webpack://draw2d/./src/shape/basic/Image.js","webpack://draw2d/./src/shape/basic/Label.js","webpack://draw2d/./src/shape/basic/Line.js","webpack://draw2d/./src/shape/basic/LineEndResizeHandle.js","webpack://draw2d/./src/shape/basic/LineResizeHandle.js","webpack://draw2d/./src/shape/basic/LineStartResizeHandle.js","webpack://draw2d/./src/shape/basic/Oval.js","webpack://draw2d/./src/shape/basic/PolyLine.js","webpack://draw2d/./src/shape/basic/Polygon.js","webpack://draw2d/./src/shape/basic/Rectangle.js","webpack://draw2d/./src/shape/basic/Text.js","webpack://draw2d/./src/shape/basic/VertexResizeHandle.js","webpack://draw2d/./src/shape/composite/Composite.js","webpack://draw2d/./src/shape/composite/Group.js","webpack://draw2d/./src/shape/composite/Jailhouse.js","webpack://draw2d/./src/shape/composite/Raft.js","webpack://draw2d/./src/shape/composite/RaftResizeHandle.js","webpack://draw2d/./src/shape/composite/StrongComposite.js","webpack://draw2d/./src/shape/composite/WeakComposite.js","webpack://draw2d/./src/shape/diagram/Diagram.js","webpack://draw2d/./src/shape/diagram/Pie.js","webpack://draw2d/./src/shape/diagram/Sparkline.js","webpack://draw2d/./src/shape/dimetric/Rectangle.js","webpack://draw2d/./src/shape/flowchart/Document.js","webpack://draw2d/./src/shape/icon/Acw.js","webpack://draw2d/./src/shape/icon/Alarm.js","webpack://draw2d/./src/shape/icon/Anonymous.js","webpack://draw2d/./src/shape/icon/Apple.js","webpack://draw2d/./src/shape/icon/Apps.js","webpack://draw2d/./src/shape/icon/ArrowDown.js","webpack://draw2d/./src/shape/icon/ArrowLeft.js","webpack://draw2d/./src/shape/icon/ArrowLeft2.js","webpack://draw2d/./src/shape/icon/ArrowRight.js","webpack://draw2d/./src/shape/icon/ArrowRight2.js","webpack://draw2d/./src/shape/icon/ArrowUp.js","webpack://draw2d/./src/shape/icon/Aumade.js","webpack://draw2d/./src/shape/icon/BarChart.js","webpack://draw2d/./src/shape/icon/BioHazard.js","webpack://draw2d/./src/shape/icon/Book.js","webpack://draw2d/./src/shape/icon/Bookmark.js","webpack://draw2d/./src/shape/icon/Books.js","webpack://draw2d/./src/shape/icon/Bubble.js","webpack://draw2d/./src/shape/icon/Bug.js","webpack://draw2d/./src/shape/icon/Calendar.js","webpack://draw2d/./src/shape/icon/Cart.js","webpack://draw2d/./src/shape/icon/Ccw.js","webpack://draw2d/./src/shape/icon/Chat.js","webpack://draw2d/./src/shape/icon/Check.js","webpack://draw2d/./src/shape/icon/Chrome.js","webpack://draw2d/./src/shape/icon/Clip.js","webpack://draw2d/./src/shape/icon/Clock.js","webpack://draw2d/./src/shape/icon/Cloud.js","webpack://draw2d/./src/shape/icon/Cloud2.js","webpack://draw2d/./src/shape/icon/CloudDown.js","webpack://draw2d/./src/shape/icon/CloudUp.js","webpack://draw2d/./src/shape/icon/Cloudy.js","webpack://draw2d/./src/shape/icon/Code.js","webpack://draw2d/./src/shape/icon/CodeTalk.js","webpack://draw2d/./src/shape/icon/CommandLine.js","webpack://draw2d/./src/shape/icon/Connect.js","webpack://draw2d/./src/shape/icon/Contract.js","webpack://draw2d/./src/shape/icon/Crop.js","webpack://draw2d/./src/shape/icon/Cross.js","webpack://draw2d/./src/shape/icon/Cube.js","webpack://draw2d/./src/shape/icon/Customer.js","webpack://draw2d/./src/shape/icon/Db.js","webpack://draw2d/./src/shape/icon/Detour.js","webpack://draw2d/./src/shape/icon/Diagram.js","webpack://draw2d/./src/shape/icon/Disconnect.js","webpack://draw2d/./src/shape/icon/DockBottom.js","webpack://draw2d/./src/shape/icon/DockLeft.js","webpack://draw2d/./src/shape/icon/DockRight.js","webpack://draw2d/./src/shape/icon/DockTop.js","webpack://draw2d/./src/shape/icon/Download.js","webpack://draw2d/./src/shape/icon/Dry.js","webpack://draw2d/./src/shape/icon/Employee.js","webpack://draw2d/./src/shape/icon/End.js","webpack://draw2d/./src/shape/icon/Ethernet.js","webpack://draw2d/./src/shape/icon/Exchange.js","webpack://draw2d/./src/shape/icon/Expand.js","webpack://draw2d/./src/shape/icon/Export.js","webpack://draw2d/./src/shape/icon/Fave.js","webpack://draw2d/./src/shape/icon/Feed.js","webpack://draw2d/./src/shape/icon/Ff.js","webpack://draw2d/./src/shape/icon/Firefox.js","webpack://draw2d/./src/shape/icon/Flag.js","webpack://draw2d/./src/shape/icon/Flickr.js","webpack://draw2d/./src/shape/icon/Folder.js","webpack://draw2d/./src/shape/icon/Font.js","webpack://draw2d/./src/shape/icon/Fork.js","webpack://draw2d/./src/shape/icon/ForkAlt.js","webpack://draw2d/./src/shape/icon/FullCube.js","webpack://draw2d/./src/shape/icon/Future.js","webpack://draw2d/./src/shape/icon/GRaphael.js","webpack://draw2d/./src/shape/icon/Gear.js","webpack://draw2d/./src/shape/icon/Gear2.js","webpack://draw2d/./src/shape/icon/GitHub.js","webpack://draw2d/./src/shape/icon/GitHubAlt.js","webpack://draw2d/./src/shape/icon/Glasses.js","webpack://draw2d/./src/shape/icon/Globe.js","webpack://draw2d/./src/shape/icon/GlobeAlt.js","webpack://draw2d/./src/shape/icon/GlobeAlt2.js","webpack://draw2d/./src/shape/icon/Hail.js","webpack://draw2d/./src/shape/icon/Hammer.js","webpack://draw2d/./src/shape/icon/HammerAndScrewDriver.js","webpack://draw2d/./src/shape/icon/HangUp.js","webpack://draw2d/./src/shape/icon/Help.js","webpack://draw2d/./src/shape/icon/History.js","webpack://draw2d/./src/shape/icon/Home.js","webpack://draw2d/./src/shape/icon/IMac.js","webpack://draw2d/./src/shape/icon/Icon.js","webpack://draw2d/./src/shape/icon/Icons.js","webpack://draw2d/./src/shape/icon/Ie.js","webpack://draw2d/./src/shape/icon/Ie9.js","webpack://draw2d/./src/shape/icon/Import.js","webpack://draw2d/./src/shape/icon/InkScape.js","webpack://draw2d/./src/shape/icon/Ipad.js","webpack://draw2d/./src/shape/icon/Iphone.js","webpack://draw2d/./src/shape/icon/JQuery.js","webpack://draw2d/./src/shape/icon/Jigsaw.js","webpack://draw2d/./src/shape/icon/Key.js","webpack://draw2d/./src/shape/icon/Lab.js","webpack://draw2d/./src/shape/icon/Lamp.js","webpack://draw2d/./src/shape/icon/Lamp_alt.js","webpack://draw2d/./src/shape/icon/Landing.js","webpack://draw2d/./src/shape/icon/Landscape1.js","webpack://draw2d/./src/shape/icon/Landscape2.js","webpack://draw2d/./src/shape/icon/LineChart.js","webpack://draw2d/./src/shape/icon/Link.js","webpack://draw2d/./src/shape/icon/LinkedIn.js","webpack://draw2d/./src/shape/icon/Linux.js","webpack://draw2d/./src/shape/icon/List.js","webpack://draw2d/./src/shape/icon/Location.js","webpack://draw2d/./src/shape/icon/Lock.js","webpack://draw2d/./src/shape/icon/Locked.js","webpack://draw2d/./src/shape/icon/Magic.js","webpack://draw2d/./src/shape/icon/Magnet.js","webpack://draw2d/./src/shape/icon/Mail.js","webpack://draw2d/./src/shape/icon/Man.js","webpack://draw2d/./src/shape/icon/Merge.js","webpack://draw2d/./src/shape/icon/Mic.js","webpack://draw2d/./src/shape/icon/MicMute.js","webpack://draw2d/./src/shape/icon/Minus.js","webpack://draw2d/./src/shape/icon/NewWindow.js","webpack://draw2d/./src/shape/icon/No.js","webpack://draw2d/./src/shape/icon/NoMagnet.js","webpack://draw2d/./src/shape/icon/NodeJs.js","webpack://draw2d/./src/shape/icon/Notebook.js","webpack://draw2d/./src/shape/icon/Noview.js","webpack://draw2d/./src/shape/icon/Opera.js","webpack://draw2d/./src/shape/icon/Package.js","webpack://draw2d/./src/shape/icon/Page.js","webpack://draw2d/./src/shape/icon/Page2.js","webpack://draw2d/./src/shape/icon/Pallete.js","webpack://draw2d/./src/shape/icon/Palm.js","webpack://draw2d/./src/shape/icon/Paper.js","webpack://draw2d/./src/shape/icon/Parent.js","webpack://draw2d/./src/shape/icon/Pc.js","webpack://draw2d/./src/shape/icon/Pen.js","webpack://draw2d/./src/shape/icon/Pensil.js","webpack://draw2d/./src/shape/icon/People.js","webpack://draw2d/./src/shape/icon/Phone.js","webpack://draw2d/./src/shape/icon/Photo.js","webpack://draw2d/./src/shape/icon/Picker.js","webpack://draw2d/./src/shape/icon/Picture.js","webpack://draw2d/./src/shape/icon/PieChart.js","webpack://draw2d/./src/shape/icon/Plane.js","webpack://draw2d/./src/shape/icon/Plugin.js","webpack://draw2d/./src/shape/icon/Plus.js","webpack://draw2d/./src/shape/icon/Power.js","webpack://draw2d/./src/shape/icon/Ppt.js","webpack://draw2d/./src/shape/icon/Printer.js","webpack://draw2d/./src/shape/icon/Quote.js","webpack://draw2d/./src/shape/icon/Rain.js","webpack://draw2d/./src/shape/icon/Raphael.js","webpack://draw2d/./src/shape/icon/ReflectH.js","webpack://draw2d/./src/shape/icon/ReflectV.js","webpack://draw2d/./src/shape/icon/Refresh.js","webpack://draw2d/./src/shape/icon/Resize2.js","webpack://draw2d/./src/shape/icon/Rotate.js","webpack://draw2d/./src/shape/icon/Ruler.js","webpack://draw2d/./src/shape/icon/Run.js","webpack://draw2d/./src/shape/icon/Rw.js","webpack://draw2d/./src/shape/icon/Safari.js","webpack://draw2d/./src/shape/icon/ScrewDriver.js","webpack://draw2d/./src/shape/icon/Search.js","webpack://draw2d/./src/shape/icon/Sencha.js","webpack://draw2d/./src/shape/icon/Settings.js","webpack://draw2d/./src/shape/icon/SettingsAlt.js","webpack://draw2d/./src/shape/icon/Shuffle.js","webpack://draw2d/./src/shape/icon/Skull.js","webpack://draw2d/./src/shape/icon/Skype.js","webpack://draw2d/./src/shape/icon/SlideShare.js","webpack://draw2d/./src/shape/icon/Smile.js","webpack://draw2d/./src/shape/icon/Smile2.js","webpack://draw2d/./src/shape/icon/Snow.js","webpack://draw2d/./src/shape/icon/Split.js","webpack://draw2d/./src/shape/icon/Star.js","webpack://draw2d/./src/shape/icon/Star2.js","webpack://draw2d/./src/shape/icon/Star2Off.js","webpack://draw2d/./src/shape/icon/Star3.js","webpack://draw2d/./src/shape/icon/Star3Off.js","webpack://draw2d/./src/shape/icon/StarOff.js","webpack://draw2d/./src/shape/icon/Start.js","webpack://draw2d/./src/shape/icon/Sticker.js","webpack://draw2d/./src/shape/icon/Stop.js","webpack://draw2d/./src/shape/icon/StopWatch.js","webpack://draw2d/./src/shape/icon/Sun.js","webpack://draw2d/./src/shape/icon/Svg.js","webpack://draw2d/./src/shape/icon/TShirt.js","webpack://draw2d/./src/shape/icon/Tag.js","webpack://draw2d/./src/shape/icon/TakeOff.js","webpack://draw2d/./src/shape/icon/Talke.js","webpack://draw2d/./src/shape/icon/Talkq.js","webpack://draw2d/./src/shape/icon/Thunder.js","webpack://draw2d/./src/shape/icon/Trash.js","webpack://draw2d/./src/shape/icon/Twitter.js","webpack://draw2d/./src/shape/icon/TwitterBird.js","webpack://draw2d/./src/shape/icon/Umbrella.js","webpack://draw2d/./src/shape/icon/Undo.js","webpack://draw2d/./src/shape/icon/Unlock.js","webpack://draw2d/./src/shape/icon/Usb.js","webpack://draw2d/./src/shape/icon/User.js","webpack://draw2d/./src/shape/icon/Users.js","webpack://draw2d/./src/shape/icon/Video.js","webpack://draw2d/./src/shape/icon/View.js","webpack://draw2d/./src/shape/icon/Vim.js","webpack://draw2d/./src/shape/icon/Volume0.js","webpack://draw2d/./src/shape/icon/Volume1.js","webpack://draw2d/./src/shape/icon/Volume2.js","webpack://draw2d/./src/shape/icon/Volume3.js","webpack://draw2d/./src/shape/icon/Warning.js","webpack://draw2d/./src/shape/icon/WheelChair.js","webpack://draw2d/./src/shape/icon/Windows.js","webpack://draw2d/./src/shape/icon/Woman.js","webpack://draw2d/./src/shape/icon/Wrench.js","webpack://draw2d/./src/shape/icon/Wrench2.js","webpack://draw2d/./src/shape/icon/Wrench3.js","webpack://draw2d/./src/shape/icon/ZoomIn.js","webpack://draw2d/./src/shape/icon/ZoomOut.js","webpack://draw2d/./src/shape/layout/FlexGridLayout.js","webpack://draw2d/./src/shape/layout/HorizontalLayout.js","webpack://draw2d/./src/shape/layout/Layout.js","webpack://draw2d/./src/shape/layout/StackLayout.js","webpack://draw2d/./src/shape/layout/TableLayout.js","webpack://draw2d/./src/shape/layout/VerticalLayout.js","webpack://draw2d/./src/shape/node/Between.js","webpack://draw2d/./src/shape/node/End.js","webpack://draw2d/./src/shape/node/Fulcrum.js","webpack://draw2d/./src/shape/node/HorizontalBus.js","webpack://draw2d/./src/shape/node/Hub.js","webpack://draw2d/./src/shape/node/Node.js","webpack://draw2d/./src/shape/node/Start.js","webpack://draw2d/./src/shape/node/VerticalBus.js","webpack://draw2d/./src/shape/note/PostIt.js","webpack://draw2d/./src/shape/pert/Activity.js","webpack://draw2d/./src/shape/pert/Start.js","webpack://draw2d/./src/shape/state/Connection.js","webpack://draw2d/./src/shape/state/End.js","webpack://draw2d/./src/shape/state/Start.js","webpack://draw2d/./src/shape/state/State.js","webpack://draw2d/./src/shape/widget/Slider.js","webpack://draw2d/./src/shape/widget/Widget.js","webpack://draw2d/./src/ui/LabelEditor.js","webpack://draw2d/./src/ui/LabelInplaceEditor.js","webpack://draw2d/./src/util/ArrayList.js","webpack://draw2d/./src/util/Base64.js","webpack://draw2d/./src/util/Color.js","webpack://draw2d/./src/util/Debug.js","webpack://draw2d/./src/util/JSONUtil.js","webpack://draw2d/./src/util/Polyfill.js","webpack://draw2d/./src/util/SVGUtil.js","webpack://draw2d/./src/util/UUID.js","webpack://draw2d/./src/util/extend.js","webpack://draw2d/./src/util/raphael_ext.js","webpack://draw2d/./src/util/spline/BezierSpline.js","webpack://draw2d/./src/util/spline/CatmullRomSpline.js","webpack://draw2d/./src/util/spline/CubicSpline.js","webpack://draw2d/./src/util/spline/Spline.js","webpack://draw2d/./node_modules/canvg-browser/index.js","webpack://draw2d/./src/css/contextmenu.css","webpack://draw2d/./node_modules/css-loader/dist/runtime/api.js","webpack://draw2d/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://draw2d/./src/lib/Class.exec.js?f59a","webpack://draw2d/./src/lib/pathfinding.exec.js?a448","webpack://draw2d/./src/lib/raphael.exec.js?8a35","webpack://draw2d/./node_modules/rgbcolor/index.js","webpack://draw2d/./node_modules/script-loader/addScript.js","webpack://draw2d/./node_modules/shifty/dist/shifty.js","webpack://draw2d/./node_modules/stackblur/index.js","webpack://draw2d/./src/css/contextmenu.css?3c4d","webpack://draw2d/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://draw2d/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://draw2d/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://draw2d/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://draw2d/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://draw2d/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://draw2d/./node_modules/xmldom/dom-parser.js","webpack://draw2d/./node_modules/xmldom/dom.js","webpack://draw2d/./node_modules/xmldom/sax.js","webpack://draw2d/webpack/bootstrap","webpack://draw2d/webpack/runtime/compat get default export","webpack://draw2d/webpack/runtime/define property getters","webpack://draw2d/webpack/runtime/global","webpack://draw2d/webpack/runtime/hasOwnProperty shorthand","webpack://draw2d/webpack/runtime/make namespace object","webpack://draw2d/webpack/runtime/nonce","webpack://draw2d/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"draw2d\"] = factory();\n\telse\n\t\troot[\"draw2d\"] = factory();\n})(self, () => {\nreturn ","require(\"!!/Users/kusi/www/draw2d/node_modules/script-loader/addScript.js\")(require(\"!!/Users/kusi/www/draw2d/node_modules/raw-loader/index.js!/Users/kusi/www/draw2d/src/lib/Class.exec.js\"))","require(\"!!/Users/kusi/www/draw2d/node_modules/script-loader/addScript.js\")(require(\"!!/Users/kusi/www/draw2d/node_modules/raw-loader/index.js!/Users/kusi/www/draw2d/src/lib/pathfinding.exec.js\"))","require(\"!!/Users/kusi/www/draw2d/node_modules/script-loader/addScript.js\")(require(\"!!/Users/kusi/www/draw2d/node_modules/raw-loader/index.js!/Users/kusi/www/draw2d/src/lib/raphael.exec.js\"))","import draw2d from 'packages'\n\n\n/**\n * @class\n * A scrolling Canvas that contains Figures. Call `add(draw2d.Figure)` to add shapes to the Viewport.\n *\n *\n * @author Andreas Herz\n */\ndraw2d.Canvas = Class.extend(\n  /** @lends draw2d.Canvas.prototype */\n  {\n\n    NAME: \"draw2d.Canvas\",\n\n    /**\n     * Create a new canvas with the given HTML DOM references.\n     *\n     * @param {String} canvasId the id of the DOM element to use a parent container\n     */\n    init: function (canvasId, width, height) {\n      let _this = this\n\n\n      this.setScrollArea(document.body)\n      this.canvasId = canvasId\n      this.html = $(\"#\" + canvasId)\n      this.html.css({\"cursor\": \"default\"})\n      if (!isNaN(parseFloat(width)) && !isNaN(parseFloat(height))) {\n        this.initialWidth = parseInt(width)\n        this.initialHeight = parseInt(height)\n        this.html\n          .height(this.initialHeight)\n          .width(this.initialWidth)\n      } else {\n        this.initialWidth = this.getWidth()\n        this.initialHeight = this.getHeight()\n      }\n\n      // avoid the \"highlighting\" in iPad, iPhone if the user tab/touch on the canvas.\n      // .... I didn't like this.\n      this.html.css({\"-webkit-tap-highlight-color\": \"rgba(0,0,0,0)\"})\n\n      // Drag&Drop handling from foreign DIV into the Canvas\n      // Only available in combination with jQuery-UI\n      //\n      // Create the droppable area for the css class \"draw2d_droppable\"\n      // This can be done by a palette of toolbar or something else.\n      // For more information see : http://jqueryui.com/demos/droppable/\n      //\n      $(this.html).droppable({\n        accept: '.draw2d_droppable',\n        over: function (event, ui) {\n          _this.onDragEnter(ui.draggable)\n        },\n        out: function (event, ui) {\n          _this.onDragLeave(ui.draggable)\n        },\n        drop: function drop(event, ui) {\n          event = _this._getEvent(event);\n          let helperPos = $(ui.helper).position()\n          let pos = _this.fromDocumentToCanvasCoordinate(event.clientX, event.clientY);\n          _this.onDrop(ui.draggable,\n            pos.getX()- (event.clientX-helperPos.left)+5,\n            pos.getY()- (event.clientY-helperPos.top)+5, event.shiftKey, event.ctrlKey);\n        }\n      })\n\n\n      // Create the jQuery-Draggable for the palette -> canvas drag&drop interaction\n      //\n      $(\".draw2d_droppable\").draggable({\n        appendTo: \"body\",\n        stack: \"body\",\n        zIndex: 27000,\n        helper: \"clone\",\n        drag: function (event, ui) {\n          event = _this._getEvent(event)\n          let pos = _this.fromDocumentToCanvasCoordinate(event.clientX, event.clientY)\n          _this.onDrag(ui.draggable, pos.getX(), pos.getY(), event.shiftKey, event.ctrlKey)\n        },\n        stop: function (e, ui) {\n        },\n        start: function (e, ui) {\n          $(ui.helper).addClass(\"shadow\")\n        }\n      })\n\n\n      // painting stuff\n      //\n      if (!isNaN(parseFloat(height))) {\n        this.paper = Raphael(canvasId, width, height)\n      } else {\n        this.paper = Raphael(canvasId, this.getWidth(), this.getHeight())\n      }\n      this.paper.canvas.style.position = \"absolute\"\n\n      // Status handling\n      //\n      this.zoomPolicy = null // default ZoomEditPolicy\n      this.zoomFactor = 1.0 // range [0.001..10]\n      this.selection = new draw2d.Selection()\n      this.currentDropTarget = null\n      this.currentHoverFigure = null\n\n      // installed to all added figures to avoid that a figure can be placed outside the canvas area\n      // during a drag&drop operation\n      this.regionDragDropConstraint = new draw2d.policy.figure.RegionEditPolicy(0, 0, this.getWidth(), this.getHeight())\n\n      // event handling since version 5.0.0\n      this.eventSubscriptions = {}\n\n      this.editPolicy = new draw2d.util.ArrayList()\n\n      // internal document with all figures, ports, ....\n      //\n      this.figures = new draw2d.util.ArrayList()\n      this.lines = new draw2d.util.ArrayList() // crap - why are connections not just figures. Design by accident\n      this.commonPorts = new draw2d.util.ArrayList()\n\n      // all visible resize handles which can be drag&drop around. Selection handles like AntRectangleSelectionFeedback\n      // are not part of this collection. Required for hitTest only\n      this.resizeHandles = new draw2d.util.ArrayList()\n\n      // The CommandStack for undo/redo operations\n      //\n      this.commandStack = new draw2d.command.CommandStack()\n\n      // INTERSECTION/CROSSING handling for connections and lines\n      //\n      this.linesToRepaintAfterDragDrop = new draw2d.util.ArrayList()\n      this.lineIntersections = new draw2d.util.ArrayList()\n\n      // alternative/legacy zoom implementation\n      // this.installEditPolicy( new draw2d.policy.canvas.ZoomPolicy());                  // Responsible for zooming\n      this.installEditPolicy(new draw2d.policy.canvas.WheelZoomPolicy())                // Responsible for zooming with mouse wheel\n      this.installEditPolicy(new draw2d.policy.canvas.DefaultKeyboardPolicy())          // Handles the keyboard interaction\n      this.installEditPolicy(new draw2d.policy.canvas.BoundingboxSelectionPolicy())     // Responsible for selection handling\n      this.installEditPolicy(new draw2d.policy.canvas.DropInterceptorPolicy())          // Responsible for drop operations\n      this.installEditPolicy(new draw2d.policy.connection.ComposedConnectionCreatePolicy(// Responsible for connection creation....\n        [\n          new draw2d.policy.connection.DragConnectionCreatePolicy(),  // ....via drag/´drop\n          new draw2d.policy.connection.ClickConnectionCreatePolicy()  // or clicking on the ports and canvas.\n        ])\n      )\n\n      // Calculate all intersection between the different lines\n      //\n      this.commandStack.addEventListener(function (event) {\n        if (event.isPostChangeEvent() === true) {\n          _this.calculateConnectionIntersection()\n          _this.linesToRepaintAfterDragDrop.each((i, line) => {\n            line.svgPathString = null\n            line.repaint()\n          })\n          _this.linesToRepaintAfterDragDrop = new draw2d.util.ArrayList()\n        }\n      })\n\n      // DragDrop status handling\n      //\n      this.mouseDown = false\n      this.mouseDownX = 0\n      this.mouseDownY = 0\n      this.mouseDragDiffX = 0\n      this.mouseDragDiffY = 0\n\n      this.html.bind(\"mouseup touchend\", function (event) {\n        if (_this.mouseDown === false) {\n          return\n        }\n\n        event = _this._getEvent(event)\n        _this.calculateConnectionIntersection()\n\n        _this.mouseDown = false\n        let pos = _this.fromDocumentToCanvasCoordinate(event.clientX, event.clientY)\n        _this.editPolicy.each(function (i, policy) {\n          policy.onMouseUp(_this, pos.x, pos.y, event.shiftKey, event.ctrlKey)\n        })\n\n        _this.mouseDragDiffX = 0\n        _this.mouseDragDiffY = 0\n      })\n\n      this.html.bind(\"mousemove touchmove\", function (event) {\n        event = _this._getEvent(event)\n        let pos = _this.fromDocumentToCanvasCoordinate(event.clientX, event.clientY)\n        if (_this.mouseDown === false) {\n          // mouseEnter/mouseLeave events for Figures. Don't use the Raphael or DOM native functions.\n          // Raphael didn't work for Rectangle with transparent fill (events only fired for the border line)\n          // DOM didn't work well for lines. No eclipse area - you must hit the line exact to retrieve the event.\n          // In this case I implement my own stuff...again and again.\n          //\n          // don't break the main event loop if one element fires an error during enter/leave event.\n          try {\n            let hover = _this.getBestFigure(pos.x, pos.y)\n            if (hover !== _this.currentHoverFigure && _this.currentHoverFigure !== null) {\n              _this.currentHoverFigure.onMouseLeave() // deprecated\n              _this.currentHoverFigure.fireEvent(\"mouseleave\")\n              _this.fireEvent(\"mouseleave\", {figure: _this.currentHoverFigure})\n            }\n            if (hover !== _this.currentHoverFigure && hover !== null) {\n              hover.onMouseEnter()\n              hover.fireEvent(\"mouseenter\")\n              _this.fireEvent(\"mouseenter\", {figure: hover})\n            }\n            _this.currentHoverFigure = hover\n          } catch (exc) {\n            // just write it to the console\n            console.log(exc)\n          }\n\n          _this.editPolicy.each(function (i, policy) {\n            policy.onMouseMove(_this, pos.x, pos.y, event.shiftKey, event.ctrlKey)\n          })\n          _this.fireEvent(\"mousemove\", {\n            x: pos.x,\n            y: pos.y,\n            shiftKey: event.shiftKey,\n            ctrlKey: event.ctrlKey,\n            hoverFigure: _this.currentHoverFigure\n          })\n        } else {\n          let diffXAbs = (event.clientX - _this.mouseDownX) * _this.zoomFactor\n          let diffYAbs = (event.clientY - _this.mouseDownY) * _this.zoomFactor\n          _this.editPolicy.each(function (i, policy) {\n            policy.onMouseDrag(_this, diffXAbs, diffYAbs, diffXAbs - _this.mouseDragDiffX, diffYAbs - _this.mouseDragDiffY, event.shiftKey, event.ctrlKey)\n          })\n          _this.mouseDragDiffX = diffXAbs\n          _this.mouseDragDiffY = diffYAbs\n          _this.fireEvent(\"mousemove\", {\n            x: pos.x,\n            y: pos.y,\n            shiftKey: event.shiftKey,\n            ctrlKey: event.ctrlKey,\n            hoverFigure: _this.currentHoverFigure\n          })\n        }\n      })\n\n      this.html.bind(\"mousedown\", function (event) {\n        try {\n          let pos = null\n          switch (event.which) {\n            case 1: //touch pressed\n            case 0: //Left mouse button pressed\n              try {\n                event.preventDefault()\n                event = _this._getEvent(event)\n                _this.mouseDownX = event.clientX\n                _this.mouseDownY = event.clientY\n                _this.mouseDragDiffX = 0\n                _this.mouseDragDiffY = 0\n                pos = _this.fromDocumentToCanvasCoordinate(event.clientX, event.clientY)\n                _this.mouseDown = true\n                _this.editPolicy.each(function (i, policy) {\n                  policy.onMouseDown(_this, pos.x, pos.y, event.shiftKey, event.ctrlKey)\n                })\n              } catch (exc) {\n                console.log(exc)\n              }\n              break\n            case 3: //Right mouse button pressed\n              event.preventDefault()\n              if (typeof event.stopPropagation !== \"undefined\")\n                event.stopPropagation()\n              event = _this._getEvent(event)\n              pos = _this.fromDocumentToCanvasCoordinate(event.clientX, event.clientY)\n              _this.onRightMouseDown(pos.x, pos.y, event.shiftKey, event.ctrlKey)\n              return false\n            case 2:\n              //Middle mouse button pressed\n              break\n            default:\n            //You have a strange mouse\n          }\n        } catch (exc) {\n          console.log(exc)\n        }\n      })\n\n\n      // Catch the dblclick and route them to the Canvas hook.\n      //\n      this.html.on(\"dblclick\", function (event) {\n        event = _this._getEvent(event)\n\n        _this.mouseDownX = event.clientX\n        _this.mouseDownY = event.clientY\n        let pos = _this.fromDocumentToCanvasCoordinate(event.clientX, event.clientY)\n        _this.onDoubleClick(pos.x, pos.y, event.shiftKey, event.ctrlKey)\n      })\n\n\n      // Catch the click event and route them to the canvas hook\n      //\n      this.html.on(\"click\", function (event) {\n        event = _this._getEvent(event)\n\n        // fire only the click event if we didn't move the mouse (drag&drop)\n        //\n        if (_this.mouseDownX === event.clientX || _this.mouseDownY === event.clientY) {\n          let pos = _this.fromDocumentToCanvasCoordinate(event.clientX, event.clientY)\n          _this.onClick(pos.x, pos.y, event.shiftKey, event.ctrlKey)\n        }\n      })\n\n      // Important: MozMousePixelScroll is required to prevent 1px scrolling\n      // in FF event if we call \"e.preventDefault()\"\n      this.html.on('MozMousePixelScroll DOMMouseScroll mousewheel', function (e) {\n        let event = _this._getEvent(e)\n        let pos = _this.fromDocumentToCanvasCoordinate(event.originalEvent.clientX, event.originalEvent.clientY)\n\n        let delta = 0\n        if (e.type === 'mousewheel') {\n          delta = (e.originalEvent.wheelDelta * -1)\n        } else if (e.type === 'DOMMouseScroll') {\n          delta = 40 * e.originalEvent.detail\n        }\n\n        let returnValue = _this.onMouseWheel(delta, pos.x, pos.y, event.shiftKey, event.ctrlKey)\n\n        if (returnValue === false) {\n          e.preventDefault()\n        }\n      })\n\n      // Catch the keyUp and CTRL-key and route them to the Canvas hook.\n      //\n      this.keyupCallback = function (event) {\n        // don't initiate the delete command if the event comes from an INPUT field. In this case the user want delete\n        // a character in the input field and not the related shape\n        let target = $(event.target)\n        if (!target.is(\"input\") && !target.is(\"textarea\")) {\n          _this.editPolicy.each(function (i, policy) {\n            if (policy instanceof draw2d.policy.canvas.KeyboardPolicy) {\n              policy.onKeyUp(_this, event.keyCode, event.shiftKey, event.ctrlKey)\n            }\n          })\n        }\n      }\n      $(document).bind(\"keyup\", this.keyupCallback)\n\n      // Catch the keyDown and CTRL-key and route them to the Canvas hook.\n      //\n      this.keydownCallback = function (event) {\n        // don't initiate the delete command if the event comes from an INPUT field. In this case the user want delete\n        // a character in the input field and not the related shape\n        let target = $(event.target)\n        if (!target.is(\"input\") && !target.is(\"textarea\")) {\n          _this.editPolicy.each(function (i, policy) {\n            if (policy instanceof draw2d.policy.canvas.KeyboardPolicy) {\n              policy.onKeyDown(_this, event.keyCode, event.shiftKey, event.ctrlKey)\n            }\n          })\n        }\n      }\n      $(document).bind(\"keydown\", this.keydownCallback)\n\n    },\n\n    /**\n     *\n     * Call this method if you didn't need the canvas anymore. The method unregister all even handlers\n     * and frees all resources. The canvas is unusable after this call\n     *\n     * @since. 4.7.4\n     */\n    destroy: function () {\n      this.clear()\n      $(document).unbind(\"keydown\", this.keydownCallback)\n      $(document).unbind(\"keyup\", this.keyupCallback)\n      // reset the event handlers of the canvas without any notice\n      //\n      this.eventSubscriptions = {}\n\n      try {\n        this.paper.remove()\n      } catch (exc) {\n        // breaks in some ie7 version....don't care about this because ie7/8 isn't a state of the art browser  ;-)\n      }\n    },\n\n    /**\n     *\n     * Reset the canvas and delete all model elements.<br>\n     * You can now reload another model to the canvas with a {@link draw2d.io.Reader}\n     *\n     * @since 1.1.0\n     * @returns {this}\n     */\n    clear: function () {\n      // notice all listener that the canvas will be cleared\n      this.fireEvent(\"clear\")\n\n      let _this = this\n\n      this.lines.clone().each(function (i, e) {\n        _this.remove(e)\n      })\n\n      this.figures.clone().each(function (i, e) {\n        _this.remove(e)\n      })\n\n      this.zoomFactor = 1.0\n      this.selection.clear()\n      this.currentDropTarget = null\n\n      // internal document with all figures, ports, ....\n      //\n      this.figures = new draw2d.util.ArrayList()\n      this.lines = new draw2d.util.ArrayList()\n      this.commonPorts = new draw2d.util.ArrayList()\n\n      this.commandStack.markSaveLocation()\n\n      // INTERSECTION/CROSSING handling for connections and lines\n      //\n      this.linesToRepaintAfterDragDrop = new draw2d.util.ArrayList()\n      this.lineIntersections = new draw2d.util.ArrayList()\n\n      return this\n    },\n\n    /**\n     *\n     * Callback for any kind of image export tools to trigger the canvas to hide all unwanted\n     * decorations. The method is called e.g. from the draw2d.io.png.Writer\n     *\n     * @since 4.0.0\n     * @@interface\n     */\n    hideDecoration: function () {\n    },\n\n    /**\n     *\n     * callback method for any image export writer to reactivate the decoration\n     * of the canvas. e.g. grids, rulers,...\n     *\n     *\n     * @since 4.0.0\n     * @template\n     */\n    showDecoration: function () {\n    },\n\n    /**\n     *\n     * Calculate all connection intersection of the canvas.\n     * Required for \"bridging\" or \"crossing decoration\"\n     *\n     * @private\n     */\n    calculateConnectionIntersection: function () {\n\n      this.lineIntersections = new draw2d.util.ArrayList()\n      let lines = this.getLines().clone()\n      while (lines.getSize() > 0) {\n        let l1 = lines.removeElementAt(0)\n        lines.each((ii, l2) => {\n          let partInter = l1.intersection(l2)\n          if (partInter.getSize() > 0) {\n            this.lineIntersections.add({line: l1, other: l2, intersection: partInter})\n            this.lineIntersections.add({line: l2, other: l1, intersection: partInter})\n          }\n        })\n      }\n\n      return this\n    },\n\n\n    /**\n     *\n     *\n     * Install a new selection and edit policy into the canvas\n     *\n     * @since 2.2.0\n     * @param {draw2d.policy.EditPolicy} policy\n     */\n    installEditPolicy: function (policy) {\n\n      // a canvas can handle only one selection policy\n      //\n      if (policy instanceof draw2d.policy.canvas.SelectionPolicy) {\n        // reset old selection before install new selection strategy\n        this.getSelection().getAll().each((i, figure) => {\n          figure.unselect()\n        })\n\n        // remove existing selection policy\n        this.editPolicy.grep((p) => {\n          let stay = !(p instanceof draw2d.policy.canvas.SelectionPolicy)\n          if (stay === false) {\n            p.onUninstall(this)\n          }\n          return stay\n        })\n      }\n      // only one zoom policy at once\n      //\n      else if (policy instanceof draw2d.policy.canvas.ZoomPolicy) {\n        // remove existing zoom policy\n        this.editPolicy.grep((p) => {\n          let stay = !(p instanceof draw2d.policy.canvas.ZoomPolicy)\n          if (stay === false) {\n            p.onUninstall(this)\n          }\n          return stay\n        })\n        // replace the short cut handle for faster access\n        this.zoomPolicy = policy\n      } else if (policy instanceof draw2d.policy.connection.ConnectionCreatePolicy) {\n        this.editPolicy.grep((p) => {\n          let stay = !(p instanceof draw2d.policy.connection.ConnectionCreatePolicy)\n          if (stay === false) {\n            p.onUninstall(this)\n          }\n          return stay\n        })\n      } else if (policy instanceof draw2d.policy.canvas.DropInterceptorPolicy) {\n        // think about if I allow to install only one drop policy\n      }\n\n      // remove doublicate edit policies\n      if(policy.NAME) {\n        this.uninstallEditPolicy(policy.NAME)\n      }\n\n      policy.onInstall(this)\n      this.editPolicy.add(policy)\n\n      return this\n    },\n\n    /**\n     *\n     *\n     * UnInstall the selection and edit policy from the canvas.\n     *\n     * @since 2.2.0\n     * @param {draw2d.policy.EditPolicy|String} policy\n     */\n    uninstallEditPolicy: function (policy) {\n      if (policy === null) {\n        return //silently\n      }\n\n      // either remove exact the policy instance...\n      //\n      let removed = this.editPolicy.remove(policy)\n      if (removed !== null) {\n        removed.onUninstall(this)\n        if (removed instanceof draw2d.policy.canvas.ZoomPolicy) {\n          this.zoomPolicy = null\n        }\n      } else {\n        // ..or all of the same class if the policy isn't installed before\n        // With this kind of behaviour it is possible to deinstall all policies with\n        // the same class at once\n        //\n        let _this = this\n        let name = (typeof policy === \"string\") ? policy : policy.NAME\n        this.editPolicy.grep(function (p) {\n          if (p.NAME === name) {\n            p.onUninstall(_this)\n            // remove short cut handle to the zoom policy\n            if (p instanceof draw2d.policy.canvas.ZoomPolicy) {\n              _this.zoomPolicy = null\n            }\n            return false\n          }\n          return true\n        })\n      }\n      return this\n    },\n\n    getDropInterceptorPolicies: function () {\n      return this.editPolicy.clone().grep(function (p) {\n        return (p instanceof draw2d.policy.canvas.DropInterceptorPolicy)\n      })\n    },\n\n    /**\n     *\n     * Set the new zoom factor for the canvas. The value must be between [0.01..10]\n     *\n     *     // you can register an eventhandler if the zoom factor did change\n     *     canvas.on(\"zoom\", function(emitterFigure, zoomData){\n     *         alert(\"canvas zoomed to:\"+zoomData.value);\n     *     });\n     *\n     * @param {Number} zoomFactor new zoom factor. range [0.001..10]. 1.0 is no zoom.\n     * @param {Boolean} [animated] set it to true for smooth zoom in/out\n     */\n    setZoom: function (zoomFactor, animated) {\n      // redirect this legacy method to the new CanvasEditPolicy\n      //\n      if (this.zoomPolicy) {\n        this.zoomPolicy.setZoom(zoomFactor, animated)\n      }\n    },\n\n    /**\n     *\n     * Return the current zoom factor of the canvas.\n     *\n     * @returns {Number}\n     */\n    getZoom: function () {\n      return this.zoomFactor\n    },\n\n    /**\n     *\n     * Return the dimension of the drawing area\n     *\n     * @since 4.4.0\n     * @returns {draw2d.geo.Rectangle}\n     */\n    getDimension: function () {\n      return new draw2d.geo.Rectangle(0, 0, this.initialWidth, this.initialHeight)\n    },\n\n    /**\n     *\n     * Tells the canvas to resize. If you do not specific any parameters\n     * the canvas will attempt to determine the height and width by the enclosing bounding box\n     * of all elements and set the dimension accordingly. If you would like to set the dimension\n     * explicitly pass in an draw2d.geo.Rectangle or an object with <b>height</b> and <b>width</b> properties.\n     *\n     * @since 4.4.0\n     * @param {draw2d.geo.Rectangle} [dim] the dimension to set or null for autodetect\n     * @param {Number} [height] the height of the canvas if the first argument is a number and not a Rectangle\n     */\n    setDimension: function (dim, height) {\n      if (typeof dim === \"undefined\") {\n        let widths = this.getFigures().clone().map(function (f) {\n          return f.getAbsoluteX() + f.getWidth()\n        })\n        let heights = this.getFigures().clone().map(function (f) {\n          return f.getAbsoluteY() + f.getHeight()\n        })\n        this.initialHeight = Math.max(...heights.asArray())\n        this.initialWidth = Math.max(...widths.asArray())\n      } else if (dim instanceof draw2d.geo.Rectangle) {\n        this.initialWidth = dim.w\n        this.initialHeight = dim.h\n      } else if (typeof dim.width === \"number\" && typeof dim.height === \"number\") {\n        this.initialWidth = dim.width\n        this.initialHeight = dim.height\n      } else if (typeof dim === \"number\" && typeof height === \"number\") {\n        this.initialWidth = dim\n        this.initialHeight = height\n      }\n      this.html.css({\"width\": this.initialWidth + \"px\", \"height\": this.initialHeight + \"px\"})\n      this.paper.setSize(this.initialWidth, this.initialHeight)\n      this.setZoom(this.zoomFactor, false)\n\n      return this\n    },\n\n\n    /**\n     *\n     * Transforms a document coordinate to canvas coordinate.\n     *\n     * @param {Number} x the x coordinate relative to the window\n     * @param {Number} y the y coordinate relative to the window\n     *\n     * @returns {draw2d.geo.Point} The coordinate in relation to the canvas [0,0] position\n     */\n    fromDocumentToCanvasCoordinate: function (x, y) {\n      return new draw2d.geo.Point(\n        (x - this.getAbsoluteX() + this.getScrollLeft()) * this.zoomFactor,\n        (y - this.getAbsoluteY() + this.getScrollTop()) * this.zoomFactor)\n    },\n\n    /**\n     *\n     * Transforms a canvas coordinate to document coordinate.\n     *\n     * @param {Number} x the x coordinate in the canvas\n     * @param {Number} y the y coordinate in the canvas\n     *\n     * @returns {draw2d.geo.Point} the coordinate in relation to the document [0,0] position\n     */\n    fromCanvasToDocumentCoordinate: function (x, y) {\n      return new draw2d.geo.Point(\n        ((x * (1 / this.zoomFactor)) + this.getAbsoluteX() - this.getScrollLeft()),\n        ((y * (1 / this.zoomFactor)) + this.getAbsoluteY() - this.getScrollTop()))\n    },\n\n    /**\n     *\n     * The DOM host of the canvas\n     *\n     * @returns {HTMLElement}\n     */\n    getHtmlContainer: function () {\n      return this.html\n    },\n\n\n    /**\n     *\n     * Return a common event object independed if we run on an iPad or desktop.\n     *\n     * @param event\n     * @returns {DOMEventObject}\n     * @private\n     */\n    _getEvent: function (event) {\n      // check for iPad, Android touch events\n      //\n      if (typeof event.originalEvent !== \"undefined\") {\n        if (event.originalEvent.touches && event.originalEvent.touches.length) {\n          return event.originalEvent.touches[0]\n        } else if (event.originalEvent.changedTouches && event.originalEvent.changedTouches.length) {\n          return event.originalEvent.changedTouches[0]\n        }\n      }\n      return event\n    },\n\n    /**\n     *\n     *\n     * Set the area which are scrolling the canvas. This can be a jquery selector or\n     * a jQuery node.\n     *\n     * @param {String/HTMLElement} elementSelector\n     * @returns {this}\n     **/\n    setScrollArea: function (elementSelector) {\n      this.scrollArea = $(elementSelector)\n\n      return this\n    },\n\n    /**\n     *\n     *\n     * return the scrolling area of the canvas. This is jQuery object\n     *\n     * @returns {JQueryElement}\n     **/\n    getScrollArea: function () {\n      return this.scrollArea\n    },\n\n    /**\n     *\n     * The left scroll position.\n     *\n     * @returns {Number} the left scroll offset of the canvas\n     **/\n    getScrollLeft: function () {\n      return this.getScrollArea().scrollLeft()\n    },\n\n    /**\n     *\n     * The top scroll position\n     *\n     * @returns {Number} the top scroll offset of the cnavas.\n     **/\n    getScrollTop: function () {\n      return this.getScrollArea().scrollTop()\n    },\n\n    /**\n     *\n     * Set left scroll position.\n     *\n     * @param {Number} left the left scroll offset of the canvas\n     **/\n    setScrollLeft: function (left) {\n      this.getScrollArea().scrollLeft(left)\n\n      return this\n    },\n\n    /**\n     *\n     * set top scroll position\n     *\n     * @param {Number} top the top scroll offset of the canvas.\n     **/\n    setScrollTop: function (top) {\n      this.getScrollArea().scrollTop(top)\n\n      return this\n    },\n\n    /**\n     *\n     * set the new scroll position of the canvas\n     *\n     * @param {Number} top the top scroll offset of the canvas.\n     * @param {Number} left the left scroll offset of the canvas\n     * @since 5.8.0\n     **/\n    scrollTo: function (top, left) {\n      this.getScrollArea().scrollTop(top).scrollLeft(left)\n\n      return this\n    },\n\n    /**\n     *\n     * The absolute document x offset.\n     *\n     * @returns {Number}\n     **/\n    getAbsoluteX: function () {\n      return this.html.offset().left\n    },\n\n    /**\n     *\n     * The absolute document y offset.\n     *\n     * @returns {Number}\n     **/\n    getAbsoluteY: function () {\n      return this.html.offset().top\n    },\n\n\n    /**\n     *\n     * Return the width of the canvas\n     *\n     * @returns {Number}\n     **/\n    getWidth: function () {\n      return this.html.width()\n    },\n\n\n    /**\n     *\n     * Return the height of the canvas.\n     *\n     * @returns {Number}\n     **/\n    getHeight: function () {\n      return this.html.height()\n    },\n\n\n    /**\n     *\n     * Add a figure at the given x/y coordinate. This method fires an event.\n     *\n     * Example:\n     *\n     *     canvas.on(\"figure:add\", function(emitter, event){\n     *        alert(\"figure added:\");\n     *     });\n     *\n     *     // or more general if you want catch all figure related events\n     *     //\n     *     canvas.on(\"figure\", function(emitter, event){\n     *        // use event.figure.getCanvas()===null to determine if the\n     *        // figure part of the canvas\n     *\n     *        alert(\"figure added or removed:\");\n     *     });\n     *\n     * @param {draw2d.Figure} figure The figure to add.\n     * @param {Number/draw2d.geo.Point} [x] The new x coordinate of the figure or the x/y coordinate if it is an draw2d.geo.Point\n     * @param {Number} [y] The y position.\n     **/\n    add: function (figure, x, y) {\n      if (figure.getCanvas() === this) {\n        return\n      }\n\n      if (figure instanceof draw2d.shape.basic.Line) {\n        this.linesToRepaintAfterDragDrop = this.lines\n        this.lines.add(figure)\n      } else {\n        this.figures.add(figure)\n      }\n      \n      if (typeof x !== \"undefined\") {\n        figure.setPosition(x,y)\n      }\n\n      figure.setCanvas(this)\n\n      // to avoid drag&drop outside of this canvas\n      figure.installEditPolicy(this.regionDragDropConstraint)\n\n      // important initial call\n      figure.getShapeElement()\n\n      // init a repaint of the figure. This enforce that all properties\n      // ( color, dim, stroke,...) will be set and pushed to SVG node.\n      figure.repaint()\n\n      // fire the figure:add event before the \"move\" event and after the figure.repaint() call!\n      //   - the move event can only be fired if the figure part of the canvas.\n      //     and in this case the notification event should be fired to the listener before\n      this.fireEvent(\"figure:add\", {figure: figure, canvas: this})\n\n      // fire the event that the figure is part of the canvas\n      figure.fireEvent(\"added\", {figure: figure, canvas: this})\n\n      // ...now we can fire the initial move event\n      figure.fireEvent(\"move\", {figure: figure, x: figure.getX(), y: figure.getY(), dx: 0, dy: 0})\n\n      // this is only required if the used router requires the crossing information\n      // of the connections\n      if (figure instanceof draw2d.shape.basic.PolyLine) {\n        this.calculateConnectionIntersection()\n        this.linesToRepaintAfterDragDrop.each((i, line) => {\n          line.svgPathString = null\n          line.repaint()\n        })\n        this.linesToRepaintAfterDragDrop = new draw2d.util.ArrayList()\n      }\n\n      return this\n    },\n\n\n    /**\n     *\n     * Remove a figure or connection from the Canvas. This method fires an event\n     * which can be catched.\n     *\n     * Example:\n     *\n     *     canvas.on(\"figure:remove\", function(emitter, event){\n     *        alert(\"figure removed:\");\n     *     });\n     *\n     *     // or more general if you want catch all figure related events\n     *     //\n     *     canvas.on(\"figure\", function(emitter, event){\n     *        // use event.figure.getCanvas()===null to determine if the\n     *        // figure part of the canvas\n     *\n     *        alert(\"figure added or removed:\");\n     *     });\n     *\n     *\n     * @param {draw2d.Figure} figure The figure to remove\n     **/\n    remove: function (figure) {\n      // don't fire events of calll callbacks if the fire isn'T part of this canvas\n      //\n      if (figure.getCanvas() !== this) {\n        return this\n      }\n\n      // remove the figure from a selection handler as well and cleanup the\n      // selection feedback\n      if (this.getSelection().contains(figure)) {\n        this.editPolicy.each((i, policy) => {\n          if (typeof policy.unselect === \"function\") {\n            policy.unselect(this, figure)\n          }\n        })\n      }\n\n      if (figure instanceof draw2d.shape.basic.Line) {\n        this.lines.remove(figure)\n      } else {\n        this.figures.remove(figure)\n      }\n\n      figure.setCanvas(null)\n\n      if (figure instanceof draw2d.Connection) {\n        figure.disconnect()\n      }\n\n      this.fireEvent(\"figure:remove\", {figure: figure})\n\n      figure.fireEvent(\"removed\", {figure: figure, canvas: this})\n\n      return this\n    },\n\n    /**\n     *\n     * Returns all lines/connections in this workflow/canvas.<br>\n     *\n     * @returns {draw2d.util.ArrayList}\n     **/\n    getLines: function () {\n      return this.lines\n    },\n\n    /**\n     *\n     * Returns the internal figures.<br>\n     *\n     * @returns {draw2d.util.ArrayList}\n     **/\n    getFigures: function () {\n      return this.figures\n    },\n\n    /**\n     *\n     * Returns the line or connection with the given id.\n     *\n     * @param {String} id The id of the line.\n     *\n     * @returns {draw2d.shape.basic.Line}\n     **/\n    getLine: function (id) {\n      let count = this.lines.getSize()\n      for (let i = 0; i < count; i++) {\n        let line = this.lines.get(i)\n        if (line.getId() === id) {\n          return line\n        }\n      }\n      return null\n    },\n\n    /**\n     *\n     * Returns the figure with the given id.\n     *\n     * @param {String} id The id of the figure.\n     * @returns {draw2d.Figure}\n     **/\n    getFigure: function (id) {\n      let figure = null\n      this.figures.each((i, e) => {\n        if (e.id === id) {\n          figure = e\n          return false\n        }\n      })\n      return figure\n    },\n\n    /**\n     *\n     * Return all intersections draw2d.geo.Point between the given line and all other\n     * lines in the canvas.\n     *\n     * @param {draw2d.shape.basic.Line} line the line for the intersection test\n     * @returns {draw2d.util.ArrayList}\n     */\n    getIntersection: function (line) {\n      let result = new draw2d.util.ArrayList()\n\n      this.lineIntersections.each((i, entry) => {\n        if (entry.line === line) {\n          entry.intersection.each((j, p) => {\n            result.add({x: p.x, y: p.y, justTouching: p.justTouching, other: entry.other})\n          })\n        }\n      })\n\n      return result\n    },\n\n\n    /**\n     *\n     *  Adjust the coordinate with the installed SnapToHelper.\n     *\n     * @param  {draw2d.Figure} figure The related figure\n     * @param  {draw2d.geo.Point} pos The position to adjust\n     *\n     * @returns {draw2d.geo.Point} the adjusted position\n     * @private\n     **/\n    snapToHelper: function (figure, pos) {\n      // disable snapToPos if we have select more than one element\n      // which are currently in Drag&Drop operation\n      //\n      if (this.getSelection().getSize() > 1) {\n        return pos\n      }\n\n      let orig = pos.clone()\n      this.editPolicy.each((i, policy) => {\n        if (policy instanceof draw2d.policy.canvas.SnapToEditPolicy) {\n          pos = policy.snap(this, figure, pos, orig)\n        }\n      })\n\n      return pos\n    },\n\n\n    /**\n     *\n     * Register a port to the canvas. This is required for other ports to find a valid drop target.\n     *\n     * @param {draw2d.Port} port The new port which has been added to the Canvas.\n     **/\n    registerPort: function (port) {\n      // All elements have the same drop targets.\n      //\n      if (!this.commonPorts.contains(port)) {\n        this.commonPorts.add(port)\n      }\n\n      return this\n    },\n\n    /**\n     *\n     * Remove a port from the internal cnavas registration. Now other ports can't find the\n     * port anymore as drop target. The port itself is still visible.\n     *\n     * @param {draw2d.Port} port The port to unregister as potential drop target\n     * @private\n     * @returns {this}\n     **/\n    unregisterPort: function (port) {\n      this.commonPorts.remove(port)\n\n      return this\n    },\n\n    /**\n     *\n     * Return all ports in the canvas\n     *\n     * @returns {draw2d.util.ArrayList} all ports from all figures\n     */\n    getAllPorts: function () {\n      return this.commonPorts\n    },\n\n    /**\n     *\n     * Returns the command stack for the Canvas. Required for undo/redo support.\n     *\n     * @returns {draw2d.command.CommandStack}\n     **/\n    getCommandStack: function () {\n      return this.commandStack\n    },\n\n    /**\n     *\n     * Returns the current selected figure in the Canvas.\n     *\n     * @returns {draw2d.Figure}\n     **/\n    getPrimarySelection: function () {\n      return this.selection.getPrimary()\n    },\n\n    /**\n     *\n     * Returns the current selection.\n     *\n     * @returns {draw2d.Selection}\n     **/\n    getSelection: function () {\n      return this.selection\n    },\n\n    /**\n     *\n     * Set the current selected figure or figures in the canvas.<br>\n     * <br>\n     * You can hand over a draw2d.util.ArrayList since version 4.8.0 for multiple selection.\n     *\n     * @param {draw2d.Figure| draw2d.util.ArrayList} object The figure or list of figures to select.\n     * @returns {this}\n     **/\n    setCurrentSelection: function (object) {\n      // deselect the current selected figures\n      //\n      // clone the array (getAll) before iterate and modify the initial array\n      this.selection.getAll().each((i, e) => {\n        this.editPolicy.each((i, policy) => {\n          if (typeof policy.unselect === \"function\") {\n            policy.unselect(this, e)\n          }\n        })\n      })\n      this.addSelection(object)\n\n      return this\n    },\n\n    /**\n     *\n     * Add the current figure to the selection. If a single selection policy is installed in the\n     * canvas the selection before is reseted and the figure is the one and only selection.\n     *\n     * @param {draw2d.Figure | draw2d.util.ArrayList} object The figure(s) to add to the selection\n     * @since 4.6.0\n     * @returns {this}\n     **/\n    addSelection: function (object) {\n\n      let add = (i, figure) =>{\n        this.editPolicy.each( (i, policy) =>{\n          if (typeof policy.select === \"function\") {\n            policy.select(this, figure)\n          }\n        })\n      }\n\n      if (object instanceof draw2d.util.ArrayList || object instanceof draw2d.Selection) {\n        object.each(add)\n      } else {\n        add(0, object)\n      }\n\n      return this\n    },\n\n\n    /**\n     *\n     * Returns the best figure at the location [x,y]. It is a simple hit test. Keep in mind that only visible objects\n     * are returned.\n     *\n     *\n     * @param {Number} x The x position.\n     * @param {Number} y The y position.\n     * @param {draw2d.Figure|Array|Class} [blacklist] The figures or class which should be ignored.\n     * @param {draw2d.Figure|Array|Class} [whitelist] The figures or class should be considered.\n     *\n     * @returns {draw2d.Figure}\n     **/\n    getBestFigure: function (x, y, blacklist, whitelist) {\n      if (!Array.isArray(blacklist)) {\n        if (blacklist)\n          blacklist = [blacklist]\n        else\n          blacklist = []\n      }\n\n      if (!Array.isArray(whitelist)) {\n        if (whitelist)\n          whitelist = [whitelist]\n        else\n          whitelist = []\n      }\n\n      let result = null\n      let testFigure = null\n\n\n      let isInList = function (testFigure, list) {\n        for (let i = 0, len = list.length; i < len; i++) {\n          let considering = list[i]\n          if (typeof considering === \"function\") {\n            if (testFigure instanceof considering) {\n              return true\n            }\n          } else if ((considering === testFigure) || (considering.contains(testFigure))) {\n            return true\n          }\n        }\n        return false\n      }\n      let isInBlacklist = function (item) {\n        return isInList(item, blacklist)\n      }\n      // empty whitelist means that every kind of object is allowed\n      let isInWhitelist = whitelist.length === 0 ? function () {\n        return true\n      } : function (item) {\n        return isInList(item, whitelist)\n      }\n\n\n      // tool method to check recursive a figure for hitTest\n      //\n      let checkRecursive = function (children) {\n        children.each(function (i, e) {\n          let c = e.figure\n          checkRecursive(c.children)\n          if (result === null && c.isVisible() && c.hitTest(x, y) && !isInBlacklist(c) && isInWhitelist(c)) {\n            result = c\n          }\n          return result === null // break the each-loop if we found an element\n        })\n      }\n\n\n      // ResizeHandles\n      //\n      for (let i = 0, len = this.resizeHandles.getSize(); i < len; i++) {\n        testFigure = this.resizeHandles.get(i)\n        if (testFigure.isVisible() && testFigure.hitTest(x, y) && !isInBlacklist(testFigure) && isInWhitelist(testFigure)) {\n          return testFigure\n        }\n      }\n\n      // Checking ports\n      //\n      for (let i = 0, len = this.commonPorts.getSize(); i < len; i++) {\n        let port = this.commonPorts.get(i)\n        // check first a children of the figure\n        //\n        checkRecursive(port.children)\n\n        if (result === null && port.isVisible() && port.hitTest(x, y) && !isInBlacklist(port) && isInWhitelist(port)) {\n          result = port\n        }\n\n        if (result !== null) {\n          return result\n        }\n      }\n\n\n      //  Check now the common objects.\n      //  run reverse to aware the z-oder of the figures\n      for (let i = (this.figures.getSize() - 1); i >= 0; i--) {\n        let figure = this.figures.get(i)\n        // check first a children of the figure\n        //\n        checkRecursive(figure.children)\n\n        // ...and the figure itself\n        //\n        if (result === null && figure.isVisible() && figure.hitTest(x, y) && !isInBlacklist(figure) && isInWhitelist(figure)) {\n          result = figure\n          break\n        }\n      }\n\n      let figureResult = result\n      let childResult = null\n      let lineResult = this.getBestLine(x, y, blacklist, whitelist)\n      result = null\n\n\n      // Check the children of the lines as well\n      // Not selectable/draggable. But should receive onClick/onDoubleClick events\n      // as well.\n      let count = this.lines.getSize()\n      for (let i = 0; i < count; i++) {\n        let line = this.lines.get(i)\n        // check first a children of the figure\n        //\n        checkRecursive(line.children)\n\n        if (result !== null) {\n          childResult = result\n          break\n        }\n      }\n\n      let figureIndex = figureResult !== null ? $(figureResult.shape.node).index() : -1\n      let childIndex = childResult !== null ? $(childResult.shape.node).index() : -1\n      let lineIndex = lineResult !== null ? $(lineResult.shape.node).index() : -1\n      let array = [\n        {i: figureIndex, f: figureResult},\n        {i: childIndex, f: childResult},\n        {i: lineIndex, f: lineResult}\n      ]\n      array = array.filter((e) => e.i !== -1);\n      array = array.sort((a, b) => b.i - a.i)\n\n\n      if (array.length > 0) {\n        result = array[0].f\n      }\n\n      return result\n    },\n\n\n    /**\n     *\n     * Return the line which match the hands over coordinate\n     *\n     * @param {Number} x the x-coordinate for the hit test\n     * @param {Number} y the x-coordinate for the hit test\n     * @param {draw2d.shape.basic.Line} [lineToIgnore] a possible line which should be ignored for the hit test\n     *\n     * @private\n     * @returns {draw2d.shape.basic.Line}\n     **/\n    getBestLine: function (x, y, lineToIgnore) {\n      if (!Array.isArray(lineToIgnore)) {\n        if (lineToIgnore instanceof draw2d.Figure) {\n          lineToIgnore = [lineToIgnore]\n        } else {\n          lineToIgnore = []\n        }\n      }\n      let count = this.lines.getSize()\n\n      for (let i = 0; i < count; i++) {\n        let line = this.lines.get(i)\n        if (line.isVisible() === true && line.hitTest(x, y) === true && $.inArray(line, lineToIgnore) === -1) {\n          return line\n        }\n      }\n      return null\n    },\n\n\n    /**\n     *\n     * Called by the framework during drag&drop operations.<br>\n     * Droppable can be setup with:\n     * <pre>\n     *    $(\".draw2d_droppable\").draggable({\n     *         appendTo:\"#container\",\n     *         stack:\"#container\",\n     *         zIndex: 27000,\n     *         helper:\"clone\",\n     *         start: function(e, ui){$(ui.helper).addClass(\"shadow\");}\n     *    });\n     * </pre>\n     * Draw2D use the jQuery draggable/droppable lib. Please inspect\n     * http://jqueryui.com/demos/droppable/ for further information.\n     *\n     * @param {HTMLElement} draggedDomNode The DOM element which is currently dragging\n     *\n     * @template\n     **/\n    onDragEnter: function (draggedDomNode) {\n    },\n\n\n    /**\n     *\n     * Called if the DragDrop object is moving around.<br>\n     * <br>\n     * Draw2D use the jQuery draggable/droppable lib. Please inspect\n     * http://jqueryui.com/demos/droppable/ for further information.\n     *\n     * @param {HTMLElement} draggedDomNode The dragged DOM element.\n     * @param {Number} x the x coordinate of the drag\n     * @param {Number} y the y coordinate of the drag\n     *\n     * @template\n     **/\n    onDrag: function (draggedDomNode, x, y) {\n    },\n\n\n    /**\n     *\n     * Called if the DragDrop object leaving the current hover figure.<br>\n     * <br>\n     * Graphiti use the jQuery draggable/droppable lib. Please inspect\n     * http://jqueryui.com/demos/droppable/ for further information.\n     *\n     * @param {HTMLElement} draggedDomNode The figure which is currently dragging\n     *\n     * @template\n     **/\n    onDragLeave: function (draggedDomNode) {\n    },\n\n\n    /**\n     *\n     * Called if the user drop the droppedDomNode onto the canvas.<br>\n     * <br>\n     * Draw2D use the jQuery draggable/droppable lib. Please inspect\n     * http://jqueryui.com/demos/droppable/ for further information.\n     *\n     * @param {HTMLElement} droppedDomNode The dropped DOM element.\n     * @param {Number} x the x-coordinate of the mouse up event\n     * @param {Number} y the y-coordinate of the mouse up event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @template\n     **/\n    onDrop: function (droppedDomNode, x, y, shiftKey, ctrlKey) {\n    },\n\n\n    /**\n     *\n     * Callback method for the double click event. The x/y coordinates are relative to the top left\n     * corner of the canvas.\n     *\n     * @private\n     **/\n    onDoubleClick: function (x, y, shiftKey, ctrlKey) {\n      // check if a line has been hit\n      //\n      let figure = this.getBestFigure(x, y)\n\n      // or a line/connection. May we should test the line before a figure..?\n      // (since 4.0.0)\n      if (figure === null) {\n        figure = this.getBestLine(x, y)\n      }\n\n      this.fireEvent(\"dblclick\", {figure: figure, x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n\n      // forward the event to all install policies as well.\n      // (since 4.0.0)\n      this.editPolicy.each(function (i, policy) {\n        policy.onDoubleClick(figure, x, y, shiftKey, ctrlKey)\n      })\n    },\n\n    /**\n     *\n     * @param {Number} x the x coordinate of the event\n     * @param {Number} y the y coordinate of the event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @private\n     **/\n    onClick: function (x, y, shiftKey, ctrlKey) {\n      // check if a figure has been hit\n      //\n      let figure = this.getBestFigure(x, y)\n\n      this.fireEvent(\"click\", {\n        figure: figure,\n        x: x,\n        y: y,\n        relX: figure !== null ? x - figure.getAbsoluteX() : 0,\n        relY: figure !== null ? y - figure.getAbsoluteY() : 0,\n        shiftKey: shiftKey,\n        ctrlKey: ctrlKey\n      })\n\n      // forward the event to all install policies as well.\n      // (since 3.0.0)\n      this.editPolicy.each(function (i, policy) {\n        policy.onClick(figure, x, y, shiftKey, ctrlKey)\n      })\n    },\n\n    /**\n     *\n     * The user has triggered a right click. Redirect them to a responsible figure.\n     *\n     * @param {Number} x The x-coordinate of the click\n     * @param {Number} y The y-coordinate of the click\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @private\n     * @since 1.1.0\n     **/\n    onRightMouseDown: function (x, y, shiftKey, ctrlKey) {\n      let figure = this.getBestFigure(x, y)\n      this.fireEvent(\"contextmenu\", {figure: figure, x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n\n      if (figure !== null) {\n        figure.fireEvent(\"contextmenu\", {figure: figure, x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n        // @deprecated legacy call\n        figure.onContextMenu(x, y)\n\n        // forward the event to all installed policies of the figure\n        // soft migration from onHookXYZ to Policies.\n        // since 4.4.0\n        figure.editPolicy.each(function (i, policy) {\n          policy.onRightMouseDown(figure, x, y, shiftKey, ctrlKey)\n        })\n      }\n\n      // forward the event to all install policies as well.\n      // (since 4.4.0)\n      this.editPolicy.each(function (i, policy) {\n        policy.onRightMouseDown(figure, x, y, shiftKey, ctrlKey)\n      })\n\n    },\n\n    /**\n     *\n     * @param {Number} wheelDelta the delata of the wheel rotation\n     * @param {Number} x the x coordinate of the event\n     * @param {Number} y the y coordinate of the event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @private\n     **/\n    onMouseWheel: function (wheelDelta, x, y, shiftKey, ctrlKey) {\n      let returnValue = true\n      this.fireEvent(\"wheel\", {wheelDelta: wheelDelta, x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n\n      // forward the event to all install policies as well.\n      // (since 3.0.0)\n      this.editPolicy.each(function (i, policy) {\n        returnValue = policy.onMouseWheel(wheelDelta, x, y, shiftKey, ctrlKey) && returnValue\n      })\n\n      return returnValue\n    },\n\n\n    // NEW EVENT HANDLING SINCE VERSION 5.0.0\n    /**\n     *\n     * Execute all handlers and behaviors attached to the canvas for the given event type.\n     *\n     *\n     * @param {String} event the event to trigger\n     * @param {Object} [args] optional parameters for the triggered event callback\n     * @private\n     * @since 5.0.0\n     */\n    fireEvent: function (event, args) {\n      if (typeof this.eventSubscriptions[event] === 'undefined') {\n        return\n      }\n\n      let subscribers = this.eventSubscriptions[event]\n      for (let i = 0; i < subscribers.length; i++) {\n        try {\n          subscribers[i](this, args)\n        } catch (exc) {\n          console.log(exc)\n          console.log(subscribers[i])\n          debugger\n        }\n      }\n    },\n\n    /**\n     *\n     * Attach an event handler function for one or more events to the canvas.\n     * To remove events bound with .on(), see {@link #off}.\n     *\n     * possible events are:<br>\n     * <ul>\n     *   <li>reset</li>\n     *   <li>select</li>\n     * </ul>\n     *\n     * Example:\n     *\n     *     canvas.on(\"clear\", function(emitter, event){\n     *        alert(\"canvas.clear() called.\");\n     *     });\n     *\n     *     canvas.on(\"select\", function(emitter,event){\n     *        alert(\"figure selected\");\n     *     });\n     *\n     *     canvas.on(\"unselect\", function(emitter,event){\n     *        alert(\"figure unselected\");\n     *     });\n     * \n     * @param {String}   event One or more space-separated event types\n     * @param {Function} callback A function to execute when the event is triggered.\n     * @param {draw2d.Canvas} callback.emitter the emitter of the event\n     * @param {Object} [callback.obj] optional event related data\n     *\n     * @since 5.0.0\n     */\n    on: function (event, callback) {\n      let events = event.split(\" \")\n      for (let i = 0; i < events.length; i++) {\n        if (typeof this.eventSubscriptions[events[i]] === 'undefined') {\n          this.eventSubscriptions[events[i]] = []\n        }\n        this.eventSubscriptions[events[i]].push(callback)\n      }\n      return this\n    },\n\n    /**\n     *\n     * The `off()` method removes event handlers that were attached with {@link #on}.<br>\n     * Calling .off() with no arguments removes all handlers attached to the canvas.<br>\n     * <br>\n     * If a simple event name such as \"reset\" is provided, all events of that type are removed from the canvas.\n     *\n     *\n     * @param {String|Function} eventOrFunction the event name of the registerd function\n     * @since 5.0.0\n     */\n    off: function (eventOrFunction) {\n      if (typeof eventOrFunction === \"undefined\") {\n        this.eventSubscriptions = {}\n      } else if (typeof eventOrFunction === 'string') {\n        this.eventSubscriptions[eventOrFunction] = []\n      } else {\n        for (let event in this.eventSubscriptions) {\n          this.eventSubscriptions[event] = this.eventSubscriptions[event].filter(function (callback) {\n            return callback !== eventOrFunction\n          })\n        }\n      }\n\n      return this\n    }\n  })\n","import draw2d from 'packages'\n\ndraw2d.Configuration = {\n    version : \"@VERSION@\",\n    i18n : {\n        command : {\n            move : \"Move Shape\",\n            assignShape : \"Add Shapes to Composite\",\n            groupShapes : \"Group Shapes\",\n            ungroupShapes : \"Ungroup Shapes\",\n            deleteShape : \"Delete Shape\",\n            moveShape : \"Move Shape\",\n            moveLine : \"Move Line\",\n            addShape : \"Add Shape\",\n            moveVertex : \"Move Vertex\",\n            moveVertices : \"Move Vertices\",\n            deleteVertex : \"Delete Vertex\",\n            resizeShape : \"Resize Shape\",\n            rotateShape : \"Rotate Shape\",\n            collection : \"Execute Commands\",\n            addVertex : \"Add Vertex\",\n            changeAttributes:\"Change Attributes\",\n            connectPorts : \"Connect Ports\"\n        },\n        menu : {\n            deleteSegment : \"Delete Segment\",\n            addSegment : \"Add Segment\"\n        },\n        dialog : {\n            filenamePrompt : \"Enter Filename:\"\n        }\n    },\n\n    factory:{\n    \t// all selection policies calles this method to create a ResizeHandle.\n    \t// It is possible to replace this method with a custom implementation\n    \t// @since 5.2.0\n    \tcreateResizeHandle: function(owner, type, width, height){\n            // create a custom SelectionPolicy instead\n            console.log(\"deprecated call factory.createResizeHandle\");\n    \t\treturn new draw2d.ResizeHandle({ owner, type, width, height });\n    \t},\n    \t// The commands an canvas calles this method to create a new connection.\n    \t// all parameters are optional.\n    \t// @since 5.3.0\n        // @deprecated\n    \tcreateConnection: function(sourcePort, targetPort, callback, dropTarget){\n            console.log(\"deprecated call factory.createConnection\");\n            debugger;\n    \t    return new draw2d.Connection();\n    \t},\n        // @since 5.3.0\n    \tcreateInputPort: function(relatedFigure){\n    \t    return new draw2d.InputPort();\n    \t},\n        // @since 5.3.0\n        createOutputPort: function(relatedFigure){\n            return new draw2d.OutputPort();\n        },\n        // @since 5.3.0\n        createHybridPort: function(relatedFigure){\n            return new draw2d.HybridPort();\n        }\n    }\n};\n","import draw2d from 'packages'\n\n/**\n * @class\n *\n * Connections figures are used to display a line between two points. The Connection interface extends\n * {@link draw2d.shape.basic.PolyLine PolyLine}.<br>\n * The source and target endpoints of a connection are each defined using a {@link draw2d.layout.anchor.ConnectionAnchor ConnectionAnchor}.\n * These endpoints, along with any other points on the connection, are set by the connection's  {@link draw2d.layout.connection.ConnectionRouter ConnectionRouter}.\n * <br>\n * Usually every connection in a drawing has the same router instance. Connections with\n * common endpoints can share anchor instances as well.\n *\n * <h2>Connection Usage</h2>\n *\n * Connections are created and added just like any other figure. Unlike normal figures, you must not set the\n * bounds of a connection. Instead, you must provide the source and target port and let the connection router\n * calculate the connection's points. The connection then determines its own bounding box.<br>\n * <br>\n * A connection has a simple router by default - one that can connect the source and target anchors. But additional routers\n * are available and can be set on the connection. Some routers can handle constraints for the connection. Note that when\n * setting a routing constraint on a connection, you must first set the router which will use that constraint.<br>\n * <br>\n *\n * <b>TODO:<br></b>\n * <i>\n * A convenient way to share the router with all connections and to place connections above the drawing is to use a\n * ConnectionLayer. The layer has a connection router property which it shares with every child that's a connection.\n * You can update this property and easily change every connection's router at once.\n * </i>\n * <br>\n * <br>\n * <h2>Routing and Anchors</h2>\n * A connection always has a router and it must set at least two ports on the connection: the source and target\n * endpoints. By default, or when set to null, the connection's routing will be performed by an internal default router.\n * The ends are placed with the help of {@link draw2d.layout.anchor.ConnectionAnchor anchors}. An\n * {@link draw2d.layout.anchor.ConnectionAnchor anchors} is a fixed or calculated location, usually associated with some\n * figure. For example, the {@link draw2d.layout.anchor.ChopboxConnectionAnchor ChopboxAnchor} finds the point at which a\n * line going to the reference point intersects a box, such as the bounds of a figure. The reference point is either\n * the anchor at the opposite end, or a bendpoint or some other point nearest to the anchor.\n * <br>\n * {@img jsdoc_chopbox.gif ChopboxAnchor}\n * <br>\n * The router calculates the endpoints and any other points in the middle of the connection. It then sets the points on the\n * connection by calling {@link draw2d.shape.basic.PolyLine#addPoint Polyline.addPoint}. The connection's existing point list\n * can be reused to reduce garbage, but the points must be set on the connection anyway so that it knows about any changes made.\n * <br>\n * <h2>Adding Decorations and Children to Connections</h2>\n * Like most figures, Connection supports the addition of children. The children might be a label that\n * decorate the connection. The placement of each type of decoration can vary, so a {@link draw2d.layout.locator.ConnectionLocator ConnectionLocator}\n * is used to delegate to each child's constraint object, a Locator. <br>\n * <br>\n * {@link draw2d.decoration.connection.Decorator Decorator} can be used to create and render a rotatable shape at\n * the end or start of a connection like arrows or boxes. Examples are {@link draw2d.decoration.connection.ArrowDecorator ArrowDecorator}, {@link draw2d.decoration.connection.BarDecorator BarDecorator} or {@link draw2d.decoration.connection.CircleDecorator CircleDecorator}\n * <br>\n * <h2>Connection Layout</h2>\n * Connections extend the process of validation and layout to include routing. Since layout is the process of positioning children, routing must\n * come first. This allows a child's locator to operate on the connection's newly-routed points.<br>\n * Check out [Class System Guide](#!/guide/class_system) for additional reading.\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.basic.PolyLine\n */\n\ndraw2d.Connection = draw2d.shape.basic.PolyLine.extend(\n  /** @lends draw2d.Connection.prototype */\n  {\n\n    NAME: \"draw2d.Connection\",\n\n    /**\n     * Creates a new figure element which are not assigned to any canvas.\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function (attr, setter, getter) {\n      this.sourcePort = null\n      this.targetPort = null\n\n      this.oldPoint = null\n\n      this.sourceDecorator = null\n      /*:draw2d.ConnectionDecorator*/\n      this.targetDecorator = null\n      /*:draw2d.ConnectionDecorator*/\n\n      // decoration of the polyline\n      //\n      this.sourceDecoratorNode = null\n      this.targetDecoratorNode = null\n\n      // helper let to restore the initial visual representation if the user drag&drop\n      // the port outside of the browser window. In this case some events get lost and\n      // I can restore the initial state of the connection if the mouse comes in the browser window\n      // again.\n      this.isMoving = false\n\n      this.moveListener = (figure) => {\n        if (figure === this.sourcePort) {\n          this.setStartPoint(this.sourcePort.getAbsoluteX(), this.sourcePort.getAbsoluteY())\n        } else {\n          this.setEndPoint(this.targetPort.getAbsoluteX(), this.targetPort.getAbsoluteY())\n        }\n      }\n\n      this._super(\n        {\n          color: \"#129CE4\",\n          stroke: 2,\n          //    outlineStroke:1,\n          //    outlineColor:\"#ffffff\",\n          radius: 3,\n          ...attr},\n        {\n          sourceDecorator: this.setSourceDecorator,\n          targetDecorator: this.setTargetDecorator,\n          source: this.setSource,\n          target: this.setTarget,\n          ...setter\n       },\n        {\n          sourceDecorator: this.getSourceDecorator,\n          targetDecorator: this.getTargetDecorator,\n          source: this.getSource,\n          target: this.getTarget,\n          ...getter\n      })\n    },\n\n\n    /**\n     * @private\n     **/\n    disconnect: function () {\n      if (this.sourcePort !== null) {\n        this.sourcePort.off(this.moveListener)\n        this.sourcePort.connections.remove(this)\n\n        // fire the events to all listener\n        this.sourcePort.fireEvent(\"disconnect\", {port: this.sourcePort, connection: this})\n        this.canvas?.fireEvent(\"disconnect\", {port: this.sourcePort, connection: this})\n        this.sourcePort.onDisconnect(this)\n\n        this.fireSourcePortRouteEvent()\n      }\n\n      if (this.targetPort !== null) {\n        this.targetPort.off(this.moveListener)\n        this.targetPort.connections.remove(this)\n\n        // fire the events to all listener\n        this.targetPort.fireEvent(\"disconnect\", {port: this.targetPort, connection: this})\n        this.canvas?.fireEvent(\"disconnect\", {port: this.targetPort, connection: this})\n        this.targetPort.onDisconnect(this)\n\n        this.fireTargetPortRouteEvent()\n      }\n    },\n\n\n    /**\n     * @private\n     **/\n    reconnect: function () {\n      if (this.sourcePort !== null) {\n        this.sourcePort.on(\"move\", this.moveListener)\n        this.sourcePort.connections.add(this)\n\n        // fire the events to all listener\n        this.sourcePort.fireEvent(\"connect\", {port: this.sourcePort, connection: this})\n        this.canvas?.fireEvent(\"connect\", {port: this.sourcePort, connection: this})\n        this.sourcePort.onConnect(this)\n\n        this.fireSourcePortRouteEvent()\n      }\n\n      if (this.targetPort !== null) {\n        this.targetPort.on(\"move\", this.moveListener)\n        this.targetPort.connections.add(this)\n\n        // fire the events to all listener\n        this.targetPort.fireEvent(\"connect\", {port: this.targetPort, connection: this})\n        this.canvas?.fireEvent(\"connect\", {port: this.targetPort, connection: this})\n        this.targetPort.onConnect(this)\n\n        this.fireTargetPortRouteEvent()\n      }\n      this.routingRequired = true\n      this.repaint()\n    },\n\n\n    /**\n     * You can't drag&drop the resize handles of a connector.\n     *\n     * @returns {Boolean}\n     **/\n    isResizeable: function () {\n      return this.isDraggable()\n    },\n\n\n    /**\n     *\n     * Add a child figure to the Connection. The hands over figure doesn't support drag&drop\n     * operations. It's only a decorator for the connection.<br>\n     * Mainly for labels or other fancy decorations :-)\n     *\n     * @param {draw2d.Figure} child the figure to add as decoration to the connection.\n     * @param {draw2d.layout.locator.ConnectionLocator} locator the locator for the child.\n     * @param {Number} [index] optional index where to insert the figure\n     * @returns {this}\n     **/\n    add: function (child, locator, index) {\n      // just to ensure the right interface for the locator.\n      // The base class needs only 'draw2d.layout.locator.Locator'.\n      if (!(locator instanceof draw2d.layout.locator.ConnectionLocator)) {\n        throw \"Locator must implement the class draw2d.layout.locator.ConnectionLocator\"\n      }\n\n      this._super(child, locator, index)\n    },\n\n\n    /**\n     *\n     * Set the ConnectionDecorator for this object.\n     *\n     * @param {draw2d.decoration.connection.Decorator} decorator the new source decorator for the connection\n     * @returns {this}\n     **/\n    setSourceDecorator: function (decorator) {\n\n      this.sourceDecorator?.setParent(null)\n\n      this.sourceDecorator = decorator\n      this.routingRequired = true\n      this.sourceDecorator.setParent(this)\n\n      this.sourceDecoratorNode?.remove()\n      this.sourceDecoratorNode = null\n\n      this.repaint()\n\n      return this\n    },\n\n    /**\n     *\n     * Get the current source ConnectionDecorator for this object.\n     *\n     * @returns draw2d.decoration.connection.Decorator\n     **/\n    getSourceDecorator: function () {\n      return this.sourceDecorator\n    },\n\n    /**\n     *\n     * Set the ConnectionDecorator for this object.\n     *\n     * @param {draw2d.decoration.connection.Decorator} decorator the new target decorator for the connection\n     * @returns {this}\n     **/\n    setTargetDecorator: function (decorator) {\n      this.targetDecorator?.setParent(null)\n\n      this.targetDecorator = decorator\n      this.routingRequired = true\n      this.targetDecorator.setParent(this)\n\n      this.targetDecoratorNode?.remove()\n      this.targetDecoratorNode = null\n\n      this.repaint()\n\n      return this\n    },\n\n    /**\n     *\n     * Get the current target ConnectionDecorator for this object.\n     *\n     * @returns draw2d.decoration.connection.Decorator\n     **/\n    getTargetDecorator: function () {\n      return this.targetDecorator\n    },\n\n\n    /**\n     *\n     * Calculate the path of the polyline.\n     *\n     * @param {Object} routingHints some helper attributes for the router\n     * @param {Boolean} routingHints.startMoved is true if just the start location has moved\n     * @param {Boolean} routingHints.destMoved is true if the destination location has changed\n     * @private\n     */\n    calculatePath: function (routingHints) {\n\n      if (this.sourcePort === null || this.targetPort === null) {\n        return this\n      }\n\n      this._super(routingHints)\n\n      if (this.shape !== null) {\n        let z1 = this.sourcePort.getZOrder()\n        let z2 = this.targetPort.getZOrder()\n        this.toBack(z1 < z2 ? this.sourcePort:this.targetPort)\n      }\n\n      return this\n    },\n\n    /**\n     * @private\n     **/\n    repaint: function (attributes) {\n      if (this.repaintBlocked === true || \n          this.shape          === null || \n          this.sourcePort     === null || \n          this.targetPort     === null) {\n        return\n      }\n\n\n      this._super(attributes)\n\n      // paint the decorator if any exists\n      //\n      if (this.targetDecorator !== null && this.targetDecoratorNode === null) {\n        this.targetDecoratorNode = this.targetDecorator.paint(this.getCanvas().paper)\n      }\n\n      if (this.sourceDecorator !== null && this.sourceDecoratorNode === null) {\n        this.sourceDecoratorNode = this.sourceDecorator.paint(this.getCanvas().paper)\n      }\n\n      // translate/transform the decorations to the end/start of the connection\n      // and rotate them as well\n      //\n      if (this.sourceDecoratorNode !== null) {\n        let start = this.getVertices().first()\n        this.sourceDecoratorNode.transform(\"r\" + this.getStartAngle() + \",\" + start.x + \",\" + start.y + \" t\" + start.x + \",\" + start.y)\n        // propagate the color and the opacity to the decoration as well\n        this.sourceDecoratorNode.attr({opacity: this.alpha})\n        // apply the color of the connection if the decoration doesn't have any\n        if (this.sourceDecorator.getColor() === null) {\n          this.sourceDecoratorNode.attr({\"stroke\": \"#\" + this.lineColor.hex()})\n        } else {\n          this.sourceDecoratorNode.attr({\"stroke\": \"#\" + this.sourceDecorator.getColor().hex()})\n        }\n        this.sourceDecoratorNode.forEach(shape => {\n          shape.node.setAttribute(\"class\", this.cssClass !== null ? this.cssClass : \"\")\n        })\n      }\n\n      if (this.targetDecoratorNode !== null) {\n        let end = this.getVertices().last()\n        this.targetDecoratorNode.transform(\"r\" + this.getEndAngle() + \",\" + end.x + \",\" + end.y + \" t\" + end.x + \",\" + end.y)\n        this.targetDecoratorNode.attr({opacity: this.alpha})\n        // apply the color of the connection if the decoration doesn't have any\n        if (this.targetDecorator.getColor() === null) {\n          this.targetDecoratorNode.attr({stroke: this.lineColor.hash()})\n        } else {\n          this.targetDecoratorNode.attr({stroke: this.targetDecorator.getColor().hash()})\n        }\n        this.targetDecoratorNode.forEach(shape => {\n          shape.node.setAttribute(\"class\", this.cssClass !== null ? this.cssClass : \"\")\n        })\n      }\n    },\n\n    /**\n     *\n     * The x-offset related to the canvas.\n     * Didn't provided by a connection. Return always '0'. This is required\n     * for children position calculation. (e.g. Label decoration)\n     *\n     * @returns {Number} the x-offset to the parent figure\n     **/\n    getAbsoluteX: function () {\n      return 0\n    },\n\n\n    /**\n     *\n     * The y-offset related to the canvas.\n     * Didn't provided by a connection. Return always '0'. This is required\n     * for children position calculation. (e.g. Label decoration)\n     *\n     * @returns {Number} The y-offset to the parent figure.\n     **/\n    getAbsoluteY: function () {\n      return 0\n    },\n\n\n    postProcess: function (postProcessCache) {\n      this.router.postProcess(this, this.getCanvas(), postProcessCache)\n    },\n\n\n    /**\n     *\n     * Don't call them manually. This will be done by the framework.<br>\n     * Will be called if the object are moved via drag and drop.\n     * Sub classes can override this method to implement additional stuff. Don't forget to call\n     * the super implementation via <code>this._super(dx, dy, dx2, dy2);</code>\n     * @private\n     * @param {Number} dx the x difference between the start of the drag drop operation and now\n     * @param {Number} dy the y difference between the start of the drag drop operation and now\n     * @param {Number} dx2 The x diff since the last call of this dragging operation\n     * @param {Number} dy2 The y diff since the last call of this dragging operation\n     **/\n    onDrag: function (dx, dy, dx2, dy2) {\n      if (this.command === null) {\n        return\n      }\n\n      // Delegate the drag&drop operation to the router. The router has\n      // all the meta information how to update start/end vertices\n      //\n      this.router.onDrag(this, dx, dy, dx2, dy2)\n\n      this.command.updateVertices(this.getVertices().clone())\n\n      // notify all installed policies\n      //\n      this.editPolicy.each( (i, e) =>{\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.onDrag(this.canvas, this)\n        }\n      })\n\n      this.svgPathString = null\n      this.repaint()\n\n      // Update the resize handles if the user change the position of the\n      // element via an API call.\n      //\n      this.editPolicy.each((i, e) =>{\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.moved(this.canvas, this)\n        }\n      })\n\n      this.fireEvent(\"move\", {figure: this, dx: dx, dy: dx})\n    },\n\n\n    /**\n     *\n     * Moves the element so it is the closest to the viewer’s eyes, on top of other elements. Additional\n     * the internal model changed as well.\n     *\n     * Optional: Inserts current object in front of the given one.\n     *\n     * @param {draw2d.Figure} [figure] move current object in front of the given one.\n     * @since 3.0.0\n     */\n    toFront: function (figure) {\n      this._super(figure)\n\n      // ensure that the decoration is always in front of the connection\n      //\n      if (this.shape !== null) {\n        this.targetDecoratorNode?.insertAfter(this.shape)\n        this.sourceDecoratorNode?.insertAfter(this.shape)\n      }\n\n      return this\n    },\n\n    /**\n     *\n     * Moves the element to the background. Additional\n     * the internal model changed as well.\n     *\n     * @param {draw2d.Figure} [figure] move this object behind of the 'figure'.\n     * @since 4.7.2\n     */\n    toBack: function (figure) {\n      this._super(figure)\n\n      if (this.shape !== null) {\n        this.targetDecoratorNode?.insertAfter(this.shape)\n        this.sourceDecoratorNode?.insertAfter(this.shape)\n      }\n\n      return this\n    },\n\n\n    /**\n     *\n     * Return the recalculated position of the start point with the usage of\n     * the installed connection anchor locator.\n     *\n     * @returns {draw2d.geo.Point}\n     * @deprecated\n     **/\n    getStartPoint: function (refPoint) {\n      return this.getStartPosition(refPoint)\n    },\n\n    getStartPosition: function (refPoint) {\n      if (this.isMoving === false) {\n        if (refPoint) {\n          return this.sourcePort.getConnectionAnchorLocation(refPoint, this)\n        }\n        return this.sourcePort.getConnectionAnchorLocation(this.targetPort.getConnectionAnchorReferencePoint(this), this)\n      }\n\n      return this._super()\n    },\n\n    /**\n     *\n     * Return the recalculated position of the start point with the usage of\n     * the installed connection anchor locator.\n     *\n     * @returns {draw2d.geo.Point}\n     * @deprecated\n     **/\n    getEndPoint: function (refPoint) {\n      return this.getEndPosition(refPoint)\n    },\n\n    getEndPosition: function (refPoint) {\n      if (this.isMoving === false) {\n        if (refPoint) {\n          return this.targetPort.getConnectionAnchorLocation(refPoint, this)\n        }\n        return this.targetPort.getConnectionAnchorLocation(this.sourcePort.getConnectionAnchorReferencePoint(this), this)\n      }\n\n      return this._super()\n    },\n\n    /**\n     *\n     * Set the new source port of this connection. This enforce a repaint of the connection.\n     *\n     * @param {draw2d.Port} port The new source port of this connection.\n     *\n     **/\n    setSource: function (port) {\n      if (this.sourcePort !== null) {\n        this.sourcePort.off(this.moveListener)\n        this.sourcePort.connections.remove(this)\n        this.sourcePort.fireEvent(\"disconnect\", {port: this.sourcePort, connection: this})\n        // it is possible that a connection has already a port but is not assigned to\n        // a canvas. In this case we must check if the canvas set correct before we fire this event\n        this.canvas?.fireEvent(\"disconnect\", {port: this.sourcePort, connection: this})\n\n        this.sourcePort.onDisconnect(this)\n      }\n\n      this.sourcePort = port\n      if (this.sourcePort === null) {\n        return\n      }\n\n      this.routingRequired = true\n      this.fireSourcePortRouteEvent()\n      this.sourcePort.connections.add(this)\n      this.sourcePort.on(\"move\", this.moveListener)\n\n      this.canvas?.fireEvent(\"connect\", {port: this.sourcePort, connection: this})\n\n      this.sourcePort.fireEvent(\"connect\", {port: this.sourcePort, connection: this})\n      this.sourcePort.onConnect(this)\n\n      this.setStartPoint(port.getAbsoluteX(), port.getAbsoluteY())\n      this.fireEvent(\"connect\", {port: this.sourcePort, connection: this})\n    },\n\n    /**\n     *\n     * Returns the source port of this connection.\n     *\n     * @returns {draw2d.Port}\n     **/\n    getSource: function () {\n      return this.sourcePort\n    },\n\n    /**\n     *\n     * Set the target port of this connection. This enforce a repaint of the connection.\n     *\n     * @param {draw2d.Port} port The new target port of this connection\n     **/\n    setTarget: function (port) {\n      if (this.targetPort !== null) {\n        this.targetPort.off(this.moveListener)\n        this.targetPort.connections.remove(this)\n        this.targetPort.fireEvent(\"disconnect\", {port: this.targetPort, connection: this})\n        // it is possible that a connection has already a port but is not assigned to\n        // a canvas. In this case we must check if the canvas set correct before we fire this event\n        this.canvas?.fireEvent(\"disconnect\", {port: this.targetPort, connection: this})\n\n        this.targetPort.onDisconnect(this)\n      }\n\n      this.targetPort = port\n      if (this.targetPort === null) {\n        return\n      }\n\n      this.routingRequired = true\n      this.fireTargetPortRouteEvent()\n      this.targetPort.connections.add(this)\n      this.targetPort.on(\"move\", this.moveListener)\n      this.canvas?.fireEvent(\"connect\", {port: this.targetPort, connection: this})\n      this.targetPort.fireEvent(\"connect\", {port: this.targetPort, connection: this})\n      this.targetPort.onConnect(this)\n\n      this.setEndPoint(port.getAbsoluteX(), port.getAbsoluteY())\n      this.fireEvent(\"connect\", {port: this.targetPort, connection: this})\n    },\n\n    /**\n     *\n     * Returns the target port of this connection.\n     *\n     * @returns {draw2d.Port}\n     **/\n    getTarget: function () {\n      return this.targetPort\n    },\n\n    /**\n     * Returns the peer port of the connection for a given port or nulll if `port` not part of this connection\n     * @param {draw2d.Port} port \n     * @returns  {draw2d.Port}\n     */\n    getPeerPort: function(port) {\n      if(port === this.sourcePort){\n        return this.targetPort\n      }\n      if(port === this.targetPort){\n        return this.sourcePort\n      }\n      return null\n    },\n\n    /**\n     *\n     * Method returns true if the connection has at least one common draw2d.Port with the given connection.\n     *\n     * @param {draw2d.Connection} other\n     *\n     * @returns {Boolean}\n     */\n    sharingPorts: function (other) {\n      return this.sourcePort == other.sourcePort ||\n             this.sourcePort == other.targetPort ||\n             this.targetPort == other.sourcePort ||\n             this.targetPort == other.targetPort\n    },\n\n\n    /**\n     *\n     * Set the canvas element of this figures.\n     *\n     * @param {draw2d.Canvas} canvas the new parent of the figure or null\n     */\n    setCanvas: function (canvas) {\n      if (this.canvas === canvas) {\n        return // nothing to do\n      }\n\n      let notiCanvas = this.canvas === null ? canvas : this.canvas\n\n      this._super(canvas)\n\n      this.sourceDecoratorNode?.remove()\n      this.sourceDecoratorNode = null\n\n      this.targetDecoratorNode?.remove()\n      this.targetDecoratorNode = null\n\n      if (this.canvas === null) {\n        if (this.sourcePort !== null) {\n          this.sourcePort.off(this.moveListener)\n          notiCanvas.fireEvent(\"disconnect\", { port: this.sourcePort, connection: this})\n          this.sourcePort.onDisconnect(this)\n        }\n        if (this.targetPort !== null) {\n          this.targetPort.off(this.moveListener)\n          notiCanvas.fireEvent(\"disconnect\", { port: this.targetPort, connection: this})\n          this.targetPort.onDisconnect(this)\n        }\n      } else {\n\n        if (this.sourcePort !== null) {\n          this.sourcePort.on(\"move\", this.moveListener)\n          this.canvas.fireEvent(\"connect\", { port: this.sourcePort, connection: this})\n          this.sourcePort.onConnect(this)\n        }\n        if (this.targetPort !== null) {\n          this.targetPort.on(\"move\", this.moveListener)\n          this.canvas.fireEvent(\"connect\", { port: this.targetPort, connection: this})\n          this.targetPort.onConnect(this)\n        }\n      }\n    },\n\n\n    /**\n     * Returns the angle of the connection at the output port (source)\n     *\n     **/\n    getStartAngle: function () {\n      // return a good default value if the connection is not routed at the\n      //  moment\n      if (this.lineSegments.getSize() === 0) {\n        return 0\n      }\n\n      let p1 = this.lineSegments.get(0).start\n      let p2 = this.lineSegments.get(0).end\n\n      let length = Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y))\n      let angle = -(180 / Math.PI) * Math.asin((p1.y - p2.y) / length)\n\n      if (angle < 0) {\n        if (p2.x < p1.x) {\n          angle = Math.abs(angle) + 180\n        } else {\n          angle = 360 - Math.abs(angle)\n        }\n      } else {\n        if (p2.x < p1.x) {\n          angle = 180 - angle\n        }\n      }\n      return angle\n    },\n\n    getEndAngle: function () {\n      // return a good default value if the connection is not routed at the\n      //  moment\n      if (this.lineSegments.getSize() === 0) {\n        return 90\n      }\n\n      let p1 = this.lineSegments.get(this.lineSegments.getSize() - 1).end\n      let p2 = this.lineSegments.get(this.lineSegments.getSize() - 1).start\n\n      let length = Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y))\n      let angle = -(180 / Math.PI) * Math.asin((p1.y - p2.y) / length)\n\n      if (angle < 0) {\n        if (p2.x < p1.x) {\n          angle = Math.abs(angle) + 180\n        } else {\n          angle = 360 - Math.abs(angle)\n        }\n      } else {\n        if (p2.x < p1.x) {\n          angle = 180 - angle\n        }\n      }\n      return angle\n    },\n\n\n    /**\n     * @private\n     **/\n    fireSourcePortRouteEvent: function () {\n      this.sourcePort.getConnections().each((i, conn) => {\n        conn.routingRequired = true\n        conn.repaint()\n      })\n    },\n\n    /**\n     * @private\n     **/\n    fireTargetPortRouteEvent: function () {\n      // enforce a repaint of all connections which are related to this port\n      // this is required for a \"FanConnectionRouter\" or \"ShortesPathConnectionRouter\"\n      //\n      this.targetPort.getConnections().each((i, conn) => {\n        conn.routingRequired = true\n        conn.repaint()\n      })\n    },\n\n\n    /**\n     *\n     * Returns the Command to perform the specified Request or null.\n     *\n     * @param {draw2d.command.CommandType} request describes the Command being requested\n     *\n     * @returns {draw2d.command.Command} null or a Command\n     **/\n    createCommand: function (request) {\n      if (request.getPolicy() === draw2d.command.CommandType.MOVE) {\n        if (this.isDraggable()) {\n          return new draw2d.command.CommandMoveVertices(this)\n        }\n      }\n\n      if (request.getPolicy() === draw2d.command.CommandType.MOVE_BASEPOINT) {\n        // DragDrop of a connection doesn't create a undo command at this point. This will be done in\n        // the onDrop method\n        return new draw2d.command.CommandReconnect(this)\n      }\n\n      return this._super(request)\n    },\n\n\n    /**\n     *\n     * Return an objects with all important attributes for XML or JSON serialization\n     *\n     * @returns {Object}\n     */\n    getPersistentAttributes: function () {\n      let memento = this._super()\n\n      let parentNode = this.getSource().getParent()\n      while (parentNode.getParent() !== null) {\n        parentNode = parentNode.getParent()\n      }\n      memento.source = {\n        node: parentNode.getId(),\n        port: this.getSource().getName()\n      }\n\n      parentNode = this.getTarget().getParent()\n      while (parentNode.getParent() !== null) {\n        parentNode = parentNode.getParent()\n      }\n      memento.target = {\n        node: parentNode.getId(),\n        port: this.getTarget().getName()\n      }\n\n      if (this.sourceDecorator !== null) {\n        memento.source.decoration = this.sourceDecorator.NAME\n      }\n\n      if (this.targetDecorator !== null) {\n        memento.target.decoration = this.targetDecorator.NAME\n      }\n\n      return memento\n    },\n\n    /**\n     *\n     * Read all attributes from the serialized properties and transfer them into the shape.\n     *\n     * @param {Object} memento\n     * @returns {this}\n     */\n    setPersistentAttributes: function (memento) {\n      this._super(memento)\n\n      // nothing to to for the connection creation. This will be done in the draw2d.io.Reader\n      // implementation\n      //\n      // restore your custom attributes here\n      if (typeof memento.target.decoration !== \"undefined\" && memento.target.decoration != null) {\n        this.setTargetDecorator(eval(\"new \" + memento.target.decoration))\n      }\n\n      if (typeof memento.source.decoration !== \"undefined\" && memento.source.decoration != null) {\n        this.setSourceDecorator(eval(\"new \" + memento.source.decoration))\n      }\n\n      return this\n\n    }\n  })\n","import draw2d from 'packages'\nimport jsonUtil from 'util/JSONUtil'\nimport UUID from 'util/UUID'\nimport extend from 'util/extend'\n\n/**\n * @class\n * Base class for all draw2d shapes-\n *\n */\ndraw2d.Figure = Class.extend(\n  /**  @lends draw2d.Figure.prototype */\n  {\n    NAME: \"draw2d.Figure\",\n    MIN_TIMER_INTERVAL: 50, // minimum timer interval in milliseconds\n\n    /**\n     * Creates a new Figure object\n     *\n     * @param attr\n     * @param setter\n     * @param getter\n     */\n    init: function (attr, setter, getter) {\n\n      // @private\n      this.setterWhitelist = {\n        //  id the unique id of the figure\n        id: this.setId,\n        //  x the x offset of the figure in relation to the parent figure or canvas\n        x: this.setX,\n        //  y the y offset of the figure in relation to the parent figure or canvas\n        y: this.setY,\n        //  width the new width of the figure. Considering the minWidth of the shape\n        width: this.setWidth,\n        //  height the new height of the figure. Considering the minHeight of the shape\n        height: this.setHeight,\n        //  boundingBox set the new bounding box of the shape\n        boundingBox: this.setBoundingBox,\n        //   minWidth the new min width of the figure.\n        minWidth: this.setMinWidth,\n        // minHeight the new min height of the figure.\n        minHeight: this.setMinHeight,\n        //  cssClass the css class of the shape. can be used to style the shape via CSS3 (SVG only)\n        cssClass: this.setCssClass,\n        //  userData additional custom data which can be stored by the shape\n        userData: this.setUserData,\n        // draggable drives the dragging behaviour of the shape\n        draggable: this.setDraggable,\n        //  resizeable drives the resizeable behaviour of the shape\n        resizeable: this.setResizeable,\n        //  selectable drives the selectable behaviour of the shape\n        selectable: this.setSelectable,\n        //  angle the rotation angle of the shape. At the moment only 90 degree increments are possible\n        angle: this.setRotationAngle,\n        //  alpha the the alpha/opacity of the shape. value must be between [0..1]\n        alpha: this.setAlpha,\n        //  opacity the the alpha/opacity of the shape. value must be between [0..1]\n        opacity: this.setAlpha,\n        //  glow the glow flag for the shape. The representation of the \"glow\" depends on the shape\n        glow: this.setGlow,\n        //  visible set the visibility flag of the shape\n        visible: this.setVisible,\n        //  keepAspectRatio indicate if the shape should keep the aspect ratio during resize\n        keepAspectRatio: this.setKeepAspectRatio,\n        ...setter\n      }\n\n      this.getterWhitelist = {\n        id: this.getId,\n        visible: this.isVisible,\n        angle: this.getRotationAngle,\n        x: this.getX,\n        y: this.getY,\n        userData: this.getUserData,\n        width: this.getWidth,\n        height: this.getHeight,\n        draggable: this.isDraggable,\n        resizeable: this.isResizeable,\n        selectable: this.isSelectable,\n        alpha: this.getAlpha,\n        opacity: this.getAlpha,\n        ...getter\n      }\n\n      // all figures has an unique id. Required for figure get and persistence storage\n      this.id = UUID.create()\n\n      this.cachedZOrder = -1\n\n      // required for the SelectionEditPolicy to indicate the type of figure\n      // which the user clicks\n      this.isResizeHandle = false\n\n      // for undo/redo operation. It holds the command during a drag/drop operation\n      // and execute it on the CommandStack if the user drop the figure.\n      this.command = null\n\n      // the assigned canvas\n      this.canvas = null\n\n      // the RaphaelJS element reference\n      this.shape = null\n\n      // possible decorations ( e.g. a Label) of the Connection\n      // children are fixed bounded the figure. Most of the events of the child will bee\n      // routed to the parent\n      this.children = new draw2d.util.ArrayList()\n\n      // behavior flags\n      //\n      this.selectable = true\n      this.deleteable = true\n      this.resizeable = true\n      this.draggable = true\n      this.visible = true\n      // since 4.1.0.\n      this.keepAspectRatio = false\n\n\n      this.canSnapToHelper = true\n      this.snapToGridAnchor = new draw2d.geo.Point(0, 0)    // hot spot for snap to grid\n      this.editPolicy = new draw2d.util.ArrayList()\n\n\n      // timer for animation or automatic update\n      //\n      this.timerId = -1\n      this.timerInterval = 0\n\n      // possible parent of the figure.\n      // @see: this.children\n      this.parent = null\n\n      // a figure can be part of a StrongComposite like a group, ...\n      //\n      this.composite = null\n\n      // generic handle for the JSON read/write of user defined data\n      this.userData = null\n\n      // appearance, position and dim properties\n      //\n      this.x = 0\n      this.y = 0\n      this.minHeight = 5\n      this.minWidth = 5\n      this.rotationAngle = 0\n      // add the name of the class to the css attribute\n      this.cssClass = this.NAME.replace(new RegExp(\"[.]\", \"g\"), \"_\")\n\n      this.width = this.getMinWidth()\n      this.height = this.getMinHeight()\n\n      this.alpha = 1.0\n\n      // internal status flags for the Drag&Drop operation handling and other stuff\n      //\n      this.isInDragDrop = false\n\n      this.ox = 0\n      this.oy = 0\n      this.repaintBlocked = false\n      this.lastAppliedAttributes = {}\n      this.selectionHandles = new draw2d.util.ArrayList()\n      this.panningDelegate = null\n\n      // even handling since version 5.0.0\n      this.eventSubscriptions = {}\n\n      this.relocateChildrenEventCallback = () => {\n        this.children.each((i, e) => {\n          e.locator.relocate(i, e.figure)\n        })\n      }\n\n      // new approach to delegate selection requests.\n      //\n      this.defaultSelectionAdapter = this.selectionAdapter = () => this\n\n      // install default selection handler. Can be overridden or replaced\n      this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy())\n\n\n      // the new style attr call with object attributes\n      this.attr(attr)\n    },\n\n    /**\n     *\n     * Read or set shape attributes.<br>\n     * When no value is given, reads specified attribute from the element.<br>\n     * When value is given, sets the attribute to that value.\n     * Multiple attributes can be set by passing an object with name-value pairs.\n     *\n     *    let figure = new draw2d.shape.basic.Rectangle();\n     *    figure.attr('x');      //=> read value\n     *    figure.attr('x', 30);  //=> set value\n     *\n     *    // multiple attributes:\n     *    figure.attr({\n     *      x: 30,\n     *      y: 40,\n     *      width : 200,\n     *      height: 50,\n     *      cssClass: \"red_border_figure\"\n     *    });\n     *\n     *    // it is possible to override any method of the figure as well\n     *    // Instead of inheritance you can just override the callback methods\n     *    // like\n     *    //\n     *    figure.attr({\n     *       onClick : function(){\n     *           alert(\"click\");\n     *       }\n     *    });\n     *\n     *    // or you can pass the attr values in the constructor\n     *    //\n     *    let clickFigure = new draw2d.shape.basic.Rectangle({\n     *       onClick : function(){\n     *           alert(\"click\");\n     *       }\n     *    });\n     *\n     *\n     * Additional you can set the user defined values (userData) with this method\n     * using the dot-notation. User defined values are always part of the exported\n     * JSON data.\n     *\n     *    // setting multiple attributes:\n     *    figure.attr({\n     *      \"userData.my.property.x\": 30,\n     *      \"userData.my.property.y\": 40\n     *    });\n     *\n     * Also set using array notation is possible for the userData:\n     *\n     *    // dot notation and array brackets:\n     *    figure.attr({\n     *      \"userData.my.names[0]\": \"John\",\n     *      \"userData.my.names[1]\": \"Doe\"\n     *    });\n     *\n     *\n     * The Object returned should be the equivalent structured object:\n     *\n     *    let obj = figure.getUserData();\n     *\n     * That is, where obj is equivalent to:\n     *\n     *    let obj = {\n     *        my:{\n     *            property:{\n     *                x: 30,\n     *                y: 40\n     *           },\n     *           names:  [\"John\", \"Doe\"]\n     *       }\n     *    };\n     *\n     *\n     *\n     * @param {String/Object} name\n     * @param {Object} [value]\n     * @since 5.0.1\n     * @experimental\n     * @returns {Object} either the requested attribute if this method used as getter or `this` if the method uses as setter\n     **/\n    attr: function (name, value) {\n      let orig = this.repaintBlocked\n\n      try {\n        // call of attr as setter method with {name1:val1, name2:val2 }  argument list\n        //\n        if ($.isPlainObject(name)) {\n          for (let key in name) {\n            // user can set the \"userData\" with path notation. In this case we\n            // expand the path to a real JSON object and set the data.\n            // index/brackets are allowed too.\n            //\n            if (key.substring(0, 9) === \"userData.\") {\n              this.userData ??= {}\n\n              jsonUtil.set({userData: this.userData}, key, name[key])\n              this.fireEvent(\"change:\" + key, {value: name[key]})\n            } else {\n              let func = this.setterWhitelist[key]\n              let param = name[key]\n              if (func && param !== undefined) {\n                func.call(this, param)\n              }\n              // maybe the user adds a function as property to the attr call\n              // e.g.:\n              // {\n              //     doIt: function(){}\n              // }\n              //\n              // in this case we assign the method to this object and wrap it with \"this\" as context\n              // a very, very simple method to replace default implemenations of the object\n              else if (typeof name[key] === \"function\") {\n                this[key] = param.bind(this)\n              }\n            }\n          }\n        } else if (typeof name === \"string\") {\n          // call attr as getter\n          //\n          if (typeof value === \"undefined\") {\n            let getter = this.getterWhitelist[name]\n            if (typeof getter === \"function\") {\n              return getter.call(this)\n            }\n            // or it is a userData path notation like \"userData.any.path.value\"\n            else if (name.substring(0, 9) === \"userData.\") {\n              let data = {userData: this.userData}\n              return jsonUtil.get(data, name)\n            }\n            return // undefined\n          }\n          // call attr as simple setter with (key , value)\n          //\n\n          // the value can be a function. In this case we must call the value().\n          if (typeof value === \"function\") {\n            value = value()\n          }\n          if (name.substring(0, 9) === \"userData.\") {\n            this.userData ??= {}\n            jsonUtil.set({userData: this.userData}, name, value)\n            this.fireEvent(\"change:\" + name, {value: value})\n          } else {\n            let setter = this.setterWhitelist[name]\n            setter?.call(this, value)\n          }\n        }\n        // may it is a array of attributes used for the getter\n        //\n        else if (Array.isArray(name)) {\n          return Object.assign({}, ...Object.keys(name).map(k => ({[k]: this.attr(k)})))\n        }\n        // generic getter of all registered attributes\n        else if (typeof name === \"undefined\") {\n          let result = {}\n          for (let key in this.getterWhitelist) {\n            result[key] = this.getterWhitelist[key].call(this)\n          }\n          return result\n        }\n      } finally {\n        this.repaintBlocked = orig\n      }\n      return this\n    },\n\n    /**\n     * Return a copy of the object, filtered to only have values for the whitelisted keys.\n     * @deprecated\n     */\n    pick: function (obj, var_keys) {\n      let keys = typeof arguments[1] !== 'string' ? arguments[1] : Array.prototype.slice.call(arguments, 1)\n      let out = {}, key\n      for (key in keys) {\n        if (typeof obj[key] !== \"undefined\")\n          out[key] = obj[key]\n      }\n      return out\n    },\n\n    /**\n     *\n     * Add the figure to the current selection and propagate this to all edit policies.\n     *\n     * @param {Boolean} [asPrimarySelection] true if the element should be the primary selection\n     * @private\n     */\n    select: function (asPrimarySelection) {\n      if (typeof asPrimarySelection === \"undefined\") {\n        asPrimarySelection = true\n      }\n\n      // apply all EditPolicy for select Operations\n      //\n      this.editPolicy.each( (i, e) => {\n        if (e instanceof draw2d.policy.figure.SelectionPolicy) {\n          e.onSelect(this.canvas, this, asPrimarySelection)\n        }\n      })\n\n      this.canvas?.getSelection().add(this)\n\n      this.fireEvent(\"select\", {figure: this})\n\n      return this\n    },\n\n    /**\n     *\n     * Unselect the figure and propagete this event to all edit policies.\n     *\n     * @private\n     **/\n    unselect: function () {\n      // apply all EditPolicy for select Operations\n      //\n      this.editPolicy.each((i, e) =>{\n        if (e instanceof draw2d.policy.figure.SelectionPolicy) {\n          e.onUnselect(this.canvas, this)\n        }\n      })\n\n      this.canvas?.getSelection().remove(this)\n\n      this.fireEvent(\"unselect\", {figure: this})\n      return this\n    },\n\n    /**\n     *\n     * Returns a function which returns the the figure which must handle the selection handling.\n     *\n     * @param {Function} [adapter] function which returns the figure which handles the selection handling\n     */\n    setSelectionAdapter: function (adapter) {\n      this.selectionAdapter = adapter ?? this.defaultSelectionAdapter\n      return this\n    },\n\n    /**\n     *\n     *\n     * @returns {Function}\n     */\n    getSelectionAdapter: function () {\n      return this.selectionAdapter\n    },\n\n    /**\n     *\n     * Returns true if the figure part of the current canvas selection.\n     *\n     * @since 5.5.6\n     *\n     * @returns {Boolean}\n     */\n    isSelected: function () {\n        return this.canvas?.getSelection().contains(this)\n    },\n\n    /**\n     *\n     * Allows a user to attach (or remove) data to an element, without needing to create a custom figure or shape.\n     * The data must be a valid JSON object.\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       userData: object\n     *     });\n     *\n     * @since 2.7.2\n     * @param {Object} object\n     */\n    setUserData: function (object) {\n      this.userData = object\n      this.fireEvent(\"change:userData\", {value: object})\n      return this\n    },\n\n    /**\n     *\n     * Returns any user data set previously on the given figure by setUserData.\n     *\n     * @since 2.7.2\n     * @returns {Object}\n     */\n    getUserData: function () {\n      return this.userData\n    },\n\n    /**\n     *\n     * Return the UUID of this element.\n     *\n     * @returns {String}\n     */\n    getId: function () {\n      return this.id\n    },\n\n\n    /**\n     *\n     * Set the id of this element.\n     *\n     *    // Alternatively you can use the attr method:\n     *    figure.attr({\n     *      id: newId\n     *    });\n     *\n     * @param {String} newId the new id for this figure\n     */\n    setId: function (newId) {\n      this.id = newId\n\n      return this\n    },\n\n\n    /**\n     *\n     * Return the css styling class name of the element.\n     *\n     *\n     * @returns {String}\n     */\n    getCssClass: function () {\n      return this.cssClass\n    },\n\n    /**\n     *\n     * Set the css class of the node.\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       \"cssClass\": \"red_border_figure\"\n     *     });\n     *\n     * @param {String} cssClass the new css class name of the node\n     * @since 2.9.0\n     */\n    setCssClass: function (cssClass) {\n      this.cssClass = cssClass === null ? null : cssClass.trim()\n\n      if (this.shape === null) {\n        return this\n      }\n\n      if (this.cssClass === null) {\n        this.shape.node.removeAttribute(\"class\")\n      } else {\n        this.shape.node.setAttribute(\"class\", this.cssClass)\n      }\n      this.fireEvent(\"change:cssClass\", {value: this.cssClass})\n\n      return this\n    },\n\n    /**\n     *\n     * The method will return true if the class is assigned to the element, even if other classes also are.\n     *\n     * @param {String} className the class name to check\n     * @since 2.9.0\n     */\n    hasCssClass: function (className) {\n      if (this.cssClass === null) {\n        return false\n      }\n\n      return new RegExp(' ' + className.trim() + ' ').test(' ' + this.cssClass + ' ')\n    },\n\n    /**\n     *\n     * Add a CSS class to the figure.<br>\n     * It's important to note that this method does not replace a class. It simply adds the class,\n     * appending it to any which may already be assigned to the elements.\n     *\n     * @param {String} className\n     * @since 2.9.0\n     */\n    addCssClass: function (className) {\n      className = className.trim()\n      if (!this.hasCssClass(className)) {\n        if (this.cssClass === null) {\n          this.setCssClass(className)\n        } else {\n          this.setCssClass(this.cssClass + ' ' + className)\n        }\n        this.fireEvent(\"change:cssClass\", {value: this.cssClass})\n      }\n\n      return this\n    },\n\n    /**\n     *\n     *\n     * Remove the given css class name from the figure\n     *\n     * @param {String} className the css class name to add\n     */\n    removeCssClass: function (className) {\n      className = className.trim()\n      let newClass = ' ' + this.cssClass.replace(/[\\t\\r\\n]/g, ' ') + ' '\n      if (this.hasCssClass(className)) {\n        while (newClass.indexOf(' ' + className + ' ') >= 0) {\n          newClass = newClass.replace(' ' + className + ' ', ' ')\n        }\n        this.setCssClass(newClass.replace(/^\\s+|\\s+$/g, ''))\n        this.fireEvent(\"change:cssClass\", {value: this.cssClass})\n      }\n\n      return this\n    },\n\n    /**\n     *\n     *\n     * Add or remove the given css class name from the figure\n     *\n     * @param {String} className the class name to toggle\n     */\n    toggleCssClass: function (className) {\n      className = className.trim()\n      let newClass = ' ' + this.cssClass.replace(/[\\t\\r\\n]/g, ' ') + ' '\n      if (this.hasCssClass(className)) {\n        while (newClass.indexOf(' ' + className + ' ') >= 0) {\n          newClass = newClass.replace(' ' + className + ' ', ' ')\n        }\n        this.setCssClass(newClass.replace(/^\\s+|\\s+$/g, ''))\n      } else {\n        this.setCssClass(this.cssClass + ' ' + className)\n      }\n      this.fireEvent(\"change:cssClass\", {value: this.cssClass})\n\n      return this\n    },\n\n    /**\n     *\n     * Set the canvas element of this figures. This can be used to determine whenever an element\n     * is added or removed to the canvas.\n     *\n     * @param {draw2d.Canvas} canvas the new parent of the figure or null\n     */\n    setCanvas: function (canvas) {\n      // remove the shape if we reset the canvas and the element\n      // was already drawn\n      if (canvas === null && this.shape !== null) {\n        if (this.isSelected()) {\n          this.unselect()\n        }\n        this.shape.remove()\n        this.shape = null\n      }\n\n      this.canvas = canvas\n\n      if (this.canvas !== null) {\n        this.getShapeElement()\n      }\n\n      // reset the attribute cache. We must start by paint all attributes\n      //\n      this.lastAppliedAttributes = {}\n\n\n      if (canvas === null) {\n        this.stopTimer()\n      } else {\n        if (this.timerInterval >= this.MIN_TIMER_INTERVAL) {\n          this.startTimer(this.timerInterval)\n        }\n      }\n\n      this.children.each( (i, e) => { e.figure.setCanvas(canvas)})\n\n      return this\n    },\n\n    /**\n     *\n     * Return the current assigned canvas container.\n     *\n     * @returns {draw2d.Canvas}\n     */\n    getCanvas: function () {\n      return this.canvas\n    },\n\n\n    /**\n     *\n     * Start a timer which calls the onTimer method in the given interval.\n     *\n     * @param {Number} milliSeconds\n     */\n    startTimer: function (milliSeconds) {\n      this.stopTimer()\n      this.timerInterval = Math.max(this.MIN_TIMER_INTERVAL, milliSeconds)\n\n      if (this.canvas !== null) {\n        this.timerId = window.setInterval(() => {\n          this.onTimer()\n          this.fireEvent(\"timer\")\n        }, this.timerInterval)\n      }\n\n      return this\n    },\n\n    /**\n     *\n     * Stop the internal timer.\n     *\n     */\n    stopTimer: function () {\n      if (this.timerId >= 0) {\n        window.clearInterval(this.timerId)\n        this.timerId = -1\n      }\n\n      return this\n    },\n\n    /**\n     *\n     * Callback method for the internal timer handling<br>\n     * Inherit classes must override this method if they want use the timer feature.\n     *\n     *     // Alternatively you can register for this event with\n     *     figure.on(\"timer\", function(emitter){\n     *         alert(\"timer fired\");\n     *     });\n     *\n     * @template\n     */\n    onTimer: function () {\n    },\n\n    /**\n     *\n     * Moves the element so it is the closest to the viewer’s eyes, on top of other elements. Additional\n     * the internal model changed as well.\n     *\n     * Optional: Inserts current object in front of the given one.\n     *\n     * @param {draw2d.Figure} [figure] move current object in front of the given one.\n     * @since 3.0.0\n     */\n    toFront: function (figure) {\n      // ensure that the z-oder is still correct if the figure is assigned\n      // to a StrongComposite\n      //\n      if (this.composite instanceof draw2d.shape.composite.StrongComposite && (typeof figure !== \"undefined\")) {\n        let indexFigure = figure.getZOrder()\n        let indexComposite = this.composite.getZOrder()\n        if (indexFigure < indexComposite) {\n          figure = this.composite\n        }\n      }\n\n      if (typeof figure === \"undefined\") {\n        this.getShapeElement().toFront()\n\n        if (this.canvas !== null) {\n          let figures = this.canvas.getFigures()\n          let lines = this.canvas.getLines()\n          if (figures.remove(this) !== null) {\n            figures.add(this)\n          } else if (lines.remove(this) !== null) {\n            lines.add(this)\n          }\n        }\n      } else {\n        this.getShapeElement().insertAfter(figure.getTopLevelShapeElement())\n\n        if (this.canvas !== null) {\n          let figures = this.canvas.getFigures()\n          let lines = this.canvas.getLines()\n          if (figures.remove(this) !== null) {\n            let index = figures.indexOf(figure)\n            figures.insertElementAt(this, index + 1)\n          } else if (lines.remove(this) !== null) {\n            lines.add(this)\n          }\n        }\n      }\n\n      // bring all children in front of the parent\n      this.children.each( (i, child) =>child.figure.toFront(this))\n\n      // and last but not least, the ResizeHandles if any present\n      //\n      this.selectionHandles.each( (i, handle) => handle.toFront())\n\n      this.cachedZOrder = -1\n      return this\n    },\n\n    /**\n     *\n     * Moves the element to the background. Additional\n     * the internal model changed as well.\n     *\n     * @since 4.7.2\n     */\n    toBack: function (figure) {\n      // it is not allowed that a figure is behind an assigned composite\n      //\n      if (this.composite instanceof draw2d.shape.composite.StrongComposite) {\n        this.toFront(this.composite)\n        return\n      }\n\n      if (this.canvas !== null) {\n        let figures = this.canvas.getFigures()\n        let lines = this.canvas.getLines()\n        if (figures.remove(this) !== null) {\n          figures.insertElementAt(this, 0)\n        } else if (lines.remove(this) !== null) {\n          lines.insertElementAt(this, 0)\n        }\n        if (typeof figure !== \"undefined\") {\n          this.getShapeElement().insertBefore(figure.getShapeElement())\n        } else {\n          this.getShapeElement().toBack()\n        }\n      }\n\n      // Bring all children in front of \"this\" figure\n      //\n      this.children.each((i, child) => {\n        child.figure.toFront(this)\n      }, true)\n\n      this.cachedZOrder = -1\n      return this\n    },\n\n\n    /**\n     *\n     * Install a new edit policy to the figure. Each editpolicy is able to focus on a single editing\n     * task or group of related tasks. This also allows editing behavior to be selectively reused across\n     * different figure implementations. Also, behavior can change dynamically, such as when the layouts\n     * or routing methods change.\n     *\n     * Example for limited DragDrop behavior can be a draw2d.layout.constraint.RegionConstriantPolicy.\n     *\n     * @param {draw2d.policy.EditPolicy} policy\n     */\n    installEditPolicy: function (policy) {\n      // it is only possible to install one SelectionFeedbackPolicy at once\n      //\n      if (policy instanceof draw2d.policy.figure.SelectionFeedbackPolicy) {\n        this.editPolicy.grep((p) => {\n          let stay = !(p instanceof draw2d.policy.figure.SelectionFeedbackPolicy)\n          if (!stay) {\n            p.onUninstall(this)\n          }\n          return stay\n        })\n      }\n\n      // It is only allowed to install a policy of the same type once\n      //\n      this.editPolicy.grep((p) => {\n        let stay = p.__proto__ !== policy.__proto__\n        if (!stay) {\n          p.onUninstall(this)\n        }\n        return stay\n      })\n\n\n      policy.onInstall(this)\n      this.editPolicy.add(policy)\n\n      return this\n    },\n\n    /**\n     *\n     *\n     * UnInstall the edit policy from the figure. Either the instance itself if found\n     * or all kind of the given edit policies.\n     *\n     *\n     * @param {draw2d.policy.EditPolicy} policy\n     * @since 4.81\n     */\n    uninstallEditPolicy: function (policy) {\n      let removedPolicy = this.editPolicy.remove(policy)\n\n      // we found the policy and we are happy\n      //\n      if (removedPolicy !== null) {\n        removedPolicy.onUninstall(this)\n        return\n      }\n\n      // The policy isn't part of the figure. In this case we \"think\" the user want\n      // deinstall all instances of the policy\n      //\n      let name = (typeof policy === \"string\") ? policy : policy.NAME\n      this.editPolicy.grep((p) =>{\n        if (p.NAME === name) {\n          p.onUninstall(this)\n          return false\n        }\n        return true\n      })\n    },\n\n    /**\n     * Add a child figure to the figure. The hands over figure doesn't support drag&drop\n     * operations. It's only a decorator for the connection.<br>\n     * Mainly for labels or other decorations\n     *\n     *\n     *    let start = new draw2d.shape.node.Start({x:80, y:150});\n     *    start.add(new draw2d.shape.basic.Label({text:\"Test Label\"}), new draw2d.layout.locator.TopLocator());\n     *\n     *    canvas.add( start);\n     *\n     *\n     * @param {draw2d.Figure} child the figure to add as decoration to the connection.\n     * @param {draw2d.layout.locator.Locator} locator the locator for the child.\n     * @param {Number} [index] optional index where to insert the figure\n     * @returns {this}\n     **/\n    add: function (child, locator, index) {\n      if (typeof locator === \"undefined\" || locator === null) {\n        throw \"Second parameter 'locator' is required for method 'Figure#add'\"\n      }\n\n      // the child is now a slave of the parent\n      //\n      child.setParent(this)\n\n      // inform the locator that a new child is bounded to the parent\n      // The call must happen after parent assignment. Reason: the locator\n      // can override some behaviours which are propagated from the parent.\n      //\n      locator.bind(this, child)\n\n      child.on(\"resize\", this.relocateChildrenEventCallback)\n\n      if (!isNaN(parseInt(index))) {\n        this.children.insertElementAt({figure: child, locator: locator}, index)\n      } else {\n        this.children.add({figure: child, locator: locator})\n      }\n\n      if (this.canvas !== null) {\n        child.setCanvas(this.canvas)\n      }\n\n      this.repaint()\n\n      return this\n    },\n\n    /**\n     *\n     * Remove the child figure from this figure and the canvas\n     *\n     * @param {draw2d.Figure} child the figure to remove.\n     *\n     * @returns {Object} the removed tupple of figure/locator or null if the child isn't found\n     * @returns {draw2d.Figure} return.figure The removed figure\n     * @returns {draw2d.shape.layout.Layout} return.locator The used locator of the figure\n     *\n     * @since 5.0.0\n     **/\n    remove: function (child) {\n      if (typeof child === \"undefined\" || child === null) {\n        debug.warn(\"The parameter child is required for Figure.remove\")\n        return null\n      }\n\n      let removed = null\n      this.children.grep(function (e) {\n        let stay = e.figure !== child\n        if (!stay) {\n          removed = e\n        }\n        return stay\n      })\n\n      if (removed !== null) {\n        child.setParent(null)\n        child.setCanvas(null)\n        removed.locator.unbind(this, child)\n        child.off(this.relocateChildrenEventCallback)\n\n        this.repaint()\n        return removed\n      }\n\n      return null\n    },\n\n    /**\n     *\n     * Return all children/decorations of this shape which has been added with\n     * draw2d.Figure.add\n     *\n     * @returns {draw2d.util.ArrayList}\n     */\n    getChildren: function () {\n      return this.children.clone().map( e => e.figure)\n    },\n\n\n    /**\n     *\n     * Remove all children/decorations of this shape\n     *\n     */\n    resetChildren: function () {\n      this.children.each((i, e) => { e.figure.setCanvas(null)})\n      this.children = new draw2d.util.ArrayList()\n      this.repaint()\n\n      return this\n    },\n\n\n    /**\n     *\n     * return the current SVG shape element or create it on demand.\n     *\n     * @protected\n     */\n    getShapeElement: function () {\n      if (this.shape !== null) {\n        return this.shape\n      }\n\n      this.shape = this.createShapeElement()\n      if (!this.isVisible()) {\n        this.shape.hide()\n      }\n\n      // add CSS class to enable styling of the element with CSS rules/files\n      //\n      if (this.cssClass !== null) {\n        this.shape.node.setAttribute(\"class\", this.cssClass)\n      }\n\n      return this.shape\n    },\n\n    /**\n     *\n     * Get the top level shape element. May the figure has a set of SVG elements. In this case this\n     * method must return the top level node.<br>\n     * This method is used for the toFront/toBack method to order the nodes in the correct way.\n     *\n     * @since 5.0.0\n     * @private\n     */\n    getTopLevelShapeElement: function () {\n      return this.getShapeElement()\n    },\n\n\n    /**\n     *\n     * Inherited classes must override this method to implement it's own draw functionality.\n     *\n     * @template\n     * @abstract\n     */\n    createShapeElement: function () {\n      throw \"Inherited class [\" + this.NAME + \"] must override the abstract method createShapeElement\"\n    },\n\n\n    /**\n     *\n     * propagate all attributes like color, stroke,... to the shape element\n     *\n     * @param {Object} [attributes] the style attributes for the SVG shape\n     * @private\n     **/\n    repaint: function (attributes) {\n      if (this.repaintBlocked === true || this.shape === null) {\n        return this\n      }\n\n      attributes ??= {}\n\n      if (this.visible === true) {\n        if (this.shape.isVisible() === false) {\n          if (!isNaN(parseFloat(attributes.visibleDuration))) {\n            $(this.shape.node).fadeIn(attributes.visibleDuration, () =>  this.shape.show())\n          } else {\n            this.shape.show()\n          }\n        }\n      } else {\n        if (this.shape.isVisible() === true) {\n          if (!isNaN(parseFloat(attributes.visibleDuration))) {\n            $(this.shape.node).fadeOut(attributes.visibleDuration, () => this.shape.hide())\n          } else {\n            this.shape.hide()\n          }\n        }\n        return this\n      }\n\n      // enrich with common properties\n      attributes.opacity = this.alpha\n\n      // performance improvement\n      // Only apply attributes which has changed. This ends in a big performance improvement\n      // because the raphael shape isn't redraw at all.\n      //\n      attributes = jsonUtil.flatDiff(attributes, this.lastAppliedAttributes)\n\n      if (Object.getOwnPropertyNames(attributes).length > 0) {\n        this.shape.attr(attributes)\n      }\n      this.lastAppliedAttributes = attributes\n\n\n      this.applyTransformation()\n\n      // Relocate all children of the figure if the dimension or location of the\n      // shape has changed\n      //\n      if(\"x\" in attributes || \"width\" in attributes || \"cx\" in attributes || \"path\" in attributes) {\n        this.children.each((i, e) => { e.locator.relocate(i, e.figure) })\n      }\n\n      return this\n    },\n\n    /**\n     *\n     * apply a transformation to the shape like rotation, translate,..\n     *\n     * @private\n     * @template\n     */\n    applyTransformation: function () {\n      return this\n    },\n\n    /**\n     *\n     * Highlight the element or remove the highlighting\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       glow: flag\n     *     });\n     *\n     * @param {Boolean} flag indicates glow/noGlow\n     * @template\n     */\n    setGlow: function (flag) {\n      // do nothing in the base class.\n      // Subclasses must implement this method.\n\n      return this\n    },\n\n\n    /**\n     *\n     * Allow dragging only when the cursor is over a specific part of the figure.\n     * <br>\n     * Override this method to specify the bounding box of an element or a draw2d.util.ArrayList\n     * of draw2d.geo.Rectangle of bounding boxes used to drag the figure. The returned coordinates\n     * are absolute coordinates to the canvas.\n     * <br>\n     * <br>\n     * Default implementation returns <b>null</b> to indicate to use the complete figures as\n     * drag handle.\n     *\n     * @since 5.6.0\n     * @returns {draw2d.geo.Rectangle|draw2d.util.ArrayList}\n     */\n    getHandleBBox: function () {\n      return null\n    },\n\n    /**\n     *\n     * Called if the drag and drop action begins. You can return [false] if you\n     * want avoid that the figure can be move.\n     *\n     * @param {Number} x the x-coordinate of the mouse up event\n     * @param {Number} y the y-coordinate of the mouse up event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @returns {Boolean} true if the figure accepts dragging\n     **/\n    onDragStart: function (x, y, shiftKey, ctrlKey) {\n      this.isInDragDrop = false\n\n      // Check whenever the figures has a drag-handle. Allow drag&drop\n      // operation only if the x/y is inside this area.\n      //\n      // @since 5.6.0\n      let bbox = this.getHandleBBox()\n      if (bbox !== null && bbox.translate(this.getAbsolutePosition().scale(-1)).hitTest(x, y) === false) {\n        // design failure: we must catch the figure below the mouse to forward\n        // the panning event to this figure. Special handling to provide sliders\n        // and other UI elements which requires the panning event. Hack.\n        this.panningDelegate = this.getBestChild(this.getX() + x, this.getY() + y)\n        if (this.panningDelegate !== null) {\n          // transform x/y relative to the panning figure and request the dragStart event\n          this.panningDelegate.onDragStart(x - this.panningDelegate.x, y - this.panningDelegate.y, shiftKey, ctrlKey)\n        }\n        return false\n      }\n\n\n      this.command = this.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE))\n\n      if (this.command !== null) {\n        this.ox = this.getX()\n        this.oy = this.getY()\n        this.isInDragDrop = true\n\n        // notify all installed policies\n        //\n        let _this = this\n        let canStartDrag = true\n\n        this.editPolicy.each(function (i, e) {\n          if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n            canStartDrag = canStartDrag && e.onDragStart(_this.canvas, _this, x, y, shiftKey, ctrlKey)\n          }\n        })\n\n        if (canStartDrag) {\n          // fire an event\n          // @since 5.3.3\n          this.fireEvent(\"dragstart\", {x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n        }\n        return canStartDrag\n      }\n\n      return false\n    },\n\n    /**\n     *\n     * Don't call them manually. This will be done by the framework.<br>\n     * Will be called if the object are moved via drag and drop.\n     * Sub classes can override this method to implement additional stuff. Don't forget to call\n     * the super implementation via <code>this._super(dx, dy, dx2, dy2);</code>\n     *\n     * @private\n     * @param {Number} dx the x difference between the start of the drag drop operation and now\n     * @param {Number} dy the y difference between the start of the drag drop operation and now\n     * @param {Number} dx2 The x diff since the last call of this dragging operation\n     * @param {Number} dy2 The y diff since the last call of this dragging operation\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     **/\n    onDrag: function (dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n      // apply all EditPolicy for DragDrop Operations. This is something like\n      // an policy that forces that an object can only move vertical, horizontal or in a given\n      // rectangle.\n      //\n      this.editPolicy.each((i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          let newPos = e.adjustPosition(this, this.ox + dx, this.oy + dy)\n          if (newPos) {\n            dx = newPos.x - this.ox\n            dy = newPos.y - this.oy\n          }\n        }\n      })\n      let newPos = new draw2d.geo.Point(this.ox + dx, this.oy + dy)\n\n      // Adjust the new location if the object can snap to a helper\n      // like grid, geometry, ruler,...\n      //\n      if (this.getCanSnapToHelper()) {\n        newPos = this.getCanvas().snapToHelper(this, newPos)\n      }\n\n\n      this.setPosition(newPos)\n\n      // notify all installed policies that the object has moved.\n      //\n      this.editPolicy.each((i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.onDrag(this.canvas, this)\n        }\n      })\n\n\n      // notify all installed listener that th object has moved\n      // @since 5.3.3\n      this.fireEvent(\"drag\", {dx: dx, dy: dy, dx2: dx2, dy2: dy2, shiftKey: shiftKey, ctrlKey: ctrlKey})\n    },\n\n    /**\n     *\n     * Called by the framework if the figure returns false for the drag operation. In this\n     * case we send a \"panning\" event - mouseDown + mouseMove. This is very useful for\n     * UI-Widget like slider, spinner,...\n     *\n     *     // You can alternatively register an event handler with:\n     *     figure.on(\"panning\", function(emitter, eventData){\n     *         alert(\"panning of the figure called\");\n     *     });\n     *\n     * @param {Number} dx the x difference between the mouse down operation and now\n     * @param {Number} dy the y difference between the mouse down operation and now\n     * @param {Number} dx2 The x diff since the last call of this dragging operation\n     * @param {Number} dy2 The y diff since the last call of this dragging operation\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @template\n     */\n    onPanning: function (dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n    },\n\n    /**\n     *\n     * Called by the framework if the panning event of the figures ends. This happens\n     * after the mous up event if the panning is active.\n     *\n     *     // You can alternatively register an event handler with:\n     *     figure.on(\"panningEnd\", function(emitter){\n     *         alert(\"panning of the figure called\");\n     *     });\n     *\n     */\n    onPanningEnd: function () {\n    },\n\n    /**\n     *\n     * Will be called after a drag and drop action.<br>\n     * Sub classes can override this method to implement additional stuff. Don't forget to call\n     * the super implementation via <code>this._super();</code>\n     *\n     * @param {Number} x the x-coordinate of the mouse event\n     * @param {Number} y the y-coordinate of the mouse event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     **/\n    onDragEnd: function (x, y, shiftKey, ctrlKey) {\n      // Element ist zwar schon an seine Position, das Command muss aber trotzdem\n      // in dem CommandStack gelegt werden damit das Undo funktioniert.\n      //\n      if (this.command !== null) {\n        this.command.setPosition(this.x, this.y)\n        this.canvas.getCommandStack().execute(this.command)\n        this.command = null\n      }\n      this.isInDragDrop = false\n      this.panningDelegate = null\n\n      // notify all installed policies\n      //\n      this.editPolicy.each((i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.onDragEnd(this.canvas, this, x, y, shiftKey, ctrlKey)\n        }\n      })\n\n      this.fireEvent(\"move\",     { x: this.getX(), y: this.getY(), dx: 0, dy: 0})\n      this.fireEvent(\"change:x\", { x: this.getX(), dx: 0})\n      this.fireEvent(\"change:y\", { y: this.getY(), dy: 0})\n\n      // fire an event\n      // @since 5.3.3\n      this.fireEvent(\"dragend\", {x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n    },\n\n    /**\n     *\n     * Called by the framework during drag&drop operations if the user drag a figure over this figure\n     *\n     * @param {draw2d.Figure} draggedFigure The figure which is currently dragging\n     *\n     * @returns {draw2d.Figure} the figure which should receive the drop event or null if the element didn't want a drop event\n     * @since 6.1.0\n     * @private\n     **/\n    delegateTarget: function (draggedFigure) {\n\n      let delegate = draggedFigure\n      this.getCanvas().getDropInterceptorPolicies().each((i, policy) => {\n        delegate = policy.delegateTarget(draggedFigure, this)\n        if (delegate !== null) {\n          return false // break the loop\n        }\n      })\n\n      return delegate\n    },\n\n    /**\n     *\n     * Called by the framework during drag&drop operations if the user drag a figure over this figure\n     *\n     * @param {draw2d.Figure} draggedFigure The figure which is currently dragging\n     *\n     * @template\n     **/\n    onDragEnter: function (draggedFigure) {\n    },\n\n    /**\n     *\n     * Called if the DragDrop object leaving the current hover figure.\n     *\n     * @param {draw2d.Figure} draggedFigure The figure which is currently dragging\n     * @template\n     **/\n    onDragLeave: function (draggedFigure) {\n    },\n\n\n    /**\n     *\n     * Called if the user drop this element onto the dropTarget. This event is ONLY fired if the\n     * shape return \"this\" in the {@link draw2d.Figure#onDragEnter} method.\n     *\n     *\n     * @param {draw2d.Figure} dropTarget The drop target.\n     * @param {Number} x the x-coordinate of the mouse up event\n     * @param {Number} y the y-coordinate of the mouse up event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @template\n     **/\n    onDrop: function (dropTarget, x, y, shiftKey, ctrlKey) {\n    },\n\n    /**\n     *\n     * Called if the user dropped an figure onto this element. This event is ONLY fired if the\n     * in the canvas installed {@link draw2d.policy.canvas.DropInterceptorPolicy} allow this.\n     *\n     *\n     * @param {draw2d.Figure} droppedFigure The dropped figure.\n     * @param {Number} x the x-coordinate of the mouse up event\n     * @param {Number} y the y-coordinate of the mouse up event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @template\n     * @since 4.8.0\n     **/\n    onCatch: function (droppedFigure, x, y, shiftKey, ctrlKey) {\n    },\n\n\n    /**\n     *\n     * Callback method for the mouse enter event. Usefull for mouse hover-effects.\n     * Override this method for your own effects. Don't call them manually.\n     *\n     * @template\n     **/\n    onMouseEnter: function () {\n    },\n\n\n    /**\n     *\n     * Callback method for the mouse leave event. Useful for mouse hover-effects.\n     *\n     * @template\n     **/\n    onMouseLeave: function () {\n    },\n\n    /**\n     *\n     * Called when a user dbl clicks on the element\n     *\n     *     // Alternatively you can register an event with:\n     *     //\n     *     figure.on(\"dblclick\", function(emitter, event){\n     *         alert(\"user dbl click on the figure\");\n     *     });\n     *\n     * @template\n     */\n    onDoubleClick: function () {\n    },\n\n\n    /**\n     *\n     * Called when a user clicks on the element.\n     *\n     *     // You can alternatively register an event handler with:\n     *     figure.on(\"click\", function(emitter, event){\n     *         alert(\"user click on the figure\");\n     *     });\n     *\n     * @template\n     * @deprecated\n     */\n    onClick: function () {\n    },\n\n    /**\n     *\n     * called by the framework if the figure should show the context menu.<br>\n     * The strategy to show the context menu depends on the platform. Either looong press or\n     * right click with the mouse.\n     *\n     *     // Alternatively you register for this event with:\n     *     figure.on(\"contextmenu\", function(emitter, event){\n     *         alert(\"user press the right mouse button for a context menu\");\n     *     });\n     *\n     * @param {Number} x the x-coordinate to show the menu\n     * @param {Number} y the y-coordinate to show the menu\n     * @since 1.1.0\n     * @template\n     */\n    onContextMenu: function (x, y) {\n    },\n\n    /**\n     *\n     * Set the alpha blending of this figure.\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       \"alpha\": percent\n     *     });\n     *\n     *     // ...or:\n     *     figure.attr({\n     *       \"opacity\": percent\n     *     });\n     *\n     * @param {Number} percent value between [0..1].\n     **/\n    setAlpha: function (percent) {\n      percent = Math.min(1, Math.max(0, parseFloat(percent)))\n      if (percent === this.alpha) {\n        return\n      }\n\n      this.alpha = percent\n      this.repaint()\n      this.fireEvent(\"change:opacity\", {value: this.alpha})\n\n      return this\n    },\n\n\n    /**\n     *\n     * Return the alpha blending of the figure\n     *\n     * @returns {Number} the current alpha blending\n     */\n    getAlpha: function () {\n      return this.alpha\n    },\n\n\n    /**\n     *\n     * Set the rotation angle in degree [0..356]<br>\n     * <b>Only steps of 90 degree is working well</b>\n     * <br>\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       angle: angle\n     *     });\n     *\n     * @param {Number} angle the rotation angle in degree\n     */\n    setRotationAngle: function (angle) {\n      this.rotationAngle = angle\n\n      // Update the resize handles if the user change the position of the element via an API call.\n      //\n      this.editPolicy.each((i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.moved(this.canvas, this)\n        }\n      })\n\n      this.fireEvent(\"change:angle\", {value: this.rotationAngle})\n      this.repaint()\n\n      return this\n    },\n\n    /**\n     *\n     * return the rotation angle of the figure in degree of [0..356].\n     *\n     * <br>\n     * <b>NOTE: this method is pre alpha and not for production. Only steps of 90 degree is working well</b>\n     * <br>\n     * @returns {Number}\n     */\n    getRotationAngle: function () {\n      return this.rotationAngle\n    },\n\n\n    /**\n     *\n     * Show/hide the element. The element didn't receive any mouse events (click, dblclick) if you hide the\n     * figure.\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       visible: flag\n     *     });\n     *\n     * @param {Boolean} flag\n     * @param {Number} [duration] the optional number for the fadeIn /fadeOut of the figure\n     * @since 1.1.0\n     */\n    setVisible: function (flag, duration) {\n      flag = !!flag\n      if (flag === this.visible) {\n        return\n      }\n      this.visible = flag\n\n      this.repaint({visibleDuration: duration})\n\n      this.fireEvent(this.visible?\"show\":\"hide\")\n      this.fireEvent(\"change:visibility\", {value: this.visible})\n\n      return this\n    },\n\n    /**\n     *\n     * Return true if the figure visible.\n     *\n     * @returns {Boolean}\n     * @since 1.1.0\n     */\n    isVisible: function () {\n      return this.visible && this.shape !== null\n    },\n\n    /**\n     *\n     * Guarantee, that the figure width/height will not be distorted. Applicable before calling setDimension().\n     * It is false by default.\n     *\n     * @since 4.1.0\n     * @param {Boolean} flag boolean flag if the figure should respect the aspect ratio\n     */\n    setKeepAspectRatio: function (flag) {\n      this.keepAspectRatio = flag\n\n      return this\n    },\n\n    /**\n     *\n     * Return the flag if the shape keep the aspect ratio.\n     *\n     * @since 4.1.0\n     */\n    getKeepAspectRatio: function () {\n      return this.keepAspectRatio\n    },\n\n    /**\n     *\n     * Return the current z-index of the element. Currently this is an expensive method. The index will be calculated\n     * all the time. Caching is not implemented at the moment.\n     *\n     * @returns {Number}\n     */\n    getZOrder: function () {\n      let child = this.shape?.node\n      if(!child || this.cachedZOrder>=0){\n        return this.cachedZOrder\n      }\n      this.cachedZOrder = Array.from(child.parentNode.children).indexOf(child)\n      \n      return this.cachedZOrder\n    },\n\n    /**\n     *\n     * Set the flag if this object can snap to grid or geometry.\n     * A window of dialog should set this flag to false.\n     *\n     * @param {Boolean} flag The snap to grid/geometry enable flag.\n     *\n     **/\n    setCanSnapToHelper: function (flag) {\n      this.canSnapToHelper = !!flag\n\n      return this\n    },\n\n    /**\n     *\n     * Returns true if the figure can snap to any helper like a grid, guide, geometrie\n     * or something else.\n     *\n     * @returns {Boolean}\n     **/\n    getCanSnapToHelper: function () {\n      return this.canSnapToHelper\n    },\n\n    /**\n     *\n     * @returns {draw2d.geo.Point}\n     **/\n    getSnapToGridAnchor: function () {\n      return this.snapToGridAnchor\n    },\n\n    /**\n     *\n     * Set the hot spot for all snapTo### operations.\n     *\n     * @param {draw2d.geo.Point} point\n     **/\n    setSnapToGridAnchor: function (point) {\n      this.snapToGridAnchor = point\n\n      return this\n    },\n\n    /**\n     *\n     * Set the width of the figure and consider the minWidth attribute\n     *\n     * @param {Number} width the new width of the figure\n     * @since 5.1.0\n     */\n    setWidth: function (width) {\n      this.setDimension(parseFloat(width), this.getHeight())\n      this.fireEvent(\"change:width\", {value: this.width})\n\n      return this\n    },\n\n    /**\n     *\n     * The current width of the figure.\n     *\n     * @type {Number}\n     **/\n    getWidth: function () {\n      return this.width\n    },\n\n    /**\n     *\n     * Set the heigth of the figure and consider the minWidth attribute\n     *\n     * @param {Number} height the new height of the figure\n     * @since 5.1.0\n     */\n    setHeight: function (height) {\n      this.setDimension(this.getWidth(), parseFloat(height))\n      this.fireEvent(\"change:height\", {value: this.height})\n\n      return this\n    },\n\n    /**\n     *\n     * The current height of the figure.\n     *\n     * @returns {Number}\n     **/\n    getHeight: function () {\n      return this.height\n    },\n\n\n    /**\n     *\n     * This value is relevant for the interactive resize of the figure.\n     *\n     * @returns {Number} Returns the min. width of this object.\n     */\n    getMinWidth: function () {\n      return this.minWidth\n    },\n\n    /**\n     *\n     * Set the minimum width of this figure\n     *\n     * @param {Number} w\n     */\n    setMinWidth: function (w) {\n      this.minWidth = parseFloat(w)\n      this.fireEvent(\"change:minWidth\", {value: this.minWidth})\n\n      // fit the width with the new constraint\n      this.setWidth(this.getWidth())\n\n      return this\n    },\n\n    /**\n     *\n     * This value is relevant for the interactive resize of the figure.\n     *\n     * @returns {Number} Returns the min. height of this object.\n     */\n    getMinHeight: function () {\n      return this.minHeight\n    },\n\n    /**\n     *\n     * Set the minimum height of the figure.\n     *\n     * @param {Number} h\n     */\n    setMinHeight: function (h) {\n      this.minHeight = parseFloat(h)\n      this.fireEvent(\"change:minHeight\", {value: this.minHeight})\n\n      // fit the height with the new constraint\n      this.setHeight(this.getHeight())\n\n      return this\n    },\n\n\n    /**\n     *\n     * the the x-offset related to the parent figure or canvas\n     *\n     * @param {Number} x the new x offset of the figure\n     * @since 5.0.8\n     */\n    setX: function (x) {\n      this.setPosition(parseFloat(x), this.y)\n      return this\n    },\n\n    /**\n     *\n     * The x-offset related to the parent figure or canvas.\n     *\n     * @returns {Number} the x-offset to the parent figure\n     **/\n    getX: function () {\n      return this.x\n    },\n\n    /**\n     *\n     * the the y-offset related to the parent figure or canvas\n     *\n     * @param {Number} y the new x offset of the figure\n     * @since 5.0.8\n     */\n    setY: function (y) {\n      this.setPosition(this.x, parseFloat(y))\n      return this\n    },\n\n\n    /**\n     *\n     * The y-offset related to the parent figure or canvas.\n     *\n     * @returns {Number} The y-offset to the parent figure.\n     **/\n    getY: function () {\n      return this.y\n    },\n\n\n    /**\n     *\n     * The x-offset related to the canvas.\n     *\n     * @returns {Number} the x-offset to the canvas\n     **/\n    getAbsoluteX: function () {\n      if (!this.parent) {\n        return this.getX()\n      }\n\n      return this.getX() + this.parent.getAbsoluteX()\n    },\n\n\n    /**\n     *\n     * The y-offset related to the canvas.\n     *\n     * @returns {Number} The y-offset to the canvas.\n     **/\n    getAbsoluteY: function () {\n      if (!this.parent) {\n        return this.getY()\n      }\n      return this.getY() + this.parent.getAbsoluteY()\n    },\n\n\n    /**\n     *\n     * Returns the absolute y-position of the port.\n     *\n     * @type {draw2d.geo.Point}\n     **/\n    getAbsolutePosition: function () {\n      return new draw2d.geo.Point(this.getAbsoluteX(), this.getAbsoluteY())\n    },\n\n    /**\n     *\n     * Returns the absolute y-position of the port.\n     *\n     * @returns {draw2d.geo.Rectangle}\n     **/\n    getAbsoluteBounds: function () {\n      return new draw2d.geo.Rectangle(this.getAbsoluteX(), this.getAbsoluteY(), this.getWidth(), this.getHeight())\n    },\n\n\n    /**\n     *\n     * Set the position of the object.\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       x: x,\n     *       y: y\n     *     });\n     *\n     * @param {Number|draw2d.geo.Point} x The new x coordinate of the figure or the x/y coordinate if it is an draw2d.geo.Point\n     * @param {Number} [y] The new y coordinate of the figure\n     **/\n    setPosition: function (x, y) {\n      if (typeof x === \"undefined\") {\n        debugger\n      }\n\n      let oldPos = {x: this.x, y: this.y}\n\n      if (x instanceof draw2d.geo.Point) {\n        this.x = x.x\n        this.y = x.y\n      } else {\n        this.x = x\n        this.y = y\n      }\n\n      this.editPolicy.each((i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          let newPos = e.adjustPosition(this, this.x, this.y)\n          this.x = newPos.x\n          this.y = newPos.y\n        }\n      })\n\n      this.repaint()\n\n\n      // Update the resize handles if the user change the position of the\n      // element via an API call.\n      //\n      this.editPolicy.each((i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.moved(this.canvas, this)\n        }\n      })\n\n\n      let event = {\n        x: this.x,\n        y: this.y,\n        dx: this.x - oldPos.x,\n        dy: this.y - oldPos.y\n      }\n      this.fireEvent(\"move\", event)\n      this.fireEvent(\"change:x\", event)\n      this.fireEvent(\"change:y\", event)\n\n      return this\n    },\n\n\n    /**\n     *\n     * Get the current position of the figure\n     *\n     * @returns {draw2d.geo.Point}\n     * @since 2.0.0\n     */\n    getPosition: function () {\n      return new draw2d.geo.Point(this.getX(), this.getY())\n    },\n\n    /**\n     *\n     * Translate the figure with the given x/y offset.\n     *\n     * @param {Number} dx The x offset to translate\n     * @param {Number} dy The y offset to translate\n     **/\n    translate: function (dx, dy) {\n      this.setPosition(this.getX() + dx, this.getY() + dy)\n\n      return this\n    },\n\n\n    /**\n     *\n     * Set the new width and height of the figure.\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *        width:  w,\n     *        height: h\n     *     });\n     *\n     * @param {Number} w The new width of the figure\n     * @param {Number} h The new height of the figure\n     **/\n    setDimension: function (w, h) {\n      let old = {width: this.width, height: this.height}\n\n      w = Math.max(this.getMinWidth(), w)\n      h = Math.max(this.getMinHeight(), h)\n\n      if (this.width === w && this.height === h) {\n        // required if an inherit figure changed the w/h to a given constraint.\n        // In this case the Resize handles must be informed that the shape didn't resized.\n        // because the minWidth/minHeight did have a higher prio.\n        this.editPolicy.each((i, e) => {\n          if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n            e.moved(this.canvas, this)\n          }\n        })\n        return this\n      }\n\n\n      // apply all EditPolicy to adjust/modify the new dimension\n      //\n      this.editPolicy.each((i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          let newDim = e.adjustDimension(this, w, h)\n          w = newDim.w\n          h = newDim.h\n        }\n      })\n\n      // respect the aspect ratio if required\n      //\n      if (this.keepAspectRatio === true) {\n        if (w >= this.getMinWidth()) {\n          // scale the height to the given ratio\n          h = this.getHeight() * (w / this.getWidth())\n          // and apply the new dimension only if the values are in range of the given constraints\n          if (h >= this.getMinHeight()) {\n            this.width = w\n            this.height = h\n          }\n        }\n      } else {\n        this.width = Math.max(this.getMinWidth(), w)\n        this.height = Math.max(this.getMinHeight(), h)\n      }\n\n\n      this.repaint()\n\n      this.fireEvent(\"resize\")\n      this.fireEvent(\"change:dimension\", { height: this.height, width: this.width, old: old})\n\n      // Update the resize handles if the user change the position of the element via an API call.\n      //\n      this.editPolicy.each((i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.moved(this.canvas, this)\n        }\n      })\n\n      return this\n    },\n\n\n    /**\n     *\n     * Set the bounding box of the figure\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       width: w,\n     *       height: h,\n     *       x: x,\n     *       y: y\n     *     });\n     *\n     *     // or\n     *     figure.attr({\n     *       boundingBox: {x:1, y:100, width:30, height:30}\n     *     });\n     *\n     * @param {draw2d.geo.Rectangle} rect\n     * @since 4.8.0\n     */\n    setBoundingBox: function (rect) {\n      rect = new draw2d.geo.Rectangle(rect)\n\n      let orig = this.repaintBlocked\n      this.repaintBlocked = true\n      this.setPosition(rect.x, rect.y)\n      this.repaintBlocked = orig\n      this.setDimension(rect.w, rect.h)\n\n      return this\n    },\n\n    /**\n     *\n     * Returns the bounding box of the figure in absolute position to the canvas.\n     *\n     * @returns {draw2d.geo.Rectangle}\n     **/\n    getBoundingBox: function () {\n      return new draw2d.geo.Rectangle(this.getAbsoluteX(), this.getAbsoluteY(), this.getWidth(), this.getHeight())\n    },\n\n\n    /**\n     *\n     * Returns the bounding box of the figure in absolute position to the canvas. All child shapes included.\n     * The result BoundingBox spans the parent figured plus all children.\n     *\n     * @returns {draw2d.geo.Rectangle}\n     **/\n    getOuterBoundingBox: function () {\n      let parentBB =  new draw2d.geo.Rectangle(this.getAbsoluteX(), this.getAbsoluteY(), this.getWidth(), this.getHeight())\n      this.getChildren().each( (i, child)=>{\n        let childBB = child.getOuterBoundingBox()\n        parentBB.merge(childBB)\n      })\n      return parentBB\n    },\n\n    /**\n     *\n     * Detect whenever the hands over coordinate is inside the figure.\n     * The default implementation is a simple bounding box test.\n     *\n     * @param {Number} iX\n     * @param {Number} iY\n     * @param {Number} [corona]\n     *\n     * @returns {Boolean}\n     */\n    hitTest: function (iX, iY, corona) {\n      if (typeof corona === \"number\") {\n        return this.getBoundingBox().scale(corona, corona).hitTest(iX, iY)\n      }\n      return this.getBoundingBox().hitTest(iX, iY)\n    },\n\n\n    /**\n     *\n     * Switch on/off the drag drop behaviour of this object\n     *\n     * @param {Boolean} flag The new drag drop indicator\n     **/\n    setDraggable: function (flag) {\n      this.draggable = !!flag\n\n      return this\n    },\n\n    /**\n     *\n     * Get the Drag drop enable flag\n     *\n     * @returns {Boolean} The new drag drop indicator\n     **/\n    isDraggable: function () {\n      // delegate to the composite if given\n      if (this.composite !== null) {\n        return this.composite.isMemberDraggable(this, this.draggable)\n      }\n\n      return this.draggable\n    },\n\n\n    /**\n     *\n     * Returns the true if the figure can be resized.\n     *\n     * @returns {Boolean}\n     **/\n    isResizeable: function () {\n      return this.resizeable\n    },\n\n    /**\n     *\n     * You can change the resizeable behaviour of this object. Hands over [false] and\n     * the figure has no resizehandles if you select them with the mouse.<br>\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       resizeable: flag\n     *     });\n     *\n     * @param {Boolean} flag The resizeable flag.\n     **/\n    setResizeable: function (flag) {\n      this.resizeable = !!flag\n      this.fireEvent(\"change:resizeable\", {value: this.resizeable})\n\n      return this\n    },\n\n    /**\n     *\n     * Indicates whenever the element is selectable by user interaction or API.\n     *\n     * @returns {Boolean}\n     **/\n    isSelectable: function () {\n      // delegate to the composite if given\n      if (this.composite !== null) {\n        return this.composite.isMemberSelectable(this, this.selectable)\n      }\n\n      return this.selectable\n    },\n\n\n    /**\n     *\n     * You can change the selectable behavior of this object. Hands over [false] and\n     * the figure has no selection handles if you try to select them with the mouse.<br>\n     *\n     * @param {Boolean} flag The selectable flag.\n     **/\n    setSelectable: function (flag) {\n      this.selectable = !!flag\n      this.fireEvent(\"change:selectable\", {value: this.selectable})\n\n      return this\n    },\n\n    /**\n     *\n     * Return true if the object doesn't care about the aspect ratio.\n     * You can change the height and width independent.<br>\n     *\n     * Replaced with \"getKeepAspectRatio\"\n     * @returns {Boolean}\n     * @deprecated\n     */\n    isStrechable: function () {\n      return !this.getKeepAspectRatio()\n    },\n\n    /**\n     *\n     * Return false if you avoid that the user can delete your figure.\n     * Sub class can override this method.\n     *\n     * @returns {Boolean}\n     **/\n    isDeleteable: function () {\n      return this.deleteable\n    },\n\n    /**\n     *\n     * Set the flag if the shape is deleteable.\n     *\n     * @param {Boolean} flag enable or disable flag for the delete operation\n     **/\n    setDeleteable: function (flag) {\n      this.deleteable = !!flag\n      this.fireEvent(\"change:deleteable\", {value: this.deleteable})\n\n      return this\n    },\n\n    /**\n     *\n     * Set the parent of this figure.\n     * Don't call them manually.\n     *\n     * @param {draw2d.Figure} parent The new parent of this figure\n     * @private\n     **/\n    setParent: function (parent) {\n      this.parent = parent\n\n      if (parent !== null) {\n        // inherit the selection handling impl from the parent\n        this.setSelectionAdapter(parent.getSelectionAdapter())\n      } else {\n        // use default\n        this.setSelectionAdapter(null)\n      }\n\n      return this\n    },\n\n    /**\n     *\n     * Get the parent of this figure.\n     *\n     * @returns {draw2d.Figure}\n     **/\n    getParent: function () {\n      return this.parent\n    },\n\n    /**\n     *\n     * Check to see if a figure is a descendant of another figure.\n     * <br>\n     * The contains() method returns true if the figure provided by the argument is a descendant of this figure,\n     * whether it is a direct child or nested more deeply. Otherwise, it returns false.\n     *\n     * @param {draw2d.Figure} containedFigure The figure that may be contained by (a descendant of) this figure.\n     * @since 5.5.4\n     */\n    contains: function (containedFigure) {\n      if (containedFigure.getParent() === this) {\n        return true\n      }\n\n      for (let i = 0, len = this.children.getSize(); i < len; i++) {\n        let child = this.children.get(i).figure\n        if (child.contains(containedFigure)) {\n          return true\n        }\n      }\n      return false\n    },\n\n    /**\n     *\n     * Get the top most parent of this figure. This can be an layout figure or parent container\n     *\n     * @returns {draw2d.Figure}\n     * @since 5.0.6\n     **/\n    getRoot: function () {\n      let root = this.parent\n      while (root !== null && root.parent !== null) {\n        root = root.parent\n      }\n      return root\n    },\n\n    /**\n     *\n     * Set the assigned composite of this figure.\n     *\n     * @param {draw2d.shape.composite.StrongComposite} composite The assigned composite of this figure\n     * @since 4.8.0\n     **/\n    setComposite: function (composite) {\n      if (composite !== null && !(composite instanceof draw2d.shape.composite.StrongComposite)) {\n        throw \"'composite must inherit from 'draw2d.shape.composite.StrongComposite'\"\n      }\n\n      this.composite = composite\n\n      return this\n    },\n\n    /**\n     *\n     * Get the assigned composite of this figure.\n     *\n     * @returns {draw2d.shape.composite.StrongComposite}\n     * @since 4.8.0\n     **/\n    getComposite: function () {\n      return this.composite\n    },\n\n\n    /**\n     *\n     * Execute all handlers and behaviors attached to the figure for the given event type.\n     *\n     *\n     * @param {String} event the event to trigger\n     * @param {Object} [args] optional parameters for the triggered event callback\n     *\n     * @since 5.0.0\n     */\n    fireEvent: function (event, args) {\n      try {\n        if (typeof this.eventSubscriptions[event] === 'undefined') {\n          return\n        }\n\n        // avoid recursion\n        if (this._inEvent === true) {\n          return\n        }\n        this._inEvent = true\n        let subscribers = this.eventSubscriptions[event]\n        for (let i = 0; i < subscribers.length; i++) {\n          subscribers[i](this, args)\n        }\n      } catch (exc) {\n        console.log(exc)\n        throw exc\n      } finally {\n        this._inEvent = false\n\n        // fire a generic change event if an attribute has changed\n        // required for some DataBinding frameworks or for the Backbone.Model compatibility\n        // the event \"change\" with the corresponding attribute name as additional parameter\n        if (event.substring(0, 7) === \"change:\") {\n          this.fireEvent(\"change\", event.substring(7))\n        }\n      }\n    },\n\n    /**\n     *\n     * Attach an event handler function for one or more events to the figure.\n     * To remove events bound with .on(), see {@link #off}.\n     *\n     * possible events are:<br>\n     * <ul>\n     *   <li>click</li>\n     *   <li>dblclick</li>\n     *   <li>move</li>\n     *   <li>resize</li>\n     *   <li>timer</li>\n     *   <li>contextmenu</li>\n     *   <li>show</li>\n     *   <li>hide</li>\n     *   <li>added</li>\n     *   <li>removed</li>\n     *   <li>change:[attr]</li>\n     * </ul>\n     *\n     * @param {String}   event One or more space-separated event types\n     * @param {Function} callback A function to execute when the event is triggered.\n     * @param {draw2d.Figure} callback.emitter the emitter of the event\n     * @param {Object} [callback.obj] optional event related data\n     * @param {Object} [context] optional context of the function callback.\n     * @since 5.0.0\n     */\n    on: function (event, callback, context) {\n      let events = event.split(\" \")\n      if (typeof callback === \"undefined\") {\n        debugger\n      }\n      // the \"context\" param is add to be compatible with Backbone.Model.\n      // The project \"backbone.ModelBinder\" requires this signature and we want to be nice.\n      //\n      if (context) {\n        callback = callback.bind(context)\n        callback.___originalCallback = callback\n      }\n\n      for (let i = 0; i < events.length; i++) {\n        if (typeof this.eventSubscriptions[events[i]] === 'undefined') {\n          this.eventSubscriptions[events[i]] = []\n        }\n        // avoid duplicate registration for the same event with the same callback method\n        if (-1 !== $.inArray(callback, this.eventSubscriptions[events[i]])) {\n          //   debugger\n        } else {\n          this.eventSubscriptions[events[i]].push(callback)\n        }\n      }\n      return this\n    },\n\n    /**\n     *\n     * The .off() method removes event handlers that were attached with {@link #on}.<br>\n     * Calling .off() with no arguments removes all handlers attached to the elements.<br>\n     * <br>\n     * If a simple event name such as \"move\" is provided, all events of that type are removed from the figure.\n     *\n     *\n     * @param {String|Function} eventOrFunction the event name of the registerd function or the function itself\n     * @since 5.0.0\n     */\n    off: function (eventOrFunction) {\n      if (typeof eventOrFunction === \"undefined\") {\n        this.eventSubscriptions = {}\n      } else if (typeof eventOrFunction === 'string') {\n        this.eventSubscriptions[eventOrFunction] = []\n      } else {\n        for (let event in this.eventSubscriptions) {\n          this.eventSubscriptions[event] = this.eventSubscriptions[event].filter(callback => {\n            if (typeof callback.___originalCallback !== \"undefined\") {\n              return callback.___originalCallback !== eventOrFunction\n            }\n            return callback !== eventOrFunction\n          })\n        }\n      }\n\n      return this\n    },\n\n\n    /**\n     *\n     * Returns the best figure at the location [x,y]. It is a simple hit test. Keep in mind that only visible objects\n     * are returned.\n     *\n     * @param {Number} x The x position.\n     * @param {Number} y The y position.\n     * @param {draw2d.Figure|Array} [figureToIgnore] The figures which should be ignored.\n     **/\n    getBestChild: function (x, y, figureToIgnore) {\n      if (!Array.isArray(figureToIgnore)) {\n        if (figureToIgnore instanceof draw2d.Figure) {\n          figureToIgnore = [figureToIgnore]\n        } else {\n          figureToIgnore = []\n        }\n      }\n\n      let result = null\n\n      // tool method to check recursive a figure for hitTest\n      //\n      let checkRecursive = function (children) {\n        children.each(function (i, e) {\n          let c = e.figure\n          checkRecursive(c.children)\n          if (result === null && c.isVisible() === true && c.hitTest(x, y) === true && $.inArray(c, figureToIgnore) === -1) {\n            result = c\n          }\n          return result === null // break the each-loop if we found an element\n        })\n      }\n\n      checkRecursive(this.children)\n\n      return result\n    },\n\n    /**\n     *\n     * Returns the Command to perform the specified Request or null.\n     *\n     * @param {draw2d.command.CommandType} request describes the Command being requested\n     * @returns {draw2d.command.Command} null or a Command\n     * @private\n     **/\n    createCommand: function (request) {\n      if (request === null) {\n        return null\n      }\n\n      if (request.getPolicy() === draw2d.command.CommandType.MOVE) {\n        if (!this.isDraggable()) {\n          return null\n        }\n        return new draw2d.command.CommandMove(this)\n      }\n\n      if (request.getPolicy() === draw2d.command.CommandType.DELETE) {\n        if (!this.isDeleteable()) {\n          return null\n        }\n        return new draw2d.command.CommandDelete(this)\n      }\n\n      if (request.getPolicy() === draw2d.command.CommandType.RESIZE) {\n        if (!this.isResizeable()) {\n          return null\n        }\n        return new draw2d.command.CommandResize(this)\n      }\n\n      return null\n    },\n\n    /**\n     *\n     * Clone the figure. <br>\n     * You must override and implement the methods <b>getPersistentAttributes</b> and <b>setPersistentAttributes</b> for your custom\n     * figures if the have special attributes.\n     *\n     * The clone() method performs a deep copy of the object, meaning that it copies the children, ports and decorations\n     * per default. You can control the clone procedure with the 'cloneMetaData'.\n     *\n     *\n     * @param {Object} [cloneMetaData] controls the clone procedure\n     * @param {Boolean} [cloneMetaData.excludeChildren] set it to true if you want exclude the children.\n     *\n     * @since 4.1.0\n     * @experimental\n     */\n    clone: function (cloneMetaData) {\n      cloneMetaData = {excludeChildren: false, ...cloneMetaData}\n\n      let clone = eval(\"new \" + this.NAME + \"();\")\n      let initialId = clone.id\n\n      clone.setPersistentAttributes(this.getPersistentAttributes())\n\n      clone.id = initialId\n\n      // add all decorations to the memento\n      //\n      if (cloneMetaData.excludeChildren === false) {\n        clone.resetChildren()\n        this.children.each((i, entry) => {\n          let child = entry.figure.clone()\n          // we can ignore the locator if this didn't provide a \"correct\" name, this can happen in some\n          // Layout shapes like VerticalLayout or Horziontal Layout. This figures injects it own kind\n          // of layouter...so didn'T care about this.\n\n          let locator = entry.locator.NAME ? eval(\"new \" + entry.locator.NAME + \"();\") : null\n          clone.add(child, locator)\n        })\n      }\n\n      return clone\n    },\n\n    /**\n     *\n     * Return an objects with all important attributes for XML or JSON serialization\n     *\n     * @return {Object} all attributes of the figure required for the persistency\n     */\n    getPersistentAttributes: function () {\n      // force deep copy of userData to avoid side effects in the clone method.\n      //\n      let memento = {\n        type: this.NAME,\n        id: this.id,\n        x: this.getX(),\n        y: this.getY(),\n        width: this.width,\n        height: this.height,\n        alpha: this.alpha,\n        selectable: this.selectable,\n        draggable: this.draggable,\n        angle: this.rotationAngle,\n        userData: extend(true, {}, this.userData)\n      }\n\n\n      if (this.cssClass !== null) {\n        memento.cssClass = this.cssClass\n      }\n\n      if (this.composite !== null) {\n        memento.composite = this.composite.getId()\n      }\n\n      return memento\n    },\n\n    /**\n     *\n     * Read all attributes from the serialized properties and transfer them into the shape.\n     *\n     * @param {Object} memento\n     */\n    setPersistentAttributes: function (memento) {\n      this.id = memento.id\n      // in some cases, e.g. a Connection, the x/y attribute is not set.\n      //\n      if(memento.x && memento.y){\n        this.setPosition(parseFloat(memento.x), parseFloat(memento.y))\n      }\n\n      // width and height are optional parameter for the JSON stuff.\n      // We use the defaults if the attributes not present\n      if (typeof memento.width !== \"undefined\") {\n        this.width = parseFloat(memento.width)\n      }\n\n      if (typeof memento.height !== \"undefined\") {\n        this.height = parseFloat(memento.height)\n      }\n\n      if (typeof memento.userData !== \"undefined\") {\n        this.userData = memento.userData\n      }\n\n      if (typeof memento.selectable !== \"undefined\") {\n        this.selectable = memento.selectable\n      }\n\n      if (typeof memento.draggable !== \"undefined\") {\n        this.draggable = memento.draggable\n      }\n\n      if (typeof memento.cssClass !== \"undefined\") {\n        this.setCssClass(memento.cssClass)\n      }\n\n      if (typeof memento.alpha !== \"undefined\") {\n        this.setAlpha(parseFloat(memento.alpha))\n      }\n\n      if (typeof memento.angle !== \"undefined\") {\n        this.rotationAngle = parseFloat(memento.angle)\n      }\n\n      return this\n    }\n  })\n\n\n","import draw2d from 'packages'\n\n\n/**\n * @class\n *\n * Required for Node.js draw2d model read/write operations.\n *\n * @inheritable\n * @author Andreas Herz\n */\n\ndraw2d.HeadlessCanvas = Class.extend(\n  /** @lends draw2d.HeadlessCanvas.prototype */\n\n    /** @lends draw2d.HeadlessCanvas.prototype */\n    {\n\n    NAME: \"draw2d.HeadlessCanvas\",\n\n    /**\n     * Create a new canvas with the given HTML DOM references.\n     *\n     * @param {String} canvasId the id of the DOM element to use a parent container\n     */\n    init: function()\n    {\n        // internal document with all figures, ports, ....\n        //\n        this.figures     = new draw2d.util.ArrayList();\n        this.lines       = new draw2d.util.ArrayList(); // crap - why are connections not just figures. Design by accident\n        this.commonPorts = new draw2d.util.ArrayList();\n\n        this.eventSubscriptions = {};\n\n        // The CommandStack for undo/redo operations\n        //\n        this.commandStack = new draw2d.command.CommandStack();\n    },\n\n    /**\n     * \n     * Reset the canvas and delete all model elements.<br>\n     * You can now reload another model to the canvas with a {@link draw2d.io.Reader}\n     *\n     * @since 1.1.0\n     */\n    clear: function()\n    {\n        // internal document with all figures, ports, ....\n        //\n        this.figures     = new draw2d.util.ArrayList();\n        this.lines       = new draw2d.util.ArrayList();\n        this.commonPorts = new draw2d.util.ArrayList();\n\n        this.commandStack.markSaveLocation();\n\n        return this;\n    },\n\n    calculateConnectionIntersection:function()\n    {\n    },\n\n    /**\n     * \n     * Callback for any kind of image export tools to trigger the canvas to hide all unwanted\n     * decorations. The method is called e.g. from the draw2d.io.png.Writer\n     *\n     * @since 4.0.0\n     * @template\n     */\n    hideDecoration: function()\n    {\n    },\n\n    /**\n     * \n     * callback method for any image export writer to reactivate the decoration\n     * of the canvas. e.g. grids, rulers,...\n     *\n     *\n     * @since 4.0.0\n     * @template\n     */\n    showDecoration: function()\n    {\n    },\n\n\n    /**\n     * \n     * Add a figure at the given x/y coordinate. This method fires an event.\n     *\n     * Example:\n     *\n     *     canvas.on(\"figure:add\", function(emitter, event){\n     *        alert(\"figure added:\");\n     *     });\n     *\n     *     // or more general if you want catch all figure related events\n     *     //\n     *     canvas.on(\"figure\", function(emitter, event){\n     *        // use event.figure.getCanvas()===null to determine if the\n     *        // figure part of the canvas\n     *\n     *        alert(\"figure added or removed:\");\n     *     });\n     *\n     * @param {draw2d.Figure} figure The figure to add.\n     * @param {Number/draw2d.geo.Point} [x] The new x coordinate of the figure or the x/y coordinate if it is an draw2d.geo.Point\n     * @param {Number} [y] The y position.\n     **/\n    add: function( figure , x,  y)\n    {\n        if(figure.getCanvas()===this){\n            return;\n        }\n\n        if(figure instanceof draw2d.shape.basic.Line){\n         this.lines.add(figure);\n        }\n        else{\n         this.figures.add(figure);\n        }\n        figure.canvas=this;\n\n\n        return this;\n    },\n\n    /**\n     * \n     * Returns all lines/connections in this workflow/canvas.<br>\n     *\n     * @protected\n     * @returns {draw2d.util.ArrayList}\n     **/\n    getLines: function()\n    {\n      return this.lines;\n    },\n\n    /**\n     * \n     * Returns the internal figures.<br>\n     *\n     * @protected\n     * @returns {draw2d.util.ArrayList}\n     **/\n    getFigures: function()\n    {\n      return this.figures;\n    },\n\n    /**\n     * \n     * Returns the line or connection with the given id.\n     *\n     * @param {String} id The id of the line.\n     *\n     * @returns {draw2d.shape.basic.Line}\n     **/\n    getLine: function( id)\n    {\n      var count = this.lines.getSize();\n      for(var i=0; i<count;i++)\n      {\n         var line = this.lines.get(i);\n         if(line.getId()===id){\n            return line;\n         }\n      }\n      return null;\n    },\n\n    /**\n     * \n     * Returns the figure with the given id.\n     *\n     * @param {String} id The id of the figure.\n     * @returns {draw2d.Figure}\n     **/\n    getFigure: function( id)\n    {\n      var figure = null;\n      this.figures.each(function(i,e){\n          if(e.id===id){\n              figure=e;\n              return false;\n           }\n      });\n      return figure;\n    },\n\n    /**\n     * \n     * Register a port to the canvas. This is required for other ports to find a valid drop target.\n     *\n     * @param {draw2d.Port} port The new port which has been added to the Canvas.\n     **/\n    registerPort: function(port )\n    {\n      // All elements have the same drop targets.\n      //\n      if(!this.commonPorts.contains(port)){\n          this.commonPorts.add(port);\n      }\n\n      return this;\n    },\n\n    /**\n     * \n     * Return all ports in the canvas\n     *\n     */\n    getAllPorts: function()\n    {\n        return this.commonPorts;\n    },\n\n    /**\n     * \n     * Returns the command stack for the Canvas. Required for undo/redo support.\n     *\n     * @returns {draw2d.command.CommandStack}\n     **/\n    getCommandStack: function()\n    {\n      return this.commandStack;\n    },\n\n\n    // NEW EVENT HANDLING SINCE VERSION 5.0.0\n    /**\n     * \n     * Execute all handlers and behaviors attached to the canvas for the given event type.\n     *\n     *\n     * @param {String} event the event to trigger\n     * @param {Object} [args] optional parameters for the triggered event callback\n     *\n     * @since 5.0.0\n     */\n    fireEvent: function(event, args)\n    {\n        if (typeof this.eventSubscriptions[event] === 'undefined') {\n            return;\n        }\n\n        var subscribers = this.eventSubscriptions[event];\n        for (var i=0; i<subscribers.length; i++) {\n            try{\n                subscribers[i](this, args);\n            }\n            catch(exc){\n                console.log(exc);\n                console.log(subscribers[i]);\n                debugger;\n            }\n        }\n    },\n\n    /**\n     * \n     * Attach an event handler function for one or more events to the canvas.\n     * To remove events bound with .on(), see {@link #off}.\n     *\n     * possible events are:<br>\n     * <ul>\n     *   <li>reset</li>\n     *   <li>select</li>\n     * </ul>\n     *\n     * Example:\n     *\n     *     canvas.on(\"clear\", function(emitter, event){\n     *        alert(\"canvas.clear() called.\");\n     *     });\n     *\n     *     canvas.on(\"select\", function(emitter,event){\n     *         if(event.figure!==null){\n     *             alert(\"figure selected\");\n     *         }\n     *         else{\n     *             alert(\"selection cleared\");\n     *         }\n     *     });\n     *\n     * @param {String}   event One or more space-separated event types\n     * @param {Function} callback A function to execute when the event is triggered.\n     * @param {draw2d.Canvas} callback.emitter the emitter of the event\n     * @param {Object} [callback.obj] optional event related data\n     *\n     * @since 5.0.0\n     */\n    on: function(event, callback)\n    {\n        var events = event.split(\" \");\n        for(var i=0; i<events.length; i++){\n            if (typeof this.eventSubscriptions[events[i]] === 'undefined') {\n                this.eventSubscriptions[events[i]] = [];\n            }\n            this.eventSubscriptions[events[i]].push(callback);\n        }\n        return this;\n    },\n\n    /**\n     * \n     * The .off() method removes event handlers that were attached with {@link #on}.<br>\n     * Calling .off() with no arguments removes all handlers attached to the canvas.<br>\n     * <br>\n     * If a simple event name such as \"reset\" is provided, all events of that type are removed from the canvas.\n     *\n     *\n     * @param {String|Function} eventOrFunction the event name of the registerd function\n     * @since 5.0.0\n     */\n    off: function( eventOrFunction)\n    {\n        if(typeof eventOrFunction ===\"undefined\"){\n            this.eventSubscriptions = {};\n        }\n        else if( typeof eventOrFunction === 'string'){\n            this.eventSubscriptions[eventOrFunction] = [];\n        }\n        else{\n            for(var event in this.eventSubscriptions ){\n                this.eventSubscriptions[event] =this.eventSubscriptions[event].filter( callback => { return callback !== eventOrFunction; });\n            }\n        }\n\n        return this;\n    }\n});\n","import draw2d from 'packages'\n\n/**\n * @class\n * A HybridPort can work as Input and as Output port in the same way for a {@link draw2d.Connection}.\n *\n * @author Andreas Herz\n * @extends draw2d.Port\n */\ndraw2d.HybridPort = draw2d.Port.extend(\n    /** @lends draw2d.HybridPort.prototype */\n    {\n    NAME: \"draw2d.HybridPort\",\n\n    /**\n     * Create a new HybridPort element\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function(attr, setter, getter)\n    {\n        this._super(attr, setter, getter);\n\n        // responsive for the arrangement of the port\n        // calculates the x/y coordinates in relation to the parent node\n        this.locator=new draw2d.layout.locator.InputPortLocator();\n\n        // a Hybrid port has fanIn and fanOut connections. All of them can be handeled \n        // differently. \n        this.maxFanIn = Number.MAX_SAFE_INTEGER\n    },\n\n\n    /**\n     *\n     * set the maximal possible count of incomming connections for this port.<br>\n     * A \"incomming\" connection has always either a hybrid or output source port.\n     * \n     * This method didn't delete any connection if you reduce the number and a bunch of\n     * connection are bounded already.\n     *\n     * @param {Number} count the maximal number of connection related to this port\n     * @returns {this}\n     */\n    setMaxFanIn: function (count) {\n      this.maxFanIn = Math.max(1, count)\n      this.fireEvent(\"change:maxFanIn\", {value: this.maxFanIn})\n\n      return this\n    },\n\n    /**\n     *\n     * return the maximal possible connections (in+out) for this port.\n     *\n     * @returns {Number}\n     */\n    getMaxFanIn: function () \n    {\n      return this.maxFanIn\n    },\n\n    /**\n     * @param {draw2d.command.CommandType} request The requested operation to perform on the object\n     * @returns {draw2d.command.Command} The matching command to the requested operation.\n     */\n    createCommand: function(request)\n    {\n       // Connect request between two ports\n       //\n       if(request.getPolicy() === draw2d.command.CommandType.CONNECT) {\n\n         if(request.source.getParent().getId() === request.target.getParent().getId()){\n            return null;\n         }\n\n         if (request.source instanceof draw2d.InputPort) {\n            // This is the difference to the InputPort implementation of createCommand.\n            return new draw2d.command.CommandConnect(request.target, request.source, request.source);\n         }\n         else if (request.source instanceof draw2d.OutputPort) {\n            // This is the different to the OutputPort implementation of createCommand\n            return new draw2d.command.CommandConnect(request.source, request.target, request.source);\n         }\n         else if (request.source instanceof draw2d.HybridPort) {\n            // This is the different to the OutputPort implementation of createCommand\n            return new draw2d.command.CommandConnect(request.target,request.source, request.source);\n         }\n\n         return null;\n       }\n\n       // ...else call the base class\n       return this._super(request);\n    }\n});\n","import draw2d from 'packages'\n\n\n/**\n * @class\n * A InputPort is the start anchor for a {@link draw2d.Connection}.\n *\n * @author Andreas Herz\n * @extend draw2d.Port\n */\ndraw2d.InputPort = draw2d.Port.extend(\n  /** @lends draw2d.InputPort.prototype */\n  {\n\n  NAME: \"draw2d.InputPort\",\n\n  /**\n   * Create a new InputPort element\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    // responsive for the arrangement of the port\n    // calculates the x/y coordinates in relation to the parent node\n    this.locator = new draw2d.layout.locator.InputPortLocator()\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  createCommand: function (request) {\n    // Connect request between two ports\n    //\n    if (request.getPolicy() === draw2d.command.CommandType.CONNECT) {\n      return new draw2d.command.CommandConnect(request.source, request.target, request.source)\n    }\n\n    // ...else call the base class\n    return this._super(request)\n  }\n})\n","import draw2d from 'packages'\n\n\n/**\n * @class\n * A OutputPort is the start anchor for a {@link draw2d.Connection}.\n *\n * @author Andreas Herz\n * @extends draw2d.Port\n */\ndraw2d.OutputPort = draw2d.Port.extend(\n  /** @lends draw2d.OutputPort.prototype */\n    {\n\n    NAME: \"draw2d.OutputPort\",\n\n    /**\n     * Create a new OutputPort element\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function(attr, setter, getter)\n    {\n        this._super(attr, setter, getter);\n\n        // responsive for the arrangement of the port\n        // calculates the x/y coordinates in relation to the parent node\n        this.locator=new draw2d.layout.locator.OutputPortLocator();\n    },\n\n\n    /**\n     * @inheritdoc\n     */\n    createCommand: function(request)\n    {\n       // Connect request between two ports\n       //\n       if(request.getPolicy() === draw2d.command.CommandType.CONNECT){\n           // source and target are changed.\n           return new draw2d.command.CommandConnect(request.target, request.source, request.source);\n       }\n\n       // ...else call the base class\n       return this._super(request);\n    }\n});\n","import draw2d from 'packages'\n\n/**\n * @class\n *  A port is an object that is used to establish a connection between a node and a {@link draw2d.Connection}. The port can\n * be placed anywhere within a node ( see {@link draw2d.layout.locator.PortLocator} for details)\n *\n *\n * @author Andreas Herz\n * @param {Object} [attr] the configuration of the shape\n * @extends draw2d.shape.basic.Circle\n */\n\ndraw2d.Port = draw2d.shape.basic.Circle.extend(\n  /** @lends draw2d.Port.prototype */\n  {\n\n    NAME: \"draw2d.Port\",\n\n    DEFAULT_BORDER_COLOR: new draw2d.util.Color(\"#1B1B1B\"),\n\n    init: function (attr, setter, getter) {\n      this.locator = null\n      this.lighterBgColor = null\n      this.name = null\n      this.coronaWidth = 5 // the corona width for the hitTest method. Useful during drag&drop of ports. Better SnapTo behavior.\n\n      this._super({\n          bgColor: \"#4f6870\",\n          stroke: 1,\n          diameter: 10,\n          color: \"#1B1B1B\",\n          selectable: false\n          , ...attr},\n        {\n          coronaWidth: this.setCoronaWidth,\n          semanticGroup: this.setSemanticGroup,\n          ...setter},\n        {\n          coronaWidth: this.getCoronaWidth,\n          semanticGroup: this.getSemanticGroup,\n          ...getter})\n\n\n      // status vars for user interaction\n      //\n      this.ox = this.x\n      this.oy = this.y\n      this.corona = null // draw2d.shape.basic.Circle\n      this.useGradient = true\n\n      this.preferredConnectionDirection = null\n\n      // current attached connections\n      this.connections = new draw2d.util.ArrayList()\n\n\n      this.moveListener = (emitter, event) => {\n        this.repaint()\n        // Falls sich der parent bewegt hat, dann muss der Port dies seinen\n        // Connections mitteilen\n        this.fireEvent(\"move\", {figure: this, dx: 0, dy: 0})\n      }\n\n      this.connectionAnchor = new draw2d.layout.anchor.ConnectionAnchor(this)\n\n      // for dynamic diagrams. A Port can have a value which is set by a connector\n      //\n      this.value = null\n      this.maxFanOut = Number.MAX_SAFE_INTEGER\n\n      // semantic group. Only ports in the same semantic group can be connected\n      //\n      this.semanticGroup = \"global\"\n\n      this.setCanSnapToHelper(false)\n\n      // uninstall all default selection policies. This is not required for Ports\n      this.editPolicy.each((i, policy) => this.uninstallEditPolicy(policy))\n\n      this.installEditPolicy(new draw2d.policy.port.IntrusivePortsFeedbackPolicy())\n      // this.installEditPolicy(new draw2d.policy.port.ElasticStrapFeedbackPolicy());\n\n      // a port handles the selection handling always by its own, regardless if\n      // the port is part of an composite, node, group or whatever.\n      this.portSelectionAdapter = () => this\n    },\n\n    getSelectionAdapter: function () {\n      return this.portSelectionAdapter\n    },\n\n    /**\n     *\n     * set the maximal possible count of connections for this port.<br>\n     * This method didn't delete any connection if you reduce the number and a bunch of\n     * connection are bounded already.\n     *\n     * @param {Number} count the maximal number of connection related to this port\n     * @returns {this}\n     */\n    setMaxFanOut: function (count) {\n      this.maxFanOut = Math.max(1, count)\n      this.fireEvent(\"change:maxFanOut\", {value: this.maxFanOut})\n\n      return this\n    },\n\n    /**\n     *\n     * return the maximal possible connections (in+out) for this port.\n     *\n     * @returns {Number}\n     */\n    getMaxFanOut: function () {\n      return this.maxFanOut\n    },\n\n\n    /**\n     *\n     * Set the semantic group of this port. Only ports in the same semantic group\n     * can be connected.\n     *\n     * The default for all ports is \"global\"\n     *\n     * @param {String} group the semantic group of this port\n     * @returns {this}\n     */\n    setSemanticGroup: function (group) {\n      this.semanticGroup = group\n      this.fireEvent(\"change:semanticGroup\", {value: this.semanticGroup})\n\n      return this\n    },\n\n    /**\n     *\n     * Get the semantic group of this port. Only ports in the same semantic group\n     * can be connected.\n     *\n     * The default for all ports is \"global\"\n     *\n     * @returns {String}\n     */\n    getSemanticGroup: function () {\n      return this.semanticGroup\n    },\n\n    /**\n     *\n     * Set the Anchor for this object. An anchor is responsible for the endpoint calculation\n     * of an connection. just visible representation.\n     *\n     * @param {draw2d.layout.anchor.ConnectionAnchor} [anchor] the new source anchor for the connection or \"null\" to use the default anchor.\n     * @returns {this}\n     **/\n    setConnectionAnchor: function (anchor) {\n      // set some good defaults.\n      this.connectionAnchor = anchor ?? new draw2d.layout.anchor.ConnectionAnchor()\n      this.connectionAnchor.setOwner(this)\n\n      // the anchor has changed. In this case all connections needs an change event to recalculate\n      // the anchor and the routing itself\n      this.fireEvent(\"move\", {figure: this, dx: 0, dy: 0})\n\n      return this\n    },\n\n    getConnectionAnchorLocation: function (referencePoint, inquiringConnection) {\n      return this.connectionAnchor.getLocation(referencePoint, inquiringConnection)\n    },\n\n    getConnectionAnchorReferencePoint: function (inquiringConnection) {\n      return this.connectionAnchor.getReferencePoint(inquiringConnection)\n    },\n\n\n    /**\n     *\n     * Returns the **direction** for the connection in relation to the given port and it's parent.\n     *\n     * <p>\n     * Possible values:\n     * <ul>\n     *   <li>draw2d.geo.Rectangle.DIRECTION_UP</li>\n     *   <li>draw2d.geo.Rectangle.DIRECTION_RIGHT</li>\n     *   <li>draw2d.geo.Rectangle.DIRECTION_DOWN</li>\n     *   <li>draw2d.geo.Rectangle.DIRECTION_LEFT</li>\n     * </ul>\n     * <p>\n     *\n     * @param {draw2d.Port} peerPort the counterpart port\n     *\n     * @returns {Number} the direction.\n     */\n    getConnectionDirection: function (peerPort) {\n      // return the calculated connection direction if the port didn't have set any\n      //\n      if (typeof this.preferredConnectionDirection === \"undefined\" || this.preferredConnectionDirection === null) {\n        return this.getParent().getBoundingBox().getDirection(this.getAbsolutePosition())\n      }\n\n      return this.preferredConnectionDirection\n    },\n\n\n    /**\n     *\n     * Set the **direction** for the connection in relation to the given port and it's parent.\n     *\n     * <p>\n     * Possible values:\n     * <ul>\n     *   <li>up -&gt; 0</li>\n     *   <li>right -&gt; 1</li>\n     *   <li>down -&gt; 2</li>\n     *   <li>left -&gt; 3</li>\n     *   <li>calculated -&gt; null</li>\n     * </ul>\n     * <p>\n     *\n     * @since 5.2.1\n     * @param {Number} direction the preferred connection direction.\n     * @returns {this}\n     */\n    setConnectionDirection: function (direction) {\n      this.preferredConnectionDirection = direction\n\n      // needs an change event to recalculate the route\n      this.fireEvent(\"move\", {figure: this, dx: 0, dy: 0})\n\n      return this\n    },\n\n    /**\n     *\n     * Set the locator/layouter of the port. A locator is responsive for the x/y arrangement of the\n     * port in relation to the parent node.\n     *\n     * @param {draw2d.layout.locator.Locator} locator\n     * @returns {this}\n     */\n    setLocator: function (locator) {\n      this.locator = locator\n\n      return this\n    },\n\n    /**\n     *\n     * Get the locator/layouter of the port. A locator is responsive for the x/y arrangement of the\n     * port in relation to the parent node.\n     *\n     * @since 4.2.0\n     */\n    getLocator: function () {\n      return this.locator\n    },\n\n\n    /**\n     *\n     * Set the new background color of the figure. It is possible to hands over\n     * <code>null</code> to set the background transparent.\n     *\n     * @param {draw2d.util.Color|String} color The new background color of the figure\n     * @returns {this}\n     **/\n    setBackgroundColor: function (color) {\n      this.lighterBgColor = new draw2d.util.Color(color).lighter(0.3).hash()\n      this._super(color)\n\n      return this\n    },\n\n    /**\n     *\n     * Set a value for the port. This is useful for interactive/dynamic diagrams like circuits, simulator,...\n     *\n     * @param {Object} value the new value for the port. Can be \"undefined\" or \"null\"\n     * @returns {this}\n     */\n    setValue: function (value) {\n\n      if (value === this.value) {\n        return this\n      }\n      let old = this.value\n      this.value = value\n\n      this.getParent()?.onPortValueChanged(this)\n      \n      this.fireEvent(\"change:value\", {value: this.value, old: old})\n\n      return this\n    },\n\n    /**\n     *\n     * Return the user defined value of the port.\n     *\n     * @returns {Object}\n     */\n    getValue: function () {\n      return this.value\n    },\n\n    /**\n     * @private\n     */\n    repaint: function (attributes) {\n      if (this.repaintBlocked === true || this.shape === null) {\n        return\n      }\n\n      attributes ??= {}\n\n      // a port did have the 0/0 coordinate in the center and not in the top/left corner\n      //\n      attributes.cx = this.getAbsoluteX()\n      attributes.cy = this.getAbsoluteY()\n      attributes.rx = this.width / 2\n      attributes.ry = attributes.rx\n      attributes.cursor = \"move\"\n\n      if (this.getAlpha() < 0.9 || this.useGradient === false) {\n        attributes.fill = this.bgColor.rgba()\n      } else {\n        attributes.fill = [\"90\", this.bgColor.hash(), this.lighterBgColor].join(\"-\")\n      }\n\n      this._super(attributes)\n    },\n\n\n    /**\n     * @inheritdoc\n     *\n     **/\n    onMouseEnter: function () {\n      this._oldstroke = this.getStroke()\n      this.setStroke(2)\n    },\n\n\n    /**\n     * @inheritdoc\n     *\n     **/\n    onMouseLeave: function () {\n      this.setStroke(this._oldstroke)\n    },\n\n\n    /**\n     *\n     * Returns a {@link draw2d.util.ArrayList} of {@link draw2d.Connection}s of all related connections to this port.\n     *\n     * @returns {draw2d.util.ArrayList}\n     **/\n    getConnections: function () {\n      return this.connections\n    },\n\n\n    /**\n     * @private\n     */\n    setParent: function (parent) {\n      this.parent?.off(this.moveListener)\n\n      this._super(parent)\n\n      this.parent?.on(\"move\", this.moveListener)\n    },\n\n\n    /**\n     *\n     * Returns the corona width of the Port. The corona width will be used during the\n     * drag&drop of a port.\n     *\n     * @returns {Number}\n     **/\n    getCoronaWidth: function () {\n      return this.coronaWidth\n    },\n\n\n    /**\n     *\n     * Set the corona width of the Port. The corona width will be used during the\n     * drag&drop of a port. You can drop a port in the corona of this port to create\n     * a connection. It is not necessary to drop exactly on the port.\n     *\n     * @param {Number} width The new corona width of the port\n     * @returns {this}\n     **/\n    setCoronaWidth: function (width) {\n      this.coronaWidth = width\n\n      return this\n    },\n\n    /**\n     * @inheritdoc\n     *\n     * @param {Number} x the x-coordinate of the mouse event\n     * @param {Number} y the y-coordinate of the mouse event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @returns {Boolean}\n     * @private\n     **/\n    onDragStart: function (x, y, shiftKey, ctrlKey) {\n      // just allow the DragOperation if the port didn't have reached the max fanOut\n      // limit.\n      if (this.getConnections().getSize() >= this.maxFanOut) {\n        return false\n      }\n\n//        this.getShapeElement().insertAfter(this.parent.getShapeElement());\n      // don't call the super method. This creates a command and this is not necessary for a port\n      this.ox = this.x\n      this.oy = this.y\n\n      let canStartDrag = true\n\n      // notify all installed policies\n      //\n      this.editPolicy.each( (i, e)=>  {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          // DragStart operation can send a veto for the dragStart\n          // @since 6.1.0\n          canStartDrag = canStartDrag && e.onDragStart(this.canvas, this, x, y, shiftKey, ctrlKey)\n        }\n      })\n\n      return canStartDrag\n    },\n\n    /**\n     * @inheritdoc\n     *\n     * @param {Number} dx the x difference between the start of the drag drop operation and now\n     * @param {Number} dy the y difference between the start of the drag drop operation and now\n     * @param {Number} dx2 The x diff since the last call of this dragging operation\n     * @param {Number} dy2 The y diff since the last call of this dragging operation\n     *\n     * @private\n     **/\n    onDrag: function (dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n      // TODO: warum wurde diese methode überschrieben?!\n      this._super(dx, dy)\n    },\n\n\n    /**\n     * @param {Number} x the x-coordinate of the mouse event\n     * @param {Number} y the y-coordinate of the mouse event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @private\n     **/\n    onDragEnd: function (x, y, shiftKey, ctrlKey) {\n      // Don't call the parent implementation. This will create an CommandMove object\n      // and store them o the CommandStack for the undo operation. This makes no sense for a\n      // port.\n      // draw2d.shape.basic.Rectangle.prototype.onDragEnd.call(this); DON'T call the super implementation!!!\n\n      this.setAlpha(1.0)\n\n      // 1.) Restore the old Position of the node\n      //\n      this.setPosition(this.ox, this.oy)\n    },\n\n\n    /**\n     *\n     * Called if the user drop this element onto the dropTarget\n     *\n     * @param {draw2d.Figure} dropTarget The drop target.\n     * @param {Number} x the x-coordinate of the mouse up event\n     * @param {Number} y the y-coordinate of the mouse up event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @@private\n     **/\n    onDrop: function (dropTarget, x, y, shiftKey, ctrlKey) {\n    },\n\n\n    /**\n     *\n     * Callback method if a new connection has created with this port\n     *\n     *     // Alternatively you register for this event with:\n     *     port.on(\"connect\", function(emitterPort, connection){\n     *         alert(\"port connected\");\n     *     });\n     *\n     * @param {draw2d.Connection} connection The connection which has been created\n     * @since 2.5.1\n     *\n     * @template\n     **/\n    onConnect: function (connection) {\n    },\n\n    /**\n     *\n     * Callback method if a new connection has created with this port\n     *\n     *     // Alternatively you register for this event with:\n     *     port.on(\"connect\", function(emitterPort, connection){\n     *         alert(\"port disconnected\");\n     *     });\n     *\n     * @param {draw2d.Connection} connection The connection which has been deleted\n     * @since 2.5.1\n     *\n     * @template\n     **/\n    onDisconnect: function (connection) {\n    },\n\n\n    /**\n     *\n     * Return the name of this port.\n     *\n     * @returns {String}\n     **/\n    getName: function () {\n      return this.name\n    },\n\n    /**\n     *\n     * Set the name of this port. The name of the port can be referenced by the lookup of\n     * ports in the node.\n     *\n     *\n     * @param {String} name The new name of this port.\n     * @returns {this}\n     **/\n    setName: function (name) {\n      this.name = name\n\n      return this\n    },\n\n\n    /**\n     *\n     * Hit test for ports. This method respect the corona diameter of the port for the hit test.\n     * The corona width can be set with {@link draw2d.Port#setCoronaWidth}\n     *\n     * @param {Number} iX\n     * @param {Number} iY\n     * @param {Number} [corona]\n     * @returns {Boolean}\n     */\n    hitTest: function (iX, iY, corona) {\n      let x = this.getAbsoluteX() - this.coronaWidth - this.getWidth() / 2\n      let y = this.getAbsoluteY() - this.coronaWidth - this.getHeight() / 2\n      let iX2 = x + this.getWidth() + (this.coronaWidth * 2)\n      let iY2 = y + this.getHeight() + (this.coronaWidth * 2)\n\n      return (iX >= x && iX <= iX2 && iY >= y && iY <= iY2)\n    },\n\n    /**\n     *\n     * Highlight this port\n     *\n     * @param {Boolean} flag indicator if the figure should glow.\n     * @returns {this}\n     */\n    setGlow: function (flag) {\n      if (flag === true && this.corona === null) {\n        this.corona = new draw2d.Corona()\n        this.corona.setDimension(this.getWidth() + (this.getCoronaWidth() * 2), this.getWidth() + (this.getCoronaWidth() * 2))\n        this.corona.setPosition(this.getAbsoluteX() - this.getCoronaWidth() - this.getWidth() / 2, this.getAbsoluteY() - this.getCoronaWidth() - this.getHeight() / 2)\n\n        this.corona.setCanvas(this.getCanvas())\n\n        // important inital\n        this.corona.getShapeElement()\n        this.corona.repaint()\n      } else if (flag === false && this.corona !== null) {\n        this.corona.setCanvas(null)\n        this.corona = null\n      }\n\n      return this\n    },\n\n\n    /**\n     *\n     * Set the diameter of the port. The center of the circle will be retained.\n     *\n     * @param {Number} d The new diameter of the circle.\n     * @since 4.0.0\n     * @returns {this}\n     **/\n    setDiameter: function (d) {\n      //let center = this.getCenter()\n      this.setDimension(d, d)\n      // the port has its center in the middle. In this case there is no need to shift the center of the circle\n      // like it is done in the base implementation.\n      //this.setCenter(center)\n      this.fireEvent(\"change:diameter\", {value: d})\n\n      return this\n    },\n\n    /**\n     * @inheritdoc\n     */\n    createCommand: function (request) {\n      // the port has its own implementation of the CommandMove\n      //\n      if (request.getPolicy() === draw2d.command.CommandType.MOVE) {\n        if (!this.isDraggable()) {\n          return null\n        }\n        return new draw2d.command.CommandMovePort(this)\n      }\n\n      return null\n    },\n\n\n    /**\n     *\n     * Called from the figure itself when any position changes happens. All listener\n     * will be informed.\n     * <br>\n     * DON'T fire this event if the Port is during a Drag&Drop operation. This can happen\n     * if we try to connect two ports\n     *\n     * @private\n     **/\n    fireEvent: function (event, args) {\n      if (this.isInDragDrop === true && event !== \"drag\") {\n        return\n      }\n\n      this._super(event, args)\n    },\n\n    /**\n     *\n     * Return an objects with all important attributes for XML or JSON serialization\n     *\n     * @return {Object} all attributes required for the persistency\n     */\n    getPersistentAttributes: function () {\n      let memento = this._super()\n\n      memento.maxFanOut = this.maxFanOut\n      memento.name = this.name\n      memento.semanticGroup = this.semanticGroup\n\n      // defined by the locator. Don't persist\n      //\n      delete memento.x\n      delete memento.y\n\n      // ports didn't have children ports. In this case we\n      // delete this attribute as well to avoid confusions.\n      //\n      delete memento.ports\n\n      return memento\n    },\n\n    /**\n     *\n     * Read all attributes from the serialized properties and transfer them into the shape.\n     *\n     * @param {Object} memento\n     * @returns {this}\n     */\n    setPersistentAttributes: function (memento) {\n      this._super(memento)\n\n      if (typeof memento.maxFanOut !== \"undefined\") {\n        // Big bug in the past.\n        // I used Number.MAX_VALUE as maxFanOut which is 1.7976931348623157e+308\n        // parseInt creates \"1\" during the reading of the JSON - which is crap.\n        // BIG BIG BUG!!! my fault.\n        // Now check if the memento.maxFanOut is a number and take this without crappy parsing.\n        if (typeof memento.maxFanOut === \"number\") {\n          this.maxFanOut = memento.maxFanOut\n        } else {\n          this.maxFanOut = Math.max(1, parseInt(memento.maxFanOut))\n        }\n      }\n\n      if (typeof memento.name !== \"undefined\") {\n        this.setName(memento.name)\n      }\n\n      if (typeof memento.semanticGroup !== \"undefined\") {\n        this.setSemanticGroup(memento.semanticGroup)\n      }\n\n      return this\n    }\n  })\n\n\n/**\n * @class\n * Glow effect for ports. Just for internal use.\n *\n * @private\n * @extend draw2d.shape.basic.Circle\n */\ndraw2d.Corona = draw2d.shape.basic.Circle.extend(\n  /** @lends draw2d.shape.basic.Circle.prototype */\n  {\n\n    init: function () {\n      this._super()\n      this.setAlpha(0.3)\n      this.setBackgroundColor(new draw2d.util.Color(178, 225, 255))\n      this.setColor(new draw2d.util.Color(102, 182, 252))\n    },\n\n    /**\n     *\n     * the the opacity of the element.\n     *\n     * @param {Number} percent\n     */\n    setAlpha: function (percent) {\n      this._super(Math.min(0.3, percent))\n      this.setDeleteable(false)\n      this.setDraggable(false)\n      this.setResizeable(false)\n      this.setSelectable(false)\n\n      return this\n    }\n  })\n","import draw2d from 'packages'\n\n\n/**\n * @class\n * The Resizehandles for Figures.\n\n * <pre>\n * Possible Type:\n *\n *   1             2               3\n *    O-----------O-------------O\n *    |                         |\n *    |                         |\n *   8 O           + 9           O 4\n *    |                         |\n *    |                         |\n *    O-----------O-------------O\n *   7             6               5\n * </pre>\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.Rectangle\n */\ndraw2d.ResizeHandle = draw2d.shape.basic.Rectangle.extend(\n  /** @lends draw2d.ResizeHandle.prototype */\n  {\n\n  NAME: \"draw2d.ResizeHandle\",\n\n  /**\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   * @param {draw2d.Figure} the owner if the resize handle\n   * @param {Number} type the type of the ResizeHandle.\n   */\n  init: function (attr, setter, getter) {\n\n    this.zoomCallback = ()=> {\n      this.attr({\n          width:  this.origWidth*this.getCanvas().getZoom(),\n          height: this.origHeight*this.getCanvas().getZoom(),\n          radius: this.origRadius*this.getCanvas().getZoom(),\n          stroke: this.origStroke*this.getCanvas().getZoom()\n      })\n\n      // size of the ResizeHandle has changed. Force a reposition of handle\n      //\n      if(!this.blockEvent)\n        this.owner.fireEvent(\"move\",{})\n    }\n\n    this._super(\n      {\n        // set some good defaults\n        bgColor: \"#FDFDFD\",\n        stroke: 0.5,\n        width:10,\n        height:10,\n        minWidth:0.3,\n        minHeight:0.3,\n        color: \"#a0a0a0\",\n        radius: 1,\n        selectable:false\n        // and allow to override them\n      , ...attr},\n      {\n        owner : this.setOwner,\n        type : this.setType,\n        ...setter},\n      {\n        owner : this.getOwner,\n        type : this.getType,\n        ...getter})\n\n    // required in the SelectionEditPolicy to indicate the type of figure\n    // which the user clicks\n    this.isResizeHandle = true\n\n    this.command = null\n    this.commandMove = null\n    this.commandResize = null\n    this.useGradient = true\n\n\n    this.origRadius = this.radius\n    this.origWidth = this.width\n    this.origHeight = this.height\n    this.origStroke = this.stroke\n  },\n\n\n  /**\n   *\n   * The edge of the rectangle for the snapTo mechanism.\n   *\n   * @return {draw2d.SnapToHelper} enum of the direction (NORTH, NORTH_WEST, EAST,...)\n   */\n  getSnapToDirection: function () {\n    switch (this.type) {\n      case 1:\n        return draw2d.SnapToHelper.NORTH_WEST\n      case 2:\n        return draw2d.SnapToHelper.NORTH\n      case 3:\n        return draw2d.SnapToHelper.NORTH_EAST\n      case 4:\n        return draw2d.SnapToHelper.EAST\n      case 5:\n        return draw2d.SnapToHelper.SOUTH_EAST\n      case 6:\n        return draw2d.SnapToHelper.SOUTH\n      case 7:\n        return draw2d.SnapToHelper.SOUTH_WEST\n      case 8:\n        return draw2d.SnapToHelper.WEST\n      case 9:\n        return draw2d.SnapToHelper.NSEW\n      default:\n        return draw2d.SnapToHelper.EAST\n    }\n  },\n\n  /**\n   * @inheritdoc\n   */\n  createShapeElement: function () {\n    this.shape = this._super()\n\n    this.shape.node.setAttribute(\"type\", this.type)\n    this.updateCursor(this.shape)\n\n    return this.shape\n  },\n\n\n  /**\n   *\n   * Returns the current used SVG as string\n   *\n   * @returns {String}\n   */\n  getOwner: function()\n  {\n    return this.owner;\n  },\n\n  setOwner: function( owner){\n    this.owner = owner\n\n    return this\n  },\n\n\n  /**\n   *\n   * Returns the current used SVG as string\n   *\n   * @returns {String}\n   */\n  getType: function()\n  {\n    return this.type;\n  },\n\n  setType: function( type){\n    this.type = type\n\n    return this\n  },\n\n  /**\n   *\n   * calculate and set the cursor of the reize handle\n   * @private\n   */\n  updateCursor: function (shape) {\n    if (shape === null) {\n      return this\n    }\n\n    if (this.isDraggable() === false) {\n      shape.attr({\"cursor\": \"default\"})\n      return this\n    }\n\n    /*\n    *   1             2               3\n    *    O-----------O-------------O\n    *    |                         |\n    *    |                         |\n    *   8 O           + 9           O 4\n    *    |                         |\n    *    |                         |\n    *    O-----------O-------------O\n    *   7             6               5\n    */\n    switch (this.type) {\n      case 1:\n        shape.attr({\"cursor\": \"nw-resize\"})\n        break\n      case 2:\n        shape.attr({\"cursor\": \"n-resize\"})\n        break\n      case 3:\n        shape.attr({\"cursor\": \"ne-resize\"})\n        break\n      case 4:\n        shape.attr({\"cursor\": \"e-resize\"})\n        break\n      case 5:\n        shape.attr({\"cursor\": \"se-resize\"})\n        break\n      case 6:\n        shape.attr({\"cursor\": \"s-resize\"})\n        break\n      case 7:\n        shape.attr({\"cursor\": \"sw-resize\"})\n        break\n      case 8:\n        shape.attr({\"cursor\": \"w-resize\"})\n        break\n      default:\n        shape.attr({\"cursor\": \"move\"})\n        break\n    }\n    return this\n  },\n\n  /**\n   *\n   * Adjust the draggable flag of the resize handle and update the cursor of the shape in relation\n   * to the type of resize handle. north, south,west,..\n   *\n   * @param flag\n   * @returns {this}\n   */\n  setDraggable: function (flag) {\n    this._super(flag)\n    this.updateCursor(this.shape)\n\n    return this\n  },\n\n  /**\n   *\n   * Will be called if the drag and drop action beginns. You can return [false] if you\n   * want avoid that the figure can be move.\n   *\n   * @param {Number} x the x-coordinate of the mouse event\n   * @param {Number} y the y-coordinate of the mouse event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   *\n   * @returns {Boolean} true whenever the drag drop operation is allowed.\n   **/\n  onDragStart: function (x, y, shiftKey, ctrlKey) {\n    // This happens if the selected figure has set the \"nonResizeable\" flag\n    // In this case the ResizeHandle can't be dragged. => no resize\n    //\n    if (!this.isDraggable()) {\n      return false\n    }\n\n    this.ox = this.getAbsoluteX()\n    this.oy = this.getAbsoluteY()\n\n    this.commandMove = this.owner.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE))\n    this.commandResize = this.owner.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.RESIZE))\n\n    return true\n  },\n\n\n  /**\n   *\n   * Called by the framework if the figure is moved by user interaction.\n   *\n   * @param {Number} dx the move x offset\n   * @param {Number} dy the move y offset\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   *\n   */\n  onDrag: function (dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n    if (this.isDraggable() === false) {\n      return\n    }\n\n    let oldX = this.getAbsoluteX()\n    let oldY = this.getAbsoluteY()\n\n    // call the super.drag method with all snapTo### handler and adjustments\n    this._super(dx, dy, dx2, dy2)\n\n    let diffX = this.getAbsoluteX() - oldX\n    let diffY = this.getAbsoluteY() - oldY\n\n    let obj = this.owner\n    let objPosX = obj.getAbsoluteX()\n    let objPosY = obj.getAbsoluteY()\n    let objWidth = obj.getWidth()\n    let objHeight = obj.getHeight()\n\n    let newX = null\n    let newY = null\n    let corrPos = null\n    /*\n    *   1             2               3\n    *    O-----------O-------------O\n    *    |                         |\n    *    |                         |\n    *   8 O           + 9           O 4\n    *    |                         |\n    *    |                         |\n    *    O-----------O-------------O\n    *   7             6               5\n    */\n    switch (this.type) {\n      case 1:\n        obj.setDimension(objWidth - diffX, objHeight - diffY)\n        newX = objPosX + (objWidth - obj.getWidth())\n        newY = objPosY + (objHeight - obj.getHeight())\n        obj.setPosition(newX, newY)\n        break\n      case 2:\n        obj.setDimension(objWidth, objHeight - diffY)\n        newX = objPosX\n        newY = objPosY + (objHeight - obj.getHeight())\n        obj.setPosition(newX, newY)\n        break\n      case 3:\n        obj.setDimension(objWidth + diffX, objHeight - diffY)\n        newX = objPosX\n        newY = objPosY + (objHeight - obj.getHeight())\n        obj.setPosition(newX, newY)\n        break\n      case 4:\n        obj.setDimension(objWidth + diffX, objHeight)\n        break\n      case 5:\n        obj.setDimension(objWidth + diffX, objHeight + diffY)\n        break\n      case 6:\n        obj.setDimension(objWidth, objHeight + diffY)\n        break\n      case 7:\n        obj.setDimension(objWidth - diffX, objHeight + diffY)\n        newX = objPosX + (objWidth - obj.getWidth())\n        newY = objPosY\n        obj.setPosition(newX, newY)\n        break\n      case 8:\n        obj.setDimension(objWidth - diffX, objHeight)\n        newX = objPosX + (objWidth - obj.getWidth())\n        newY = objPosY\n        obj.setPosition(newX, newY)\n        break\n    }\n\n    if (newX !== null) {\n      // may the setPosition has changed regarding any constraint or edit policies. In this case\n      // we must adjust the dimension with the related correction\n      //\n      corrPos = obj.getPosition()\n      if (corrPos.x !== newX || corrPos.y !== newY) {\n        obj.setDimension(obj.getWidth() - (corrPos.x - newX), obj.getHeight() - (corrPos.y - newY))\n      }\n    }\n  },\n\n  /**\n   *\n   * Will be called after a drag and drop action.<br>\n   *\n   * @param {Number} x the x-coordinate of the mouse event\n   * @param {Number} y the y-coordinate of the mouse event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @private\n   **/\n  onDragEnd: function (x, y, shiftKey, ctrlKey) {\n    if (!this.isDraggable()) {\n      return\n    }\n\n    // An non draggable resizeHandle doesn't create a move/resize command.\n    // This happens if the selected figure has set the \"nonResizeable\" flag.\n    //\n    if (this.commandMove !== null) {\n      this.commandMove.setPosition(this.owner.getX(), this.owner.getY())\n      this.canvas.getCommandStack().execute(this.commandMove)\n      this.commandMove = null\n    }\n\n    if (this.commandResize !== null) {\n      this.commandResize.setDimension(this.owner.getWidth(), this.owner.getHeight())\n      this.canvas.getCommandStack().execute(this.commandResize)\n      this.commandResize = null\n    }\n  },\n\n  /**\n   * Set the position of the object.<br>\n   * The ResizeHandle overrides the Figure.setPosition method. The base\n   * class updates the resize handles during the update of the Dimension/Position. This\n   * is not neccessary for the ResizeHandles. Performance issue.\n   *\n   * @param {Number|draw2d.geo.Point} x The new x coordinate of the figure\n   * @param {Number} y The new y coordinate of the figure\n   **/\n  setPosition: function (x, y) {\n    // don't call base implementation. Base implementation will show\n    // ResizeHandles...but I'm the ResizeHandle\n    if (x instanceof draw2d.geo.Point) {\n      this.x = x.x\n      this.y = x.y\n    }\n    else {\n      this.x = x\n      this.y = y\n    }\n\n    if (this.repaintBlocked === true || this.shape === null) {\n      return this\n    }\n\n    // performance improvement by setting the coordinates direct.\n    this.shape.attr({x: this.x, y: this.y})\n\n    this.applyTransformation()\n  },\n\n  /**\n   *\n   * Set the new dimension of the the ResizeHandle. If you didn't pass any width/height the best default for the\n   * platform will be used.\n   *\n   * Additional the \"snapTo\" anchor is re-calculated in relation to the type of ResizeHandle\n   *\n   * @param {Number} [width] new width of the resize handle\n   * @param {Number} [height] new width of the resize handle\n   */\n  setDimension: function (width, height) {\n\n    if (typeof height !== \"undefined\") {\n      this._super(width, height)\n    }\n    else {\n      if (draw2d.isTouchDevice) {\n        this._super(15, 15)\n      }\n      else {\n        this._super(8, 8)\n      }\n    }\n\n\n    let offset = this.getWidth()\n    let offset2 = offset / 2\n\n    switch (this.type) {\n      case 1:\n        this.setSnapToGridAnchor(new draw2d.geo.Point(offset, offset))\n        break\n      case 2:\n        this.setSnapToGridAnchor(new draw2d.geo.Point(offset2, offset))\n        break\n      case 3:\n        this.setSnapToGridAnchor(new draw2d.geo.Point(0, offset))\n        break\n      case 4:\n        this.setSnapToGridAnchor(new draw2d.geo.Point(0, offset2))\n        break\n      case 5:\n        this.setSnapToGridAnchor(new draw2d.geo.Point(0, 0))\n        break\n      case 6:\n        this.setSnapToGridAnchor(new draw2d.geo.Point(offset2, 0))\n        break\n      case 7:\n        this.setSnapToGridAnchor(new draw2d.geo.Point(offset, 0))\n        break\n      case 8:\n        this.setSnapToGridAnchor(new draw2d.geo.Point(offset, offset2))\n        break\n      case 9:\n        this.setSnapToGridAnchor(new draw2d.geo.Point(offset2, offset2))\n        break\n    }\n\n    return this\n  },\n\n  /**\n   *\n   * Show the ResizeHandle and add it to the canvas.<br>\n   * Additional bring it in to the front of other figures if we didn't use\n   * an overlayCanvas.\n   *\n   * If the ResizeHandle is place inside an overlayCanvas it is automatically on top.\n   *\n   * @param {draw2d.Canvas} canvas the canvas to use\n   **/\n  show: function (canvas) {\n    // don't call the parent function. The parent functions delete this object\n    // and a resize handle can't be deleted.\n    this.setCanvas(canvas)\n\n    this.canvas.resizeHandles.add(this)\n    this.shape.insertAfter(this.owner.getShapeElement())\n\n    try{\n      this.blockEvent=true\n      this.zoomCallback()\n    }\n    finally{\n      this.blockEvent=false\n    }\n    this.repaint()\n\n    return this\n  },\n\n  /**\n   *\n   * Hide the resize handle and remove it from the canvas.\n   *\n   **/\n  hide: function () {\n    // don't call the parent function. The parent functions delete this object\n    // and a resize handle shouldn't be deleted.\n    if (this.shape === null) {\n      return\n    }\n\n    this.canvas.resizeHandles.remove(this)\n    this.setCanvas(null)\n\n    return this\n  },\n\n  setCanvas: function (canvas) {\n\n    if(this.canvas!==null){\n      this.canvas.off(this.zoomCallback);\n    }\n\n    this._super(canvas)\n\n    if(this.canvas!==null){\n      this.canvas.on(\"zoom\", this.zoomCallback);\n    }\n  },\n\n  /**\n   *\n   * Set the new background color of the figure. It is possible to hands over\n   * <code>null</code> to set the background transparent.\n   *\n   * @param {draw2d.util.Color} color The new background color of the figure\n   **/\n  setBackgroundColor: function (color) {\n    color = new draw2d.util.Color(color)\n\n    this.bgGradient = \"90-\" + color.darker(0.2).hash() + \"-\" + color.hash()\n    this._super(color)\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  repaint: function (attributes) {\n\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    attributes ??= {}\n\n    if (this.bgColor.hash() === \"none\") {\n      attributes.fill = \"none\"\n    }\n    else if (this.getAlpha() < 0.9 || this.useGradient === false) {\n      attributes.fill = this.bgColor.rgba()\n    }\n    else {\n      attributes.fill = this.bgGradient\n    }\n\n\n    this._super(attributes)\n  },\n\n  /**\n   *\n   * return true if the element can be used in combination with the\n   * SnapToHelper feature.\n   *\n   * @returns {Boolean}\n   **/\n  supportsSnapToHelper: function () {\n    return true\n  },\n\n  /**\n   *\n   * Override this method and redirect them to the cavas. A ResizeHandle didn't support\n   * Keyboard interaction at the moment.\n   *\n   * @param {Number} keyCode the id of the pressed key\n   * @param {Boolean} ctrl true if the user has pressed the CTRL/STRG key as well.\n   **/\n  onKeyDown: function (keyCode, ctrl) {\n    // don't call the parent function. The parent functions delete this object\n    // and a resize handle can't be deleted.\n    this.canvas.onKeyDown(keyCode, ctrl)\n  },\n\n  /**\n   * @inheritdoc\n   */\n  fireEvent: function (event, args) {\n    // A resizeHandle doesn't fire this event.\n    // Normally this set the document dirty. This is not necessary for a ResizeHandle.\n  }\n})\n\n","\nimport draw2d from 'packages'\n\n/**\n * @class\n * Abstract class which can handle plain SVG content.\n *\n * @author Andreas Herz\n * @extends draw2d.SetFigure\n */\ndraw2d.SVGFigure = draw2d.SetFigure.extend(\n    /** @lends draw2d.SVGFigure.prototype */\n    {\n    \n    NAME: \"draw2d.SVGFigure\",\n\n    /**\n     * Creates a new figure element which are not assigned to any canvas.\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function(attr, setter, getter)\n    {\n        this.svg = null\n        this._super(\n            attr,\n            {\n                svg : this.setSVG,\n                ...setter},\n            {\n                svg : this.getSVG,\n                ...getter}\n        )\n    },\n\n    /**\n     * @inheritdoc\n     */\n    createSet: function()\n    {\n        // legacy behaviour. Legacy code of Draw2D didn't have the \"svg\" attribute.\n        // in this case we must call the overridden method \"getSVG\" to retrieve the SVG from inherit\n        // the inherit class.\n        //\n        this.svg ??= this.getSVG()\n\t\treturn this.importSVG(this.canvas, this.svg)\n\t},\n\n    /**\n     * \n     * Returns the current used SVG as string\n     * @returns {String}\n     */\n    getSVG: function()\n    {\n        return this.svg\n    },\n\n    /**\n     * \n     * Set the SVG of this shape\n     *\n     * @param {String} svg The new SVG to render as String\n     * @param {Number} [duration] the optional duration for the change of the SVG of the figure\n     *\n     * @returns {draw2d.SVGFigure}\n     */\n    setSVG: function(svg, duration)\n    {\n        this.svg = svg\n\n        // SVG has changed. Update the rendering\n        //\n        if(this.canvas !==null && this.svgNodes !==null){\n            let newSVGNodes = this.createSet();\n            if(!isNaN(parseFloat(duration))) {\n                newSVGNodes.hide();\n                newSVGNodes.insertAfter(this.svgNodes);\n                let oldSVG = this.svgNodes;\n                this.svgNodes = newSVGNodes;\n                this.applyTransformation();\n                oldSVG.forEach(function ( shape) {\n                    $(shape.node).fadeOut(duration, function () {\n                        shape.remove();\n                    });\n                });\n                newSVGNodes.forEach(function (shape) {\n                    $(shape.node).fadeIn(duration);\n                });\n            }\n            else {\n                newSVGNodes.insertAfter(this.svgNodes);\n                this.svgNodes.remove();\n                this.svgNodes = newSVGNodes;\n                this.applyTransformation();\n            }\n        }\n\n        return this;\n    },\n\n\n    /**\n     * \n     * Helper method to transform the SVG string into a raphaelJS set.\n     *\n     * @private\n     */\n    importSVG : function (canvas, rawSVG)\n    {\n      let set = canvas.paper.set()\n\n      try {\n        if (typeof rawSVG === 'undefined'){\n          throw 'No data was provided.';\n        }\n\n        // Override the dimension from the JSON if the SVG contains any\n        //\n        let svgDOM= $(rawSVG)\n\n        // set the dimension of the element if the JSON import didn't provide\n        // a dimension already\n        //\n        if(typeof this._dimensionReadFromJSON ===\"undefined\"){\n            if(svgDOM.attr(\"width\") && svgDOM.attr(\"height\")){\n                this.setDimension(parseFloat(svgDOM.attr(\"width\")), parseFloat(svgDOM.attr(\"height\")));\n            }\n            delete this._dimensionReadFromJSON\n        }\n\n        let findStyle = new RegExp('([a-z0-9\\-]+) ?: ?([^ ;]+)[ ;]?','gi');\n\n        svgDOM.children().each(function(i,element){\n          //element = $(element);\n          let shape=null;\n          let style=null;\n          let attr = { };\n          let node = element.tagName;\n\n          // remove the namespace of the node if existing. This can happen in IE8\n          //\n          let index = node.indexOf(\":\");\n          if(index != -1)\n              node = node.substr(index+1);\n\n          // map some element to Raphael specifix attributes or ignore some unknown attributes\n          //\n          $(element.attributes).each(function() {\n            switch(this.nodeName) {\n              case 'stroke-dasharray':\n                attr[this.nodeName] = '- ';\n              break;\n              case 'style':\n                style = this.nodeValue;\n              break;\n              case 'id':\n              case 'xml:space':\n                  // just to ignore\n                  break;\n              default:\n                if(this.value){\n                    attr[this.nodeName] = this.value;\n                }\n                else{\n                    // @deprecated\n                    attr[this.nodeName] = this.nodeValue;\n                }\n              break;\n            }\n          });\n\n\n          if ( style !== null){\n            while(findStyle.exec(style)){\n              attr[RegExp.$1] = RegExp.$2;\n            }\n          }\n\n          // set some good defaults if the element didn't provide a stroke-width but has a \"stroke\" attribute\n          //\n          if (typeof attr['stroke-width'] === 'undefined'){\n              attr['stroke-width'] = (typeof attr.stroke === 'undefined' ? 0 : 1.2);\n          }\n\n          switch(node) {\n            case 'rect':\n              shape = canvas.paper.rect();\n\n              // transfer rx-SVG attribute to the \"r\" attribute of raphael\n              if(typeof attr[\"rx\"]!==\"undefined\") {\n                  attr.r = parseInt(attr.rx);\n                  delete attr.rx;\n              }\n              break;\n            case 'circle':\n              shape = canvas.paper.circle();\n              break;\n            case 'ellipse':\n              shape = canvas.paper.ellipse();\n              break;\n            case 'path':\n              attr.fill =\"none\";\n              shape = canvas.paper.path(attr.d);\n              break;\n            case 'line':\n              attr.d= \"M \"+attr.x1+\" \"+attr.y1+\"L\"+attr.x2+\" \"+attr.y2;\n              attr.fill =\"none\";\n              shape = canvas.paper.path(attr.d);\n             break;\n            case 'polyline':\n              let path = attr.points;\n              attr.d = \"M \"+path.replace(\" \",\" L\");\n              shape = canvas.paper.path(attr.d);\n              break;\n            case 'polygon':\n              shape = canvas.paper.polygon(attr.points);\n              break;\n            case 'image':\n              shape = canvas.paper.image();\n              break;\n            case 'tspan':\n            case 'text':\n                if(element.childNodes.length>0){\n                    let child = element.firstChild;\n                    do {\n                       switch(child.nodeType){\n                            case 2://ATTRIBUTE_NODE\n                            case 4://CDATA_SECTION_NODE\n                            case 5://ENTITY_REFERENCE_NODE\n                            case 6://ENTITY_NODE\n                            case 7://PROCESSING_INSTRUCTION_NODE\n                            case 8://COMMENT_NODE\n                            case 9://DOCUMENT_NODE\n                            case 10://DOCUMENT_TYPE_NODE\n                            case 11://DOCUMENT_FRAGMENT_NODE\n                            case 12://NOTATION_NODE\n                                return;\n                            case 3://TEXT_NODE\n                            \t // redirect to the parent node if we found a simple TEXT without any attributes\n                            \tchild = element;\n                            \tbreak;\n                            case 1://ELEMENT_NODE\n                        }\n                        let subShape = canvas.paper.text(0,0,$(child).text());\n                        let subAttr ={\"x\":parseFloat(child.attributes.x.value), \"y\":parseFloat(child.attributes.y.value)};\n                        subAttr[\"text-anchor\"] = \"start\";\n                        if(typeof child.attributes[\"text-anchor\"]!==\"undefined\"){\n                            subAttr[\"text-anchor\"] = child.attributes[\"text-anchor\"].value;\n                        }\n                        else if(typeof attr[\"text-anchor\"]!==\"undefined\"){\n                            subAttr[\"text-anchor\"] = attr[\"text-anchor\"];\n                        }\n\n                        if(typeof child.attributes[\"font-size\"]!==\"undefined\"){\n                            subAttr[\"font-size\"] = parseInt(child.attributes[\"font-size\"].value);\n                        }\n                        else if(typeof attr[\"font-size\"]!==\"undefined\"){\n                            // inherit the font size from the parent node\n                            subAttr[\"font-size\"] = parseInt(attr[\"font-size\"]);\n                        }\n\n                        if(typeof child.attributes[\"font-family\"]!==\"undefined\"){\n                            subAttr[\"font-family\"] = child.attributes[\"font-family\"].value;\n                        }\n                        else if(typeof attr[\"font-family\"]!==\"undefined\"){\n                            // inherit the font size from the parent node\n                            subAttr[\"font-family\"] = attr[\"font-family\"];\n                        }\n\n                        subAttr[\"fill\"] = \"#000000\";\n                        if(typeof child.attributes[\"fill\"]!==\"undefined\"){\n                            subAttr[\"fill\"] = child.attributes[\"fill\"].value;\n                        }\n                        else if(typeof attr[\"fill\"]!==\"undefined\"){\n                            // inherit the font size from the parent node\n                            subAttr[\"fill\"] = attr[\"fill\"];\n                        }\n\n                        subAttr.y= subAttr.y+subShape.getBBox().height/2;\n\n                        subShape.attr(subAttr);\n                        set.push(subShape);\n                        child = child.nextSibling;\n\n                    }while(child && child.nodeType === 3); // 3= TEXT_NODE\n                }\n                else{\n                  shape = canvas.paper.text(0,0,$(element).html());\n                  if(typeof attr[\"fill\"]===\"undefined\")\n                      attr[\"fill\"] = \"#000000\";\n                  if(typeof attr[\"text-anchor\"]===\"undefined\")\n                      attr[\"text-anchor\"] = \"start\";\n                  if(typeof attr[\"font-size\"]!==\"undefined\")\n                      attr[\"font-size\"] = parseInt(attr[\"font-size\"]);\n                  if(typeof attr[\"font-family\"]!==\"undefined\")\n                      attr[\"font-family\"] = parseInt(attr[\"font-family\"]);\n                  attr.y= parseFloat(attr.y)+shape.getBBox().height/2;\n                }\n              break;\n          }\n          if(shape!==null){\n              shape.attr(attr);\n              set.push(shape);\n          }\n        });\n      } catch (error) {\n        alert('The SVG data you entered was invalid! (' + error + ')');\n      }\n\n\n      return set;\n    },\n\n    /**\n     * \n     * Read all attributes from the serialized properties and transfer them into the shape.\n     *\n     * @param {Object} memento\n     */\n    setPersistentAttributes: function(memento)\n    {\n        this._super(memento);\n\n        // keep a temp flag to indicate the we have read the dimension of the\n        // element from the JSON struct. In this case we didn't care about the dimension\n        // from the SVG data\n        //\n        if(typeof memento.width !== \"undefined\"){\n            this._dimensionReadFromJSON=true;\n        }\n        else if(typeof memento.height !== \"undefined\"){\n            this._dimensionReadFromJSON=true;\n        }\n\n        return this;\n    }\n\n\n});\n","import draw2d from 'packages'\n\n\n/**\n * @class\n *\n * Represents the current selection in the canvas. The selection element is a pure passive element which\n * manage/store the selection.\n *\n *\n * @author Andreas Herz\n */\ndraw2d.Selection = Class.extend(\n  /** @lends draw2d.Selection.prototype */\n  {\n\n  NAME: \"draw2d.Selection\",\n\n  /**\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   */\n  init: function () {\n    this.primary = null;\n    this.all = new draw2d.util.ArrayList();\n  },\n\n  /**\n   * \n   * Reset the current selection\n   *\n   */\n  clear: function () {\n    this.primary = null;\n    this.all = new draw2d.util.ArrayList();\n\n    return this;\n  },\n\n  /**\n   * \n   * Return the primary selection. This can only one figure at once.\n   *\n   * @returns {draw2d.Figure} the primary selected figure\n   */\n  getPrimary: function () {\n    return this.primary;\n  },\n\n  /**\n   * \n   * Set the primary selection.\n   *\n   * @param {draw2d.Figure} figure The new primary selection\n   */\n  setPrimary: function (figure) {\n    this.primary = figure;\n    this.add(figure);\n\n    return this;\n  },\n\n  /**\n   * \n   * Remove the given figure from the selection (primary,all)\n   *\n   * @param {draw2d.Figure} figure\n   */\n  remove: function (figure) {\n    this.all.remove(figure);\n    if (this.primary === figure) {\n      this.primary = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * \n   * Add a figure to the selection. No events are fired or update the selection handle. This method just\n   * add the figure to the internal management data structure.\n   *\n   * @param figure\n   * @private\n   */\n  add: function (figure) {\n    if (figure !== null && !this.all.contains(figure)) {\n      this.all.add(figure);\n    }\n\n    return this;\n  },\n\n\n  /**\n   * \n   * return true if the given figure part of the selection.\n   *\n   * @param {draw2d.Figure} figure The figure to check\n   * @param {Boolean} [checkDescendant] Check if the figure provided by the argument is a descendant of the selection whether it is a direct child or nested more deeply.\n   *\n   * @since 2.2.0\n   * @returns {Boolean}\n   */\n  contains: function (figure, checkDescendant) {\n    if (checkDescendant) {\n      for (let i = 0; i < this.all.getSize(); i++) {\n        let figureToCheck = this.all.get(i);\n        if (figureToCheck === figure || figureToCheck.contains(figure)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return this.all.contains(figure);\n  },\n\n  /**\n   * \n   * Return the size of the selection\n   *\n   * @since 4.8.0\n   */\n  getSize: function () {\n    return this.all.getSize();\n  },\n\n  /**\n   * \n   * Return the complete selection - including the primary selection.\n   *\n   * @param {Boolean} [expand] expand all StrongComposite and WeakComposite to get all figures. Didn't expand any SetFigures or LayoutFigures\n   * @returns {draw2d.util.ArrayList}\n   *\n   */\n  getAll: function (expand) {\n    if (expand === true) {\n      let result = new draw2d.util.ArrayList();\n      let addRecursive = (figures) => {\n        result.addAll(figures, true);\n        figures.each((index, figure) => {\n          if (figure instanceof draw2d.shape.composite.StrongComposite) {\n            addRecursive(figure.getAssignedFigures());\n          }\n        });\n      };\n      addRecursive(this.all);\n\n      return result;\n    }\n\n    return this.all.clone();\n  },\n\n  /**\n   * \n   * Iterates over the current selection with <b>func</b> as callback handler.\n   *\n   * @param {Function} func the callback function to call for each element\n   * @param {Number} func.i index of the element in iteration\n   * @param {Object} func.value value of the element in iteration.\n   * @param {Boolean} [reverse] optional parameter. Iterate the collection reverse if it set to <b>true</b>\n   */\n  each: function (func, reverse) {\n    this.all.each(func, reverse);\n\n    return this;\n  }\n});\n","import draw2d from 'packages'\n\n/**\n * @class\n *\n * A SetFigure is a composition of different SVG elements.\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.Rectangle\n */\ndraw2d.SetFigure = draw2d.shape.basic.Rectangle.extend(\n  /** @lends draw2d.SetFigure.prototype */\n  {\n\n  NAME: \"draw2d.SetFigure\",\n\n  /**\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    // collection of SVG DOM nodes\n    this.svgNodes = null\n\n    this.originalWidth = null\n    this.originalHeight = null\n\n    this.scaleX = 1\n    this.scaleY = 1\n\n    this.strokeScale = true // scale the stroke width of the children nodes if the parent resize\n\n    this._super({stroke: 0, bgColor: null, ...attr}, setter, getter)\n  },\n\n  /**\n   * \n   * Set/Reset the canvas for the element.\n   *\n   * @param {draw2d.Canvas} canvas the canvas to use\n   */\n  setCanvas: function (canvas) {\n    // remove the shape if we reset the canvas and the element\n    // was already drawn\n    if (canvas === null && this.svgNodes !== null) {\n      this.svgNodes.remove()\n      this.svgNodes = null\n    }\n\n    this._super(canvas)\n  },\n\n\n  /**\n   * \n   * Set the css class if the node.\n   *\n   * @param {String} cssClass the new css class name of the node\n   * @since 2.9.0\n   */\n  setCssClass: function (cssClass) {\n    this._super(cssClass)\n\n    if (this.svgNodes === null) {\n      return this\n    }\n\n    if (this.cssClass === null) {\n      this.svgNodes.forEach( (e) => {\n        e.node.removeAttribute(\"class\")\n      })\n    }\n    else {\n      this.svgNodes.forEach( (e) => {\n        e.node.setAttribute(\"class\", cssClass)\n      })\n    }\n\n    return this\n  },\n\n\n  /**\n   * \n   * propagate all attributes like color, stroke,... to the shape element and\n   * repaint them.\n   *\n   * @protected\n   **/\n  repaint: function (attributes) {\n    // repaint can be blocked during deserialization and if the shape\n    // not part of any canvas.\n    //\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    if (this.originalWidth !== null) {\n      this.scaleX = this.width / this.originalWidth\n      this.scaleY = this.height / this.originalHeight\n    }\n\n    attributes ??= {}\n\n    this.applyAlpha()\n\n    this._super(attributes)\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setVisible: function (flag, duration) {\n    this._super(flag, duration)\n\n    if (this.svgNodes !== null) {\n      if (duration) {\n        if (this.visible === true) {\n          this.svgNodes.forEach( (shape) =>{\n            $(shape.node).fadeIn(duration, ()=>shape.show())\n          })\n        }\n        else {\n          this.svgNodes.forEach( (shape) =>{\n            $(shape.node).fadeOut(duration, () => shape.hide())\n          })\n        }\n      }\n      else {\n        if (this.visible === true) {\n          this.svgNodes.show()\n        }\n        else {\n          this.svgNodes.hide()\n        }\n      }\n    }\n  },\n\n  /**\n   * \n   * Apply the opacity to all child set elements. Override this if you want to avoid opacity changes.\n   * @private\n   *\n   */\n  applyAlpha: function () {\n    this.svgNodes.attr({opacity: this.alpha})\n  },\n\n  /**\n   * @private\n   */\n  applyTransformation: function () {\n    let s =\n      \"S\" + this.scaleX + \",\" + this.scaleY + \",0,0 \" +\n      \"R\" + this.rotationAngle + \",\" + ((this.getWidth() / 2) | 0) + \",\" + ((this.getHeight() / 2) | 0) +\n      \"T\" + this.getAbsoluteX() + \",\" + this.getAbsoluteY() +\n      \"\"\n    this.svgNodes.transform(s)\n    if (this.rotationAngle === 90 || this.rotationAngle === 270) {\n      let before = this.svgNodes.getBBox(true)\n      let ratio = before.height / before.width\n      let reverseRatio = before.width / before.height\n      let rs = \"...S\" + ratio + \",\" + reverseRatio + \",\" + (this.getAbsoluteX() + this.getWidth() / 2) + \",\" + (this.getAbsoluteY() + this.getHeight() / 2)\n      this.svgNodes.transform(rs)\n    }\n\n    return this\n  },\n\n  /**\n   * \n   * Moves the element so it is the closest to the viewer’s eyes, on top of other elements. Additional\n   * the internal model changed as well.\n   *\n   * Optional: Inserts current object in front of the given one.\n   *\n   * @param {draw2d.Figure} [figure] move current object in front of the given one.\n   * @since 3.0.0\n   */\n  toFront: function (figure) {\n    ////////////////////////////////////////////////////////////////////\n    // NOTE: the code has a complete different order of draw2d.Figure.\n    //       we must respect the svgNodes here\n    ////////////////////////////////////////////////////////////////////\n\n    // ensure that the z-oder is still correct if the figure is assigned\n    // to a StrongComposite\n    //\n    if (this.composite instanceof draw2d.shape.composite.StrongComposite && (typeof figure !== \"undefined\")) {\n      let indexFigure = figure.getZOrder()\n      let indexComposite = this.composite.getZOrder()\n      if (indexFigure < indexComposite) {\n        figure = this.composite\n      }\n    }\n\n    if (typeof figure === \"undefined\") {\n      // bring the outer frame in front...\n      this.getShapeElement().toFront()\n\n      // and all inner children\n      //\n      this.svgNodes?.toFront()\n\n      if (this.canvas !== null) {\n        let figures = this.canvas.getFigures()\n        let lines = this.canvas.getLines()\n        if (figures.remove(this) !== null) {\n          figures.add(this)\n        } else if (lines.remove(this) !== null) {\n          lines.add(this)\n        }\n      }\n    }\n    else {\n      // Bring the SVG shapes between the \"figure\" and the container of this shape\n      //\n      if (this.svgNodes !== null) {\n        this.svgNodes.insertAfter(figure.getTopLevelShapeElement())\n      }\n      this.getShapeElement().insertAfter(figure.getTopLevelShapeElement())\n\n      if (this.canvas !== null) {\n        let figures = this.canvas.getFigures()\n        let lines = this.canvas.getLines()\n        if (figures.remove(this) !== null) {\n          let index = figures.indexOf(figure)\n          figures.insertElementAt(this, index + 1)\n        } else if (lines.remove(this) !== null) {\n          lines.add(this)\n        }\n      }\n    }\n\n\n    // bring all children in front of the parent\n    //\n    this.children.each(function (i, child) {\n      child.figure.toFront(figure)\n    })\n\n    // the ports are always on top\n    //\n    let _this = this\n    this.getPorts().each(function (i, port) {\n      port.getConnections().each(function (i, connection) {\n        connection.toFront(figure)\n      })\n      // a port should always be in front of the shape doesn't matter what the\n      // \"figure\" parameter says.\n      //\n      port.toFront(_this)\n    })\n\n    // and last but not lease the ResizeHandles if any present\n    //\n    this.selectionHandles.each(function (i, handle) {\n      handle.toFront()\n    })\n\n    return this\n  },\n\n  /**\n   * \n   * Moves the element to the background. Additional\n   * the internal model changed as well.\n   *\n   * Optional: Inserts current object in front of the given one.\n   *\n   * @param {draw2d.Figure} [figure] move current object in front of the given one.\n   * @since 4.7.2\n   */\n  toBack: function (figure) {\n    // it is not allowed that a figure is behind the assigned composite\n    //\n    if (this.composite instanceof draw2d.shape.composite.StrongComposite) {\n      this.toFront(this.composite)\n      return\n    }\n\n    // sort the JSON Doc\n    //\n    if (this.canvas !== null) {\n      let figures = this.canvas.getFigures()\n      let lines = this.canvas.getLines()\n      if (figures.remove(this) !== null) {\n        figures.insertElementAt(this, 0)\n      }\n      else if (lines.remove(this) !== null) {\n        lines.insertElementAt(this, 0)\n      }\n    }\n\n    // bring all children figures in front of the parent\n    // run reverse to the collection to care about the z-order of the children)\n    this.children.each( (i, child) => {\n      child.figure.toBack(figure)\n    }, true)\n\n    if (this.svgNodes !== null) {\n      if (typeof figure !== \"undefined\") {\n        this.svgNodes.insertBefore(figure.getShapeElement())\n      }\n      else {\n        this.svgNodes.toBack()\n      }\n    }\n\n\n    if (this.canvas !== null) {\n      if (typeof figure !== \"undefined\") {\n        this.getShapeElement().insertBefore(figure.getShapeElement())\n      }\n      else {\n        this.getShapeElement().toBack()\n      }\n    }\n\n    // and last but not least - the ports are always on top\n    //\n    this.getPorts().each((i, port) => {\n      port.getConnections().each((i, connection) =>  {\n        connection.toFront(this)\n      })\n      // a port should always be in front of the shape doesn't matter what the\n      // \"figure\" parameter says.\n      //\n      port.toFront(this)\n    })\n\n    return this\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getTopLevelShapeElement: function () {\n    if (this.svgNodes.length === 0) {\n      return this.shape\n    }\n    return this.svgNodes\n  },\n\n  /**\n   * @private\n   */\n  createShapeElement: function () {\n    // NOTE: don't change the order of the two calls. This defines the z-oder in the canvas.\n    // The \"set\" must always be on top.\n    let shape = this.canvas.paper.rect(this.getX(), this.getY(), this.getWidth(), this.getHeight())\n    this.svgNodes = this.createSet()\n\n    // check if the element is a \"set\" or a simple raphael shape. otherwise we wrap them into a set\n    //\n    if (typeof this.svgNodes.forEach === \"undefined\") {\n      let set = this.canvas.paper.set()\n      set.push(this.svgNodes)\n      this.svgNodes = set\n    }\n\n    this.svgNodes.attr({\"stroke-scale\": this.strokeScale})\n\n    // update the visibility of the children\n    this.setVisible(this.visible)\n\n    // propagate the CSS style to all set elements\n    this.setCssClass(this.cssClass)\n\n    let bb = this.svgNodes.getBBox()\n    this.originalWidth = bb.width\n    this.originalHeight = bb.height\n\n    return shape\n  },\n\n  /**\n   * \n   * Override this method to add your own SVG elements. See {@link draw2d.shape.basic.Label} as example.\n   *\n   * @template\n   */\n  createSet: function () {\n    return this.canvas.paper.set() // return empty set as default;\n  }\n\n})\n","import draw2d from 'packages'\n\n/**\n * @class\n * The base class for all vector based figures like {@link draw2d.shape.basic.Rectangle}  or {@link draw2d.shape.basic.Oval}\n * inside a canvas.\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.node.Node\n */\ndraw2d.VectorFigure = draw2d.shape.node.Node.extend(\n    /** @lends draw2d.VectorFigure.prototype */\n    {\n    \n    NAME: \"draw2d.VectorFigure\",\n    \n    /**\n     * Creates a new figure element which are not assigned to any canvas.\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function( attr, setter, getter)\n    {\n        this.stroke = 1;\n        this.radius = 0;\n        this.bgColor= new draw2d.util.Color(\"#ffffff\");\n        this.color  = new draw2d.util.Color(\"#303030\");\n        this.dasharray = null;\n\n        // memento for the stroke if we reset the glow effect of this shape\n        //\n        this.strokeBeforeGlow = this.stroke;\n        this.glowIsActive = false;\n\n        this._super( attr,\n            {\n                // @attr {String} dasharray the line pattern see {@link draw2d.shape.basic.Line#setDashArray} for more information*/\n                dasharray : this.setDashArray,\n                // @attr {Number} radius the radius to render the line edges */\n                radius : this.setRadius,\n                // @attr {String|draw2d.util.Color} bgColor the background color of the shape */\n                bgColor: this.setBackgroundColor,\n                // @attr {String|draw2d.util.Color} color the main color of the shape */\n                color  : this.setColor,\n                // @attr {Number} stroke the stroke width */\n                stroke : this.setStroke,\n                ...setter},\n            {\n               dasharray: this.getDashArray,\n               radius :   this.getRadius,\n               bgColor:   this.getBackgroundColor,\n               color  :   this.getColor,\n               stroke :   this.getStroke,\n               ...getter}\n        )\n    },\n\n    /**\n     * \n     * Sets the corner radius or the edges.\n     *\n     * @param {Number} radius\n     * @since 4.2.1\n     */\n     setRadius: function(radius)\n     {\n        this.radius = radius;\n        this.repaint();\n        this.fireEvent(\"change:radius\",{value:this.radius});\n\n        return this;\n    },\n\n    /**\n     * \n     * Get the corner radius of the edges.\n     *\n     * @returns {Number}\n     * @since 4.2.1\n     */\n    getRadius: function()\n    {\n        return this.radius;\n    },\n\n\n\n    /**\n     * \n     * Set the line style for this object.\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n    *       dash: dashPattern\n    *     });\n     *\n     * @param {String} dash can be one of this [\"\", \"-\", \".\", \"-.\", \"-..\", \". \", \"- \", \"--\", \"- .\", \"--.\", \"--..\"]\n     */\n    setDashArray: function(dashPattern)\n    {\n        this.dasharray = dashPattern;\n        this.repaint();\n\n        this.fireEvent(\"change:dashArray\",{value:this.dasharray});\n\n        return this;\n    },\n\n    /**\n     * \n     * Get the line style for this object.\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr(\"dash\");\n     *\n     * @since 5.1.0\n     */\n    getDashArray: function()\n    {\n        return this.dasharray;\n    },\n\n    /**\n     * \n     * Highlight the element or remove the highlighting\n     *\n     * @param {Boolean} flag indicates glow/noGlow\n     */\n    setGlow: function(flag)\n    {\n\n        if(flag === this.glowIsActive) {\n            return this;\n        }\n\n        this.glowIsActive = flag;\n        if(flag===true){\n            this.strokeBeforeGlow = this.getStroke();\n            this.setStroke(this.strokeBeforeGlow*2.5);\n        }\n        else {\n            this.setStroke(this.strokeBeforeGlow);\n        }\n\n        return this;\n    },\n\n    /**\n     * @inheritdoc\n     */\n    repaint: function(attributes)\n    {\n        if (this.repaintBlocked===true || this.shape === null){\n            return;\n        }\n\n        attributes??={};\n\n        attributes.x = this.getAbsoluteX();\n        attributes.y = this.getAbsoluteY();\n\n        if(typeof attributes.stroke===\"undefined\"){\n            if(this.color === null || this.stroke ===0){\n                attributes.stroke = \"none\";\n            }\n            else {\n                attributes.stroke = this.color.rgba();\n            }\n        }\n\n        attributes[\"stroke-width\"] ??= this.stroke\n        attributes[\"fill\"] ??=this.bgColor.rgba()\n        attributes[\"dasharray\"] ??= this.dasharray\n        attributes[\"stroke-dasharray\"] ??= this.dasharray\n\n        this._super(attributes);\n\n        return this;\n    },\n\n\n   /**\n    * \n    * Set the new background color of the figure. It is possible to hands over\n    * <code>null</code> to set the background transparent.\n    *\n    *     // Alternatively you can use the attr method:\n    *     figure.attr({\n    *       \"bgColor\": \"#f0f0f0\"\n    *     });\n    *\n    * @param {String|draw2d.util.Color} color The new background color of the figure\n    **/\n    setBackgroundColor: function(color)\n    {\n        this.bgColor = new draw2d.util.Color(color);\n\n        this.repaint();\n        this.fireEvent(\"change:bgColor\",{value:this.bgColor});\n\n        return this;\n    },\n\n   /**\n    * \n    * The current used background color.\n    *\n    *     // Alternatively you can use the attr method:\n    *     var color =figure.attr(\"bgColor\");\n    *\n    * @returns {draw2d.util.Color}\n    */\n   getBackgroundColor: function()\n   {\n     return this.bgColor;\n   },\n\n   /**\n    * \n    * Set the stroke to use.\n    *\n    *     // Alternatively you can use the attr method:\n    *     figure.attr({\n    *       \"stroke\": 2\n    *     });\n    *\n    * @param {Number} w The new line width of the figure\n    **/\n   setStroke: function( w )\n   {\n     this.stroke=w;\n     this.repaint();\n     this.fireEvent(\"change:stroke\",{value:this.stroke});\n\n     return this;\n   },\n\n   /**\n    * \n    * The used line width.\n    *\n    * @returns {Number}\n    **/\n   getStroke: function( )\n   {\n     return this.stroke;\n   },\n\n   /**\n    * \n    * Set the foreground color of the figure.\n    * This method fires a <i>document dirty</i> event.\n    *\n    *     // Alternatively you can use the attr method:\n    *     figure.attr({\n    *       \"color\": \"#f3f3f3\"\n    *     });\n    *\n    * @param {String|draw2d.util.Color} color The new color of the line.\n    **/\n   setColor: function( color)\n   {\n     this.color = new draw2d.util.Color(color);\n     this.repaint();\n     this.fireEvent(\"change:color\",{value:this.color});\n\n     return this;\n   },\n\n   /**\n    * \n    * Get the current used foreground color\n    *\n    *\n    * @returns {draw2d.util.Color}\n    */\n   getColor: function()\n   {\n     return this.color;\n   },\n\n\n   /**\n    * @inheritdoc\n    */\n   getPersistentAttributes: function()\n   {\n       return  {...this._super(), \n           bgColor : this.bgColor.rgba(),\n           color   : this.color.rgba(),\n           stroke  : this.stroke,\n           radius  : this.radius,\n           dasharray : this.dasharray\n       }\n   },\n\n   /**\n    * @inheritdoc\n    */\n   setPersistentAttributes: function(memento)\n   {\n       this._super(memento);\n\n       if(typeof memento.radius !==\"undefined\"){\n           this.setRadius(memento.radius);\n        }\n\n       if(typeof memento.bgColor !== \"undefined\"){\n           this.setBackgroundColor(memento.bgColor);\n       }\n\n       if(typeof memento.color !== \"undefined\"){\n           this.setColor(memento.color);\n       }\n\n       if(typeof memento.stroke !== \"undefined\" ){\n           this.setStroke(memento.stroke===null?0:parseFloat(memento.stroke));\n       }\n\n       if(typeof memento.dasharray ===\"string\"){\n           this.dasharray = memento.dasharray;\n       }\n\n\n       return this;\n   }\n\n\n});\n\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Commands are passed around throughout editing. They are used to encapsulate and combine\n * changes to the application's model. An application has a single command stack. Commands must\n * be executed using the command stack rather than directly calling execute.\n * <br>\n * This is required for a generic support for the undo/redo concept within draw2d.<br>\n *\n * @inheritable\n * @author Andreas Herz\n */\ndraw2d.command.Command = Class.extend(\n  /** @lends draw2d.command.Command.prototype */\n  {\n  \n  NAME: \"draw2d.command.Command\",\n\n  /**\n   * Create a new Command objects which can be execute via the CommandStack.\n   *\n   * @param {String} label\n   */\n  init: function (label) {\n    this.label = label\n  },\n\n\n  /**\n   * \n   * Returns a label of the Command. e.g. `move figure`.\n   *\n   * @returns {String} the label for this command\n   **/\n  getLabel: function () {\n    return this.label\n  },\n\n\n  /**\n   * \n   * Returns [true] if the command can be execute and the execution of the\n   * command modifies the model. e.g.: a CommandMove with [startX,startX] == [endX,endY] should\n   * return false. The execution of this Command doesn't modify the model.\n   *\n   * @returns {Boolean} return try if the command modify the model or make any relevant changes\n   **/\n  canExecute: function () {\n    return true\n  },\n\n  /**\n   * \n   * Execute the command the first time.\n   * Sup-classes must implement this method.\n   *\n   * @template\n   **/\n  execute: function () {\n  },\n\n  /**\n   * \n   * Will be called if the user cancel the operation.\n   *\n   * @template\n   **/\n  cancel: function () {\n  },\n\n  /**\n   * \n   * Undo the command.\n   * Sup-classes must implement this method.\n   *\n   * @template\n   **/\n  undo: function () {\n  },\n\n  /**\n   * \n   * Redo the command after the user has undo this command.\n   * Sup-classes must implement this method.\n   *\n   * @template\n   **/\n  redo: function () {\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Command to add a figure with CommandStack support.\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandAdd = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandAdd.prototype */\n  {\n  \n  NAME: \"draw2d.command.CommandAdd\",\n\n  /**\n   * Create a add command for the given figure.\n   *\n   * @param {draw2d.Canvas} canvas the canvas to use\n   * @param {draw2d.Figure} figure the figure to add\n   * @param {Number|draw2d.geo.Point} x the x-coordinate or a complete point where to place the figure\n   * @param {Number} [y] the y-coordinate if x is a number and not a complete point\n   */\n  init: function (canvas, figure, x, y) {\n    this._super(draw2d.Configuration.i18n.command.addShape)\n    this.figure = figure\n    this.canvas = canvas\n    this.pos = new draw2d.geo.Point(x, y)\n  },\n\n\n  /**\n   * \n   * Returns [true] if the command can be execute and the execution of the\n   * command modifies the model. e.g.: a CommandMove with [startX,startX] == [endX,endY] should\n   * return false. The execution of this Command doesn't modify the model.\n   *\n   * @returns {Boolean} return try if the command modify the model or make any relevant changes\n   **/\n  canExecute: function () {\n    // we can only add the figure once to the canvas\n    return this.figure.getCanvas() === null\n  },\n\n  /**\n   * \n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.canvas.add(this.figure, this.pos.x, this.pos.y)\n  },\n\n  /**\n   * \n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.execute()\n  },\n\n  /**\n   * \n   * Undo the command\n   *\n   **/\n  undo: function () {\n    this.canvas.remove(this.figure)\n  }\n\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Add a vertex to a polyline or polygon\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandAddVertex = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandAddVertex.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandAddVertex\",\n\n  /**\n   * Create a new Command objects which add a vertex to a PolyLine / Polygon.\n   *\n   * @param {draw2d.shape.basic.PolyLine} line the related line\n   * @param {Number} index the index where to add\n   * @param {Number} x the x coordinate for the new vertex\n   * @param {Number} y the y coordinate for the new vertex\n   */\n  init: function (line, index, x, y) {\n    this._super(draw2d.Configuration.i18n.command.addVertex)\n\n    this.line = line\n    this.index = index\n    this.newPoint = new draw2d.geo.Point(x, y)\n  },\n\n\n  /**\n   *\n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return true\n  },\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   *\n   *\n   * Undo the move command\n   *\n   **/\n  undo: function () {\n    this.line.removeVertexAt(this.index)\n  },\n\n  /**\n   *\n   *\n   * Redo the move command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.line.insertVertexAt(this.index, this.newPoint.x, this.newPoint.y)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Assign a figure to a compiste\n *\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n * @since 4.9.0\n */\ndraw2d.command.CommandAssignFigure = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandAssignFigure.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandAssignFigure\",\n\n  /**\n   * Create a new Command objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.Figure} figure the figure to assign\n   * @param {draw2d.Figure} composite the composite where the figure should assign\n   */\n  init: function (figure, composite) {\n    this._super(draw2d.Configuration.i18n.command.assignShape)\n\n    this.figure = figure\n    this.composite = composite\n    this.assignedConnections = new draw2d.util.ArrayList()\n    this.isNode = this.figure instanceof draw2d.shape.node.Node\n    this.oldBoundingBox = composite.getBoundingBox()\n  },\n\n\n  /**\n   *\n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return true\n  },\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.composite.assignFigure(this.figure)\n\n    // get all connections of the shape and check if source/target node\n    // part of the composite. In this case the connection will be part of\n    // the composite as well\n    if (this.isNode === true) {\n      let connections = this.figure.getConnections()\n      let _this = this\n      connections.each(function (i, connection) {\n        if (connection.getSource().getParent().getComposite() === _this.composite && connection.getTarget().getParent().getComposite() === _this.composite) {\n          if (connection.getComposite() !== _this.composite) {\n            _this.assignedConnections.add({oldComposite: connection.getComposite(), connection: connection})\n            _this.composite.assignFigure(connection)\n          }\n        }\n      })\n    }\n  },\n\n  /**\n   *\n   *\n   * Undo the move command\n   *\n   **/\n  undo: function () {\n    this.composite.unassignFigure(this.figure)\n    this.assignedConnections.each( (i, entry) =>{\n      if (entry.oldComposite !== null) {\n        entry.oldComposite.assignFigure(entry.connection)\n      }\n      else {\n        entry.connection.getComposite().unassignFigure(entry.connection)\n      }\n    })\n    this.composite.stickFigures = true\n    this.composite.setBoundingBox(this.oldBoundingBox)\n    this.composite.stickFigures = false\n  },\n\n  /**\n   *\n   *\n   * Redo the move command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.composite.setBoundingBox(this.oldBoundingBox)\n    this.composite.assignFigure(this.figure)\n    this.assignedConnections.each( (i, entry) => this.composite.assignFigure(entry.connection))\n  }\n})\n\n\n\n\n\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n *Command to change attributes of a shape with undo/redo support\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandAttr = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandAttr.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandAttr\",\n\n  /**\n   * Create a new Command objects which provides undo/redo for attributes.\n   *\n   * @param {draw2d.Figure} figure the figure to handle\n   * @param {Object} attributes new attributes to set\n   */\n  init: function (figure, newAttributes) {\n    this._super(draw2d.Configuration.i18n.command.changeAttributes)\n\n    this.figure = figure\n    this.newAttributes = newAttributes\n    this.oldAttributes = {}\n    // Get the current attributes from the shape before we modify them.\n    // Required for undo/redo\n    Object.keys(newAttributes).forEach( (key) => {\n      this.oldAttributes[key] = figure.attr(key)\n    })\n  },\n\n\n  /**\n   * \n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return true\n  },\n\n  /**\n   * \n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   * \n   *\n   * Undo the move command\n   *\n   **/\n  undo: function () {\n    this.figure.attr(this.oldAttributes)\n  },\n\n  /**\n   * \n   *\n   * Redo the move command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.figure.attr(this.newAttributes)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n * Set the bounding box of a figure with undo/redo support\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandBoundingBox = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandResize.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandResize\",\n\n  /**\n   * Create a new resize Command objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.Figure} figure the figure to resize\n   * @param {draw2d.geo.Rectangle} boundingBox the new bounding box of the figure\n   */\n  init: function (figure, boundingBox) {\n    this._super(draw2d.Configuration.i18n.command.resizeShape)\n    this.figure = figure\n    this.oldBoundingBox = this.figure.getBoundingBox()\n    this.newBoundingBox = boundingBox\n  },\n\n\n  /**\n   *\n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return !this.oldBoundingBox.equals(this.newBoundingBox)\n  },\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   *\n   * Undo the command\n   *\n   **/\n  undo: function () {\n    this.figure.setBoundingBox(this.oldBoundingBox)\n  },\n\n  /**\n   *\n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.figure.setBoundingBox(this.newBoundingBox)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * A CommandCollection works as a single command. You can add more than one\n * Command to this CommandCollection and execute/undo them onto the CommandStack as a\n * single Command.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandCollection = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandCollection.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandCollection\",\n\n  /**\n   * Create a new CommandConnect objects which can be execute via the CommandStack.\n   *\n   * @param {String} [commandLabel] the label to show on the command stack for the undo/redo operation\n   */\n  init: function (commandLabel) {\n    this._super((typeof commandLabel === 'undefined') ? draw2d.Configuration.i18n.command.collection : commandLabel)\n\n    this.commands = new draw2d.util.ArrayList()\n  },\n\n  /**\n   *\n   * Returns a label of the Command. e.g. \"move figure\".\n   *\n   * @returns {String} the label for this command\n   **/\n  getLabel: function () {\n    //return the label of the one and only command\n    //\n    if (this.commands.getSize() === 1) {\n      return this.commands.first().getLabel()\n    }\n\n    // return a common label if all commands have the same label.\n    //\n    if (this.commands.getSize() > 1) {\n      let labels = this.commands.clone().map(function (e) {\n        return e.getLabel()\n      })\n      labels.unique()\n      if (labels.getSize() === 1) {\n        return labels.first()\n      }\n    }\n\n    // return the all purpose label.\n    return this._super()\n  },\n\n\n  /**\n   *\n   * Add a command to the collection.\n   *\n   * @param {draw2d.command.Command} command\n   */\n  add: function (command) {\n    this.commands.add(command)\n  },\n\n  /**\n   *\n   * Returns [true] if the command can be execute and the execution of the\n   * command modifies the model. e.g.: a CommandMove with [startX,startX] == [endX,endY] should\n   * return false. The execution of this Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // We ask all cmd's if they make any changes.\n    // Keep in mind: the command will be execute if at least ONE command return [true]!!!!\n    // doesn't matter if the other commands return [false].\n    // The method should be renamed into: modifiesTheModel()....design flaw.\n    let canExec = false\n    this.commands.each(function (i, cmd) {\n      canExec = canExec || cmd.canExecute()\n    })\n    return canExec\n  },\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.commands.each(function (i, cmd) {\n      cmd.execute()\n    })\n  },\n\n  /**\n   *\n   * Redo the command after the user has undo this command.\n   *\n   **/\n  redo: function () {\n    this.commands.each(function (i, cmd) {\n      cmd.redo()\n    })\n  },\n\n  /**\n   *\n   * Undo the command.\n   *\n   **/\n  undo: function () {\n    // execute the undo operation in reverse direction.\n\n    this.commands.reverse()\n    this.commands.each(function (i, cmd) {\n      cmd.undo()\n    })\n    this.commands.reverse()\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Connects two ports with a connection.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandConnect = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandConnect.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandConnect\",\n\n  /**\n   * Create a new CommandConnect objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.Port} source the source port for the connection to create\n   * @param {draw2d.Port} target the target port for the connection to create\n   * @param {draw2d.Port} [dropTarget] the port who has initiate the connection creation. mainly the drop target\n   */\n  init: function (source, target, dropTarget) {\n    this._super(draw2d.Configuration.i18n.command.connectPorts)\n    this.canvas = target.getCanvas()\n    this.source = source\n    this.target = target\n    this.connection = null\n    this.dropTarget = dropTarget // optional\n  },\n\n  /**\n   *\n   * set the connection to use. called by the ConnectionCreatePolicy\n   */\n  setConnection: function (connection) {\n    this.connection = connection\n  },\n\n\n  /**\n   *\n   * Returns the fresh created connection if available. Used in the\n   * ClickConnectionCreatePolicy to customize the router and vertices.\n   *\n   * @returns {null|draw2d.Connection}\n   * @since 6.1.0\n   */\n  getConnection: function () {\n    return this.connection\n  },\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    let optionalCallback = conn => {\n      this.connection = conn\n      this.connection.setSource(this.source)\n      this.connection.setTarget(this.target)\n      this.canvas.add(this.connection)\n    }\n\n    // the createConnection must return either a connection or \"undefined\". If the method return \"undefined\"\n    // the asynch callback must be called. Usefull if the createConnection shows a selection dialog\n    //\n    if (this.connection === null) {\n      // deprecated call!!!!\n      //\n      let result = draw2d.Configuration.factory.createConnection(this.source, this.target, optionalCallback, this.dropTarget)\n      debugger\n      // will be handled by the optional callback\n      if (typeof result === \"undefined\") {\n        return\n      }\n\n      this.connection = result\n    }\n\n    optionalCallback(this.connection)\n  },\n\n  /**\n   *\n   * Redo the command after the user has undo this command.\n   *\n   **/\n  redo: function () {\n    this.canvas.add(this.connection)\n    this.connection.reconnect()\n  },\n\n  /**\n   *\n   * Undo the command.\n   *\n   **/\n  undo: function () {\n    this.canvas.remove(this.connection)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n * Command to remove a figure with CommandStack support.\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandDelete = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandDelete.prototype */\n  {\n  NAME: \"draw2d.command.CommandDelete\",\n\n  /**\n   * Create a delete command for the given figure.\n   *\n   * @param {draw2d.Figure} figure\n   */\n  init: function (figure) {\n    this._super(draw2d.Configuration.i18n.command.deleteShape)\n\n    this.parent = figure.getParent()\n    this.figure = figure\n    this.canvas = figure.getCanvas()\n    this.connections = null\n    this.removedParentEntry = null // can be null if the figure didn't have any parent shape assigned\n    this.indexOfChild = -1\n  },\n\n\n  /**\n   * \n   * Returns [true] if the command can be execute and the execution of the\n   * command modifies the model. e.g.: a CommandMove with [startX,startX] == [endX,endY] should\n   * return false. The execution of this Command doesn't modify the model.\n   *\n   * @returns {Boolean} return try if the command modify the model or make any relevant changes\n   **/\n  canExecute: function () {\n    // we can only delete the figure if its part of the canvas.\n    return this.figure.getCanvas() !== null\n  },\n\n  /**\n   * \n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   * \n   * Undo the command\n   *\n   **/\n  undo: function () {\n    if (this.parent !== null) {\n      this.parent.add(this.removedParentEntry.figure, this.removedParentEntry.locator, this.indexOfChild)\n      this.canvas.setCurrentSelection(this.parent)\n    }\n    else {\n      this.canvas.add(this.figure)\n      this.canvas.setCurrentSelection(this.figure)\n    }\n\n    if (this.figure instanceof draw2d.Connection) {\n      this.figure.reconnect()\n    }\n\n\n    for (let i = 0; i < this.connections.getSize(); ++i) {\n      this.canvas.add(this.connections.get(i))\n      this.connections.get(i).reconnect()\n    }\n  },\n\n  /**\n   * \n   *\n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.canvas.setCurrentSelection(null)\n\n    // Collect all connections that are bounded to the figure to delete. This connections\n    // must be deleted too.\n    //\n    if (this.connections === null) {\n      if (this.figure instanceof draw2d.shape.node.Node) {\n        this.connections = this.figure.getConnections()\n      }\n      else {\n        this.connections = new draw2d.util.ArrayList()\n      }\n    }\n\n    // already done in the canvas.remove(..) method\n    //    if(this.figure instanceof draw2d.Connection){\n    //        this.figure.disconnect();\n    //    }\n\n\n    // remove all connections\n    //\n    for (let i = 0; i < this.connections.getSize(); ++i) {\n      this.canvas.remove(this.connections.get(i))\n    }\n\n    // remove this figure from the parent\n    //\n    if (this.parent !== null) {\n      // determine the index of the child before remove\n      this.indexOfChild = this.parent.getChildren().indexOf(this.figure)\n      this.removedParentEntry = this.parent.remove(this.figure)\n    }\n    // or from the canvas\n    else {\n      this.canvas.remove(this.figure)\n    }\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Command to remove a group with all related children.\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandDeleteGroup = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandDeleteGroup.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandDeleteGroup\",\n\n  /**\n   * Create a delete command for the given figure.\n   *\n   * @param {draw2d.shape.composite.Group} group\n   */\n  init: function (group) {\n    this._super(draw2d.Configuration.i18n.command.deleteShape)\n\n    this.parent = group.getParent()\n    this.group = group\n    this.canvas = group.getCanvas()\n    this.batchDelete = null\n  },\n\n\n  /**\n   * \n   * Returns [true] if the command can be execute and the execution of the\n   * command modifies the model. e.g.: a CommandMove with [startX,startX] == [endX,endY] should\n   * return false. The execution of this Command doesn't modify the model.\n   *\n   * @returns {Boolean} return try if the command modify the model or make any relevant changes\n   **/\n  canExecute: function () {\n    // we can only delete the shape if a children can be deleted\n    //\n    let children = this.group.getAssignedFigures()\n    for (let i = 0; i < children.getSize(); i++) {\n      if (children.get(i).isDeleteable() === false) {\n        return false\n      }\n    }\n\n    // we can only delete the figure if its part of the canvas.\n    return this.group.getCanvas() !== null\n  },\n\n  /**\n   * \n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   * \n   * Undo the command\n   *\n   **/\n  undo: function () {\n    this.batchDelete.undo()\n    this.canvas.setCurrentSelection(this.group)\n  },\n\n  /**\n   * \n   *\n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    if (this.batchDelete === null) {\n      this.batchDelete = new draw2d.command.CommandCollection()\n\n      // remove the assignment of the children to the group before we delete the group\n      //\n      this.batchDelete.add(new draw2d.command.CommandUngroup(this.canvas, this.group))\n\n      // add the delete command of the children to the batch\n      //\n      let children = this.group.getAssignedFigures()\n      for (let i = 0; i < children.getSize(); i++) {\n        let child = children.get(i)\n        // request a delete Command from the child instead of create one by my own. May the child\n        // provides its own implementation\n        let cmd = child.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.DELETE))\n        this.batchDelete.add(cmd)\n      }\n\n    }\n\n\n    this.batchDelete.execute()\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n * Command to group a given set of figures\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandGroup = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandGroup.prototype */\n  {\n  \n  NAME: \"draw2d.command.CommandGroup\",\n\n  /**\n   * Create a group command for the given figure.\n   *\n   * @param {draw2d.util.ArrayList} figures the figures to group\n   */\n  init: function (canvas, figures) {\n    this._super(draw2d.Configuration.i18n.command.groupShapes)\n    if (figures instanceof draw2d.Selection) {\n      this.figures = figures.getAll()\n    }\n    else {\n      this.figures = figures\n    }\n\n    // figures which already part of an non \"Group\" composite will be removed from the set.\n    // It is not possible to assign a figure to two different composites.\n    //\n    this.figures.grep(function (figure) {\n      return figure.getComposite() === null\n    })\n\n    this.canvas = canvas\n    this.group = new draw2d.shape.composite.Group()\n  },\n\n\n  /**\n   * \n   * Returns [true] if the command can be execute and the execution of the\n   * command modifies the model. e.g.: a CommandMove with [startX,startX] == [endX,endY] should\n   * return false. The execution of this Command doesn't modify the model.\n   *\n   * @returns {Boolean} return try if the command modify the model or make any relevant changes\n   **/\n  canExecute: function () {\n    return !this.figures.isEmpty()\n  },\n\n\n  /**\n   * \n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   * \n   * Undo the command\n   *\n   **/\n  undo: function () {\n    let _this = this\n    this.figures.each(function (i, figure) {\n      _this.group.unassignFigure(figure)\n    })\n\n    this.canvas.remove(this.group)\n    this.canvas.setCurrentSelection(this.figures)\n  },\n\n  /**\n   * \n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    let _this = this\n    this.figures.each(function (i, figure) {\n      _this.group.assignFigure(figure)\n    })\n\n    this.canvas.add(this.group)\n    this.canvas.setCurrentSelection(this.group)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Command for the movement of figures.\n *\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandMove = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandMove.prototype */\n  {\n  NAME: \"draw2d.command.CommandMove\",\n\n  /**\n   * Create a new Command objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.Figure} figure the figure to move\n   * @param {Number} [x] the current x position\n   * @param {Number} [y] the current y position\n   */\n  init: function (figure, x, y) {\n    this._super(draw2d.Configuration.i18n.command.moveShape)\n    this.figure = figure\n    if (typeof x === \"undefined\") {\n      this.oldX = figure.getX()\n      this.oldY = figure.getY()\n    }\n    else {\n      this.oldX = x\n      this.oldY = y\n    }\n  },\n\n\n  /**\n   * \n   * Set the initial position of the element\n   *\n   * @param {Number} x the new initial x position\n   * @param {Number} y the new initial y position\n   **/\n  setStartPosition: function (x, y) {\n    this.oldX = x\n    this.oldY = y\n  },\n\n  /**\n   * \n   * Set the target/final position of the figure move command.\n   *\n   * @param {Number} x the new x position\n   * @param {Number} y the new y position\n   **/\n  setPosition: function (x, y) {\n    this.newX = x\n    this.newY = y\n  },\n\n  /**\n   * \n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return this.newX !== this.oldX || this.newY !== this.oldY\n  },\n\n  /**\n   * \n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   * \n   *\n   * Undo the move command\n   *\n   **/\n  undo: function () {\n    this.figure.setPosition(this.oldX, this.oldY)\n  },\n\n  /**\n   * \n   *\n   * Redo the move command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.figure.setPosition(this.newX, this.newY)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Command for the movement of figures.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandMoveConnection = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandMoveConnection.prototype */\n  {\n  \n  NAME: \"draw2d.command.CommandMoveConnection\",\n\n  /**\n   * Create a new Command objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.Connection} figure the connection to move\n   */\n  init: function (figure) {\n    this._super(draw2d.Configuration.i18n.command.moveLine)\n    this.line = figure\n    this.dx = 0\n    this.dy = 0\n  },\n\n  /**\n   * \n   * set the offset of the line translation\n   *\n   * @param {Number} dx\n   * @param {Number} dy\n   */\n  setTranslation: function (dx, dy) {\n    this.dx = dx\n    this.dy = dy\n  },\n\n  /**\n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return this.dx !== 0 && this.dy !== 0\n  },\n\n  /**\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   * Undo the command\n   *\n   **/\n  undo: function () {\n    let _this = this\n    this.line.getVertices().each(function (i, e) {\n      e.translate(-_this.dx, -_this.dy)\n    })\n    this.line.svgPathString = null\n    // required to update resize handles and the painting of the line\n    this.line.setPosition(this.line.getStartPosition())\n  },\n\n  /**\n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    let _this = this\n    this.line.getVertices().each(function (i, e) {\n      e.translate(_this.dx, _this.dy)\n    })\n    this.line.svgPathString = null\n\n    // required to update resize handles and the painting of the line\n    this.line.setPosition(this.line.getStartPosition())\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Command for the movement of figures.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandMoveLine = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandMoveLine.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandMoveLine\",\n\n  /**\n   * Create a new Command objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.shape.basic.Line} figure the line to move\n   */\n  init: function (figure) {\n    this._super(draw2d.Configuration.i18n.command.moveLine)\n    this.line = figure\n    this.dx = 0\n    this.dy = 0\n  },\n\n  /**\n   *\n   * set the offset of the line translation\n   *\n   * @param {Number} dx\n   * @param {Number} dy\n   */\n  setTranslation: function (dx, dy) {\n    this.dx = dx\n    this.dy = dy\n  },\n\n  /**\n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return this.dx !== 0 && this.dy !== 0\n  },\n\n  /**\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   * Undo the command\n   *\n   **/\n  undo: function () {\n    let _this = this\n    this.line.getVertices().each(function (i, e) {\n      e.translate(-_this.dx, -_this.dy)\n    })\n    this.line.svgPathString = null\n    // required to update resize handles and the painting of the line\n    this.line.setPosition(this.line.getStartPosition())\n  },\n\n  /**\n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    let _this = this\n    this.line.getVertices().each(function (i, e) {\n      e.translate(_this.dx, _this.dy)\n    })\n    this.line.svgPathString = null\n\n    // required to update resize handles and the painting of the line\n    this.line.setPosition(this.line.getStartPosition())\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Command for the vertex movement of a polyline/polygon.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandMoveVertex = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandMoveVertex.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandMoveVertex\",\n\n  /**\n   * Create a new Command objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.shape.basic.PolyLine} line the related line\n   */\n  init: function (line) {\n    this._super(draw2d.Configuration.i18n.command.moveVertex)\n\n    this.line = line\n    this.index = -1\n    this.newPoint = null\n  },\n\n\n  /**\n   * \n   * Set the index of the vertex of the polyline/polygon to modify.\n   *\n   * @param {Number} index the related index of the vertex\n   **/\n  setIndex: function (index) {\n    this.index = index\n    this.origPoint = this.line.getVertices().get(this.index).clone()\n  },\n\n  updatePosition: function (x, y) {\n    this.newPoint = new draw2d.geo.Point(x, y)\n  },\n\n  /**\n   * \n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return this.index !== -1 && this.newPoint !== null\n  },\n\n  /**\n   * \n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   * \n   *\n   * Undo the move command\n   *\n   **/\n  undo: function () {\n    this.line.setVertex(this.index, this.origPoint.x, this.origPoint.y)\n  },\n\n  /**\n   * \n   *\n   * Redo the move command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.line.setVertex(this.index, this.newPoint.x, this.newPoint.y)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Command for the vertices movement of a polyline/polygon.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandMoveVertices = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandMoveVertices.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandMoveVertices\",\n\n  /**\n   * Create a new Command objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.shape.basic.PolyLine} line the related line\n   */\n  init: function (line) {\n    this._super(draw2d.Configuration.i18n.command.moveVertices)\n\n    this.line = line\n    this.oldVertices = line.getVertices().clone(true)\n    this.newVertices = null\n  },\n\n\n  updateVertices: function (newVertices) {\n    this.newVertices = newVertices\n  },\n\n  /**\n   *\n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return this.newVertices !== null\n  },\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   *\n   *\n   * Undo the move command\n   *\n   **/\n  undo: function () {\n    this.line.setVertices(this.oldVertices)\n  },\n\n  /**\n   *\n   *\n   * Redo the move command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.line.setVertices(this.newVertices)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Reconnects two ports. This command is used during the DragDrop operation of a draw2d.Connection.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandReconnect = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandReconnect.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandReconnect\",\n\n\n  /**\n   * Create a new Command objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.Connection} conn the related Connection which is currently in the drag&drop operation\n   */\n  init: function (conn) {\n    this._super(draw2d.Configuration.i18n.command.connectPorts)\n    this.con = conn\n    this.oldSourcePort = conn.getSource()\n    this.oldTargetPort = conn.getTarget()\n  },\n\n  /**\n   *\n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return true\n  },\n\n  /**\n   *\n   * The new ports to use during the execute of this command.\n   *\n   * @param {draw2d.Port} source\n   * @param {draw2d.Port} target\n   */\n  setNewPorts: function (source, target) {\n    this.newSourcePort = source\n    this.newTargetPort = target\n  },\n\n\n  setIndex: function (index) {\n    // do nothing....but method is required for LineResizeHandle\n    // With this common interface the ResizeHandle can handle Lines and Connections\n    // with the same code\n  },\n\n  /**\n   * compatibily method to the CommandMoveVertex to handle Line and Connections\n   * transparent in the ResizeHandles\n   *\n   * @param x\n   * @param y\n   */\n  updatePosition: function (x, y) {\n    // do nothing....but method is required for LineResizeHandle\n    // With this common interface the ResizeHandle can handle Lines and Connections\n    // with the same code\n  },\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  cancel: function () {\n    this.con.setSource(this.oldSourcePort)\n    this.con.setTarget(this.oldTargetPort)\n\n    // force a routing of the connection and DON'T set the old reouter again because this reset all manual added\n    // vertices\n    this.con.routingRequired = true\n    this.con.repaint()\n  },\n\n  /**\n   *\n   * Undo the command\n   *\n   **/\n  undo: function () {\n    this.con.setSource(this.oldSourcePort)\n    this.con.setTarget(this.oldTargetPort)\n    // force a routing of the connection and DON'T set the old reouter again because this reset all manual added\n    // vertices\n    this.con.routingRequired = true\n    this.con.repaint()\n  },\n\n  /**\n   *\n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.con.setSource(this.newSourcePort)\n    this.con.setTarget(this.newTargetPort)\n    // force a routing of the connection and DON'T set the old reouter again because this reset all manual added\n    // vertices\n    this.con.routingRequired = true\n    this.con.repaint()\n  }\n\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Remove a vertex from a polyline or polygon\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandRemoveVertex = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandRemoveVertex.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandRemoveVertex\",\n\n  /**\n   * Create a new Command objects which add a vertex to a PloyLine.\n   *\n   * @param {draw2d.shape.basic.PolyLine} line the related line\n   * @param {Number} index the index where to add\n   */\n  init: function (line, index) {\n    this._super(draw2d.Configuration.i18n.command.deleteVertex)\n\n    this.line = line\n    this.index = index\n    this.oldPoint = line.getVertices().get(index).clone()\n  },\n\n\n  /**\n   *\n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return true\n  },\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   *\n   *\n   * Undo the move command\n   *\n   **/\n  undo: function () {\n    this.line.insertVertexAt(this.index, this.oldPoint.x, this.oldPoint.y)\n  },\n\n  /**\n   *\n   *\n   * Redo the move command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.line.removeVertexAt(this.index)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Replace the vertices of a polyline.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandReplaceVertices = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandReplaceVertices.prototype */\n  {\n  \n  NAME: \"draw2d.command.CommandReplaceVertices\",\n\n  /**\n   * Create a new Command objects which add a segment to a PolyLine / Polygon.\n   *\n   * @param {draw2d.shape.basic.PolyLine} line the related line\n   * @param {draw2d.util.ArrayList} originalVertices the original vertices of the polyline\n   * @param {draw2d.util.ArrayList} newVertices the new vertices of the polyline\n   */\n  init: function (line, originalVertices, newVertices) {\n    this._super(draw2d.Configuration.i18n.command.addSegment)\n\n    this.line = line\n    this.originalVertices = originalVertices\n    this.newVertices = newVertices\n  },\n\n\n  /**\n   * \n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return true\n  },\n\n  /**\n   * \n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   * \n   *\n   * Undo the move command\n   *\n   **/\n  undo: function () {\n    this.line.setVertices(this.originalVertices)\n  },\n\n  /**\n   * \n   *\n   * Redo the move command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.line.setVertices(this.newVertices)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n * Resize command for figures. Can be execute/undo/redo via a CommandStack.\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandResize = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandResize.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandResize\",\n\n  /**\n   * Create a new resize Command objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.Figure} figure the figure to resize\n   * @param {Number} [width] the current width\n   * @param {Number} [height] the current height\n   */\n  init: function (figure, width, height) {\n    this._super(draw2d.Configuration.i18n.command.resizeShape)\n    this.figure = figure\n\n    if (typeof width === \"undefined\") {\n      this.oldWidth = figure.getWidth()\n      this.oldHeight = figure.getHeight()\n    }\n    else {\n      this.oldWidth = width\n      this.oldHeight = height\n    }\n  },\n\n  /**\n   * \n   * Set the new dimension of the element.\n   *\n   * @param {Number} width the new width.\n   * @param {Number} height the new height of the element.\n   **/\n  setDimension: function (width, height) {\n    this.newWidth = width | 0\n    this.newHeight = height | 0\n  },\n\n  /**\n   * \n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return this.newWidth !== this.oldWidth || this.newHeight !== this.oldHeight\n  },\n\n  /**\n   * \n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   * \n   * Undo the command\n   *\n   **/\n  undo: function () {\n    this.figure.setDimension(this.oldWidth, this.oldHeight)\n  },\n\n  /**\n   * \n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.figure.setDimension(this.newWidth, this.newHeight)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Set the rotation angle of the given figure\n *\n * @since 4.4.1\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.command.Command\n */\ndraw2d.command.CommandRotate = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandRotate.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandRotate\",\n\n  /**\n   * Create a new resize Command objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.Figure} figure the figure to resize\n   * @param {Number} angle the angle to rotate\n   */\n  init: function (figure, angle) {\n    this._super(draw2d.Configuration.i18n.command.rotateShape)\n    this.figure = figure\n\n    this.oldAngle = figure.getRotationAngle()\n    this.newAngle = angle\n  },\n\n\n  /**\n   *\n   * Returns [true] if the command can be execute and the execution of the\n   * command modify the model. A CommandMove with [startX,startX] == [endX,endY] should\n   * return false. <br>\n   * the execution of the Command doesn't modify the model.\n   *\n   * @returns {Boolean}\n   **/\n  canExecute: function () {\n    // return false if we doesn't modify the model => NOP Command\n    return this.oldAngle !== this.newAngle\n  },\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   *\n   * Undo the command\n   *\n   **/\n  undo: function () {\n    this.rotate(this.oldAngle)\n  },\n\n  /**\n   *\n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    this.rotate(this.newAngle)\n  },\n\n  rotate: function (angle) {\n    let w = this.figure.getWidth()\n    let h = this.figure.getHeight()\n\n    this.figure.setRotationAngle(angle)\n\n    this.figure.setDimension(h, w)\n\n    this.figure.portRelayoutRequired = true\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * An implementation of a command stack. A stack manages the executing, undoing, and redoing of Commands. Executed\n * commands are pushed onto a a stack for undoing later. Commands which are undone are pushed onto a redo stack.\n * Whenever a new command is executed, the redo stack is flushed.\n *\n * You can retrieve the current used CommandStack just by calling <code>canvas.getCommandStack()</code>\n *\n */\ndraw2d.command.CommandStack = Class.extend(\n  /** @lends draw2d.command.CommandStack.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandStack\",\n\n\n  /**\n   * Create a new CommandStack objects which can be execute via the CommandStack.\n   *\n   */\n  init: function () {\n    this.undostack = []\n    this.redostack = []\n    this.maxundo = 50\n    this.transactionCommand = null\n    this.eventListeners = new draw2d.util.ArrayList()\n  },\n\n\n  /**\n   *\n   * Set the maximal undo stack size. Entries will be remove if the max. stack\n   * size has been reached.\n   *\n   * @param {Number} count The maximal undo stack size.\n   * @returns {this}\n   **/\n  setUndoLimit: function (count) {\n    this.maxundo = count\n\n    return this\n  },\n\n  /**\n   *\n   * Remove the undo / redo history. This is useful if the user has been save the\n   * document.\n   *\n   * @returns {this}\n   **/\n  markSaveLocation: function () {\n    this.undostack = []\n    this.redostack = []\n\n    // fire an empty command to inform all listener that the stack has been changed\n    this.notifyListeners(new draw2d.command.Command(), draw2d.command.CommandStack.POST_EXECUTE)\n\n    return this\n  },\n\n  /**\n   *\n   *\n   * Executes the specified Command if possible. Prior to executing the command, a\n   * draw2d.command.CommandStackEvent for {@link #PRE_EXECUTE} will be fired to event listeners.\n   * Similarly, after attempting to execute the command, an event for {@link #POST_EXECUTE}\n   * will be fired.\n   *\n   * @param {draw2d.command.Command} command The command to execute.\n   * @returns {this}\n   **/\n  execute: function (command) {\n    if (typeof command === \"undefined\")\n      throw \"Missing parameter [command] for method call CommandStack.execute\"\n\n    // nothing to do\n    if (command === null)\n      return this//silently\n\n    // return if the command can't execute or it doesn't change the model\n    // => Empty command\n    if (command.canExecute() === false)\n      return this\n\n    // A command stack transaction is open.\n    // The execution will be postpone until the transaction will commit\n    //\n    if (this.transactionCommand !== null) {\n      this.transactionCommand.add(command)\n      return this\n    }\n\n    this.notifyListeners(command, draw2d.command.CommandStack.PRE_EXECUTE, \"PRE_EXECUTE\")\n\n    this.undostack.push(command)\n    command.execute()\n\n    // cleanup the redo stack if the user execute a new command.\n    // I think this will create a \"clean\" behaviour of the unde/redo mechanism.\n    //\n    this.redostack = []\n\n    // monitor only the max. undo stack size\n    //\n    if (this.undostack.length > this.maxundo) {\n      this.undostack = this.undostack.slice(this.undostack.length - this.maxundo)\n    }\n    this.notifyListeners(command, draw2d.command.CommandStack.POST_EXECUTE, \"POST_EXECUTE\")\n\n    return this\n  },\n\n  /**\n   *\n   * Opens a transaction for further multiple commands. If you execute a command all\n   * {@ #execute} calls will be ignored until you commit the current transaction.\n   *\n   * @param {String} [commandLabel] the label to show for the undo/redo operation\n   * @returns {this}\n   * @since 4.0.0\n   */\n  startTransaction: function (commandLabel) {\n    if (this.transactionCommand !== null) {\n      debugger\n      throw \"CommandStack is already within transactional mode. Don't call 'startTransaction\"\n    }\n\n    this.transactionCommand = new draw2d.command.CommandCollection(commandLabel)\n\n    return this\n  },\n\n  /**\n   *\n   * Returns true if the Command Stack has an open transaction.\n   * You can start or stop a transaction with `startTransaction`and `commitTransaction`.\n   *\n   * A transaction is one undo/redo operation.\n   *\n   * @returns {Boolean}\n   */\n  isInTransaction: function () {\n    return this.transactionCommand !== null\n  },\n\n  /**\n   *\n   * Commit the running transaction. All commands between the start/end of a transaction\n   * can be undo/redo in a single step.\n   *\n   * @since 4.0.0\n   * @returns {this}\n   */\n  commitTransaction: function () {\n    if (this.transactionCommand === null) {\n      return this//silently\n    }\n\n    let cmd = this.transactionCommand\n    this.transactionCommand = null\n    // we can drop the CommandCollection if the collection contains only one command.\n    if (cmd.commands.getSize() === 1) {\n      this.execute(cmd.commands.first())\n    }\n    else {\n      this.execute(cmd)\n    }\n\n    return this\n  },\n\n  /**\n   *\n   * Undo on command from the stack and store them on the redo command stack.\n   * @returns {this}\n   **/\n  undo: function () {\n    let command = this.undostack.pop()\n    if (command) {\n      this.notifyListeners(command, draw2d.command.CommandStack.PRE_UNDO)\n      this.redostack.push(command)\n      command.undo()\n      this.notifyListeners(command, draw2d.command.CommandStack.POST_UNDO)\n    }\n\n    return this\n  },\n\n  /**\n   *\n   * Redo a command after the user has undo a command\n   *\n   * @returns {this}\n   **/\n  redo: function () {\n    let command = this.redostack.pop()\n\n    if (command) {\n      this.notifyListeners(command, draw2d.command.CommandStack.PRE_REDO)\n      this.undostack.push(command)\n      command.redo()\n      this.notifyListeners(command, draw2d.command.CommandStack.POST_REDO)\n    }\n\n    return this\n  },\n\n  /**\n   *\n   * Return the label of the next REDO command.\n   *\n   * @returns {String}\n   **/\n  getRedoLabel: function () {\n    if (this.redostack.length === 0)\n      return \"\"\n\n    let command = this.redostack[this.redostack.length - 1]\n\n    if (command) {\n      return command.getLabel()\n    }\n    return \"\"\n  },\n\n\n  /**\n   *\n   * Return the label of the next UNDO command.\n   *\n   * @returns {String}\n   **/\n  getUndoLabel: function () {\n    if (this.undostack.length === 0)\n      return \"\"\n\n    let command = this.undostack[this.undostack.length - 1]\n\n    if (command) {\n      return command.getLabel()\n    }\n    return \"\"\n  },\n\n\n  /**\n   *\n   * Indicates whenever a REDO is possible.\n   *\n   * @returns {Boolean} <code>true</code> if it is appropriate to call {@link #redo()}.\n   */\n  canRedo: function () {\n    return this.redostack.length > 0\n  },\n\n  /**\n   *\n   * indicator whenever a undo is possible.\n   *\n   * @returns {Boolean} <code>true</code> if {@link #undo()} can be called\n   **/\n  canUndo: function () {\n    return this.undostack.length > 0\n  },\n\n  /**\n   *\n   * Adds a listener to the command stack, which will be notified whenever a command has been processed on the stack.\n   * @deprecated use on/off to register events\n   * @param {draw2d.command.CommandStackEventListener|Function} listener the listener to add.\n   * @returns {this}\n   */\n  addEventListener: function (listener) {\n    return this.on(\"change\", listener)\n  },\n  /**\n   * Adds a listener to the command stack, which will be notified whenever a command has been processed on the stack.\n   *\n   * @param event\n   * @param func\n   * @returns {this}\n   */\n  on: function (event, listener) {\n    if (event !== \"change\")\n      throw \"only event of kind 'change' is supported\"\n\n    if (listener instanceof draw2d.command.CommandStackEventListener) {\n      this.eventListeners.add(listener)\n    }\n    else if (typeof listener.stackChanged === \"function\") {\n      this.eventListeners.add(listener)\n    }\n    else if (typeof listener === \"function\") {\n      this.eventListeners.add({stackChanged: listener})\n    }\n    else {\n      throw \"Object doesn't implement required callback interface [draw2d.command.CommandStackListener]\"\n    }\n\n    return this\n  },\n\n  /**\n   *\n   * Removes a listener from the command stack.\n   *\n   * @deprecated use on/off to register events\n   * @param {draw2d.command.CommandStackEventListener} listener the listener to remove.\n   * @returns {this}\n   */\n  removeEventListener: function (listener) {\n    this.off(listener)\n\n    return this\n  },\n\n    /**\n     *\n      * @param listener\n     * @returns {this}\n     */\n  off: function (listener) {\n    this.eventListeners.grep(entry => (entry === listener || entry.stackChanged === listener))\n    /*\n    let size = this.eventListeners.getSize()\n    for (let i = 0; i < size; i++) {\n      let entry = this.eventListeners.get(i)\n      if (entry === listener || entry.stackChanged === listener) {\n        this.eventListeners.remove(entry)\n        return\n      }\n    }\n    */\n    return this\n  },\n\n  /**\n   *\n   * Notifies command stack event listeners that the command stack has changed to the\n   * specified state.\n   *\n   * @param {draw2d.command.Command} command the command\n   * @param {Number} state the current stack state\n   * @private\n   **/\n  notifyListeners: function (command, state, action) {\n    let event = new draw2d.command.CommandStackEvent(this, command, state, action)\n    let size = this.eventListeners.getSize()\n\n    for (let i = 0; i < size; i++) {\n      this.eventListeners.get(i).stackChanged(event)\n    }\n  }\n})\n\n\n//  Constant indicating notification prior to executing a command (value is 1).\ndraw2d.command.CommandStack.PRE_EXECUTE = 1\n//  Constant indicating notification prior to redoing a command (value is 2).\ndraw2d.command.CommandStack.PRE_REDO = 2\n//  Constant indicating notification prior to undoing a command (value is 4).\ndraw2d.command.CommandStack.PRE_UNDO = 4\n//   Constant indicating notification after a command has been executed (value is 8).\ndraw2d.command.CommandStack.POST_EXECUTE = 8\n//  Constant indicating notification after a command has been redone (value is 16).\ndraw2d.command.CommandStack.POST_REDO = 16\n//  Constant indicating notification after a command has been undone (value is 32).\ndraw2d.command.CommandStack.POST_UNDO = 32\n//  Constant indicating notification after the stack has been (re)init (value is 64).\ndraw2d.command.CommandStack.POST_INIT = 64\n\ndraw2d.command.CommandStack.POST_MASK = draw2d.command.CommandStack.POST_EXECUTE | draw2d.command.CommandStack.POST_UNDO | draw2d.command.CommandStack.POST_REDO\ndraw2d.command.CommandStack.PRE_MASK = draw2d.command.CommandStack.PRE_EXECUTE | draw2d.command.CommandStack.PRE_UNDO | draw2d.command.CommandStack.PRE_REDO\n\n\n","import draw2d from '../packages'\n\n\n/**\n * @class\n * Event class which will be fired for every CommandStack operation. Required for CommandStackListener.\n */\ndraw2d.command.CommandStackEvent = Class.extend(\n  /** @lends draw2d.command.CommandStackEvent.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandStackEvent\",\n\n  /**\n   * Create a new CommandStack objects which can be execute via the CommandStack.\n   *\n   * @param {draw2d.command.Command} command the related command\n   * @param {Number} details the current state of the command execution\n   *\n   */\n  init: function (stack, command, details, action) {\n    this.stack = stack\n    this.command = command\n    this.details = details // deprecated\n    this.action = action\n  },\n\n\n  /**\n   *\n   * Return the corresponding stack of the event.\n   *\n   * @returns {draw2d.command.CommandStack}\n   **/\n  getStack: function () {\n    return this.stack\n  },\n\n\n  /**\n   *\n   * Returns null or a Command if a command is relevant to the current event.\n   *\n   * @returns {draw2d.command.Command}\n   **/\n  getCommand: function () {\n    return this.command\n  },\n\n  /**\n   *\n   * Returns an integer identifying the type of event which has occurred.\n   * Defined by {@link draw2d.command.CommandStack}.\n   *\n   * @returns {Number}\n   **/\n  getDetails: function () {\n    return this.details\n  },\n\n\n  /**\n   *\n   * Returns true if this event is fired after the stack having changed.\n   *\n   * @returns {Boolean} true if post-change event\n   **/\n  isPostChangeEvent: function () {\n    return 0 !== (this.getDetails() & draw2d.command.CommandStack.POST_MASK)\n  },\n\n  /**\n   *\n   * Returns true if this event is fired prior to the stack changing.\n   *\n   * @returns {Boolean} true if pre-change event\n   **/\n  isPreChangeEvent: function () {\n    return 0 !== (this.getDetails() & draw2d.command.CommandStack.PRE_MASK)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Event class which will be fired for every CommandStack operation. Required for CommandStackListener.\n * @author Andreas Herz\n */\n\ndraw2d.command.CommandStackEventListener = Class.extend(\n  /** @lends draw2d.command.CommandStackEventListener.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandStackEventListener\",\n\n  /**\n   * Creates a new Listener Object\n   *\n   */\n  init: function () {\n  },\n\n  /**\n   *\n   * Sent when an event occurs on the command stack. draw2d.command.CommandStackEvent.getDetail()\n   * can be used to identify the type of event which has occurred.\n   *\n   * @template\n   *\n   * @param {draw2d.command.CommandStackEvent} event\n   **/\n  stackChanged: function (event) {\n  }\n\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * EditPolicies should determine an Figures editing capabilities.\n * It is possible to implement an Figure such that it handles all editing\n * responsibility.<br>\n * However, it is much more flexible and object-oriented to use\n * EditPolicies. Using policies, you can pick and choose the editing behavior for\n * an Figure without being bound to its class hierarchy. Code reuse is increased,\n * and code management is easier.\n *\n * @author Andreas Herz\n */\n\ndraw2d.command.CommandType = Class.extend(\n  /** @lends draw2d.command.CommandType.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandType\",\n\n  /**\n   * Create a new edit policy object\n   *\n   * @param {String} policy\n   */\n  init: function (policy) {\n    this.policy = policy\n  },\n\n  /**\n   * \n   * Return the String representation of the policy\n   *\n   * @returns {String}\n   **/\n  getPolicy: function () {\n    return this.policy\n  }\n})\n\ndraw2d.command.CommandType.DELETE = \"DELETE\"\ndraw2d.command.CommandType.MOVE = \"MOVE\"\ndraw2d.command.CommandType.CONNECT = \"CONNECT\"\ndraw2d.command.CommandType.MOVE_BASEPOINT = \"MOVE_BASEPOINT\"\ndraw2d.command.CommandType.MOVE_VERTEX = \"MOVE_VERTEX\"\ndraw2d.command.CommandType.MOVE_VERTICES = \"MOVE_VERTICES\"\ndraw2d.command.CommandType.MOVE_GHOST_VERTEX = \"MOVE_GHOST_VERTEX\"\ndraw2d.command.CommandType.RESIZE = \"RESIZE\"\ndraw2d.command.CommandType.RESET = \"RESET\"\ndraw2d.command.CommandType.ROTATE = \"ROTATE\"\n\n\n","import draw2d from '../packages'\n\n\n/**\n * @class\n * Command to ungroup a given group figures\n *\n * @extends draw2d.command.Command\n */\n\ndraw2d.command.CommandUngroup = draw2d.command.Command.extend(\n  /** @lends draw2d.command.CommandUngroup.prototype */\n  {\n\n  NAME: \"draw2d.command.CommandUngroup\",\n\n  /**\n   * Create a group command for the given figure.\n   *\n   * @param {draw2d.Canvas} canvas the responsible canvas\n   * @param {draw2d.util.ArrayList|draw2d.Selection} group the figures to group\n   */\n  init: function (canvas, group) {\n    this._super(draw2d.Configuration.i18n.command.ungroupShapes)\n    if (group instanceof draw2d.Selection) {\n      this.group = group.getAll().first()\n    }\n    else {\n      this.group = group\n    }\n\n    this.canvas = canvas\n    this.figures = this.group.getAssignedFigures().clone()\n  },\n\n\n  /**\n   *\n   * Returns [true] if the command can be execute and the execution of the\n   * command modifies the model. e.g.: a CommandMove with [startX,startX] == [endX,endY] should\n   * return false. The execution of this Command doesn't modify the model.\n   *\n   * @returns {Boolean} return try if the command modify the model or make any relevant changes\n   **/\n  canExecute: function () {\n    return !this.figures.isEmpty()\n  },\n\n\n  /**\n   *\n   * Execute the command the first time\n   *\n   **/\n  execute: function () {\n    this.redo()\n  },\n\n  /**\n   *\n   * Undo the command\n   *\n   **/\n  undo: function () {\n    let _this = this\n    this.figures.each(function (i, figure) {\n      _this.group.assignFigure(figure)\n    })\n    this.canvas.add(this.group)\n    this.canvas.setCurrentSelection(this.group)\n  },\n\n  /**\n   *\n   * Redo the command after the user has undo this command\n   *\n   **/\n  redo: function () {\n    let _this = this\n    this.figures.each(function (i, figure) {\n      _this.group.unassignFigure(figure)\n    })\n\n    this.canvas.setCurrentSelection(this.figures)\n    this.canvas.remove(this.group)\n  }\n})\n","import draw2d from '../../packages'\n\n/**\n * @class\n *\n *\n * @example\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    var start = new draw2d.shape.node.Start();\n *    var end   = new draw2d.shape.node.End();\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,80);\n *\n *    // Create a Connection and connect the Start and End node\n *    //\n *    var c = new draw2d.Connection();\n *\n *    // toggle from ManhattenRouter to DirectRouter to show the rotation of decorations\n *    c.setRouter(new draw2d.layout.connection.DirectRouter());\n *\n *    // Set the endpoint decorations for the connection\n *    //\n *    c.setSourceDecorator(new draw2d.decoration.connection.ArrowDecorator());\n *    c.setTargetDecorator(new draw2d.decoration.connection.ArrowDecorator());\n *\n *    // Connect the endpoints with the start and end port\n *    //\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *\n *    // and finally add the connection to the canvas\n *    canvas.add(c);\n *\n *\n * @author Andreas Herz\n * @param {Number} [width] the width of the arrow\n * @param {Number} [height] the height of the arrow\n * @extend draw2d.decoration.connection.Decorator\n */\ndraw2d.decoration.connection.ArrowDecorator = draw2d.decoration.connection.Decorator.extend(\n  /** @lends draw2d.decoration.connection.ArrowDecorator */\n  {\n    NAME: \"draw2d.decoration.connection.ArrowDecorator\",\n\n    init: function (width, height) {\n      this._super(width, height)\n    },\n\n    /**\n     * Draws a filled arrow decoration.\n     *\n     *\n     * ```\n     *                       ---+ [length , width/2]\n     *                -------   |\n     * [0,0]  --------          |\n     *    +---                  |==========================\n     *        --------          |\n     *                -------   |\n     *                       ---+ [length ,-width/2]\n     *\n     * ```\n     *\n     * @param {RaphaelPaper} paper the raphael paper object for the paint operation\n     * @returns {RaphaelPath}\n     * @private\n     **/\n    paint: function (paper) {\n      let st = paper.set()\n\n      st.push(paper.path([\"M0 0\",\n        \"L\", this.width, \" \", -this.height / 2,\n        \"L\", this.width, \" \", this.height / 2,\n        \"L0 0\"].join(\"\")))\n\n      st.attr({fill: this.backgroundColor.rgba()})\n\n      return st\n    }\n  })\n\n","import draw2d from '../../packages'\n\n/**\n * @class\n *\n *\n * @example\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    var start = new draw2d.shape.node.Start();\n *    var end   = new draw2d.shape.node.End();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,80);\n *\n *    // Create a Connection and connect the Start and End node\n *    //\n *    var c = new draw2d.Connection();\n *\n *    // toggle from ManhattenRouter to DirectRouter to show the rotation of decorations\n *    c.setRouter(new draw2d.layout.connection.DirectRouter());\n *\n *    // Set the endpoint decorations for the connection\n *    //\n *    c.setSourceDecorator(new draw2d.decoration.connection.BarDecorator());\n *    c.setTargetDecorator(new draw2d.decoration.connection.BarDecorator());\n *    // Connect the endpoints with the start and end port\n *    //\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *\n *    // and finally add the connection to the canvas\n *    canvas.add(c);\n *\n * @author Andreas Herz\n * @param {Number} [width] the width of the bar\n * @param {Number} [height] the height of the bar\n * @extend draw2d.decoration.connection.Decorator\n */\ndraw2d.decoration.connection.BarDecorator = draw2d.decoration.connection.Decorator.extend(\n  /** @lends draw2d.decoration.connection.BarDecorator */\n  {\n\n    NAME: \"draw2d.decoration.connection.BarDecorator\",\n\n    init: function (width, height) {\n      this._super(width, height)\n    },\n\n    /**\n     * Draw a bar decoration.\n     *\n     * ```\n     *\n     *               | [length , width/2]\n     *               |\n     * [0,0]         |                          (Connection)\n     *    +==========|==========================\n     *               |\n     *               |\n     *               | [length ,-width/2]\n     *\n     * ```\n     *\n     * @param {RaphaelPaper} paper the raphael paper object for the paint operation\n     * @returns {RaphaelPath}\n     * @private\n     **/\n    paint: function (paper) {\n      let st = paper.set();\n      let path = [\"M\", this.width / 2, \" \", -this.height / 2]  // Go to the top center..\n      path.push(\"L\", this.width / 2, \" \", this.height / 2)   // ...bottom center...\n\n      st.push(paper.path(path.join(\"\")))\n      st.attr({fill: this.backgroundColor.rgba()})\n      return st\n    }\n  })\n\n","import draw2d from '../../packages'\n\n/**\n * @class\n *\n *\n * @example\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    var start = new draw2d.shape.node.Start();\n *    var end   = new draw2d.shape.node.End();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,80);\n *\n *    // Create a Connection and connect the Start and End node\n *    //\n *    var c = new draw2d.Connection();\n *\n *    // toggle from ManhattenRouter to DirectRouter to show the rotation of decorations\n *    c.setRouter(new draw2d.layout.connection.DirectRouter());\n *\n *    // Set the endpoint decorations for the connection\n *    //\n *    c.setSourceDecorator(new draw2d.decoration.connection.CircleDecorator());\n *    c.setTargetDecorator(new draw2d.decoration.connection.CircleDecorator());\n *    // Connect the endpoints with the start and end port\n *    //\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *\n *    // and finally add the connection to the canvas\n *    canvas.add(c);\n *\n * @author Andreas Herz\n * @param {Number} [width] the width of the arrow\n * @param {Number} [height] the height of the arrow\n * @extend draw2d.decoration.connection.Decorator\n */\ndraw2d.decoration.connection.CircleDecorator = draw2d.decoration.connection.Decorator.extend(\n  /** @lends draw2d.decoration.connection.CircleDecorator */\n  {\n\n    NAME: \"draw2d.decoration.connection.CircleDecorator\",\n\n    init: function (width, height) {\n      this._super(width, height)\n    },\n\n    /**\n     * Draw a filled circle decoration.\n     *\n     * @param {RaphaelPaper} paper the raphael paper object for the paint operation\n     * @returns {RaphaelPath}\n     * @private\n     **/\n    paint: function (paper) {\n      let st = paper.set()\n\n      st.push(paper.circle(0, 0, this.width / 2))\n      st.attr({fill: this.backgroundColor.rgba()})\n\n      return st\n    }\n  })\n\n\n\n\n\n\n","import draw2d from '../../packages'\nimport Color from '../../util/Color'\n\n/**\n * @class\n * Base class for any kind of Connection end/start decorations like arrows, bullets, circles, bars,...\n *\n * @author Andreas Herz\n */\ndraw2d.decoration.connection.Decorator = Class.extend(\n  /** @lends draw2d.decoration.connection.Decorator */\n  {\n\n    NAME: \"draw2d.decoration.connection.Decorator\",\n\n    init: function (width, height) {\n\n      if (typeof width === \"undefined\" || width < 1) {\n        this.width = 20\n      } else {\n        this.width = width\n      }\n\n      if (typeof height === \"undefined\" || height < 1) {\n        this.height = 15\n      } else {\n        this.height = height\n      }\n      this.parent = null\n      this.color = null // null => use the color of the connection\n      this.backgroundColor = new Color(250, 250, 250)\n    },\n\n    /**\n     *\n     * Paint the decoration for a connector. The Connector starts always in\n     * [0,0] and ends in [x,0].\n     * It is not necessary to consider any rotation of the connection. This will be done by the\n     * framework.\n     *\n     * <pre>\n     *               | -Y\n     *               |\n     *               |\n     *  --------------+-----------------------------&gt; +X\n     *               |\n     *               |\n     *               |\n     *               V +Y\n     *\n     *\n     * </pre>\n     *\n     * See in ArrowConnectionDecorator for example implementation.\n     * @param {RaphaelPaper} paper\n     * @private\n     */\n    paint: function (paper) {\n      // do nothing per default\n    },\n\n    /**\n     *\n     * @param {draw2d.Connection} parent\n     * @private\n     */\n    setParent: function(parent){\n      this.parent = parent\n    },\n\n    /**\n     *\n     * Set the stroke color for the decoration\n     *\n     * @param {draw2d.util.Color|String} c\n     * @returns {this}\n     */\n    setColor: function (c) {\n      this.color = new Color(c);\n\n      this.parent?.repaint()\n      return this\n    },\n\n    /**\n     * Get the line color of the decoration\n     *\n     * @returns {drawd.util.Color} the current line color of null if the Decoration should use the color of the host connection\n     */\n    getColor: function(){\n      return this.color\n    },\n\n    /**\n     *\n     * Set the background color for the decoration\n     *\n     * @param {draw2d.util.Color|String} c\n     * @returns {this}\n     */\n    setBackgroundColor: function (c) {\n      this.backgroundColor = new Color(c)\n      \n      this.parent?.repaint()\n\n      return this\n    },\n\n    /**\n     * Returns the fill color\n     *\n     * @returns {draw2d.util.Color}\n     */\n    getBackgroundColor: function(){\n      return this.backgroundColor\n    },\n\n    /**\n     *\n     * Change the dimension of the decoration shape\n     *\n     * @param {Number} width  The new width of the decoration\n     * @param {Number} height The new height of the decoration\n     * @returns {this}\n     **/\n    setDimension: function (width, height) {\n      this.width = width\n      this.height = height\n\n      return this\n    }\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * @example\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    var start = new draw2d.shape.node.Start();\n *    var end   = new draw2d.shape.node.End();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,80);\n *\n *    // Create a Connection and connect the Start and End node\n *    //\n *    var c = new draw2d.Connection();\n *\n *    // toggle from ManhattenRouter to DirectRouter to show the rotation of decorations\n *    c.setRouter(new draw2d.layout.connection.DirectRouter());\n *\n *    // Set the endpoint decorations for the connection\n *    //\n *    c.setSourceDecorator(new draw2d.decoration.connection.DiamondDecorator());\n *    c.setTargetDecorator(new draw2d.decoration.connection.DiamondDecorator());\n *    // Connect the endpoints with the start and end port\n *    //\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *\n *    // and finally add the connection to the canvas\n *    canvas.add(c);\n *\n *\n * @author Andreas Herz\n * @param {Number} [width] the width of the arrow\n * @param {Number} [height] the height of the arrow\n * @extend draw2d.decoration.connection.Decorator\n */\n\ndraw2d.decoration.connection.DiamondDecorator = draw2d.decoration.connection.Decorator.extend(\n  /** @lends draw2d.decoration.connection.DiamondDecorator */\n  {\n\n    NAME: \"draw2d.decoration.connection.DiamondDecorator\",\n\n    init: function (width, height) {\n      this._super(width, height)\n    },\n\n    /**\n     * Draw a filled diamond decoration.\n     *\n     * It's not your work to rotate the arrow. The draw2d do this job for you.\n     *\n     * @param {RaphaelPaper} paper the raphael paper object for the paint operation\n     * @returns {RaphaelPath}\n     * @private\n     **/\n    paint: function (paper) {\n      let st = paper.set()\n\n      st.push(\n        paper.path([\"M\", this.width / 2, \" \", -this.height / 2,  // Go to the top center..\n          \"L\", this.width, \" \", 0,               // ...draw line to the right middle\n          \"L\", this.width / 2, \" \", this.height / 2,   // ...bottom center...\n          \"L\", 0, \" \", 0,               // ...left middle...\n          \"L\", this.width / 2, \" \", -this.height / 2,  // and close the path\n          \"Z\"].join(\"\"))\n      )\n\n      st.attr({fill: this.backgroundColor.rgba()})\n      return st\n    }\n  });\n\n","import draw2d from '../packages'\n\n\n/**\n * Static util function to determine the minimal distance of point(px,py) on the line(x1,y1,x2,y2)\n *\n *\n * @returns {Number}\n * @static\n * @private\n * @param {Number} X1 x coordinate of the start point of the line\n * @param {Number} Y1 y coordinate of the start point of the line\n * @param {Number} X2 x coordinate of the end point of the line\n * @param {Number} Y2 y coordinate of the end point of the line\n * @param {Number} px x coordinate of the point to test\n * @param {Number} py y coordinate of the point to test\n **/\ndraw2d.geo.Line = {\n\n  /**\n   * Returns the relative position of the point on the line between [0..1]\n   * The point \"p\" must be part of the line!!\n   *\n   * 0 => given point is on the start location\n   * ..=> given point is in between\n   * 1 => given point is at the end\n   *\n   * @returns {Number}\n   */\n  inverseLerp: function (X1, Y1, X2, Y2, px, py) {\n    let nenner = Math.abs(X2 - X1)\n    let zaehler = Math.abs(X2 - px)\n    if (nenner === 0) {\n      nenner = Math.abs(Y2 - Y1)\n      zaehler = Math.abs(Y2 - py)\n      if (nenner === 0) {\n        return 1\n      }\n    }\n\n    return zaehler / nenner\n  },\n\n\n  /**\n   *\n   * Returns the projection of the point onto the line.\n   *\n   * @param {Number} px the x coordinate of the test point\n   * @param {Number} py the y coordinate of the test point\n   * @returns {draw2d.geo.Point}\n   **/\n  pointProjection: function (X1, Y1, X2, Y2, px, py) {\n    let r = new draw2d.geo.Point(0, 0)\n    if (X1 === X2 && Y1 === Y2) X1 -= 0.00001\n\n    let U = ((px - X1) * (X2 - X1)) + ((py - Y1) * (Y2 - Y1))\n\n    let Udenom = Math.pow(X2 - X1, 2) + Math.pow(Y2 - Y1, 2)\n\n    U /= Udenom\n\n    r.x = X1 + (U * (X2 - X1))\n    r.y = Y1 + (U * (Y2 - Y1))\n\n    let minx, maxx, miny, maxy\n\n    minx = Math.min(X1, X2)\n    maxx = Math.max(X1, X2)\n\n    miny = Math.min(Y1, Y2)\n    maxy = Math.max(Y1, Y2)\n\n    let isValid = (r.x >= minx && r.x <= maxx) && (r.y >= miny && r.y <= maxy)\n\n    return isValid ? r : null\n  },\n\n  distance: function (X1, Y1, X2, Y2, px, py) {\n    // Adjust vectors relative to X1,Y1\n    // X2,Y2 becomes relative vector from X1,Y1 to end of segment\n    X2 -= X1\n    Y2 -= Y1\n    // px,py becomes relative vector from X1,Y1 to test point\n    px -= X1\n    py -= Y1\n    let dotprod = px * X2 + py * Y2\n    let projlenSq\n    if (dotprod <= 0.0) {\n      // px,py is on the side of X1,Y1 away from X2,Y2\n      // distance to segment is length of px,py vector\n      // \"length of its (clipped) projection\" is now 0.0\n      projlenSq = 0.0\n    } else {\n      // switch to backwards vectors relative to X2,Y2\n      // X2,Y2 are already the negative of X1,Y1=>X2,Y2\n      // to get px,py to be the negative of px,py=>X2,Y2\n      // the dot product of two negated vectors is the same\n      // as the dot product of the two normal vectors\n      px = X2 - px\n      py = Y2 - py\n      dotprod = px * X2 + py * Y2\n      if (dotprod <= 0.0) {\n        // px,py is on the side of X2,Y2 away from X1,Y1\n        // distance to segment is length of (backwards) px,py vector\n        // \"length of its (clipped) projection\" is now 0.0\n        projlenSq = 0.0\n      } else {\n        // px,py is between X1,Y1 and X2,Y2\n        // dotprod is the length of the px,py vector\n        // projected on the X2,Y2=>X1,Y1 vector times the\n        // length of the X2,Y2=>X1,Y1 vector\n        projlenSq = dotprod * dotprod / (X2 * X2 + Y2 * Y2)\n      }\n    }\n    // Distance to line is now the length of the relative point\n    // vector minus the length of its projection onto the line\n    // (which is zero if the projection falls outside the range\n    //  of the line segment).\n    let lenSq = px * px + py * py - projlenSq\n    if (lenSq < 0) {\n      lenSq = 0\n    }\n    return Math.sqrt(lenSq)\n  }\n}\n\n","import draw2d from '../packages'\n\n\n/**\n * Represents a point (x, y) in 2-dimensional space.\n *\n * @class\n */\n\ndraw2d.geo.Point = Class.extend(\n  /** @lends draw2d.geo.Point.prototype */\n  {\n  \n  NAME: \"draw2d.geo.Point\",\n\n  /**\n   * Creates a new Point object with the hands over coordinates.\n   *\n   * @param {Number|draw2d.geo.Point} x\n   * @param {Number} y\n   */\n  init: function (x, y) {\n    if (x instanceof draw2d.geo.Point) {\n      this.x = x.x\n      this.y = x.y\n    }\n    else if (!isNaN(parseFloat(x.x)) && !isNaN(parseFloat(x.y))) {\n      this.x = x.x\n      this.y = x.y\n    }\n    else {\n      this.x = x\n      this.y = y\n    }\n\n\n    // limit for the maxi/minimum boundary of this rectangle\n    // It is not possible that the rect leave the boundary if set.\n    this.bx = null\n    this.by = null\n    this.bw = null\n    this.bh = null\n  },\n\n\n  /**\n   * \n   * Ensure the boundary of the rectangle. If set, the rectangle keeps always inside\n   * the boundary. It is like a virtual fence.\n   *\n   * @returns {this}\n   */\n  setBoundary: function (bx, by, bw, bh) {\n    if (bx instanceof draw2d.geo.Rectangle) {\n      this.bx = bx.x\n      this.by = bx.y\n      this.bw = bx.w\n      this.bh = bx.h\n    } else {\n      this.bx = bx\n      this.by = by\n      this.bw = bw\n      this.bh = bh\n    }\n    this.adjustBoundary()\n\n    return this\n  },\n\n\n  /**\n   * \n   * @private\n   * @returns {this}\n   */\n  adjustBoundary: function () {\n    if (this.bx === null) {\n      return this\n    }\n    this.x = Math.min(Math.max(this.bx, this.x), this.bw)\n    this.y = Math.min(Math.max(this.by, this.y), this.bh)\n\n    return this\n  },\n\n  /**\n   * \n   * Moves this Rectangle horizontally by dx and vertically by dy, then returns\n   * this Rectangle for convenience.<br>\n   * <br>\n   * The method return the object itself. This allows you to do command chaining, where\n   * you can perform multiple methods on the same elements.\n   *\n   * @param {Number} dx  Shift along X axis\n   * @param {Number} dy  Shift along Y axis\n   * @returns {this}\n   **/\n  translate: function (dx, dy) {\n    this.x += dx\n    this.y += dy\n    this.adjustBoundary()\n\n    return this\n  },\n\n  /**\n   * \n   * The X value of the point\n   *\n   * @since 0.1\n   * @returns {Number} The x coordinate of the top left corner\n   */\n  getX: function () {\n    return this.x\n  },\n\n  /**\n   * \n   * The y value of the point\n   *\n   * @returns {Number} The y coordinate of the top left corner\n   */\n  getY: function () {\n    return this.y\n  },\n\n  /**\n   * \n   * Set the new X value of the point\n   *\n   * @param {Number} x the new x coordinate of the rect\n   * @returns {this}\n   */\n  setX: function (x) {\n    this.x = x\n    this.adjustBoundary()\n\n    return this\n  },\n\n  /**\n   * \n   * Set the new Y value of the point\n   *\n   * @param {Number} y the new y coordinate of the rect\n   * @returns {this}\n   */\n  setY: function (y) {\n    this.y = y\n    this.adjustBoundary()\n\n    return this\n  },\n\n  /**\n   * \n   * Set the new x/y coordinates of this point\n   *\n   * @param {Number|draw2d.geo.Point} x\n   * @param {Number} [y]\n   * @returns {this}\n   */\n  setPosition: function (x, y) {\n    if (x instanceof draw2d.geo.Point) {\n      this.x = x.x\n      this.y = x.y\n    }\n    else {\n      this.x = x\n      this.y = y\n    }\n    this.adjustBoundary()\n\n    return this\n  },\n\n  /**\n   * \n   * Calculates the relative position of the specified Point to this Point.\n   *\n   * @param {draw2d.geo.Point} p The reference Point\n   * @returns {Number} NORTH, SOUTH, EAST, or WEST, as defined in {@link draw2d.geo.PositionConstants}\n   */\n  getPosition: function (p) {\n    let dx = p.x - this.x\n    let dy = p.y - this.y\n    if (Math.abs(dx) > Math.abs(dy)) {\n      if (dx < 0)\n        return draw2d.geo.PositionConstants.WEST\n      return draw2d.geo.PositionConstants.EAST\n    }\n    if (dy < 0) {\n      return draw2d.geo.PositionConstants.NORTH\n    }\n    return draw2d.geo.PositionConstants.SOUTH\n  },\n\n  /**\n   * \n   * Compares two points and return [true] if x and y are equals.\n   *\n   * @param {draw2d.geo.Point} p the point to compare with\n   *\n   * @returns {Boolean} True if the given p[x,y] has an exact match with the point\n   */\n  equals: function (p) {\n    return this.x === p.x && this.y === p.y\n  },\n\n  /**\n   * \n   * Return the distance between this point and the hands over.\n   *\n   * @param {draw2d.geo.Point} other the point to use\n   * @returns {Number} The distance to the given point\n   */\n  distance: function (other) {\n    return Math.sqrt((this.x - other.x) * (this.x - other.x) + (this.y - other.y) * (this.y - other.y))\n  },\n  /* @deprecated */\n  getDistance: function (other) {\n    return this.distance(other)\n  },\n\n\n  /**\n   * \n   * Return the length of the vector measured from [0,0]\n   *\n   * @returns {Number} The length of the vector [0,0][x,y]\n   * @since 2.10.0\n   */\n  length: function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  },\n\n  /**\n   * \n   * Return a new Point translated with the x/y values of the hands over point.\n   *\n   * @param {draw2d.geo.Point|Number} x the x translation or the complete point to translate\n   * @param {Number} [y] the y translation. Required if x is a simple number instead of a draw2d.geo.Point\n   * @returns {draw2d.geo.Point} A instance of a translated point.\n   */\n  translated: function (x, y) {\n    let other = new draw2d.geo.Point(x, y)\n    return new draw2d.geo.Point(this.x + other.x, this.y + other.y)\n  },\n\n  /**\n   * \n   * Scales this point with the handover factor\n   *\n   * @param {Number} factor the factor to scaled the point.\n   * @returns {this}\n   */\n  scale: function (factor) {\n    this.x *= factor\n    this.y *= factor\n    this.adjustBoundary()\n\n    return this\n  },\n\n  /**\n   * \n   * Return a **new** Point scaled with the givben factor\n   *\n   * @param {Number} factor the factor to scaled the new point.\n   * @returns {draw2d.geo.Point} The new translated point.\n   */\n  scaled: function (factor) {\n    return new draw2d.geo.Point(this.x * factor, this.y * factor)\n  },\n\n  /* @deprecated */\n  getScaled: function (factor) {\n    return this.scaled(factor)\n  },\n\n  /**\n   * \n   * Return an objects with all important attributes for XML or JSON serialization\n   *\n   * @returns {Object}\n   */\n  getPersistentAttributes: function () {\n    return {\n      x: this.x,\n      y: this.y\n    }\n  },\n\n  /**\n   * \n   * Read all attributes from the serialized properties and transfer them into the shape.\n   *\n   * @param {Object} memento\n   * @returns {this}\n   */\n  setPersistentAttributes: function (memento) {\n    this.x = memento.x\n    this.y = memento.y\n\n    return this\n  },\n\n  /**\n   * \n   * substract the given point and return the **new** point.\n   *\n   * @param that\n   * @returns {draw2d.geo.Point}\n   */\n  subtract: function (that) {\n    return new draw2d.geo.Point(this.x - that.x, this.y - that.y)\n  },\n\n\n  dot: function (that) {\n    return this.x * that.x + this.y * that.y\n  },\n\n  cross: function (that) {\n    return this.x * that.y - this.y * that.x\n  },\n\n\n  lerp: function (that, t) {\n    return new draw2d.geo.Point(this.x + (that.x - this.x) * t, this.y + (that.y - this.y) * t)\n  },\n\n\n  /**\n   * \n   * Return a cloned point\n   *\n   * @returns {draw2d.geo.Point}\n   */\n  clone: function () {\n    return new draw2d.geo.Point(this.x, this.y)\n  }\n\n})\n","import draw2d from '../packages'\n\n/**\n * @class\n * Static values for point orientation.\n * \n */\ndraw2d.geo.PositionConstants = {\n  /**\n   *\n   */\n  NORTH:  1,\n  SOUTH:  4,\n  WEST:  8,\n  EAST: 16\n}\n\n","import draw2d from '../packages'\n\n\n/**\n * @class\n * Represents a vector within 2-dimensional Euclidean space.\n * \n * @inheritable\n * @extends draw2d.geo.Point\n * @author Andreas Herz\n */\ndraw2d.geo.Ray = draw2d.geo.Point.extend(\n    /** @lends draw2d.geo.Ray.prototype */\n    {\n    \n    NAME: \"draw2d.geo.Ray\",\n    \n    /**\n     * Creates a ray object.\n     *\n     * @param {Number} x\n     * @param {Number} y\n     */\n    init: function( x, y)\n    {\n        this._super(x,y);\n    },\n    \n    \n    isHorizontal: function()\n    {\n       return this.x != 0;\n    },\n    \n    similarity: function( otherRay)\n    {\n       return Math.abs(this.dot(otherRay));\n    },\n    \n    getAveraged: function( otherRay)\n    {\n        return new draw2d.geo.Ray((this.x + otherRay.x) / 2, (this.y + otherRay.y) / 2);\n    }\n\n});\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Represents a Rectangle(x, y, width, height).\n *\n * @author Andreas Herz\n * @extends draw2d.geo.Point\n */\ndraw2d.geo.Rectangle = draw2d.geo.Point.extend(\n  /** @lends draw2d.geo.Rectangle.prototype */\n  {\n\n    NAME: \"draw2d.geo.Rectangle\",\n\n    /**\n     * Creates a new Point object with the hands over coordinates.\n     * <br>\n     * The constructor consumes almost any kind of rectangel definitions\n     * like:\n     *      let rect0 = new draw2d.geo.Rectangle({x:0,y:0,width:20,height:20});\n     *      let rect1 = new draw2d.geo.Rectangle({x:0,y:0,w:20,h:20});\n     *      let rect2 = new draw2d.geo.Rectangle($(\"#divid\")[0].getBoundingClientRect());\n     *      let rect3 = new draw2d.geo.Rectangle(rect1);\n     *\n     * The rectangle class is usefull for any kind of intersection, hitTest, contains,...calculation\n     * or to set the bounding box of any shape.\n     *\n     * @param {Number|draw2d.geo.Rectangle} x\n     * @param {Number} y\n     * @param {Number} w\n     * @param {Number} h\n     */\n    init: function (x, y, w, h) {\n      // try to consume any kind rectangle definitions\n      //\n      if (x instanceof draw2d.geo.Rectangle) {\n        y = x.y;\n        w = x.w;\n        h = x.h;\n        x = x.x;\n      } else if (typeof x.x === \"number\" && typeof x.y === \"number\") {\n        y = x.y;\n        w = x.w | x.width;\n        h = x.h | x.height;\n        x = x.x;\n      } else if (typeof x.top === \"number\" && typeof x.left === \"number\") {\n        y = x.top;\n        w = x.w | x.width;\n        h = x.h | x.height;\n        x = x.left;\n      }\n      this._super(x, y);\n      this.w = w;\n      this.h = h;\n    },\n\n\n    /**\n     *\n     * @private\n     */\n    adjustBoundary: function () {\n      if (this.bx === null) {\n        return;\n      }\n      this.x = Math.min(Math.max(this.bx, this.x), this.bw - this.w);\n      this.y = Math.min(Math.max(this.by, this.y), this.bh - this.h);\n      this.w = Math.min(this.w, this.bw);\n      this.h = Math.min(this.h, this.bh);\n    },\n\n    /**\n     *\n     * Resizes this Rectangle by the values supplied as input and returns this for\n     * convenience. This Rectangle's width will become this.width + dw. This\n     * Rectangle's height will become this.height + dh.\n     * <br>\n     * The method return the object itself. This allows you to do command chaining, where\n     * you can perform multiple methods on the same elements.\n     *\n     *\n     * @param {Number} dw  Amount by which width is to be resized\n     * @param {Number} dh  Amount by which height is to be resized\n     * @returns  {this}\n     **/\n    resize: function (dw, dh) {\n      this.w += dw;\n      this.h += dh;\n      this.adjustBoundary();\n\n      return this;\n    },\n\n    /**\n     * Adds the specified padding to the rectangle's bounds. This Rectangle's width\n     * will become this.width + dw. The Rectangle's height will become this.height + dh.\n     * The top left corner moves -dw/2, -dh/2\n     *\n     * @param {Number} dw  Amount by which width is to be resized\n     * @param {Number} dh  Amount by which height is to be resized\n     * @returns  {this}\n     **/\n    scale: function (dw, dh) {\n      this.w += (dw);\n      this.h += (dh);\n      this.x -= (dw / 2);\n      this.y -= (dh / 2);\n      this.adjustBoundary();\n\n      return this;\n    },\n\n    /**\n     * Translate the rectangle with the given x/y coordiante.\n     *\n     * @param {draw2d.geo.Point|Number} x the x translation or the complete point to translate\n     * @param {Number} [y] the y translation. Required if x is a simple number instead of a draw2d.geo.Point\n     *\n     *\n     * @since 5.6.0\n     * @returns  {this}\n     */\n    translate: function (x, y) {\n      let other = new draw2d.geo.Point(x, y);\n      this.x += other.x;\n      this.y += other.y;\n      this.adjustBoundary();\n\n      return this;\n    },\n\n\n    /**\n     *\n     * Returns a copy of the translated rectangle\n     *\n     * @param {draw2d.geo.Point|Number} x the x translation or the complete point to translate\n     * @param {Number} [y] the y translation. Required if x is a simple number instead of a draw2d.geo.Point\n     *\n     * @returns {draw2d.geo.Rectangle} The new translated rectangle.\n     * @since 5.6.0\n     */\n    translated: function (x, y) {\n      let other = new draw2d.geo.Point(x, y);\n      return new draw2d.geo.Rectangle(this.x + other.x, this.y + other.y, this.w, this.h);\n    },\n\n\n    /**\n     * Sets the parameters of this Rectangle from the Rectangle passed in and\n     * returns this for convenience.<br>\n     * <br>\n     * The method return the object itself. This allows you to do command chaining, where\n     * you can perform multiple methods on the same elements.\n     *\n     * @param {draw2d.geo.Rectangle} Rectangle providing the bounding values\n     * @returns  {this}\n     */\n    setBounds: function (rect) {\n      this.setPosition(rect.x, rect.y);\n\n      this.w = rect.w;\n      this.h = rect.h;\n\n      return this;\n    },\n\n    /**\n     *\n     * Returns <code>true</code> if this Rectangle's width or height is less than or\n     * equal to 0.\n     *\n     * @returns {Boolean}\n     */\n    isEmpty: function () {\n      return this.w <= 0 || this.h <= 0;\n    },\n\n    /**\n     *\n     * The width of the dimension element.\n     *\n     * @returns {Number}\n     **/\n    getWidth: function () {\n      return this.w;\n    },\n\n    /**\n     *\n     * Set the new width of the rectangle.\n     *\n     * @param {Number} w the new width of the rectangle\n     * @returns  {this}\n     */\n    setWidth: function (w) {\n      this.w = w;\n      this.adjustBoundary();\n\n      return this;\n    },\n\n    /**\n     *\n     * The height of the dimension element.\n     *\n     * @returns {Number}\n     **/\n    getHeight: function () {\n      return this.h;\n    },\n\n    /**\n     *\n     * Set the new height of the rectangle.\n     *\n     * @param {Number} h the new height of the rectangle\n     * @returns  {this}\n     */\n    setHeight: function (h) {\n      this.h = h;\n      this.adjustBoundary();\n\n      return this;\n    },\n\n    /**\n     *\n     * The x coordinate of the left corner.\n     *\n     * @returns {Number}\n     **/\n    getLeft: function () {\n      return this.x;\n    },\n\n    /**\n     *\n     * The x coordinate of the right corner.\n     *\n     * @returns {Number}\n     **/\n    getRight: function () {\n      return this.x + this.w;\n    },\n\n    /**\n     *\n     * The y coordinate of the top.\n     *\n     *@return {Number}\n     **/\n    getTop: function () {\n      return this.y;\n    },\n\n    /**\n     *\n     * The y coordinate of the bottom.\n     *\n     *@return {Number}\n     **/\n    getBottom: function () {\n      return this.y + this.h;\n    },\n\n    /**\n     *\n     * The top left corner of the dimension object.\n     *\n     * @returns {draw2d.geo.Point} a new point objects which holds the coordinates\n     **/\n    getTopLeft: function () {\n      return new draw2d.geo.Point(this.x, this.y);\n    },\n\n    /**\n     *\n     * The top center coordinate of the dimension object.\n     *\n     * @returns {draw2d.geo.Point} a new point objects which holds the coordinates\n     **/\n    getTopCenter: function () {\n      return new draw2d.geo.Point(this.x + (this.w / 2), this.y);\n    },\n\n    /**\n     *\n     * The top right corner of the dimension object.\n     *\n     * @returns {draw2d.geo.Point} a new point objects which holds the coordinates\n     **/\n    getTopRight: function () {\n      return new draw2d.geo.Point(this.x + this.w, this.y);\n    },\n\n    /**\n     *\n     * The center left  of the dimension object.\n     *\n     * @returns {draw2d.geo.Point} a new point objects which holds the coordinates\n     **/\n    getCenterLeft: function () {\n      return new draw2d.geo.Point(this.x, this.y + (this.h / 2));\n    },\n\n    /**\n     *\n     * The center right  of the dimension object.\n     *\n     * @returns {draw2d.geo.Point} a new point objects which holds the coordinates\n     **/\n    getCenterRight: function () {\n      return new draw2d.geo.Point(this.x+ this.w, this.y + (this.h / 2));\n    },\n\n\n    /**\n     *\n     * The bottom left corner of the dimension object.\n     *\n     * @returns {draw2d.geo.Point} a new point objects which holds the coordinates\n     **/\n    getBottomLeft: function () {\n      return new draw2d.geo.Point(this.x, this.y + this.h);\n    },\n\n    /**\n     *\n     * The bottom center coordinate of the dimension object.\n     *\n     * @returns {draw2d.geo.Point} a new point objects which holds the coordinates\n     **/\n    getBottomCenter: function () {\n      return new draw2d.geo.Point(this.x + (this.w / 2), this.y + this.h);\n    },\n\n    /**\n     *\n     * The center of the dimension object\n     *\n     * @returns {draw2d.geo.Point} a new point which holds the center of the object\n     **/\n    getCenter: function () {\n      return new draw2d.geo.Point(this.x + this.w / 2, this.y + this.h / 2);\n    },\n\n\n    /**\n     *\n     * Bottom right corner of the object\n     *\n     * @returns {draw2d.geo.Point} a new point which holds the bottom right corner\n     **/\n    getBottomRight: function () {\n      return new draw2d.geo.Point(this.x + this.w, this.y + this.h);\n    },\n\n    /**\n     *\n     * Return all points of the rectangle as array. Starting at topLeft and the\n     * clockwise.\n     *\n     * @returns {draw2d.util.ArrayList} the points starting at top/left and the clockwise\n     */\n    getVertices: function () {\n      let result = new draw2d.util.ArrayList();\n      // don't change the order. We expect always that the top left corner has index[0]\n      // and goes clock wise\n      //\n      result.add(this.getTopLeft());\n      result.add(this.getTopRight());\n      result.add(this.getBottomRight());\n      result.add(this.getBottomLeft());\n\n      return result;\n    },\n\n    /**\n     *\n     * Return a new rectangle which fits into this rectangle. <b>ONLY</b> the x/y coordinates\n     * will be changed. Not the dimension of the given rectangle.\n     *\n     * @param {draw2d.geo.Rectangle} rect the rectangle to adjust\n     * @returns the new shifted rectangle\n     */\n    moveInside: function (rect) {\n      let newRect = new draw2d.geo.Rectangle(rect.x, rect.y, rect.w, rect.h);\n      // shift the coordinate right/down if coordinate not inside the rect\n      //\n      newRect.x = Math.max(newRect.x, this.x);\n      newRect.y = Math.max(newRect.y, this.y);\n\n      // ensure that the right border is inside this rect (if possible). \n      //\n      if (newRect.w < this.w) {\n        newRect.x = Math.min(newRect.x + newRect.w, this.x + this.w) - newRect.w;\n      } else {\n        newRect.x = this.x;\n      }\n\n      // ensure that the bottom is inside this rectangle\n      //\n      if (newRect.h < this.h) {\n        newRect.y = Math.min(newRect.y + newRect.h, this.y + this.h) - newRect.h;\n      } else {\n        newRect.y = this.y;\n      }\n\n      return newRect;\n    },\n\n    /**\n     *\n     * Return the minimum distance of this rectangle to the given {@link draw2d.geo.Point} or\n     * {link draw2d.geo.Rectangle}.\n     *\n     * @param {draw2d.geo.Point|draw2d.geo.Rectangle} pointOrRectangle the reference point/rectangle for the distance calculation\n     */\n    getDistance: function (pointOrRectangle) {\n      let cx = this.x;\n      let cy = this.y;\n      let cw = this.w;\n      let ch = this.h;\n\n      let ox = pointOrRectangle.getX();\n      let oy = pointOrRectangle.getY();\n      let ow = 1;\n      let oh = 1;\n\n      if (pointOrRectangle instanceof draw2d.geo.Rectangle) {\n        ow = pointOrRectangle.getWidth();\n        oh = pointOrRectangle.getHeight();\n      }\n      let oct = 9;\n\n      // Determin Octant\n      //\n      // 0 | 1 | 2\n      // __|___|__\n      // 7 | 9 | 3\n      // __|___|__\n      // 6 | 5 | 4\n\n      if (cx + cw <= ox) {\n        if ((cy + ch) <= oy) {\n          oct = 0;\n        } else if (cy >= (oy + oh)) {\n          oct = 6;\n        } else {\n          oct = 7;\n        }\n      } else if (cx >= ox + ow) {\n        if (cy + ch <= oy) {\n          oct = 2;\n        } else if (cy >= oy + oh) {\n          oct = 4;\n        } else {\n          oct = 3;\n        }\n      } else if (cy + ch <= oy) {\n        oct = 1;\n      } else if (cy >= oy + oh) {\n        oct = 5;\n      } else {\n        return 0;\n      }\n\n\n      // Determine Distance based on Quad\n      //\n      switch (oct) {\n        case 0:\n          cx = (cx + cw) - ox;\n          cy = (cy + ch) - oy;\n          return -(cx + cy);\n        case 1:\n          return -((cy + ch) - oy);\n        case 2:\n          cx = (ox + ow) - cx;\n          cy = (cy + ch) - oy;\n          return -(cx + cy);\n        case 3:\n          return -((ox + ow) - cx);\n        case 4:\n          cx = (ox + ow) - cx;\n          cy = (oy + oh) - cy;\n          return -(cx + cy);\n        case 5:\n          return -((oy + oh) - cy);\n        case 6:\n          cx = (cx + cw) - ox;\n          cy = (oy + oh) - cy;\n          return -(cx + cy);\n        case 7:\n          return -((cx + cw) - ox);\n      }\n\n      throw \"Unknown data type of parameter for distance calculation in draw2d.geo.Rectangle.getDistance(..)\";\n    },\n\n\n    /**\n     *\n     * Determin the octant of r2 in relation to this rectangle.\n     * <pre>\n     *\n     *    0 | 1 | 2\n     *    __|___|__\n     *    7 | 8 | 3\n     *    __|___|__\n     *    6 | 5 | 4\n     * </pre>\n     *\n     * @param {draw2d.geo.Rectangle} r2\n     *\n     */\n    determineOctant: function (r2) {\n      let HISTERESE = 3; // Toleranz um diese vermieden wird, dass der Octant \"8\" zurückgegeben wird\n\n      let ox = this.x + HISTERESE;\n      let oy = this.y + HISTERESE;\n      let ow = this.w - (HISTERESE * 2);\n      let oh = this.h - (HISTERESE * 2);\n\n      let cx = r2.x;\n      let cy = r2.y;\n      let cw = 2;\n      let ch = 2;\n      if (r2 instanceof draw2d.geo.Rectangle) {\n        cw = r2.w;\n        ch = r2.h;\n      }\n\n      let oct = 0;\n\n      if (cx + cw <= ox) {\n        if ((cy + ch) <= oy) {\n          oct = 0;\n        } else if (cy >= (oy + oh)) {\n          oct = 6;\n        } else {\n          oct = 7;\n        }\n      } else if (cx >= ox + ow) {\n        if (cy + ch <= oy) {\n          oct = 2;\n        } else if (cy >= oy + oh) {\n          oct = 4;\n        } else {\n          oct = 3;\n        }\n      } else if (cy + ch <= oy) {\n        oct = 1;\n      } else if (cy >= oy + oh) {\n        oct = 5;\n      } else {\n        oct = 8;\n      }\n\n      return oct;\n    },\n\n\n    /**\n     *\n     * Returns the direction the point <i>p</i> is in relation to the given rectangle.\n     * Util method for inherit router implementations.\n     *\n     * <p>\n     * Possible values:\n     * <ul>\n     *   <li>up -&gt; 0</li>\n     *   <li>right -&gt; 1</li>\n     *   <li>down -&gt; 2</li>\n     *   <li>left -&gt; 3</li>\n     * </ul>\n     * <p>\n     *\n     * @param {draw2d.geo.Point} other the point in relation to the given rectangle\n     *\n     * @returns {Number} the direction from <i>r</i> to <i>p</i>\n     */\n    getDirection: function (other) {\n      let current = this.getTopLeft();\n      switch (this.determineOctant(other)) {\n        case 0:\n          if ((current.x - other.x) < (current.y - other.y))\n            return draw2d.geo.Rectangle.DIRECTION_UP;\n          return draw2d.geo.Rectangle.DIRECTION_LEFT;\n        case 1:\n          return draw2d.geo.Rectangle.DIRECTION_UP;\n        case 2:\n          current = this.getTopRight();\n          if ((other.x - current.x) < (current.y - other.y))\n            return draw2d.geo.Rectangle.DIRECTION_UP;\n          return draw2d.geo.Rectangle.DIRECTION_RIGHT;\n        case 3:\n          return draw2d.geo.Rectangle.DIRECTION_RIGHT;\n        case 4:\n          current = this.getBottomRight();\n          if ((other.x - current.x) < (other.y - current.y))\n            return draw2d.geo.Rectangle.DIRECTION_DOWN;\n          return draw2d.geo.Rectangle.DIRECTION_RIGHT;\n        case 5:\n          return draw2d.geo.Rectangle.DIRECTION_DOWN;\n        case 6:\n          current = this.getBottomLeft();\n          if ((current.x - other.x) < (other.y - current.y))\n            return draw2d.geo.Rectangle.DIRECTION_DOWN;\n          return draw2d.geo.Rectangle.DIRECTION_LEFT;\n        case 7:\n          return draw2d.geo.Rectangle.DIRECTION_LEFT;\n        case 8:\n          if (other.y > this.y) {\n            return draw2d.geo.Rectangle.DIRECTION_DOWN;\n          }\n          return draw2d.geo.Rectangle.DIRECTION_UP;\n\n      }\n      return draw2d.geo.Rectangle.DIRECTION_UP;\n    },\n\n\n    /**\n     *\n     * Compares two rectangle objects\n     *\n     * @param {draw2d.geo.Rectangle} o\n     *\n     * @returns {Boolean}\n     **/\n    equals: function (o) {\n      return this.x == o.x && this.y == o.y && this.w == o.w && this.h == o.h;\n    },\n\n    /**\n     *\n     * Detect whenever the hands over coordinate is inside the rectangle.\n     *\n     * @param {Number/draw2d.geo.Point} iX\n     * @param {Number} iY\n     * @returns {Boolean}\n     */\n    hitTest: function (iX, iY) {\n      if (iX instanceof draw2d.geo.Point) {\n        iY = iX.y;\n        iX = iX.x;\n      }\n      let iX2 = this.x + this.getWidth();\n      let iY2 = this.y + this.getHeight();\n      return (iX >= this.x && iX <= iX2 && iY >= this.y && iY <= iY2);\n    },\n\n    /**\n     *\n     * return true if this rectangle inside the hand over rectangle\n     *\n     *\n     * @param {draw2d.geo.Rectangle} rect\n     * @returns {Boolean}\n     */\n    isInside: function (rect) {\n      return rect.hitTest(this.getTopLeft())\n        && rect.hitTest(this.getTopRight())\n        && rect.hitTest(this.getBottomLeft())\n        && rect.hitTest(this.getBottomRight());\n    },\n\n    /**\n     *\n     * return true if this rectangle contains the hand over rectangle.\n     *\n     *\n     * @param {draw2d.geo.Rectangle} rect\n     * @returns {Boolean}\n     * @since 4.7.2\n     */\n    contains: function (rect) {\n      return this.hitTest(rect.getTopLeft())\n        && this.hitTest(rect.getTopRight())\n        && this.hitTest(rect.getBottomLeft())\n        && this.hitTest(rect.getBottomRight());\n    },\n\n    /**\n     *\n     * checks whenever the rectangles has an intersection.\n     *\n     * @param {draw2d.geo.Rectangle} rect\n     * @returns {Boolean}\n     */\n    intersects: function (rect) {\n      let x11 = rect.x,\n        y11 = rect.y,\n        x12 = rect.x + rect.w,\n        y12 = rect.y + rect.h,\n        x21 = this.x,\n        y21 = this.y,\n        x22 = this.x + this.w,\n        y22 = this.y + this.h;\n\n      let x_overlap = Math.max(0, Math.min(x12, x22) - Math.max(x11, x21));\n      let y_overlap = Math.max(0, Math.min(y12, y22) - Math.max(y11, y21));\n\n      return x_overlap * y_overlap !== 0;\n    },\n\n    /**\n     * Merge this rectangle with the given one.\n     *\n     * @param {draw2d.geo.Rectangle} rect\n     * @since 4.8.0\n     * @returns  {this}\n     */\n    merge: function (rect) {\n      let r = Math.max(rect.getRight(), this.getRight());\n      let b = Math.max(rect.getBottom(), this.getBottom());\n\n      this.setPosition(Math.min(this.x, rect.x), Math.min(this.y, rect.y));\n\n      this.w = r - this.x;\n      this.h = b - this.y;\n\n      return this;\n    },\n\n    /**\n     *\n     * returns the intersection points with the given line if any exists\n     *\n     * @param {draw2d.geo.Point} start\n     * @param {draw2d.geo.Point} end\n     */\n    intersectionWithLine: function (start, end) {\n      let result = new draw2d.util.ArrayList();\n      let v = this.getVertices();\n      v.add(v.first());\n      let p1 = v.first();\n      let p2 = null;\n      for (let i = 1; i < 5; i++) {\n        p2 = v.get(i);\n        p1 = draw2d.shape.basic.Line.intersection(start, end, p1, p2);\n        if (p1 !== null) {\n          result.add(p1);\n        }\n        p1 = p2;\n      }\n      return result;\n    },\n\n    /**\n     *\n     * Returns a copy of this rectangle\n     *\n     *\n     * @returns {draw2d.geo.Rectangle}\n     * @since 5.6.0\n     */\n    clone: function () {\n      return new draw2d.geo.Rectangle(this.x, this.y, this.w, this.h);\n    },\n\n    /**\n     *\n     * converts the rectangle to JSON representation. required for the draw2d.io.Writer\n     *\n     * @returns {Object}\n     */\n    toJSON: function () {\n      return {\n        width: this.w,\n        height: this.h,\n        x: this.x,\n        y: this.y\n      };\n    }\n\n  });\n\n/**\n * ENUM for Direction\n */\ndraw2d.geo.Rectangle.DIRECTION_UP = 0;\ndraw2d.geo.Rectangle.DIRECTION_RIGHT = 1;\ndraw2d.geo.Rectangle.DIRECTION_DOWN = 2;\ndraw2d.geo.Rectangle.DIRECTION_LEFT = 3;\n\n","import draw2d from '../packages'\n\n\n/**\n * @class\n * Geometric utils functions used in ray, point and some routers.\n *\n * @author Andreas Herz\n */\ndraw2d.geo.Util = {\n\n  /**\n   *\n   * @param start {draw2d.geo.Point} start point of a line\n   * @param end  {draw2d.geo.Point} end point of a line\n   * @param distanceFromStart {Number} distance from the start point to extrapolate a new point\n   * @returns {{x: *, y: *}|*} a new point with the distance *distanceFromStart* from the start point\n   */\n    insetPoint: function (start, end, distanceFromStart) {\n      if (start.equals(end)) {\n        return start\n      }\n      let vx = start.x - end.x\n      let vy = start.y - end.y\n      let length = Math.sqrt(vx * vx + vy * vy)\n      let localDistance = Math.min(length / 2, distanceFromStart)\n      return {\n        x: end.x + vx / length * (length - localDistance),\n        y: end.y + vy / length * (length - localDistance)\n      }\n    }\n}\n","import draw2d from 'packages'\nexport default draw2d;\n\n\nimport raph from 'lib/raphael.exec.js'\nimport cl   from 'lib/Class.exec.js'\nimport path from 'lib/pathfinding.exec.js'\n\n\nrequire('./util/raphael_ext');\nrequire('./util/Polyfill');\nrequire('./util/Base64');\nrequire('./util/Debug');\n// require('./util/Color');\n\nrequire('./util/ArrayList');\nrequire('./util/SVGUtil');\n//require('./util/JSONUtil');\n//require('./util/UUID');\nrequire('./util/spline/Spline');\nrequire('./util/spline/CubicSpline');\nrequire('./util/spline/CatmullRomSpline');\nrequire('./util/spline/BezierSpline');\nrequire('./geo/PositionConstants');\nrequire('./geo/Point');\nrequire('./geo/Rectangle');\nrequire('./geo/Util');\nrequire('./geo/Ray');\nrequire('./geo/Line');\nrequire('./command/CommandType');\nrequire('./command/Command');\nrequire('./command/CommandCollection');\nrequire('./command/CommandStack');\nrequire('./command/CommandStackEvent');\nrequire('./command/CommandStackEventListener');\nrequire('./command/CommandMove');\nrequire('./command/CommandAttr');\nrequire('./command/CommandMoveLine');\nrequire('./command/CommandMoveConnection');\nrequire('./command/CommandMoveVertex');\nrequire('./command/CommandMoveVertices');\nrequire('./command/CommandResize');\nrequire('./command/CommandRotate');\nrequire('./command/CommandConnect');\nrequire('./command/CommandReconnect');\nrequire('./command/CommandDelete');\nrequire('./command/CommandDeleteGroup');\nrequire('./command/CommandAdd');\nrequire('./command/CommandGroup');\nrequire('./command/CommandUngroup');\nrequire('./command/CommandAddVertex');\nrequire('./command/CommandAssignFigure');\nrequire('./command/CommandBoundingBox');\nrequire('./command/CommandRemoveVertex');\nrequire('./command/CommandReplaceVertices');\nrequire('./layout/connection/ConnectionRouter');\nrequire('./layout/connection/DirectRouter');\nrequire('./layout/connection/RubberbandRouter');\nrequire('./layout/connection/VertexRouter');\nrequire('./layout/connection/ManhattanConnectionRouter');\nrequire('./layout/connection/ManhattanBridgedConnectionRouter');\nrequire('./layout/connection/InteractiveManhattanConnectionRouter');\nrequire('./layout/connection/CircuitConnectionRouter');\nrequire('./layout/connection/SplineConnectionRouter');\nrequire('./layout/connection/FanConnectionRouter');\nrequire('./layout/connection/MazeConnectionRouter');\nrequire('./layout/connection/MuteableManhattanConnectionRouter');\nrequire('./layout/connection/SketchConnectionRouter');\nrequire('./layout/mesh/MeshLayouter');\nrequire('./layout/mesh/ExplodeLayouter');\nrequire('./layout/mesh/ProposedMeshChange');\nrequire('./layout/locator/Locator');\nrequire('./layout/locator/PortLocator');\nrequire('./layout/locator/DraggableLocator');\nrequire('./layout/locator/SmartDraggableLocator');\nrequire('./layout/locator/XYAbsPortLocator');\nrequire('./layout/locator/XYRelPortLocator');\nrequire('./layout/locator/InputPortLocator');\nrequire('./layout/locator/OutputPortLocator');\nrequire('./layout/locator/ConnectionLocator');\nrequire('./layout/locator/ManhattanMidpointLocator');\nrequire('./layout/locator/PolylineMidpointLocator');\nrequire('./layout/locator/ParallelMidpointLocator');\nrequire('./layout/locator/TopLocator');\nrequire('./layout/locator/BottomLocator');\nrequire('./layout/locator/LeftLocator');\nrequire('./layout/locator/RightLocator');\nrequire('./layout/locator/CenterLocator');\nrequire('./policy/EditPolicy');\nrequire('./policy/canvas/CanvasPolicy');\nrequire('./policy/canvas/ZoomPolicy');\nrequire('./policy/canvas/WheelZoomPolicy');\nrequire('./policy/canvas/KeyboardPolicy');\nrequire('./policy/canvas/DefaultKeyboardPolicy');\nrequire('./policy/canvas/ExtendedKeyboardPolicy');\nrequire('./policy/canvas/SelectionPolicy');\nrequire('./policy/canvas/SingleSelectionPolicy');\nrequire('./policy/canvas/GhostMoveSelectionPolicy');\nrequire('./policy/canvas/PanningSelectionPolicy');\nrequire('./policy/canvas/BoundingboxSelectionPolicy');\nrequire('./policy/canvas/ReadOnlySelectionPolicy');\nrequire('./policy/canvas/DecorationPolicy');\nrequire('./policy/canvas/FadeoutDecorationPolicy');\nrequire('./policy/canvas/CoronaDecorationPolicy');\nrequire('./policy/canvas/SnapToEditPolicy');\nrequire('./policy/canvas/ShowDimetricGridEditPolicy');\nrequire('./policy/canvas/SnapToDimetricGridEditPolicy');\nrequire('./policy/canvas/ShowGridEditPolicy');\nrequire('./policy/canvas/SnapToGridEditPolicy');\nrequire('./policy/canvas/ShowDotEditPolicy');\nrequire('./policy/canvas/ShowChessboardEditPolicy');\nrequire('./policy/canvas/SnapToGeometryEditPolicy');\nrequire('./policy/canvas/SnapToVerticesEditPolicy');\nrequire('./policy/canvas/SnapToInBetweenEditPolicy');\nrequire('./policy/canvas/SnapToCenterEditPolicy');\nrequire('./policy/canvas/DropInterceptorPolicy');\nrequire('./policy/connection/ConnectionCreatePolicy');\nrequire('./policy/connection/ComposedConnectionCreatePolicy');\nrequire('./policy/connection/ClickConnectionCreatePolicy');\nrequire('./policy/connection/OrthogonalConnectionCreatePolicy');\nrequire('./policy/connection/DragConnectionCreatePolicy');\nrequire('./policy/figure/FigureEditPolicy');\nrequire('./policy/figure/DragDropEditPolicy');\nrequire('./policy/figure/RegionEditPolicy');\nrequire('./policy/figure/HorizontalEditPolicy');\nrequire('./policy/figure/VerticalEditPolicy');\nrequire('./policy/figure/SelectionPolicy');\nrequire('./policy/figure/SelectionFeedbackPolicy');\nrequire('./policy/figure/ResizeSelectionFeedbackPolicy');\nrequire('./policy/figure/RectangleSelectionFeedbackPolicy');\nrequire('./policy/figure/RaftSelectionFeedbackPolicy');\nrequire('./policy/figure/BigRectangleSelectionFeedbackPolicy');\nrequire('./policy/figure/RoundRectangleSelectionFeedbackPolicy');\nrequire('./policy/figure/BusSelectionFeedbackPolicy');\nrequire('./policy/figure/WidthSelectionFeedbackPolicy');\nrequire('./policy/figure/VBusSelectionFeedbackPolicy');\nrequire('./policy/figure/HBusSelectionFeedbackPolicy');\nrequire('./policy/figure/AntSelectionFeedbackPolicy');\nrequire('./policy/figure/GlowSelectionFeedbackPolicy');\nrequire('./policy/figure/SlimSelectionFeedbackPolicy');\nrequire('./policy/figure/VertexSelectionFeedbackPolicy');\nrequire('./policy/line/LineSelectionFeedbackPolicy');\nrequire('./policy/line/VertexSelectionFeedbackPolicy');\nrequire('./policy/line/OrthogonalSelectionFeedbackPolicy');\nrequire('./policy/port/PortFeedbackPolicy');\nrequire('./policy/port/ElasticStrapFeedbackPolicy');\nrequire('./policy/port/IntrusivePortsFeedbackPolicy');\nrequire('./Configuration');\nrequire('./HeadlessCanvas');\nrequire('./Canvas');\nrequire('./Selection');\nrequire('./Figure');\nrequire('./shape/node/Node');\nrequire('./VectorFigure');\nrequire('./shape/basic/Rectangle');\nrequire('./SetFigure');\nrequire('./SVGFigure');\nrequire('./shape/node/Hub');\nrequire('./shape/node/HorizontalBus');\nrequire('./shape/node/VerticalBus');\nrequire('./shape/node/Fulcrum');\nrequire('./shape/basic/Arc');\nrequire('./shape/basic/Oval');\nrequire('./shape/basic/Circle');\nrequire('./shape/basic/Label');\nrequire('./shape/basic/Text');\nrequire('./shape/basic/Line');\nrequire('./shape/basic/PolyLine');\nrequire('./shape/basic/Image');\nrequire('./shape/basic/Polygon');\nrequire('./shape/basic/Diamond');\nrequire('./shape/dimetric/Rectangle');\nrequire('./shape/composite/Composite');\nrequire('./shape/composite/StrongComposite');\nrequire('./shape/composite/Group');\nrequire('./shape/composite/Jailhouse');\nrequire('./shape/composite/WeakComposite');\nrequire('./shape/composite/Raft');\nrequire('./Connection');\nrequire('./VectorFigure');\nrequire('./ResizeHandle');\nrequire('./shape/composite/RaftResizeHandle');\nrequire('./shape/basic/LineResizeHandle');\nrequire('./shape/basic/LineStartResizeHandle');\nrequire('./shape/basic/LineEndResizeHandle');\nrequire('./shape/basic/VertexResizeHandle');\nrequire('./shape/basic/GhostVertexResizeHandle');\nrequire('./Port');\nrequire('./InputPort');\nrequire('./OutputPort');\nrequire('./HybridPort');\nrequire('./layout/anchor/ConnectionAnchor');\nrequire('./layout/anchor/ChopboxConnectionAnchor');\nrequire('./layout/anchor/FanConnectionAnchor');\nrequire('./layout/anchor/ShortesPathConnectionAnchor');\nrequire('./layout/anchor/CenterEdgeConnectionAnchor');\nrequire('./shape/arrow/CalligrapherArrowLeft');\nrequire('./shape/arrow/CalligrapherArrowDownLeft');\nrequire('./shape/node/Start');\nrequire('./shape/node/End');\nrequire('./shape/node/Between');\nrequire('./shape/note/PostIt');\nrequire('./shape/flowchart/Document');\nrequire('./shape/widget/Widget');\nrequire('./shape/widget/Slider');\nrequire('./shape/diagram/Diagram');\nrequire('./shape/diagram/Pie');\nrequire('./shape/diagram/Sparkline');\nrequire('./shape/analog/OpAmp');\nrequire('./shape/analog/ResistorBridge');\nrequire('./shape/analog/ResistorVertical');\nrequire('./shape/analog/VoltageSupplyHorizontal');\nrequire('./shape/analog/VoltageSupplyVertical');\nrequire('./shape/layout/Layout');\nrequire('./shape/layout/HorizontalLayout');\nrequire('./shape/layout/VerticalLayout');\nrequire('./shape/layout/TableLayout');\nrequire('./shape/layout/FlexGridLayout');\nrequire('./shape/layout/StackLayout');\nrequire('./shape/icon/Icon');\nrequire('./shape/icon/Thunder');\nrequire('./shape/icon/Snow');\nrequire('./shape/icon/Hail');\nrequire('./shape/icon/Rain');\nrequire('./shape/icon/Cloudy');\nrequire('./shape/icon/Sun');\nrequire('./shape/icon/Undo');\nrequire('./shape/icon/Detour');\nrequire('./shape/icon/Merge');\nrequire('./shape/icon/Split');\nrequire('./shape/icon/Fork');\nrequire('./shape/icon/ForkAlt');\nrequire('./shape/icon/Exchange');\nrequire('./shape/icon/Shuffle');\nrequire('./shape/icon/Refresh');\nrequire('./shape/icon/Ccw');\nrequire('./shape/icon/Acw');\nrequire('./shape/icon/Contract');\nrequire('./shape/icon/Expand');\nrequire('./shape/icon/Stop');\nrequire('./shape/icon/End');\nrequire('./shape/icon/Start');\nrequire('./shape/icon/Ff');\nrequire('./shape/icon/Rw');\nrequire('./shape/icon/ArrowRight');\nrequire('./shape/icon/ArrowLeft');\nrequire('./shape/icon/ArrowUp');\nrequire('./shape/icon/ArrowDown');\nrequire('./shape/icon/ArrowLeft2');\nrequire('./shape/icon/ArrowRight2');\nrequire('./shape/icon/Smile2');\nrequire('./shape/icon/Smile');\nrequire('./shape/icon/Alarm');\nrequire('./shape/icon/Clock');\nrequire('./shape/icon/StopWatch');\nrequire('./shape/icon/History');\nrequire('./shape/icon/Future');\nrequire('./shape/icon/GlobeAlt2');\nrequire('./shape/icon/GlobeAlt');\nrequire('./shape/icon/Globe');\nrequire('./shape/icon/Warning');\nrequire('./shape/icon/Code');\nrequire('./shape/icon/Pensil');\nrequire('./shape/icon/Pen');\nrequire('./shape/icon/Plus');\nrequire('./shape/icon/Minus');\nrequire('./shape/icon/TShirt');\nrequire('./shape/icon/Sticker');\nrequire('./shape/icon/Page2');\nrequire('./shape/icon/Page');\nrequire('./shape/icon/Landscape1');\nrequire('./shape/icon/Landscape2');\nrequire('./shape/icon/Plugin');\nrequire('./shape/icon/Bookmark');\nrequire('./shape/icon/Hammer');\nrequire('./shape/icon/Users');\nrequire('./shape/icon/User');\nrequire('./shape/icon/Customer');\nrequire('./shape/icon/Employee');\nrequire('./shape/icon/Anonymous');\nrequire('./shape/icon/Skull');\nrequire('./shape/icon/Mail');\nrequire('./shape/icon/Picture');\nrequire('./shape/icon/Bubble');\nrequire('./shape/icon/CodeTalk');\nrequire('./shape/icon/Talkq');\nrequire('./shape/icon/Talke');\nrequire('./shape/icon/Home');\nrequire('./shape/icon/Lock');\nrequire('./shape/icon/Clip');\nrequire('./shape/icon/Star');\nrequire('./shape/icon/StarOff');\nrequire('./shape/icon/Star2');\nrequire('./shape/icon/Star2Off');\nrequire('./shape/icon/Star3');\nrequire('./shape/icon/Star3Off');\nrequire('./shape/icon/Chat');\nrequire('./shape/icon/Quote');\nrequire('./shape/icon/Gear2');\nrequire('./shape/icon/Gear');\nrequire('./shape/icon/Wrench');\nrequire('./shape/icon/Wrench2');\nrequire('./shape/icon/Wrench3');\nrequire('./shape/icon/ScrewDriver');\nrequire('./shape/icon/HammerAndScrewDriver');\nrequire('./shape/icon/Magic');\nrequire('./shape/icon/Download');\nrequire('./shape/icon/View');\nrequire('./shape/icon/Noview');\nrequire('./shape/icon/Cloud');\nrequire('./shape/icon/Cloud2');\nrequire('./shape/icon/CloudDown');\nrequire('./shape/icon/CloudUp');\nrequire('./shape/icon/Location');\nrequire('./shape/icon/Volume0');\nrequire('./shape/icon/Volume1');\nrequire('./shape/icon/Volume2');\nrequire('./shape/icon/Volume3');\nrequire('./shape/icon/Key');\nrequire('./shape/icon/Ruler');\nrequire('./shape/icon/Power');\nrequire('./shape/icon/Unlock');\nrequire('./shape/icon/Flag');\nrequire('./shape/icon/Tag');\nrequire('./shape/icon/Search');\nrequire('./shape/icon/ZoomOut');\nrequire('./shape/icon/ZoomIn');\nrequire('./shape/icon/Cross');\nrequire('./shape/icon/Check');\nrequire('./shape/icon/Settings');\nrequire('./shape/icon/SettingsAlt');\nrequire('./shape/icon/Feed');\nrequire('./shape/icon/Bug');\nrequire('./shape/icon/Link');\nrequire('./shape/icon/Calendar');\nrequire('./shape/icon/Picker');\nrequire('./shape/icon/No');\nrequire('./shape/icon/CommandLine');\nrequire('./shape/icon/Photo');\nrequire('./shape/icon/Printer');\nrequire('./shape/icon/Export');\nrequire('./shape/icon/Import');\nrequire('./shape/icon/Run');\nrequire('./shape/icon/Magnet');\nrequire('./shape/icon/NoMagnet');\nrequire('./shape/icon/ReflectH');\nrequire('./shape/icon/ReflectV');\nrequire('./shape/icon/Resize2');\nrequire('./shape/icon/Rotate');\nrequire('./shape/icon/Connect');\nrequire('./shape/icon/Disconnect');\nrequire('./shape/icon/Folder');\nrequire('./shape/icon/Man');\nrequire('./shape/icon/Woman');\nrequire('./shape/icon/People');\nrequire('./shape/icon/Parent');\nrequire('./shape/icon/Notebook');\nrequire('./shape/icon/Diagram');\nrequire('./shape/icon/BarChart');\nrequire('./shape/icon/PieChart');\nrequire('./shape/icon/LineChart');\nrequire('./shape/icon/Apps');\nrequire('./shape/icon/Locked');\nrequire('./shape/icon/Ppt');\nrequire('./shape/icon/Lab');\nrequire('./shape/icon/Umbrella');\nrequire('./shape/icon/Dry');\nrequire('./shape/icon/Ipad');\nrequire('./shape/icon/Iphone');\nrequire('./shape/icon/Jigsaw');\nrequire('./shape/icon/Lamp');\nrequire('./shape/icon/Lamp_alt');\nrequire('./shape/icon/Video');\nrequire('./shape/icon/Palm');\nrequire('./shape/icon/Fave');\nrequire('./shape/icon/Help');\nrequire('./shape/icon/Crop');\nrequire('./shape/icon/BioHazard');\nrequire('./shape/icon/WheelChair');\nrequire('./shape/icon/Mic');\nrequire('./shape/icon/MicMute');\nrequire('./shape/icon/IMac');\nrequire('./shape/icon/Pc');\nrequire('./shape/icon/Cube');\nrequire('./shape/icon/FullCube');\nrequire('./shape/icon/Font');\nrequire('./shape/icon/Trash');\nrequire('./shape/icon/NewWindow');\nrequire('./shape/icon/DockRight');\nrequire('./shape/icon/DockLeft');\nrequire('./shape/icon/DockBottom');\nrequire('./shape/icon/DockTop');\nrequire('./shape/icon/Pallete');\nrequire('./shape/icon/Cart');\nrequire('./shape/icon/Glasses');\nrequire('./shape/icon/Package');\nrequire('./shape/icon/Book');\nrequire('./shape/icon/Books');\nrequire('./shape/icon/Icons');\nrequire('./shape/icon/List');\nrequire('./shape/icon/Db');\nrequire('./shape/icon/Paper');\nrequire('./shape/icon/TakeOff');\nrequire('./shape/icon/Landing');\nrequire('./shape/icon/Plane');\nrequire('./shape/icon/Phone');\nrequire('./shape/icon/HangUp');\nrequire('./shape/icon/SlideShare');\nrequire('./shape/icon/Twitter');\nrequire('./shape/icon/TwitterBird');\nrequire('./shape/icon/Skype');\nrequire('./shape/icon/Windows');\nrequire('./shape/icon/Apple');\nrequire('./shape/icon/Linux');\nrequire('./shape/icon/NodeJs');\nrequire('./shape/icon/JQuery');\nrequire('./shape/icon/Sencha');\nrequire('./shape/icon/Vim');\nrequire('./shape/icon/InkScape');\nrequire('./shape/icon/Aumade');\nrequire('./shape/icon/Firefox');\nrequire('./shape/icon/Ie');\nrequire('./shape/icon/Ie9');\nrequire('./shape/icon/Opera');\nrequire('./shape/icon/Chrome');\nrequire('./shape/icon/Safari');\nrequire('./shape/icon/LinkedIn');\nrequire('./shape/icon/Flickr');\nrequire('./shape/icon/GitHub');\nrequire('./shape/icon/GitHubAlt');\nrequire('./shape/icon/Raphael');\nrequire('./shape/icon/GRaphael');\nrequire('./shape/icon/Svg');\nrequire('./shape/icon/Usb');\nrequire('./shape/icon/Ethernet');\nrequire('./shape/pert/Activity');\nrequire('./shape/pert/Start');\nrequire('./shape/state/Start');\nrequire('./shape/state/End');\nrequire('./shape/state/State');\nrequire('./shape/state/Connection');\nrequire('./ui/LabelEditor');\nrequire('./ui/LabelInplaceEditor');\nrequire('./decoration/connection/Decorator');\nrequire('./decoration/connection/ArrowDecorator');\nrequire('./decoration/connection/DiamondDecorator');\nrequire('./decoration/connection/CircleDecorator');\nrequire('./decoration/connection/BarDecorator');\nrequire('./io/Reader');\nrequire('./io/Writer');\nrequire('./io/svg/Writer');\nrequire('./io/png/Writer');\nrequire('./io/json/Writer');\nrequire('./io/json/Reader');\n","import draw2d from '../packages'\n\n/**\n * @class\n * Template class for general import of a document into the canvas.\n *\n * @author andreas Herz\n */\ndraw2d.io.Reader = Class.extend(\n  /** @lends draw2d.io.Reader */\n  {\n\n    init: function(){\n\n    },\n\n    /**\n     *\n     *\n     * Restore the canvas from a given String.\n     *\n     * @param {draw2d.Canvas} canvas the canvas to restore\n     * @param {Object} document the document to read\n     *\n     * @returns {draw2d.util.ArrayList} the added elements\n     * @template\n     */\n    unmarshal: function(canvas, document){\n        // do nothing. Inherit classes must implement this method\n    }\n\n});\n","import draw2d from '../packages'\n\n/**\n * @class\n *\n * Serialize the canvas to an external format. This is only a template/interface class.\n * Inherit classes must implement the export format.\n *\n * @author Andreas Herz\n */\ndraw2d.io.Writer = Class.extend(\n  /** @lends draw2d.io.Writer */\n\n  {\n    init: function(){\n    },\n\n    /**\n     * \n     * Export the content to the implemented data format. Inherit class implements\n     * content specific writer.\n     * <br>\n     * <br>\n     *\n     * Method signature has been changed from version 2.10.1 to version 3.0.0.<br>\n     * The parameter <b>resultCallback</b> is required and new. The method calls\n     * the callback instead of return the result.\n     *\n     * @template\n     * @since 2.10.1\n     * @param {draw2d.Canvas} canvas\n     * @param {Function} resultCallback the method to call on success. The first argument is the result object, the second the base64 content of a corresponding file\n     * @returns {Object}\n     *\n     */\n    marshal: function(canvas, resultCallback){\n        // I change the API signature from version 2.10.1 to 3.0.0. Throw an exception\n        // if any application not care about this changes.\n        if(typeof resultCallback !== \"function\"){\n            throw \"Writer.marshal method signature has been change from version 2.10.1 to version 3.0.0. Please consult the API documentation about this issue.\";\n        }\n\n\n        resultCallback(\"\", \"\");\n    },\n\n    /**\n     * \n     * utility method to format a given XML string.\n     *\n     * @param xml\n     * @returns {String}\n     */\n    formatXml: function(xml) {\n        let formatted = '';\n        let reg = new RegExp(\"(>)(<)(\\/*)\",\"g\");\n        xml = xml.replace(reg, '$1\\r\\n$2$3');\n        let pad = 0;\n        xml.split('\\r\\n').forEach(function(node) {\n            let indent = 0;\n            if (node.match( new RegExp(\".+<\\/\\w[^>]*>$\") )) {\n                indent = 0;\n            } else if (node.match( new RegExp(\"^<\\/\\w\") )) {\n                if (pad != 0) {\n                    pad -= 1;\n                }\n            } else if (node.match( new RegExp(\"^<\\w[^>]*[^\\/]>.*$\") )) {\n                indent = 1;\n            } else {\n                indent = 0;\n            }\n\n            var padding = '';\n            for (var i = 0; i < pad; i++) {\n                padding += '  ';\n            }\n\n            formatted += padding + node + '\\r\\n';\n            pad += indent;\n        });\n\n        return formatted;\n    }\n});\n","import draw2d from '../../packages'\n\n/**\n * @class\n *\n * Read a JSON data and import them into the canvas. The JSON must be generated with the\n * {@link draw2d.io.json.Writer}.\n *\n * @example\n *\n *     // Load a standard draw2d JSON object into the canvas\n *     //\n *     let jsonDocument =\n *         [\n *          {\n *             \"type\": \"draw2d.shape.basic.Oval\",\n *             \"id\": \"5b4c74 b0-96d1-1aa3-7eca-bbeaed5fffd7\",\n *             \"x\": 237,\n *             \"y\": 236,\n *             \"width\": 93,\n *             \"height\": 38\n *           },\n *           {\n *             \"type\": \"draw2d.shape.basic.Rectangle\",\n *             \"id\": \"354fa3b9-a834-0221-2009-abc2d6bd852a\",\n *             \"x\": 225,\n *             \"y\": 97,\n *             \"width\": 201,\n *             \"height\": 82,\n *             \"radius\": 2\n *           }\n *         ];\n *     // unmarshal the JSON document into the canvas\n *     // (load)\n *     let reader = new draw2d.io.json.Reader();\n *     reader.unmarshal(canvas, jsonDocument);\n *\n *\n * @author Andreas Herz\n * @extends draw2d.io.Reader\n */\ndraw2d.io.json.Reader = draw2d.io.Reader.extend(\n  /** @lends draw2d.io.json.Reader.prototype */\n  {\n    NAME: \"draw2d.io.json.Reader\",\n\n    init: function () {\n      this._super();\n    },\n\n    /**\n     *\n     *\n     * Restore the canvas from a given JSON object.\n     *\n     * @param {draw2d.Canvas} canvas the canvas to restore\n     * @param {Object|String} json the json object to load.\n     */\n    unmarshal: function (canvas, json) {\n      let result = new draw2d.util.ArrayList();\n\n      if (typeof json === \"string\") {\n        json = JSON.parse(json);\n      }\n\n      let node = null;\n      json.forEach((element) => {\n        try {\n          let o = this.createFigureFromElement(element) || this.createFigureFromType(element.type);\n          let source = null;\n          let target = null;\n          for (let i in element) {\n            let val = element[i];\n            if (i === \"source\") {\n              node = canvas.getFigure(val.node);\n              if (node === null) {\n                throw \"Source figure with id '\" + val.node + \"' not found\";\n              }\n              source = node.getPort(val.port);\n              if (source === null) {\n                throw \"Unable to find source port '\" + val.port + \"' at figure '\" + val.node + \"' to unmarschal '\" + element.type + \"'\";\n              }\n            } else if (i === \"target\") {\n              node = canvas.getFigure(val.node);\n              if (node === null) {\n                throw \"Target figure with id '\" + val.node + \"' not found\";\n              }\n              target = node.getPort(val.port);\n              if (target === null) {\n                throw \"Unable to find target port '\" + val.port + \"' at figure '\" + val.node + \"' to unmarschal '\" + element.type + \"'\";\n              }\n            }\n          }\n          if (source !== null && target !== null) {\n            // don't change the order or the source/target set.\n            // TARGET must always be the second one because some applications needs the \"source\"\n            // port in the \"connect\" event of the target.\n            o.setSource(source)\n            o.setTarget(target)\n          }\n          o.setPersistentAttributes(element)\n          canvas.add(o)\n          result.add(o)\n        } catch (exc) {\n          debug.error(element, \"Unable to instantiate figure type '\" + element.type + \"' with id '\" + element.id + \"' during unmarshal by \" + this.NAME + \". Skipping figure..\");\n          debug.error(exc)\n          debug.warn(element)\n        }\n      });\n\n      // restore group assignment\n      //\n      json.forEach(element => {\n        if (typeof element.composite !== \"undefined\") {\n          let figure = canvas.getFigure(element.id);\n          if (figure === null) {\n            figure = canvas.getLine(element.id);\n          }\n          let group = canvas.getFigure(element.composite);\n          group.assignFigure(figure);\n        }\n      });\n\n      // recalculate all crossings and repaint the connections with\n      // possible crossing decoration\n      canvas.calculateConnectionIntersection();\n      canvas.getLines().each((i, line) => {\n        line.svgPathString = null;\n        line.repaint();\n      });\n      canvas.linesToRepaintAfterDragDrop = canvas.getLines().clone();\n\n      canvas.showDecoration();\n\n      return result;\n    },\n\n    /**\n     *\n     * Factory method to create an instance of the given element type.\n     *\n     * @param {String} type\n     * @returns {draw2d.Figure}\n     */\n    createFigureFromType: function (type) {\n      return eval(`new ${type}()`);\n    },\n\n    /**\n     *\n     * Factory method to create an instance of the given element.\n     *\n     * @param {Object} element\n     * @returns {draw2d.Figure}\n     */\n    createFigureFromElement: function createFigureFromElement(element) {\n      return null;\n    }\n  });\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Serialize the canvas document into a JSON object which can be read from the corresponding\n * {@link draw2d.io.json.Reader}.\n *\n *     // Create a JSON writer and convert it into a JSON-String representation.\n *     //\n *     var writer = new draw2d.io.json.Writer();\n *     writer.marshal(canvas, function(json){\n *        // convert the json object into string representation\n *        var jsonTxt = JSON.stringify(json,null,2);\n *     \n *        // insert the json string into a DIV for preview or post\n *        // it via ajax to the server....\n *        $(\"#json\").text(jsonTxt);\n *     \n *     });\n *\n *\n *\n * @author Andreas Herz\n * @extends draw2d.io.Writer\n */\n\ndraw2d.io.json.Writer = draw2d.io.Writer.extend(\n  /** @lends draw2d.io.json.Writer */\n  {\n\n    init: function () {\n      this._super();\n    },\n\n    /**\n     *\n     * Export the content to the implemented data format. Inherit class implements\n     * content specific writer.\n     * <br>\n     * <br>\n     *\n     * Method signature has been changed from version 2.10.1 to version 3.0.0.<br>\n     * The parameter <b>resultCallback</b> is required and new. The method calls\n     * the callback instead of return the result.\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Function} resultCallback the method to call on success. The first argument is the result object, the second the base64 representation of the file content\n     * @param {Object} resultCallback.json  the canvas document as JSON object\n     * @param {String} resultCallback.base64  the canvas document as base encoded JSON\n     */\n    marshal: function (canvas, resultCallback) {\n      // I change the API signature from version 2.10.1 to 3.0.0. Throw an exception\n      // if any application not care about this changes.\n      if (typeof resultCallback !== \"function\") {\n        throw \"Writer.marshal method signature has been change from version 2.10.1 to version 3.0.0. Please consult the API documentation about this issue.\";\n      }\n\n      var result = [];\n\n      canvas.getFigures().each(function (i, figure) {\n        result.push(figure.getPersistentAttributes());\n      });\n\n      canvas.getLines().each(function (i, element) {\n        result.push(element.getPersistentAttributes());\n      });\n\n      var base64Content = draw2d.util.Base64.encode(JSON.stringify(result, null, 2));\n\n      resultCallback(result, base64Content);\n    }\n  });\n","import draw2d from '../../packages'\nconst canvg = require('canvg-browser')\n\n/**\n * @class\n *\n * Converts the canvas document into a PNG Image.\n *\n * @example\n *    // example how to create a PNG image and set an\n *    // image src attribute.\n *    //\n *    let writer = new draw2d.io.png.Writer();\n *    writer.marshal(canvas, function(png){\n *        $(\"#preview\").attr(\"src\",png);\n *    });\n *\n * @author Andreas Herz\n * @extends draw2d.io.Writer\n */\ndraw2d.io.png.Writer = draw2d.io.Writer.extend(\n  /** @lends draw2d.io.png.Writer */\n  {\n\n    init: function () {\n      this._super()\n    },\n\n    /**\n     *\n     * Export the content to a PNG image. The result can be set as <b>src=\"....\"</b> because\n     * the result is encoded as data source url <b>data:image/png;base64....</b>\n     * <br>\n     * <br>\n     *\n     * Method signature has been changed from version 2.10.1 to version 3.0.0.<br>\n     * The parameter <b>resultCallback</b> is required and new. The method calls\n     * the callback instead of return the result.\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Function} resultCallback the method to call on success. The first argument is the dataUrl, the second is the base64 formated png image\n     * @param {String} resultCallback.img  The image as data source url <b>data:image/png;base64....</b>\n     * @param {String} resultCallback.base64  the image encoded in base64\n     * @param {draw2d.geo.Rectangle} cropBoundingBox optional cropping/clipping bounding box\n     */\n    marshal: function (canvas, resultCallback, cropBoundingBox) {\n      // I change the API signature from version 2.10.1 to 3.0.0. Throw an exception\n      // if any application not care about this changes.\n      if (typeof resultCallback !== \"function\") {\n        throw \"Writer.marshal method signature has been change from version 2.10.1 to version 3.0.0. Please consult the API documentation about this issue.\";\n      }\n\n      let svg = \"\"\n      let canvasState = false\n\n      // the png.Writer can create Snapshots of a single figure too.\n      // Didn't work in IE <10\n      // @status beta\n      // @since 5.5.0\n      if (canvas instanceof draw2d.Figure) {\n        let figure = canvas\n        let origPos = figure.getPosition()\n        figure.setPosition(1, 1)\n        svg = \"<svg xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" >\"\n          + figure.shape.node.outerHTML\n          + \"</svg>\";\n        figure.setPosition(origPos);\n        figure.initialWidth = figure.getWidth() + 2\n        figure.initialHeight = figure.getHeight() + 2\n      }\n      // create a snapshot of a complete canvas\n      //\n      else {\n        canvasState = {\n          zoom: canvas.getZoom(),\n          scrollLeft: canvas.getScrollLeft(),\n          scrollTop: canvas.getScrollTop(),\n        }\n        canvas.setZoom(1.0)\n        canvas.hideDecoration()\n        svg = (new XMLSerializer()).serializeToString(canvas.getHtmlContainer().find(\"svg\")[0]);\n      }\n\n      let canvasDomNode = $('<canvas id=\"canvas_png_export_for_draw2d\"></canvas>')\n      $('body').append(canvasDomNode)\n      let fullSizeCanvas = $(\"#canvas_png_export_for_draw2d\")[0]\n      fullSizeCanvas.width = canvas.initialWidth\n      fullSizeCanvas.height = canvas.initialHeight\n\n      canvg(\"canvas_png_export_for_draw2d\", svg, {\n        ignoreMouse: true,\n        ignoreAnimation: true,\n        renderCallback: function () {\n          try {\n            if (canvas instanceof draw2d.Canvas) {\n              if(canvasState) {\n                canvas.setZoom(canvasState.zoom)\n                canvas.setScrollLeft(canvasState.scrollLeft)\n                canvas.setScrollTop(canvasState.scrollTop)\n              }\n              canvas.showDecoration();\n            }\n\n            if (typeof cropBoundingBox !== \"undefined\") {\n              let sourceX = cropBoundingBox.x\n              let sourceY = cropBoundingBox.y\n              let sourceWidth = cropBoundingBox.w\n              let sourceHeight = cropBoundingBox.h\n\n              let croppedCanvas = document.createElement('canvas')\n              croppedCanvas.width = sourceWidth\n              croppedCanvas.height = sourceHeight\n\n              croppedCanvas.getContext(\"2d\").drawImage(fullSizeCanvas, sourceX, sourceY, sourceWidth, sourceHeight, 0, 0, sourceWidth, sourceHeight);\n\n              let dataUrl = croppedCanvas.toDataURL(\"image/png\")\n              let base64Image = dataUrl.replace(\"data:image/png;base64,\", \"\")\n              resultCallback(dataUrl, base64Image)\n            } else {\n              let img = fullSizeCanvas.toDataURL(\"image/png\")\n              resultCallback(img, img.replace(\"data:image/png;base64,\", \"\"))\n            }\n          } finally {\n            canvasDomNode.remove()\n          }\n        }\n      })\n    }\n  })\n","import draw2d from '../../packages'\n\n/**\n * @class\n *\n * Serialize the canvas document into a SVG document.\n *\n *     // Create a SVG writer and convert the canvas into a SVG document.\n *     //\n *     var writer = new draw2d.io.svg.Writer();\n *     writer.marshal(canvas, function(svg){\n *         // insert the svg string into a DIV for preview or post\n *         // it via ajax to the server....\n *         $(\"#svg\").text(svg);\n *     });\n *\n *\n *\n * @author Andreas Herz\n * @extends draw2d.io.Writer\n */\ndraw2d.io.svg.Writer = draw2d.io.Writer.extend(\n  /** @lends draw2d.io.svg.Writer */\n  {\n    init: function () {\n      this._super()\n    },\n\n    /**\n     *\n     * Export the content of the canvas into SVG. The SVG document can be loaded with Inkscape or any other SVG Editor.\n     * <br>\n     * <br>\n     *\n     * Method signature has been changed from version 2.10.1 to version 3.0.0.<br>\n     * The parameter <b>resultCallback</b> is required and new. The method calls\n     * the callback instead of return the result.\n     *\n     *\n     * @param {draw2d.Canvas} canvas the canvas to marshal\n     * @param {Function} callback the method to call on success. The first argument is the SVG document\n     * @param {String} callback.svg  the SVG document\n     * @param {String} callback.base64  the SVG document encoded in base64\n     */\n    marshal: function (canvas, callback) {\n      // I change the API signature from version 2.10.1 to 3.0.0. Throw an exception\n      // if any application not care about this changes.\n      if (typeof callback !== \"function\") {\n        throw \"Writer.marshal method signature has been change from version 2.10.1 to version 3.0.0. Please consult the API documentation about this issue.\";\n      }\n\n      let s = canvas.getPrimarySelection()\n      canvas.setCurrentSelection(null)\n      let svg = canvas.getHtmlContainer().html()\n        .replace(/>\\s+/g, \">\")\n        .replace(/\\s+</g, \"<\")\n      svg = this.formatXml(svg)\n      svg = svg.replace(/<desc>.*<\\/desc>/g, \"<desc>Create with draw2d JS graph library and RaphaelJS</desc>\")\n\n      canvas.setCurrentSelection(s)\n\n      let base64Content = draw2d.util.Base64.encode(svg)\n      callback(svg, base64Content)\n    }\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * The CenterEdgeConnectionAnchor's location is found by calculating the intersection of a\n * line drawn from the center point of its owner's box (the parent of the\n * connection port) to a reference point on that box. A Connection using the\n * ChopBoxAnchor will be oriented such that they point to their port owner's\n * center.\n *\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.layout.anchor.ConnectionAnchor\n */\n\ndraw2d.layout.anchor.CenterEdgeConnectionAnchor = draw2d.layout.anchor.ConnectionAnchor.extend(\n  /** @lends draw2d.layout.anchor.CenterEdgeConnectionAnchor.prototype */\n  {\n\n  NAME: \"draw2d.layout.anchor.CenterEdgeConnectionAnchor\",\n\n  /**\n   *\n   * @param {draw2d.Figure} [owner] the figure to use for the anchor calculation\n   */\n  init: function (owner) {\n    this._super(owner)\n  },\n\n  /**\n   * \n   *\n   * Returns the location where the Connection should be anchored in\n   * absolute coordinates. The anchor may use the given reference\n   * Point to calculate this location.\n   *\n   * @param {draw2d.geo.Point} ref The reference Point in absolute coordinates\n   * @param {draw2d.Connection} [inquiringConnection] the connection who ask for the location.\n   *\n   * @returns {draw2d.geo.Point} The anchor's location\n   */\n  getLocation: function (ref, inquiringConnection) {\n    let r = this.getOwner().getParent().getBoundingBox()\n\n    let dir = r.getDirection(ref)\n    let center = r.getCenter()\n\n    switch (dir) {\n      case 0:\n        center.y = r.y\n        break\n      case 1:\n        center.x = r.x + r.w\n        break\n      case 2:\n        center.y = r.y + r.h\n        break\n      case 3:\n        center.x = r.x\n    }\n\n    return center\n  },\n\n  /**\n   * Returns the bounds of this Anchor's owner. Subclasses can\n   * override this method to adjust the box. Maybe you return the box\n   * of the port parent (the parent figure)\n   *\n   * @returns {draw2d.geo.Rectangle} The bounds of this Anchor's owner\n   */\n  getBox: function () {\n    return this.getOwner().getParent().getBoundingBox()\n  },\n\n  /**\n   * \n   *\n   * Returns the bounds of this Anchor's owner. Subclasses can\n   * override this method to adjust the box. Maybe you return the box\n   * of the port parent (the parent figure)\n   *\n   * @param {draw2d.Connection} [inquiringConnection] the connection who ask for the location.\n   *\n   * @returns {draw2d.geo.Point} The bounds of this Anchor's owner\n   */\n  getReferencePoint: function (inquiringConnection) {\n    return this.getBox().getCenter()\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * The ChopboxAnchor's location is found by calculating the intersection of a\n * line drawn from the center point of its owner's box (the parent of the\n * connection port) to a reference point on that box. A Connection using the\n * ChopBoxAnchor will be oriented such that they point to their port owner's\n * center.\n *\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.layout.anchor.ConnectionAnchor\n */\n\ndraw2d.layout.anchor.ChopboxConnectionAnchor = draw2d.layout.anchor.ConnectionAnchor.extend(\n  /** @lends draw2d.layout.anchor.ChopboxConnectionAnchor.prototype */\n  {\n\n  NAME: \"draw2d.layout.anchor.ChopboxConnectionAnchor\",\n\n  /**\n   *\n   * @param {draw2d.Figure} owner the figure to use for the anchor calculation\n   */\n  init: function (owner) {\n    this._super(owner)\n  },\n\n  /**\n   *\n   *\n   * Returns the location where the Connection should be anchored in\n   * absolute coordinates. The anchor may use the given reference\n   * Point to calculate this location.\n   *\n   * @param {draw2d.geo.Point} reference The reference Point in absolute coordinates\n   * @param {draw2d.Connection} [inquiringConnection] the connection who ask for the location.\n   *\n   * @returns {draw2d.geo.Point} The anchor's location\n   */\n  getLocation: function (reference, inquiringConnection) {\n    let r = new draw2d.geo.Rectangle(0, 0)\n    r.setBounds(this.getBox())\n    r.translate(-1, -1)\n    r.resize(1, 1)\n\n    let center = r.getCenter()\n\n    if (r.isEmpty() || (reference.x === center.x && reference.y === center.y)) {\n      return center // This avoids divide-by-zero\n    }\n\n    let dx = reference.x - center.x\n    let dy = reference.y - center.y\n\n    // r.width, r.height, dx, and dy are guaranteed to be non-zero.\n    let scale = 0.5 / Math.max(Math.abs(dx) / r.w, Math.abs(dy) / r.h)\n\n    dx *= scale\n    dy *= scale\n    center.translate(dx, dy)\n\n    return center\n  },\n\n  /**\n   * Returns the bounds of this Anchor's owner. Subclasses can\n   * override this method to adjust the box. Maybe you return the box\n   * of the port parent (the parent figure)\n   *\n   * @returns {draw2d.geo.Rectangle} The bounds of this Anchor's owner\n   */\n  getBox: function () {\n    return this.getOwner().getParent().getBoundingBox()\n  },\n\n  /**\n   *\n   *\n   * Returns the reference point for this anchor in absolute coordinates. This might be used\n   * by another anchor to determine its own location.\n   *\n   * @param {draw2d.Connection} [inquiringConnection] the connection who ask for the location.\n   * @returns {draw2d.geo.Point} The bounds of this Anchor's owner\n   */\n  getReferencePoint: function (inquiringConnection) {\n    return this.getBox().getCenter()\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *  An object to which a {@link draw2d.Connection} will be anchored.\n *\n * @inheritable\n * @author Andreas Herz\n */\n\ndraw2d.layout.anchor.ConnectionAnchor = Class.extend(\n  /** @lends draw2d.layout.anchor.ConnectionAnchor.prototype */\n  {\n\n  NAME: \"draw2d.layout.anchor.ConnectionAnchor\",\n\n  /**\n   *\n   * @param {draw2d.Figure} owner the figure to use for the anchor calculation\n   */\n  init: function (owner) {\n    this.owner = owner\n  },\n\n  /**\n   * \n   * Returns the location where the Connection should be anchored in absolute coordinates.\n   * The anchor may use the given reference Point to calculate this location.\n   *\n   * @param {draw2d.geo.Point} reference the opposite reference point\n   * @param {draw2d.Connection} inquiringConnection the connection who ask for the location.\n   *\n   * @returns {draw2d.geo.Point}\n   */\n  getLocation: function (reference, inquiringConnection) {\n    // return the center of the owner/port.\n    return this.getReferencePoint(inquiringConnection)\n  },\n\n  /**\n   * \n   * Returns the Figure that contains this ConnectionAnchor.\n   *\n   * @returns {draw2d.Figure} The Figure that contains this ConnectionAnchor\n   */\n  getOwner: function () {\n    return this.owner\n  },\n\n  /**\n   * \n   * Set the owner of the Anchor.\n   *\n   * @param {draw2d.Figure} owner the new owner of the anchor locator\n   */\n  setOwner: function (owner) {\n    if (typeof owner === \"undefined\") {\n      throw \"Missing parameter for 'owner' in ConnectionAnchor.setOwner\"\n    }\n    this.owner = owner\n  },\n\n  /**\n   * \n   * Returns the bounds of this Anchor's owner.  Subclasses can override this method\n   * to adjust the box. Maybe you return the box of the port parent (the parent figure)\n   *\n   * @returns {draw2d.geo.Rectangle} The bounds of this Anchor's owner\n   */\n  getBox: function () {\n    return this.getOwner().getAbsoluteBounds()\n  },\n\n  /**\n   * \n   * Returns the reference point for this anchor in absolute coordinates. This might be used\n   * by another anchor to determine its own location.\n   *\n   * @param {draw2d.Connection} [inquiringConnection] the connection who ask for the location.\n   *\n   * @returns {draw2d.geo.Point} The reference Point\n   */\n  getReferencePoint: function (inquiringConnection) {\n    return this.getOwner().getAbsolutePosition()\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * The FanConnectionAnchor's location is found by calculating the intersection of a\n * line drawn from the center point of its owner's box (the parent of the\n * connection port) to a reference point on that box.\n * Additional the anchor resolves conflicts by spread the anchor if more than one\n * connection has the same reference point. <br>\n * In a case of a DirectRouter parallel connections are the result.\n *\n *\n * @inheritable\n * @author Andreas Herz\n * @since 4.6.0\n * @extends draw2d.layout.anchor.ConnectionAnchor\n */\n\ndraw2d.layout.anchor.FanConnectionAnchor = draw2d.layout.anchor.ConnectionAnchor.extend(\n  /** @lends draw2d.layout.anchor.FanConnectionAnchor.prototype */\n  {\n\n  NAME: \"draw2d.layout.anchor.FanConnectionAnchor\",\n\n  /**\n   *\n   * @param {draw2d.Figure} owner the figure to use for the anchor calculation\n   * @param {Number} [separation] the separation or fan distance between the concurrent/conflicting anchors\n   */\n  init: function (owner, separation) {\n    this._super(owner)\n\n    if (separation) {\n      this.separation = parseInt(separation)\n    }\n    else {\n      this.separation = 10\n    }\n  },\n\n  /**\n   * \n   *\n   * Returns the location where the Connection should be anchored in\n   * absolute coordinates. The anchor may use the given reference\n   * Point to calculate this location.\n   *\n   * @param {draw2d.geo.Point} reference The reference Point in absolute coordinates\n   * @param {draw2d.Connection} inquiringConnection the connection who ask for the location.\n   *\n   * @returns {draw2d.geo.Point} The anchor's location\n   */\n  getLocation: function (reference, inquiringConnection) {\n\n    let r = new draw2d.geo.Rectangle(0, 0)\n    r.setBounds(this.getBox())\n    r.translate(-1, -1)\n    r.resize(1, 1)\n\n    let center = r.getCenter()\n\n    if (r.isEmpty() || (reference.x === center.x && reference.y === center.y)) {\n      return center // This avoids divide-by-zero\n    }\n\n    // translate the center if required\n    //\n    let s = inquiringConnection.getSource()\n    let t = inquiringConnection.getTarget()\n    let lines = this.getOwner().getConnections().clone()\n    lines.grep(function (other) {\n      return (other.getTarget() === t && other.getSource() === s) || (other.getTarget() === s && other.getSource() === t)\n    })\n    let index = lines.indexOf(inquiringConnection) + 1\n    let position = center.getPosition(reference)\n    let ray\n    if (position === draw2d.geo.PositionConstants.SOUTH || position === draw2d.geo.PositionConstants.EAST) {\n      ray = new draw2d.geo.Point(reference.x - center.x, reference.y - center.y)\n    }\n    else {\n      ray = new draw2d.geo.Point(center.x - reference.x, center.y - reference.y)\n    }\n    let length = Math.sqrt(ray.x * ray.x + ray.y * ray.y)\n    if (index <= 2) {\n      length *= 1.5\n    }\n    let xSeparation = this.separation * ray.x / length\n    let ySeparation = this.separation * ray.y / length\n    if (index % 2 === 0) {\n      center = new draw2d.geo.Point(center.x + (index / 2) * (-1 * ySeparation), center.y + (index / 2) * xSeparation)\n    }\n    else {\n      center = new draw2d.geo.Point(center.x + (index / 2) * ySeparation, center.y + (index / 2) * (-1 * xSeparation))\n    }\n\n    let intersections = this.getBox().intersectionWithLine(center, reference)\n    // perfect - one intersection mean that the shifted center point is inside the bounding box and has only one intersection with it.\n    //\n    switch (intersections.getSize()) {\n      case 0:\n        // calculate the edge of the bounding box which is nearest to the reference point\n        //\n        let v = this.getBox().getVertices()\n        let first = v.first()\n        first.distance = reference.distance(first)\n        return v.asArray().reduce(function (previous, current) {\n          current.distance = reference.distance(current)\n          return current.distance < previous.distance ? current : previous\n        })\n      case 1:\n        return intersections.get(0)\n      case 2:\n        // get the nearest of these points\n        let p0 = intersections.get(0)\n        let p1 = intersections.get(1)\n        let p0diff = reference.distance(p0)\n        let p1diff = reference.distance(p1)\n        if (p0diff < p1diff) {\n          return p0\n        }\n        return p1\n    }\n\n    // we have 0 or 2 intersections with the bounding box. This means the shifted\n    // calculate the intersection if the new \"center\" with the bounding box of the\n    // shape (if any exists)\n\n  },\n\n  /**\n   * Returns the bounds of this Anchor's owner. Subclasses can\n   * override this method to adjust the box. Maybe you return the box\n   * of the port parent (the parent figure)\n   *\n   * @returns {draw2d.geo.Rectangle} The bounds of this Anchor's owner\n   */\n  getBox: function () {\n    return this.getOwner().getParent().getBoundingBox()\n  },\n\n  /**\n   * \n   *\n   * Returns the reference point for this anchor in absolute coordinates. This might be used\n   * by another anchor to determine its own location.\n   *\n   * @param {draw2d.Connection} inquiringConnection the connection who ask for the location.\n   *\n   * @returns {draw2d.geo.Point} The bounds of this Anchor's owner\n   */\n  getReferencePoint: function (inquiringConnection) {\n    return this.getBox().getCenter()\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * The ChopboxAnchor's location is found by calculating the intersection of a\n * line drawn from the center point of its owner's box (the parent of the\n * connection port) to a reference point on that box. A Connection using the\n * ChopBoxAnchor will be oriented such that they point to their port owner's\n * center.\n *\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.layout.anchor.ConnectionAnchor\n */\n\ndraw2d.layout.anchor.ShortesPathConnectionAnchor = draw2d.layout.anchor.ConnectionAnchor.extend(\n  /** @lends draw2d.layout.anchor.ShortesPathConnectionAnchor.prototype */\n  {\n\n  NAME: \"draw2d.layout.anchor.ShortesPathConnectionAnchor\",\n\n  /**\n   *\n   * @param {draw2d.Figure} [owner] the figure to use for the anchor calculation\n   */\n  init: function (owner) {\n    this._super(owner)\n  },\n\n  /**\n   * \n   *\n   * Returns the location where the Connection should be anchored in\n   * absolute coordinates. The anchor may use the given reference\n   * Point to calculate this location.\n   *\n   * @param {draw2d.geo.Point} ref The reference Point in absolute coordinates\n   * @param {draw2d.Connection} inquiringConnection the connection who ask for the location.\n   *\n   * @returns {draw2d.geo.Point} The anchor's location\n   */\n  getLocation: function (ref, inquiringConnection) {\n    let r = this.getOwner().getParent().getBoundingBox()\n    let center = r.getCenter()\n\n    // check if we can calculate with a circle/line intersection\n    //\n    if (this.getOwner().getParent() instanceof draw2d.shape.basic.Oval) {\n      let result = this.getOwner().getParent().intersectionWithLine(ref, center)\n      if (result.getSize() === 1) {\n        return result.get(0)\n      }\n    }\n\n    /*    0 | 1 | 2\n     *    __|___|__\n     *    7 | 8 | 3\n     *    __|___|__\n     *    6 | 5 | 4\n     */\n    let octant = r.determineOctant(new draw2d.geo.Rectangle(ref.x, ref.y, 2, 2))\n\n    switch (octant) {\n      case 0:\n        return r.getTopLeft()\n      case 1:\n        return new draw2d.geo.Point(ref.x, r.getTop())\n      case 2:\n        return r.getTopRight()\n      case 3:\n        return new draw2d.geo.Point(r.getRight(), ref.y)\n      case 4:\n        return r.getBottomRight()\n      case 5:\n        return new draw2d.geo.Point(ref.x, r.getBottom())\n      case 6:\n        return r.getBottomLeft()\n      case 7:\n        return new draw2d.geo.Point(r.getLeft(), ref.y)\n    }\n\n    return r.getTopLeft()\n  },\n\n  /**\n   * Returns the bounds of this Anchor's owner. Subclasses can\n   * override this method to adjust the box. Maybe you return the box\n   * of the port parent (the parent figure)\n   *\n   * @returns {draw2d.geo.Rectangle} The bounds of this Anchor's owner\n   */\n  getBox: function () {\n    return this.getOwner().getParent().getBoundingBox()\n  },\n\n  /**\n   * \n   *\n   * Returns the bounds of this Anchor's owner. Subclasses can\n   * override this method to adjust the box. Maybe you return the box\n   * of the port parent (the parent figure)\n   *\n   * @param {draw2d.Connection} inquiringConnection the connection who ask for the location.\n   *\n   * @returns {draw2d.geo.Point} The bounds of this Anchor's owner\n   */\n  getReferencePoint: function (inquiringConnection) {\n    return this.getBox().getCenter()\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Provides a {@link draw2d.Connection} with an orthogonal route between the Connection's source\n * and target anchors.\n * <br>\n * Additional a <b>bridge</b> is added to each connection which didn't have a common source or target\n * port.<br>\n * A <b>dot</b> is added at the crossing if the two connections have a common spurce or target port.\n *\n * <br>\n *\n * @example\n *\n *    let createConnection=function(){\n *       let con = new draw2d.Connection();\n *       con.setRouter(new draw2d.layout.connection.CircuitConnectionRouter());\n *       return con;\n *    };\n *\n *    // install a custom connection create policy\n *    //\n *    canvas.installEditPolicy(  new draw2d.policy.connection.DragConnectionCreatePolicy({\n *           createConnection: createConnection\n *    }));\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let f1 = new draw2d.shape.analog.OpAmp({x:10, y:10});\n *    let f2 = new draw2d.shape.analog.ResistorVertical({angle:90, height:20, x:300, y:150});\n *    let f3 = new draw2d.shape.analog.ResistorVertical({x:250, y:70});\n *    let f4 = new draw2d.shape.analog.ResistorVertical({x:10, y:90});\n *\n *    // ...add it to the canvas\n *    //\n *    canvas.add( f1);\n *    canvas.add( f2);\n *    canvas.add( f3);\n *    canvas.add( f4);\n *\n *    // first Connection\n *    //\n *    let c = createConnection();\n *    c.setSource(f1.getOutputPort(0));\n *    c.setTarget(f2.getHybridPort(0));\n *    canvas.add(c);\n *\n *    // second Connection between the other resistors\n *    //\n *    c = createConnection();\n *    c.setSource(f3.getHybridPort(1));\n *    c.setTarget(f4.getHybridPort(0));\n *    canvas.add(c);\n *\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends  draw2d.layout.connection.ManhattanConnectionRouter\n */\n\ndraw2d.layout.connection.CircuitConnectionRouter = draw2d.layout.connection.ManhattanConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.CircuitConnectionRouter.prototype */\n  {\n\n  NAME: \"draw2d.layout.connection.CircuitConnectionRouter\",\n\n  /**\n   * Creates a new Router object.\n   *\n   */\n  init: function () {\n    this._super()\n    this.setBridgeRadius(4)\n    this.setVertexRadius(2)\n\n    // experimental\n    this.abortRoutingOnFirstVertexNode = false\n  },\n\n\n  /**\n   * \n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.Connection} connection The assigned connection\n   * @template\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n    connection.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy())\n  },\n\n  /**\n   * \n   * Callback method if the router has been removed from the connection. In the case of the CircuitRouter\n   * all vertex nodes will be removed from the canvas.\n   *\n   * @param {draw2d.Connection} connection The related connection\n   * @template\n   * @since 2.7.2\n   */\n  onUninstall: function (connection) {\n    if (typeof connection.vertexNodes !== \"undefined\" && connection.vertexNodes !== null) {\n      connection.vertexNodes.remove()\n      connection.vertexNodes = null\n    }\n  },\n\n  /**\n   * \n   * Set the radius of the vertex circle.\n   *\n   * @param {Number} radius\n   */\n  setVertexRadius: function (radius) {\n    this.vertexRadius = radius\n\n    return this\n  },\n  /** deprecated\n   * @private\n   * **/\n  setJunctionRadius: function (radius) {\n    this.vertexRadius = radius\n  },\n\n  /**\n   * \n   * Set the radius or span of the bridge. A bridge will be drawn if two connections are crossing and didn't have any\n   * common port.\n   *\n   * @param {Number} radius\n   */\n  setBridgeRadius: function (radius) {\n    this.bridgeRadius = radius\n    this.bridge_LR = [\" r\", 0.5, -0.5, radius - (radius / 2), -(radius - radius / 4), radius, -radius, radius + (radius / 2), -(radius - radius / 4), radius * 2, \"0 \"].join(\" \")\n    this.bridge_RL = [\" r\", -0.5, -0.5, -(radius - (radius / 2)), -(radius - radius / 4), -radius, -radius, -(radius + (radius / 2)), -(radius - radius / 4), -radius * 2, \"0 \"].join(\" \")\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  route: function (conn, routingHints) {\n    let fromPt = conn.getStartPoint()\n    let fromDir = conn.getSource().getConnectionDirection(conn.getTarget())\n\n    let toPt = conn.getEndPoint()\n    let toDir = conn.getTarget().getConnectionDirection(conn.getSource())\n\n    // calculate the lines between the two points with the standard ManhattanRouter.\n    //\n    this._route(conn, toPt, toDir, fromPt, fromDir)\n\n    // get the intersections to the other connections\n    //\n    let intersectionsASC = conn.getCanvas().getIntersection(conn).sort(\"x\")\n    let intersectionsDESC = intersectionsASC.clone().reverse()\n\n    let intersectionForCalc = intersectionsASC\n\n    // add a ArrayList of all added vertex nodes to the connection\n    //\n    if (typeof conn.vertexNodes !== \"undefined\" && conn.vertexNodes !== null) {\n      conn.vertexNodes.remove()\n    }\n    conn.vertexNodes = conn.canvas.paper.set()\n\n    // ATTENTION: we cast all x/y coordinates to integer and add 0.5 to avoid subpixel rendering of\n    //            the connection. The 1px or 2px lines look much clearer than before.\n    //\n    let ps = conn.getVertices()\n    let p = ps.get(0)\n    let path = [\"M\", (p.x | 0) + 0.5, \" \", (p.y | 0) + 0.5]\n\n    let oldP = p\n    let bridgeWidth = null\n    let bridgeCode = null\n\n    let lastVertexNode = null\n\n    for (let i = 1; i < ps.getSize(); i++) {\n      p = ps.get(i)\n\n      // line goes from right->left.\n      if (oldP.x > p.x) {\n        intersectionForCalc = intersectionsDESC\n        bridgeCode = this.bridge_RL\n        bridgeWidth = -this.bridgeRadius\n      }\n      // line goes from left->right\n      else {\n        intersectionForCalc = intersectionsASC\n        bridgeCode = this.bridge_LR\n        bridgeWidth = this.bridgeRadius\n      }\n\n      // add a bridge or a vertex node depending to the intersection connection\n      //\n      // bridge   => the connections didn't have a common port\n      // vertex => the connections did have a common source or target port\n      //\n      intersectionForCalc.each((ii, interP) => {\n        if (draw2d.shape.basic.Line.hit(1, oldP.x, oldP.y, p.x, p.y, interP.x, interP.y) === true) {\n\n          // It is a vertex node..\n          //\n          if (conn.sharingPorts(interP.other)) {\n            let other = interP.other\n            let otherZ = other.getZOrder()\n            let connZ = conn.getZOrder()\n            if (connZ < otherZ) {\n              let vertexNode = conn.canvas.paper.ellipse(interP.x, interP.y, this.vertexRadius, this.vertexRadius).attr({fill: conn.lineColor.rgba()})\n              conn.vertexNodes.push(vertexNode)\n              // we found a vertex node. In this case an already existing connection did draw the connection.\n              //\n              if (this.abortRoutingOnFirstVertexNode === true) {\n                if (conn.getSource() === other.getSource() || conn.getSource() === other.getTarget()) {\n                  path = [\"M\", (interP.x | 0) + 0.5, \" \", (interP.y | 0) + 0.5]\n                  if (lastVertexNode !== null) {\n                    lastVertexNode.remove()\n                    conn.vertexNodes.exclude(lastVertexNode)\n                  }\n                }\n                lastVertexNode = vertexNode\n              }\n            }\n          }\n          // ..or a bridge. We draw only horizontal bridges. Just a design decision\n          //\n          else if (p.y === interP.y) {\n            path.push(\" L\", ((interP.x - bridgeWidth) | 0) + 0.5, \" \", (interP.y | 0) + 0.5)\n            path.push(bridgeCode)\n          }\n        }\n      })\n\n      path.push(\" L\", (p.x | 0) + 0.5, \" \", (p.y | 0) + 0.5)\n      oldP = p\n    }\n    conn.svgPathString = path.join(\"\")\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Routes a {@link draw2d.Connection}, possibly using a constraint.\n *\n * @author Andreas Herz\n */\n\ndraw2d.layout.connection.ConnectionRouter = Class.extend(\n  /** @lends draw2d.layout.connection.ConnectionRouter.prototype */\n  {\n\n  NAME: \"draw2d.layout.connection.ConnectionRouter\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function () {\n  },\n\n\n  /**\n   *\n   * Routes the Connection.\n   *\n   * @param {draw2d.Connection} connection The Connection to route\n   * @param {Object} [routingHints] some helper attributes for the router\n   * @param {Boolean} [routingHints.startMoved] is true if just the start location has moved\n   * @param {Boolean} [routingHints.endMoved] is true if the destination location has changed\n   * @param {draw2d.util.ArrayList} [routingHints.oldVertices] the vertices before the reroute has been triggered\n   *\n   * @template\n   */\n  route: function (connection, routingHints) {\n    throw \"subclasses must implement the method [ConnectionRouter.route]\"\n  },\n\n  _paint: function (conn) {\n    // calculate the path string for the SVG rendering\n    // Important: to avoid subpixel error rendering we add 0.5 to each coordinate\n    //            With this offset the canvas can paint the line on a \"full pixel\" instead\n    //            of subpixel rendering.\n//    let adjust = val => (val| 0) +0.5\n    let adjust = val => val.toFixed(2)\n\n    let ps = conn.getVertices()\n    let p = ps.get(0)\n    let radius = conn.getRadius()\n    let path = [\"M\", adjust(p.x), \" \", adjust(p.y)]\n    let i = 1\n    let length, inset, p2\n    if (radius > 0) {\n      let lastP = p\n      length = (ps.getSize() - 1)\n      for (; i < length; i++) {\n        p = ps.get(i)\n        inset = draw2d.geo.Util.insetPoint(p, lastP, radius)\n        path.push(\"L\", adjust(inset.x), \",\", adjust(inset.y))\n\n        p2 = ps.get(i + 1)\n        inset = draw2d.geo.Util.insetPoint(p, p2, radius)\n\n        path.push(\"Q\", p.x, \",\", p.y, \" \", adjust(inset.x), \", \", adjust(inset.y))\n        lastP = p\n      }\n      p = ps.get(i)\n      path.push(\"L\", adjust(p.x), \",\", adjust(p.y))\n    }\n    else {\n      length = ps.getSize()\n      for (; i < length; i++) {\n        p = ps.get(i)\n        path.push(\"L\", adjust(p.x), \",\", adjust(p.y))\n      }\n    }\n    conn.svgPathString = path.join(\"\")\n  },\n\n\n  /**\n   *\n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.shape.basic.PolyLine} connection The assigned connection\n   * @template\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n  },\n\n  /**\n   *\n   * Callback method if the router has been removed from the connection.\n   *\n   * @param {draw2d.shape.basic.PolyLine} connection The related connection\n   * @template\n   * @since 2.7.2\n   */\n  onUninstall: function (connection) {\n  },\n\n  /**\n   *\n   * Callback method for the PolyLine or Connection to check if it possible to remove a vertex from\n   * the list. The router can send an veto for this.\n   * Per default it is not possible to remove any vertex from the PolyLine exceptional if any interactive\n   * router is installed.\n   *\n   * @param {Number} index\n   * @since 4.2.3\n   */\n  canRemoveVertexAt: function (index) {\n    return false\n  },\n\n  /**\n   * Callback method for the PolyLine or Connection to verify that a segment is deletable.\n   *\n   * @param {Number} index\n   * @returns {Boolean}\n   * @since 4.2.3\n   */\n  canRemoveSegmentAt: function (index) {\n    return false\n  },\n\n  /**\n   *\n   * Tweak or enrich the polyline persistence data with routing information\n   *\n   * @since 2.10.0\n   * @param {draw2d.shape.basic.PolyLine} line\n   * @param {Object} memento The memento data of the polyline\n   * @returns {Object}\n   */\n  getPersistentAttributes: function (line, memento) {\n    return memento\n  },\n\n  /**\n   *\n   * set the attributes for the polyline with routing information\n   *\n   * @since 2.10.0\n   * @param {draw2d.shape.basic.Line} line\n   * @param {Object} memento the JSON data to read\n   */\n  setPersistentAttributes: function (line, memento) {\n  },\n\n  /**\n   *\n   *\n   * The draw2d.Connection delegates the drag operation to the router. The router can\n   * handle the different constraints of the connection.\n   *\n   * @param {draw2d.shape.basic.Line} line\n   * @param {Number} dx the x difference between the start of the drag drop operation and now\n   * @param {Number} dy the y difference between the start of the drag drop operation and now\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   */\n  onDrag: function (line, dx, dy, dx2, dy2) {\n  },\n\n  /**\n   *\n   * Called by the connection if the vertices set outside.\n   * This enforce the router to avoid full autoroute. E.g. InteractiveManhattanRouter\n   *\n   * @protected\n   * @param {draw2d.shape.basic.Line} line\n   */\n  verticesSet: function (line) {\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Router for direct connections between two ports. Beeline\n * <br>\n * <br>\n *\n * @example\n *\n *    let createConnection=function(){\n *       let con = new draw2d.Connection();\n *       con.setRouter(new draw2d.layout.connection.DirectRouter());\n *       return con;\n *    };\n *\n *    // install a custom connection create policy\n *    //\n *    canvas.installEditPolicy(  new draw2d.policy.connection.DragConnectionCreatePolicy({\n *           createConnection: createConnection\n *    }));\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let start = new draw2d.shape.node.Start();\n *    let end   = new draw2d.shape.node.End();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,80);\n *\n *    // first Connection\n *    //\n *    let c = createConnection();\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *    canvas.add(c);\n *\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends  draw2d.layout.connection.ConnectionRouter\n */\n\ndraw2d.layout.connection.DirectRouter = draw2d.layout.connection.ConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.DirectRouter.prototype */\n  {\n\n  NAME: \"draw2d.layout.connection.DirectRouter\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function () {\n    this._super()\n  },\n\n\n  /**\n   * \n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.Connection} connection The assigned connection\n   * @template\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n    connection.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy())\n  },\n\n\n  /**\n   * \n   * Invalidates the given Connection\n   */\n  invalidate: function () {\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  route: function (connection, routingHints) {\n    let start = connection.getStartPosition()\n    let end = connection.getEndPosition()\n\n    // required for hit tests\n    //\n    connection.addPoint(start)\n    connection.addPoint(end)\n\n    // calculate the path\n    let path = [\"M\", start.x, \" \", start.y]\n    path.push(\"L\", end.x, \" \", end.y)\n\n    connection.svgPathString = path.join(\"\")\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Automatic router that spreads its  {@link draw2d.Connection Connections} in a fan-like fashion upon collision.\n *\n *\n * @example\n *\n *    let createConnection=function(){\n *       // return my special kind of connection\n *       let con = new draw2d.Connection({\n *         radius: 14,\n *         router: new draw2d.layout.connection.FanConnectionRouter()\n *       });\n *       return con;\n *    };\n *\n *    // install a custom connection create policy\n *    //\n *    canvas.installEditPolicy(  new draw2d.policy.connection.DragConnectionCreatePolicy({\n *           createConnection: createConnection\n *    }));\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let start = new draw2d.shape.node.Start();\n *    let end   = new draw2d.shape.node.End();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,80);\n *\n *    // first Connection\n *    //\n *    let c = createConnection();\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *    canvas.add(c);\n *\n *    // second Connection\n *    //\n *    c = createConnection();\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *    canvas.add(c);\n *\n *    // third Connection\n *    //\n *    c = createConnection();\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *    canvas.add(c);\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.layout.connection.DirectRouter\n */\n\ndraw2d.layout.connection.FanConnectionRouter = draw2d.layout.connection.DirectRouter.extend(\n  /** @lends draw2d.layout.connection.FanConnectionRouter.prototype */\n  {\n\n  NAME: \"draw2d.layout.connection.FanConnectionRouter\",\n\n  /**\n   * Creates a new Router object.\n   *\n   */\n  init: function () {\n    this._super()\n\n  },\n\n\n  /**\n   * \n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.Connection} connection The assigned connection\n   * @template\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n    connection.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy())\n  },\n\n  /**\n   * \n   * Layout the hands over connection in a manhattan like layout\n   *\n   * @param {draw2d.Connection}  conn\n   * @param {draw2d.util.ArrayList} oldVertices old/existing vertices of the Connection\n   * @param {Object} routingHints some helper attributes for the router\n   * @param {Boolean} routingHints.startMoved is true if just the start location has moved\n   * @param {Boolean} routingHints.destMoved is true if the destination location has changed\n   */\n  route: function (conn, routingHints) {\n    let lines = conn.getSource().getConnections().clone()\n    lines.grep( other => other.getTarget() === conn.getTarget() || other.getSource() === conn.getTarget())\n\n    if (lines.getSize() > 1) {\n      this.routeCollision(conn, lines.indexOf(conn))\n    }\n    else {\n      this._super(conn, routingHints)\n    }\n  },\n\n  /**\n   * \n   * route the connection if connections overlap. Two connections overlap if the combination\n   * of source and target anchors are equal.\n   *\n   * @param {draw2d.Connection} conn\n   * @param {Number} index\n   */\n  routeCollision: function (conn, index) {\n    index = index + 1\n    let start = conn.getStartPoint()\n    let end = conn.getEndPoint()\n\n    let separation = 15\n\n    let midPoint = new draw2d.geo.Point((end.x + start.x) / 2, (end.y + start.y) / 2)\n    let position = end.getPosition(start)\n    let ray\n    if (position === draw2d.geo.PositionConstants.SOUTH || position === draw2d.geo.PositionConstants.EAST) {\n      ray = new draw2d.geo.Point(end.x - start.x, end.y - start.y)\n    }\n    else {\n      ray = new draw2d.geo.Point(start.x - end.x, start.y - end.y)\n    }\n\n    let length = Math.sqrt(ray.x * ray.x + ray.y * ray.y)\n\n    let xSeparation = separation * ray.x / length\n    let ySeparation = separation * ray.y / length\n\n    let bendPoint\n\n    if (index % 2 === 0) {\n      bendPoint = new draw2d.geo.Point(midPoint.x + (index / 2) * (-1 * ySeparation), midPoint.y + (index / 2) * xSeparation)\n    }\n    else {\n      bendPoint = new draw2d.geo.Point(midPoint.x + (index / 2) * ySeparation, midPoint.y + (index / 2) * (-1 * xSeparation))\n    }\n\n    // required for hit tests\n    conn.addPoint(start)\n    conn.addPoint(bendPoint)\n    conn.addPoint(end)\n\n    // calculate the path string for the SVG rendering\n    //\n    this._paint(conn)\n  }\n\n})\n","import draw2d from '../../packages'\n\n/**\n * @class\n * Route the connection in an Manhattan style and add resize handles to all vertex for interactive alignment of the\n * routing.\n *\n *\n * @example\n *\n *    let createConnection=function(){\n *       // return my special kind of connection\n *       let con = new draw2d.Connection({\n *         radius: 4,\n *         router: new draw2d.layout.connection.InteractiveManhattanConnectionRouter()\n *       });\n *       return con;\n *    };\n *\n *    // install a custom connection create policy\n *    //\n *    canvas.installEditPolicy(  new draw2d.policy.connection.DragConnectionCreatePolicy({\n *           createConnection: createConnection\n *    }));\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let start = new draw2d.shape.node.Start();\n *    let end   = new draw2d.shape.node.End();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,80);\n *\n *    // first Connection\n *    //\n *    let c = createConnection();\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *    canvas.add(c);\n *\n *    // select the connection to show the selection handles\n *    //\n *    c.select();\n *\n *\n * @author Andreas Herz\n * @since 4.0.2\n * @extends  draw2d.layout.connection.ManhattanConnectionRouter\n */\n\ndraw2d.layout.connection.InteractiveManhattanConnectionRouter = draw2d.layout.connection.ManhattanConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.InteractiveManhattanConnectionRouter.prototype */\n  {\n\n  NAME: \"draw2d.layout.connection.InteractiveManhattanConnectionRouter\",\n\n\n  /**\n   * Creates a new Router object.\n   *\n   */\n  init: function () {\n    this._super()\n  },\n\n  onInstall: function (conn) {\n    conn.installEditPolicy(new draw2d.policy.line.OrthogonalSelectionFeedbackPolicy())\n    conn._routingMetaData ??= { routedByUserInteraction: false,fromDir: -1,toDir: -1}\n  },\n\n  onUninstall: function (conn) {\n    delete conn._routingMetaData\n  },\n\n  /**\n   * @inheritDoc\n   */\n  route: function (conn, routingHints) {\n    if (!routingHints.oldVertices) {\n      debugger\n    }\n    if (routingHints.oldVertices.getSize() === 0 || conn._routingMetaData.routedByUserInteraction === false) {\n      this._super(conn, routingHints)\n      conn._routingMetaData.fromDir = conn.getSource().getConnectionDirection(conn.getTarget())\n      conn._routingMetaData.toDir = conn.getTarget().getConnectionDirection(conn.getSource())\n    }\n    else {\n      this.halfRoute(conn, routingHints)\n      this._paint(conn)\n    }\n  },\n\n  /**\n   * \n   * The routing algorithm if the user has changed at least on of the vertices manually.\n   * This kind of routing just align the start and end vertices to the new source/target port\n   * location.\n   * The vertices between keep untouched. Modification of this vertices are done by the\n   * draw2d.policy.line.OrthogonalSelectionFeedbackPolicy\n   *\n   * @param {draw2d.Connection} conn the connection to route\n   * @param {Object} routingHints some helper attributes for the router\n   * @param {Boolean} routingHints.startMoved is true if just the start location has moved\n   * @param {Boolean} routingHints.endMoved is true if the destination location has changed\n   */\n  halfRoute: function (conn, routingHints) {\n    let MINDIST = this.MINDIST\n    let max = Math.max\n    let min = Math.min\n\n    routingHints ??= {oldVertices: new draw2d.util.ArrayList()}\n    let oldVertices = routingHints.oldVertices\n    let vertexCount = oldVertices.getSize()\n\n    let fromPt = conn.getStartPosition()\n    let fromDir = conn.getSource().getConnectionDirection(conn.getTarget())\n\n    let toPt = conn.getEndPosition()\n    let toDir = conn.getTarget().getConnectionDirection(conn.getSource())\n\n    // the port orientation has been changed. This can happen if the node rotates. In this case\n    // we must recalculate the routing.\n    if (conn._routingMetaData.fromDir !== fromDir || conn._routingMetaData.toDir !== toDir) {\n      conn._routingMetaData.routedByUserInteraction = false\n      this.route(conn, routingHints)\n    }\n\n    // TODO: detection for switch back to autoroute isn't good enough.\n    //       Add more logic. e.g. if the fromDir!==1. This happens if\n    //       The ports are at bottom and top.\n    //       The code below covers only the classic workflow configuration left->right\n    //\n    //  go back to the default if no routing is possible anymore\n    //\n    if ((fromDir === draw2d.geo.Rectangle.DIRECTION_RIGHT) && (toDir === draw2d.geo.Rectangle.DIRECTION_LEFT)\n      && (fromPt.x > toPt.x) && (vertexCount <= 4)) {\n\n      conn._routingMetaData.routedByUserInteraction = false\n      this.route(conn, routingHints)\n    }\n    // it makes no sense to have just 2 vertices and manual routing for Manhattan-style routing\n    else if(conn.getVertices().getSize() ===2 && conn._routingMetaData.routedByUserInteraction === true){\n      conn._routingMetaData.routedByUserInteraction = false\n      this.route(conn, routingHints)\n    }\n\n    // transfer the old vertices into the connection\n    //\n    oldVertices.each( (i, vertex) =>{\n      conn.addPoint(vertex)\n    })\n\n\n    // all points are adjusted with the drag&drop operation. There is no need to move\n    // start/end points twice\n    if (conn.isInDragDrop) {\n      return\n    }\n\n    // The SOURCE port (labeled with p0) has been moved/changed.\n    //\n    if (routingHints.startMoved || !fromPt.equals(oldVertices.get(0))) {\n      let p1 = oldVertices.get(1)\n      let p2 = oldVertices.get(2) // optional. Happens if the connection has just 2 points\n      conn.setVertex(0, fromPt)\n      switch (fromDir) {\n        //          .\n        //   p0     . p1\n        //   x------+\n        //          .\n        //          .\n        //\n        case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n          conn.setVertex(1, max(fromPt.x + MINDIST, p1.x), fromPt.y)// p1\n          if(p2)\n            conn.setVertex(2, max(fromPt.x + MINDIST, p1.x), p2.y)    // p2\n          break\n        //   .\n        //   . p1     p0\n        //   +------x\n        //   .\n        //   .\n        //\n        case draw2d.geo.Rectangle.DIRECTION_LEFT:\n          conn.setVertex(1, min(fromPt.x - MINDIST, p1.x), fromPt.y)// p1\n          if(p2)\n            conn.setVertex(2, min(fromPt.x - MINDIST, p1.x), p2.y)    // p2\n          break\n        //     ...+....\n        //     p1 |\n        //        |\n        //        |\n        //     p0 x\n        //\n        case draw2d.geo.Rectangle.DIRECTION_UP:\n          conn.setVertex(1, fromPt.x, min(fromPt.y - MINDIST, p1.y)) // p1\n          if(p2)\n            conn.setVertex(2, p2.x, min(fromPt.y - MINDIST, p1.y)) // p2\n          break\n        //        x\n        //     p0 |\n        //        |\n        //     p1 |\n        //    ....+....\n        //\n        case draw2d.geo.Rectangle.DIRECTION_DOWN:\n          conn.setVertex(1, fromPt.x, max(fromPt.y + MINDIST, p1.y)) // p1\n          if(p2)\n            conn.setVertex(2, p2.x, max(fromPt.y + MINDIST, p1.y))     // p2\n          break\n      }\n    }\n    //////////////////////////////////////////////////////////////////\n    // the TARGET port (labeled with p0) has moved\n    //\n    if (routingHints.endMoved || !toPt.equals(oldVertices.get(vertexCount - 1))) {\n      let p1 = oldVertices.get(vertexCount - 2)\n      let p2 = oldVertices.get(vertexCount - 3) // optional\n      conn.setVertex(vertexCount - 1, toPt)                        // p0\n\n      switch (toDir) {\n        //               .\n        //      p0       . p1\n        //    x----------+\n        //               .\n        //               .\n        case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n          conn.setVertex(vertexCount - 2, max(toPt.x + MINDIST, p1.x), toPt.y)  // p1\n          if(p2)\n            conn.setVertex(vertexCount - 3, max(toPt.x + MINDIST, p1.x), p2.y)    // p2\n          break\n\n        //    .\n        //    .\n        //    . p1         p0\n        //    +----------x\n        //    .\n        //    .\n        //\n        case draw2d.geo.Rectangle.DIRECTION_LEFT:\n          conn.setVertex(vertexCount - 2, min(toPt.x - MINDIST, p1.x), toPt.y)  // p1\n          if(p2)\n            conn.setVertex(vertexCount - 3, min(toPt.x - MINDIST, p1.x), p2.y)    // p2\n          break\n\n        //     ...+....\n        //     p1 |\n        //        |\n        //        |\n        //     p0 x\n        //\n        case draw2d.geo.Rectangle.DIRECTION_UP:\n          conn.setVertex(vertexCount - 2, toPt.x, min(toPt.y - MINDIST, p1.y))  // p1\n          if(p2)\n            conn.setVertex(vertexCount - 3, p2.x, min(toPt.y - MINDIST, p1.y))  // p2\n          break\n\n        //        +\n        //     p0 |\n        //        |\n        //     p1 |\n        //     ...+...\n        //\n        case draw2d.geo.Rectangle.DIRECTION_DOWN:\n          conn.setVertex(vertexCount - 2, toPt.x, max(toPt.y + MINDIST, p1.y))  // p1\n          if(p2)\n            conn.setVertex(vertexCount - 3, p2.x, max(toPt.y + MINDIST, p1.y))  // p2\n          break\n      }\n    }\n  },\n\n  /**\n   * Callback method for the PolyLine or Connection to verify that a segment is deletable.\n   * @param {draw2d.Connection} conn\n   * @param {Number} index\n   *\n   * @returns {Boolean}\n   * @since 4.2.3\n   */\n  canRemoveSegmentAt: function (conn, index) {\n\n    let segmentCount = conn.getVertices().getSize() - 1 // segmentCount is one less than vertex count\n\n    // The first and last segment isn't deletable\n    //\n    if ((index <= 0) || ((index + 1) >= segmentCount)) {\n      return false\n    }\n\n    // a connection need at least three strokes\n    //\n    if (segmentCount < 4) {\n      return false\n    }\n\n    let fromPt = conn.getStartPosition()\n    let fromDir = conn.getSource().getConnectionDirection(conn.getTarget())\n\n    let toPt = conn.getEndPosition()\n    let toDir = conn.getTarget().getConnectionDirection(conn.getSource())\n\n    if (segmentCount <= 5) {\n      //     ___\n      //    |   |      From\n      //    | 1 |-----+\n      //    |___|     |\n      //              |\n      //   +----------+\n      //   |\n      //   |    ___\n      //   |   |   |\n      //   +---| 2 |    To\n      //       |___|\n      // the connection needs at least 5 segments if the routing is like this\n      //\n      if ((fromDir === draw2d.geo.Rectangle.DIRECTION_RIGHT) && (toDir === draw2d.geo.Rectangle.DIRECTION_LEFT) && (fromPt.x >= toPt.x)) {\n        return false\n      }\n\n\n      //     ___\n      //    |   |        To\n      //    | 2 |-----+\n      //    |___|     |\n      //              |\n      //   +----------+\n      //   |\n      //   |    ___\n      //   |   |   |\n      //   +---| 1 |    From\n      //       |___|\n      // the connection needs at least 5 segments if the routing is like this\n      //\n      if ((fromDir == draw2d.geo.Rectangle.DIRECTION_LEFT) & (toDir == draw2d.geo.Rectangle.DIRECTION_RIGHT) && (fromPt.x <= toPt.x)) {\n        return false\n      }\n\n      //                          ___\n      //      +_______           |   |\n      //      | from  |          | 2 |\n      //     _+_      |          |___|\n      //    |   |     |       To   +\n      //    | 1 |     |____________|\n      //    |___|\n      // the connection needs at least 5 segments if the routing is like this\n      //\n      if ((fromDir == draw2d.geo.Rectangle.DIRECTION_UP) & (toDir == draw2d.geo.Rectangle.DIRECTION_DOWN) && (fromPt.y <= toPt.y)) {\n        return false\n      }\n\n      //                          ___\n      //      +_______           |   |\n      //      | to    |          | 1 |\n      //     _+_      |          |___|\n      //    |   |     |     from   +\n      //    | 2 |     |____________|\n      //    |___|\n      // the connection needs at least 5 segments if the routing is like this\n      //\n      if ((fromDir == draw2d.geo.Rectangle.DIRECTION_DOWN) & (toDir == draw2d.geo.Rectangle.DIRECTION_UP) && (fromPt.y >= toPt.y)) {\n        return false\n      }\n\n      // unable to make the decision on the easy way. calculate the route again with an\n      // temporary connection and check if the segment count of the new routed connection\n      // allows a removal\n      //\n      let tmpConn = new draw2d.Connection()\n      tmpConn.lineSegments = new draw2d.util.ArrayList()\n      tmpConn.vertices = new draw2d.util.ArrayList()\n      tmpConn.sourcePort = conn.sourcePort\n      tmpConn.targetPort = conn.targetPort\n      tmpConn._routingMetaData = {routedByUserInteraction: false, fromDir: -1, toDir: -1}\n      this.route(tmpConn, {oldVertices: new draw2d.util.ArrayList()})\n      let curSegmentCount = conn.getVertices().getSize() - 1\n      let minSegmentCount = tmpConn.getVertices().getSize() - 1\n      if (curSegmentCount <= minSegmentCount) {\n        return false\n      }\n    }\n\n    return true\n  },\n\n  /**\n   * \n   *\n   * The draw2d.Connection delegates the drag operation to the router. The router can\n   * handle the different constraints of the connection and just drag&drop a single segment\n   * instead of the complete connection.\n   *\n   * @param {draw2d.shape.basic.Line} line the related line to handle\n   * @param {Number} dx the x difference between the start of the drag drop operation and now\n   * @param {Number} dy the y difference between the start of the drag drop operation and now\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   *\n   * @since 6.1.0\n   */\n  onDrag: function (line, dx, dy, dx2, dy2) {\n    let i = 0\n    // Connection is dragged by source and origin port movement\n    // or MultiSelection in this case we drag the complete\n    // connection\n    if (line.draggedSegment === null) {\n      let count = line.getVertices().getSize() - 1\n      for (i = 1; i < count; i++) {\n        line.getVertex(i).translate(dx2, dy2)\n      }\n      return\n    }\n\n    // don't drag start/end segments. This segments are bounded to the related\n    // ports.\n    if (line.draggedSegment.index === 0 || line.draggedSegment.index === (line.getSegments().getSize() - 1)) {\n      return\n    }\n\n    line._routingMetaData.routedByUserInteraction = true\n\n    let p0 = line.draggedSegment.start\n    let p1 = line.draggedSegment.end\n    i = line.draggedSegment.index\n    let lp0 = line.getVertices().first()\n    let lp1 = line.getVertices().last()\n\n    // horizontal segment movement\n    //                              x Py\n    //                              .\n    //  P0                          .\n    //  +---------------------------+ P1\n    //  .\n    //  .\n    //  x Px\n    //\n    let distance = 0\n    if (p0.y === p1.y) {\n      // ensure that the segment is the min distance away from the source/target port\n      // (Px is endpoints of the connection and bounded to a port)\n      if (i === 1) distance = p0.y - lp0.y\n      // (Py is endpoints of the connection and bounded to a port)\n      if (i === line.getSegments().getSize() - 2) distance = p1.y - lp1.y\n\n\n      if (distance < 0 && dy2 > 0) {\n        dy2 = Math.min(dy2, (-distance) - this.MINDIST)\n      }\n      else if (distance > 0 && dy2 < 0) {\n        dy2 = -Math.min(-dy2, (distance) - this.MINDIST)\n      }\n\n      line.getVertex(i).translate(0, dy2)\n      line.getVertex(i + 1).translate(0, dy2)\n    }\n    // vertical segment movement\n    //\n    else if (p0.x === p1.x) {\n      // ensure that the segment is the min distance away from the source/target port\n      //\n      if (i === 1) {\n        distance = p0.x - lp0.x\n        if (distance < 0 && dx2 > 0) {\n          dx2 = Math.min(dx2, (-distance) - this.MINDIST)\n        }\n        else if (distance > 0 && dx2 < 0) {\n          dx2 = -Math.min(-dx2, (distance) - this.MINDIST)\n        }\n      }\n\n      // we need this additional test too. No \"else if\" because the special\n      // case of \"index===1\". In this case the segment can be the last AND first\n      // segment if the connection has only three segments at all.\n      //\n      if (i === line.getSegments().getSize() - 2) {\n        distance = p1.x - lp1.x\n        if (distance < 0 && dx2 > 0) {\n          dx2 = Math.min(dx2, (-distance) - this.MINDIST)\n        }\n        else if (distance > 0 && dx2 < 0) {\n          dx2 = -Math.min(-dx2, (distance) - this.MINDIST)\n        }\n      }\n\n      line.getVertex(i).translate(dx2, 0)\n      line.getVertex(i + 1).translate(dx2, 0)\n    }\n  },\n\n  /**\n   * \n   * Called by the connection if the vertices set outside.\n   * This enforce the router to avoid full autoroute. E.g. InteractiveManhattanRouter\n   *\n   * @protected\n   */\n  verticesSet: function (conn) {\n    conn._routingMetaData.routedByUserInteraction = true\n    if (conn.getSource() !== null && conn.getTarget() !== null) {\n      conn._routingMetaData.fromDir = conn.getSource().getConnectionDirection(conn.getTarget())\n      conn._routingMetaData.toDir = conn.getTarget().getConnectionDirection(conn.getSource())\n    }\n  },\n\n  /**\n   * \n   * Tweak or enrich the polyline persistence data with routing information\n   *\n   * @since 2.10.0\n   * @param {draw2d.shape.basic.PolyLine} line\n   * @param {Object} memento The memento data of the polyline\n   *\n   * @returns {Object}\n   */\n  getPersistentAttributes: function (line, memento) {\n    memento.vertex = []\n\n    line.getVertices().each( (i, e) =>{\n      memento.vertex.push({x: e.x, y: e.y})\n    })\n    memento.routingMetaData = { ...line._routingMetaData}\n\n    return memento\n  },\n\n  /**\n   * \n   * set the attributes for the polyline with routing information of the interactive manhattan router.\n   *\n   * @since 4..0.0\n   * @param {Object} memento\n   */\n  setPersistentAttributes: function (line, memento) {\n    // restore the points from the JSON data and add them to the polyline\n    //\n    if (Array.isArray(memento.vertex)) {\n\n      line.oldPoint = null\n      line.lineSegments = new draw2d.util.ArrayList()\n\n      line.setVertices(memento.vertex)\n    }\n\n    if (typeof memento.routingMetaData !== \"undefined\") {\n      line._routingMetaData = {...memento.routingMetaData}\n    }\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Provides a {@link draw2d.Connection} with an orthogonal route between the Connection's source\n * and target anchors.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends  draw2d.layout.connection.ManhattanConnectionRouter\n */\n\ndraw2d.layout.connection.ManhattanBridgedConnectionRouter = draw2d.layout.connection.ManhattanConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.ManhattanBridgedConnectionRouter.prototype */\n  {\n\n  NAME: \"draw2d.layout.connection.ManhattanBridgedConnectionRouter\",\n\n  BRIDGE_HORIZONTAL_LR: \" r 0 0 3 -4 7 -4 10 0 13 0 \", // Left to right\n  BRIDGE_HORIZONTAL_RL: \" r 0 0 -3 -4 -7 -4 -10 0 -13 0 \", // right to left\n\n  /**\n   * Creates a new Router object.\n   *\n   */\n  init: function () {\n    this._super()\n  },\n\n\n  /**\n   * \n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.Connection} connection The assigned connection\n   * @template\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n    connection.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy())\n  },\n\n  /**\n   * @inheritdoc\n   */\n  route: function (conn, routingHints) {\n    let fromPt = conn.getStartPoint()\n    let fromDir = conn.getSource().getConnectionDirection(conn.getTarget())\n\n    let toPt = conn.getEndPoint()\n    let toDir = conn.getTarget().getConnectionDirection(conn.getSource())\n\n    // calculate the lines between the two points.\n    //\n    this._route(conn, toPt, toDir, fromPt, fromDir)\n\n    // calculate the path string for the SVG rendering\n    //\n    let intersectionsASC = conn.getCanvas().getIntersection(conn).sort(\"x\")\n    let intersectionsDESC = intersectionsASC.clone().reverse()\n\n    let intersectionForCalc = intersectionsASC\n\n\n    // ATTENTION: we cast all x/y coordinates to int and add 0.5 to avoid subpixel rendering of\n    //            the connection. The 1px or 2px lines look much clearer than before.\n    //\n    let ps = conn.getVertices()\n    let p = ps.get(0)\n    let path = [\"M\", (p.x | 0) + 0.5, \" \", (p.y | 0) + 0.5]\n    let oldP = p\n    for (let i = 1; i < ps.getSize(); i++) {\n      p = ps.get(i)\n\n      // check for intersection and paint a bridge if required\n      // line goes from left to right\n      //\n      let bridgeWidth = 5\n      let bridgeCode = this.BRIDGE_HORIZONTAL_LR\n\n      // line goes from right->left. Inverse the bridge and the bridgeWidth\n      //\n      if (oldP.x > p.x) {\n        intersectionForCalc = intersectionsDESC\n        bridgeCode = this.BRIDGE_HORIZONTAL_RL\n        bridgeWidth = -bridgeWidth\n      }\n\n      intersectionForCalc.each(function (ii, interP) {\n        if (interP.justTouching === false && draw2d.shape.basic.Line.hit(1, oldP.x, oldP.y, p.x, p.y, interP.x, interP.y) === true) {\n          // we draw only horizontal bridges. Just a design decision\n          //\n          if (p.y === interP.y) {\n            path.push(\" L\", ((interP.x - bridgeWidth) | 0) + 0.5, \" \", (interP.y | 0) + 0.5)\n            path.push(bridgeCode)\n          }\n        }\n\n      })\n\n      path.push(\" L\", (p.x | 0) + 0.5, \" \", (p.y | 0) + 0.5)\n      oldP = p\n    }\n    conn.svgPathString = path.join(\"\")\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Provides a {@link draw2d.Connection} with an orthogonal route between the Connection's source\n * and target anchors.\n *\n *\n * @example\n *\n *    // Override the default connection type. This is used during drag&drop operations of ports.\n *    //\n *    let createConnection=function(sourcePort, targetPort){\n *       // return my special kind of connection\n *       let con = new draw2d.Connection();\n *       con.setRouter(new draw2d.layout.connection.ManhattanConnectionRouter());\n *       return con;\n *    };\n *\n *    // Install a special policy into the canvas to use my own implementation of connection\n *    // if we drag&drop a port\n *    //\n *    canvas.installEditPolicy(  new draw2d.policy.connection.DragConnectionCreatePolicy({\n *          createConnection: createConnection\n *    }));\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let start = new draw2d.shape.node.Start();\n *    let end   = new draw2d.shape.node.End();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,80);\n *\n *    // first Connection\n *    //\n *    let c = createConnection();\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *    canvas.add(c);\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends  draw2d.layout.connection.ConnectionRouter\n */\n\ndraw2d.layout.connection.ManhattanConnectionRouter = draw2d.layout.connection.ConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.ManhattanConnectionRouter.prototype */\n  {\n\n  NAME: \"draw2d.layout.connection.ManhattanConnectionRouter\",\n\n  MINDIST: 20,\n  TOL: 0.1,\n  TOLxTOL: 0.01,\n  TOGGLE_DIST: 20,\n\n  /**\n   * Creates a new Router object.\n   *\n   */\n  init: function () {\n    this._super()\n  },\n\n\n  /**\n   *\n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.Connection} connection The assigned connection\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n    connection.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy())\n  },\n\n  /**\n   * @inheritdoc\n   */\n  route: function (conn, routingHints) {\n    let fromPt = conn.getStartPosition()\n    let fromDir = conn.getSource().getConnectionDirection(conn.getTarget())\n\n    let toPt = conn.getEndPosition()\n    let toDir = conn.getTarget().getConnectionDirection(conn.getSource())\n\n    // calculate the lines between the two points.\n    //\n    this._route(conn, toPt, toDir, fromPt, fromDir)\n    this._paint(conn)\n  },\n\n  /**\n   *\n   * Internal routing algorithm.\n   *\n   * @private\n   * @param {draw2d.Connection} conn\n   * @param {draw2d.geo.Point} fromPt\n   * @param {Number} fromDir\n   * @param {draw2d.geo.Point} toPt\n   * @param {Number} toDir\n   */\n  _route: function (conn, fromPt, fromDir, toPt, toDir) {\n    // fromPt is an x,y to start from.\n    // fromDir is an angle that the first link must\n    //\n    let UP = draw2d.geo.Rectangle.DIRECTION_UP\n    let RIGHT = draw2d.geo.Rectangle.DIRECTION_RIGHT\n    let DOWN = draw2d.geo.Rectangle.DIRECTION_DOWN\n    let LEFT = draw2d.geo.Rectangle.DIRECTION_LEFT\n\n    let xDiff = fromPt.x - toPt.x\n    let yDiff = fromPt.y - toPt.y\n    let point\n    let dir\n    let pos\n\n    if (((xDiff * xDiff) < (this.TOLxTOL)) && ((yDiff * yDiff) < (this.TOLxTOL))) {\n      conn.addPoint(new draw2d.geo.Point(toPt.x, toPt.y))\n      return\n    }\n\n    if (fromDir === LEFT) {\n      if ((xDiff > 0) && ((yDiff * yDiff) < this.TOL) && (toDir === RIGHT)) {\n        point = toPt\n        dir = toDir\n      }\n      else {\n        if (xDiff < 0) {\n          point = new draw2d.geo.Point(fromPt.x - this.MINDIST, fromPt.y)\n        }\n        else if (((yDiff > 0) && (toDir === DOWN)) || ((yDiff < 0) && (toDir === UP))) {\n          point = new draw2d.geo.Point(toPt.x, fromPt.y)\n        }\n        else if (fromDir === toDir) {\n          pos = Math.min(fromPt.x, toPt.x) - this.MINDIST\n          point = new draw2d.geo.Point(pos, fromPt.y)\n        }\n        else {\n          point = new draw2d.geo.Point(fromPt.x - (xDiff / 2), fromPt.y)\n        }\n\n        if (yDiff > 0) {\n          dir = UP\n        }\n        else {\n          dir = DOWN\n        }\n      }\n    }\n    else if (fromDir === RIGHT) {\n      if ((xDiff < 0) && ((yDiff * yDiff) < this.TOL) && (toDir === LEFT)) {\n        point = toPt\n        dir = toDir\n      }\n      else {\n        if (xDiff > 0) {\n          point = new draw2d.geo.Point(fromPt.x + this.MINDIST, fromPt.y)\n        }\n        else if (((yDiff > 0) && (toDir === DOWN)) || ((yDiff < 0) && (toDir === UP))) {\n          point = new draw2d.geo.Point(toPt.x, fromPt.y)\n        }\n        else if (fromDir === toDir) {\n          pos = Math.max(fromPt.x, toPt.x) + this.MINDIST\n          point = new draw2d.geo.Point(pos, fromPt.y)\n        }\n        else {\n          point = new draw2d.geo.Point(fromPt.x - (xDiff / 2), fromPt.y)\n        }\n\n        if (yDiff > 0) {\n          dir = UP\n        }\n        else {\n          dir = DOWN\n        }\n      }\n    }\n    else if (fromDir === DOWN) {\n      if (((xDiff * xDiff) < this.TOL) && (yDiff < 0) && (toDir === UP)) {\n        point = toPt\n        dir = toDir\n      }\n      else {\n        if (yDiff > 0) {\n          point = new draw2d.geo.Point(fromPt.x, fromPt.y + this.MINDIST)\n        }\n        else if (((xDiff > 0) && (toDir === RIGHT)) || ((xDiff < 0) && (toDir === LEFT))) {\n          point = new draw2d.geo.Point(fromPt.x, toPt.y)\n        }\n        else if (fromDir === toDir) {\n          pos = Math.max(fromPt.y, toPt.y) + this.MINDIST\n          point = new draw2d.geo.Point(fromPt.x, pos)\n        }\n        else {\n          point = new draw2d.geo.Point(fromPt.x, fromPt.y - (yDiff / 2))\n        }\n\n        if (xDiff > 0) {\n          dir = LEFT\n        }\n        else {\n          dir = RIGHT\n        }\n      }\n    }\n    else if (fromDir === UP) {\n      if (((xDiff * xDiff) < this.TOL) && (yDiff > 0) && (toDir === DOWN)) {\n        point = toPt\n        dir = toDir\n      }\n      else {\n        if (yDiff < 0) {\n          point = new draw2d.geo.Point(fromPt.x, fromPt.y - this.MINDIST)\n        }\n        else if (((xDiff > 0) && (toDir === RIGHT)) || ((xDiff < 0) && (toDir === LEFT))) {\n          point = new draw2d.geo.Point(fromPt.x, toPt.y)\n        }\n        else if (fromDir === toDir) {\n          pos = Math.min(fromPt.y, toPt.y) - this.MINDIST\n          point = new draw2d.geo.Point(fromPt.x, pos)\n        }\n        else {\n          point = new draw2d.geo.Point(fromPt.x, fromPt.y - (yDiff / 2))\n        }\n\n        if (xDiff > 0) {\n          dir = LEFT\n        }\n        else {\n          dir = RIGHT\n        }\n      }\n    }\n    this._route(conn, point, dir, toPt, toDir)\n    conn.addPoint(fromPt)\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * <b>BETA VERSION. Not for production!!!<br></b>\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends  draw2d.layout.connection.ConnectionRouter\n */\n\nlet ROUTER_RECTS = null\n\ndraw2d.layout.connection.MazeConnectionRouter = draw2d.layout.connection.ConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.MazeConnectionRouter.prototype */\n  {\n\n  NAME: \"draw2d.layout.connection.MazeConnectionRouter\",\n\n\n  /**\n   * Creates a new Router object.\n   *\n   */\n  init: function () {\n    this._super()\n\n    this.useSpline = false\n    this.useSimplify = true\n    this.useSimplifyValue = 2\n    this.useDebug = false\n    this.useShift = 4\n    this.portOutletOffset = 15\n\n\n//    \tthis.finder = new PF.AStarFinder();\n//      this.finder = new PF.AStarFinder({ allowDiagonal: true, dontCrossCorners: true});\n//      this.finder = new PF.AStarFinder({ allowDiagonal: false});\n//      this.finder = new PF.BiBreadthFirstFinder({ allowDiagonal: false});\n//      this.finder = new PF.BreadthFirstFinder({ allowDiagonal: false});\n    this.finder = new PF.JumpPointFinder({allowDiagonal: false, dontCrossCorners: true})\n  },\n\n\n  /**\n   * \n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.Connection} connection The assigned connection\n   * @template\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n    connection.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy())\n  },\n\n  /**\n   * @inheritdoc\n   */\n  route: function (conn, routingHints) {\n    let fromPt = conn.getStartPoint()\n    let fromDir = conn.getSource().getConnectionDirection(conn.getTarget())\n\n    let toPt = conn.getEndPoint()\n    let toDir = conn.getTarget().getConnectionDirection(conn.getSource())\n\n    // calculate the lines between the two points.\n    //\n    this._route(conn, toPt, toDir, fromPt, fromDir)\n    this._paint(conn)\n  },\n\n  /**\n   * \n   * Internal routing algorithm.\n   *     * <p>\n   * Possible values:\n   * <ul>\n   *   <li>up -&gt; 0</li>\n   *   <li>right -&gt; 1</li>\n   *   <li>down -&gt; 2</li>\n   *   <li>left -&gt; 3</li>\n   * </ul>\n   * <p>\n\n   * @private\n   * @param {draw2d.Connection} conn\n   * @param {draw2d.geo.Point} fromPt\n   * @param {Number} fromDir\n   * @param {draw2d.geo.Point} toPt\n   * @param {Number} toDir\n   */\n  _route: function (conn, fromPt, fromDir, toPt, toDir) {\n    let shift = this.useShift\n\n    let oldToPt = toPt\n    let oldFromPt = fromPt\n\n    // move the points with an offset in the prefered routing direction of the ports\n    // to avoid that the routed connection is sticking on one side of the figure.\n    //\n    fromPt = this.getAdjustedPoint(fromPt, fromDir, this.portOutletOffset)\n    toPt = this.getAdjustedPoint(toPt, toDir, this.portOutletOffset)\n\n    let grid = this.generateNoGoGrid(conn, fromPt, fromDir, toPt, toDir)\n\n    // 4. Calculate the shortest path from source to target based on the grid\n    //\n    let path = this.finder.findPath(\n        Math.max(fromPt.x) >> shift, Math.max(fromPt.y) >> shift,\n        Math.max(toPt.x )>> shift, Math.max(0,toPt.y) >> shift,\n        grid)\n\n    // transfer the path from the grid based coordinates back to the real coordinates\n    //\n    path.forEach(e => {\n      e.x = e[0] = e[0] << shift\n      e.y = e[1] = e[1] << shift\n    })\n\n    // 5. paint the \"no go\" area in read if we are in debug mode\n    //\n    if (this.useDebug) {\n      if (ROUTER_RECTS !== null) {\n        ROUTER_RECTS.remove()\n      }\n      ROUTER_RECTS = conn.canvas.paper.set()\n\n      for (let i = 0; i < grid.width; i++) {\n        for (let j = 0; j < grid.height; j++) {\n          if (!grid.isWalkableAt(i, j))\n            ROUTER_RECTS.push(conn.canvas.paper.rect(i << shift, j << shift, 1 << shift, 1 << shift).attr({\n              \"fill\": \"red\",\n              \"opacity\": \"0.1\"\n            }))\n        }\n      }\n      ROUTER_RECTS.push(conn.canvas.paper.rect(fromPt.x - 3, fromPt.y - 3, 6, 6).attr({\n        \"fill\": \"#ff0000\",\n        \"opacity\": \"0.8\"\n      }))\n      ROUTER_RECTS.push(conn.canvas.paper.rect(toPt.x - 3, toPt.y - 3, 6, 6).attr({\n        \"fill\": \"#ff0000\",\n        \"opacity\": \"0.8\"\n      }))\n\n      // paint the original calculated path without any simplification in BLUE\n      path.forEach(e => {\n        ROUTER_RECTS.push(conn.canvas.paper.rect(e.x - 3, e.y - 3, 6, 6).attr({\"fill\": \"#0000ff\", \"opacity\": \"0.8\"}))\n      })\n      if(path.length>0){\n        let p = path[0]\n        let svgPathBefore = [\"M\", p.x.toFixed(2), \" \", p.y.toFixed(2)]\n        for (let i = 1; i < path.length; i++) {\n          p = path[i]\n          svgPathBefore.push(\"L\", p.x.toFixed(2), \" \", p.y.toFixed(2))\n        }\n        svgPathBefore = svgPathBefore.join(\"\")\n        ROUTER_RECTS.push(conn.canvas.paper.path(svgPathBefore).attr({\"stroke\": \"#0000ff\"}))\n      }\n    }\n\n\n    this.adjustPath(fromPt, path, fromDir)\n    path.reverse()\n    this.adjustPath(toPt, path, toDir)\n    path.reverse()\n\n    path.forEach(e => {\n      e.x = e[0]\n      e.y = e[1]\n    })\n\n\n    if (this.useSpline) {\n      let p = new draw2d.util.ArrayList()\n      p.add(oldFromPt)\n      path.forEach(e => {\n        p.add(new draw2d.geo.Point(e[0], e[1]))\n      })\n      p.add(oldToPt)\n\n      if (this.useDebug) {\n        path.forEach(e => {\n          ROUTER_RECTS.push(conn.canvas.paper.rect(e.x - 3, e.y - 3, 6, 6).attr({\"fill\": \"#00ff00\", \"opacity\": \"0.8\"}))\n        })\n        let pt = path[0]\n        let svgPathBefore = [\"M\", pt.x.toFixed(2), \" \", pt.y.toFixed(2)]\n        for (let i = 1; i < path.length; i++) {\n          pt = path[i]\n          svgPathBefore.push(\"L\", pt.x.toFixed(2), \" \", pt.y.toFixed(2))\n        }\n        svgPathBefore = svgPathBefore.join(\"\")\n        ROUTER_RECTS.push(conn.canvas.paper.path(svgPathBefore).attr({\"stroke\": \"#00ff00\"}))\n      }\n\n      this.spline = new draw2d.util.spline.CubicSpline()\n      let splinePoints = this.spline.generate(p, 8)\n\n      if (this.useSimplify) {\n        path = []\n        splinePoints.each(function (i, e) {\n          path.push({x: e.x, y: e.y})\n        })\n        path = this.simplify(path, this.useSimplifyValue, true)\n\n        path.forEach(e => {\n          conn.addPoint(e.x, e.y)\n        })\n      }\n      else {\n        splinePoints.each(function (i, e) {\n          conn.addPoint(e)\n        })\n      }\n    }\n    else {\n      if (this.useSimplify) {\n        path = this.simplify(path, this.useSimplifyValue, true)\n      }\n\n      if (this.useDebug) {\n        path.forEach(e => {\n          ROUTER_RECTS.push(conn.canvas.paper.rect(e.x - 3, e.y - 3, 6, 6).attr({\"fill\": \"#00ff00\", \"opacity\": \"0.8\"}))\n        })\n        if(path.length>0){\n          let p = path[0]\n          let svgPathBefore = [\"M\", p.x.toFixed(2), \" \", p.y.toFixed(2)]\n          for (let i = 1; i < path.length; i++) {\n            p = path[i]\n            svgPathBefore.push(\"L\", p.x.toFixed(2), \" \", p.y.toFixed(2))\n          }\n          svgPathBefore = svgPathBefore.join(\"\")\n          ROUTER_RECTS.push(conn.canvas.paper.path(svgPathBefore).attr({\"stroke\": \"#00ff00\"}))\n        }\n      }\n\n      conn.addPoint(oldFromPt)\n      path.forEach(e => {\n        conn.addPoint(e[0], e[1])\n      })\n      conn.addPoint(oldToPt)\n\n    }\n\n  },\n\n  /**\n   * \n   * Generate a grid base no go map required for the path finding algorithm\n   *\n   * @param conn\n   * @returns {PF.Grid}\n   * @private\n   */\n  generateNoGoGrid: function (conn, fromPt, fromDir, toPt, toDir) {\n    let shift = this.useShift\n    let oneShift2 = (1 << shift) / 2\n\n    // 1. generate a map with all \"no go\" areas. The bounding box of the shapes defines\n    //    the no go areas.\n    //\n    let canvasWidth = conn.getCanvas().paper.width >> shift\n    let canvasHeight = conn.getCanvas().paper.height >> shift\n    let grid = new PF.Grid(canvasWidth, canvasHeight)\n    let figures = conn.getCanvas().getFigures()\n    figures.each(function (i, e) {\n      let box = e.getBoundingBox()\n      // remove shapes which are hit by the input or output ports. It is not possible to route\n      // out from a not walkable area\n      if (box.hitTest(fromPt.x, fromPt.y) === true || box.hitTest(toPt.x, toPt.y)) {\n        return\n      }\n\n      let x = box.x >> shift\n      let y = box.y >> shift\n      if (x < 1 || y < 1) {\n        return\n      }\n      let r_orig = (box.x + box.w + oneShift2) >> shift\n      let b_orig = (box.y + box.h + oneShift2) >> shift\n      for (let i = x; i <= r_orig; i++) {\n        for (let j = y; j <= b_orig; j++) {\n          grid.setWalkableAt(i, j, false)\n        }\n      }\n    })\n\n\n    // 3. make the are walkable on the edge of the port side. Otherwise we a\n    //    an enclosed area around the port if we are very close to another shape\n    //\n    let box = conn.getSource().getParent().getBoundingBox()\n    if (toDir === 1 || toDir === 3) {\n      let y = box.y >> shift\n      if (y > 0) {\n        let b_orig = box.y + box.h\n        let i = (toPt.x >> shift)\n\n        for (let j = y - 1; j << shift <= b_orig; j++) {\n          grid.setWalkableAt(i, j, true)\n        }\n      }\n    }\n    else {\n      let x = box.x >> shift\n      if (x > 0) {\n        let r_orig = box.x + box.w\n        let j = (toPt.x >> shift)\n        for (let i = x - 1; i << shift <= r_orig; i++) {\n          grid.setWalkableAt(i, j, true)\n        }\n      }\n    }\n\n    box = conn.getTarget().getParent().getBoundingBox()\n    if (fromDir === 1 || fromDir === 3) {\n      let y = box.y >> shift\n      if (y > 0) {\n        let b_orig = box.y + box.h\n        let i = (fromPt.x >> shift)\n        for (let j = y - 1; j << shift <= b_orig; j++) {\n          grid.setWalkableAt(i, j, true)\n        }\n      }\n    }\n    else {\n      let x = box.x >> shift\n      if (x > 0) {\n        let r_orig = box.x + box.w\n        let j = (fromPt.x >> shift)\n        for (let i = x - 1; i << shift <= r_orig; i++) {\n          grid.setWalkableAt(i, j, true)\n        }\n      }\n    }\n\n    return grid\n  },\n\n  /**\n   * \n   * move the point in the given direction with the given offset\n   *\n   * @param {draw2d.geo.Point} pt\n   * @param {Number} direction\n   * @param {Number} adjustment\n   *\n   * @returns {draw2d.geo.Point}\n   */\n  getAdjustedPoint: function (pt, direction, adjustment) {\n\n    switch (direction) {\n      case draw2d.geo.Rectangle.DIRECTION_UP:\n        return new draw2d.geo.Point(pt.x, pt.y - adjustment)\n      case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n        return new draw2d.geo.Point(pt.x + adjustment, pt.y)\n      case draw2d.geo.Rectangle.DIRECTION_DOWN:\n        return new draw2d.geo.Point(pt.x, pt.y + adjustment)\n      case draw2d.geo.Rectangle.DIRECTION_LEFT:\n        return new draw2d.geo.Point(pt.x - adjustment, pt.y)\n    }\n  },\n\n  adjustPath: function (pt, path, direction) {\n    let shift = this.useShift\n    let x = pt.x >> shift\n    let y = pt.y >> shift\n    path.forEach(e => {\n      if (y === (e[1] >> shift)) {\n        e[1] = pt.y\n      }\n      else {\n        return false\n      }\n    })\n    path.forEach(e => {\n      if (x === (e[0] >> shift)) {\n        e[0] = pt.x\n      }\n      else {\n        return false\n      }\n    })\n  },\n\n\n  getSquareDistance: function (p1, p2) { // square distance between 2 points\n\n    let dx = p1.x - p2.x,\n      dy = p1.y - p2.y\n\n    return dx * dx +\n      dy * dy\n  },\n\n  getSquareSegmentDistance: function (p, p1, p2) { // square distance from a point to a segment\n\n    let x = p1.x,\n      y = p1.y,\n\n      dx = p2.x - x,\n      dy = p2.y - y,\n\n      t\n\n    if (dx !== 0 || dy !== 0) {\n\n      t = ((p.x - x) * dx +\n        (p.y - y) * dy) /\n        (dx * dx +\n          dy * dy)\n\n      if (t > 1) {\n        x = p2.x\n        y = p2.y\n\n      } else if (t > 0) {\n        x += dx * t\n        y += dy * t\n      }\n    }\n\n    dx = p.x - x\n    dy = p.y - y\n\n    return dx * dx +\n      dy * dy\n  },\n\n  simplifyRadialDistance: function (points, sqTolerance) { // distance-based simplification\n\n    let i,\n      len = points.length,\n      point = null,\n      prevPoint = points[0],\n      newPoints = [prevPoint]\n\n    for (i = 1; i < len; i++) {\n      point = points[i]\n\n      if (this.getSquareDistance(point, prevPoint) > sqTolerance) {\n        newPoints.push(point)\n        prevPoint = point\n      }\n    }\n\n    if (prevPoint !== point) {\n      newPoints.push(point)\n    }\n\n    return newPoints\n  },\n\n\n  // simplification using optimized Douglas-Peucker algorithm with recursion elimination\n\n  simplifyDouglasPeucker: function (points, sqTolerance) {\n\n    let len = points.length,\n\n      MarkerArray = (typeof Uint8Array !== undefined + '')\n        ? Uint8Array\n        : Array,\n\n      markers = new MarkerArray(len),\n\n      first = 0,\n      last = len - 1,\n\n      i,\n      maxSqDist,\n      sqDist,\n      index,\n\n      firstStack = [],\n      lastStack = [],\n\n      newPoints = []\n\n    markers[first] = markers[last] = 1\n\n    while (last) {\n\n      maxSqDist = 0\n\n      for (i = first + 1; i < last; i++) {\n        sqDist = this.getSquareSegmentDistance(points[i], points[first], points[last])\n\n        if (sqDist > maxSqDist) {\n          index = i\n          maxSqDist = sqDist\n        }\n      }\n\n      if (maxSqDist > sqTolerance) {\n        markers[index] = 1\n\n        firstStack.push(first)\n        lastStack.push(index)\n\n        firstStack.push(index)\n        lastStack.push(last)\n      }\n\n      first = firstStack.pop()\n      last = lastStack.pop()\n    }\n\n    for (i = 0; i < len; i++) {\n      if (markers[i]) {\n        newPoints.push(points[i])\n      }\n    }\n\n    return newPoints\n  },\n\n\n  simplify: function (points, tolerance, highestQuality) {\n\n    let sqTolerance = (tolerance !== undefined)\n      ? tolerance * tolerance\n      : 1\n\n    if (!highestQuality) {\n      points = this.simplifyRadialDistance(points, sqTolerance)\n    }\n    points = this.simplifyDouglasPeucker(points, sqTolerance)\n\n    return points\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * JUST FOR RESEARCH AT THE MOMENT!!!!!!\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends  draw2d.layout.connection.ManhattanConnectionRouter\n */\n\ndraw2d.layout.connection.MuteableManhattanConnectionRouter = draw2d.layout.connection.ManhattanConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.MuteableManhattanConnectionRouter.prototype */\n  {\n\n  NAME: \"draw2d.layout.connection.MuteableManhattanConnectionRouter\",\n\n  UP: new draw2d.geo.Ray(0, -1),\n  DOWN: new draw2d.geo.Ray(0, 1),\n  LEFT: new draw2d.geo.Ray(-1, 0),\n  RIGHT: new draw2d.geo.Ray(1, 0),\n\n  /**\n   * Creates a new Router object.\n   *\n   */\n  init: function () {\n    this._super()\n\n    this.rowsUsed = {}//new HashMap<Integer, Integer>();\n    this.colsUsed = {}//new HashMap<Integer, Integer>();\n    this.constraints = {}//new HashMap<Connection, Object>();\n    this.reservedInfo = {}//new HashMap<Connection, ReservedInfo>();\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  route: function (conn, routingHints) {\n    this.rowsUsed = {}//new HashMap<Integer, Integer>();\n    this.colsUsed = {}//new HashMap<Integer, Integer>();\n    this.constraints = {}//new HashMap<Connection, Object>();\n    this.reservedInfo = {}//new HashMap<Connection, ReservedInfo>();\n\n    let canvas = conn.getCanvas()\n    let i\n\n    let startPoint = conn.getStartPoint()\n    let endPoint = conn.getEndPoint()\n\n    let start = new draw2d.geo.Ray(startPoint)\n    let end = new draw2d.geo.Ray(endPoint)\n    let average = new draw2d.geo.Ray((start.x + end.x) / 2, (start.y + end.y) / 2)\n\n    let direction = new draw2d.geo.Ray(end.x - start.x, end.y - start.y)\n    let startNormal = this.getStartDirection(conn)\n    let endNormal = this.getEndDirection(conn)\n\n    let positions = new draw2d.util.ArrayList()\n    let horizontal = startNormal.isHorizontal()\n\n    if (horizontal) {\n      positions.add(start.y)\n    }\n    else {\n      positions.add(start.x)\n    }\n\n    horizontal = !horizontal\n\n    // dot product is zero if the vector orthogonal (90°)\n    if (startNormal.dot(endNormal) === 0) {\n      if ((startNormal.dot(direction) >= 0) && (endNormal.dot(direction) <= 0)) {\n        // 0\n      } else {\n\n        // 2\n        if (startNormal.dot(direction) < 0)\n          i = startNormal.similarity(start.translated(startNormal.scaled(10)))\n        else {\n          if (horizontal)\n            i = average.y\n          else\n            i = average.x\n        }\n\n        positions.add(i)\n        horizontal = !horizontal\n\n        if (endNormal.dot(direction) > 0) {\n          i = endNormal.similarity(end.translated(endNormal.scaled(10)))\n        }\n        else {\n          if (horizontal) {\n            i = average.y\n          }\n          else {\n            i = average.x\n          }\n        }\n        positions.add(i)\n        horizontal = !horizontal\n      }\n    } else {\n      if (startNormal.dot(endNormal) > 0) {\n        //1\n        if (startNormal.dot(direction) >= 0)\n          i = startNormal.similarity(start.translated(startNormal.scaled(10)))\n        else\n          i = endNormal.similarity(end.translated(endNormal.scaled(10)))\n        positions.add(i)\n        horizontal = !horizontal\n      } else {\n        //3 or 1\n        if (startNormal.dot(direction) < 0) {\n          i = startNormal.similarity(start.translated(startNormal.scaled(10)))\n          positions.add(i)\n          horizontal = !horizontal\n        }\n\n        // my tweak to route SCA wires starts\n        if (this.isCycle(conn)) {\n          if (horizontal)\n            i = conn.getSource().getParent().getBoundingBox().getTop() - 10// * index;\n          else\n            i = conn.getSource().getParent().getBoundingBox().getRight() + 10// * index;\n        } else {\n          if (horizontal) {\n            let j = average.y\n\n            let next = endNormal.similarity(end.translated(endNormal.scaled(10)))\n\n            let trial = new draw2d.geo.Ray((positions.get(positions.getSize() - 1)), j)\n            let figure = this.findFirstFigureAtStraightLine(canvas, trial, this.LEFT, draw2d.util.ArrayList.EMPTY_LIST)\n\n            while (figure != null && figure.getBoundingBox().x + figure.getBoundingBox().width > next) {\n              j = figure.getBoundingBox().y + figure.getBoundingBox().height + 5\n              trial.y = j\n              figure = this.findFirstFigureAtStraightLine(canvas, trial, this.LEFT, draw2d.util.ArrayList.EMPTY_LIST)\n            }\n\n            i = j\n\n          } else {\n            let figure = this.findFirstFigureAtStraightLine(canvas, start, this.RIGHT, this.getExcludingFigures(conn))\n            if (figure == null)\n              i = average.x\n            else {\n              i = Math.min(average.x, start.translated(new draw2d.geo.Ray(3 * (figure.getBoundingBox().x - start.x) / 4, 0)).x)\n              i = Math.max(start.x, i)\n            }\n            i = this.adjust(conn, i)\n          }\n        }\n        // my tweak to route SCA wires ends\n        positions.add(i)\n        horizontal = !horizontal\n      }\n    }\n    if (horizontal)\n      positions.add(end.y)\n    else\n      positions.add(end.x)\n\n    this.processPositions(start, end, positions, startNormal.isHorizontal(), conn)\n\n\n    this._paint(conn)\n  },\n\n  /**\n   *\n   *\n   * @param {draw2d.Connection} connection\n   * @param {Number} r\n   * @param {Number} n\n   * @param {Number} x\n   *\n   * @private\n   */\n  getColumnNear: function (connection, r, n, x) {\n    let min = Math.min(n, x)\n    let max = Math.max(n, x)\n\n    if (min > r) {\n      max = min\n      min = r - (min - r)\n    }\n    if (max < r) {\n      min = max\n      max = r + (r - max)\n    }\n\n    let proximity = 0\n    let direction = -1\n    if (r % 6 !== 0) {\n      r = r - (r % 6)\n    }\n\n    let i\n    while (proximity < r) {\n      i = parseInt(r + proximity * direction)\n      if (!(i in this.colsUsed)) {\n        this.colsUsed[i] = i\n        this.reserveColumn(connection, i)\n        return i\n      }\n\n      if (i <= min) {\n        return i + 6\n      }\n\n      if (i >= max) {\n        return i - 6\n      }\n\n      if (direction === 1) {\n        direction = -1\n      }\n      else {\n        direction = 1\n        proximity += 6\n      }\n    }\n    return r\n  },\n\n  getRowNear: function (connection, r, n, x) {\n    let min = Math.min(n, x)\n    let max = Math.max(n, x)\n\n    if (min > r) {\n      max = min\n      min = r - (min - r)\n    }\n    if (max < r) {\n      min = max\n      max = r + (r - max)\n    }\n\n    let proximity = 0\n    let direction = -1\n    if (r % 6 !== 0) {\n      r = r - (r % 6)\n    }\n\n    let i\n    while (proximity < r) {\n      i = parseInt(r + proximity * direction)\n      if (!(i in this.rowsUsed)) {\n        this.rowsUsed[i] = i\n        this.reserveRow(connection, i)\n        return i\n      }\n      if (i <= min)\n        return i + 6\n      if (i >= max)\n        return i - 6\n      if (direction === 1)\n        direction = -1\n      else {\n        direction = 1\n        proximity += 6\n      }\n    }\n    return r\n  },\n\n  /**\n   *   <li>up -&gt; 0</li>\n   *   <li>right -&gt; 1</li>\n   *   <li>down -&gt; 2</li>\n   *   <li>left -&gt; 3</li>\n   **/\n  getEndDirection: function (conn) {\n    let p = conn.getEndPoint()\n    let rect = conn.getTarget().getParent().getBoundingBox()\n    return this.getDirection(rect, p)\n  },\n\n\n  /**\n   *   <li>up -&gt; 0</li>\n   *   <li>right -&gt; 1</li>\n   *   <li>down -&gt; 2</li>\n   *   <li>left -&gt; 3</li>\n   **/\n  getStartDirection: function (conn) {\n    let p = conn.getStartPoint()\n    let rect = conn.getSource().getParent().getBoundingBox()\n    return this.getDirection(rect, p)\n  },\n\n  /**\n   * Returns the direction the point <i>p</i> is in relation to the given rectangle.\n   * Possible values are LEFT (-1,0), RIGHT (1,0), UP (0,-1) and DOWN (0,1).\n   *\n   * @param r the rectangle\n   * @param p the point\n   * @returns the direction from <i>r</i> to <i>p</i>\n   */\n  getDirection: function (r, p) {\n    let i = Math.abs(r.y - p.y)\n    let distance = Math.abs(r.x - p.x)\n    let direction = this.LEFT\n\n    if (i <= distance) {\n      distance = i\n      direction = this.UP\n    }\n\n    i = Math.abs(r.getBottom() - p.y)\n    if (i <= distance) {\n      distance = i\n      direction = this.DOWN\n    }\n\n    i = Math.abs(r.getRight() - p.x)\n    if (i < distance) {\n      direction = this.RIGHT\n    }\n\n    return direction\n  },\n\n  processPositions: function (/*Ray*/ start, /*Ray*/ end, /*List*/ positions, /*boolean*/ horizontal, /*Connection*/ conn) {\n    this.removeReservedLines(conn)\n\n    let pos = []\n    if (horizontal)\n      pos.push(start.x)\n    else\n      pos.push(start.y)\n    let i\n    for (i = 0; i < positions.getSize(); i++) {\n      pos.push(positions.get(i))\n    }\n\n    if (horizontal === (positions.getSize() % 2 === 1)) {\n      pos.push(end.x)\n    }\n    else {\n      pos.push(end.y)\n    }\n\n    conn.addPoint(new draw2d.geo.Point(start.x, start.y))\n    let p\n    let current, prev, min, max\n    let adjust\n    for (i = 2; i < pos.length - 1; i++) {\n      horizontal = !horizontal\n      prev = pos[i - 1]\n      current = pos[i]\n\n      adjust = (i !== pos.length - 2)\n      if (horizontal) {\n        if (adjust) {\n          min = pos[i - 2]\n          max = pos[i + 2]\n          pos[i] = current = this.getRowNear(conn, current, min, max)\n        }\n        p = new draw2d.geo.Point(prev, current)\n      } else {\n        if (adjust) {\n          min = pos[i - 2]\n          max = pos[i + 2]\n          pos[i] = current = this.getColumnNear(conn, current, min, max)\n        }\n        p = new draw2d.geo.Point(current, prev)\n      }\n      conn.addPoint(p)\n    }\n    conn.addPoint(new draw2d.geo.Point(end.x, end.y))\n  },\n\n\n  removeReservedLines: function (connection) {\n    let rInfo = this.reservedInfo[connection]\n    if (typeof rInfo === \"undefined\" || rInfo === null)\n      return\n\n    for (let i = 0; i < rInfo.reservedRows.getSize(); i++) {\n      delete this.rowsUsed[rInfo.reservedRows.get(i)]\n    }\n    for (let i = 0; i < rInfo.reservedCols.getSize(); i++) {\n      delete this.colsUsed[rInfo.reservedCols.get(i)]\n    }\n    delete this.reservedInfo[connection]\n  },\n\n  reserveColumn: function (connection, column) {\n    let info = this.reservedInfo[connection]\n    if (typeof info === \"undefined\" || info === null) {\n      info = {reservedCols: new draw2d.util.ArrayList(), reservedRows: new draw2d.util.ArrayList()}\n      this.reservedInfo[connection] = info\n    }\n    info.reservedCols.add(column)\n  },\n\n  reserveRow: function (connection, row) {\n    let info = this.reservedInfo[connection]\n    if (typeof info === \"undefined\" || info === null) {\n      info = {reservedCols: new draw2d.util.ArrayList(), reservedRows: new draw2d.util.ArrayList()}\n      this.reservedInfo[connection] = info\n    }\n    info.reservedRows.add(row)\n  },\n\n  getConstraint: function (connection) {\n    return this.constraints[connection]\n  },\n\n  setConstraint: function (connection, constraint) {\n    this.constraints[connection] = constraint\n  },\n\n  isCycle: function (conn) {\n    let source = conn.getSource().getParent()\n    let target = conn.getTarget().getParent()\n\n    return source.id === target.id\n  },\n\n  getExcludingFigures: function (conn) {\n    let excluding = new draw2d.util.ArrayList()\n\n    excluding.add(conn.getSource().getParent())\n    excluding.add(conn.getTarget().getParent())\n\n    return excluding\n  },\n\n  findFirstFigureAtStraightLine: function (canvas, /*Ray*/ start, /*Ray*/ direction, /*List*/ excluding) {\n    let figure = null\n\n    let figures = canvas.getFigures()\n    let _this = this\n    figures.each(function (i, child) {\n      try {\n        if (!excluding.contains(child)) {\n          let rect = child.getBoundingBox()\n          if (_this.LEFT.equals(direction)) {\n            if (start.x > rect.x && start.y >= rect.y && start.y <= rect.y + rect.h) {\n              if (figure === null || rect.x > figure.getBoundingBox().x)\n                figure = child\n            }\n          } else if (_this.RIGHT.equals(direction)) {\n            if (start.x < rect.x + rect.w && start.y >= rect.y && start.y <= rect.y + rect.h) {\n              if (figure == null || rect.x < figure.getBoundingBox().x)\n                figure = child\n            }\n          } else if (_this.UP.equals(direction)) {\n            if (start.y > rect.y && start.x >= rect.x && start.x <= rect.x + rect.w) {\n              if (figure === null || rect.y > figure.getBoundingBox().y)\n                figure = child\n            }\n          } else if (_this.DOWN.equals(direction)) {\n            if (start.y < rect.y + rect.h && start.x >= rect.x && start.x <= rect.x + rect.w) {\n              if (figure === null || rect.y < figure.getBoundingBox().y)\n                figure = child\n            }\n          }\n        }\n      }\n      catch (exc) {\n        console.log(exc)\n        debugger\n      }\n    })\n    return figure\n  },\n\n  adjust: function (connection, col) {\n    let column = col\n\n    let start = connection.getSource().getPosition()\n\n    let connections = connection.getCanvas().getLines()\n    connections.each(function (i, conn) {\n      try {\n        if (conn === connection)\n          return\n\n        let end = conn.getTarget().getPosition()\n        if (start.x < end.x && start.y === end.y) {\n          if (conn.getVertices().getMidpoint().x <= col)\n            column = conn.getVertices().getMidpoint().x - 5\n        }\n      }\n      catch (exc) {\n        console.log(exc)\n        debugger\n      }\n    })\n    return column\n  }\n\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Router for direct connections between two ports with a rubber band effect\n *\n *\n * @example\n *\n *    let RubberConnection= draw2d.Connection.extend({\n *        NAME: \"RubberConnection\",\n *\n *        init:function(attr, setter, getter)\n *        {\n *          this._super(extend({\n *              color: \"#33691e\",\n *              stroke:1,\n *              outlineStroke:0,\n *              outlineColor:null\n *          },attr),\n *          setter,\n *          getter);\n *\n *\n *          this.setRouter(new draw2d.layout.connection.RubberbandRouter());\n *        },\n *\n *        repaint:function(attributes)\n *        {\n *            if (this.repaintBlocked===true || this.shape === null){\n *                return;\n *            }\n *            attributes= attributes || {};\n *            // enrich the rendering with a \"fill\" attribute\n *            if(typeof attributes.fill === \"undefined\"){\n *            \t   attributes.fill = \"#aed581\";\n *            }\n *            this._super(attributes);\n *       }\n *    });\n *\n *    let createConnection=function(){\n *       let con = new RubberConnection();\n *       return con;\n *    };\n *\n *    // install a custom connection create policy\n *    //\n *    canvas.installEditPolicy(  new draw2d.policy.connection.DragConnectionCreatePolicy({\n *           createConnection: createConnection\n *    }));\n *\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let start = new draw2d.shape.node.Start();\n *    let end   = new draw2d.shape.node.End();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,80);\n *\n *    // first Connection\n *    //\n *    let c = createConnection();\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *    canvas.add(c);\n *\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends  draw2d.layout.connection.ConnectionRouter\n */\ndraw2d.layout.connection.RubberbandRouter = draw2d.layout.connection.ConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.RubberbandRouter.prototype */\n  {\n\n  NAME: \"draw2d.layout.connection.RubberbandRouter\",\n\n  /**\n   * Creates a new Router object\n   *\n   */\n  init: function () {\n    this._super()\n  },\n\n\n  /**\n   * \n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.Connection} connection The assigned connection\n   * @template\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n    connection.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy())\n\n  },\n\n  /**\n   * \n   * Invalidates the given Connection\n   */\n  invalidate: function () {\n  },\n\n  /**\n   * @inheritdoc\n   */\n  route: function (connection, routingHints) {\n    let thickness = 10\n\n    let start = connection.getStartPoint()\n    let end = connection.getEndPoint()\n\n    // 1. Calculate the vector AB→ by subtracting the coordinates of A from the coordinates of B.\n    //    Let's say you get (u,v) as the vector components.\n    //\n    // 2. normalize the vector (u,v,) to a length of |1|\n    //\n    // 3. The vector (−v,u) is AB→ rotated by 90 degrees counterclockwise. (Why? Look up \"rotation matrix\").\n    //\n    // 4. Add (−v,u) to A to get C. Also add (−v,u) to B to get D.\n\n    let uv = end.subtract(start)\n    let uv2 = uv.clone()\n    let length = uv.length()\n\n    let strength = 1 - Math.min(0.75, (1 / 500 * length))\n    let first = start.lerp(end, 0.25 * strength)     // go closer to the start point if the strength grows\n    let second = start.lerp(end, 0.5)\n    let third = start.lerp(end, 1 - (0.25 * strength)) // go closer to the end point if the strengths grows\n\n    thickness = Math.max(5, thickness * strength)\n\n    uv.x = uv.x / length * thickness\n    uv.y = uv.y / length * thickness\n\n    uv2.x = uv2.x / length * (thickness * (strength))\n    uv2.y = uv2.y / length * (thickness * (strength))\n\n    // anchor points for the 180 arc at the start point of the connection\n    //\n    let start90 = new draw2d.geo.Point(-uv.y + start.x, uv.x + start.y)\n    let start270 = new draw2d.geo.Point(uv.y + start.x, -uv.x + start.y)\n\n    // anchor point in the first segment ( on the upside/downside) of the connection\n    //\n    let first90 = new draw2d.geo.Point(-uv2.y + first.x, uv2.x + first.y)\n    let first270 = new draw2d.geo.Point(uv2.y + first.x, -uv2.x + first.y)\n\n    // center upside/downside anchor point of the connection\n    //\n    let second90 = new draw2d.geo.Point(-uv2.y + second.x, uv2.x + second.y)\n    let second270 = new draw2d.geo.Point(uv2.y + second.x, -uv2.x + second.y)\n\n    // anchor point in the third segment of the connection\n    //\n    let third90 = new draw2d.geo.Point(-uv2.y + third.x, uv2.x + third.y)\n    let third270 = new draw2d.geo.Point(uv2.y + third.x, -uv2.x + third.y)\n\n    // anchor point for the 180 arc at the end\n    //\n    let end90 = new draw2d.geo.Point(-uv.y + end.x, uv.x + end.y)\n    let end270 = new draw2d.geo.Point(uv.y + end.x, -uv.x + end.y)\n\n    // required for hit tests\n    //\n    connection.addPoint(start)\n    connection.addPoint(end)\n\n    // calculate the path\n    let path = [\"M\", start90.x, \",\", start90.y]\n    path.push(\"A\", thickness, \",\", thickness, \"0 0 1 \", start270.x, \",\", start270.y)\n    path.push(\"C\", start270.x, \",\", start270.y, first270.x, \",\", first270.y, second270.x, \",\", second270.y)\n    path.push(\"C\", second270.x, \",\", second270.y, third270.x, \",\", third270.y, end270.x, \",\", end270.y)\n    path.push(\"A\", thickness, \",\", thickness, \"0 0 1\", end90.x, \",\", end90.y)\n    path.push(\"C\", end90.x, \",\", end90.y, third90.x, \",\", third90.y, second90.x, \",\", second90.y)\n    path.push(\"C\", second90.x, \",\", second90.y, first90.x, \",\", first90.y, start90.x, \",\", start90.y)\n\n    connection.svgPathString = path.join(\" \")\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Provide a router which routes the connection in a hand drawn manner.\n *\n * @example\n *\n *    let createConnection=function(){\n *       let con = new draw2d.Connection();\n *       con.setRouter(new draw2d.layout.connection.SketchConnectionRouter());\n *       return con;\n *    };\n *\n *    // install a custom connection create policy\n *    //\n *    canvas.installEditPolicy(  new draw2d.policy.connection.DragConnectionCreatePolicy({\n *           createConnection: createConnection\n *    }));\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let f1 = new draw2d.shape.analog.OpAmp({x:10, y:10});\n *    let f2 = new draw2d.shape.analog.ResistorVertical({angle:90, height:20, x:300, y:150});\n *\n *    // ...add it to the canvas\n *    //\n *    canvas.add( f1);\n *    canvas.add( f2);\n *\n *    // first Connection\n *    //\n *    let c = createConnection();\n *    c.setSource(f1.getOutputPort(0));\n *    c.setTarget(f2.getHybridPort(0));\n *    canvas.add(c);\n *\n * @inheritable\n * @author Andreas Herz\n * @since 2.7.2\n * @extends  draw2d.layout.connection.MazeConnectionRouter\n */\ndraw2d.layout.connection.SketchConnectionRouter = draw2d.layout.connection.MazeConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.SketchConnectionRouter.prototype */\n  {\n  NAME: \"draw2d.layout.connection.SketchConnectionRouter\",\n\n  /**\n   * Creates a new Router object.\n   *\n   */\n  init: function () {\n    this._super()\n\n    this.useSpline = true\n    this.useShift = 5\n    this.useSimplifyValue = 0.2\n    this.finder = new PF.JumpPointFinder({allowDiagonal: false, dontCrossCorners: true})\n  },\n\n  /**\n   *\n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.Connection} connection The assigned connection\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n    connection.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy())\n\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A ManhattanConnectionRouter with an spline interpolation between the bend points.\n *\n * @example\n *\n *    let createConnection=function(){\n *       let con = new draw2d.Connection();\n *       con.setRouter(new draw2d.layout.connection.SplineConnectionRouter());\n *       return con;\n *    };\n *\n *    // install a custom connection create policy\n *    //\n *    canvas.installEditPolicy(  new draw2d.policy.connection.DragConnectionCreatePolicy({\n *           createConnection: createConnection\n *    }));\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let f1 = new draw2d.shape.analog.OpAmp({x:10, y:10});\n *    let f2 = new draw2d.shape.analog.ResistorVertical({angle:90, height:20, x:300, y:150});\n *\n *    // ...add it to the canvas\n *    //\n *    canvas.add( f1);\n *    canvas.add( f2);\n *\n *    // first Connection\n *    //\n *    let c = createConnection();\n *    c.setSource(f1.getOutputPort(0));\n *    c.setTarget(f2.getHybridPort(0));\n *    canvas.add(c);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.layout.connection.ManhattanConnectionRouter\n */\ndraw2d.layout.connection.SplineConnectionRouter = draw2d.layout.connection.ManhattanConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.SplineConnectionRouter.prototype */\n  {\n  \n  NAME: \"draw2d.layout.connection.SplineConnectionRouter\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function () {\n    this._super()\n\n//        this.spline = new draw2d.util.spline.CatmullRomSpline();\n    this.spline = new draw2d.util.spline.CubicSpline()\n//        this.spline = new draw2d.util.spline.BezierSpline();\n\n    this.MINDIST = 50\n  },\n\n\n  /**\n   *\n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.Connection} connection The assigned connection\n   * @template\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n    connection.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy())\n  },\n\n  /**\n   * @inheritdoc\n   */\n  route: function (conn, routingHints) {\n    let i\n    let fromPt = conn.getStartPoint()\n    let fromDir = conn.getSource().getConnectionDirection(conn.getTarget())\n\n    let toPt = conn.getEndPoint()\n    let toDir = conn.getTarget().getConnectionDirection(conn.getSource())\n    \n    // calculate the manhatten bend points between start/end.\n    //\n    this._route(conn, toPt, toDir, fromPt, fromDir)\n\n    let ps = conn.getVertices()\n\n    conn.oldPoint = null\n    conn.lineSegments = new draw2d.util.ArrayList()\n    conn.vertices = new draw2d.util.ArrayList()\n\n    let splinePoints = this.spline.generate(ps, 8)\n    splinePoints.each( (i, e) => {\n      conn.addPoint(e)\n    })\n\n    // calculate the path string for the SVG rendering\n    //\n    ps = conn.getVertices()\n    let length = ps.getSize()\n    let p = ps.get(0)\n    let path = [\"M\", p.x.toFixed(2), \" \", p.y.toFixed(2)]\n    for (i = 1; i < length; i++) {\n      p = ps.get(i)\n      path.push(\"L\", p.x.toFixed(2), \" \", p.y.toFixed(2))\n    }\n    conn.svgPathString = path.join(\"\")\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A Router with unlimited vertices.\n *\n *\n * @example\n *\n *    // Override the default connection type. This is used during drag&drop operations of ports.\n *    //\n *    let createConnection=function(){\n *       // return my special kind of connection\n *       let con = new draw2d.Connection();\n *       con.setRouter(new draw2d.layout.connection.VertexRouter());\n *       return con;\n *    };\n *\n *    // Install a special policy into the canvas to use my own implementation of connection\n *    // if we drag&drop a port\n *    //\n *    canvas.installEditPolicy(  new draw2d.policy.connection.DragConnectionCreatePolicy({\n *          createConnection: createConnection\n *    }));\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let start = new draw2d.shape.node.Start();\n *    let end   = new draw2d.shape.node.End();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,80);\n *\n *    // first Connection\n *    //\n *    let c = createConnection();\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *    canvas.add(c);\n *\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends  draw2d.layout.connection.ConnectionRouter\n */\ndraw2d.layout.connection.VertexRouter = draw2d.layout.connection.ConnectionRouter.extend(\n  /** @lends draw2d.layout.connection.VertexRouter.prototype */\n  {\n  \n  NAME: \"draw2d.layout.connection.VertexRouter\",\n\n  /**\n   * Creates a new Router object\n   *\n   */\n  init: function () {\n    this._super()\n  },\n\n\n  /**\n   *\n   * Callback method if the router has been assigned to a connection.\n   *\n   * @param {draw2d.Connection} connection The assigned connection\n   * @template\n   * @since 2.7.2\n   */\n  onInstall: function (connection) {\n    connection.installEditPolicy(new draw2d.policy.line.VertexSelectionFeedbackPolicy())\n  },\n\n  /**\n   *\n   * Invalidates the given Connection\n   */\n  invalidate: function () {\n  },\n\n  /**\n   * @inheritdoc\n   */\n  route: function (connection, routingHints) {\n    // reuse all existing vertex points\n    //\n    let count = routingHints.oldVertices.getSize()\n    for (let i = 0; i < count; i++) {\n      connection.addPoint(routingHints.oldVertices.get(i))\n    }\n\n    let ps = connection.getVertices()\n\n    // respect the calculated anchor position if the start/end port has set any Anchor impl.\n    let startAnchor = connection.getStartPosition(ps.get(1))\n    let endAnchor = connection.getEndPosition(ps.get(ps.getSize() - 2))\n    ps.first().setPosition(startAnchor)\n    ps.last().setPosition(endAnchor)\n\n    this._paint(connection)\n  },\n\n  /**\n   *\n   * Callback method for the PolyLine or Connection to check if it possible to remove a vertex from\n   * the list. The router can send an veto for this.\n   * Per default it is not possible to remove any vertex from the PolyLine exceptional if any interactive\n   * router is installed.\n   *\n   * @param {draw2d.Connection} conn\n   * @param {Number} index\n   *\n   * @since 4.2.3\n   */\n  canRemoveVertexAt: function (conn, index) {\n    return false\n  },\n\n  /**\n   * Callback method for the PolyLine or Connection to verify that a segment is deletable.\n   *\n   * @param {draw2d.Connection} conn\n   * @param {Number} index\n   *\n   * @returns {Boolean}\n   * @since 4.2.3\n   */\n  canRemoveSegmentAt: function (conn, index) {\n\n    let segmentCount = conn.getVertices().getSize() - 1 // segmentCount is one less than vertex count\n\n    // The first and last segment isn't deletable\n    //\n    if ((index <= 0) || (index >= segmentCount)) {\n      return false\n    }\n\n    // a connection need at least one strokes\n    //\n    return (segmentCount >= 2)\n  },\n\n\n  /**\n   *\n   * Tweak or enrich the polyline persistence data with routing information\n   *\n   * @since 2.10.0\n   * @param {draw2d.shape.basic.PolyLine} line\n   * @param {Object} memento The memento data of the polyline\n   *\n   * @returns {Object}\n   */\n  getPersistentAttributes: function (line, memento) {\n    memento.vertex = []\n\n    line.getVertices().each(function (i, e) {\n      memento.vertex.push({x: e.x, y: e.y})\n    })\n\n    return memento\n  },\n\n  /**\n   *\n   * set the attributes for the polyline with routing information\n   *\n   * @since 2.10.0\n   * @param {Object} memento\n   */\n  setPersistentAttributes: function (line, memento) {\n    // restore the points from the JSON data and add them to the polyline\n    //\n    if (Array.isArray(memento.vertex) && memento.vertex.length > 1) {\n\n      line.oldPoint = null\n      line.lineSegments = new draw2d.util.ArrayList()\n\n      line.setVertices(memento.vertex)\n    }\n  },\n\n  /**\n   *\n   *\n   * The draw2d.Connection delegates the drag operation to the router. The router can\n   * handle the different constraints of the connection and just drag&drop a single segment\n   * instead of the complete connection.\n   *\n   * @param {draw2d.shape.basic.Line} line the related line to handle\n   * @param {Number} dx the x difference between the start of the drag drop operation and now\n   * @param {Number} dy the y difference between the start of the drag drop operation and now\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   *\n   * @since 6.1.0\n   */\n  onDrag: function (line, dx, dy, dx2, dy2) {\n    let count = line.getVertices().getSize() - 1\n    for (let i = 1; i < count; i++) {\n      line.getVertex(i).translate(dx2, dy2)\n    }\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A bottomLocator is used to place figures at the bottom of a parent shape.\n *\n *\n *\n * @example\n *\n *    // create a basic figure and add a Label/child via API call\n *    //\n *    let circle = new draw2d.shape.basic.Circle({\n *        x:100,\n *        y:50,\n *        diameter:100,\n *        stroke: 3,\n *        color:\"#A63343\",\n *        bgColor:\"#E65159\"\n *    });\n *\n *    circle.add(new draw2d.shape.basic.Label({text:\"Bottom Label\"}), new draw2d.layout.locator.BottomLocator());\n *    canvas.add( circle);\n *\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.Locator\n */\ndraw2d.layout.locator.BottomLocator = draw2d.layout.locator.Locator.extend(\n  /** @lends draw2d.layout.locator.BottomLocator.prototype */\n  {\n\n  NAME: \"draw2d.layout.locator.BottomLocator\",\n\n  /**\n   *\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   * \n   * Relocates the given Figure.\n   *\n   * @param {Number} index child index of the target\n   * @param {draw2d.Figure} target The figure to relocate\n   **/\n  relocate: function (index, target) {\n    let parent = target.getParent()\n    let boundingBox = parent.getBoundingBox()\n    // I made a wrong decision in the port handling: anchor point\n    // is in the center and not topLeft. Now I must correct this flaw here, and there, and...\n    // shit happens.\n    let offset = (parent instanceof draw2d.Port) ? boundingBox.w / 2 : 0\n\n\n    let targetBoundingBox = target.getBoundingBox()\n    if (target instanceof draw2d.Port) {\n      target.setPosition(boundingBox.w / 2 - offset, boundingBox.h)\n    }\n    else {\n      target.setPosition(boundingBox.w / 2 - targetBoundingBox.w / 2 - offset, 2 + boundingBox.h)\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A CenterLocator is used to place figures in the center of a parent shape.\n *\n *\n *\n * @example\n *\n *\n *    // create a basic figure and add a Label/child via API call\n *    //\n *    let circle = new draw2d.shape.basic.Circle({diameter:120});\n *    circle.setStroke(3);\n *    circle.setColor(\"#A63343\");\n *    circle.setBackgroundColor(\"#E65159\");\n *    circle.add(new draw2d.shape.basic.Label({text:\"Center Label\"}), new draw2d.layout.locator.CenterLocator());\n *    canvas.add( circle, 100,50);\n *\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.Locator\n */\ndraw2d.layout.locator.CenterLocator = draw2d.layout.locator.Locator.extend(\n  /** @lends draw2d.layout.locator.CenterLocator.prototype */\n  {\n\n  NAME: \"draw2d.layout.locator.CenterLocator\",\n\n  /**\n   * Constructs a locator with associated parent.\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   * \n   * Relocates the given Figure.\n   *\n   * @param {Number} index child index of the target\n   * @param {draw2d.Figure} target The figure to relocate\n   **/\n  relocate: function (index, target) {\n    let parent = target.getParent()\n    let boundingBox = parent.getBoundingBox()\n\n    // TODO: instanceof is always a HACK. ugly. Redirect the call to the figure instead of \n    // determine the position with a miracle.\n    //\n    if (target instanceof draw2d.Port) {\n      target.setPosition(boundingBox.w / 2, boundingBox.h / 2)\n    }\n    else {\n      let targetBoundingBox = target.getBoundingBox()\n      target.setPosition(((boundingBox.w / 2 - targetBoundingBox.w / 2) | 0) + 0.5, ((boundingBox.h / 2 - (targetBoundingBox.h / 2)) | 0) + 0.5)\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Repositions a Figure attached to a Connection when the\n * Connection is moved. Provides for alignment at the start\n * (source), middle, or end (target) of the Connection.\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.Locator\n */\ndraw2d.layout.locator.ConnectionLocator = draw2d.layout.locator.Locator.extend(\n  /** @lends draw2d.layout.locator.ConnectionLocator.prototype */\n  {\n  \n  NAME: \"draw2d.layout.locator.ConnectionLocator\",\n\n  /**\n   * Default constructor for a Locator which can layout a figure in context of a\n   * {@link draw2d.Connector}\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A DraggableLocator is used to place figures relative to the parent top left corner. It is\n * possible to move a child node via drag&drop.\n *\n *\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.Locator\n */\ndraw2d.layout.locator.DraggableLocator = draw2d.layout.locator.Locator.extend(\n  /** @lends draw2d.layout.locator.DraggableLocator.prototype */\n  {\n  \n  NAME: \"draw2d.layout.locator.DraggableLocator\",\n\n  /**\n   * Constructs a locator with associated parent.\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n  bind: function (parent, child) {\n    // override the parent implementation to avoid\n    // that the child is \"!selectable\" and \"!draggable\"\n\n    // Don't redirect the selection handling to the parent\n    // Using the DraggableLocator provides the ability to the children\n    // that they are selectable and draggable. Remove the SelectionAdapter from the parent\n    // assignment.\n    child.setSelectionAdapter(() => child)\n  },\n\n  unbind: function (parent, child) {\n    // use default\n    child.setSelectionAdapter(null)\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Repositions a Figure attached to a Connection when the\n * Connection is moved. Provides for alignment at the start\n * (source), middle, or end (target) of the Connection.\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.PortLocator\n */\ndraw2d.layout.locator.InputPortLocator = draw2d.layout.locator.PortLocator.extend(\n  /** @lends draw2d.layout.locator.InputPortLocator.prototype */\n  {\n\n  NAME: \"draw2d.layout.locator.InputPortLocator\",\n\n  /**\n   * Default constructor for a Locator which can layout a port in context of a\n   * {@link draw2d.shape.node.Node}\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n  /**\n   *\n   * Controls the location of an {@link draw2d.Figure}\n   *\n   * @param {Number} index port index of the figure\n   * @param {draw2d.Figure} figure the figure to control\n   *\n   * @template\n   **/\n  relocate: function (index, figure) {\n    let node = figure.getParent()\n\n    let dividerFactor = 1\n    let thisNAME = this.NAME\n    let portIndex = 1\n    node.getPorts().each((i, p) => {\n      portIndex = (p === figure) ? dividerFactor : portIndex\n      dividerFactor += p.getLocator().NAME === thisNAME ? 1 : 0\n    })\n    this.applyConsiderRotation(figure, 0, (node.getHeight() / dividerFactor) * portIndex)\n  }\n\n})\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A LeftLocator is used to place figures to the left of a parent shape.\n *\n *\n *\n * @example\n *\n *    // create a basic figure and add a Label/child via API call\n *    //\n *    let start = new draw2d.shape.node.Start();\n *    start.add(new draw2d.shape.basic.Label({text:\"Left Label\"}), new draw2d.layout.locator.LeftLocator({\n *     margin:10  // distance to the parent shape\n *    }));\n *    canvas.add( start, 100,50);\n *\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.Locator\n */\ndraw2d.layout.locator.LeftLocator = draw2d.layout.locator.Locator.extend(\n  /** @lends draw2d.layout.locator.LeftLocator.prototype */\n  {\n\n  NAME: \"draw2d.layout.locator.LeftLocator\",\n\n  /**\n   * Constructs a locator with associated parent.\n   *\n   * @param {Object} attr additional init attributes\n   * @param {Object} setter key/value map of injected setter-methods\n   * @param {Object} getter key/value map of injected getter-methods\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter,getter)\n\n    this.margin = (attr && (\"margin\" in attr)) ? attr.margin : 5\n  },\n\n\n  /**\n   *\n   * Relocates the given Figure.\n   *\n   * @param {Number} index child index of the target\n   * @param {draw2d.Figure} target The figure to relocate\n   **/\n  relocate: function (index, target) {\n    let parent = target.getParent()\n    let boundingBox = parent.getBoundingBox()\n\n    // I made a wrong decision in the port handling: anchor point\n    // is in the center and not topLeft. Now I must correct this flaw here, and there, and...\n    // shit happens.\n    let offset = (parent instanceof draw2d.Port) ? boundingBox.h / 2 : 0\n\n\n    if (target instanceof draw2d.Port) {\n      target.setPosition(0, (boundingBox.h / 2) - offset)\n    }\n    else {\n      let targetBoundingBox = target.getBoundingBox()\n      target.setPosition(-targetBoundingBox.w - this.margin, (boundingBox.h / 2) - (targetBoundingBox.h / 2) - offset)\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Controls the location of an IFigure.\n *\n * @author Andreas Herz\n */\ndraw2d.layout.locator.Locator = Class.extend(\n  /** @lends draw2d.layout.locator.Locator.prototype */\n  {\n\n    NAME: \"draw2d.layout.locator.Locator\",\n\n    /**\n     * Initial Constructor\n     *\n     * @param {Object} attr additional init attributes\n     * @param {Object} setter key/value map of injected setter-methods\n     * @param {Object} getter key/value map of injected getter-methods\n     */\n    init: function (attr, setter, getter) {\n\n      this.setterWhitelist = {...setter}\n      this.getterWhitelist = {...getter}\n      \n      // propagate the attr to the new instance\n      this.attr(attr)\n    },\n\n    /**\n     *\n     * Read or set locator attributes.<br>\n     * When no value is given, reads specified attribute from the element.<br>\n     * When value is given, sets the attribute to that value.\n     * Multiple attributes can be set by passing an object with name-value pairs.\n     *\n     *\n     *    // multiple attributes:\n     *    locator.attr({\n     *      x: 30,\n     *      y: 40\n     *    });\n     *\n     *    let data = locator.attr()\n     *\n     *\n     * @param {String/Object} name\n     * @param {Object} [value]\n     * @since 5.0.1\n     * @experimental\n     * @returns {Object} either the requested attribute if this method used as getter or `this` if the method uses as setter\n     **/\n    attr: function (name, value) {\n      let _this = this\n\n      // call of attr as setter method with {name1:val1, name2:val2 }  argument list\n      //\n      if ($.isPlainObject(name)) {\n        for (let key in name) {\n          let func = this.setterWhitelist[key]\n          let param = name[key]\n          if (func && param !== undefined) {\n            func.call(this, param)\n          }\n        }\n      } else if (typeof name === \"string\") {\n        // call attr as getter\n        //\n        if (typeof value === \"undefined\") {\n          let getter = this.getterWhitelist[name]\n          if (typeof getter === \"function\") {\n            return getter.call(this)\n          }\n          return // undefined\n        }\n\n        // the value can be a function. In this case we must call the value().\n        if (typeof value === \"function\") {\n          value = value()\n        }\n        let setter = this.setterWhitelist[name]\n        if (setter) {\n          setter.call(this, value)\n        }\n      }\n      // may it is a array of attributes used for the getter\n      //\n      else if (Array.isArray(name)) {\n        return Object.assign({}, ...Object.keys(name).map(k => ({[k]: _this.attr(k)})))\n      }\n      // generic getter of all registered attributes\n      else if (typeof name === \"undefined\") {\n        let result = {}\n        for (let key in this.getterWhitelist) {\n          result[key] = this.getterWhitelist[key].call(this)\n        }\n        return result\n      }\n\n      return this\n    },\n\n    /**\n     *\n     * Callback method if a child is bounded to a parent. This is\n     * the perfect moment to prepare the child node with some basic\n     * behaviour which are forced by the <code>Locator</code>\n     *\n     * @param {draw2d.Figure} figure\n     * @param {draw2d.Figure} child\n     * @returns {this}\n     */\n    bind: function (figure, child) {\n      // default behaviour of an Locator. The child isn't draggable and\n      // the locator defines the position of the child.\n      //\n      child.setDraggable(false)\n      child.setSelectable(false)\n\n      return this\n    },\n\n    /**\n     *\n     * Callback method if a child is unbounded to the locator.\n     *\n     * @param {draw2d.Figure} figure\n     * @param {draw2d.Figure} child\n     * @returns {this}\n     */\n    unbind: function (figure, child) {\n\n      return this\n    },\n\n\n    /**\n     *\n     * Controls the location of an I{@link draw2d.Figure}\n     *\n     * @param {Number} index child index of the figure\n     * @param {draw2d.Figure} figure the figure to control\n     *\n     * @private\n     **/\n    relocate: function (index, figure) {\n      // just repaint the child to update the SVG related to the new location\n      // of the parent.\n      figure.repaint()\n    },\n\n    /**\n     *\n     * Return a clone of the locator object\n     *\n     * @returns {draw2d.layout.locator.Locator}\n     */\n    clone: function () {\n      return eval(\"new \" + this.NAME + \"()\")\n    }\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A ManhattanMidpointLocator that is used to place figures at the midpoint of a Manhatten routed\n * connection. The midpoint is always in the center of an edge.\n *\n *\n *\n * @example\n *\n *    // create and add two Node which contains Ports (In and OUT)\n *    let start = new draw2d.shape.node.Start({x:50,y:50});\n *    let end   = new draw2d.shape.node.End({x:230,y:100});\n *\n *    canvas.add( start);\n *    canvas.add( end);\n *\n *    // Create a Connection and connect the Start and End node\n *    //\n *    let c = new draw2d.Connection();\n *    c.setSource(start.getOutputPort(0));\n *    c.setTarget(end.getInputPort(0));\n *    canvas.add(c);\n *\n *    // create a label which should attach to the connection\n *    //\n *    let label = new draw2d.shape.basic.Label({text:\"I'm a Label\"});\n *    label.setColor(\"#0d0d0d\");\n *    label.setFontColor(\"#0d0d0d\");\n *    label.setBackgroundColor(\"#f0f0f0\");\n *\n *    // add the decoration to the connection with a ManhattanMidpointLocator.\n *    //\n *    c.add(label, new draw2d.layout.locator.ManhattanMidpointLocator());\n *\n * @author Andreas Herz\n * @extends draw2d.layout.locator.ConnectionLocator\n */\ndraw2d.layout.locator.ManhattanMidpointLocator = draw2d.layout.locator.ConnectionLocator.extend(\n  /** @lends draw2d.layout.locator.ManhattanMidpointLocator.prototype */\n  {\n\n  NAME: \"draw2d.layout.locator.ManhattanMidpointLocator\",\n\n  /**\n   * Constructs a ManhattanMidpointLocator with associated Connection c.\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   *\n   * Relocates the given Figure always in the center of an edge.\n   *\n   * @param {Number} index child index of the target\n   * @param {draw2d.Figure} target The figure to relocate\n   **/\n  relocate: function (index, target) {\n    let conn = target.getParent()\n    let points = conn.getVertices()\n\n    let segmentIndex = Math.floor((points.getSize() - 2) / 2)\n    if (points.getSize() <= segmentIndex + 1)\n      return\n\n    let p1 = points.get(segmentIndex)\n    let p2 = points.get(segmentIndex + 1)\n\n    target.setPosition(\n      ((p2.x - p1.x) / 2 + p1.x - target.getWidth() / 2) | 0,\n      ((p2.y - p1.y) / 2 + p1.y - target.getHeight() / 2) | 0)\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Repositions a Figure attached to a Connection when the\n * Connection is moved. Provides for alignment at the start\n * (source), middle, or end (target) of the Connection.\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.PortLocator\n */\ndraw2d.layout.locator.OutputPortLocator = draw2d.layout.locator.PortLocator.extend(\n  /** @lends draw2d.layout.locator.OutputPortLocator.prototype */\n  {\n  \n  NAME: \"draw2d.layout.locator.OutputPortLocator\",\n\n  /**\n   * Default constructor for a Locator which can layout a port in context of a\n   * {@link draw2d.shape.node.Node}\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n  /**\n   *\n   * Controls the location of an I{@link draw2d.Figure}\n   *\n   * @param {Number} index child index of the figure\n   * @param {draw2d.Figure} figure the figure to control\n   *\n   * @template\n   **/\n  relocate: function (index, figure) {\n    let node = figure.getParent()\n    let dividerFactor = 1\n    let thisNAME = this.NAME\n    let portIndex = 1\n    node.getPorts().each((i, p) => {\n      portIndex = (p === figure) ? dividerFactor : portIndex\n      dividerFactor += p.getLocator().NAME === thisNAME ? 1 : 0\n    })\n    this.applyConsiderRotation(figure, node.getWidth(), (node.getHeight() / dividerFactor) * portIndex)\n  }\n\n})\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A ParallelMidpointLocator that is used to place label at the midpoint of a  routed\n * connection. The midpoint is always in the center of an edge.\n * The label is aligned to the connection angle at the calculated conection segment.\n *\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.ConnectionLocator\n * @since 4.4.4\n */\ndraw2d.layout.locator.ParallelMidpointLocator = draw2d.layout.locator.ConnectionLocator.extend(\n  /** @lends draw2d.layout.locator.ParallelMidpointLocator.prototype */\n  {\n\n    NAME: \"draw2d.layout.locator.ParallelMidpointLocator\",\n\n    /**\n     * Constructs a ParallelMidpointLocator with optional padding to the connection.\n     *\n     * if the parameter <b>distance</b> is less than zero the label is\n     * placed above of the connection. Else the label is below the connection.\n     *\n     * @param {Object} attr object with {distance: <NUMBER>>} distance of the label to the connection.\n     */\n    init: function (attr, setter, getter) {\n      this.distance = 0\n\n      this._super(\n        {distance: -5, ...attr},\n        {x: this.setDistance,...setter},\n        {distance: this.getDistance,...getter}\n      )\n    },\n\n    /**\n     * Set the distance to the connection\n     *\n     * @param {Number} distance the distance to the connection\n     * @returns {this}\n     */\n    setDistance: function (distance) {\n      this.distance = distance\n      return this\n    },\n\n    /**\n     * Returns the distance to the connection\n     *\n     * @returns {Number}\n     */\n    getDistance: function () {\n      return this.distance\n    },\n\n    /**\n     *\n     * Relocates the given Figure always in the center of an edge.\n     *\n     * @param {Number} index child index of the target\n     * @param {draw2d.Figure} target The figure to relocate\n     **/\n    relocate: function (index, target) {\n      let conn = target.getParent()\n      let points = conn.getVertices()\n\n      let segmentIndex = Math.floor((points.getSize() - 2) / 2)\n      if (points.getSize() <= segmentIndex + 1) {\n        return\n      }\n\n      let p1 = points.get(segmentIndex)\n      let p2 = points.get(segmentIndex + 1)\n\n      // calculate the distance of the label (above or below the connection)\n      let distance = this.distance <= 0 ? this.distance - target.getHeight() : this.distance\n\n      // get the angle of the segment\n      let nx = p1.x - p2.x\n      let ny = p1.y - p2.y\n      let length = Math.sqrt(nx * nx + ny * ny)\n      let radian = -Math.asin(ny / length)\n      let angle = (180 / Math.PI) * radian\n      if (radian < 0) {\n        if (p2.x < p1.x) {\n          radian = Math.abs(radian) + Math.PI\n          angle = 360 - angle\n          distance = -distance - target.getHeight()\n        } else {\n          radian = Math.PI * 2 - Math.abs(radian)\n          angle = 360 + angle\n        }\n      } else {\n        if (p2.x < p1.x) {\n          radian = Math.PI - radian\n          angle = 360 - angle\n          distance = -distance - target.getHeight()\n        }\n      }\n\n      let rotAnchor = this.rotate(length / 2 - target.getWidth() / 2, distance, 0, 0, radian)\n\n      // rotate the x/y coordinate with the calculated angle around \"p1\"\n      //\n      let rotCenterOfLabel = this.rotate(0, 0, target.getWidth() / 2, target.getHeight() / 2, radian)\n\n      target.setRotationAngle(angle)\n      target.setPosition(rotAnchor.x - rotCenterOfLabel.x + p1.x, rotAnchor.y - rotCenterOfLabel.y + p1.y)\n    },\n\n    rotate: function (x, y, xm, ym, radian) {\n      let cos = Math.cos,\n        sin = Math.sin\n\n      // Subtract midpoints, so that midpoint is translated to origin\n      // and add it in the end again\n      return {\n        x: (x - xm) * cos(radian) - (y - ym) * sin(radian) + xm,\n        y: (x - xm) * sin(radian) + (y - ym) * cos(radian) + ym\n      }\n    }\n\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A PolylineMidpointLocator is used to place figures at the midpoint of a routed\n * connection. <br>\n * If the connection did have an odd count of points the figure is located in the center vertex of the polyline.<br>\n * On an even count of junction point, the figure will be center on the middle segment of the ploy line.\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.ManhattanMidpointLocator\n */\ndraw2d.layout.locator.PolylineMidpointLocator = draw2d.layout.locator.ManhattanMidpointLocator.extend(\n  /** @lends draw2d.layout.locator.PolylineMidpointLocator.prototype */\n  {\n\n  NAME: \"draw2d.layout.locator.PolylineMidpointLocator\",\n\n  /**\n   * Constructs a ManhattanMidpointLocator with associated Connection c.\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   *\n   * Relocates the given Figure.\n   *\n   * @param {Number} index child index of the target\n   * @param {draw2d.Figure} target The figure to relocate\n   **/\n  relocate: function (index, target) {\n    var conn = target.getParent()\n    var points = conn.getVertices()\n\n    // it has an event count of points -> use the manhattan algorithm...this is working\n    // well in this case\n    if (points.getSize() % 2 === 0) {\n      this._super(index, target)\n    }\n    // odd count of points. take the center point as fulcrum\n    else {\n      var index = Math.floor(points.getSize() / 2)\n      var p1 = points.get(index)\n      target.setPosition(p1.x - (target.getWidth() / 2), p1.y - (target.getHeight() / 2))\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * The port locator calculates the position of an port. All ports MUST have a locator\n * if you add them as child to a node.\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.Locator\n */\ndraw2d.layout.locator.PortLocator = draw2d.layout.locator.Locator.extend(\n  /** @lends draw2d.layout.locator.PortLocator.prototype */\n  {\n\n  NAME: \"draw2d.layout.locator.PortLocator\",\n\n  /**\n   * Default constructor for a Locator which can layout a port in context of a\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n  applyConsiderRotation: function (port, x, y) {\n    let parent = port.getParent()\n\n    // determine the width/height before manipulate the \n    // matrix of the shape\n    let halfW = parent.getWidth() / 2\n    let halfH = parent.getHeight() / 2\n\n    let rotAngle = parent.getRotationAngle()\n    let m = Raphael.matrix()\n    m.rotate(rotAngle, halfW, halfH)\n    if (rotAngle === 90 || rotAngle === 270) {\n      let ratio = parent.getHeight() / parent.getWidth()\n      m.scale(ratio, 1 / ratio, halfW, halfH)\n    }\n\n    port.setPosition(m.x(x, y), m.y(x, y))\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A RightLocator is used to place figures to the right of a parent shape.\n *\n *\n *\n * @example\n *\n *\n *    // create a basic figure and add a Label/child via API call\n *    //\n *    var end = new draw2d.shape.node.End();\n *    end.add(new draw2d.shape.basic.Label({text:\"Right Label\"}), new draw2d.layout.locator.RightLocator({\n *         margin: 10 // distance to the parent shape\n *    }));\n *    canvas.add( end, 50,50);\n *\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.Locator\n */\ndraw2d.layout.locator.RightLocator = draw2d.layout.locator.Locator.extend(\n  /** @lends draw2d.layout.locator.RightLocator.prototype */\n  {\n  \n  NAME: \"draw2d.layout.locator.RightLocator\",\n\n  /**\n   * Constructs a locator with associated parent.\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    this.margin = (attr && (\"margin\" in attr)) ? attr.margin : 5\n  },\n\n\n  /**\n   * \n   * Relocates the given Figure.\n   *\n   * @param {Number} index child index of the target\n   * @param {draw2d.Figure} target The figure to relocate\n   **/\n  relocate: function (index, target) {\n    var parent = target.getParent()\n    var boundingBox = parent.getBoundingBox()\n\n    // I made a wrong decision in the port handling: anchor point\n    // is in the center and not topLeft. Now I must correct this flaw here, and there, and...\n    // shit happens.\n    var offset = (parent instanceof draw2d.Port) ? boundingBox.h / 2 : 0\n\n    if (target instanceof draw2d.Port) {\n      target.setPosition(boundingBox.w, (boundingBox.h / 2) - offset)\n    }\n    else {\n      var targetBoundingBox = target.getBoundingBox()\n      target.setPosition(boundingBox.w + this.margin, (boundingBox.h / 2) - (targetBoundingBox.h / 2) - offset)\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A DraggableLocator is used to place figures relative to the parent nearest corner. It is\n * possible to move a child node via drag&drop.\n *\n *\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.Locator\n */\ndraw2d.layout.locator.SmartDraggableLocator = draw2d.layout.locator.Locator.extend(\n  /** @lends draw2d.layout.locator.SmartDraggableLocator.prototype */\n  {\n\n  NAME: \"draw2d.layout.locator.SmartDraggableLocator\",\n\n  /**\n   * Constructs a locator with associated parent.\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    // description see \"bind\" method\n    this.boundedCorners = {\n      init: false,\n      parent: 0,\n      child: 0,\n      dist: Number.MAX_SAFE_INTEGER,\n      xOffset: 0,\n      yOffset: 0\n    }\n\n  },\n\n  bind: function (parent, child) {\n    let _this = this\n    // determine the best corner of the parent/child node and stick to the calculated corner\n    // In the example below it is R1.2 in combination with R2.0\n    //\n    //     0             1\n    //      +-----------+\n    //      |           |\n    //      |    R1     |\n    //      +-----------+\n    //     3             2\n    //\n    //              0             1\n    //               +-----------+\n    //               |           |\n    //               |    R2     |\n    //               +-----------+\n    //              3             2\n    //\n    let calcBoundingCorner = function () {\n      _this.boundedCorners = {\n        init: false,\n        parent: 0,\n        child: 0,\n        dist: Number.MAX_SAFE_INTEGER,\n        xOffset: 0,\n        yOffset: 0\n      }\n      let parentVertices = child.getParent().getBoundingBox().getVertices()\n      let childVertices = child.getBoundingBox().getVertices()\n      let i_parent, i_child\n      let p1, p2, distance\n      for (i_parent = 0; i_parent < parentVertices.getSize(); i_parent++) {\n        for (i_child = 0; i_child < childVertices.getSize(); i_child++) {\n          p1 = parentVertices.get(i_parent)\n          p2 = childVertices.get(i_child)\n          distance = Math.abs(p1.distance(p2))\n          if (distance < _this.boundedCorners.dist) {\n            _this.boundedCorners = {\n              parent: i_parent,\n              child: i_child,\n              dist: distance,\n              xOffset: p1.x - p2.x,\n              yOffset: p1.y - p2.y\n            }\n          }\n        }\n      }\n      _this.boundedCorners.init = true\n    }\n\n    // override the parent implementation to avoid\n    // that the child is \"!selectable\" and \"!draggable\"\n\n    // Don't redirect the selection handling to the parent\n    // Using the DraggableLocator provides the ability to the children\n    // that they are selectable and draggable. Remove the SelectionAdapter from the parent\n    // assignment.\n    child.setSelectionAdapter( () => child)\n\n    child.getParent().on(\"added\", calcBoundingCorner)\n    child.on(\"dragend\", calcBoundingCorner)\n  },\n\n  unbind: function (parent, child) {\n    // use default\n    child.setSelectionAdapter(null)\n  },\n\n\n  /**\n   * \n   * Controls the location of an I{@link draw2d.Figure}\n   *\n   * @param {Number} index child index of the figure\n   * @param {draw2d.Figure} figure the figure to control\n   *\n   * @template\n   **/\n  relocate: function (index, figure) {\n    this._super(index, figure)\n    if (this.boundedCorners.init === true) {\n      let parentVertices = figure.getParent().getBoundingBox().getVertices()\n      let childVertices = figure.getBoundingBox().getVertices()\n      let p1 = parentVertices.get(this.boundedCorners.parent)\n      let p2 = childVertices.get(this.boundedCorners.child)\n\n      let xOffset = p1.x - p2.x\n      let yOffset = p1.y - p2.y\n      // restore the initial distance from the corner by adding the new offset\n      // to the position of the child\n      figure.translate(xOffset - this.boundedCorners.xOffset, yOffset - this.boundedCorners.yOffset)\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A TopLocator  is used to place figures at the top/center of a parent shape.\n *\n *\n *\n * @example\n *\n *    // create a basic figure and add a Label/child via API call\n *    //\n *    let circle = new draw2d.shape.basic.Circle({\n *        x:100,\n *        y:70,\n *        diameter:80,\n *        stroke: 3,\n *        color:\"#A63343\",\n *        bgColor:\"#E65159\"\n *    });\n *\n *    circle.add(new draw2d.shape.basic.Label({text:\"Top Label\"}), new draw2d.layout.locator.TopLocator());\n *    canvas.add( circle);\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.Locator\n */\ndraw2d.layout.locator.TopLocator = draw2d.layout.locator.Locator.extend(\n  /** @lends draw2d.layout.locator.TopLocator.prototype */\n  {\n\n  NAME: \"draw2d.layout.locator.TopLocator\",\n\n  /**\n   * Constructs a ManhattanMidpointLocator with associated Connection c.\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   * \n   * Relocates the given Figure.\n   *\n   * @param {Number} index child index of the target\n   * @param {draw2d.Figure} target The figure to relocate\n   **/\n  relocate: function (index, target) {\n    let parent = target.getParent()\n    let boundingBox = parent.getBoundingBox()\n\n    // I made a wrong decision in the port handling: anchor point\n    // is in the center and not topLeft. Now I must correct this flaw here, and there, and...\n    // shit happens.\n    let offset = (parent instanceof draw2d.Port) ? boundingBox.w / 2 : 0\n\n\n    let targetBoundingBox = target.getBoundingBox()\n    if (target instanceof draw2d.Port) {\n      target.setPosition(boundingBox.w / 2 - offset, 0)\n    }\n    else {\n      target.setPosition(boundingBox.w / 2 - (targetBoundingBox.w / 2) - offset, -(targetBoundingBox.h + 2))\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Create a locator for fixed x/y coordinate position. The port in the example below is\n * always 20px below of the top border.\n *\n *\n * @example\n *\n *    var figure =  new draw2d.shape.basic.Rectangle({x:130,y:30,width:100,height:60});\n *    figure.createPort(\"input\", new draw2d.layout.locator.XYAbsPortLocator(0,20));\n *\n *    canvas.add(figure);\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.PortLocator\n * @since 4.0.0\n */\ndraw2d.layout.locator.XYAbsPortLocator = draw2d.layout.locator.PortLocator.extend(\n  /** @lends draw2d.layout.locator.XYAbsPortLocator.prototype */\n  {\n\n    NAME: \"draw2d.layout.locator.XYAbsPortLocator\",\n\n    /**\n     *\n     * {@link draw2d.shape.node.Node}\n     *\n     * @param {Number} x the x coordinate of the port relative to the left of the parent\n     * @param {Number} y the y coordinate of the port relative to the top of the parent\n     */\n    init: function (attr, setter, getter) {\n      this.x = 0\n      this.y = 0\n\n      this._super(attr,\n        {\n          x: this.setX,\n          y: this.setY,\n         ...setter},\n        {\n          x: this.getX,\n          y: this.getY,\n          ...getter})\n    },\n\n    /**\n     * Set the X Offset for the Locator\n     * @param {Number} x\n     */\n    setX: function (x) {\n      this.x = x\n    },\n\n    /**\n     * Set the y-offset of the locator\n     *\n     * @param {Number} y\n     */\n    setY: function (y) {\n      this.y = y\n    },\n\n    /**\n     * Get the X-Offset of the Locator\n     *\n     * @returns {Number}\n     */\n    getX: function(){\n      return this.x\n    },\n\n    /**\n     * Returns the Y-Offset of the Locator\n     *\n     * @returns {Number}\n     */\n    getY: function(){\n      return this.y\n    },\n\n    /**\n     *\n     * Controls the location of an {@link draw2d.Figure}\n     *\n     * @param {Number} index child index of the figure\n     * @param {draw2d.Figure} figure the figure to control\n     *\n     * @template\n     **/\n    relocate: function (index, figure) {\n      this.applyConsiderRotation(figure, this.x, this.y)\n    }\n\n  })\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Create a locator for a relative x/y coordinate position. The coordinates are named in percentage [0..100%]\n * relative to the top/left corner of the parent node.<br>\n * <br>\n * <br>\n * Resize the shape in the example to see what happens. The port top position is always 20% of the shape height.\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.basic.Rectangle({x:130,y:30,width:100,height:60});\n *    figure.createPort(\"input\", new draw2d.layout.locator.XYRelPortLocator(0,20));\n *\n *    canvas.add(figure);\n *\n *\n * @author Andreas Herz\n * @extend draw2d.layout.locator.PortLocator\n * @since 4.0.0\n */\ndraw2d.layout.locator.XYRelPortLocator = draw2d.layout.locator.PortLocator.extend(\n  /** @lends draw2d.layout.locator.XYRelPortLocator.prototype */\n  {\n\n    NAME: \"draw2d.layout.locator.XYRelPortLocator\",\n\n    /**\n     *\n     *\n     * @param {Number} xPercentage the x coordinate in percent of the port relative to the left of the parent\n     * @param {Number} yPercentage the y coordinate in percent of the port relative to the top of the parent\n     */\n    init: function (attr, setter, getter) {\n      // legacy code handling for calls like this:\n      // new draw2d.layout.locator.XYRelPortLocator(10,30)\n      if(typeof attr ===\"number\" && typeof setter === \"number\"){\n        this.x = attr\n        this.y = setter\n        this._super()\n      }\n      // new constructor\n      // new draw2d.layout.locator.XYRelPortLocator({x:10, y:30}})\n      else {\n        this.x = 0\n        this.y = 0\n        this._super(attr,\n          {\n            x: this.setX,\n            y: this.setY,\n            ...setter},\n          {\n            x: this.getX,\n            y: this.getY,\n            ...getter})\n      }\n    },\n\n\n    /**\n     * Set the X Offset for the Locator\n     * @param {Number} x\n     */\n    setX: function (x) {\n      this.x = x\n    },\n\n    /**\n     * Set the y-offset of the locator\n     *\n     * @param {Number} y\n     */\n    setY: function (y) {\n      this.y = y\n    },\n\n    /**\n     * Get the X-Offset of the Locator\n     *\n     * @returns {Number}\n     */\n    getX: function () {\n      return this.x\n    },\n\n    /**\n     * Returns the Y-Offset of the Locator\n     *\n     * @returns {Number}\n     */\n    getY: function () {\n      return this.y\n    },\n\n    /**\n     *\n     * Controls the location of an I{@link draw2d.Figure}\n     *\n     * @param {Number} index child index of the figure\n     * @param {draw2d.Figure} figure the figure to control\n     *\n     * @template\n     **/\n    relocate: function (index, figure) {\n      let parent = figure.getParent()\n\n      this.applyConsiderRotation(\n        figure,\n        parent.getWidth() / 100 * this.x,\n        parent.getHeight() / 100 * this.y\n      )\n    }\n\n  })\n\n\n\n","\n/**\n * @class\n * Routes a {@link draw2d.Connection}, possibly using a constraint.\n *\n * @author Andreas Herz\n * @extend draw2d.layout.mesh.MeshLayouter\n */\nimport draw2d from '../../packages'\n\ndraw2d.layout.mesh.ExplodeLayouter = draw2d.layout.mesh.MeshLayouter.extend(\n  /** @lends draw2d.layout.mesh.ExplodeLayouter.prototype */\n  {\n\n\tMIN_MARGIN : 40,\n\t\n\t/**\n\t * Creates a new layouter object.\n\t */\n    init: function()\n\t{\n    },\n    \n    /**\n     *\n     * Return a changes list for an existing mesh/canvas to ensure that the element to insert \n     * did have enough space.\n     * \n     * @param {draw2d.Canvas} canvas the canvas to use for the analytic\n     * @param {draw2d.Figure} figure The figure to add to the exising canvas\n     * @param {Number} x requested x-position for the figure\n     * @param {Number} y requested y-position for the figure\n     * \n     * \n     * @returns {draw2d.util.ArrayList} a list of changes to apply if the user want to insert he figure.\n     */\n    add: function( canvas, figureToAdd)\n    {\n    \t// changes for the different octant areas\n    \tvar changes = [];\n    \tchanges[0]= {x:0, y:0};\n    \tchanges[1]= {x:0, y:0};\n    \tchanges[2]= {x:0, y:0};\n    \tchanges[3]= {x:0, y:0};\n    \tchanges[4]= {x:0, y:0};\n    \tchanges[5]= {x:0, y:0};\n    \tchanges[6]= {x:0, y:0};\n    \tchanges[7]= {x:0, y:0};\n    \tchanges[8]= {x:0, y:0};\n\n    \tvar boundingBox = figureToAdd.getBoundingBox();\n\n    \tvar figures = canvas.getFigures();\n    \tvar figure = null;\n    \t\n    \tvar dis=0;\n    \tvar oct =0;\n    \tvar currentOctChanges =null;\n    \tvar i=0;\n    \tfor( i=0; i< figures.getSize();i++){\n    \t\t\n    \t\tfigure = figures.get(i);\n    \t\t\n    \t\t// calculate the distance of all corners in relation to the requested x/y coordinate\n    \t\t//\n    \t\tif(figure !== figureToAdd ){\n    \t\t\tdis = figure.getBoundingBox().getDistance(boundingBox);\n    \t\t\t// other figure is to close\n    \t\t\t//\n    \t\t\tif(dis<this.MIN_MARGIN){\n    \t\t\t\t// determine the octant of the figure\n    \t\t\t\toct = this.determineOctant(boundingBox, figure.getBoundingBox());\n        \t\t\t\n    \t\t\t\t// all other relevant segments must be arranged too!!\n    \t\t\t\t//\n        \t\t\tswitch(oct){\n        \t\t\tcase 2:\n        \t\t\t\tchanges[2].x =  Math.max(changes[2].x,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[3].x =  Math.max(changes[3].x,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[4].x =  Math.max(changes[4].x,this.MIN_MARGIN-dis);\n        \t\t\t\tbreak;\n        \t\t\tcase 3:\n        \t\t\t\tchanges[2].x =  Math.max(changes[2].x,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[3].x =  Math.max(changes[3].x,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[4].x =  Math.max(changes[4].x,this.MIN_MARGIN-dis);\n        \t\t\t\tbreak;\n        \t\t\tcase 4:\n        \t\t\t\tchanges[2].x =  Math.max(changes[2].x,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[3].x =  Math.max(changes[3].x,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[4].x =  Math.max(changes[4].x,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[4].y =  Math.max(changes[4].y,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[5].y =  Math.max(changes[5].y,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[6].y =  Math.max(changes[6].y,this.MIN_MARGIN-dis);\n        \t\t\t\tbreak;\n        \t\t\tcase 5:\n        \t\t\t\tchanges[4].y =  Math.max(changes[4].y,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[5].y =  Math.max(changes[5].y,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[6].y =  Math.max(changes[6].y,this.MIN_MARGIN-dis);\n        \t\t\t\tbreak;\n        \t\t\tcase 6:\n        \t\t\t\tchanges[4].y =  Math.max(changes[4].y,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[5].y =  Math.max(changes[5].y,this.MIN_MARGIN-dis);\n        \t\t\t\tchanges[6].y =  Math.max(changes[6].y,this.MIN_MARGIN-dis);\n        \t\t\t\tbreak;\n        \t\t\tcase 8:\n        \t\t\t\t// overlapping\n        \t\t\t\t// we must determine the new distance with the border of the figures\n        \t\t\t\tdis = (boundingBox.getBottomRight().getDistance(figure.getBoundingBox().getTopLeft()))|0;\n        \t\t\t\t\n        \t\t\t\tchanges[2].x =  Math.max(changes[2].x,this.MIN_MARGIN+dis);\n        \t\t\t\tchanges[3].x =  Math.max(changes[3].x,this.MIN_MARGIN+dis);\n        \t\t\t\tchanges[4].x =  Math.max(changes[4].x,this.MIN_MARGIN+dis);\n        \t\t\t\tchanges[4].y =  Math.max(changes[4].y,this.MIN_MARGIN+dis);\n        \t\t\t\tchanges[5].y =  Math.max(changes[5].y,this.MIN_MARGIN+dis);\n        \t\t\t\tchanges[6].y =  Math.max(changes[6].y,this.MIN_MARGIN+dis);\n        \t\t\t\tchanges[8].x =  Math.max(changes[8].x,this.MIN_MARGIN+dis);\n//        \t\t\t\tchanges[8].y =  Math.max(changes[8].y,this.MIN_MARGIN+dis);\n        \t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\t// Falls die minimale Distance zu den Objecten kleiner 80 ist, muss ein layout erfolgen\n    \t}\n\n    \t// calculate the adjustment for each figure\n    \t//\n    \tvar result = new draw2d.util.ArrayList();\n    \tfor( i=0; i< figures.getSize();i++){\n    \t\tfigure = figures.get(i);\n    \t\tif(figure !== figureToAdd ){\n\t\t\t\toct = this.determineOctant(boundingBox, figure.getBoundingBox());\n\t\t\t\tcurrentOctChanges = changes[oct];\n\t\t\t\tif(currentOctChanges.x!==0 || currentOctChanges.y!==0){\n\t\t\t\t\tresult.add(new draw2d.layout.mesh.ProposedMeshChange(figure, currentOctChanges.x,currentOctChanges.y));\n\t\t\t\t}\n    \t\t}\n    \t}\n    \t\n    \treturn result;\n    },\n    \n    \n    /**\n     *\n     * Determin Octant\n\t *\n\t *    0 | 1 | 2\n\t *    __|___|__\n\t *    7 | 8 | 3\n     *    __|___|__\n\t *    6 | 5 | 4\n     *\n\t * @returns {Number}\n     */\n    determineOctant: function(r1, r2){\n\t\tvar ox = r1.x;\n\t\tvar oy = r1.y;\n\t\tvar ow = r1.w;\n\t\tvar oh = r1.h;\n\t\t\n\t\tvar cx = r2.x;\n\t\tvar cy = r2.y;\n\t\tvar cw = r2.w;\n\t\tvar ch = r2.h;\n\t\tvar oct =0;\n\n\t\tif(cx + cw <= ox){\n\t\t\tif((cy + ch) <= oy){\n\t\t\t\toct = 0;\n\t\t\t}\n\t\t\telse if(cy >= (oy + oh)){\n\t\t\t\toct = 6;\n\t\t\t}\n\t\t\telse{\n\t\t\t\toct = 7;\n\t\t\t}\n\t    }\n\t\telse if(cx >= ox + ow){\n\t\t\tif(cy + ch <= oy){\n\t\t\t\toct = 2;\n\t\t\t}\n\t\t\telse if(cy >= oy + oh){\n\t\t\t\toct = 4;\n\t\t\t}\n\t\t\telse{\n\t\t\t\toct = 3;\n\t\t\t}\n\t\t}\n\t\telse if(cy + ch <= oy){\n\t\t\toct = 1;\n\t\t}\n\t\telse if(cy >= oy + oh){\n\t\t\toct = 5;\n\t\t}\n\t\telse{\n\t\t\toct= 8;\n\t\t}\n\t\t\n\t\treturn oct;\n    }\n});\n","\n/**\n * @class\n * Layouter for a mesh or grid.\n *\n * @author Andreas Herz\n */\nimport draw2d from '../../packages'\n\ndraw2d.layout.mesh.MeshLayouter = Class.extend(\n  /** @lends draw2d.layout.mesh.MeshLayouter.prototype */\n\n  {\n\n\t/**\n\t * Creates a new layouter object.\n\t */\n    init: function(){\n    },\n\n    /**\n     * \n     * Return a changes list for an existing mesh/canvas to ensure that the element to insert\n     * did have enough space.\n     *\n     * @param {draw2d.Canvas} canvas the canvas to use for the analytic\n     * @param {draw2d.Figure} figure The figure to add to the exising canvas\n     *\n     *\n     * @returns {draw2d.util.ArrayList} a list of changes to apply if the user want to insert he figure.\n     */\n    add: function( canvas, figure)\n    {\n    \treturn new draw2d.util.ArrayList();\n    }\n});\n","\n/**\n * @class\n * Change proposal for grid/mesh layout changes.\n *\n * @author Andreas Herz\n */\nimport draw2d from '../../packages'\n\ndraw2d.layout.mesh.ProposedMeshChange = Class.extend(\n  /** @lends draw2d.layout.mesh.ProposedMeshChange.prototype */\n\n  {\n\n\t/**\n\t * Creates change object.\n\t */\n    init: function(figure, x, y)\n    {\n    \tthis.figure = figure;\n    \tthis.x = x;\n    \tthis.y = y;\n    },\n\n    /**\n     *\n     * Return the related figure.\n     *\n     * @returns {draw2d.Figure} the figure to the related change proposal\n     */\n    getFigure: function( )\n    {\n    \treturn this.figure;\n    },\n\n    /**\n     *\n     * The proposed x-coordinate.\n     *\n     * @returns {Number}\n     */\n    getX: function()\n    {\n    \treturn this.x;\n    },\n\n    /**\n     *\n     * The proposed y-coordinate\n     *\n     * @returns {Number}\n     */\n    getY: function()\n    {\n    \treturn this.y;\n    }\n\n});\n","\n\n/*\n * jQuery.fn.autoResize 1.14\n * --\n * https://github.com/padolsey/jQuery.fn.autoResize\n * --\n * This program is free software. It comes without any warranty, to\n * the extent permitted by applicable law. You can redistribute it\n * and/or modify it under the terms of the Do What The Fuck You Want\n * To Public License, Version 2, as published by Sam Hocevar. See\n * http://sam.zoy.org/wtfpl/COPYING for more details. */\n(function($){\n\n\tvar uid = 'ar' + +new Date,\n\n\t\tdefaults = autoResize.defaults = {\n\t\t\tonResize: function(){},\n\t\t\tonBeforeResize: function(){return 123},\n\t\t\tonAfterResize: function(){return 555},\n\t\t\tanimate: {\n\t\t\t\tduration: 200,\n\t\t\t\tcomplete: function(){}\n\t\t\t},\n\t\t\textraSpace: 50,\n\t\t\tminHeight: 'original',\n\t\t\tmaxHeight: 500,\n\t\t\tminWidth: 'original',\n\t\t\tmaxWidth: 500\n\t\t};\n\n\tautoResize.cloneCSSProperties = [\n\t\t'lineHeight', 'textDecoration', 'letterSpacing',\n\t\t'fontSize', 'fontFamily', 'fontStyle', 'fontWeight',\n\t\t'textTransform', 'textAlign', 'direction', 'wordSpacing', 'fontSizeAdjust',\n\t\t'paddingTop', 'paddingLeft', 'paddingBottom', 'paddingRight', 'width'\n\t];\n\n\tautoResize.cloneCSSValues = {\n\t\tposition: 'absolute',\n\t\ttop: -9999,\n\t\tleft: -9999,\n\t\topacity: 0,\n\t\toverflow: 'hidden'\n\t};\n\n\tautoResize.resizableFilterSelector = [\n\t\t'textarea:not(textarea.' + uid + ')',\n\t\t'input:not(input[type])',\n\t\t'input[type=text]',\n\t\t'input[type=password]',\n\t\t'input[type=email]',\n\t\t'input[type=url]'\n\t].join(',');\n\n\tautoResize.AutoResizer = AutoResizer;\n\n\t$.fn.autoResize = autoResize;\n\n\tfunction autoResize(config) {\n\t\tthis.filter(autoResize.resizableFilterSelector).each(function(){\n\t\t\tnew AutoResizer( $(this), config );\n\t\t});\n\t\treturn this;\n\t}\n\n\tfunction AutoResizer(el, config) {\n\n\t\tif (el.data('AutoResizer')) {\n\t\t\tel.data('AutoResizer').destroy();\n\t\t}\n\n\t\tconfig = this.config = $.extend({}, autoResize.defaults, config);\n\t\tthis.el = el;\n\n\t\tthis.nodeName = el[0].nodeName.toLowerCase();\n\n\t\tthis.originalHeight = el.height();\n\t\tthis.previousScrollTop = null;\n\n\t\tthis.value = el.val();\n\n\t\tif (config.maxWidth === 'original') config.maxWidth = el.width();\n\t\tif (config.minWidth === 'original') config.minWidth = el.width();\n\t\tif (config.maxHeight === 'original') config.maxHeight = el.height();\n\t\tif (config.minHeight === 'original') config.minHeight = el.height();\n\n\t\tif (this.nodeName === 'textarea') {\n\t\t\tel.css({\n\t\t\t\tresize: 'none',\n\t\t\t\toverflowY: 'hidden'\n\t\t\t});\n\t\t}\n\n\t\tel.data('AutoResizer', this);\n\n\t\t// Make sure onAfterResize is called upon animation completion\n\t\tconfig.animate.complete = (function(f){\n\t\t\treturn function() {\n\t\t\t\tconfig.onAfterResize.call(el);\n\t\t\t\treturn f.apply(this, arguments);\n\t\t\t};\n\t\t}(config.animate.complete));\n\n\t\tthis.bind();\n\t}\n\n\tAutoResizer.prototype = {\n\n\t\tbind: function() {\n\n\t\t\tvar check = $.proxy(function(){\n\t\t\t\tthis.check();\n\t\t\t\treturn true;\n\t\t\t}, this);\n\n\t\t\tthis.unbind();\n\n\t\t\tthis.el\n\t\t\t\t.bind('keyup.autoResize', check)\n\t\t\t\t//.bind('keydown.autoResize', check)\n\t\t\t\t.bind('change.autoResize', check)\n\t\t\t\t.bind('paste.autoResize', function() {\n\t\t\t\t\tsetTimeout(function() { check(); }, 0);\n\t\t\t\t});\n\n\t\t\tif (!this.el.is(':hidden')) {\n\t\t\t\tthis.check(null, true);\n\t\t\t}\n\n\t\t},\n\n\t\tunbind: function() {\n\t\t\tthis.el.unbind('.autoResize');\n\t\t},\n\n\t\tcreateClone: function() {\n\n\t\t\tvar el = this.el,\n\t\t\t\tclone = this.nodeName === 'textarea' ? el.clone() : $('<span/>');\n\n\t\t\tthis.clone = clone;\n\n\t\t\t$.each(autoResize.cloneCSSProperties, function(i, p){\n\t\t\t\tclone[0].style[p] = el.css(p);\n\t\t\t});\n\n\t\t\tclone\n\t\t\t\t.removeAttr('name')\n\t\t\t\t.removeAttr('id')\n\t\t\t\t.addClass(uid)\n\t\t\t\t.attr('tabIndex', -1)\n\t\t\t\t.css(autoResize.cloneCSSValues);\n\n\t\t\tif (this.nodeName === 'textarea') {\n\t\t\t\tclone.height('auto');\n\t\t\t} else {\n\t\t\t\tclone.width('auto').css({\n\t\t\t\t\twhiteSpace: 'nowrap'\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\n\t\tcheck: function(e, immediate) {\n\n\t\t\tif (!this.clone) {\n\t\tthis.createClone();\n\t\tthis.injectClone();\n\t\t\t}\n\n\t\t\tvar config = this.config,\n\t\t\t\tclone = this.clone,\n\t\t\t\tel = this.el,\n\t\t\t\tvalue = el.val();\n\n\t\t\t// Do nothing if value hasn't changed\n\t\t\tif (value === this.prevValue) { return true; }\n\t\t\tthis.prevValue = value;\n\n\t\t\tif (this.nodeName === 'input') {\n\n\t\t\t\tclone.text(value);\n\n\t\t\t\t// Calculate new width + whether to change\n\t\t\t\tvar cloneWidth = clone.width(),\n\t\t\t\t\tnewWidth = (cloneWidth + config.extraSpace) >= config.minWidth ?\n\t\t\t\t\t\tcloneWidth + config.extraSpace : config.minWidth,\n\t\t\t\t\tcurrentWidth = el.width();\n\n\t\t\t\tnewWidth = Math.min(newWidth, config.maxWidth);\n\n\t\t\t\tif (\n\t\t\t\t\t(newWidth < currentWidth && newWidth >= config.minWidth) ||\n\t\t\t\t\t(newWidth >= config.minWidth && newWidth <= config.maxWidth)\n\t\t\t\t) {\n\n\t\t\t\t\tconfig.onBeforeResize.call(el);\n\t\t\t\t\tconfig.onResize.call(el);\n\n\t\t\t\t\tel.scrollLeft(0);\n\n\t\t\t\t\tif (config.animate && !immediate) {\n\t\t\t\t\t\tel.stop(1,1).animate({\n\t\t\t\t\t\t\twidth: newWidth\n\t\t\t\t\t\t}, config.animate);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.width(newWidth);\n\t\t\t\t\t\tconfig.onAfterResize.call(el);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// TEXTAREA\n\n\t\t\tclone.width(el.width()).height(0).val(value).scrollTop(10000);\n\n\t\t\tvar scrollTop = clone[0].scrollTop;\n\n\t\t\tif(!value) {\n\t\t\t\t// empty textarea should be exactly minHeight\n\t\t\t\tscrollTop = config.minHeight;\n\t\t\t\tthis.previousScrollTop = null;   // reset state\n\t\t\t} else {\n\t\t\t\t// Don't do anything if scrollTop hasen't changed:\n\t\t\t\tif (this.previousScrollTop === scrollTop) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.previousScrollTop = scrollTop;\n\n\t\t\t\tif (scrollTop + config.extraSpace >= config.maxHeight) {\n\t\t\t\t\tel.css('overflowY', '');\n\t\t\t\t\tscrollTop = config.maxHeight;\n\t\t\t\t\timmediate = true;\n\t\t\t\t} else if (scrollTop + config.extraSpace <= config.minHeight) {\n\t\t\t\t\t\t// include extraSpace in calculations so the code works correctly\n\t\t\t\t\t\t// when there are few lines\n\t\t\t\t\tscrollTop = config.minHeight;\n\t\t\t\t} else {\n\t\t\t\t\tel.css('overflowY', 'hidden');\n\t\t\t\t\tscrollTop += config.extraSpace;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconfig.onBeforeResize.call(el);\n\t\t\tconfig.onResize.call(el);\n\n\t\t\t// Either animate or directly apply height:\n\t\t\tif (config.animate && !immediate) {\n\t\t\t\t\tel.stop(1,1).animate({\n\t\t\t\t\t\t\theight: scrollTop\n\t\t\t\t\t}, config.animate);\n\t\t\t} else {\n\t\t\t\t\tel.height(scrollTop);\n\t\t\t\t\tconfig.onAfterResize.call(el);\n\t\t\t}\n\t\t},\n\n\t\tdestroy: function() {\n\t\t\tthis.unbind();\n\t\t\tthis.el.removeData('AutoResizer');\n\t\t\tthis.clone.remove();\n\t\t\tdelete this.el;\n\t\t\tdelete this.clone;\n\t\t},\n\n\t\tinjectClone: function() {\n\t\t\t(\n\t\t\t\tautoResize.cloneContainer ||\n\t\t\t\t(autoResize.cloneContainer = $('<arclones/>').appendTo('body'))\n\t\t\t).append(this.clone);\n\t\t}\n\n\t};\n\n})(jQuery);\n","\n\n/*!\n * jQuery contextMenu - Plugin for simple contextMenu handling\n *\n * Version: 1.6.5\n *\n * Authors: Rodney Rehm, Addy Osmani (patches for FF)\n * Web: http://medialize.github.com/jQuery-contextMenu/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *   GPL v3 http://opensource.org/licenses/GPL-3.0\n *\n */\n(function($, undefined){\n\n    // TODO: -\n        // ARIA stuff: menuitem, menuitemcheckbox und menuitemradio\n        // create <menu> structure if $.support[htmlCommand || htmlMenuitem] and !opt.disableNative\n\n// determine html5 compatibility\n$.support.htmlMenuitem = ('HTMLMenuItemElement' in window);\n$.support.htmlCommand = ('HTMLCommandElement' in window);\n$.support.eventSelectstart = (\"onselectstart\" in document.documentElement);\n/* // should the need arise, test for css user-select\n$.support.cssUserSelect = (function(){\n    var t = false,\n        e = document.createElement('div');\n\n    $.each('Moz|Webkit|Khtml|O|ms|Icab|'.split('|'), function(i, prefix) {\n        var propCC = prefix + (prefix ? 'U' : 'u') + 'serSelect',\n            prop = (prefix ? ('-' + prefix.toLowerCase() + '-') : '') + 'user-select';\n\n        e.style.cssText = prop + ': text;';\n        if (e.style[propCC] == 'text') {\n            t = true;\n            return false;\n        }\n\n        return true;\n    });\n\n    return t;\n})();\n*/\n\nif (!$.ui || !$.ui.widget) {\n    // duck punch $.cleanData like jQueryUI does to get that remove event\n    // https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.widget.js#L16-24\n    var _cleanData = $.cleanData;\n    $.cleanData = function( elems ) {\n        for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {\n            try {\n                $( elem ).triggerHandler( \"remove\" );\n                // http://bugs.jquery.com/ticket/8235\n            } catch( e ) {}\n        }\n        _cleanData( elems );\n    };\n}\n\nvar // currently active contextMenu trigger\n    $currentTrigger = null,\n    // is contextMenu initialized with at least one menu?\n    initialized = false,\n    // window handle\n    $win = $(window),\n    // number of registered menus\n    counter = 0,\n    // mapping selector to namespace\n    namespaces = {},\n    // mapping namespace to options\n    menus = {},\n    // custom command type handlers\n    types = {},\n    // default values\n    defaults = {\n        // selector of contextMenu trigger\n        selector: null,\n        // where to append the menu to\n        appendTo: null,\n        // method to trigger context menu [\"right\", \"left\", \"hover\"]\n        trigger: \"right\",\n        // hide menu when mouse leaves trigger / menu elements\n        autoHide: false,\n        // ms to wait before showing a hover-triggered context menu\n        delay: 200,\n        // flag denoting if a second trigger should simply move (true) or rebuild (false) an open menu\n        // as long as the trigger happened on one of the trigger-element's child nodes\n        reposition: false,\n        // determine position to show menu at\n        determinePosition: function($menu) {\n            // position to the lower middle of the trigger element\n            if ($.ui && $.ui.position) {\n                // .position() is provided as a jQuery UI utility\n                // (...and it won't work on hidden elements)\n                $menu.css('display', 'block').position({\n                    my: \"center top\",\n                    at: \"center bottom\",\n                    of: this,\n                    offset: \"0 5\",\n                    collision: \"fit\"\n                }).css('display', 'none');\n            } else {\n                // determine contextMenu position\n                var offset = this.offset();\n                offset.top += this.outerHeight();\n                offset.left += this.outerWidth() / 2 - $menu.outerWidth() / 2;\n                $menu.css(offset);\n            }\n        },\n        // position menu\n        position: function(opt, x, y) {\n            var $this = this,\n                offset;\n            // determine contextMenu position\n            if (!x && !y) {\n                opt.determinePosition.call(this, opt.$menu);\n                return;\n            } else if (x === \"maintain\" && y === \"maintain\") {\n                // x and y must not be changed (after re-show on command click)\n                offset = opt.$menu.position();\n            } else {\n                // x and y are given (by mouse event)\n                offset = {top: y, left: x};\n            }\n\n            // correct offset if viewport demands it\n            var bottom = $win.scrollTop() + $win.height(),\n                right = $win.scrollLeft() + $win.width(),\n                height = opt.$menu.height(),\n                width = opt.$menu.width();\n\n            if (offset.top + height > bottom) {\n                offset.top -= height;\n            }\n\n            if (offset.left + width > right) {\n                offset.left -= width;\n            }\n\n            opt.$menu.css(offset);\n        },\n        // position the sub-menu\n        positionSubmenu: function($menu) {\n            if ($.ui && $.ui.position) {\n                // .position() is provided as a jQuery UI utility\n                // (...and it won't work on hidden elements)\n                $menu.css('display', 'block').position({\n                    my: \"left top\",\n                    at: \"right top\",\n                    of: this,\n                    collision: \"flipfit fit\"\n                }).css('display', '');\n            } else {\n                // determine contextMenu position\n                var offset = {\n                    top: 0,\n                    left: this.outerWidth()\n                };\n                $menu.css(offset);\n            }\n        },\n        // offset to add to zIndex\n        zIndex: 1,\n        // show hide animation settings\n        animation: {\n            duration: 50,\n            show: 'slideDown',\n            hide: 'slideUp'\n        },\n        // events\n        events: {\n            show: $.noop,\n            hide: $.noop\n        },\n        // default callback\n        callback: null,\n        // list of contextMenu items\n        items: {}\n    },\n    // mouse position for hover activation\n    hoveract = {\n        timer: null,\n        pageX: null,\n        pageY: null\n    },\n    // determine zIndex\n    zindex = function($t) {\n        var zin = 0,\n            $tt = $t;\n\n        while (true) {\n            zin = Math.max(zin, parseInt($tt.css('z-index'), 10) || 0);\n            $tt = $tt.parent();\n            if (!$tt || !$tt.length || \"html body\".indexOf($tt.prop('nodeName').toLowerCase()) > -1 ) {\n                break;\n            }\n        }\n\n        return zin;\n    },\n    // event handlers\n    handle = {\n        // abort anything\n        abortevent: function(e){\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        },\n\n        // contextmenu show dispatcher\n        contextmenu: function(e) {\n            var $this = $(this);\n\n            // disable actual context-menu\n            e.preventDefault();\n            e.stopImmediatePropagation();\n\n            // abort native-triggered events unless we're triggering on right click\n            if (e.data.trigger != 'right' && e.originalEvent) {\n                return;\n            }\n\n            // abort event if menu is visible for this trigger\n            if ($this.hasClass('context-menu-active')) {\n                return;\n            }\n\n            if (!$this.hasClass('context-menu-disabled')) {\n                // theoretically need to fire a show event at <menu>\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#context-menus\n                // var evt = jQuery.Event(\"show\", { data: data, pageX: e.pageX, pageY: e.pageY, relatedTarget: this });\n                // e.data.$menu.trigger(evt);\n\n                $currentTrigger = $this;\n                if (e.data.build) {\n                    var built = e.data.build($currentTrigger, e);\n                    // abort if build() returned false\n                    if (built === false) {\n                        return;\n                    }\n\n                    // dynamically build menu on invocation\n                    e.data = $.extend(true, {}, defaults, e.data, built || {});\n\n                    // abort if there are no items to display\n                    if (!e.data.items || $.isEmptyObject(e.data.items)) {\n                        // Note: jQuery captures and ignores errors from event handlers\n                        if (window.console) {\n                            (console.error || console.log)(\"No items specified to show in contextMenu\");\n                        }\n\n                        throw new Error('No Items sepcified');\n                    }\n\n                    // backreference for custom command type creation\n                    e.data.$trigger = $currentTrigger;\n\n                    op.create(e.data);\n                }\n                // show menu\n                op.show.call($this, e.data, e.pageX, e.pageY);\n            }\n        },\n        // contextMenu left-click trigger\n        click: function(e) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            $(this).trigger($.Event(\"contextmenu\", { data: e.data, pageX: e.pageX, pageY: e.pageY }));\n        },\n        // contextMenu right-click trigger\n        mousedown: function(e) {\n            // register mouse down\n            var $this = $(this);\n\n            // hide any previous menus\n            if ($currentTrigger && $currentTrigger.length && !$currentTrigger.is($this)) {\n                $currentTrigger.data('contextMenu').$menu.trigger('contextmenu:hide');\n            }\n\n            // activate on right click\n            if (e.button == 2) {\n                $currentTrigger = $this.data('contextMenuActive', true);\n            }\n        },\n        // contextMenu right-click trigger\n        mouseup: function(e) {\n            // show menu\n            var $this = $(this);\n            if ($this.data('contextMenuActive') && $currentTrigger && $currentTrigger.length && $currentTrigger.is($this) && !$this.hasClass('context-menu-disabled')) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                $currentTrigger = $this;\n                $this.trigger($.Event(\"contextmenu\", { data: e.data, pageX: e.pageX, pageY: e.pageY }));\n            }\n\n            $this.removeData('contextMenuActive');\n        },\n        // contextMenu hover trigger\n        mouseenter: function(e) {\n            var $this = $(this),\n                $related = $(e.relatedTarget),\n                $document = $(document);\n\n            // abort if we're coming from a menu\n            if ($related.is('.context-menu-list') || $related.closest('.context-menu-list').length) {\n                return;\n            }\n\n            // abort if a menu is shown\n            if ($currentTrigger && $currentTrigger.length) {\n                return;\n            }\n\n            hoveract.pageX = e.pageX;\n            hoveract.pageY = e.pageY;\n            hoveract.data = e.data;\n            $document.on('mousemove.contextMenuShow', handle.mousemove);\n            hoveract.timer = setTimeout(function() {\n                hoveract.timer = null;\n                $document.off('mousemove.contextMenuShow');\n                $currentTrigger = $this;\n                $this.trigger($.Event(\"contextmenu\", { data: hoveract.data, pageX: hoveract.pageX, pageY: hoveract.pageY }));\n            }, e.data.delay );\n        },\n        // contextMenu hover trigger\n        mousemove: function(e) {\n            hoveract.pageX = e.pageX;\n            hoveract.pageY = e.pageY;\n        },\n        // contextMenu hover trigger\n        mouseleave: function(e) {\n            // abort if we're leaving for a menu\n            var $related = $(e.relatedTarget);\n            if ($related.is('.context-menu-list') || $related.closest('.context-menu-list').length) {\n                return;\n            }\n\n            try {\n                clearTimeout(hoveract.timer);\n            } catch(e) {}\n\n            hoveract.timer = null;\n        },\n\n        // click on layer to hide contextMenu\n        layerClick: function(e) {\n            var $this = $(this),\n                root = $this.data('contextMenuRoot'),\n                mouseup = false,\n                button = e.button,\n                x = e.pageX,\n                y = e.pageY,\n                target,\n                offset,\n                selectors;\n\n            e.preventDefault();\n            e.stopImmediatePropagation();\n\n            setTimeout(function() {\n                var $window, hideshow, possibleTarget;\n                var triggerAction = ((root.trigger == 'left' && button === 0) || (root.trigger == 'right' && button === 2));\n\n                // find the element that would've been clicked, wasn't the layer in the way\n                if (document.elementFromPoint) {\n                    root.$layer.hide();\n                    target = document.elementFromPoint(x - $win.scrollLeft(), y - $win.scrollTop());\n                    root.$layer.show();\n                }\n\n                if (root.reposition && triggerAction) {\n                    if (document.elementFromPoint) {\n                        if (root.$trigger.is(target) || root.$trigger.has(target).length) {\n                            root.position.call(root.$trigger, root, x, y);\n                            return;\n                        }\n                    } else {\n                        offset = root.$trigger.offset();\n                        $window = $(window);\n                        // while this looks kinda awful, it's the best way to avoid\n                        // unnecessarily calculating any positions\n                        offset.top += $window.scrollTop();\n                        if (offset.top <= e.pageY) {\n                            offset.left += $window.scrollLeft();\n                            if (offset.left <= e.pageX) {\n                                offset.bottom = offset.top + root.$trigger.outerHeight();\n                                if (offset.bottom >= e.pageY) {\n                                    offset.right = offset.left + root.$trigger.outerWidth();\n                                    if (offset.right >= e.pageX) {\n                                        // reposition\n                                        root.position.call(root.$trigger, root, x, y);\n                                        return;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n\n                if (target && triggerAction) {\n                    root.$trigger.one('contextmenu:hidden', function() {\n                        $(target).contextMenu({x: x, y: y});\n                    });\n                }\n\n                root.$menu.trigger('contextmenu:hide');\n            }, 50);\n        },\n        // key handled :hover\n        keyStop: function(e, opt) {\n            if (!opt.isInput) {\n                e.preventDefault();\n            }\n\n            e.stopPropagation();\n        },\n        key: function(e) {\n            var opt = $currentTrigger.data('contextMenu') || {};\n\n            switch (e.keyCode) {\n                case 9:\n                case 38: // up\n                    handle.keyStop(e, opt);\n                    // if keyCode is [38 (up)] or [9 (tab) with shift]\n                    if (opt.isInput) {\n                        if (e.keyCode == 9 && e.shiftKey) {\n                            e.preventDefault();\n                            opt.$selected && opt.$selected.find('input, textarea, select').blur();\n                            opt.$menu.trigger('prevcommand');\n                            return;\n                        } else if (e.keyCode == 38 && opt.$selected.find('input, textarea, select').prop('type') == 'checkbox') {\n                            // checkboxes don't capture this key\n                            e.preventDefault();\n                            return;\n                        }\n                    } else if (e.keyCode != 9 || e.shiftKey) {\n                        opt.$menu.trigger('prevcommand');\n                        return;\n                    }\n                    // omitting break;\n\n                // case 9: // tab - reached through omitted break;\n                case 40: // down\n                    handle.keyStop(e, opt);\n                    if (opt.isInput) {\n                        if (e.keyCode == 9) {\n                            e.preventDefault();\n                            opt.$selected && opt.$selected.find('input, textarea, select').blur();\n                            opt.$menu.trigger('nextcommand');\n                            return;\n                        } else if (e.keyCode == 40 && opt.$selected.find('input, textarea, select').prop('type') == 'checkbox') {\n                            // checkboxes don't capture this key\n                            e.preventDefault();\n                            return;\n                        }\n                    } else {\n                        opt.$menu.trigger('nextcommand');\n                        return;\n                    }\n                    break;\n\n                case 37: // left\n                    handle.keyStop(e, opt);\n                    if (opt.isInput || !opt.$selected || !opt.$selected.length) {\n                        break;\n                    }\n\n                    if (!opt.$selected.parent().hasClass('context-menu-root')) {\n                        var $parent = opt.$selected.parent().parent();\n                        opt.$selected.trigger('contextmenu:blur');\n                        opt.$selected = $parent;\n                        return;\n                    }\n                    break;\n\n                case 39: // right\n                    handle.keyStop(e, opt);\n                    if (opt.isInput || !opt.$selected || !opt.$selected.length) {\n                        break;\n                    }\n\n                    var itemdata = opt.$selected.data('contextMenu') || {};\n                    if (itemdata.$menu && opt.$selected.hasClass('context-menu-submenu')) {\n                        opt.$selected = null;\n                        itemdata.$selected = null;\n                        itemdata.$menu.trigger('nextcommand');\n                        return;\n                    }\n                    break;\n\n                case 35: // end\n                case 36: // home\n                    if (opt.$selected && opt.$selected.find('input, textarea, select').length) {\n                        return;\n                    } else {\n                        (opt.$selected && opt.$selected.parent() || opt.$menu)\n                            .children(':not(.disabled, .not-selectable)')[e.keyCode == 36 ? 'first' : 'last']()\n                            .trigger('contextmenu:focus');\n                        e.preventDefault();\n                        return;\n                    }\n                    break;\n\n                case 13: // enter\n                    handle.keyStop(e, opt);\n                    if (opt.isInput) {\n                        if (opt.$selected && !opt.$selected.is('textarea, select')) {\n                            e.preventDefault();\n                            return;\n                        }\n                        break;\n                    }\n                    opt.$selected && opt.$selected.trigger('mouseup');\n                    return;\n\n                case 32: // space\n                case 33: // page up\n                case 34: // page down\n                    // prevent browser from scrolling down while menu is visible\n                    handle.keyStop(e, opt);\n                    return;\n\n                case 27: // esc\n                    handle.keyStop(e, opt);\n                    opt.$menu.trigger('contextmenu:hide');\n                    return;\n\n                default: // 0-9, a-z\n                    var k = (String.fromCharCode(e.keyCode)).toUpperCase();\n                    if (opt.accesskeys[k]) {\n                        // according to the specs accesskeys must be invoked immediately\n                        opt.accesskeys[k].$node.trigger(opt.accesskeys[k].$menu\n                            ? 'contextmenu:focus'\n                            : 'mouseup'\n                        );\n                        return;\n                    }\n                    break;\n            }\n            // pass event to selected item,\n            // stop propagation to avoid endless recursion\n            e.stopPropagation();\n            opt.$selected && opt.$selected.trigger(e);\n        },\n\n        // select previous possible command in menu\n        prevItem: function(e) {\n            e.stopPropagation();\n            var opt = $(this).data('contextMenu') || {};\n\n            // obtain currently selected menu\n            if (opt.$selected) {\n                var $s = opt.$selected;\n                opt = opt.$selected.parent().data('contextMenu') || {};\n                opt.$selected = $s;\n            }\n\n            var $children = opt.$menu.children(),\n                $prev = !opt.$selected || !opt.$selected.prev().length ? $children.last() : opt.$selected.prev(),\n                $round = $prev;\n\n            // skip disabled\n            while ($prev.hasClass('disabled') || $prev.hasClass('not-selectable')) {\n                if ($prev.prev().length) {\n                    $prev = $prev.prev();\n                } else {\n                    $prev = $children.last();\n                }\n                if ($prev.is($round)) {\n                    // break endless loop\n                    return;\n                }\n            }\n\n            // leave current\n            if (opt.$selected) {\n                handle.itemMouseleave.call(opt.$selected.get(0), e);\n            }\n\n            // activate next\n            handle.itemMouseenter.call($prev.get(0), e);\n\n            // focus input\n            var $input = $prev.find('input, textarea, select');\n            if ($input.length) {\n                $input.focus();\n            }\n        },\n        // select next possible command in menu\n        nextItem: function(e) {\n            e.stopPropagation();\n            var opt = $(this).data('contextMenu') || {};\n\n            // obtain currently selected menu\n            if (opt.$selected) {\n                var $s = opt.$selected;\n                opt = opt.$selected.parent().data('contextMenu') || {};\n                opt.$selected = $s;\n            }\n\n            var $children = opt.$menu.children(),\n                $next = !opt.$selected || !opt.$selected.next().length ? $children.first() : opt.$selected.next(),\n                $round = $next;\n\n            // skip disabled\n            while ($next.hasClass('disabled') || $next.hasClass('not-selectable')) {\n                if ($next.next().length) {\n                    $next = $next.next();\n                } else {\n                    $next = $children.first();\n                }\n                if ($next.is($round)) {\n                    // break endless loop\n                    return;\n                }\n            }\n\n            // leave current\n            if (opt.$selected) {\n                handle.itemMouseleave.call(opt.$selected.get(0), e);\n            }\n\n            // activate next\n            handle.itemMouseenter.call($next.get(0), e);\n\n            // focus input\n            var $input = $next.find('input, textarea, select');\n            if ($input.length) {\n                $input.focus();\n            }\n        },\n\n        // flag that we're inside an input so the key handler can act accordingly\n        focusInput: function(e) {\n            var $this = $(this).closest('.context-menu-item'),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n\n            root.$selected = opt.$selected = $this;\n            root.isInput = opt.isInput = true;\n        },\n        // flag that we're inside an input so the key handler can act accordingly\n        blurInput: function(e) {\n            var $this = $(this).closest('.context-menu-item'),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n\n            root.isInput = opt.isInput = false;\n        },\n\n        // :hover on menu\n        menuMouseenter: function(e) {\n            var root = $(this).data().contextMenuRoot;\n            if(root)root.hovering = true;\n        },\n        // :hover on menu\n        menuMouseleave: function(e) {\n            var root = $(this).data().contextMenuRoot;\n            if (root && root.$layer && root.$layer.is(e.relatedTarget)) {\n                root.hovering = false;\n            }\n        },\n\n        // :hover done manually so key handling is possible\n        itemMouseenter: function(e) {\n            var $this = $(this),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n\n            if(!root)\n              return\n\n            root.hovering = true;\n\n            // abort if we're re-entering\n            if (e && root.$layer && root.$layer.is(e.relatedTarget)) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n\n            // make sure only one item is selected\n            (opt.$menu ? opt : root).$menu\n                .children('.hover').trigger('contextmenu:blur');\n\n            if ($this.hasClass('disabled') || $this.hasClass('not-selectable')) {\n                opt.$selected = null;\n                return;\n            }\n\n            $this.trigger('contextmenu:focus');\n        },\n        // :hover done manually so key handling is possible\n        itemMouseleave: function(e) {\n            var $this = $(this),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n\n            if (root && root !== opt && root.$layer && root.$layer.is(e.relatedTarget)) {\n                root.$selected && root.$selected.trigger('contextmenu:blur');\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                root.$selected = opt.$selected = opt.$node;\n                return;\n            }\n\n            $this.trigger('contextmenu:blur');\n        },\n        // contextMenu item click\n        itemClick: function(e) {\n            var $this = $(this),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot,\n                key = data.contextMenuKey,\n                callback;\n\n            // abort if the key is unknown or disabled or is a menu\n            if (!opt.items[key] || $this.is('.disabled, .context-menu-submenu, .context-menu-separator, .not-selectable')) {\n                return;\n            }\n\n            e.preventDefault();\n            e.stopImmediatePropagation();\n\n            if ($.isFunction(root.callbacks[key]) && Object.prototype.hasOwnProperty.call(root.callbacks, key)) {\n                // item-specific callback\n                callback = root.callbacks[key];\n            } else if ($.isFunction(root.callback)) {\n                // default callback\n                callback = root.callback;\n            } else {\n                // no callback, no action\n                return;\n            }\n\n            // hide menu if callback doesn't stop that\n            if (callback.call(root.$trigger, key, root) !== false) {\n                root.$menu.trigger('contextmenu:hide');\n            } else if (root.$menu.parent().length) {\n                op.update.call(root.$trigger, root);\n            }\n        },\n        // ignore click events on input elements\n        inputClick: function(e) {\n            e.stopImmediatePropagation();\n        },\n\n        // hide <menu>\n        hideMenu: function(e, data) {\n            var root = $(this).data('contextMenuRoot');\n            op.hide.call(root.$trigger, root, data && data.force);\n        },\n        // focus <command>\n        focusItem: function(e) {\n            e.stopPropagation();\n            var $this = $(this),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n\n            $this.addClass('hover')\n                .siblings('.hover').trigger('contextmenu:blur');\n\n            // remember selected\n            opt.$selected = root.$selected = $this;\n\n            // position sub-menu - do after show so dumb $.ui.position can keep up\n            if (opt.$node) {\n                root.positionSubmenu.call(opt.$node, opt.$menu);\n            }\n        },\n        // blur <command>\n        blurItem: function(e) {\n            e.stopPropagation();\n            var $this = $(this),\n                data = $this.data(),\n                opt = data.contextMenu;\n\n            $this.removeClass('hover');\n            if(opt)opt.$selected = null;\n        }\n    },\n    // operations\n    op = {\n        show: function(opt, x, y) {\n            var $trigger = $(this),\n                offset,\n                css = {};\n\n            // hide any open menus\n            $('#context-menu-layer').trigger('mousedown');\n\n            // backreference for callbacks\n            opt.$trigger = $trigger;\n\n            // show event\n            if (opt.events.show.call($trigger, opt) === false) {\n                $currentTrigger = null;\n                return;\n            }\n\n            // create or update context menu\n            op.update.call($trigger, opt);\n\n            // position menu\n            opt.position.call($trigger, opt, x, y);\n\n            // make sure we're in front\n            if (opt.zIndex) {\n                css.zIndex = zindex($trigger) + opt.zIndex;\n            }\n\n            // add layer\n            op.layer.call(opt.$menu, opt, css.zIndex);\n\n            // adjust sub-menu zIndexes\n            opt.$menu.find('ul').css('zIndex', css.zIndex + 1);\n\n            // position and show context menu\n            opt.$menu.css( css )[opt.animation.show](opt.animation.duration, function() {\n                $trigger.trigger('contextmenu:visible');\n            });\n            // make options available and set state\n            $trigger\n                .data('contextMenu', opt)\n                .addClass(\"context-menu-active\");\n\n            // register key handler\n            $(document).off('keydown.contextMenu').on('keydown.contextMenu', handle.key);\n            // register autoHide handler\n            if (opt.autoHide) {\n                // mouse position handler\n                $(document).on('mousemove.contextMenuAutoHide', function(e) {\n                    // need to capture the offset on mousemove,\n                    // since the page might've been scrolled since activation\n                    var pos = $trigger.offset();\n                    pos.right = pos.left + $trigger.outerWidth();\n                    pos.bottom = pos.top + $trigger.outerHeight();\n\n                    if (opt.$layer && !opt.hovering && (!(e.pageX >= pos.left && e.pageX <= pos.right) || !(e.pageY >= pos.top && e.pageY <= pos.bottom))) {\n                        // if mouse in menu...\n                        opt.$menu.trigger('contextmenu:hide');\n                    }\n                });\n            }\n        },\n        hide: function(opt, force) {\n            var $trigger = $(this);\n            if (!opt) {\n                opt = $trigger.data('contextMenu') || {};\n            }\n\n            // hide event\n            if (!force && opt.events && opt.events.hide.call($trigger, opt) === false) {\n                return;\n            }\n\n            // remove options and revert state\n            $trigger\n                .removeData('contextMenu')\n                .removeClass(\"context-menu-active\");\n\n            if (opt.$layer) {\n                // keep layer for a bit so the contextmenu event can be aborted properly by opera\n                setTimeout((function($layer) {\n                    return function(){\n                        $layer.remove();\n                    };\n                })(opt.$layer), 10);\n\n                try {\n                    delete opt.$layer;\n                } catch(e) {\n                    opt.$layer = null;\n                }\n            }\n\n            // remove handle\n            $currentTrigger = null;\n            // remove selected\n            opt.$menu.find('.hover').trigger('contextmenu:blur');\n            opt.$selected = null;\n            // unregister key and mouse handlers\n            //$(document).off('.contextMenuAutoHide keydown.contextMenu'); // http://bugs.jquery.com/ticket/10705\n            $(document).off('.contextMenuAutoHide').off('keydown.contextMenu');\n            // hide menu\n            opt.$menu && opt.$menu[opt.animation.hide](opt.animation.duration, function (){\n                // tear down dynamically built menu after animation is completed.\n                if (opt.build) {\n                    opt.$menu.remove();\n                    $.each(opt, function(key, value) {\n                        switch (key) {\n                            case 'ns':\n                            case 'selector':\n                            case 'build':\n                            case 'trigger':\n                                return true;\n\n                            default:\n                                opt[key] = undefined;\n                                try {\n                                    delete opt[key];\n                                } catch (e) {}\n                                return true;\n                        }\n                    });\n                }\n\n                setTimeout(function() {\n                    $trigger.trigger('contextmenu:hidden');\n                }, 10);\n            });\n        },\n        create: function(opt, root) {\n            if (root === undefined) {\n                root = opt;\n            }\n            // create contextMenu\n            opt.$menu = $('<ul class=\"context-menu-list\"></ul>').addClass(opt.className || \"\").data({\n                'contextMenu': opt,\n                'contextMenuRoot': root\n            });\n\n            $.each(['callbacks', 'commands', 'inputs'], function(i,k){\n                opt[k] = {};\n                if (!root[k]) {\n                    root[k] = {};\n                }\n            });\n\n            root.accesskeys || (root.accesskeys = {});\n\n            // create contextMenu items\n            $.each(opt.items, function(key, item) {\n              var $t = $('<li class=\"context-menu-item\"></li>').addClass(item.className || \"\"),\n                $label = null,\n                $input = null;\n\n              // iOS needs to see a click-event bound to an element to actually\n              // have the TouchEvents infrastructure trigger the click event\n              $t.on('click', $.noop);\n\n              if (typeof item !== \"string\"){\n                item.$node = $t.data({\n                  'contextMenu': opt,\n                  'contextMenuRoot': root,\n                  'contextMenuKey': key\n                });\n              }\n\n                // register accesskey\n                // NOTE: the accesskey attribute should be applicable to any element, but Safari5 and Chrome13 still can't do that\n                if (item.accesskey) {\n                    var aks = splitAccesskey(item.accesskey);\n                    for (var i=0, ak; ak = aks[i]; i++) {\n                        if (!root.accesskeys[ak]) {\n                            root.accesskeys[ak] = item;\n                            item._name = item.name.replace(new RegExp('(' + ak + ')', 'i'), '<span class=\"context-menu-accesskey\">$1</span>');\n                            break;\n                        }\n                    }\n                }\n\n                if (typeof item == \"string\") {\n                    $t.addClass('context-menu-separator not-selectable');\n                } else if (item.type && types[item.type]) {\n                    // run custom type handler\n                    types[item.type].call($t, item, opt, root);\n                    // register commands\n                    $.each([opt, root], function(i,k){\n                        k.commands[key] = item;\n                        if ($.isFunction(item.callback)) {\n                            k.callbacks[key] = item.callback;\n                        }\n                    });\n                } else {\n                    // add label for input\n                    if (item.type == 'html') {\n                        $t.addClass('context-menu-html not-selectable');\n                    } else if (item.type) {\n                        $label = $('<label></label>').appendTo($t);\n                        $('<span></span>').html(item._name || item.name).appendTo($label);\n                        $t.addClass('context-menu-input');\n                        opt.hasTypes = true;\n                        $.each([opt, root], function(i,k){\n                            k.commands[key] = item;\n                            k.inputs[key] = item;\n                        });\n                    } else if (item.items) {\n                        item.type = 'sub';\n                    }\n\n                    switch (item.type) {\n                        case 'text':\n                            $input = $('<input type=\"text\" value=\"1\" name=\"\" value=\"\">')\n                                .attr('name', 'context-menu-input-' + key)\n                                .val(item.value || \"\")\n                                .appendTo($label);\n                            break;\n\n                        case 'textarea':\n                            $input = $('<textarea name=\"\"></textarea>')\n                                .attr('name', 'context-menu-input-' + key)\n                                .val(item.value || \"\")\n                                .appendTo($label);\n\n                            if (item.height) {\n                                $input.height(item.height);\n                            }\n                            break;\n\n                        case 'checkbox':\n                            $input = $('<input type=\"checkbox\" value=\"1\" name=\"\" value=\"\">')\n                                .attr('name', 'context-menu-input-' + key)\n                                .val(item.value || \"\")\n                                .prop(\"checked\", !!item.selected)\n                                .prependTo($label);\n                            break;\n\n                        case 'radio':\n                            $input = $('<input type=\"radio\" value=\"1\" name=\"\" value=\"\">')\n                                .attr('name', 'context-menu-input-' + item.radio)\n                                .val(item.value || \"\")\n                                .prop(\"checked\", !!item.selected)\n                                .prependTo($label);\n                            break;\n\n                        case 'select':\n                            $input = $('<select name=\"\">')\n                                .attr('name', 'context-menu-input-' + key)\n                                .appendTo($label);\n                            if (item.options) {\n                                $.each(item.options, function(value, text) {\n                                    $('<option></option>').val(value).text(text).appendTo($input);\n                                });\n                                $input.val(item.selected);\n                            }\n                            break;\n\n                        case 'sub':\n                            // FIXME: shouldn't this .html() be a .text()?\n                            $('<span></span>').html(item._name || item.name).appendTo($t);\n                            item.appendTo = item.$node;\n                            op.create(item, root);\n                            $t.data('contextMenu', item).addClass('context-menu-submenu');\n                            item.callback = null;\n                            break;\n\n                        case 'html':\n                            $(item.html).appendTo($t);\n                            break;\n\n                        default:\n                            $.each([opt, root], function(i,k){\n                                k.commands[key] = item;\n                                if ($.isFunction(item.callback)) {\n                                    k.callbacks[key] = item.callback;\n                                }\n                            });\n                            // FIXME: shouldn't this .html() be a .text()?\n                            $('<span></span>').html(item._name || item.name || \"\").appendTo($t);\n                            break;\n                    }\n\n                    // disable key listener in <input>\n                    if (item.type && item.type != 'sub' && item.type != 'html') {\n                        $input\n                            .on('focus', handle.focusInput)\n                            .on('blur', handle.blurInput);\n\n                        if (item.events) {\n                            $input.on(item.events, opt);\n                        }\n                    }\n\n                    // add icons\n                    if (item.icon) {\n                        $t.addClass(\"icon icon-\" + item.icon);\n                    }\n                }\n\n                // cache contained elements\n                if(typeof item !==\"string\") {\n                  item.$input = $input;\n                  item.$label = $label;\n                }\n\n                // attach item to menu\n                $t.appendTo(opt.$menu);\n\n                // Disable text selection\n                if (!opt.hasTypes && $.support.eventSelectstart) {\n                    // browsers support user-select: none,\n                    // IE has a special event for text-selection\n                    // browsers supporting neither will not be preventing text-selection\n                    $t.on('selectstart.disableTextSelect', handle.abortevent);\n                }\n            });\n            // attach contextMenu to <body> (to bypass any possible overflow:hidden issues on parents of the trigger element)\n            if (!opt.$node) {\n                opt.$menu.css('display', 'none').addClass('context-menu-root');\n            }\n            opt.$menu.appendTo(opt.appendTo || document.body);\n        },\n        resize: function($menu, nested) {\n            // determine widths of submenus, as CSS won't grow them automatically\n            // position:absolute within position:absolute; min-width:100; max-width:200; results in width: 100;\n            // kinda sucks hard...\n\n            // determine width of absolutely positioned element\n            $menu.css({position: 'absolute', display: 'block'});\n            // don't apply yet, because that would break nested elements' widths\n            // add a pixel to circumvent word-break issue in IE9 - #80\n            $menu.data('width', Math.ceil($menu.width()) + 1);\n            // reset styles so they allow nested elements to grow/shrink naturally\n            $menu.css({\n                position: 'static',\n                minWidth: '0px',\n                maxWidth: '100000px'\n            });\n            // identify width of nested menus\n            $menu.find('> li > ul').each(function() {\n                op.resize($(this), true);\n            });\n            // reset and apply changes in the end because nested\n            // elements' widths wouldn't be calculatable otherwise\n            if (!nested) {\n                $menu.find('ul').andSelf().css({\n                    position: '',\n                    display: '',\n                    minWidth: '',\n                    maxWidth: ''\n                }).width(function() {\n                    return $(this).data('width');\n                });\n            }\n        },\n        update: function(opt, root) {\n            var $trigger = this;\n            if (root === undefined) {\n                root = opt;\n                op.resize(opt.$menu);\n            }\n            // re-check disabled for each item\n            opt.$menu.children().each(function(){\n                var $item = $(this),\n                    key = $item.data('contextMenuKey'),\n                    item = opt.items[key],\n                    disabled = (item === undefined)||(typeof item ===\"string\") || ($.isFunction(item.disabled) && item.disabled.call($trigger, key, root)) || item.disabled === true;\n\n                // dis- / enable item\n                $item[disabled ? 'addClass' : 'removeClass']('disabled');\n\n                if (item && item.type) {\n                    // dis- / enable input elements\n                    $item.find('input, select, textarea').prop('disabled', disabled);\n\n                    // update input states\n                    switch (item.type) {\n                        case 'text':\n                        case 'textarea':\n                            item.$input.val(item.value || \"\");\n                            break;\n\n                        case 'checkbox':\n                        case 'radio':\n                            item.$input.val(item.value || \"\").prop('checked', !!item.selected);\n                            break;\n\n                        case 'select':\n                            item.$input.val(item.selected || \"\");\n                            break;\n                    }\n                }\n\n                if (item && item.$menu) {\n                    // update sub-menu\n                    op.update.call($trigger, item, root);\n                }\n            });\n        },\n        layer: function(opt, zIndex) {\n            // add transparent layer for click area\n            // filter and background for Internet Explorer, Issue #23\n            var $layer = opt.$layer = $('<div id=\"context-menu-layer\" style=\"position:fixed; z-index:' + zIndex + '; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;\"></div>')\n                .css({height: $win.height(), width: $win.width(), display: 'block'})\n                .data('contextMenuRoot', opt)\n                .insertBefore(this)\n                .on('contextmenu', handle.abortevent)\n                .on('mousedown', handle.layerClick);\n\n            // IE6 doesn't know position:fixed;\n            if (!$.support.fixedPosition) {\n                $layer.css({\n                    'position' : 'absolute',\n                    'height' : $(document).height()\n                });\n            }\n\n            return $layer;\n        }\n    };\n\n// split accesskey according to http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#assigned-access-key\nfunction splitAccesskey(val) {\n    var t = val.split(/\\s+/),\n        keys = [];\n\n    for (var i=0, k; k = t[i]; i++) {\n        k = k[0].toUpperCase(); // first character only\n        // theoretically non-accessible characters should be ignored, but different systems, different keyboard layouts, ... screw it.\n        // a map to look up already used access keys would be nice\n        keys.push(k);\n    }\n\n    return keys;\n}\n\n// handle contextMenu triggers\n$.fn.contextMenu = function(operation) {\n    if (operation === undefined) {\n        this.first().trigger('contextmenu');\n    } else if (operation.x && operation.y) {\n        this.first().trigger($.Event(\"contextmenu\", {pageX: operation.x, pageY: operation.y}));\n    } else if (operation === \"hide\") {\n        var $menu = this.data('contextMenu').$menu;\n        $menu && $menu.trigger('contextmenu:hide');\n    } else if (operation === \"destroy\") {\n        $.contextMenu(\"destroy\", {context: this});\n    } else if ($.isPlainObject(operation)) {\n        operation.context = this;\n        $.contextMenu(\"create\", operation);\n    } else if (operation) {\n        this.removeClass('context-menu-disabled');\n    } else if (!operation) {\n        this.addClass('context-menu-disabled');\n    }\n\n    return this;\n};\n\n// manage contextMenu instances\n$.contextMenu = function(operation, options) {\n    if (typeof operation != 'string') {\n        options = operation;\n        operation = 'create';\n    }\n\n    if (typeof options == 'string') {\n        options = {selector: options};\n    } else if (options === undefined) {\n        options = {};\n    }\n\n    // merge with default options\n    var o = $.extend(true, {}, defaults, options || {});\n    var $document = $(document);\n    var $context = $document;\n    var _hasContext = false;\n\n    if (!o.context || !o.context.length) {\n        o.context = document;\n    } else {\n        // you never know what they throw at you...\n        $context = $(o.context).first();\n        o.context = $context.get(0);\n        _hasContext = o.context !== document;\n    }\n\n    switch (operation) {\n        case 'create':\n            // no selector no joy\n            if (!o.selector) {\n                throw new Error('No selector specified');\n            }\n            // make sure internal classes are not bound to\n            if (o.selector.match(/.context-menu-(list|item|input)($|\\s)/)) {\n                throw new Error('Cannot bind to selector \"' + o.selector + '\" as it contains a reserved className');\n            }\n            if (!o.build && (!o.items || $.isEmptyObject(o.items))) {\n                throw new Error('No Items sepcified');\n            }\n            counter ++;\n            o.ns = '.contextMenu' + counter;\n            if (!_hasContext) {\n                namespaces[o.selector] = o.ns;\n            }\n            menus[o.ns] = o;\n\n            // default to right click\n            if (!o.trigger) {\n                o.trigger = 'right';\n            }\n\n            if (!initialized) {\n                // make sure item click is registered first\n                $document\n                    .on({\n                        'contextmenu:hide.contextMenu': handle.hideMenu,\n                        'prevcommand.contextMenu': handle.prevItem,\n                        'nextcommand.contextMenu': handle.nextItem,\n                        'contextmenu.contextMenu': handle.abortevent,\n                        'mouseenter.contextMenu': handle.menuMouseenter,\n                        'mouseleave.contextMenu': handle.menuMouseleave\n                    }, '.context-menu-list')\n                    .on('mouseup.contextMenu', '.context-menu-input', handle.inputClick)\n                    .on({\n                        'mouseup.contextMenu': handle.itemClick,\n                        'contextmenu:focus.contextMenu': handle.focusItem,\n                        'contextmenu:blur.contextMenu': handle.blurItem,\n                        'contextmenu.contextMenu': handle.abortevent,\n                        'mouseenter.contextMenu': handle.itemMouseenter,\n                        'mouseleave.contextMenu': handle.itemMouseleave\n                    }, '.context-menu-item');\n\n                initialized = true;\n            }\n\n            // engage native contextmenu event\n            $context\n                .on('contextmenu' + o.ns, o.selector, o, handle.contextmenu);\n\n            if (_hasContext) {\n                // add remove hook, just in case\n                $context.on('remove' + o.ns, function() {\n                    $(this).contextMenu(\"destroy\");\n                });\n            }\n\n            switch (o.trigger) {\n                case 'hover':\n                        $context\n                            .on('mouseenter' + o.ns, o.selector, o, handle.mouseenter)\n                            .on('mouseleave' + o.ns, o.selector, o, handle.mouseleave);\n                    break;\n\n                case 'left':\n                        $context.on('click' + o.ns, o.selector, o, handle.click);\n                    break;\n                /*\n                default:\n                    // http://www.quirksmode.org/dom/events/contextmenu.html\n                    $document\n                        .on('mousedown' + o.ns, o.selector, o, handle.mousedown)\n                        .on('mouseup' + o.ns, o.selector, o, handle.mouseup);\n                    break;\n                */\n            }\n\n            // create menu\n            if (!o.build) {\n                op.create(o);\n            }\n            break;\n\n        case 'destroy':\n            var $visibleMenu;\n            if (_hasContext) {\n                // get proper options\n                var context = o.context;\n                $.each(menus, function(ns, o) {\n                    if (o.context !== context) {\n                        return true;\n                    }\n\n                    $visibleMenu = $('.context-menu-list').filter(':visible');\n                    if ($visibleMenu.length && $visibleMenu.data().contextMenuRoot.$trigger.is($(o.context).find(o.selector))) {\n                        $visibleMenu.trigger('contextmenu:hide', {force: true});\n                    }\n\n                    try {\n                        if (menus[o.ns].$menu) {\n                            menus[o.ns].$menu.remove();\n                        }\n\n                        delete menus[o.ns];\n                    } catch(e) {\n                        menus[o.ns] = null;\n                    }\n\n                    $(o.context).off(o.ns);\n\n                    return true;\n                });\n            } else if (!o.selector) {\n                $document.off('.contextMenu .contextMenuAutoHide');\n                $.each(menus, function(ns, o) {\n                    $(o.context).off(o.ns);\n                });\n\n                namespaces = {};\n                menus = {};\n                counter = 0;\n                initialized = false;\n\n                $('#context-menu-layer, .context-menu-list').remove();\n            } else if (namespaces[o.selector]) {\n                $visibleMenu = $('.context-menu-list').filter(':visible');\n                if ($visibleMenu.length && $visibleMenu.data().contextMenuRoot.$trigger.is(o.selector)) {\n                    $visibleMenu.trigger('contextmenu:hide', {force: true});\n                }\n\n                try {\n                    if (menus[namespaces[o.selector]].$menu) {\n                        menus[namespaces[o.selector]].$menu.remove();\n                    }\n\n                    delete menus[namespaces[o.selector]];\n                } catch(e) {\n                    menus[namespaces[o.selector]] = null;\n                }\n\n                $document.off(namespaces[o.selector]);\n            }\n            break;\n\n        case 'html5':\n            // if <command> or <menuitem> are not handled by the browser,\n            // or options was a bool true,\n            // initialize $.contextMenu for them\n            if ((!$.support.htmlCommand && !$.support.htmlMenuitem) || (typeof options == \"boolean\" && options)) {\n                $('menu[type=\"context\"]').each(function() {\n                    if (this.id) {\n                        $.contextMenu({\n                            selector: '[contextmenu=' + this.id +']',\n                            items: $.contextMenu.fromMenu(this)\n                        });\n                    }\n                }).css('display', 'none');\n            }\n            break;\n\n        default:\n            throw new Error('Unknown operation \"' + operation + '\"');\n    }\n\n    return this;\n};\n\n// import values into <input> commands\n$.contextMenu.setInputValues = function(opt, data) {\n    if (data === undefined) {\n        data = {};\n    }\n\n    $.each(opt.inputs, function(key, item) {\n        switch (item.type) {\n            case 'text':\n            case 'textarea':\n                item.value = data[key] || \"\";\n                break;\n\n            case 'checkbox':\n                item.selected = data[key] ? true : false;\n                break;\n\n            case 'radio':\n                item.selected = (data[item.radio] || \"\") == item.value ? true : false;\n                break;\n\n            case 'select':\n                item.selected = data[key] || \"\";\n                break;\n        }\n    });\n};\n\n// export values from <input> commands\n$.contextMenu.getInputValues = function(opt, data) {\n    if (data === undefined) {\n        data = {};\n    }\n\n    $.each(opt.inputs, function(key, item) {\n        switch (item.type) {\n            case 'text':\n            case 'textarea':\n            case 'select':\n                data[key] = item.$input.val();\n                break;\n\n            case 'checkbox':\n                data[key] = item.$input.prop('checked');\n                break;\n\n            case 'radio':\n                if (item.$input.prop('checked')) {\n                    data[item.radio] = item.value;\n                }\n                break;\n        }\n    });\n\n    return data;\n};\n\n// find <label for=\"xyz\">\nfunction inputLabel(node) {\n    return (node.id && $('label[for=\"'+ node.id +'\"]').val()) || node.name;\n}\n\n// convert <menu> to items object\nfunction menuChildren(items, $children, counter) {\n    if (!counter) {\n        counter = 0;\n    }\n\n    $children.each(function() {\n        var $node = $(this),\n            node = this,\n            nodeName = this.nodeName.toLowerCase(),\n            label,\n            item;\n\n        // extract <label><input>\n        if (nodeName == 'label' && $node.find('input, textarea, select').length) {\n            label = $node.text();\n            $node = $node.children().first();\n            node = $node.get(0);\n            nodeName = node.nodeName.toLowerCase();\n        }\n\n        /*\n         * <menu> accepts flow-content as children. that means <embed>, <canvas> and such are valid menu items.\n         * Not being the sadistic kind, $.contextMenu only accepts:\n         * <command>, <menuitem>, <hr>, <span>, <p> <input [text, radio, checkbox]>, <textarea>, <select> and of course <menu>.\n         * Everything else will be imported as an html node, which is not interfaced with contextMenu.\n         */\n\n        // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#concept-command\n        switch (nodeName) {\n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#the-menu-element\n            case 'menu':\n                item = {name: $node.attr('label'), items: {}};\n                counter = menuChildren(item.items, $node.children(), counter);\n                break;\n\n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-a-element-to-define-a-command\n            case 'a':\n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-button-element-to-define-a-command\n            case 'button':\n                item = {\n                    name: $node.text(),\n                    disabled: !!$node.attr('disabled'),\n                    callback: (function(){ return function(){ $node.click(); }; })()\n                };\n                break;\n\n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-command-element-to-define-a-command\n\n            case 'menuitem':\n            case 'command':\n                switch ($node.attr('type')) {\n                    case undefined:\n                    case 'command':\n                    case 'menuitem':\n                        item = {\n                            name: $node.attr('label'),\n                            disabled: !!$node.attr('disabled'),\n                            callback: (function(){ return function(){ $node.click(); }; })()\n                        };\n                        break;\n\n                    case 'checkbox':\n                        item = {\n                            type: 'checkbox',\n                            disabled: !!$node.attr('disabled'),\n                            name: $node.attr('label'),\n                            selected: !!$node.attr('checked')\n                        };\n                        break;\n\n                    case 'radio':\n                        item = {\n                            type: 'radio',\n                            disabled: !!$node.attr('disabled'),\n                            name: $node.attr('label'),\n                            radio: $node.attr('radiogroup'),\n                            value: $node.attr('id'),\n                            selected: !!$node.attr('checked')\n                        };\n                        break;\n\n                    default:\n                        item = undefined;\n                }\n                break;\n\n            case 'hr':\n                item = '-------';\n                break;\n\n            case 'input':\n                switch ($node.attr('type')) {\n                    case 'text':\n                        item = {\n                            type: 'text',\n                            name: label || inputLabel(node),\n                            disabled: !!$node.attr('disabled'),\n                            value: $node.val()\n                        };\n                        break;\n\n                    case 'checkbox':\n                        item = {\n                            type: 'checkbox',\n                            name: label || inputLabel(node),\n                            disabled: !!$node.attr('disabled'),\n                            selected: !!$node.attr('checked')\n                        };\n                        break;\n\n                    case 'radio':\n                        item = {\n                            type: 'radio',\n                            name: label || inputLabel(node),\n                            disabled: !!$node.attr('disabled'),\n                            radio: !!$node.attr('name'),\n                            value: $node.val(),\n                            selected: !!$node.attr('checked')\n                        };\n                        break;\n\n                    default:\n                        item = undefined;\n                        break;\n                }\n                break;\n\n            case 'select':\n                item = {\n                    type: 'select',\n                    name: label || inputLabel(node),\n                    disabled: !!$node.attr('disabled'),\n                    selected: $node.val(),\n                    options: {}\n                };\n                $node.children().each(function(){\n                    item.options[this.value] = $(this).text();\n                });\n                break;\n\n            case 'textarea':\n                item = {\n                    type: 'textarea',\n                    name: label || inputLabel(node),\n                    disabled: !!$node.attr('disabled'),\n                    value: $node.val()\n                };\n                break;\n\n            case 'label':\n                break;\n\n            default:\n                item = {type: 'html', html: $node.clone(true)};\n                break;\n        }\n\n        if (item) {\n            counter++;\n            items['key' + counter] = item;\n        }\n    });\n\n    return counter;\n}\n\n// convert html5 menu\n$.contextMenu.fromMenu = function(element) {\n    var $this = $(element),\n        items = {};\n\n    menuChildren(items, $this.children());\n\n    return items;\n};\n\n// make defaults accessible\n$.contextMenu.defaults = defaults;\n$.contextMenu.types = types;\n// export internal functions - undocumented, for hacking only!\n$.contextMenu.handle = handle;\n$.contextMenu.op = op;\n$.contextMenu.menus = menus;\n\n})(jQuery);\n","\n\n/**\n *\n * @private\n */\n/**\n * Primary package containing general interfaces and implementation classes.\n * @namespace draw2d */\nexport default {\n  /**\n   * Types representing or manipulating geometric values, such as Points, Rectangles, etc.\n   * @namespace draw2d.geo\n   * */\n  geo: {},\n\n  /** \n   * Contains classes to load and save Draw2D files into, or from, a Canvas.\n   * @namespace draw2d.io \n   **/\n  io: {\n    /** @namespace draw2d.io.json\n     * */\n    json: {},\n    /** @namespace draw2d.io.png */\n    png: {},\n    /** @namespace draw2d.io.svg */\n    svg: {}\n  },\n\n  /** @namespace draw2d.util */\n  util: {\n    /** @namespace draw2d.util.spline */\n    spline: {}\n  },\n\n  /**\n   * This package contains EditPolicy implementations for all used elements. A *EditPolicy*\n   * is a pluggable contribution implementing a portion of an element behavior. Editpolicies contribute to the\n   * overall editing behavior of an EditPart.\n   *\n   * Editing behavior is defined as one or more of the following:\n   *  - Selection handling\n   *  - Routing\n   *  - Feedback management\n   *  - Delegation and Forwarding of commands\n   *  - Drag&Drop behaviour\n   *\n   * @namespace draw2d.policy\n   * */\n  policy: {\n    /**\n     * Editpolicies for selection handling, highlighting, background rendering, snapTo behaviour.\n     *\n     * @namespace draw2d.policy.canvas\n     * */\n    canvas: {},\n    /** \n     * Policies for Connection creation. Like 'ClickPolicy'...creates a connection if you click into the canvas. \n     * @namespace draw2d.policy.connection \n     **/\n    connection: {},\n    /** @namespace draw2d.policy.line */\n    line: {},\n    /** @namespace draw2d.policy.port */\n    port: {},\n    /** \n     * Selection decorations for figures. Movement contrains. Width limitation,...\n     * @namespace draw2d.policy.figure \n     **/\n    figure: {}\n  },\n\n  /** \n   * Contains all predefined visual shapes of Draw2D\n   *  \n   * @namespace draw2d.shape \n   **/\n  shape: {\n    /** \n     * @namespace draw2d.shape.basic \n     **/\n    basic: {},\n    /** @namespace draw2d.shape.dimetric */\n    dimetric: {},\n    /** @namespace draw2d.shape.composite */\n    composite: {},\n    /** @namespace draw2d.shape.arrow */\n    arrow: {},\n    /** @namespace draw2d.shape.node */\n    node: {},\n    /** @namespace draw2d.shape.note */\n    note: {},\n    /** @namespace draw2d.shape.diagram */\n    diagram: {},\n    /** @namespace draw2d.shape.flowchart */\n    flowchart: {},\n    /** @namespace draw2d.shape.analog */\n    analog: {},\n    /** @namespace draw2d.shape.icon */\n    icon: {},\n    /** @namespace draw2d.shape.layout */\n    layout: {},\n    /** @namespace draw2d.shape.pert */\n    pert: {},\n    /** @namespace draw2d.shape.state */\n    state: {},\n    /** @namespace draw2d.shape.widget */\n    widget: {}\n  },\n\n  /** \n   * The command is what eventually changes the model. Figures are asked for a command for a given request. Commands also help \n   * determine if the interaction is possible. If there is no command, or it is not executable, the UI will indicate that the \n   * interaction is not allowed. \n   * \n   * All commands (move, drag&drop, insert, remove,....) are stored on top of a CommandStack and available for undo and redo.\n   * An `draw2d.Canvas` has a single command stack. **Commands must be executed using the command stack rather than directly calling execute.**\n   * \n   * @namespace draw2d.command \n   **/\n  command: {},\n\n  /** @namespace draw2d.decoration */\n  decoration: {\n    /** @namespace draw2d.decoration.connection */\n    connection: {}\n  },\n\n  /** @namespace draw2d.layout */\n  layout: {\n    /** @namespace draw2d.layout.connection\n     *  @memberof draw2d.layout\n     * */\n    connection: {},\n    /** @namespace draw2d.layout.anchor */\n    anchor: {},\n    /** @namespace draw2d.layout.mesh */\n    mesh: {},\n    /** @namespace draw2d.layout.locator */\n    locator: {}\n  },\n\n  /** @namespace draw2d.ui */\n  ui: {},\n\n  isTouchDevice: (\n    //Detect iPhone\n    (navigator.platform.indexOf(\"iPhone\") != -1) ||\n    //Detect iPod\n    (navigator.platform.indexOf(\"iPod\") != -1) ||\n    //Detect iPad\n    (navigator.platform.indexOf(\"iPad\") != -1)\n  )\n\n}\n\n\n\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * A plugable contribution implementing a portion of an behavior.\n *\n *\n * EditPolicies should determine an Canvas or figure editing capabilities. It is possible to implement\n * an figure such that it handles all editing responsibility. However, it is much more flexible\n * and object-oriented to use EditPolicies. Using policies, you can pick and choose the editing\n * behavior for an figure/canvas without being bound to its class hierarchy. Code management is easier.\n *\n *\n * This interface is not intended to be implemented by clients. Clients should inherit from {@link draw2d.policy.figure.SelectionFeedbackPolicy}\n * or {@link draw2d.policy.canvas.SelectionPolicy}.\n *\n * @author Andreas Herz\n */\ndraw2d.policy.EditPolicy = Class.extend(\n  /** @lends draw2d.policy.EditPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.EditPolicy\",\n\n  /**\n   *\n   */\n  init: function (attr, setter, getter) {\n    this.setterWhitelist = { ...setter}\n    this.getterWhitelist = { ...getter}\n\n    this.attr(attr)\n  },\n\n  /**\n   * \n   * Read or set object attributes.<br>\n   * When no value is given, reads specified attribute from the element.<br>\n   * When value is given, sets the attribute to that value.\n   * Multiple attributes can be set by passing an object with name-value pairs.\n   *\n   * @param {String/Object} name\n   * @param {Object} [value]\n   * @since 5.3.2\n   * @returns {Object}\n   **/\n  attr: function (name, value) {\n    // call of attr as setter method with {name1:val1, name2:val2 }  argument list\n    //\n    if ($.isPlainObject(name)) {\n      for (let key in name) {\n        let func = this.setterWhitelist[key]\n        // call the assigned method if given\n        if (func) {\n          func.call(this, name[key])\n        }\n        // maby the ussser adds a function as property to the attr call\n        // e.g.:\n        // {\n        //     doIt: function(){}\n        // }\n        //\n        // in this case we assign the method to this object and wrap it with \"this\" as context\n        // a very, very simple method to replace default implemenations of the object\n        else if (typeof name[key] === \"function\") {\n          this[key] = name[key].bind(this)\n        }\n      }\n    }\n    else if (typeof name === \"string\") {\n      // call attr as getter\n      //\n      if (typeof value === \"undefined\") {\n        let getter = this.getterWhitelist[name]\n        if (typeof getter === \"function\") {\n          return getter.call(this)\n        }\n        return // undefined\n      }\n      // call attr as simple setter with (key , value)\n      //\n\n      // the value can be a function. In this case we must call the value().\n      if (typeof value === \"function\") {\n        value = value()\n      }\n      let setter = this.setterWhitelist[name]\n      if (setter) {\n        setter.call(this, value)\n      }\n    }\n    // generic getter of all registered attributes\n    else if (typeof name === \"undefined\") {\n      let result = {}\n      for (key in this.getterWhitelist) {\n        result[key] = this.getterWhitelist[key].call(this)\n      }\n      return result\n    }\n\n    return this\n  },\n\n  /**\n   * \n   * Called by the host if the policy has been installed.\n   *\n   * @param {draw2d.Canvas|draw2d.Figure} host\n   */\n  onInstall: function (host) {\n  },\n\n  /**\n   * \n   * Called by the host if the policy has been uninstalled.\n   *\n   * @param {draw2d.Canvas|draw2d.Figure} host\n   */\n  onUninstall: function (host) {\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.SelectionPolicy\n */\ndraw2d.policy.canvas.BoundingboxSelectionPolicy = draw2d.policy.canvas.SingleSelectionPolicy.extend(\n  /** @lends draw2d.policy.canvas.BoundingboxSelectionPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.BoundingboxSelectionPolicy\",\n\n  /**\n   * Creates a new selection policy for a canvas.\n   */\n  init: function () {\n    this.isInsideMode = (rect1, rect2) => rect1.isInside(rect2)\n    this.intersectsMode = (rect1, rect2) => rect1.intersects(rect2)\n\n    this.decision = this.isInsideMode\n\n    this._super()\n\n    this.boundingBoxFigure1 = null\n    this.boundingBoxFigure2 = null\n    this.x = 0\n    this.y = 0\n\n    // falls ein Port getroffen wird, dann darf keine BoundingBox gezeichnet werden.\n    //\n    this.canDrawBoundingBox = false\n  },\n\n  /**\n   * @inheritdoc\n   */\n  select: function (canvas, figure) {\n    if (canvas.getSelection().contains(figure)) {\n      return // nothing to to\n    }\n\n    let oldSelection = canvas.getSelection().getPrimary()\n\n    if (figure !== null) {\n      figure.select(true) // primary selection\n    }\n\n    if (oldSelection !== figure) {\n      canvas.getSelection().setPrimary(figure)\n\n      // inform all selection listeners about the new selection.\n      //\n      canvas.fireEvent(\"select\", {figure: figure, selection: canvas.getSelection()})\n    }\n\n    // adding connections to the selection of the source and target port part of the current selection\n    //\n    let selection = canvas.getSelection()\n    canvas.getLines().each((i, line) => {\n      if (line instanceof draw2d.Connection) {\n        if (selection.contains(line.getSource().getRoot()) && selection.contains(line.getTarget().getRoot())) {\n          this.select(canvas, line, false)\n        }\n      }\n    })\n  },\n\n\n  /**\n   * \n   * Set the selection handling mode to <b>intersection</b> or to <b>isInside</b>.\n   * <ul>\n   *   <li>true = intersection, shapes must only touch the selection bounding box </li>\n   *   <li>false = isInside, shapes must complete inside the selection bounding box (default)</li>\n   * </ul>\n   *\n   * @param {Boolean} useIntersectionMode set true if the selection handle should use the alternative selection approach\n   * @since 4.9.0\n   */\n  setDecisionMode: function (useIntersectionMode) {\n    if (useIntersectionMode === true) {\n      this.decision = this.intersectsMode\n    }\n    else {\n      this.decision = this.isInsideMode\n    }\n\n    return this\n  },\n\n  /**\n   * \n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n\n    try {\n      this.x = x\n      this.y = y\n\n      let currentSelection = canvas.getSelection().getAll()\n\n      // COPY_PARENT\n      // this code part is copied from the parent implementation. The main problem is, that\n      // the sequence of unselect/select of elements is broken if we call the base implementation\n      // in this case wrong  events are fired if we select a figure if already a figure is selected!\n      // WRONG: selectNewFigure -> unselectOldFigure\n      // RIGHT: unselectOldFigure -> selectNewFigure\n      // To ensure this I must copy the parent code and postbound the event propagation\n      //\n      this.mouseMovedDuringMouseDown = false\n      let canDragStart = true\n\n      this.canDrawBoundingBox = false\n\n      let figure = canvas.getBestFigure(x, y)\n\n      // may the figure is assigned to a composite. In this case the composite can\n      // override the event receiver\n      while (figure !== null) {\n        let delegated = figure.getSelectionAdapter()()\n        if (delegated === figure) {\n          break\n        }\n        figure = delegated\n      }\n\n      // ignore ports since version 6.1.0. This is handled by the ConnectionCreatePolicy\n      //\n      if (figure instanceof draw2d.Port) {\n        return// silently\n      }\n\n      if( figure !==null && figure.isSelectable() === false && figure.isDraggable()===false){\n        figure=null;\n      }\n\n      this.canDrawBoundingBox = true\n\n      if (figure !== null && figure.isDraggable()) {\n        canDragStart = figure.onDragStart(x - figure.getAbsoluteX(), y - figure.getAbsoluteY(), shiftKey, ctrlKey)\n        // Element send a veto about the drag&drop operation\n        this.mouseDraggingElement = canDragStart === false ? null : figure\n      }\n\n      this.mouseDownElement = figure\n\n      this.mouseDownElement?.fireEvent(\"mousedown\",\n       {\n        x: x, \n        y: y, \n        relX: x - this.mouseDownElement.getAbsoluteX(),\n        relY: y - this.mouseDownElement.getAbsoluteY(),\n        shiftKey: \n        shiftKey, \n        ctrlKey: ctrlKey\n      })\n\n      // we click on an element which are not part of the current selection\n      // => reset the \"old\" current selection if we didn't press the shift key\n      if (shiftKey === false) {\n        if (this.mouseDownElement !== null && this.mouseDownElement.isResizeHandle === false && !currentSelection.contains(this.mouseDownElement)) {\n          currentSelection.each((i, figure) => {\n            this.unselect(canvas, figure)\n          })\n        }\n      }\n\n      if (figure !== canvas.getSelection().getPrimary() && figure !== null && figure.isSelectable() === true) {\n        this.select(canvas, figure)\n\n        // its a line\n        if (figure instanceof draw2d.shape.basic.Line) {\n          // you can move a line with Drag&Drop...but not a connection.\n          // A Connection is fixed linked with the corresponding ports.\n          //\n          if (!(figure instanceof draw2d.Connection)) {\n            canvas.draggingLineCommand = figure.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE))\n            if (canvas.draggingLineCommand !== null) {\n              canvas.draggingLine = figure\n            }\n          }\n        }\n        else if (canDragStart === false) {\n          figure.unselect()\n        }\n      }\n      // END_COPY FROM PARENT\n\n\n      // inform all figures that they have a new ox/oy position for the relative\n      // drag/drop operation\n      if (this.mouseDownElement !== null && this.mouseDownElement.isResizeHandle === false) {\n        currentSelection = canvas.getSelection().getAll()\n        currentSelection.each((i, figure) => {\n          let fakeDragX = 1\n          let fakeDragY = 1\n\n          let handleRect = figure.getHandleBBox()\n          if (handleRect !== null) {\n            handleRect.translate(figure.getAbsolutePosition().scale(-1))\n            fakeDragX = handleRect.x + 1\n            fakeDragY = handleRect.y + 1\n          }\n\n          let canDragStart = figure.onDragStart(fakeDragX, fakeDragY, shiftKey, ctrlKey, true /*fakeFlag*/)\n          // its a line\n          if (figure instanceof draw2d.shape.basic.Line) {\n            // no special handling\n          }\n          else if (canDragStart === false) {\n            this.unselect(canvas, figure)\n          }\n        })\n      }\n    }\n    catch (exc) {\n      console.log(exc)\n      throw exc\n    }\n  },\n\n  /**\n   * \n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} dx The x diff between start of dragging and this event\n   * @param {Number} dy The y diff between start of dragging and this event\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @template\n   */\n  onMouseDrag: function (canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n    // don't drag a selection box if we drag&drop a port\n    //\n    if (this.canDrawBoundingBox === false) {\n      return\n    }\n\n    try {\n      this._super(canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey)\n\n      if (this.mouseDraggingElement === null && this.mouseDownElement === null && this.boundingBoxFigure1 === null) {\n        this.boundingBoxFigure1 = new draw2d.shape.basic.Rectangle({\n          width: 1,\n          height: 1,\n          x: this.x,\n          y: this.y,\n          bgColor: \"#d4d1d4\",\n          alpha: 0.1\n        })\n        this.boundingBoxFigure1.setCanvas(canvas)\n\n        this.boundingBoxFigure2 = new draw2d.shape.basic.Rectangle({\n          width: 1,\n          height: 1,\n          x: this.x,\n          y: this.y,\n          dash: \"--..\",\n          stroke: 0.5,\n          color: \"#37a8ff\",\n          bgColor: null\n        })\n        this.boundingBoxFigure2.setCanvas(canvas)\n      }\n      let abs = Math.abs\n      let min = Math.min\n      if (this.boundingBoxFigure1 !== null) {\n        this.boundingBoxFigure1.setDimension(abs(dx), abs(dy))\n        this.boundingBoxFigure1.setPosition(this.x + min(0, dx), this.y + min(0, dy))\n        this.boundingBoxFigure2.setDimension(abs(dx), abs(dy))\n        this.boundingBoxFigure2.setPosition(this.x + min(0, dx), this.y + min(0, dy))\n      }\n    }\n    catch (exc) {\n      console.log(exc)\n    }\n  },\n\n  /**\n   * \n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseUp: function (canvas, x, y, shiftKey, ctrlKey) {\n    try {\n      // delete the current selection if you have clicked in the empty\n      // canvas.\n      if (this.mouseDownElement === null) {\n        canvas.getSelection().getAll().each((i, figure) => {\n          this.unselect(canvas, figure)\n        })\n      }\n      else if (this.mouseDownElement instanceof draw2d.ResizeHandle || (this.mouseDownElement instanceof draw2d.shape.basic.LineResizeHandle)) {\n        // Do nothing\n        // A click on a resize handle didn't change the selection of the canvas\n        //\n      }\n      // delete the current selection if you click on another figure than the current\n      // selection and you didn't drag the complete selection.\n      else if (this.mouseDownElement !== null && this.mouseMovedDuringMouseDown === false) {\n        let sel = canvas.getSelection().getAll()\n        if (!sel.contains(this.mouseDownElement)) {\n          canvas.getSelection().getAll().each((i, figure) => {\n            this.unselect(canvas, figure)\n          })\n        }\n      }\n      this._super(canvas, x, y, shiftKey, ctrlKey)\n\n      if (this.boundingBoxFigure1 !== null) {\n        // retrieve all figures which are inside the bounding box and select all of them\n        //\n        let selectionRect = this.boundingBoxFigure1.getBoundingBox()\n        canvas.getFigures().each((i, figure) => {\n          if (figure.isSelectable() === true && figure.isVisible()===true && this.decision(figure.getBoundingBox(), selectionRect)) {\n            let fakeDragX = 1\n            let fakeDragY = 1\n\n            let handleRect = figure.getHandleBBox()\n            if (handleRect !== null) {\n              handleRect.translate(figure.getAbsolutePosition().scale(-1))\n              fakeDragX = handleRect.x + 1\n              fakeDragY = handleRect.y + 1\n            }\n            let canDragStart = figure.onDragStart(fakeDragX, fakeDragY, shiftKey, ctrlKey)\n            if (canDragStart === true) {\n              this.select(canvas, figure)\n            }\n          }\n        })\n\n        this.boundingBoxFigure1.setCanvas(null)\n        this.boundingBoxFigure1 = null\n        this.boundingBoxFigure2.setCanvas(null)\n        this.boundingBoxFigure2 = null\n      }\n    }\n    catch (exc) {\n      console.log(exc)\n      debugger\n    }\n  }\n\n})\n","import draw2d from '../../packages'\nimport Color from '../../util/Color'\n\n\n/**\n * @class\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.EditPolicy\n */\ndraw2d.policy.canvas.CanvasPolicy = draw2d.policy.EditPolicy.extend(\n  /** @lends draw2d.policy.canvas.CanvasPolicy.prototype */\n  {\n\n    NAME: \"draw2d.policy.canvas.CanvasPolicy\",\n\n    /**\n     * Creates a new Router object\n     */\n    init: function (attr, setter, getter) {\n      this.canvas = null\n      this._super(attr, setter, getter)\n    },\n\n    /**\n     *\n     * Called if the policy is installed into the canvas.\n     *\n     * @param {draw2d.Canvas} canvas\n     */\n    onInstall: function (canvas) {\n      this.canvas = canvas\n    },\n\n    /**\n     *\n     * Called if the policy is deinstalled from the canvas\n     *\n     * @param {draw2d.Canvas} canvas\n     */\n    onUninstall: function (canvas) {\n      this.canvas = null\n    },\n\n    /**\n     *\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} x the x-coordinate of the mouse event\n     * @param {Number} y the y-coordinate of the mouse event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @template\n     */\n    onMouseMove: function (canvas, x, y, shiftKey, ctrlKey) {\n    },\n\n    /**\n     *\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} x the x-coordinate of the mouse down event\n     * @param {Number} y the y-coordinate of the mouse down event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n    },\n\n    /**\n     *\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} dx The x diff between start of dragging and this event\n     * @param {Number} dy The y diff between start of dragging and this event\n     * @param {Number} dx2 The x diff since the last call of this dragging operation\n     * @param {Number} dy2 The y diff since the last call of this dragging operation\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseDrag: function (canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n    },\n\n    /**\n     *\n     *\n     * @param {draw2d.Canvas} canvas the shape below the mouse or null\n     * @param {Number} x the x-coordinate of the mouse down event\n     * @param {Number} y the y-coordinate of the mouse down event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseUp: function (canvas, x, y, shiftKey, ctrlKey) {\n    },\n\n\n    /**\n     *\n     * Called if the user press the right mouse in the canvas.\n     *\n     * @param {draw2d.Figure|draw2d.shape.basic.Line} figure the figure below the mouse\n     * @param {Number} x the x-coordinate of the mouse down event\n     * @param {Number} y the y-coordinate of the mouse down event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @since 4.4.0\n     */\n    onRightMouseDown: function (figure, x, y, shiftKey, ctrlKey) {\n    },\n\n\n    /**\n     *\n     * Called by the canvas if the user click on a figure.\n     *\n     * @param {draw2d.Figure} figure the figure under the click event. Can be null\n     * @param {Number} mouseX the x coordinate of the mouse during the click event\n     * @param {Number} mouseY the y coordinate of the mouse during the click event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @since 3.0.0\n     *\n     * @template\n     */\n    onClick: function (figure, mouseX, mouseY, shiftKey, ctrlKey) {\n    },\n\n    /**\n     *\n     * Called by the canvas if the user double click on a figure.\n     *\n     * @param {draw2d.Figure} figure the figure under the double click event. Can be null\n     * @param {Number} mouseX the x coordinate of the mouse during the click event\n     * @param {Number} mouseY the y coordinate of the mouse during the click event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @since 4.1.0\n     *\n     * @template\n     */\n    onDoubleClick: function (figure, mouseX, mouseY, shiftKey, ctrlKey) {\n    },\n\n    /**\n     *\n     * called if the user uses the mouse wheel.\n     *\n     *\n     * @param {Number} wheelDelta\n     * @param {Number} x the x coordinate of the event\n     * @param {Number} y the y coordinate of the event\n     * @param shiftKey\n     * @param ctrlKey\n     * @since 5.8.0\n     * @template\n     *\n     * @returns {Boolean} return <b>false</b> to preven tthe default event operation (e.g. scrolling)\n     */\n    onMouseWheel: function (wheelDelta, x, y, shiftKey, ctrlKey) {\n      // return \"false\" to prevent the default event operation\n      return true\n    },\n\n    /**\n     *\n     * Helper method to make an monochrome GIF image WxH pixels big, first create a properly sized array: let pixels = new Array(W*H);.\n     * Then, for each pixel X,Y that should be opaque, store a 1 at the proper location: pixels[X+Y*W] = 1;.\n     * Finally, create the image: let my_gif = createGif(W, H, pixels, color);\n     * \"0\" pixels are transparent.\n     * The <b>color</b> defines the foreground color.\n     *\n     * Now, you can specify this image as the SRC attribute of an IMG tag: document.write(\"<IMG SRC=\\\"\" + my_gif + \"\\\">\");\n     * or for the canvas as background-image css attribute.\n     *\n     *\n     * @param w\n     * @param h\n     * @param d\n     * @param color\n     * @returns {String}\n     *\n     * @private\n     */\n    createMonochromGif: function (w, h, d, color) {\n      color = new Color(color)\n      let r = String.fromCharCode(w % 256) + String.fromCharCode(w / 256) + String.fromCharCode(h % 256) + String.fromCharCode(h / 256)\n\n      let gif = 'GIF89a' + r + '\\xf0\\0\\0\\xff\\xff\\xff' + String.fromCharCode(color.red) + String.fromCharCode(color.green) + String.fromCharCode(color.blue) + '\\x21\\xf9\\u{4}\\u{1}\\0\\0\\0,\\0\\0\\0\\0' + r + '\\0\\u{2}'\n\n      // help method to generate uncompressed in memory GIF data structure without the usage of a canvas or any other\n      // heavy weight stuff.\n      let b = {\n        bit: 1,\n        byte_: 0,\n        data: '',\n\n        writeBit: function (b) {\n          if (b) this.byte_ |= this.bit\n          this.bit <<= 1\n          if (this.bit === 256) {\n            this.bit = 1\n            this.data += String.fromCharCode(this.byte_)\n            this.byte_ = 0\n          }\n        },\n\n        get: function () {\n          let result = \"\"\n          let data = this.data\n          if (this.bit !== 1) {\n            data += String.fromCharCode(this.byte_)\n          }\n          for (let i = 0; i < data.length + 1; i += 255) {\n            let chunklen = data.length - i\n            if (chunklen < 0) chunklen = 0\n            if (chunklen > 255) chunklen = 255\n            result += String.fromCharCode(chunklen) + data.substring(i, i + 255)\n          }\n          return result + \"\\0\"\n        }\n      }\n\n      for (let y = 0; y < h; y++) {\n        for (let x = 0; x < w; x++) {\n          b.writeBit(d[x + w * y])\n          b.writeBit(0)\n          b.writeBit(0)\n          b.writeBit(0)\n          b.writeBit(0)\n          b.writeBit(1)\n        }\n      }\n      gif += b.get() + ';'\n\n      return 'data:image/gif;base64,' + draw2d.util.Base64.encode(gif)\n    }\n\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * This decorations hides draw2d.Ports which are to far from the current cursor position.\n * This makes the canvas more clean if you have a lot of nodes on it.<br>\n * You didn't see a bunch of ports.\n *\n *\n * @example\n *\n *      // install the policy to the canvas\n *\n *      // add some demo figure to the canvas\n *      canvas.add(new draw2d.shape.node.Start({x: 10,  y: 30}));\n *      canvas.add(new draw2d.shape.node.End({x: 90,  y: 90}));\n *      canvas.add(new draw2d.shape.node.Between({ x: 310, y: 30}));\n *\n *      canvas.add(new draw2d.shape.basic.Label({text:\"move the mouse and you see that ports are hidden if the mouse far from it\"}),5,5);\n *\n *      canvas.installEditPolicy(new draw2d.policy.canvas.CoronaDecorationPolicy());\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.DecorationPolicy\n */\ndraw2d.policy.canvas.CoronaDecorationPolicy = draw2d.policy.canvas.DecorationPolicy.extend(\n  /** @lends draw2d.policy.canvas.CoronaDecorationPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.CoronaDecorationPolicy\",\n\n  /**\n   *\n   */\n  init: function (attr, setter, getter) {\n\n    this.startDragX = 0\n    this.startDragY = 0\n    this.diameterToBeFullVisible = 0\n    this.diameterToBeVisible = 0\n    this.sumDiameter = 0\n\n    this._super(\n      {\n        diameterToBeVisible: 200, \n        diameterToBeFullVisible: 20,\n        ...attr\n      },\n      {\n        diameterToBeVisible: this.setDiameterToBeVisible,\n        diameterToBeFullVisible: this.setDiameterToBeFullVisible,\n        ...setter},\n\n      {\n        diameterToBeVisible: this.getDiameterToBeVisible,\n        diameterToBeFullVisible: this.getDiameterToBeFullVisible,\n        ...getter}\n    )\n  },\n\n  setDiameterToBeVisible: function (diameter) {\n    this.diameterToBeVisible = diameter\n    this.sumDiameter = this.diameterToBeFullVisible + this.diameterToBeVisible\n  },\n\n  getDiameterToBeVisible: function () {\n    return this.diameterToBeVisible\n  },\n\n  setDiameterToBeFullVisible: function (diameter) {\n    this.diameterToBeFullVisible = diameter\n    this.sumDiameter = this.diameterToBeFullVisible + this.diameterToBeVisible\n  },\n\n  getDiameterToBeFullVisible: function () {\n    return this.diameterToBeFullVisible\n  },\n\n  /**\n   * @inheritdoc\n   */\n  onInstall: function (canvas) {\n    this._super(canvas)\n    canvas.getFigures().each((i, figure) => {\n      figure.getPorts().each((i, p) => p.setAlpha(0.0))\n    })\n  },\n\n  /**\n   * @inheritdoc\n   */\n  onUninstall: function (canvas) {\n    this._super(canvas)\n\n    canvas.getFigures().each(function (i, figure) {\n      figure.getPorts().each(function (i, p) {\n        if (p.__origAlpha) {\n          p.setAlpha(p.__origAlpha)\n          delete p.__origAlpha\n        }\n      })\n    })\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n    this.startDragX = x\n    this.startDragY = y\n  },\n\n  /**\n   * @inheritdoc\n   */\n  onMouseMove: function (canvas, x, y, shiftKey, ctrlKey) {\n    this.updatePorts(canvas, x, y)\n  },\n\n  /**\n   * @inheritdoc\n   */\n  onMouseDrag: function (canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n    this.updatePorts(canvas, this.startDragX + dx, this.startDragY + dy)\n  },\n\n\n  /**\n   * \n   * Update all ports with the new calculated opacity in relation to the distance to the current\n   * mouse position\n   *\n   * @param canvas\n   * @param x\n   * @param y\n   * @private\n   */\n  updatePorts: function (canvas, x, y) {\n    canvas.getFigures().each((i, figure) => {\n      if (figure instanceof draw2d.shape.node.Node) {\n        if (figure.isVisible() === true && figure.hitTest(x, y, this.sumDiameter) === true) {\n          figure.getPorts().each((i, p) => {\n            if (p.isVisible() === false) {\n              p.__origAlpha = figure.getAlpha()\n            }\n            let dist = figure.getBoundingBox().getDistance(new draw2d.geo.Point(x, y))\n            let alpha = Math.max(0, (1 - (((100 / (this.diameterToBeVisible - this.diameterToBeFullVisible)) * dist) / 100.0)))\n            p.setAlpha(alpha)\n          })\n        }\n        else {\n          figure.getPorts().each((i, p) => {\n              p.setAlpha(0.0)\n          })\n        }\n      }\n    })\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * The base class for any canvas decoration like grid, chessboard, graph paper or\n * other.\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.CanvasPolicy\n */\ndraw2d.policy.canvas.DecorationPolicy = draw2d.policy.canvas.CanvasPolicy.extend(\n  /** @lends draw2d.policy.canvas.DecorationPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.DecorationPolicy\",\n\n  /**\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  }\n\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Standard keyboard policy. This is the standard installed keyboard policy.\n * <br>\n * <br>\n * Keyboard commands\n * <ul>\n *    <li>DEL    - delete selection</li>\n * </ul>\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.KeyboardPolicy\n */\ndraw2d.policy.canvas.DefaultKeyboardPolicy = draw2d.policy.canvas.KeyboardPolicy.extend(\n  /** @lends draw2d.policy.canvas.DefaultKeyboardPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.DefaultKeyboardPolicy\",\n\n  /**\n   */\n  init: function () {\n    this._super()\n  },\n\n  /**\n   * \n   * Callback if the user press a key.<br>\n   * This implementation checks only if the <b>DEL</b> has been pressed and creates an\n   * CommandDelete if this happens.\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {Number} keyCode the pressed key\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @private\n   **/\n  onKeyDown: function (canvas, keyCode, shiftKey, ctrlKey) {\n    //\n    if (keyCode === 46 && canvas.getPrimarySelection() !== null) {\n      // create a single undo/redo transaction if the user delete more than one element. \n      // This happens with command stack transactions.\n      //\n      canvas.getCommandStack().startTransaction(draw2d.Configuration.i18n.command.deleteShape)\n      let selection = canvas.getSelection()\n      selection.each(function (index, figure) {\n        // don't delete a connection if the source or target figure is part of the selection.\n        // In this case the connection is deleted by the DeleteCommand itself and it is not allowed to\n        // delete a figure twice.\n        //\n        if (figure instanceof draw2d.Connection) {\n          if (selection.contains(figure.getSource(), true)) {\n            return\n          }\n          if (selection.contains(figure.getTarget(), true)) {\n            return\n          }\n        }\n        let cmd = figure.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.DELETE))\n        if (cmd !== null) {\n          canvas.getCommandStack().execute(cmd)\n        }\n      })\n      // execute all single commands at once.\n      canvas.getCommandStack().commitTransaction()\n    }\n    else {\n      this._super(canvas, keyCode, shiftKey, ctrlKey)\n    }\n\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Drop interceptors are basically event handlers from which you can return a value\n * that tells draw2d to abort what it is that it was doing.<br>\n * <br>\n * Interceptors can be registered via the registerEditPolicy method on the draw2d canvas just like any other\n * edit policies.<br>\n * <br>\n * The <b>delegateTarget</b> method is responsible for all drop event especially to all connection and port handling.\n *\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.CanvasPolicy\n * @since 5.0.0\n */\ndraw2d.policy.canvas.DropInterceptorPolicy = draw2d.policy.canvas.CanvasPolicy.extend(\n  /** @lends draw2d.policy.canvas.DropInterceptorPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.canvas.DropInterceptorPolicy\",\n\n  /**\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   * \n   * Called if the user want connect a port with any kind draw2d.Figure.<br>\n   * Return a non <b>null</b> value if the interceptor accept the connect event.<br>\n   * <br>\n   * It is possible to delegate the drop event to another figure if the policy\n   * returns another figure. This is useful if a figure want to accept a port\n   * drop event and delegates this drop event to another port.<br>\n   *\n   *\n   * @param {draw2d.Figure} connectInquirer the figure who wants connect\n   * @param {draw2d.Figure} connectIntent the potential connect target\n   *\n   * @returns {draw2d.Figure} the calculated connect intent or <b>null</b> if the interceptor uses the veto right\n   */\n  delegateTarget: function (connectInquirer, connectIntent) {\n\n    // a composite accept any kind of figures exceptional ports\n    //\n    if (!(connectInquirer instanceof draw2d.Port) && connectIntent instanceof draw2d.shape.composite.StrongComposite) {\n      return connectIntent\n    }\n\n    // Ports accepts only Ports from the same semanticGroup as DropTarget\n    //\n    if ((connectIntent instanceof draw2d.Port) && (connectInquirer instanceof draw2d.Port)) {\n      if(connectIntent.getSemanticGroup() !== connectInquirer.getSemanticGroup()) {\n        return null\n      }\n    }\n\n    // Ports accepts only Ports as DropTarget\n    //\n    if (!(connectIntent instanceof draw2d.Port) || !(connectInquirer instanceof draw2d.Port)) {\n      return null\n    }\n\n    // ////////////////////////////////////////////////////////////\n    // at this stage we a sure, that we have two ports as argument\n    // ////////////////////////////////////////////////////////////\n\n    // It is not possible to create a loop back connection at the moment.\n    // Reason: no connection router implemented for this case\n    if (connectInquirer.getParent() === connectIntent.getParent()) {\n      return null\n    }\n\n    // It is not allowed to connect two output ports\n    if (connectInquirer instanceof draw2d.OutputPort && connectIntent instanceof draw2d.OutputPort) {\n      return null\n    }\n\n    // It is not allowed to connect two input ports\n    if (connectInquirer instanceof draw2d.InputPort && connectIntent instanceof draw2d.InputPort) {\n      return null\n    }\n\n\n    // redirect the dragEnter handling to the hybrid port\n    //\n    if ((connectIntent.getParent() instanceof draw2d.shape.node.Hub)) {\n\n      let inputConnections = connectIntent.getConnections().asArray().filter( con => (con.getPeerPort(connectIntent) instanceof draw2d.OutputPort))\n      let outputConnections = connectIntent.getConnections().asArray().filter( con => (con.getPeerPort(connectIntent) instanceof draw2d.InputPort))\n\n      if (connectInquirer instanceof draw2d.InputPort && outputConnections.length >= connectIntent.getMaxFanOut()) {\n        return null\n      }\n\n      if (connectInquirer instanceof draw2d.OutputPort && inputConnections.length >= connectIntent.getMaxFanIn()) {\n        return null\n      }\n\n      if (connectInquirer instanceof draw2d.HybridPort && inputConnections.length >= connectIntent.getMaxFanIn()) {\n        return null\n      }\n\n      return connectIntent\n    } \n\n    return connectIntent\n\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Extended keyboard policy to <b>delete</b> and <b>group</b> figures in the canvas.\n * <br>\n * Keyboard commands\n * <ul>\n *    <li>DEL    - delete selection</li>\n *    <li>Ctrl+G - group/ungroup selection</li>\n *    <li>Ctrl+B - send current selection in the background (toBack)</li>\n *    <li>Ctrl+F - send current selection in the foreground (toFront)</li>\n * </ul>\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.KeyboardPolicy\n */\ndraw2d.policy.canvas.ExtendedKeyboardPolicy = draw2d.policy.canvas.KeyboardPolicy.extend(\n  /** @lends draw2d.policy.canvas.ExtendedKeyboardPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.ExtendedKeyboardPolicy\",\n\n  /**\n   */\n  init: function () {\n    this._super()\n  },\n\n  /**\n   * \n   * Callback if the user press a key\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {Number} keyCode the pressed key\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @private\n   **/\n  onKeyDown: function (canvas, keyCode, shiftKey, ctrlKey) {\n    if (canvas.getPrimarySelection() !== null && ctrlKey === true) {\n      switch (keyCode) {\n\n        case 71: // G\n          if (canvas.getPrimarySelection() instanceof draw2d.shape.composite.Group && canvas.getSelection().getSize() === 1) {\n            canvas.getCommandStack().execute(new draw2d.command.CommandUngroup(canvas, canvas.getPrimarySelection()))\n          }\n          else {\n            canvas.getCommandStack().execute(new draw2d.command.CommandGroup(canvas, canvas.getSelection()))\n          }\n          break\n        case 66: // B\n          canvas.getPrimarySelection().toBack()\n          break\n        case 70: // F\n          canvas.getPrimarySelection().toFront()\n      }\n    }\n    else {\n      this._super(canvas, keyCode, shiftKey, ctrlKey)\n    }\n  }\n\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Install this edit policy in a canvas if you want fadeout all decorations like ports, resize handles\n * if the user didn't move the mouse. This is good for a clean representation of your diagram.\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.DecorationPolicy\n */\ndraw2d.policy.canvas.FadeoutDecorationPolicy = draw2d.policy.canvas.DecorationPolicy.extend(\n  /** @lends draw2d.policy.canvas.FadeoutDecorationPolicy.prototype */\n  {\n\n    NAME: \"draw2d.policy.canvas.FadeoutDecorationPolicy\",\n\n    DEFAULT_FADEOUT_DURATION: 60,\n    DEFAULT_ALPHA_DECREMENT: 0.05,\n\n    /**\n     * Creates a new fade out policy. Don't forget to install them into the canvas.\n     *\n     */\n    init: function () {\n      this._super()\n      this.alpha = 1.0\n      this.alphaDec = this.DEFAULT_ALPHA_DECREMENT\n      this.hidePortsCounter = this.DEFAULT_FADEOUT_DURATION\n      this.portDragging = false\n    },\n\n    /**\n     * @inheritDoc\n     **/\n    onInstall: function (canvas) {\n      this._super(canvas)\n      this.timerId = window.setInterval(this.onTimer.bind(this), 50)\n\n      // initial hide all decorations after install of this policy\n      //\n      this.hidePortsCounter = 1\n      this.alpha = 0.1\n    },\n\n    /**\n     * @inheritDoc\n     **/\n    onUninstall: function (canvas) {\n      window.clearInterval(this.timerId)\n      this.canvas.getAllPorts().each(function (i, port) {\n        port.setAlpha(1.0)\n      })\n\n      this._super(canvas)\n    },\n\n    /**\n     *\n     *\n     * Timerfucntion to show/hide the related ports\n     * @private\n     **/\n    onTimer: function () {\n      this.hidePortsCounter--\n\n      if (this.hidePortsCounter <= 0 && this.alpha > 0) {\n        this.alpha = Math.max(0, this.alpha - this.alphaDec)\n\n        this.canvas.getAllPorts().each((i, port) => {\n          port.setAlpha(this.alpha)\n        })\n\n        this.canvas.getSelection().getAll().each((i, figure) => {\n          figure.selectionHandles.each((i, handle) => {\n            handle.setAlpha(this.alpha)\n          })\n        })\n      } else if (this.hidePortsCounter > 0 && this.alpha !== 1.0) {\n        this.alpha = 1// Math.min(1,this.alpha+0.1);\n        this.alphaDec = this.DEFAULT_ALPHA_DECREMENT\n        this.duringHide = false\n        this.canvas.getAllPorts().each((i, port) => {\n          port.setAlpha(this.alpha)\n        })\n        this.canvas.getSelection().getAll().each((i, figure) => {\n          figure.selectionHandles.each((i, handle) => {\n            handle.setAlpha(this.alpha)\n          })\n        })\n      }\n    },\n\n\n    /**\n     *\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} x the x-coordinate of the mouse down event\n     * @param {Number} y the y-coordinate of the mouse down event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n      this.hidePortsCounter = this.DEFAULT_FADEOUT_DURATION\n      this.portDragging = (canvas.getBestFigure(x, y) instanceof draw2d.Port)\n    },\n\n    /**\n     *\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} x the x-coordinate of the mouse event\n     * @param {Number} y the y-coordinate of the mouse event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseMove: function (canvas, x, y, shiftKey, ctrlKey) {\n      this.hidePortsCounter = this.DEFAULT_FADEOUT_DURATION\n      this.portDragging = false\n    },\n\n    /**\n     *\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} dx The x diff between start of dragging and this event\n     * @param {Number} dy The y diff between start of dragging and this event\n     * @param {Number} dx2 The x diff since the last call of this dragging operation\n     * @param {Number} dy2 The y diff since the last call of this dragging operation\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseDrag: function (canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n      if (this.portDragging === false) {\n        this.hidePortsCounter = 0\n        this.alphaDec = 0.1\n        this.onTimer()\n      }\n    },\n\n    /**\n     *\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} x the x-coordinate of the mouse down event\n     * @param {Number} y the y-coordinate of the mouse down event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseUp: function (figure, x, y, shiftKey, ctrlKey) {\n      this.hidePortsCounter = this.DEFAULT_FADEOUT_DURATION\n      this.portDragging = false\n    }\n\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A drag&Drop feedback handler for the canvas. The policy didn't move the\n * shapes in real time rather it shows a ghost rectangle as feedback. <br>\n * <br>\n * The shapes are updated after the drag&drop operation.\n *\n *\n *\n * @example\n *\n *      // install the policy to the canvas\n *      canvas.installEditPolicy(new draw2d.policy.canvas.GhostMoveSelectionPolicy());\n *\n *      // add some demo figure to the canvas\n *      canvas.add(new draw2d.shape.basic.Circle({diameter: 50, x: 10,  y: 30}));\n *      canvas.add(new draw2d.shape.basic.Circle({diameter: 30, x: 90,  y: 50}));\n *      canvas.add(new draw2d.shape.basic.Circle({diameter: 60, x: 110, y: 30}));\n *\n *      canvas.add(new draw2d.shape.basic.Label({text:\"move the circle to see the drag&drop feedback\"}),5,5);\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.SingleSelectionPolicy\n */\ndraw2d.policy.canvas.GhostMoveSelectionPolicy = draw2d.policy.canvas.SingleSelectionPolicy.extend(\n  /** @lends draw2d.policy.canvas.GhostMoveSelectionPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.GhostMoveSelectionPolicy\",\n\n  /**\n   */\n  init: function () {\n    this.clone = null\n    this.ghostRectangle1 = null\n    this.ghostRectangle2 = null\n\n    this._super()\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  onMouseDrag: function (canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n    this.mouseMovedDuringMouseDown = true\n    if (this.mouseDraggingElement !== null) {\n\n      // if the figure not part of the selection it must be a ResizeHandle...\n      let sel = canvas.getSelection().getAll()\n      if (!sel.contains(this.mouseDraggingElement)) {\n        this.mouseDraggingElement.onDrag(dx, dy, dx2, dy2, shiftKey, ctrlKey)\n      }\n      // it is a normal draw2d.Figure\n      else {\n        // create the ghost handles for the figure to move and update the position\n        //\n        if (this.ghostRectangle1 === null) {\n          this.ghostRectangle1 = new draw2d.shape.basic.Rectangle(/*{bgColor:\"#303030\", alpha:0.1}*/) // new API with version 5.0.0\n          // old API\n          this.ghostRectangle1.setBackgroundColor(\"#303030\")\n          this.ghostRectangle1.setAlpha(0.1)\n\n          this.ghostRectangle2 = new draw2d.shape.basic.Rectangle(/*{dash:\"- \", stroke:1, color:\"#5497DC\", bgColor:null}*/)\n          this.ghostRectangle2.setDashArray(\"- \")\n          this.ghostRectangle2.setStroke(1)\n          this.ghostRectangle2.setColor(\"#5497DC\")\n          this.ghostRectangle2.setBackgroundColor(null)\n\n          this.ghostRectangle1.setBoundingBox(this.mouseDraggingElement.getBoundingBox())\n          this.ghostRectangle2.setBoundingBox(this.mouseDraggingElement.getBoundingBox())\n\n          this.ghostRectangle1.setCanvas(canvas)\n          this.ghostRectangle1.toFront()\n\n          this.ghostRectangle2.setCanvas(canvas)\n          this.ghostRectangle2.toFront()\n\n          this.clone = this.mouseDraggingElement.clone()\n          if (this.clone instanceof draw2d.shape.node.Node) {\n            this.clone.resetPorts()\n          }\n          this.clone.setCanvas(canvas)\n          this.clone.getShapeElement()\n          this.clone.setAlpha(0.4)\n          this.clone.repaint()\n        }\n        else {\n          this.ghostRectangle1.translate(dx2, dy2)\n          this.ghostRectangle2.translate(dx2, dy2)\n          this.clone.translate(dx2, dy2)\n        }\n\n        sel.each(function (i, figure) {\n          // store the new location in a tmp var.\n          figure._newPos = new draw2d.geo.Point(figure.ox + dx, figure.oy + dy)\n\n          // don't move the figure. This will be done in the MouseUp event\n          //figure.onDrag(dx, dy, dx2, dy2);\n        })\n      }\n\n      let p = canvas.fromDocumentToCanvasCoordinate(canvas.mouseDownX + (dx / canvas.zoomFactor), canvas.mouseDownY + (dy / canvas.zoomFactor))\n      let target = canvas.getBestFigure(p.x, p.y, this.mouseDraggingElement)\n\n      if (target !== canvas.currentDropTarget) {\n        if (canvas.currentDropTarget !== null) {\n          canvas.currentDropTarget.onDragLeave(this.mouseDraggingElement)\n          canvas.currentDropTarget.fireEvent(\"dragLeave\", {draggingElement: this.draggingElement})\n          canvas.currentDropTarget = null\n        }\n        if (target !== null) {\n          canvas.currentDropTarget = target.delegateTarget(this.mouseDraggingElement)\n          // inform all listener that the element has accept a dropEnter event\n          if (canvas.currentDropTarget !== null) {\n            canvas.currentDropTarget.onDragEnter(this.mouseDraggingElement) // legacy\n            canvas.currentDropTarget.fireEvent(\"dragEnter\", {draggingElement: this.draggingElement})\n          }\n        }\n      }\n    }\n    // Connection didn't support panning at the moment. There is no special reason for that. Just an interaction\n    // decision.\n    //\n    else if (this.mouseDownElement !== null && !(this.mouseDownElement instanceof draw2d.Connection)) {\n      if (this.mouseDownElement.panningDelegate !== null) {\n        this.mouseDownElement.panningDelegate.fireEvent(\"panning\", {\n          dx: dx,\n          dy: dy,\n          dx2: dx2,\n          dy2: dy2,\n          shiftKey: shiftKey,\n          ctrlKey: ctrlKey\n        })\n        this.mouseDownElement.panningDelegate.onPanning(dx, dy, dx2, dy2, shiftKey, ctrlKey)\n      }\n      else {\n        this.mouseDownElement.fireEvent(\"panning\", {\n          dx: dx,\n          dy: dy,\n          dx2: dx2,\n          dy2: dy2,\n          shiftKey: shiftKey,\n          ctrlKey: ctrlKey\n        })\n        this.mouseDownElement.onPanning(dx, dy, dx2, dy2, shiftKey, ctrlKey)\n      }\n    }\n  },\n\n  /**\n   * @inheritdoc\n   */\n  onMouseUp: function (canvas, x, y, shiftKey, ctrlKey) {\n\n    if (this.ghostRectangle1 !== null) {\n      this.ghostRectangle1.setCanvas(null)\n      this.ghostRectangle1 = null\n      this.ghostRectangle2.setCanvas(null)\n      this.ghostRectangle2 = null\n      this.clone.setCanvas(null)\n      this.clone = null\n    }\n\n    if (this.mouseDraggingElement !== null) {\n      let redrawConnection = new draw2d.util.ArrayList()\n      if (this.mouseDraggingElement instanceof draw2d.shape.node.Node) {\n        canvas.lineIntersections.each(function (i, inter) {\n          if (!redrawConnection.contains(inter.line)) redrawConnection.add(inter.line)\n          if (!redrawConnection.contains(inter.other)) redrawConnection.add(inter.other)\n        })\n      }\n\n\n      // start CommandStack transaction\n      // Trigger an update of the connections if we have move a draw2d.shape.node.Node figure.\n      // (only \"nodes\" can have ports and connections)\n      //\n      canvas.getCommandStack().startTransaction()\n\n\n      let sel = canvas.getSelection().getAll()\n      // We move a resize handle...\n      //\n      if (!sel.contains(this.mouseDraggingElement)) {\n        this.mouseDraggingElement.onDragEnd(x, y, shiftKey, ctrlKey)\n      }\n      // ... or a real figure.\n      //\n      else {\n        canvas.getSelection().getAll().each(function (i, figure) {\n          // set position and cleanup tmp variable\n          if (figure._newPos) {\n            figure.setPosition(figure._newPos)\n            delete figure._newPos\n          }\n          // done\n          figure.onDragEnd(x, y, shiftKey, ctrlKey)\n        })\n      }\n\n      // May we drop the figure onto another shape..handle this here\n      //\n      if (canvas.currentDropTarget !== null && !this.mouseDraggingElement.isResizeHandle) {\n        this.mouseDraggingElement.onDrop(canvas.currentDropTarget, x, y, shiftKey, ctrlKey)\n        canvas.currentDropTarget.onDragLeave(this.mouseDraggingElement)\n        canvas.currentDropTarget.onCatch(this.mouseDraggingElement, x, y, shiftKey, ctrlKey)\n        canvas.currentDropTarget = null\n      }\n\n      // end command stack trans\n      canvas.getCommandStack().commitTransaction()\n\n      if (this.mouseDraggingElement instanceof draw2d.shape.node.Node) {\n        canvas.lineIntersections.each((i, inter) => {\n          if (!redrawConnection.contains(inter.line)) redrawConnection.add(inter.line)\n          if (!redrawConnection.contains(inter.other)) redrawConnection.add(inter.other)\n        })\n        redrawConnection.each((i, line) => {\n          line.svgPathString = null\n          line.repaint()\n        })\n      }\n\n      this.mouseDraggingElement = null\n    }\n\n    // Reset the current selection if the user click in the blank canvas.\n    // Don't reset the selection if the user is panning the canvas\n    //\n    if (this.mouseDownElement === null && this.mouseMovedDuringMouseDown === false) {\n      this.select(canvas, null)\n    }\n\n    this.mouseDownElement = null\n    this.mouseMovedDuringMouseDown = false\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Default interface for keyboard interaction with the canvas.\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.CanvasPolicy\n */\ndraw2d.policy.canvas.KeyboardPolicy = draw2d.policy.canvas.CanvasPolicy.extend(\n  /** @lends draw2d.policy.canvas.KeyboardPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.KeyboardPolicy\",\n\n  /**\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n  /**\n   * \n   * Callback if the user release a key\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {Number} keyCode the pressed key\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @private\n   **/\n  onKeyUp: function (canvas, keyCode, shiftKey, ctrlKey) {\n    // do nothing per default\n  },\n\n  /**\n   * \n   * Callback if the user press a key down\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {Number} keyCode the pressed key\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @private\n   **/\n  onKeyDown: function (canvas, keyCode, shiftKey, ctrlKey) {\n    // do nothing per default\n  }\n\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.SingleSelectionPolicy\n */\ndraw2d.policy.canvas.PanningSelectionPolicy = draw2d.policy.canvas.SingleSelectionPolicy.extend(\n  /** @lends draw2d.policy.canvas.PanningSelectionPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.PanningSelectionPolicy\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function () {\n    this._super()\n  },\n\n\n  /**\n   * \n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} dx The x diff between start of dragging and this event\n   * @param {Number} dy The y diff between start of dragging and this event\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @template\n   */\n  onMouseDrag: function (canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n    this._super(canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey)\n\n    if (this.mouseDraggingElement === null && this.mouseDownElement === null) {\n\n      // check if we are dragging a port. This isn't reported by the selection handler anymore\n      //\n      let p = canvas.fromDocumentToCanvasCoordinate(canvas.mouseDownX + (dx / canvas.zoomFactor), canvas.mouseDownY + (dy / canvas.zoomFactor))\n      let figure = canvas.getBestFigure(p.x, p.y)\n\n      if (figure === null) {\n        let area = canvas.getScrollArea()\n        area.scrollTop(area.scrollTop() - dy2)\n        area.scrollLeft(area.scrollLeft() - dx2)\n      }\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.SelectionPolicy\n */\ndraw2d.policy.canvas.ReadOnlySelectionPolicy = draw2d.policy.canvas.SelectionPolicy.extend(\n  /** @lends draw2d.policy.canvas.ReadOnlySelectionPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.canvas.ReadOnlySelectionPolicy\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n  /**\n   * \n   * Called by the host if the policy has been installed.\n   *\n   * @param {draw2d.Canvas/draw2d.Canvas} canvas\n   */\n  onInstall: function (canvas) {\n    this._super(canvas)\n    canvas.getAllPorts().each(function (i, port) {\n      port.setVisible(false)\n    })\n  },\n\n  /**\n   * \n   * Called by the host if the policy has been uninstalled.\n   *\n   * @param {draw2d.Canvas} canvas\n   */\n  onUninstall: function (canvas) {\n    canvas.getAllPorts().each(function (i, port) {\n      port.setVisible(true)\n    })\n\n    this._super(canvas)\n  },\n\n  /**\n   * \n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} dx The x diff between start of dragging and this event\n   * @param {Number} dy The y diff between start of dragging and this event\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @template\n   */\n  onMouseDrag: function (canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n    let area = canvas.getScrollArea()\n    area.scrollTop(area.scrollTop() - dy2)\n    area.scrollLeft(area.scrollLeft() - dx2)\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.CanvasPolicy\n */\ndraw2d.policy.canvas.SelectionPolicy = draw2d.policy.canvas.CanvasPolicy.extend(\n  /** @lends draw2d.policy.canvas.SelectionPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.SelectionPolicy\",\n\n  /**\n   * Creates a new selection policy\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n  /**\n   *\n   * Selects the given figure within the canvas. The policy must unselect already selected\n   * figures or show any decorations.\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {draw2d.Figure} figure\n   *\n   */\n  select: function (canvas, figure) {\n  },\n\n  /**\n   *\n   * Unselect the given figure in the canvas and remove all resize handles\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {draw2d.Figure} figure\n   */\n  unselect: function (canvas, figure) {\n    canvas.getSelection().remove(figure)\n\n    figure.unselect()\n\n    // @since 6.1.42\n    canvas.fireEvent(\"unselect\", {figure: figure})\n  }\n})\n\n\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Just to paint a grid in the background of a canvas.\n *\n *\n * @example\n *\n *    canvas.installEditPolicy(new draw2d.policy.canvas.ShowChessboardEditPolicy());\n *    let shape =  new draw2d.shape.basic.Text({text:\"This is a simple text in a canvas with chessboard background.\"});\n *\n *    canvas.add(shape,40,10);\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.DecorationPolicy\n */\ndraw2d.policy.canvas.ShowChessboardEditPolicy = draw2d.policy.canvas.DecorationPolicy.extend(\n  /** @lends draw2d.policy.canvas.ShowChessboardEditPolicy.prototype */\n  {\n    NAME: \"draw2d.policy.canvas.ShowChessboardEditPolicy\",\n\n    GRID_COLOR: \"#e0e0e0\",\n    GRID_WIDTH: 20,\n\n    /**\n     * Creates a new constraint policy for snap to grid\n     *\n     * @param {Number} grid the grid width of the canvas\n     */\n    init: function (grid) {\n      this._super()\n      if (grid) {\n        this.grid = grid\n      } else {\n        this.grid = this.GRID_WIDTH\n      }\n    },\n\n\n    onInstall: function (canvas) {\n      this._super(canvas)\n\n      this.oldBg = this.canvas.html.css(\"background\")\n      this.setGrid(1/canvas.getZoom())\n      this.onZoomCallback =(emitterFigure, zoomData) => {\n        this.setGrid(1/zoomData.value)\n      }\n      canvas.on(\"zoom\", this.onZoomCallback)\n    },\n\n    onUninstall: function (canvas) {\n      this._super(canvas)\n      $(canvas.paper.canvas).css({\"background\": this.oldBg})\n      canvas.off(this.onZoomCallback)\n    },\n\n    /**\n     * Activate the grid and set the CSS properties for the SVG canvas\n     * @private\n     */\n    setGrid: function(zoom){\n\n      let gridColor = this.GRID_COLOR\n\n      let background =\n        `linear-gradient(45deg, ${gridColor} 25%, transparent 25%, transparent 75%, ${gridColor} 75%, ${gridColor} 100%),\\n` +\n        `linear-gradient(45deg, ${gridColor} 25%, transparent 25%, transparent 75%, ${gridColor} 75%, ${gridColor} 100%)`\n      let backgroundSize = `${(this.grid*2*zoom)}px ${(this.grid*2*zoom)}px`\n      let backgroundPosition = `0 0, ${(this.grid*zoom)}px ${(this.grid*zoom)}px`\n\n      $(this.canvas.paper.canvas).css({\n        \"background\": background,\n        \"background-size\": backgroundSize,\n        \"background-position\": backgroundPosition\n      })\n    }\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A canvas decoration which paints a dimetric in the background.\n * <br>\n * <br>\n *\n * @example\n *\n *    canvas.installEditPolicy(new draw2d.policy.canvas.ShowDimetricGridEditPolicy());\n *    let shape =  new draw2d.shape.basic.Text({text:\"This is a simple text in a canvas with grid background.\"});\n *\n *    canvas.add(shape,40,10);\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.DecorationPolicy\n */\ndraw2d.policy.canvas.ShowDimetricGridEditPolicy = draw2d.policy.canvas.DecorationPolicy.extend(\n  /** @lends draw2d.policy.canvas.ShowDimetricGridEditPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.canvas.ShowDimetricGridEditPolicy\",\n\n  GRID_COLOR: \"#f0f0f0\",\n  GRID_WIDTH: 30,\n\n  /**\n   * Creates a new constraint policy for snap to grid\n   *\n   * @param {Number} [grid] the grid width of the canvas\n   */\n  init: function (grid) {\n    this.color = new draw2d.util.Color(this.GRID_COLOR)\n    this.zoom = 1\n    this.shapes = null\n\n    this._super()\n\n    if (typeof grid === \"number\") {\n      this.grid = grid\n    }\n    else {\n      this.grid = this.GRID_WIDTH\n    }\n  },\n\n  onInstall: function (canvas) {\n    this._super(canvas)\n    this.zoom = canvas.getZoom()\n    this.setGrid(this.grid)\n  },\n\n  onUninstall: function (canvas) {\n    this._super(canvas)\n    if (this.shapes !== null) {\n      this.shapes.remove()\n    }\n  },\n\n  /**\n   * \n   * Set the grid color\n   *\n   * @param {draw2d.util.Color|String} color a color object or the CSS string declaration for a color\n   * @since 5.0.3\n   */\n  setGridColor: function (color) {\n    this.color = new draw2d.util.Color(color)\n    this.setGrid(this.grid)\n  },\n\n  /**\n   * \n   * Set a new grid width/height\n   *\n   * @param {Number} grid\n   * @since 5.0.3\n   */\n  setGrid: function (grid) {\n    this.grid = grid\n\n    if (this.canvas != null) {\n      if (this.shapes !== null) {\n        this.shapes.remove()\n      }\n\n      let r = this.canvas.paper\n      let d = this.grid, i\n      let w = r.width\n      let h = r.height\n      let props = {stroke: this.color.rgba()}\n\n      let max = Math.sqrt(w * w + h * h)\n      let angle26 = Math.atan(.5)\n      let angle153 = Math.PI - angle26\n      let cos30 = Math.cos(angle26)\n      let sin30 = Math.sin(angle26)\n      let cos150 = Math.cos(angle153)\n      let sin150 = Math.sin(angle153)\n\n      r.setStart()\n      // horizontal\n      for (i = 0; i <= w; i += d * 2) {\n        r.path([[\"M\", i, 0], [\"L\", i + cos30 * max, sin30 * max]]).attr(props)\n        r.path([[\"M\", i, 0], [\"L\", i + cos150 * max, sin150 * max]]).attr(props)\n      }\n      for (i = d; i <= h; i += d) {\n        r.path([[\"M\", 0, i], [\"L\", cos30 * max, i + sin30 * max]]).attr(props)\n        r.path([[\"M\", w, i], [\"L\", w + cos150 * max, i + sin150 * max]]).attr(props)\n      }\n      // vertical\n      this.shapes = r.setFinish()\n\n      this.shapes.toBack()\n    }\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Paint a dotted pattern in the background of the canvas.\n *\n *\n * @example\n *\n *    canvas.installEditPolicy(new draw2d.policy.canvas.ShowDotEditPolicy());\n *    let shape =  new draw2d.shape.basic.Text({text:\"This is a simple text in a canvas with dotted background.\"});\n *\n *    canvas.add(shape,40,10);\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.DecorationPolicy\n * @since 4.0.1\n */\n\ndraw2d.policy.canvas.ShowDotEditPolicy = draw2d.policy.canvas.DecorationPolicy.extend(\n  /** @lends draw2d.policy.canvas.ShowDotEditPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.ShowDotEditPolicy\",\n\n  DOT_COLOR: \"#999999\",\n  DOT_RADIUS: 1,\n  DOT_DISTANCE: 20,\n\n  /**\n   * show a dot grid in the canvas for decoration.\n   *\n   * @param {Number} [dotDistance] the distance or grid width between the dots.\n   * @param {Number} [dotRadius] the radius of the dots.\n   * @param {draw2d.util.Color|String} [dotColor] the color for the dots.\n   */\n  init: function (dotDistance, dotRadius, dotColor) {\n    this._super()\n\n    this.dotDistance = dotDistance ? dotDistance : this.DOT_DISTANCE\n    this.dotRadius = dotRadius ? dotRadius : this.DOT_RADIUS\n    this.dotColor = new draw2d.util.Color(dotColor ? dotColor : this.DOT_COLOR)\n    this.onZoomCallback =(emitterFigure, zoomData) => {\n      this.setGrid(1/zoomData.value)\n    }\n  },\n\n  onInstall: function (canvas) {\n    this._super(canvas)\n\n    this.oldBg = this.canvas.html.css(\"background\")\n    this.setGrid(1/canvas.getZoom())\n    canvas.on(\"zoom\", this.onZoomCallback)\n  },\n\n  onUninstall: function (canvas) {\n    this._super(canvas)\n    $(canvas.paper.canvas).css({\"background\": this.oldBg})\n    canvas.off(this.onZoomCallback)\n  },\n\n  /**\n   * @private\n   * @param {Number} zoom \n   */\n  setGrid: function (zoom) {\n    let bgColor = \"#FFFFFF\"\n    let dotColor = this.dotColor.rgba()\n\n    let background = `linear-gradient(90deg, ${bgColor} ${(this.dotDistance - this.dotRadius)*zoom}px, transparent 1%) center, linear-gradient(${bgColor} ${(this.dotDistance - this.dotRadius)*zoom}px, transparent 1%) center, ${dotColor}`\n    let backgroundSize = `${this.dotDistance*zoom}px ${this.dotDistance*zoom}px`\n\n    $(this.canvas.paper.canvas).css({\n      \"background\": background,\n      \"background-size\": backgroundSize\n    })\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A cavas decoration which paints a grid in the background.\n * <br>\n * <br>\n *\n * @example\n *\n *    canvas.installEditPolicy(new draw2d.policy.canvas.ShowGridEditPolicy());\n *    let shape =  new draw2d.shape.basic.Text({text:\"This is a simple text in a canvas with grid background.\"});\n *\n *    canvas.add(shape,40,10);\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.DecorationPolicy\n */\ndraw2d.policy.canvas.ShowGridEditPolicy = draw2d.policy.canvas.DecorationPolicy.extend(\n  /** @lends draw2d.policy.canvas.ShowGridEditPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.canvas.ShowGridEditPolicy\",\n\n  GRID_COLOR: \"#f0f0f0\",\n  GRID_WIDTH: 20,\n  GRID_STOKE: 1,\n\n  /**\n   * Creates a new constraint policy for snap to grid\n   *\n   * @param {Number} [grid] the grid width of the canvas\n   */\n  init: function (gridDistance, gridStroke, gridColor) {\n    this.gridWidth = gridDistance || this.GRID_WIDTH\n    this.gridStroke = gridStroke || this.GRID_STOKE\n    this.gridColor = new draw2d.util.Color(gridColor || this.GRID_COLOR)\n    this._super()\n    this.onZoomCallback =(emitterFigure, zoomData) => {\n      this.setGrid(1/zoomData.value)\n    }\n  },\n\n  /**\n   *\n   * Set the grid color\n   *\n   * @param {draw2d.util.Color|String} color a color object or the CSS string declaration for a color\n   * @since 5.0.3\n   */\n  setGridColor: function (color) {\n    this.gridColor = new draw2d.util.Color(color)\n    this.setGrid(1/this.canvas.getZoom())\n  },\n\n  onInstall: function (canvas) {\n    this._super(canvas)\n\n    this.oldBg = this.canvas.html.css(\"background\")\n    this.setGrid(1/canvas.getZoom())\n    canvas.on(\"zoom\", this.onZoomCallback)\n  },\n\n  onUninstall: function (canvas) {\n    this._super(canvas)\n    \n    $(canvas.paper.canvas).css({\"background\": this.oldBg})\n    canvas.off(this.onZoomCallback)\n  },\n\n  /**\n   * @private\n   * @param {Number} zoom \n   */\n  setGrid: function (zoom) {\n    let bgColor = \"#FFFFFF\"\n    let color = this.gridColor.rgba()\n\n    let background = \n    ` linear-gradient(to right,  ${color} ${this.gridStroke}px, transparent ${this.gridStroke}px),\n      linear-gradient(to bottom, ${color} ${this.gridStroke}px, ${bgColor}  ${this.gridStroke}px)`\n    let backgroundSize = `${this.gridWidth*zoom}px ${this.gridWidth*zoom}px`\n\n    $(this.canvas.paper.canvas).css({\n      \"background\": background,\n      \"background-size\": backgroundSize\n    })\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.SelectionPolicy\n */\ndraw2d.policy.canvas.SingleSelectionPolicy = draw2d.policy.canvas.SelectionPolicy.extend(\n  /** @lends draw2d.policy.canvas.SingleSelectionPolicy.prototype */\n  {\n    NAME: \"draw2d.policy.canvas.SingleSelectionPolicy\",\n\n    /**\n     * Creates a new Router object\n     */\n    init: function () {\n      this._super()\n      this.mouseMovedDuringMouseDown = false\n      this.mouseDraggingElement = null\n      this.mouseDownElement = null\n    },\n\n    /**\n     * @inheritdoc\n     */\n    select: function (canvas, figure) {\n      if (canvas.getSelection().contains(figure)) {\n        return // nothing to to\n      }\n\n      let oldSelection = canvas.getSelection().getPrimary()\n      if (oldSelection) {\n        this.unselect(canvas, oldSelection)\n      }\n\n      figure?.select(true) // primary selection\n\n      canvas.getSelection().setPrimary(figure)\n\n      // inform all selection listeners about the new selection.\n      //\n      if (oldSelection !== figure) {\n        canvas.fireEvent(\"select\", {figure: figure, selection: canvas.getSelection()})\n      }\n    },\n\n\n    /**\n     *\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} x the x-coordinate of the mouse down event\n     * @param {Number} y the y-coordinate of the mouse down event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseDown: function (canvas, x, y, shiftKey, ctrlKey) {\n      this.mouseMovedDuringMouseDown = false\n      let canDragStart = true\n\n      // ignore ports since version 6.1.0. This is handled by the ConnectionCreatePolicy\n      //\n      let figure = canvas.getBestFigure(x, y)\n\n      // may the figure is assigned to a composite. In this case the composite can\n      // override the event receiver\n      while (figure !== null) {\n        let delegate = figure.getSelectionAdapter()()\n        if (delegate === figure) {\n          break\n        }\n        figure = delegate\n      }\n\n      // ignore ports since version 6.1.0. This is handled by the ConnectionCreatePolicy\n      //\n      if (figure instanceof draw2d.Port) {\n        return// silently\n      }\n\n      if (figure !== null && figure.isDraggable()) {\n        canDragStart = figure.onDragStart(x - figure.getAbsoluteX(), y - figure.getAbsoluteY(), shiftKey, ctrlKey)\n        // Element send a veto about the drag&drop operation\n        this.mouseDraggingElement = canDragStart === false ? null : figure\n      }\n\n      this.mouseDownElement = figure\n      if (this.mouseDownElement !== null) {\n        this.mouseDownElement.fireEvent(\"mousedown\", {\n          x: x, \n          y: y, \n          relX: x - this.mouseDownElement.getAbsoluteX(),\n          relY: y - this.mouseDownElement.getAbsoluteY(),\n          shiftKey: shiftKey, \n          ctrlKey: ctrlKey\n        })\n      }\n\n      if (figure !== canvas.getSelection().getPrimary() && figure !== null && figure.isSelectable() === true) {\n        this.select(canvas, figure)\n\n        // it's a line\n        if (figure instanceof draw2d.shape.basic.Line) {\n          // you can move a line with Drag&Drop...but not a connection.\n          // A Connection is fixed linked with the corresponding ports.\n          //\n          if (!(figure instanceof draw2d.Connection)) {\n            canvas.draggingLineCommand = figure.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE))\n            if (canvas.draggingLineCommand !== null) {\n              canvas.draggingLine = figure\n            }\n          }\n        } else if (canDragStart === false) {\n          figure.unselect()\n        }\n      }\n    },\n\n    /**\n     *\n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} dx The x diff between start of dragging and this event\n     * @param {Number} dy The y diff between start of dragging and this event\n     * @param {Number} dx2 The x diff since the last call of this dragging operation\n     * @param {Number} dy2 The y diff since the last call of this dragging operation\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @template\n     */\n    onMouseDrag: function (canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n\n      this.mouseMovedDuringMouseDown = true\n      if (this.mouseDraggingElement !== null) {\n\n        // mouseDraggingElement be a ResizeHandle...in this case it is not part of the selection\n        //\n        let sel = canvas.getSelection()\n        if (sel.contains(this.mouseDraggingElement)) {\n          sel.each((i, figure) => { figure.onDrag(dx, dy, dx2, dy2, shiftKey, ctrlKey) })\n        } else {\n          this.mouseDraggingElement.onDrag(dx, dy, dx2, dy2, shiftKey, ctrlKey)\n        }\n\n        let p = canvas.fromDocumentToCanvasCoordinate(canvas.mouseDownX + (dx / canvas.zoomFactor), canvas.mouseDownY + (dy / canvas.zoomFactor))\n        let target = canvas.getBestFigure(p.x, p.y, this.mouseDraggingElement)\n\n        if (target !== canvas.currentDropTarget) {\n          if (canvas.currentDropTarget !== null) {\n            canvas.currentDropTarget.onDragLeave(this.mouseDraggingElement)\n            canvas.currentDropTarget.fireEvent(\"dragLeave\", {draggingElement: this.mouseDraggingElement})\n            canvas.currentDropTarget = null\n          }\n          if (target !== null) {\n            canvas.currentDropTarget = target.delegateTarget(this.mouseDraggingElement)\n            // inform all listener that the element has accept the dragEnter event\n            //\n            if (canvas.currentDropTarget !== null) {\n              canvas.currentDropTarget.onDragEnter(this.mouseDraggingElement) // legacy\n              canvas.currentDropTarget.fireEvent(\"dragEnter\", {draggingElement: this.mouseDraggingElement})\n            }\n          }\n        }\n      }\n      // Connection didn't support panning at the moment. There is no special reason for that. Just an interaction\n      // decision.\n      //\n      else if (this.mouseDownElement !== null && !(this.mouseDownElement instanceof draw2d.Connection)) {\n        if (this.mouseDownElement.panningDelegate !== null) {\n          this.mouseDownElement.panningDelegate.fireEvent(\"panning\", {\n            dx: dx,\n            dy: dy,\n            dx2: dx2,\n            dy2: dy2,\n            shiftKey: shiftKey,\n            ctrlKey: ctrlKey\n          })\n          this.mouseDownElement.panningDelegate.onPanning(dx, dy, dx2, dy2, shiftKey, ctrlKey)\n        } else {\n          this.mouseDownElement.fireEvent(\"panning\", {\n            dx: dx,\n            dy: dy,\n            dx2: dx2,\n            dy2: dy2,\n            shiftKey: shiftKey,\n            ctrlKey: ctrlKey\n          })\n          this.mouseDownElement.onPanning(dx, dy, dx2, dy2, shiftKey, ctrlKey)\n        }\n      }\n    },\n\n    /**\n     *\n     * @param {draw2d.Canvas} canvas the related Canvas\n     * @param {Number} x the x-coordinate of the mouse down event\n     * @param {Number} y the y-coordinate of the mouse down event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseUp: function (canvas, x, y, shiftKey, ctrlKey) {\n      if (this.mouseDraggingElement !== null) {\n        let redrawConnection = new draw2d.util.ArrayList()\n        if (this.mouseDraggingElement instanceof draw2d.shape.node.Node) {\n          // TODO: don't add the connections with to check if a repaint is required\n          //       may a moved connection didn't have an intersection with the named lines.\n          //       in this case a redraw is useless\n          canvas.lineIntersections.each(function (i, inter) {\n            if (!redrawConnection.contains(inter.line)) redrawConnection.add(inter.line)\n            if (!redrawConnection.contains(inter.other)) redrawConnection.add(inter.other)\n          })\n        }\n\n        // start CommandStack transaction\n        canvas.getCommandStack().startTransaction()\n\n        let sel = canvas.getSelection().getAll()\n        if (!sel.contains(this.mouseDraggingElement)) {\n          this.mouseDraggingElement.onDragEnd(x, y, shiftKey, ctrlKey)\n        } else {\n          canvas.getSelection().getAll().each(function (i, figure) {\n            figure.onDragEnd(x, y, shiftKey, ctrlKey)\n          })\n        }\n\n        if (canvas.currentDropTarget !== null && !this.mouseDraggingElement.isResizeHandle) {\n          this.mouseDraggingElement.onDrop(canvas.currentDropTarget, x, y, shiftKey, ctrlKey)\n          canvas.currentDropTarget.onDragLeave(this.mouseDraggingElement)\n          canvas.currentDropTarget.fireEvent(\"dragLeave\", {draggingElement: this.mouseDraggingElement})\n          canvas.currentDropTarget.onCatch(this.mouseDraggingElement, x, y, shiftKey, ctrlKey)\n          canvas.currentDropTarget = null\n        }\n\n        // end command stack trans\n        canvas.getCommandStack().commitTransaction()\n\n        if (this.mouseDraggingElement instanceof draw2d.shape.node.Node) {\n          canvas.lineIntersections.each(function (i, inter) {\n            if (!redrawConnection.contains(inter.line)) redrawConnection.add(inter.line)\n            if (!redrawConnection.contains(inter.other)) redrawConnection.add(inter.other)\n          })\n          redrawConnection.each(function (i, line) {\n            line.svgPathString = null\n            line.repaint()\n          })\n        }\n\n        this.mouseDraggingElement = null\n      }\n      // Connection didn't support panning at the moment. There is no special reason for that. Just an interaction\n      // decision.\n      //\n      else if (this.mouseDownElement !== null && !(this.mouseDownElement instanceof draw2d.Connection)) {\n        if (this.mouseDownElement.panningDelegate !== null) {\n          this.mouseDownElement.panningDelegate.fireEvent(\"panningEnd\")\n          this.mouseDownElement.panningDelegate.onPanningEnd()\n        } else {\n          this.mouseDownElement.fireEvent(\"panningEnd\")\n          this.mouseDownElement.onPanningEnd()\n        }\n      }\n\n      // Reset the current selection if the user click in the blank canvas.\n      // Don't reset the selection if the user pan the canvas\n      //\n      if (this.mouseDownElement === null && this.mouseMovedDuringMouseDown === false) {\n        this.select(canvas, null)\n      }\n\n      this.mouseDownElement?.fireEvent(\"mouseup\", {\n        x: x, \n        y: y, \n        relX: x - this.mouseDownElement.getAbsoluteX(),\n        relY: y - this.mouseDownElement.getAbsoluteY(),\n        shiftKey: shiftKey, \n        ctrlKey: ctrlKey\n      })\n\n      this.mouseDownElement = null\n      this.mouseMovedDuringMouseDown = false\n    },\n\n    /**\n     *\n     * Called by the canvas if the user click on a figure.\n     *\n     * @param {draw2d.Figure} figure the figure under the click event. Can be null\n     * @param {Number} mouseX the x coordinate of the mouse during the click event\n     * @param {Number} mouseY the y coordinate of the mouse during the click event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @since 3.0.0\n     */\n    onClick: function (figure, mouseX, mouseY, shiftKey, ctrlKey) {\n      if (figure !== null) {\n        figure.fireEvent(\"click\", {\n          figure: figure,\n          x: mouseX,\n          y: mouseY,\n          relX: mouseX - figure.getAbsoluteX(),\n          relY: mouseY - figure.getAbsoluteY(),\n          shiftKey: shiftKey,\n          ctrlKey: ctrlKey\n        })\n\n        figure.onClick()\n      }\n    },\n\n    /**\n     *\n     * Called by the canvas if the user double click on a figure.\n     *\n     * @param {draw2d.Figure} figure the figure under the double click event. Can be null\n     * @param {Number} mouseX the x coordinate of the mouse during the click event\n     * @param {Number} mouseY the y coordinate of the mouse during the click event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @since 4.1.0\n     */\n    onDoubleClick: function (figure, mouseX, mouseY, shiftKey, ctrlKey) {\n      if (figure !== null) {\n        figure.fireEvent(\"dblclick\", \n        {\n          x: mouseX, \n          y: mouseY, \n          relX: mouseX - figure.getAbsoluteX(),\n          relY: mouseX - figure.getAbsoluteY(),  \n          shiftKey: shiftKey,\n          ctrlKey: ctrlKey\n        })\n        figure.onDoubleClick()\n      }\n    }\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Snapping is based on the existing children of a container. When snapping a shape,\n * the center of the bounding box will snap to the center of other figures of the given canvas.\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.SnapToEditPolicy\n * @since 5.6.4\n */\ndraw2d.policy.canvas.SnapToCenterEditPolicy = draw2d.policy.canvas.SnapToEditPolicy.extend(\n  /** @lends draw2d.policy.canvas.SnapToCenterEditPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.SnapToCenterEditPolicy\",\n\n  SNAP_THRESHOLD: 5,\n  FADEOUT_DURATION: 500,\n\n  /**\n   * Creates a new constraint policy for snap to geometry\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    this.centers = null\n\n    this.horizontalGuideLines = null\n    this.verticalGuideLines = null\n  },\n\n  /**\n   *\n   *\n   * @param {draw2d.Figure} figure the shape below the mouse or null\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseUp: function (figure, x, y, shiftKey, ctrlKey) {\n    this.centers = null\n    this.hideHorizontalGuides(false)\n    this.hideVerticalGuides(false)\n  },\n\n  /**\n   *\n   * Adjust the coordinates to the canvas neighbours\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {draw2d.Figure} figure the figure to snap\n   * @param {draw2d.geo.Point} modifiedPos the already modified position of the figure (e.g. from an another Policy)\n   * @param {draw2d.geo.Point} originalPos the original requested position of the figure\n   *\n   * @returns {draw2d.geo.Point} the constraint position of the figure\n   */\n  snap: function (canvas, figure, modifiedPos, originalPos) {\n    // do nothing for resize handles\n    if (figure instanceof draw2d.ResizeHandle) {\n      return modifiedPos\n    }\n\n    // do nothing for lines\n    if (figure instanceof draw2d.shape.basic.Line) {\n      return modifiedPos\n    }\n\n\n    let allowXChanges = modifiedPos.x === originalPos.x\n    let allowYChanges = modifiedPos.y === originalPos.y\n\n    let inputBounds = new draw2d.geo.Rectangle(modifiedPos.x, modifiedPos.y, figure.getWidth(), figure.getHeight())\n    let inputCenter = inputBounds.getCenter()\n\n    modifiedPos = modifiedPos.clone()\n\n    if (allowXChanges === true) {\n      let horizontal = this.snapHorizontal(inputCenter)\n\n      // Show a horizontal line if the snapper has modified the inputPoint\n      //\n      if (horizontal.snapped) {\n        // show the snap lines..\n        this.showHorizontalGuides(figure, horizontal)\n\n        // and snap the x coordinate\n        modifiedPos.y += horizontal.diff\n      }\n      else {\n        this.hideHorizontalGuides(true)\n      }\n    }\n    else {\n      this.hideHorizontalGuides(true)\n    }\n\n    if (allowYChanges === true) {\n      let vertical = this.snapVertical(inputCenter)\n\n      // Show a vertical guides if the snapper has modified the inputPoint\n      //\n      if (vertical.snapped) {\n        // show the snap lines..\n        this.showVerticalGuides(figure, vertical)\n\n        // and snap the x coordinate\n        modifiedPos.x += vertical.diff\n      }\n      else {\n        this.hideVerticalGuides(true)\n      }\n    }\n    else {\n      this.hideVerticalGuides(true)\n    }\n\n    return modifiedPos\n  },\n\n\n  snapVertical: function (center) {\n    let _this = this\n    if (this.centers === null) {\n      this.populateCenters()\n    }\n\n    let result = {\n      point: center,\n      snapped: false,\n      diff: 0\n    }\n\n\n    let candidates = []\n    this.centers.forEach( (point) =>{\n      if (Math.abs(point.x - center.x) < _this.SNAP_THRESHOLD) {\n        candidates.push(point)\n      }\n    })\n\n    // we can abort if we didn't find an intersection on the right hand side\n    if (candidates.length === 0) {\n      return result\n    }\n\n    // sort the intersection point and get the closest point to the tested inputPoint\n    // In this case it is the point with the greatest X coordinate\n    //\n    candidates.sort( (a, b) => a.x - b.x )\n\n    let diff = candidates[0].x - center.x\n    let snappedPoint = center.clone()\n    snappedPoint.x += diff\n    return {snapped: true, diff: diff, point: candidates[0], snappedPoint: snappedPoint}\n  },\n\n\n  snapHorizontal: function (center) {\n    let _this = this\n    if (this.centers === null) {\n      this.populateCenters()\n    }\n\n    let result = {\n      point: center,\n      snapped: false,\n      diff: 0\n    }\n\n\n    let candidates = []\n    this.centers.forEach( (point) => {\n      if (Math.abs(point.y - center.y) < _this.SNAP_THRESHOLD) {\n        candidates.push(point)\n      }\n    })\n\n    // we can abort if we didn't find an intersection on the right hand side\n    if (candidates.length === 0) {\n      return result\n    }\n\n    // sort the intersection point and get the closest point to the tested inputPoint\n    // In this case it is the point with the greatest X coordinate\n    //\n    candidates.sort( (a, b) =>  a.y - b.y)\n\n    let diff = candidates[0].y - center.y\n    let snappedPoint = center.clone()\n    snappedPoint.y += diff\n    return {snapped: true, diff: diff, point: candidates[0], snappedPoint: snappedPoint}\n  },\n\n  populateCenters: function () {\n    let selection = this.canvas.getSelection().getAll(true)\n    let centers = this.centers = []\n\n    let figures = this.canvas.getFigures()\n    figures.each( (index, figure) =>{\n      if (!selection.contains(figure)) {\n        centers.push(figure.getBoundingBox().getCenter())\n      }\n    })\n  },\n\n  showHorizontalGuides: function (causedFigure, constraint) {\n    if (this.horizontalGuideLines !== null) {\n      this.horizontalGuideLines.stop()\n      this.horizontalGuideLines.remove()\n    }\n\n    let start = constraint.point\n    let end = constraint.snappedPoint\n\n    this.canvas.paper.setStart()\n\n    // horizontal lines\n    //\n    this.canvas.paper\n      .path(\n        \"M \" + (start.x) + \" \" + ((start.y | 0) + 0.5) + \" L \" + (end.x) + \" \" + ((end.y | 0) + 0.5))\n      .attr({\n      \"stroke\": this.lineColor.rgba(),\n      \"stroke-width\": 1\n    })\n\n    this.horizontalGuideLines = this.canvas.paper.setFinish()\n    this.horizontalGuideLines.toFront()\n  },\n\n  /**\n   *\n   * Hide the horizontal snapping guides\n   *\n   * @param {Boolean} fast\n   */\n  hideHorizontalGuides: function (fast) {\n    if (this.horizontalGuideLines === null) {\n      return\n    }\n    if (fast === true) {\n      if (this.horizontalGuideLines !== null) {\n        this.horizontalGuideLines.remove()\n        this.horizontalGuideLines = null\n      }\n    }\n    else {\n      this.horizontalGuideLines.animate(\n        {opacity: 0.1},\n        this.FADEOUT_DURATION,\n        () => {\n          if (this.horizontalGuideLines !== null) {\n            this.horizontalGuideLines.remove()\n            this.horizontalGuideLines = null\n          }\n        }\n      )\n    }\n  },\n\n\n  showVerticalGuides: function (causedFigure, constraint) {\n    if (this.verticalGuideLines !== null) {\n      this.verticalGuideLines.stop()\n      this.verticalGuideLines.remove()\n    }\n\n    let start = constraint.point\n    let end = constraint.snappedPoint\n\n    this.canvas.paper.setStart()\n\n    // horizontal lines\n    //\n    this.canvas.paper\n      .path(\n        \"M \" + ((start.x | 0) + 0.5) + \" \" + (start.y) + \" L \" + ((end.x | 0) + 0.5) + \" \" + (end.y))\n      .attr({\n        \"stroke\": this.lineColor.rgba(),\n        \"stroke-width\": 1\n    })\n\n\n    this.verticalGuideLines = this.canvas.paper.setFinish()\n    this.verticalGuideLines.toFront()\n  },\n\n  /**\n   *\n   * Hide the horizontal snapüing guides\n   *\n   * @param soft\n   */\n  hideVerticalGuides: function (fast) {\n    if (this.verticalGuideLines === null) {\n      return\n    }\n    if (fast === true) {\n      if (this.verticalGuideLines !== null) {\n        this.verticalGuideLines.remove()\n        this.verticalGuideLines = null\n      }\n    }\n    else {\n      this.verticalGuideLines.animate(\n        {opacity: 0.1},\n        this.FADEOUT_DURATION,\n        () => {\n          if (this.verticalGuideLines !== null) {\n            this.verticalGuideLines.remove()\n            this.verticalGuideLines = null\n          }\n        }\n      )\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A helper used to perform snapping to a grid, which is specified on the canvas via the various\n * properties defined in this class.\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.ShowDimetricGridEditPolicy\n */\ndraw2d.policy.canvas.SnapToDimetricGridEditPolicy = draw2d.policy.canvas.ShowDimetricGridEditPolicy.extend(\n  /** @lends draw2d.policy.canvas.SnapToDimetricGridEditPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.SnapToDimetricGridEditPolicy\",\n\n\n  /**\n   * Creates a new constraint policy for snap to grid\n   *\n   * @param {Number} grid the grid width of the canvas\n   */\n  init: function (grid) {\n    this._super(grid)\n  },\n\n\n  /**\n   *\n   * Applies a snapping correction to the given result.\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {draw2d.Figure} figure the figure to snap\n   * @param {draw2d.geo.Point} modifiedPos the already modified position of the figure (e.g. from an another Policy)\n   * @param {draw2d.geo.Point} originalPos the original requested position of the figure\n   * @since 2.3.0\n   */\n  snap: function (canvas, figure, modifiedPos, originalPos) {\n    // do nothing for lines\n    if (figure instanceof draw2d.shape.basic.Line) {\n      return modifiedPos\n    }\n\n    let snapPoint = figure.getSnapToGridAnchor()\n\n    modifiedPos.x = modifiedPos.x + snapPoint.x\n    modifiedPos.y = modifiedPos.y + snapPoint.y\n\n    let g = this.grid / 5\n\n    modifiedPos.x = g * Math.floor(((modifiedPos.x + g / 2.0) / g))\n    modifiedPos.y = g * Math.floor(((modifiedPos.y + g / 2.0) / g))\n\n    modifiedPos.x = modifiedPos.x - snapPoint.x\n    modifiedPos.y = modifiedPos.y - snapPoint.y\n\n    return modifiedPos\n  }\n})\n","import draw2d from '../../packages'\n\ndraw2d.SnapToHelper = {}\n\ndraw2d.SnapToHelper.NORTH = 1\ndraw2d.SnapToHelper.SOUTH = 4\ndraw2d.SnapToHelper.WEST = 8\ndraw2d.SnapToHelper.EAST = 16\ndraw2d.SnapToHelper.CENTER_H = 32\ndraw2d.SnapToHelper.CENTER_V = 642\n\ndraw2d.SnapToHelper.NORTH_EAST = draw2d.SnapToHelper.NORTH | draw2d.SnapToHelper.EAST\ndraw2d.SnapToHelper.NORTH_WEST = draw2d.SnapToHelper.NORTH | draw2d.SnapToHelper.WEST\ndraw2d.SnapToHelper.SOUTH_EAST = draw2d.SnapToHelper.SOUTH | draw2d.SnapToHelper.EAST\ndraw2d.SnapToHelper.SOUTH_WEST = draw2d.SnapToHelper.SOUTH | draw2d.SnapToHelper.WEST\ndraw2d.SnapToHelper.NORTH_SOUTH = draw2d.SnapToHelper.NORTH | draw2d.SnapToHelper.SOUTH\ndraw2d.SnapToHelper.EAST_WEST = draw2d.SnapToHelper.EAST | draw2d.SnapToHelper.WEST\ndraw2d.SnapToHelper.NSEW = draw2d.SnapToHelper.NORTH_SOUTH | draw2d.SnapToHelper.EAST_WEST\n\n/**\n * @class\n *\n * A helper used by Tools for snapping certain mouse interactions.\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.CanvasPolicy\n */\ndraw2d.policy.canvas.SnapToEditPolicy = draw2d.policy.canvas.CanvasPolicy.extend(\n  /** @lends draw2d.policy.canvas.SnapToEditPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.SnapToEditPolicy\",\n\n  /**\n   * Creates a new constraint policy for snap to grid\n   *\n   */\n  init: function (attr, setter, getter) {\n    this.lineColor = null\n\n    this._super(\n      {\n        lineColor: \"#51C1FC\",\n        ...attr\n      },\n      {\n        // @attr {draw2d.util.Color} color the line color of the snapTo lines */\n        lineColor: this.setLineColor,\n        ...setter},\n      {\n        lineColor: this.getLineColor,\n        ...getter})\n  },\n\n  /**\n   *\n   * Set the color of the snap line.\n   *\n   *     // Alternatively you can use the attr method:\n   *     policy.attr({\n   *       lineColor: color\n   *     });\n   *\n   * @param {draw2d.util.Color|String} color The new color of the line.\n   **/\n  setLineColor: function (color) {\n    this.lineColor = new draw2d.util.Color(color)\n    return this\n  },\n\n  /**\n   *\n   * Return the current paint color.\n   *\n   * @returns {draw2d.util.Color} The paint color of the line.\n   * @since 5.6.1\n   **/\n  getLineColor: function () {\n    return this.lineColor\n  },\n\n\n  /**\n   *\n   * Adjust the coordinates to the given constraint of the policy.\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {draw2d.Figure} figure the figure to snap\n   * @param {draw2d.geo.Point} modifiedPos the already modified position of the figure (e.g. from an another Policy)\n   * @param {draw2d.geo.Point} originalPos the original requested position of the figure\n   */\n  snap: function (canvas, figure, modifiedPos, originalPos) {\n    return modifiedPos\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Snapping is based on the existing children of a container. When snapping a shape,\n * the edges of the bounding box will snap to edges of other rectangles generated\n * from the children of the given canvas.\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.SnapToEditPolicy\n */\ndraw2d.policy.canvas.SnapToGeometryEditPolicy = draw2d.policy.canvas.SnapToEditPolicy.extend(\n  /** @lends draw2d.policy.canvas.SnapToGeometryEditPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.SnapToGeometryEditPolicy\",\n\n  SNAP_THRESHOLD: 3,\n  FADEOUT_DURATION: 300,\n\n  /**\n   * Creates a new constraint policy for snap to geometry\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    this.rows = null\n    this.cols = null\n    this.vline = null\n    this.hline = null\n  },\n\n\n  /**\n   * \n   *\n   * @param {draw2d.Figure} figure the shape below the mouse or null\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseUp: function (figure, x, y, shiftKey, ctrlKey) {\n    this.rows = null\n    this.cols = null\n    this.hideVerticalLine()\n    this.hideHorizontalLine()\n  },\n\n  /**\n   * \n   * Adjust the coordinates to the canvas neighbours\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {draw2d.Figure} figure the figure to snap\n   * @param {draw2d.geo.Point} modifiedPos the already modified position of the figure (e.g. from an another Policy)\n   * @param {draw2d.geo.Point} originalPos the original requested position of the figure\n   *\n   * @returns {draw2d.geo.Point} the constraint position of the figure\n   */\n  snap: function (canvas, figure, modifiedPos, originalPos) {\n    // do nothing for lines\n    if (figure instanceof draw2d.shape.basic.Line) {\n      return modifiedPos\n    }\n\n    let result\n    let allowXChanges = modifiedPos.x === originalPos.x\n    let allowYChanges = modifiedPos.y === originalPos.y\n\n    // Coordinates already snapped to an x/y coordinate.\n    // Don't change them and in this case no further calculation is requried.\n    //\n    if (!allowXChanges && !allowYChanges) {\n      return modifiedPos\n    }\n\n    if (figure instanceof draw2d.ResizeHandle) {\n      let snapPoint = figure.getSnapToGridAnchor()\n      modifiedPos.x += snapPoint.x\n      modifiedPos.y += snapPoint.y\n\n      let snapDirections = figure.getSnapToDirection()\n      result = this.snapPoint(snapDirections, modifiedPos)\n\n      // Show a vertical line if the snapper has modified the inputPoint\n      //\n      if (allowXChanges && (snapDirections & draw2d.SnapToHelper.EAST_WEST) && !(result.edge & draw2d.SnapToHelper.EAST_WEST)) {\n        this.showVerticalLine(figure, draw2d.SnapToHelper.WEST, result.point.x)\n      }\n      else {\n        this.hideVerticalLine()\n      }\n\n      // Show a horizontal line if the snapper has modified the inputPoint\n      //\n      if (allowYChanges && (snapDirections & draw2d.SnapToHelper.NORTH_SOUTH) && !(result.edge & draw2d.SnapToHelper.NORTH_SOUTH)) {\n        this.showHorizontalLine(figure, draw2d.SnapToHelper.NORTH, result.point.y)\n      }\n      else {\n        this.hideHorizontalLine()\n      }\n\n      // restore the original pos coordinate if x or y coordinate already snapped to any axis\n      // or subtract the added snapOffset\n      //\n      result.point.x = allowXChanges ? result.point.x - snapPoint.x : modifiedPos.x\n      result.point.y = allowYChanges ? result.point.y - snapPoint.y : modifiedPos.y\n\n      return result.point\n    }\n\n    // The user drag&drop a normal figure\n    let inputBounds = new draw2d.geo.Rectangle(modifiedPos.x, modifiedPos.y, figure.getWidth(), figure.getHeight())\n\n    result = this.snapRectangle(inputBounds)\n\n    if (!allowXChanges) {\n      result.bounds.x = modifiedPos.x\n    }\n\n    if (!allowYChanges) {\n      result.bounds.y = modifiedPos.y\n    }\n\n    // Show a vertical line if the snapper has modified the inputPoint\n    //\n    if (allowXChanges && !(result.edge & draw2d.SnapToHelper.WEST)) {\n      this.showVerticalLine(figure, draw2d.SnapToHelper.WEST, result.bounds.x)\n    }\n    else if (allowXChanges && !(result.edge & draw2d.SnapToHelper.EAST)) {\n      this.showVerticalLine(figure, draw2d.SnapToHelper.EAST, result.bounds.x + result.bounds.getWidth())\n    }\n    else {\n      this.hideVerticalLine()\n    }\n\n\n    // Show a horizontal line if the snapper has modified the inputPoint\n    //\n    if (allowYChanges && !(result.edge & draw2d.SnapToHelper.NORTH)) {\n      this.showHorizontalLine(figure, draw2d.SnapToHelper.NORTH, result.bounds.y)\n    }\n    else if (allowYChanges && !(result.edge & draw2d.SnapToHelper.SOUTH)) {\n      this.showHorizontalLine(figure, draw2d.SnapToHelper.SOUTH, result.bounds.y + result.bounds.getHeight())\n    }\n    else {\n      this.hideHorizontalLine()\n    }\n\n    return result.bounds.getTopLeft()\n  },\n\n  /**\n   * \n   * calculates the snapped position of the rectangle.\n   *\n   * @param {draw2d.geo.Rectangle} inputBounds\n   *\n   * @returns {Object}\n   */\n  snapRectangle: function (inputBounds) {\n    let resultBounds = inputBounds.clone()\n\n    let topLeft = this.snapPoint(draw2d.SnapToHelper.NORTH_WEST, inputBounds.getTopLeft())\n    resultBounds.x = topLeft.point.x\n    resultBounds.y = topLeft.point.y\n\n    let bottomRight = this.snapPoint(draw2d.SnapToHelper.SOUTH_EAST, inputBounds.getBottomRight())\n\n    // The first test (topLeft) has not modified the point. so we can modify them with the bottomRight adjustment\n    //\n    if (topLeft.edge & draw2d.SnapToHelper.WEST) {\n      resultBounds.x = bottomRight.point.x - inputBounds.getWidth()\n    }\n\n    // The first test (topLeft) has not modified the point. so we can modify them with the bottomRight adjustment\n    //\n    if (topLeft.edge & draw2d.SnapToHelper.NORTH) {\n      resultBounds.y = bottomRight.point.y - inputBounds.getHeight()\n    }\n\n    return {edge: topLeft.edge | bottomRight.edge, bounds: resultBounds}\n  },\n\n  snapPoint: function (/*:int*/ snapOrientation, /*:draw2d.Point*/ inputPoint) {\n    let resultPoint = inputPoint.clone()\n\n    if (this.rows === null || this.cols === null)\n      this.populateRowsAndCols()\n\n    if ((snapOrientation & draw2d.SnapToHelper.EAST) !== 0) {\n      let rightCorrection = this.getCorrectionFor(this.cols, inputPoint.x + 1, 1)\n      if (rightCorrection !== this.SNAP_THRESHOLD) {\n        snapOrientation &= ~draw2d.SnapToHelper.EAST\n        resultPoint.x += rightCorrection\n      }\n    }\n\n    if ((snapOrientation & draw2d.SnapToHelper.WEST) !== 0) {\n      let leftCorrection = this.getCorrectionFor(this.cols, inputPoint.x, -1)\n      if (leftCorrection !== this.SNAP_THRESHOLD) {\n        snapOrientation &= ~draw2d.SnapToHelper.WEST\n        resultPoint.x += leftCorrection\n      }\n    }\n\n    if ((snapOrientation & draw2d.SnapToHelper.SOUTH) !== 0) {\n      let bottomCorrection = this.getCorrectionFor(this.rows, inputPoint.y + 1, 1)\n      if (bottomCorrection !== this.SNAP_THRESHOLD) {\n        snapOrientation &= ~draw2d.SnapToHelper.SOUTH\n        resultPoint.y += bottomCorrection\n      }\n    }\n\n    if ((snapOrientation & draw2d.SnapToHelper.NORTH) !== 0) {\n      let topCorrection = this.getCorrectionFor(this.rows, inputPoint.y, -1)\n      if (topCorrection !== this.SNAP_THRESHOLD) {\n        snapOrientation &= ~draw2d.SnapToHelper.NORTH\n        resultPoint.y += topCorrection\n      }\n    }\n\n    return {edge: snapOrientation, point: resultPoint}\n  },\n\n  populateRowsAndCols: function () {\n    let selection = this.canvas.getSelection()\n    this.rows = []\n    this.cols = []\n\n    let figures = this.canvas.getFigures()\n    for (let i = 0; i < figures.getSize(); i++) {\n      let figure = figures.get(i)\n      if (!selection.contains(figure, true)) {\n        let bounds = figure.getBoundingBox()\n        this.cols.push({type: -1, location: bounds.x})\n        this.cols.push({type: 0, location: bounds.x + (bounds.w - 1) / 2})\n        this.cols.push({type: 1, location: bounds.getRight() + 1})\n        this.rows.push({type: -1, location: bounds.y})\n        this.rows.push({type: 0, location: bounds.y + (bounds.h - 1) / 2})\n        this.rows.push({type: 1, location: bounds.getBottom() + 1})\n      }\n    }\n\n    // TODO: remove duplicate entries in the rows/cols array\n\n  },\n\n  getCorrectionFor: function (/*:Array*/ entries, /*:double*/ value, /*:int*/ side) {\n    let resultMag = this.SNAP_THRESHOLD\n    let result = this.SNAP_THRESHOLD\n\n    for (let i = 0; i < entries.length; i++) {\n      let entry = entries[i]\n      let magnitude\n\n      if (entry.type === -1 && side !== 0) {\n        magnitude = Math.abs(value - entry.location)\n        if (magnitude < resultMag) {\n          resultMag = magnitude\n          result = entry.location - value\n        }\n      }\n      else if (entry.type === 0 && side === 0) {\n        magnitude = Math.abs(value - entry.location)\n        if (magnitude < resultMag) {\n          resultMag = magnitude\n          result = entry.location - value\n        }\n      }\n      else if (entry.type === 1 && side !== 0) {\n        magnitude = Math.abs(value - entry.location)\n        if (magnitude < resultMag) {\n          resultMag = magnitude\n          result = entry.location - value\n        }\n      }\n    }\n    return result\n  },\n\n  showVerticalLine: function (causedFigure, edge, x) {\n    if (this.vline != null) {\n      this.vline.stop()\n      this.vline.remove()\n    }\n\n    let figures = this.canvas.getFigures().clone()\n    figures.removeAll(this.canvas.getSelection().getAll(true))\n    figures.map(function (figure) {\n      return figure.getBoundingBox()\n    })\n    figures.grep(function (bbox) {\n      return (Math.abs(bbox.x - x) <= 1) || (Math.abs(bbox.getRight() - x) <= 1)\n    })\n\n    // return silently if no figure bounding box is left\n    //\n    if (figures.getSize() === 0) {\n      return\n    }\n\n    // figure to align is above the current shape\n    //\n    let causedBox = causedFigure.getBoundingBox()\n    let causedCenter = causedBox.getCenter()\n    figures.sort(function (a, b) {\n      let d_a = a.getCenter().distance(causedCenter)\n      let d_b = b.getCenter().distance(causedCenter)\n      return d_a - d_b\n    })\n    let fromY = 0\n    let maxLength = this.canvas.getHeight() * Math.max(1, this.canvas.getZoom())\n    let yLength = maxLength\n    let snappedBox = figures.get(0)\n    if (causedBox.y < snappedBox.y) {\n      fromY = causedBox.y\n      yLength = snappedBox.getBottom() - causedBox.y\n    }\n    else {\n      fromY = snappedBox.y\n      yLength = causedBox.getBottom() - snappedBox.y\n    }\n\n    x = (x | 0) + 0.5 // force a .5 number to avoid subpixel rendering. Blurry lines...\n    this.canvas.paper.setStart()\n    this.canvas.paper.path(\"M \" + x + \" 0 l 0 \" + maxLength)\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n    this.canvas.paper.path(\"M \" + x + \" \" + fromY + \" l 0 \" + yLength)\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n    this.vline = this.canvas.paper.setFinish()\n    this.vline.toBack()\n  },\n\n  hideVerticalLine: function () {\n    if (this.vline == null) {\n      return\n    }\n    this.vline.animate(\n      {opacity: 0.1},\n      this.FADEOUT_DURATION,\n      () => {\n        if (this.vline !== null) {\n          this.vline.remove()\n          this.vline = null\n        }\n      }\n    )\n  },\n\n  showHorizontalLine: function (causedFigure, edge, y) {\n    if (this.hline != null) {\n      this.hline.stop()\n      this.hline.remove()\n    }\n\n    let figures = this.canvas.getFigures().clone()\n    figures.removeAll(this.canvas.getSelection().getAll(true))\n    figures.map(function (figure) {\n      return figure.getBoundingBox()\n    })\n    figures.grep(function (bbox) {\n      return (Math.abs(bbox.y - y) <= 1) || (Math.abs(bbox.getBottom() - y) <= 1)\n    })\n\n    // return silently if no figure bounding box is left\n    //\n    if (figures.getSize() === 0) {\n      return\n    }\n\n    // figure to align is above the current shape\n    //\n    let causedBox = causedFigure.getBoundingBox()\n    let causedCenter = causedBox.getCenter()\n    figures.sort(function (a, b) {\n      let d_a = a.getCenter().distance(causedCenter)\n      let d_b = b.getCenter().distance(causedCenter)\n      return d_a - d_b\n    })\n    let fromX = 0\n    let maxLength\n    let xLength = maxLength = this.canvas.getWidth() * Math.max(1, this.canvas.getZoom())\n    let snappedBox = figures.get(0)\n    if (causedBox.x < snappedBox.x) {\n      fromX = causedBox.x\n      xLength = snappedBox.getRight() - causedBox.x\n    }\n    else {\n      fromX = snappedBox.x\n      xLength = causedBox.getRight() - snappedBox.x\n    }\n\n\n    y = (y | 0) + 0.5 // force a .5 number to avoid subpixel rendering. Blurry lines...\n\n    this.canvas.paper.setStart()\n    this.canvas.paper.path(\"M 0 \" + y + \" l \" + maxLength + \" 0\")\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n    this.canvas.paper.path(\"M \" + fromX + \" \" + y + \" l \" + xLength + \" 0\")\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n    this.hline = this.canvas.paper.setFinish()\n    this.hline.toBack()\n\n  },\n\n  hideHorizontalLine: function () {\n    if (this.hline === null) {\n      return //silently\n    }\n    this.hline.animate(\n      {opacity: 0.1},\n      this.FADEOUT_DURATION,\n      () => {\n        if (this.hline !== null) {\n          this.hline.remove()\n          this.hline = null\n        }\n      }\n    )\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A helper used to perform snapping to a grid, which is specified on the canvas via the various\n * properties defined in this class.\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.ShowGridEditPolicy\n */\ndraw2d.policy.canvas.SnapToGridEditPolicy = draw2d.policy.canvas.SnapToEditPolicy.extend(\n  /** @lends draw2d.policy.canvas.SnapToGridEditPolicy.prototype */\n  {\n\n    NAME: \"draw2d.policy.canvas.SnapToGridEditPolicy\",\n\n\n    /**\n     * Creates a new constraint policy for snap to grid\n     *\n     * @param {Number} grid the grid width of the canvas\n     */\n    init: function (grid, showGrid) {\n      this._super()\n      this.grid = grid || 20\n\n      // Default Value for \"showGrid=true\"\n      if (typeof showGrid ===\"undefined\" || showGrid===true) {\n        this.renderer = new draw2d.policy.canvas.ShowGridEditPolicy(this.grid)\n      }\n    },\n\n\n    onInstall: function (canvas) {\n      this._super(canvas)\n      if (this.renderer) this.renderer.onInstall(canvas)\n    },\n\n    onUninstall: function (canvas) {\n      this._super(canvas)\n      if (this.renderer) this.renderer.onUninstall(canvas)\n    },\n\n    /**\n     *\n     * Set a new grid width/height\n     *\n     * @param {Number} grid\n     * @since 5.0.3\n     */\n    setGrid: function (grid) {\n      this.grid = grid\n      if (this.renderer) this.renderer.setGrid(grid)\n    },\n\n      /**\n     *\n     * Applies a snapping correction to the given result.\n     *\n     * @param {draw2d.Canvas} canvas the related canvas\n     * @param {draw2d.Figure} figure the figure to snap\n     * @param {draw2d.geo.Point} modifiedPos the already modified position of the figure (e.g. from an another Policy)\n     * @param {draw2d.geo.Point} originalPos the original requested position of the figure\n     * @since 2.3.0\n     */\n    snap: function (canvas, figure, modifiedPos, originalPos) {\n      // do nothing for lines\n      if (figure instanceof draw2d.shape.basic.Line) {\n        return modifiedPos\n      }\n\n      let snapPoint = figure.getSnapToGridAnchor()\n\n      modifiedPos.x = modifiedPos.x + snapPoint.x\n      modifiedPos.y = modifiedPos.y + snapPoint.y\n\n\n      modifiedPos.x = this.grid * Math.floor(((modifiedPos.x + this.grid / 2.0) / this.grid))\n      modifiedPos.y = this.grid * Math.floor(((modifiedPos.y + this.grid / 2.0) / this.grid))\n\n      modifiedPos.x = modifiedPos.x - snapPoint.x\n      modifiedPos.y = modifiedPos.y - snapPoint.y\n\n      return modifiedPos\n    }\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Snapping is based on the existing children of a container. When snapping a shape,\n * the edges of the bounding box will snap to edges of other rectangles generated\n * from the children of the given canvas.\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.SnapToEditPolicy\n * @since 5.6.4\n */\ndraw2d.policy.canvas.SnapToInBetweenEditPolicy = draw2d.policy.canvas.SnapToEditPolicy.extend(\n  /** @lends draw2d.policy.canvas.SnapToInBetweenEditPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.canvas.SnapToInBetweenEditPolicy\",\n\n  SNAP_THRESHOLD: 5,\n  FADEOUT_DURATION: 500,\n\n  /**\n   * Creates a new constraint policy for snap to geometry\n   *\n   */\n  init: function (attr, setter, getter) {\n\n    this._super(attr, setter, getter)\n\n    this.bounds = null\n\n    this.horizontalGuideLines = null\n    this.verticalGuideLines = null\n  },\n\n\n  /**\n   *\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @template\n   */\n  onMouseUp: function (figure, x, y, shiftKey, ctrlKey) {\n    this.bounds = null\n    this.hideHorizontalGuides(false)\n    this.hideVerticalGuides(false)\n  },\n\n  /**\n   *\n   * Adjust the coordinates to the canvas neighbours\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {draw2d.Figure} figure the figure to snap\n   * @param {draw2d.geo.Point} modifiedPos the already modified position of the figure (e.g. from an another Policy)\n   * @param {draw2d.geo.Point} originalPos the original requested position of the figure\n   *\n   * @returns {draw2d.geo.Point} the constraint position of the figure\n   */\n  snap: function (canvas, figure, modifiedPos, originalPos) {\n    // do nothing for resize handles\n    if (figure instanceof draw2d.ResizeHandle) {\n      return modifiedPos\n    }\n    // do nothing for lines\n    if (figure instanceof draw2d.shape.basic.Line) {\n      return modifiedPos\n    }\n\n\n    var allowXChanges = modifiedPos.x === originalPos.x\n    var allowYChanges = modifiedPos.y === originalPos.y\n\n    var inputBounds = new draw2d.geo.Rectangle(modifiedPos.x, modifiedPos.y, figure.getWidth(), figure.getHeight())\n\n    modifiedPos = modifiedPos.clone()\n\n    if (allowXChanges === true) {\n      var horizontal = this.snapHorizontal(inputBounds)\n\n      // Show a horizontal line if the snapper has modified the inputPoint\n      //\n      if (horizontal.snapped) {\n        // show the snap lines..\n        this.showHorizontalGuides(figure, horizontal)\n\n        // and snap the x coordinate\n        modifiedPos.x += horizontal.diff\n      }\n      else {\n        this.hideHorizontalGuides(true)\n      }\n    }\n    else {\n      this.hideHorizontalGuides(true)\n    }\n\n    if (allowYChanges === true) {\n      var vertical = this.snapVertical(inputBounds)\n\n      // Show a vertical guides if the snapper has modified the inputPoint\n      //\n      if (vertical.snapped) {\n        // show the snap lines..\n        this.showVerticalGuides(figure, vertical)\n\n        // and snap the x coordinate\n        modifiedPos.y += vertical.diff\n      }\n      else {\n        this.hideVerticalGuides(true)\n      }\n    }\n    else {\n      this.hideVerticalGuides(true)\n    }\n\n    return modifiedPos\n  },\n\n\n  snapHorizontal: function (boundingBox) {\n    var center = boundingBox.getCenter()\n    if (this.bounds === null)\n      this.populateBounds()\n\n    var result = {\n      point: center,\n      snapped: false,\n      snappedBox: boundingBox.clone()\n    }\n\n\n    var intersectionPoint = null\n\n    // Calculate the intersections points p(i) of all left side edges of the bounding boxes\n    // and the ray from the center of the drag&drop object to the left edge of the canva\n    //\n    // BBox of          Drag&Drop\n    // any Figure       Figure\n    //\n    // ....+           ........\n    //     |           .      .\n    // .   |p(i)       .      .\n    // .   X<------------->+  .\n    // .   |           .      .\n    // ....+           .      .\n    //                 ........\n    //\n    //\n    var leftIntersections = []\n    var leftInputPoint = center.clone()\n    leftInputPoint.x = 0\n    this.bounds.forEach(function (bbox, index) {\n      intersectionPoint = draw2d.shape.basic.Line.intersection(bbox.getTopRight(), bbox.getBottomRight(), center, leftInputPoint)\n      if (intersectionPoint !== null) {\n        intersectionPoint.causedBBox = bbox\n        leftIntersections.push(intersectionPoint)\n      }\n    })\n    // we can abort if we didn't find an intersection on the left hand side\n    if (leftIntersections.length === 0) {\n      return result\n    }\n\n    // sort the intersection point and get the closest point to the tested inputPoint\n    // In this case it is the point with the greates X coordinate\n    //\n    leftIntersections.sort(function (a, b) {\n      return b.x - a.x\n    })\n\n\n    // Calculate the intersections points p(i) of all right hand side edges of the\n    // bounding boxes and the ray from the center of the drag&drop object to the\n    // left edge of the canvas\n    //\n    //                 Drag&Drop             bbox of any\n    //                 Figure                figure\n    //\n    //                 ........\n    //                 .      .\n    //                 .      .             ...........\n    //                 .   +<-------------->X         |\n    //                 .      .         p(i)|         |\n    //                 .      .             |         |\n    //                 ........             |         |\n    //                                      ...........\n    //\n    var rightIntersections = []\n    var rightInputPoint = center.clone()\n    rightInputPoint.x = Number.MAX_SAFE_INTEGER\n    this.bounds.forEach(function (bbox, index) {\n      intersectionPoint = draw2d.shape.basic.Line.intersection(bbox.getTopLeft(), bbox.getBottomLeft(), center, rightInputPoint)\n      if (intersectionPoint !== null) {\n        intersectionPoint.causedBBox = bbox\n        rightIntersections.push(intersectionPoint)\n      }\n    })\n    // we can abort if we didn't find an intersection on the right hand side\n    if (rightIntersections.length === 0) {\n      return result\n    }\n\n    // sort the intersection point and get the closest point to the tested inputPoint\n    // In this case it is the point with the greates X coordinate\n    //\n    rightIntersections.sort(function (a, b) {\n      return a.x - b.x\n    })\n\n\n    // Snap the point (S) between the two founded intersections\n    // p(i1) and p(i2)\n    //\n    // BBox FigureA     Drag&Drop           BBox of FigureB\n    //                  Figure\n    //\n    // ....+           ........\n    //     |           .      .\n    // .   |p(i1)      .   S  .             ...........\n    // .   X<------------->X<-------------->X         |\n    // .   |           .      .        p(i2)|         |\n    // ....+           .      .             |         |\n    //                 ........             |         |\n    //                                      ...........\n    //\n    var snappedRect = boundingBox.clone()\n    var diff = ((leftIntersections[0].x + rightIntersections[0].x) / 2) - center.x\n\n    snappedRect.x += diff\n\n    return {\n      snapped: Math.abs(diff) < this.SNAP_THRESHOLD,\n      snappedRect: snappedRect,\n      diff: diff,\n      leftSide: leftIntersections[0],\n      rightSide: rightIntersections[0]\n    }\n  },\n\n\n  snapVertical: function (boundingBox) {\n    var center = boundingBox.getCenter()\n\n    if (this.bounds === null) {\n      this.populateBounds()\n    }\n\n    var result = {\n      point: center,\n      snapped: false,\n      snappedBox: boundingBox.clone()\n    }\n\n\n    var intersectionPoint = null\n\n    // Calculate the intersections points p(i) of all left side edges of the bounding boxes\n    // and the ray from the center of the drag&drop object to the left edge of the canva\n    //\n    // BBox of          Drag&Drop\n    // any Figure       Figure\n    //\n    // ....+           ........\n    //     |           .      .\n    // .   |p(i)       .      .\n    // .   X<------------->+  .\n    // .   |           .      .\n    // ....+           .      .\n    //                 ........\n    //\n    //\n    var topIntersections = []\n    var topInputPoint = center.clone()\n    topInputPoint.y = 0\n    this.bounds.forEach(function (bbox) {\n      intersectionPoint = draw2d.shape.basic.Line.intersection(bbox.getBottomLeft(), bbox.getBottomRight(), center, topInputPoint)\n      if (intersectionPoint !== null) {\n        intersectionPoint.causedBBox = bbox\n        topIntersections.push(intersectionPoint)\n      }\n    })\n    // we can abort if we didn't find an intersection on the left hand side\n    if (topIntersections.length === 0) {\n      return result\n    }\n\n    // sort the intersection point and get the closest point to the tested inputPoint\n    // In this case it is the point with the greates X coordinate\n    //\n    topIntersections.sort(function (a, b) {\n      return b.y - a.y\n    })\n\n\n    // Calculate the intersections points p(i) of all right hand side edges of the\n    // bounding boxes and the ray from the center of the drag&drop object to the\n    // left edge of the canvas\n    //\n    //                 Drag&Drop             bbox of any\n    //                 Figure                figure\n    //\n    //                 ........\n    //                 .      .\n    //                 .      .             ...........\n    //                 .   +<-------------->X         |\n    //                 .      .         p(i)|         |\n    //                 .      .             |         |\n    //                 ........             |         |\n    //                                      ...........\n    //\n    var bottomIntersections = []\n    var bottomInputPoint = center.clone()\n    bottomInputPoint.y = Number.MAX_SAFE_INTEGER\n    this.bounds.forEach(function (bbox) {\n      intersectionPoint = draw2d.shape.basic.Line.intersection(bbox.getTopLeft(), bbox.getTopRight(), center, bottomInputPoint)\n      if (intersectionPoint !== null) {\n        intersectionPoint.causedBBox = bbox\n        bottomIntersections.push(intersectionPoint)\n      }\n    })\n    // we can abort if we didn't find an intersection on the right hand side\n    if (bottomIntersections.length === 0) {\n      return result\n    }\n\n    // sort the intersection point and get the closest point to the tested inputPoint\n    // In this case it is the point with the greates X coordinate\n    //\n    bottomIntersections.sort(function (a, b) {\n      return a.y - b.y\n    })\n\n\n    // Snap the point (S) between the two founded intersections\n    // p(i1) and p(i2)\n    //\n    // BBox FigureA     Drag&Drop           BBox of FigureB\n    //                  Figure\n    //\n    // ....+           ........\n    //     |           .      .\n    // .   |p(i1)      .   S  .             ...........\n    // .   X<------------->X<-------------->X         |\n    // .   |           .      .        p(i2)|         |\n    // ....+           .      .             |         |\n    //                 ........             |         |\n    //                                      ...........\n    //\n    var snappedRect = boundingBox.clone()\n    var diff = ((topIntersections[0].y + bottomIntersections[0].y) / 2) - center.y\n\n    snappedRect.y += diff\n\n    return {\n      snapped: Math.abs(diff) < this.SNAP_THRESHOLD,\n      snappedRect: snappedRect,\n      diff: diff,\n      topSide: topIntersections[0],\n      bottomSide: bottomIntersections[0]\n    }\n  },\n\n  populateBounds: function () {\n    var selection = this.canvas.getSelection().getAll(true)\n    var bounds = this.bounds = []\n\n    var figures = this.canvas.getFigures()\n    figures.each(function (index, figure) {\n      if (!selection.contains(figure)) {\n        bounds.push(figure.getBoundingBox())\n      }\n    })\n  },\n\n  showHorizontalGuides: function (causedFigure, constraint) {\n    if (this.horizontalGuideLines != null) {\n      this.horizontalGuideLines.stop()\n      this.horizontalGuideLines.remove()\n    }\n\n    var snapTopLeft = constraint.snappedRect.getTopLeft()\n    var snapTopRight = constraint.snappedRect.getTopRight()\n    var y = ((Math.min(constraint.leftSide.causedBBox.getTopRight().y, Math.min(constraint.rightSide.causedBBox.y, causedFigure.getY())) - 50) | 0) + 0.5\n\n    this.canvas.paper.setStart()\n\n    // Vertical lines from left to the right order\n    //\n    this.canvas.paper.path(\"M \" + ((constraint.leftSide.x | 0) + 0.5) + \" \" + y + \" L \" + ((constraint.leftSide.x | 0) + 0.5) + \" \" + constraint.leftSide.y)\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n\n    this.canvas.paper.path(\"M \" + ((snapTopLeft.x | 0) + 0.5) + \" \" + y + \" L \" + ((snapTopLeft.x | 0) + 0.5) + \" \" + snapTopLeft.y)\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n\n    this.canvas.paper.path(\"M \" + ((snapTopRight.x | 0) + 0.5) + \" \" + y + \" L \" + ((snapTopRight.x | 0) + 0.5) + \" \" + snapTopRight.y)\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n\n    this.canvas.paper.path(\"M \" + ((constraint.rightSide.x | 0) + 0.5) + \" \" + y + \" L \" + ((constraint.rightSide.x | 0) + 0.5) + \" \" + constraint.rightSide.y)\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n\n\n    // horizontal lines\n    //\n    this.canvas.paper.path(\"M \" + (constraint.leftSide.x) + \" \" + (y + 5) + \" L \" + (snapTopLeft.x) + \" \" + (y + 5)).attr({\n      \"stroke\": this.lineColor.rgba(),\n      \"stroke-width\": 1\n    })\n    this.canvas.paper.path(\"M \" + (constraint.rightSide.x) + \" \" + (y + 5) + \" L \" + (snapTopRight.x) + \" \" + (y + 5)).attr({\n      \"stroke\": this.lineColor.rgba(),\n      \"stroke-width\": 1\n    })\n\n    // 4 arrow heads starting on the left side and add one by one\n    //\n    this.canvas.paper.path(\n      \" M \" + (constraint.leftSide.x + 5) + \" \" + (y)\n      + \" L \" + (constraint.leftSide.x) + \" \" + (y + 5)\n      + \" L \" + (constraint.leftSide.x + 5) + \" \" + (y + 10))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n    this.canvas.paper.path(\n      \" M \" + (snapTopLeft.x - 5) + \" \" + (y)\n      + \" L \" + (snapTopLeft.x) + \" \" + (y + 5)\n      + \" L \" + (snapTopLeft.x - 5) + \" \" + (y + 10))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n\n    this.canvas.paper.path(\n      \" M \" + (snapTopRight.x + 5) + \" \" + (y)\n      + \" L \" + (snapTopRight.x) + \" \" + (y + 5)\n      + \" L \" + (snapTopRight.x + 5) + \" \" + (y + 10))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n\n    this.canvas.paper.path(\n      \" M \" + (constraint.rightSide.x - 5) + \" \" + (y)\n      + \" L \" + (constraint.rightSide.x) + \" \" + (y + 5)\n      + \" L \" + (constraint.rightSide.x - 5) + \" \" + (y + 10))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n\n    this.horizontalGuideLines = this.canvas.paper.setFinish()\n    this.horizontalGuideLines.toFront()\n  },\n\n  /**\n   *\n   * Hide the horizontal snaping guides\n   *\n   * @param {Boolean} fast\n   */\n  hideHorizontalGuides: function (fast) {\n    if (this.horizontalGuideLines == null) {\n      return\n    }\n\n    if (fast === true) {\n      if (this.horizontalGuideLines !== null) {\n        this.horizontalGuideLines.remove()\n        this.horizontalGuideLines = null\n      }\n    }\n    else {\n      this.horizontalGuideLines.animate(\n        {opacity: 0.1},\n        this.FADEOUT_DURATION,\n        () => {\n          if (this.horizontalGuideLines !== null) {\n            this.horizontalGuideLines.remove()\n            this.horizontalGuideLines = null\n          }\n        }\n      )\n    }\n  },\n\n  showVerticalGuides: function (causedFigure, constraint) {\n    if (this.verticalGuideLines != null) {\n      this.verticalGuideLines.stop()\n      this.verticalGuideLines.remove()\n    }\n\n    var snapTopRight = constraint.snappedRect.getTopRight()\n    var snapBottomRight = constraint.snappedRect.getBottomRight()\n    var x = ((Math.max(constraint.topSide.causedBBox.getRight(), Math.max(constraint.bottomSide.causedBBox.getRight(), causedFigure.getX())) + 40) | 0) + 0.5\n\n    this.canvas.paper.setStart()\n\n    // Vertical lines from left to the right order\n    //\n    this.canvas.paper.path(\"M \" + x + \" \" + ((constraint.topSide.y | 0) + 0.5) + \" L \" + ((constraint.topSide.x | 0) + 0.5) + \" \" + ((constraint.topSide.y | 0) + 0.5))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n    this.canvas.paper.path(\"M \" + x + \" \" + ((snapTopRight.y | 0) + 0.5) + \" L \" + ((snapTopRight.x | 0) + 0.5) + \" \" + ((snapTopRight.y | 0) + 0.5))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n    this.canvas.paper.path(\"M \" + x + \" \" + ((snapBottomRight.y | 0) + 0.5) + \" L \" + ((snapBottomRight.x | 0) + 0.5) + \" \" + ((snapBottomRight.y | 0) + 0.5))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n    this.canvas.paper.path(\"M \" + x + \" \" + ((constraint.bottomSide.y | 0) + 0.5) + \" L \" + ((constraint.bottomSide.x | 0) + 0.5) + \" \" + ((constraint.bottomSide.y | 0) + 0.5))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n\n    // horizontal lines\n    //\n    this.canvas.paper.path(\"M \" + (x - 5) + \" \" + (((constraint.topSide.y | 0) + 0.5)) + \" L \" + (x - 5) + \" \" + ((snapTopRight.y | 0) + 0.5))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n    this.canvas.paper.path(\"M \" + (x - 5) + \" \" + (((constraint.bottomSide.y | 0) + 0.5)) + \" L \" + (x - 5) + \" \" + ((snapBottomRight.y | 0) + 0.5))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n\n    // 4 arrow heads starting on the left side and add one by one\n    //\n    this.canvas.paper.path(\n      \" M \" + (x - 10) + \" \" + (constraint.topSide.y + 5)\n      + \" L \" + (x - 5) + \" \" + (constraint.topSide.y)\n      + \" L \" + (x) + \" \" + (constraint.topSide.y + 5))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n    this.canvas.paper.path(\n      \" M \" + (x - 10) + \" \" + (snapTopRight.y - 5)\n      + \" L \" + (x - 5) + \" \" + (snapTopRight.y)\n      + \" L \" + (x) + \" \" + (snapTopRight.y - 5))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n    this.canvas.paper.path(\n      \" M \" + (x - 10) + \" \" + (snapBottomRight.y + 5)\n      + \" L \" + (x - 5) + \" \" + (snapBottomRight.y)\n      + \" L \" + (x) + \" \" + (snapBottomRight.y + 5))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n    this.canvas.paper.path(\n      \" M \" + (x - 10) + \" \" + (constraint.bottomSide.y - 5)\n      + \" L \" + (x - 5) + \" \" + (constraint.bottomSide.y)\n      + \" L \" + (x) + \" \" + (constraint.bottomSide.y - 5))\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n    this.verticalGuideLines = this.canvas.paper.setFinish()\n    this.verticalGuideLines.toFront()\n  },\n\n  hideVerticalGuides: function () {\n    if (this.verticalGuideLines == null) {\n      return //silently\n    }\n\n    this.verticalGuideLines.animate(\n      {opacity: 0.1},\n      this.FADEOUT_DURATION,\n      () => {\n        if (this.verticalGuideLines !== null) {\n          this.verticalGuideLines.remove()\n          this.verticalGuideLines = null\n        }\n      }\n    )\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Snapping is based on the existing children of a container. When snapping a shape,\n * the edges of the bounding box will snap to edges of other rectangles generated\n * from the children of the given canvas.\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.SnapToEditPolicy\n */\ndraw2d.policy.canvas.SnapToVerticesEditPolicy = draw2d.policy.canvas.SnapToEditPolicy.extend(\n  /** @lends draw2d.policy.canvas.SnapToVerticesEditPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.SnapToVerticesEditPolicy\",\n\n  SNAP_THRESHOLD: 3,\n  FADEOUT_DURATION: 300,\n\n  /**\n   * Creates a new constraint policy for snap to geometry\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    this.constraints = null\n    this.vline = null\n    this.hline = null\n  },\n\n\n  /**\n   * \n   *\n   * @param {draw2d.Figure} figure the shape below the mouse or null\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onMouseUp: function (figure, x, y, shiftKey, ctrlKey) {\n    this.constraints = null\n    this.hideVerticalLine()\n    this.hideHorizontalLine()\n  },\n\n  /**\n   * \n   * Adjust the coordinates to the canvas neighbours\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {draw2d.Figure} figure the figure to snap\n   * @param {draw2d.geo.Point} modifiedPos the already modified position of the figure (e.g. from an another Policy)\n   * @param {draw2d.geo.Point} originalPos the original requested position of the figure\n   *\n   * @returns {draw2d.geo.Point} the constraint position of the figure\n   */\n  snap: function (canvas, figure, modifiedPos, originalPos) {\n    // can only handle PolyLies at the moment\n    //\n    if (!(figure instanceof draw2d.shape.basic.VertexResizeHandle)) {\n      return modifiedPos\n    }\n\n    var allowXChanges = modifiedPos.x === originalPos.x\n    var allowYChanges = modifiedPos.y === originalPos.y\n\n    // Coordinates already snapped to an x/y coordinate.\n    // Don't change them and in this case no further calculation is required.\n    //\n    if (!allowXChanges && !allowYChanges) {\n      return modifiedPos\n    }\n\n    var result = modifiedPos.clone()\n    var correction = this.getCorrectionFor(figure, originalPos)\n\n    if (allowXChanges && (correction.vertical.x !== Number.MAX_SAFE_INTEGER)) {\n      result.x = correction.vertical.x\n      this.showVerticalLine(originalPos, correction.vertical)\n    }\n    else {\n      this.hideVerticalLine()\n    }\n\n    if (allowYChanges && (correction.horizontal.y !== Number.MAX_SAFE_INTEGER)) {\n      result.y = correction.horizontal.y\n      this.showHorizontalLine(originalPos, correction.horizontal)\n    }\n    else {\n      this.hideHorizontalLine()\n    }\n\n\n    return result\n  },\n\n\n  getCorrectionFor: function (vertexResizeHandle, point) {\n    var _this = this\n    if (this.constraints === null) {\n      this.constraints = []\n\n      var lines = this.canvas.getLines()\n      lines.each(function (i, line) {\n        line.getVertices().each(function (ii, vertex) {\n          if (vertexResizeHandle.index !== ii || vertexResizeHandle.owner !== line)\n            _this.constraints.push(vertex)\n        })\n      })\n    }\n\n    var SNAP = this.SNAP_THRESHOLD\n    var vertical = {x: Number.MAX_SAFE_INTEGER, y: Number.MAX_SAFE_INTEGER, diffy: Number.MAX_SAFE_INTEGER}\n    var horizontal = {x: Number.MAX_SAFE_INTEGER, y: Number.MAX_SAFE_INTEGER, diffx: Number.MAX_SAFE_INTEGER}\n    var diffx, diffy\n\n\n    for (var i = 0; i < this.constraints.length; i++) {\n      var entry = this.constraints[i]\n\n      diffx = Math.abs(point.x - entry.x)\n      diffy = Math.abs(point.y - entry.y)\n      // we found a possible candidate for the vertical snap line\n      //\n      if (diffx < SNAP) {\n        if (diffy < vertical.diffy) {\n          vertical = {x: entry.x, y: entry.y, diffy: diffy}\n        }\n      }\n\n\n      if (diffy < SNAP) {\n        if (diffx < horizontal.diffx) {\n          horizontal = {x: entry.x, y: entry.y, diffx: diffx}\n        }\n      }\n\n    }\n    return {vertical: vertical, horizontal: horizontal}\n  },\n\n  showVerticalLine: function (originalPos, snappedPos) {\n    if (this.vline != null) {\n      this.vline.stop()\n      this.vline.remove()\n    }\n\n\n    var maxLength = this.canvas.getHeight()\n    var x = (snappedPos.x | 0) + 0.5 // force a .5 number to avoid subpixel rendering. Blurry lines...\n    this.canvas.paper.setStart()\n    this.canvas.paper.path(\"M \" + x + \" 0 l 0 \" + maxLength)\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n    this.canvas.paper.path(\"M \" + x + \" \" + originalPos.y + \" L \" + x + \" \" + snappedPos.y)\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n    this.vline = this.canvas.paper.setFinish()\n    this.vline.toBack()\n  },\n\n  hideVerticalLine: function () {\n    if (this.vline == null) {\n      return\n    }\n    this.vline.animate(\n      {opacity: 0.1},\n      this.FADEOUT_DURATION,\n      () => {\n        if (this.vline !== null) {\n          this.vline.remove()\n          this.vline = null\n        }\n      }\n    )\n  },\n\n  showHorizontalLine: function (originalPos, snappedPos) {\n    if (this.hline != null) {\n      this.hline.stop()\n      this.hline.remove()\n    }\n\n    var maxLength = this.canvas.getWidth()\n    var y = (snappedPos.y | 0) + 0.5 // force a .5 number to avoid subpixel rendering. Blurry lines...\n\n    this.canvas.paper.setStart()\n    this.canvas.paper.path(\"M 0 \" + y + \" l \" + maxLength + \" 0\")\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1, \"stroke-dasharray\": \". \"})\n    this.canvas.paper.path(\"M \" + originalPos.x + \" \" + y + \" L \" + snappedPos.x + \" \" + y)\n      .attr({\"stroke\": this.lineColor.rgba(), \"stroke-width\": 1})\n\n    this.hline = this.canvas.paper.setFinish()\n    this.hline.toBack()\n\n  },\n\n  hideHorizontalLine: function () {\n    if (this.hline === null) {\n      return //silently\n    }\n    this.hline.animate(\n      {opacity: 0.1},\n      this.FADEOUT_DURATION,\n      () => {\n        if (this.hline !== null) {\n          this.hline.remove()\n          this.hline = null\n        }\n      }\n    )\n  }\n\n})\n","import draw2d from '../../packages'\nimport {Tweenable} from \"shifty\"\n\n\n/**\n * @class\n * Zoom support for a canvas. Use the mouse wheel and the shift key to zoom in/out.\n *\n *\n * @example\n *\n *    canvas.installEditPolicy(new draw2d.policy.canvas.WheelZoomPolicy());\n *    let shape =  new draw2d.shape.basic.Text({text:\"Use the mouse wheel + SHIFT to zoom\"});\n *\n *    canvas.add(shape,40,10);\n *\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.CanvasPolicy\n * @since 5.8.0\n */\ndraw2d.policy.canvas.WheelZoomPolicy = draw2d.policy.canvas.ZoomPolicy.extend(\n  /** @lends draw2d.policy.canvas.WheelZoomPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.WheelZoomPolicy\",\n\n  /**\n   */\n  init: function () {\n    this._super()\n\n    this.center = null\n    this.debouncedZoomedCallback = this._debounce(() => {\n      let canvas = this.canvas\n      if (canvas !== null) {\n        canvas.fireEvent(\"zoomed\", {value: canvas.zoomFactor})\n      }\n      this.center = null\n    }, 200)\n  },\n\n  onInstall: function (canvas) {\n    this._super(canvas)\n    canvas.setZoom(1)\n    canvas.__wheelZoom = 1\n  },\n\n  onUninstall: function (canvas) {\n    this._super(canvas)\n\n    // cleanup the canvas object and remove custom properties\n    //\n    delete canvas.__wheelZoom\n  },\n\n\n  /**\n   *\n   * called if the user uses the mouse wheel.\n   *\n   *\n   * @param wheelDelta\n   * @param {Number} x the x coordinate of the event\n   * @param {Number} y the y coordinate of the event\n   * @param shiftKey\n   * @param ctrlKey\n   * @since 5.8.0\n   * @template\n   * @returns {Boolean} return <b>false</b> to preven tthe default event operation (e.g. scrolling)\n   */\n  onMouseWheel: function (wheelDelta, x, y, shiftKey, ctrlKey) {\n    // mouse wheel is only supported if the user presses the shift key.\n    // normally the canvas scrolls during mouseWheel usage.\n    //\n    if (shiftKey === false) {\n      return true\n    }\n\n    wheelDelta = wheelDelta / 1024\n\n    let newZoom = ((Math.min(5, Math.max(0.1, this.canvas.zoomFactor + wheelDelta)) * 10000 | 0) / 10000)\n    if (this.center === null) {\n      let client = this.canvas.fromCanvasToDocumentCoordinate(x, y)\n\n      this.center = {\n        x: x,\n        y: y,\n        clientX: client.x,\n        clientY: client.y\n      }\n    }\n    this._zoom(newZoom, this.center)\n    this.debouncedZoomedCallback()\n\n    return false\n  },\n\n  /**\n   *\n   * Set the new zoom level of the canvas.\n   *\n   * @param zoomFactor\n   * @param animated\n   */\n  setZoom: function (zoomFactor, animated) {\n\n    // determine the center of the current canvas. We try to keep the\n    // current center during zoom operation\n    //\n    let scrollTop = this.canvas.getScrollTop()\n    let scrollLeft = this.canvas.getScrollLeft()\n    let scrollWidth = this.canvas.getScrollArea().width()\n    let scrollHeight = this.canvas.getScrollArea().height()\n    let centerY = scrollTop + (scrollHeight / 2) * this.canvas.zoomFactor\n    let centerX = scrollLeft + (scrollWidth / 2) * this.canvas.zoomFactor\n\n    if (animated) {\n      let myTweenable = new Tweenable()\n      myTweenable.tween({\n        from: {'x': this.canvas.zoomFactor},\n        to: {'x': zoomFactor},\n        duration: 300,\n        easing: \"easeOutSine\",\n        step: params => {\n          this._zoom(params.x, centerX, centerY)\n        },\n        finish: state => {\n          this.debouncedZoomedCallback()\n        }\n      })\n    }\n    else {\n      this._zoom(zoomFactor, {x: centerX, y: centerY})\n      this.debouncedZoomedCallback()\n    }\n  },\n\n  /**\n   *\n   *\n   * @param {Number} zoom\n   * @param {draw2d.geo.Point} center\n   * @private\n   */\n  _zoom: function (zoom, center) {\n    let canvas = this.canvas\n\n    if (zoom === canvas.zoomFactor) {\n      return\n    }\n\n    canvas.zoomFactor = zoom\n\n    canvas.paper.setViewBox(0, 0, canvas.initialWidth, canvas.initialHeight)\n    // Change the width and the height attributes manually through DOM\n    // unfortunately the raphaelJS 'setSize' method changes the viewBox as well and this is unwanted in this case\n    //\n    canvas.html\n      .find(\"svg\")\n      .attr({\n        'width': canvas.initialWidth / zoom,\n        'height': canvas.initialHeight / zoom\n      })\n\n\n    // try to keep the document position to the given client position\n    //\n    if (center.clientX) {\n      let coordsAfter = canvas.fromCanvasToDocumentCoordinate(center.x, center.y)\n      canvas.scrollTo(this.canvas.getScrollTop() - (center.clientY - coordsAfter.y), canvas.getScrollLeft() - (center.clientX - coordsAfter.x))\n    }\n\n    canvas.fireEvent(\"zoom\", {value: canvas.zoomFactor})\n  },\n\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _debounce: function (func, wait, immediate) {\n    let timeout\n    return () => {\n      let context = this, args = arguments\n      let later = () => {\n        timeout = null\n        if (!immediate) func.apply(context, args)\n      }\n      let callNow = immediate && !timeout\n      clearTimeout(timeout)\n      timeout = setTimeout(later, wait)\n      if (callNow) func.apply(context, args)\n    }\n  }\n})\n","import draw2d from '../../packages'\nimport {Tweenable} from \"shifty\"\n\n\n/**\n * @class\n * Generic zoom policy installable into a canvas object.\n * This is the legacy implementation of the very first zooming in\n * Draw2D. You can use this implementation if you want backward compatible.\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.canvas.CanvasPolicy\n * @since 5.8.0\n */\ndraw2d.policy.canvas.ZoomPolicy = draw2d.policy.canvas.CanvasPolicy.extend(\n  /** @lends draw2d.policy.canvas.ZoomPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.canvas.ZoomPolicy\",\n\n  /**\n   */\n  init: function () {\n    this._super()\n  },\n\n  onInstall: function (canvas) {\n    this._super(canvas)\n    canvas.setZoom(1)\n  },\n\n  onUninstall: function (canvas) {\n    this._super(canvas)\n  },\n\n  /** \n   * Set the new zoom factor for the canvas. The value must be between [0.01..10]\n   *\n   *     // you can register an eventhandler to listen to the zoom factor of the canvas.\n   *    //\n   *     canvas.on(\"zoom\", function(emitterFigure, zoomData){\n   *         alert(\"canvas zoomed to:\"+zoomData.factor);\n   *     });\n   *\n   * @param {Number} zoomFactor new zoom factor.\n   * @param {Boolean} [animated] set it to true for smooth zoom in/out\n   **/\n  setZoom: function (zoomFactor, animated) {\n    let canvas = this.canvas\n\n    let _zoom = function (z) {\n      canvas.zoomFactor = Math.min(Math.max(0.01, z), 10)\n\n      let viewBoxWidth = (canvas.initialWidth * (canvas.zoomFactor)) | 0\n      let viewBoxHeight = (canvas.initialHeight * (canvas.zoomFactor)) | 0\n\n      canvas.paper.setViewBox(0, 0, viewBoxWidth, viewBoxHeight)\n\n      canvas.fireEvent(\"zoom\", {value: canvas.zoomFactor})\n    }\n\n    if (animated) {\n      let myTweenable = new Tweenable()\n      myTweenable.tween({\n        from: {'x': canvas.zoomFactor},\n        to: {'x': zoomFactor},\n        duration: 300,\n        easing: \"easeOutSine\",\n        step: params => _zoom(params.x),\n        finish: state => canvas.fireEvent(\"zoomed\", {value: canvas.zoomFactor})\n      })\n    }\n    else {\n      _zoom(zoomFactor)\n      canvas.fireEvent(\"zoomed\", {value: canvas.zoomFactor})\n    }\n  }\n})\n","\n/**\n * @class\n *\n * The ClickConnectionCreatePolicy can be installed into the canvas to override the\n * default connection crate behaviour. Normally you can create connections by drag&drop a port.\n *\n * With this policy you can route the connection during creation.\n *\n * Creates a connection by clicking on a port.\n * <ul>\n *  <li> click on the first port</li>\n *  <li> click within the canvas to add additional vertices</li>\n *  <li> click on the target port to draw the connection</li>\n *  <li> press ESC to abort the operation (didn't work within this JSDoc)</li>\n * </ul>\n * <br>\n * <br>\n * <b>The generated connections didn't have any orthogonal constraints nor any other restrictions or guidance.</b>\n * <br>\n * <br>\n *\n *\n *\n * @example\n *\n *    // Override the default connection creation.\n *    //\n *    canvas.installEditPolicy( new draw2d.policy.connection.ClickConnectionCreatePolicy());\n *\n *    // create and add two Node which contains Ports (In and OUT)\n *    //\n *    var start = new draw2d.shape.node.Start({x:50, y:50});\n *    var endNode   = new draw2d.shape.node.End({x:200, y:70});\n *\n *    // add the two nodes to the canvas\n *    //\n *    canvas.add( start);\n *    canvas.add( endNode);\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.connection.ConnectionCreatePolicy\n * @since 6.1.0\n */\nimport draw2d from '../../packages'\n\ndraw2d.policy.connection.ClickConnectionCreatePolicy = draw2d.policy.connection.ConnectionCreatePolicy.extend(\n    /** @lends draw2d.policy.connection.ClickConnectionCreatePolicy.prototype */\n    {\n    \n    NAME: \"draw2d.policy.connection.ClickConnectionCreatePolicy\",\n    \n    /**\n     *\n     * Creates a new connection create policy instance\n     */\n    init: function(attr, setter, getter)\n    {\n        this._super( attr, setter, getter);\n\n        this.port1 = null;\n        this.beeline = null;\n        this.pulse= null;\n        this.tempConnection = null;\n\n        this.vertices = [];\n    },\n\n    /**\n     * \n     * Called by the canvas if the user click on a figure.\n     *\n     * @param {draw2d.Figure} the figure under the click event. Can be null\n     * @param {Number} x the x coordinate of the mouse during the click event\n     * @param {Number} y the y coordinate of the mouse during the click event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @since 6.1.0\n     */\n    onClick: function(figure, x, y, shiftKey, ctrlKey)\n    {\n        var _this = this;\n        var port = figure;\n\n        if(port === null && this.port1 === null){\n            return;\n        }\n\n        // nothing found at all\n        //\n        if(port===null){\n            this.vertices.push(new draw2d.geo.Point(x,y));\n            this.beeline.setStartPosition(x,y);\n            this.tempConnection.setVertices(this.vertices);\n            if(this.pulse!==null) {\n                this.pulse.remove();\n                this.pulse = null;\n            }\n            this.ripple(x,y,0);\n            return;\n        }\n\n        //just consider ports\n        //\n        if(!(port instanceof draw2d.Port)){\n            return;\n        }\n\n        // start connection create by selection the start port\n        //\n        if(this.port1===null){\n            var canvas = port.getCanvas();\n            this.port1 = port;\n            this.vertices.push(port.getAbsolutePosition());\n            this.beeline = new draw2d.shape.basic.Line({\n                start: this.port1.getAbsolutePosition(),\n                end: this.port1.getAbsolutePosition(),\n                dasharray:\"- \",\n                color:\"#2C70FF\"\n            });\n\n            this.beeline.hide= function(){\n                _this.beeline.setCanvas(null);\n            };\n\n            this.beeline.show= function(canvas){\n                _this.beeline.setCanvas(canvas);\n                _this.beeline.shape.toFront();\n            };\n            this.beeline.show(canvas);\n\n            this.tempConnection = new draw2d.shape.basic.PolyLine({\n                start: this.port1.getAbsolutePosition(),\n                end: this.port1.getAbsolutePosition(),\n                stroke:2,\n                color:\"#2C70FF\"\n            });\n\n            this.tempConnection.hide= function(){\n                _this.tempConnection.setCanvas(null);\n            };\n\n            this.tempConnection.show= function(canvas){\n                _this.tempConnection.setCanvas(canvas);\n                _this.tempConnection.shape.toFront();\n            };\n            this.tempConnection.show(canvas);\n            this.tempConnection.setVertices([this.port1.getAbsolutePosition(),this.port1.getAbsolutePosition()]);\n\n            var a= function() {\n                _this.tempConnection.shape.animate({\"stroke-width\" : 2}, 800, b);\n            };\n            var b=function() {\n                _this.tempConnection.shape.animate({\"stroke-width\":1}, 800, a);\n            };\n            a();\n\n            var pos = port.getAbsolutePosition();\n            this.pulse =this.ripple(pos.x, pos.y, 1);\n            return;\n        }\n\n\n        var possibleTarget = port.delegateTarget(this.port1);\n\n        if(!(possibleTarget instanceof draw2d.Port)){\n            return; // silently\n        }\n\n        var request = new draw2d.command.CommandType(draw2d.command.CommandType.CONNECT);\n        request.source = this.port1;\n        request.target = port;\n\n        var command = null;\n        if(this.port1 instanceof draw2d.InputPort) {\n             command = this.port1.createCommand(request);\n        }\n        else{\n             command = port.createCommand(request);\n        }\n\n        if(command!==null){\n            this.vertices.push(port.getPosition());\n            command.setConnection( this.createConnection());\n            figure.getCanvas().getCommandStack().execute(command);\n            this.beeline.hide();\n            this.tempConnection.hide();\n            if(this.pulse!==null) {\n                this.pulse.remove();\n                this.pulse = null;\n            }\n            this.beeline = null;\n            this.port1=null;\n            this.vertices = [];\n        }\n\n    },\n\n\n    /**\n     * \n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} x the x-coordinate of the mouse event\n     * @param {Number} y the y-coordinate of the mouse event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseMove: function(canvas, x, y, shiftKey, ctrlKey)\n    {\n        if(this.beeline!==null){\n            this.beeline.setEndPosition(x,y);\n        }\n    },\n\n    /**\n     * \n     * Callback if the user press a key down\n     *\n     * @param {draw2d.Canvas} canvas the related canvas\n     * @param {Number} keyCode the pressed key\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     **/\n    onKeyDown: function(canvas, keyCode, shiftKey, ctrlKey)\n    {\n        var KEYCODE_ENTER = 13;\n        var KEYCODE_ESC = 27;\n        if (keyCode === KEYCODE_ESC && this.beeline!==null){\n            this.beeline.hide();\n            this.tempConnection.hide();\n            this.beeline = null;\n            this.port1=null;\n            this.vertices = [];\n            if(this.pulse!=null) {\n                this.pulse.remove();\n                this.pulse=null;\n            }\n        }\n    },\n\n\n    createConnection: function()\n    {\n        var connection = this._super();\n        if(this.vertices.length===2){\n            connection.setRouter(new draw2d.layout.connection.DirectRouter());\n        }\n        else {\n            connection.setRouter(new draw2d.layout.connection.VertexRouter());\n            connection.setVertices(this.vertices);\n        }\n        connection.setRadius(10);\n        return connection;\n    }\n\n\n\n});\n\n","\n/**\n * @class\n * A composed connection create policy. Use this to install more than one\n * ConnectionCreatePolicy into the canvas. Normally it is not allowed to install\n * more than one policy from the same type.\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.connection.ConnectionCreatePolicy\n */\nimport draw2d from '../../packages'\n\ndraw2d.policy.connection.ComposedConnectionCreatePolicy = draw2d.policy.connection.ConnectionCreatePolicy.extend(\n    /** @lends draw2d.policy.connection.ComposedConnectionCreatePolicy.prototype */\n    {\n    \n    NAME: \"draw2d.policy.connection.ComposedConnectionCreatePolicy\",\n\n    /**\n     *\n     * Creates a new connection create policy instance\n     *\n     * @param {array} policies the policies to use\n     */\n    init: function( policies )\n    {\n        this.policies = policies;\n        this._super();\n    },\n\n    onMouseDown: function()\n    {\n        let _arg = arguments;\n        this.policies.forEach((p)=>{\n            p.onMouseDown.apply(p,_arg);\n        });\n    },\n    onMouseDrag: function()\n    {\n      let _arg = arguments;\n      this.policies.forEach((p)=>{\n            p.onMouseDrag.apply(p,_arg);\n        });\n    },\n\n    onMouseUp: function()\n    {\n      let _arg = arguments;\n      this.policies.forEach((p)=>{\n            p.onMouseUp.apply(p,_arg);\n        });\n    },\n\n    onClick: function()\n    {\n      let _arg = arguments;\n      this.policies.forEach((p)=>{\n            p.onClick.apply(p,_arg);\n        });\n    },\n    onMouseMove: function()\n    {\n      let _arg = arguments;\n      this.policies.forEach((p)=>{\n            p.onMouseMove.apply(p,_arg);\n        });\n    },\n\n    /**\n     * @inheritDoc\n     **/\n    onKeyUp: function(canvas, keyCode, shiftKey, ctrlKey)\n    {\n      let _arg = arguments;\n      this.policies.forEach((p)=>{\n            p.onKeyUp.apply(p,_arg);\n        });\n    },\n\n    /**\n     * @inheritDoc\n     **/\n    onKeyDown: function(canvas, keyCode, shiftKey, ctrlKey)\n    {\n      let _arg = arguments;\n      this.policies.forEach((p)=>{\n            p.onKeyDown.apply(p,_arg);\n        });\n    },\n\n    /**\n     * \n     * Called if the policy is installed into the canvas.\n     *\n     * @param {draw2d.Canvas} canvas\n     */\n    onInstall: function(canvas)\n    {\n      let _arg = arguments;\n      this.policies.forEach((p)=>{\n            p.onInstall.apply(p,_arg);\n        });\n    },\n\n    /**\n     * \n     * Called if the policy is deinstalled from the canvas\n     *\n     * @param {draw2d.Canvas} canvas\n     */\n    onUninstall: function(canvas)\n    {\n      let _arg = arguments;\n      this.policies.forEach((p)=>{\n            p.onUninstall.apply(p,_arg);\n        });\n    }\n\n});\n\n","\n/**\n * @class\n * Base class for connection creation by user interaction.\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.canvas.KeyboardPolicy\n */\nimport draw2d from '../../packages'\n\ndraw2d.policy.connection.ConnectionCreatePolicy = draw2d.policy.canvas.KeyboardPolicy.extend(\n    /** @lends draw2d.policy.connection.ConnectionCreatePolicy.prototype */\n    {\n    \n    NAME: \"draw2d.policy.connection.ConnectionCreatePolicy\",\n\n    /**\n     *\n     * Creates a new connection create policy instance\n     */\n    init: function(attr, setter, getter)\n    {\n        this._super( attr,setter,getter);\n    },\n\n\n    /**\n     * \n     * Factory method to create the connection to insert.\n     *\n     * @returns {draw2d.Connection}\n     * @template\n     */\n    createConnection:function()\n    {\n        return new draw2d.Connection({\n            router: new draw2d.layout.connection.DirectRouter()\n        });\n    },\n\n\n    ripple: function(x,y, type)\n    {\n        switch(type){\n            case 0:\n                var circle = this.canvas.paper.circle(x, y, 3, 3).attr({fill: null, stroke:\"#d0d0ff\"});\n                var anim = Raphael.animation(\n                    {transform: \"s6\", opacity:0.0, \"stroke-width\":3 },\n                    500,\n                    \"linear\",\n                    function(){circle.remove()}\n                );\n                circle.animate(anim);\n                // return an emmpty raphael.set. The circle removes itself after animation is done\n                //\n                return this.canvas.paper.set();\n                break;\n            case 1:\n                var circle1 = this.canvas.paper.circle(x, y, 3, 3).attr({fill: null, stroke:\"#3f72bf\"});\n                var circle2 = this.canvas.paper.circle(x, y, 3, 3).attr({fill: null, stroke:\"#ff0000\"});\n                var anim1 = Raphael.animation(\n                    {transform: \"s6\", opacity:0.0, \"stroke-width\":1 },\n                    1200,\n                    \"linear\"\n                ).repeat(Infinity);\n                circle1.animate(anim1);\n                var anim2 = Raphael.animation(\n                    {transform: \"s12\", opacity:0.0, \"stroke-width\":4 },\n                    500,\n                    \"linear\",\n                    function(){circle2.remove()}\n                );\n                circle2.animate(anim2);\n\n                // return the \"circle1\". This shape must be remove by the caller\n                // \"circle2\" is removed automaticly\n                //\n                return circle1;\n                break;\n        }\n    }\n\n\n});\n\n","\n/**\n * @class\n *\n * The DragConnectionCreatePolicy is the default configuration for connection creation.\n * You must drag a port and drop them onto another port to create connection.\n *\n * Creates a connection by drag&drop on a port.\n * <ul>\n *  <li> click on the first port</li>\n *  <li> drag it to the target port</li>\n *  <li> drop it onto the target</li>\n * </ul>\n * <br>\n * <br>\n *\n *\n *\n * @example\n *\n *    // Override the default connection creation.\n *    //\n *    canvas.installEditPolicy( new draw2d.policy.connection.DragConnectionCreatePolicy());\n *\n *    // create and add two Node which contains Ports (In and OUT)\n *    //\n *    var start = new draw2d.shape.node.Start({x:50, y:50});\n *    var endNode   = new draw2d.shape.node.End({x:200, y:70});\n *\n *    // add the two nodes to the canvas\n *    //\n *    canvas.add( start);\n *    canvas.add( endNode);\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.connection.ConnectionCreatePolicy\n */\nimport draw2d from '../../packages'\n\ndraw2d.policy.connection.DragConnectionCreatePolicy = draw2d.policy.connection.ConnectionCreatePolicy.extend(\n    /** @lends draw2d.policy.connection.DragConnectionCreatePolicy.prototype */\n    {\n    \n    NAME: \"draw2d.policy.connection.DragConnectionCreatePolicy\",\n    \n    /**\n     *\n     * Creates a new connection create policy instance\n     */\n    init: function(attr, setter, getter)\n    {\n        this._super(attr, setter, getter);\n\n        this.mouseDraggingElement =null;\n        this.currentDropTarget = null;\n        this.currentTarget = null;\n    },\n\n    /**\n     * \n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} x the x-coordinate of the mouse down event\n     * @param {Number} y the y-coordinate of the mouse down event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseDown: function(canvas, x, y, shiftKey, ctrlKey)\n    {\n        //just consider ports\n        //\n        var port = canvas.getBestFigure(x, y);\n\n\n        // nothing found at all\n        //\n        if(port===null){\n            return;\n        }\n\n        // may there is a resize handle below the port or another figure\n        // in this case the ResizeHandle has prio. and handled by another\n        // Policy\n        if(!(port instanceof draw2d.Port)){\n            return;\n        }\n\n        // this can happen if the user release the mouse button outside the window during a drag&drop\n        // operation. In this case we must fire the \"onDragEnd\" event postpond.\n        //\n        if(port.isInDragDrop===true){\n            port.onDragEnd( x, y, shiftKey, ctrlKey);\n            port.isInDragDrop=false;\n        }\n\n        // introspect the port only if it is draggable at all\n        //\n        if (port.isDraggable()) {\n            var canDragStart = port.onDragStart(x - port.getAbsoluteX(), y - port.getAbsoluteY(), shiftKey, ctrlKey);\n            if(canDragStart) {\n                port.fireEvent(\"dragstart\", {x: x - port.getAbsoluteX(), y: y - port.getAbsoluteY(), shiftKey: shiftKey, ctrlKey: ctrlKey});\n            }\n\n            // Element send a veto about the drag&drop operation\n            this.mouseDraggingElement = canDragStart===false ? null : port;\n            this.mouseDownElement = port;\n        }\n    },\n\n    /**\n     * \n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} dx The x diff between start of dragging and this event\n     * @param {Number} dy The y diff between start of dragging and this event\n     * @param {Number} dx2 The x diff since the last call of this dragging operation\n     * @param {Number} dy2 The y diff since the last call of this dragging operation\n     * @template\n     */\n    onMouseDrag: function(canvas, dx, dy, dx2, dy2, shiftKey, ctrlKey)\n    {\n        try{\n            if (this.mouseDraggingElement !== null) {\n                var de = this.mouseDraggingElement;\n                var ct = this.currentTarget;\n\n                de.isInDragDrop = true;\n                de.onDrag(dx, dy, dx2, dy2, shiftKey, ctrlKey);\n\n                var target=canvas.getBestFigure(de.getAbsoluteX(),de.getAbsoluteY(), de);\n\n                // the hovering element has been changed\n                if(target!==ct){\n                    if(ct!==null){\n                        ct.onDragLeave(de);\n                        ct.fireEvent(\"dragLeave\",{draggingElement:de});\n                        de.editPolicy.each(function(i,e){\n                            if(e instanceof draw2d.policy.port.PortFeedbackPolicy){\n                                e.onHoverLeave(canvas, de, ct);\n                            }\n                        });\n                    }\n\n                    // possible hoverEnter event\n                    //\n                    if(target!==null){\n                        this.currentTarget= ct = target.delegateTarget(de);\n                        if(ct!==null){\n                            ct.onDragEnter(de); // legacy\n                            ct.fireEvent(\"dragEnter\",{draggingElement:de});\n                            de.editPolicy.each(function(i,e){\n                                if(e instanceof draw2d.policy.port.PortFeedbackPolicy){\n                                    e.onHoverEnter(canvas, de, ct);\n                                }\n                            });\n                        }\n                    }\n                    else{\n                        this.currentTarget = null;\n                    }\n                }\n\n\n                var p = canvas.fromDocumentToCanvasCoordinate(canvas.mouseDownX + (dx/canvas.zoomFactor), canvas.mouseDownY + (dy/canvas.zoomFactor));\n                var target = canvas.getBestFigure(p.x, p.y,this.mouseDraggingElement);\n\n                if (target !== this.currentDropTarget) {\n                    if (this.currentDropTarget !== null) {\n                        this.currentDropTarget.onDragLeave(this.mouseDraggingElement);\n                        this.currentDropTarget.fireEvent(\"dragLeave\",{draggingElement:this.mouseDraggingElement});\n                        this.currentDropTarget = null;\n                    }\n                    if (target !== null) {\n                        this.currentDropTarget = target.delegateTarget(this.mouseDraggingElement);\n                        // inform all listener that the element has accept the dragEnter event\n                        //\n                        if( this.currentDropTarget !==null) {\n                            this.currentDropTarget.onDragEnter(this.mouseDraggingElement); // legacy\n                            this.currentDropTarget.fireEvent(\"dragEnter\", {draggingElement: this.mouseDraggingElement});\n                        }\n                    }\n                }\n            }\n        }\n        catch(exc){\n            console.log(exc);\n            debugger;\n        }\n    },\n\n\n    /**\n     * \n     *\n     * @param {draw2d.Figure} figure the shape below the mouse or null\n     * @param {Number} x the x-coordinate of the mouse down event\n     * @param {Number} y the y-coordinate of the mouse down event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onMouseUp: function(canvas, x, y, shiftKey, ctrlKey)\n    {\n        if (this.mouseDraggingElement !== null) {\n\n            var de = this.mouseDraggingElement;\n            var ct = this.currentTarget;\n            // start CommandStack transaction\n            canvas.getCommandStack().startTransaction();\n\n            de.onDragEnd(x, y, shiftKey, ctrlKey);\n            // notify all installed policies\n            //\n            if(ct){\n                de.editPolicy.each(function(i,e){\n                    if(e instanceof draw2d.policy.port.PortFeedbackPolicy){\n                        e.onHoverLeave(canvas, de, ct);\n                    }\n                });\n            }\n\n            de.editPolicy.each(function(i,e){\n                if(e instanceof draw2d.policy.figure.DragDropEditPolicy){\n                    e.onDragEnd(canvas, de, x, y, shiftKey, ctrlKey);\n                }\n            });\n\n            // Reset the drag&drop flyover information\n            //\n            this.currentTarget = null;\n            de.isInDragDrop =false;\n\n            // fire an event\n            // @since 5.3.3\n            de.fireEvent(\"dragend\",{x:x, y:y, shiftKey:shiftKey, ctrlKey:ctrlKey});\n\n\n            // check if we drop the port onto a valid\n            // drop target and create a connection if possible\n            //\n            if (this.currentDropTarget !== null) {\n                this.mouseDraggingElement.onDrop(this.currentDropTarget, x, y, shiftKey, ctrlKey);\n\n                this.currentDropTarget.onDragLeave(this.mouseDraggingElement);\n                this.currentDropTarget.fireEvent(\"dragLeave\", {draggingElement: this.mouseDraggingElement});\n\n                // Ports accepts only Ports as DropTarget\n                //\n                if(this.currentDropTarget instanceof draw2d.Port){\n                    var request = new draw2d.command.CommandType(draw2d.command.CommandType.CONNECT);\n                    request.source = this.currentDropTarget;\n                    request.target = this.mouseDraggingElement;\n                    var command = this.mouseDraggingElement.createCommand(request);\n\n                    if(command!==null){\n                        command.setConnection(this.createConnection());\n                        canvas.getCommandStack().execute(command);\n                        this.currentDropTarget.onCatch(this.mouseDraggingElement, x, y, shiftKey, ctrlKey);\n                    }\n                }\n            }\n\n            // end command stack trans\n            canvas.getCommandStack().commitTransaction();\n            this.currentDropTarget = null;\n            this.mouseDraggingElement = null;\n        }\n    },\n\n\n    createConnection: function()\n    {\n        var connection = this._super();\n        connection.setRouter(new draw2d.layout.connection.DirectRouter());\n\n        return connection;\n    }\n\n\n});\n\n","\n/**\n * @class\n *\n * The OrthogonalConnectionCreatePolicy can be installed into the canvas to override the\n * default connection crate behaviour. Normaly you can create connections by drag&drop a port.\n *\n * With this policy you can route the connection during creation.\n *\n * Creates a connection by clicking on a port.\n * <ul>\n *  <li> click on the first port</li>\n *  <li> click within the canvas to add additional vertices</li>\n *  <li> click on the target port to draw the connection</li>\n *  <li> press ESC to abort the operation (didn't work within this JSDoc)</li>\n * </ul>\n * <br>\n * <br>\n * <b>The generated connection has always perpendicular segments.</b>\n * <br>\n * <br>\n *\n *\n * @example\n *\n *    // Override the default connection creation.\n *    //\n *    canvas.installEditPolicy( new draw2d.policy.connection.OrthogonalConnectionCreatePolicy());\n *\n *    // create and add two Node which contains Ports (In and OUT)\n *    //\n *    var start = new draw2d.shape.node.Start({x:50, y:50});\n *    var endNode   = new draw2d.shape.node.End({x:200, y:70});\n *\n *    // add the two nodes to the canvas\n *    //\n *    canvas.add( start);\n *    canvas.add( endNode);\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.connection.ConnectionCreatePolicy\n */\nimport draw2d from '../../packages'\n\ndraw2d.policy.connection.OrthogonalConnectionCreatePolicy = draw2d.policy.connection.ConnectionCreatePolicy.extend(\n    /** @lends draw2d.policy.connection.ClickConnectionCreatePolicy.prototype */\n    {\n    \n    NAME: \"draw2d.policy.connection.ClickConnectionCreatePolicy\",\n\n    /**\n     *\n     * Creates a new connection create policy instance\n\n     */\n    init: function(attr, setter, getter)\n    {\n        this._super( attr, setter, getter);\n\n        this.port1 = null;\n        this.beeline = null;\n        this.pulse= null;\n        this.tempConnection = null;\n\n        this.vertices = new draw2d.util.ArrayList();\n    },\n\n    /**\n     * \n     * Called by the canvas if the user click on a figure.\n     *\n     * @param {draw2d.Figure} the figure under the click event. Can be null\n     * @param {Number} x the x coordinate of the mouse during the click event\n     * @param {Number} y the y coordinate of the mouse during the click event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @since 6.1.0\n     *\n     * @template\n     */\n    onClick: function(figure, x, y, shiftKey, ctrlKey)\n    {\n        var UP   = draw2d.geo.Rectangle.DIRECTION_UP;\n        var RIGHT= draw2d.geo.Rectangle.DIRECTION_RIGHT;\n        var DOWN = draw2d.geo.Rectangle.DIRECTION_DOWN;\n        var LEFT = draw2d.geo.Rectangle.DIRECTION_LEFT;\n\n        var _this = this;\n        var port = figure;// .getCanvas().getBestFigure(x, y);\n\n        // nothing to do\n        if(port === null && this.port1 === null){\n            return;\n        }\n\n        // nothing found at all\n        //\n        if(port===null){\n            var canvas = this.port1.getCanvas();\n            var newPos = this.beeline.getEndPosition();\n            this.vertices.add(newPos);\n            this.beeline.setStartPosition(this.beeline.getEndPosition());\n            this.tempConnection.setVertices(this.vertices);\n            if(this.pulse!==null) {\n                this.pulse.remove();\n                this.pulse = null;\n            }\n            this.ripple(newPos.x, newPos.y, 0);\n            return;\n        }\n\n        // we just considering ports\n        //\n        if(!(port instanceof draw2d.Port)){\n            return;\n        }\n\n        // start connection create by selection the start port\n        //\n        if(this.port1===null){\n            var canvas = port.getCanvas();\n            this.port1 = port;\n            this.vertices.add(port.getAbsolutePosition());\n            this.beeline = new draw2d.shape.basic.Line({\n                start: this.port1.getAbsolutePosition(),\n                end: this.port1.getAbsolutePosition(),\n                dasharray:\"- \",\n                color:\"#2C70FF\"\n            });\n\n            this.beeline.hide= function(){\n                _this.beeline.setCanvas(null);\n            };\n\n            this.beeline.show= function(canvas){\n                _this.beeline.setCanvas(canvas);\n                _this.beeline.shape.toFront();\n            };\n            this.beeline.show(canvas);\n\n            this.tempConnection = new draw2d.shape.basic.PolyLine({\n                start: this.port1.getAbsolutePosition(),\n                end: this.port1.getAbsolutePosition(),\n                stroke:2,\n                color:\"#2C70FF\"\n            });\n\n            this.tempConnection.hide= function(){\n                _this.tempConnection.setCanvas(null);\n            };\n\n            this.tempConnection.show= function(canvas){\n                _this.tempConnection.setCanvas(canvas);\n                _this.tempConnection.shape.toFront();\n            };\n            this.tempConnection.show(canvas);\n            this.tempConnection.setVertices([this.port1.getAbsolutePosition(),this.port1.getAbsolutePosition()]);\n\n            var a= function() {\n                _this.tempConnection.shape.animate({\"stroke-width\" : 2}, 800, b);\n            };\n            var b=function() {\n                _this.tempConnection.shape.animate({\"stroke-width\":1}, 800, a);\n            };\n            a();\n\n            canvas.paper.setStart();\n\n            // delete the previews puls if the user press twice on the starting port\n            //\n            if(this.pulse!==null) {\n                this.pulse.remove();\n                this.pulse = null;\n            }\n\n            var pos = port.getAbsolutePosition();\n            this.ripple(pos.x, pos.y, 1);\n            this.pulse = canvas.paper.setFinish();\n        }\n        else {\n            var possibleTarget = port.delegateTarget(this.port1);\n\n            if (!(possibleTarget instanceof draw2d.Port)) {\n                return; // silently\n            }\n\n            // check whenever the target port allows a connection\n            //\n            var request = new draw2d.command.CommandType(draw2d.command.CommandType.CONNECT);\n            request.source = this.port1;\n            request.target = port;\n            var command = null;\n            if (this.port1 instanceof draw2d.InputPort) {\n                command = this.port1.createCommand(request);\n            }\n            else {\n                command = port.createCommand(request);\n            }\n\n            if (command !== null) {\n                var connection = this.createConnection();\n                command.setConnection(connection);\n                port.getCanvas().getCommandStack().execute(command);\n\n\n                this.beeline.hide();\n                this.tempConnection.hide();\n                if (this.pulse !== null) {\n                    this.pulse.remove();\n                    this.pulse = null;\n                }\n                this.beeline = null;\n                this.port1 = null;\n\n                // use the default routing if the user didn't add some\n                // vertices\n                if(this.vertices.getSize()<=2){\n                    return;\n                }\n\n                var MINDIST = command.getConnection().getRouter().MINDIST;\n                var beforeVertex = this.vertices.get(this.vertices.getSize()-2);\n                var lastVertex   = this.vertices.last();\n                var portPos      = port.getAbsolutePosition();\n                var lastSegmentDir = UP;\n                if(lastVertex.x === beforeVertex.x){\n                    lastSegmentDir = lastVertex.y< beforeVertex.y ? UP : DOWN;\n                }\n                else{\n                    lastSegmentDir = lastVertex.x< beforeVertex.x ? LEFT : RIGHT;\n                }\n\n                // CALCULATE THE LAST MILE OF THE CONNECTION\n                //\n                // ensure that we have a valid \"manhattan style\" connection.\n                // We must add or adjust some points or segments.\n                //\n                // The code below creates and adjust the points in that way that the\n                // DOTTED line is the calculated part to the user defined vertices.\n                // ==================================\n                //\n                switch(port.getConnectionDirection(this.port1)){\n                    case UP:\n                        switch(lastSegmentDir){\n                            case UP:\n                                //       o..................o lastVertex\n                                //       |         .        |\n                                //       |         .        |\n                                //       |    +----O----+   |\n                                // ------o    | portPos |   o------------\n                                //            |         |      beforeVertex\n                                //            +---------+\n                                //\n                                if(lastVertex.y<(portPos.y-MINDIST)) {\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x, lastVertex.y));\n                                    this.vertices.add(portPos);\n                                }\n                                //        ...................\n                                //        .        .        .\n                                //        .   +----O----+   .\n                                //        o   | portPos |   o lastVertex\n                                //        |   |         |   |\n                                //        |   +---------+   |\n                                // -------o                 o------------\n                                //                            beforeVertex\n                                //\n                                else{\n                                    lastVertex.y = portPos.y-MINDIST;\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x, lastVertex.y));\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case RIGHT:\n                                //  ..............................\n                                //  .                   .        .\n                                //  .                   .        .\n                                //  o------->o     +----O----+   o---------------->O\n                                //  |              | portPos |   | beforeVertex    lastVertex\n                                //  |              |         |   |\n                                //  |              +---------+\n                                if(lastVertex.y>(portPos.y-MINDIST)){\n                                    beforeVertex.y = portPos.y-MINDIST;\n                                    lastVertex.x = portPos.x;\n                                    lastVertex.y = beforeVertex.y;\n                                    this.vertices.add(portPos);\n                                }\n                                //\n                                //                                beforeVertex   lastVertex\n                                // o---------->o..................o------------->O\n                                // |                     .        |\n                                // |                +----O----+   |\n                                // |                | portPos |   |\n                                // |                |         |   |\n                                //                  +---------+\n                                else{\n                                    lastVertex.x = portPos.x;\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case DOWN:\n                                //                           beforeVertex\n                                // ------o..................o------------\n                                //       |         .        |\n                                //       |         .        |\n                                //       V    +----O----+   V\n                                //       o    | portPos |   o lastVertex\n                                //            |         |\n                                //            +---------+\n                                //\n                                if(lastVertex.y<(portPos.y-MINDIST)) {\n                                    beforeVertex.x = portPos.x;\n                                    lastVertex.setPosition(portPos);\n                                }\n                                //        ...................\n                                //        .        .        .\n                                //        .   +----O----+   . beforeVertex\n                                // -------o   | portPos |   o------------\n                                //        |   |         |   |\n                                //        V   +---------+   V\n                                //        o                 o\n                                //                            lastVertex\n                                //\n                                else{\n                                    lastVertex.y = portPos.y-MINDIST;\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x,lastVertex.y ));\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case LEFT:\n                                //           ..................................\n                                //           .         .                       .\n                                //           .         .                       .\n                                // o<--------o    +----O----+   o<-------------O beforeVertex\n                                //           |    | portPos |    lastVertex    |\n                                //           |    |         |                  |\n                                //                +---------+\n                                if(lastVertex.y>(portPos.y-MINDIST)){\n                                    beforeVertex.y = portPos.y-MINDIST;\n                                    lastVertex.x = portPos.x;\n                                    lastVertex.y = beforeVertex.y;\n                                    this.vertices.add(portPos);\n                                }\n                                //             |                               |\n                                //             |                               |\n                                //   o<--------o................o<-------------O\n                                //                      .        lastVertex     beforeVertex\n                                //                 +----O----+\n                                //                 | portPos |\n                                //                 |         |\n                                //                 +---------+\n                                else{\n                                    lastVertex.x = portPos.x;\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                        }\n                        break;\n                    case RIGHT:\n                        switch(lastSegmentDir){\n                            case UP:\n                                //                    o lastVertex\n                                //                    |\n                                //                    |\n                                //  ------------------o beforeVertex\n                                //                    .\n                                //  +----------+      .\n                                //  |          |      .\n                                //  |  portPos O.......\n                                //  |          |      .\n                                //  +----------+      .\n                                //                    o lastVertex\n                                //                    |\n                                //                    |\n                                //   -----------------o beforeVertex\n                                //\n                                if(lastVertex.x > (portPos.x+MINDIST)){\n                                    lastVertex.y = portPos.y;\n                                    this.vertices.add(portPos);\n                                }\n                                //        lastVertex\n                                //      o...............\n                                //      |              .\n                                //      |              .\n                                //  ----o beforeVertex .\n                                //                     .\n                                //  +----------+       .\n                                //  |          |       .\n                                //  |  portPos O........\n                                //  |          |       .\n                                //  +----------+       .\n                                //      o...............\n                                //      | lastVertex\n                                //      |\n                                //------o\n                                //        beforeVertex\n                                //\n                                //\n                                else{\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x+MINDIST, lastVertex.y));\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x+MINDIST, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case RIGHT:\n                                //    beforeVertex     lastVertex\n                                //    o-------------->o\n                                //                    .\n                                //  +----------+      .\n                                //  |          |      .\n                                //  |  portPos O.......\n                                //  |          |      .\n                                //  +----------+      .\n                                //                    .\n                                //    o-------------->o\n                                //    beforeVertex     lastVertex\n                                //\n                                if(lastVertex.x > (portPos.x+MINDIST)){\n                                    this.vertices.add(new draw2d.geo.Point(lastVertex.x, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                // beforeVertex  lastVertex\n                                // o------------>o.........\n                                //                         .\n                                //       +----------+      .\n                                //       |          |      .\n                                //       |  portPos O.......\n                                //       |          |      .\n                                //       +----------+      .\n                                //                         .\n                                //  o----------->o..........\n                                // beforeVertex  lastVertex\n                                //\n                                else{\n                                    lastVertex.x =  portPos.x+MINDIST;\n                                    this.vertices.add(new draw2d.geo.Point(lastVertex.x, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case DOWN:\n                                //    ----------------o beforeVertex\n                                //                    |\n                                //                    |\n                                //                    o lastVertex\n                                //                    .\n                                //  +----------+      .\n                                //  |          |      .\n                                //  |  portPos O.......\n                                //  |          |      .\n                                //  +----------+      .\n                                //                    .\n                                //      --------------o beforeVertex\n                                //                    |\n                                //                    |\n                                //                    o lastVertex\n                                //\n                                if(lastVertex.x > (portPos.x+MINDIST)){\n                                    lastVertex.y = portPos.y;\n                                    this.vertices.add(portPos);\n                                }\n                                //    -----o beforeVertex\n                                //         |\n                                //         | lastVertex\n                                //         o...........\n                                //                    .\n                                //  +----------+      .\n                                //  |          |      .\n                                //  |  portPos O.......\n                                //  |          |      .\n                                //  +----------+      .\n                                //                    .\n                                // ----o beforeVertex .\n                                //     |              .\n                                //     | lastVertex   .\n                                //     o...............\n                                //\n                                else{\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x+MINDIST, lastVertex.y));\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x+MINDIST, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case LEFT:\n                                //                lastVertex      beforeVertex\n                                //               o<--------------o\n                                //               .\n                                //  +----------+ .\n                                //  |          | .\n                                //  |  portPos O..\n                                //  |          | .\n                                //  +----------+ .\n                                //               .\n                                //               o<--------------o\n                                //                lastVertex      beforeVertex\n                                //\n                                if(lastVertex.x > (portPos.x+MINDIST)){\n                                    this.vertices.add(new draw2d.geo.Point(lastVertex.x, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                // lastVertex                beforeVertex\n                                // o<-----------------------o\n                                //                      .\n                                //       +----------+   .\n                                //       |          |   .\n                                //       |  portPos O....\n                                //       |          |   .\n                                //       +----------+   .\n                                //                      .\n                                //  o<----------------------o\n                                //  lastVertex               beforeVertex\n                                //\n                                else{\n                                    lastVertex.x =  portPos.x+MINDIST;\n                                    this.vertices.add(new draw2d.geo.Point(lastVertex.x, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                        }\n                        break;\n                    case DOWN:\n                        switch(lastSegmentDir){\n                            case UP:\n                                //       o                  o lastVertex\n                                //       |                  |\n                                //       |                  |\n                                //       |    +---------+   |\n                                // ------o    |         |   o------------\n                                //       .    | portPos |   . beforeVertex\n                                //       .    +----O----+   .\n                                //       .         .        .\n                                //       ....................\n                                //\n                                if(lastVertex.y<(portPos.y+MINDIST)) {\n                                    lastVertex.y = portPos.y+MINDIST;\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x, lastVertex.y));\n                                    this.vertices.add(portPos);\n                                }\n                                //            +---------+\n                                //            |         |\n                                //            | portPos |\n                                //            +----O----+\n                                //                 .\n                                //        o.................o lastVertex\n                                //        |                 |\n                                //        |                 |\n                                // -------o                 o------------\n                                //                            beforeVertex\n                                //\n                                else{\n                                    lastVertex.x   = portPos.x;\n                                    lastVertex.y   = portPos.y;\n                                    beforeVertex.x = portPos.x;\n                                }\n                                break;\n                            case RIGHT:\n                                //                 +---------+\n                                //                 |         |\n                                //                 | portPos |\n                                //  o------->o     +----O----+    o--------------->O\n                                //  |        .          .         | beforeVertex   . lastVertex\n                                //  |        .....................|.................\n                                //  |\n                                //\n                                //\n                                if(lastVertex.y<(portPos.y+MINDIST)){\n                                    this.vertices.add(new draw2d.geo.Point(lastVertex.x, portPos.y+MINDIST));\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x, portPos.y+MINDIST));\n                                    this.vertices.add(portPos);\n                                }\n                                //                  +---------+\n                                //                  |         |\n                                //                  | portPos |\n                                //                  +----O----+\n                                //                       .\n                                //             ...................................\n                                //             .                    beforeVertex . lastVertex\n                                // o---------->o                  o------------->O\n                                // |                              |\n                                // |                              |\n                                //\n                                else{\n                                    lastVertex.x = portPos.x;\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case DOWN:\n                                //                           beforeVertex\n                                // ------o                  o------------\n                                //       |                  |\n                                //       |                  |\n                                //       V    +---------+   V\n                                //       o    |         |   o lastVertex\n                                //       .    | portPos |   .\n                                //       .    +----O----+   .\n                                //       .         .        .\n                                //       ....................\n                                //\n                                if(lastVertex.y<(portPos.y+MINDIST)) {\n                                    lastVertex.y = portPos.y+MINDIST;\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x,lastVertex.y ));\n                                    this.vertices.add(portPos);\n                                }\n                                //\n                                //            +---------+     beforeVertex\n                                // -------o   | portPos |   o------------\n                                //        |   |         |   |\n                                //        V   +----O----+   V\n                                //        o        .        o\n                                //        ..................  lastVertex\n                                //\n                                else{\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x,lastVertex.y ));\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case LEFT:\n                                //\n                                // o<--------o    +---------+   o<-------------O beforeVertex\n                                // .         |    |         |   . lastVertex   |\n                                // .         |    | portPos |   .              |\n                                // .              +----O----+   .\n                                // .                   .        .\n                                // ..............................\n                                //\n                                if(lastVertex.y<(portPos.y-MINDIST)){\n                                    beforeVertex.y = portPos.y-MINDIST;\n                                    lastVertex.x = portPos.x;\n                                    lastVertex.y = beforeVertex.y;\n                                    this.vertices.add(portPos);\n                                }\n                                //\n                                //                +---------+\n                                //           |    |         |               |\n                                //           |    | portPos |               |\n                                //           |    +----O----+               |\n                                //           |         .                    |\n                                // o<--------o...................o<---------o\n                                //\n                                else{\n                                    lastVertex.x = portPos.x;\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                        }\n                        break;\n                    case LEFT:\n                        switch(lastSegmentDir){\n                            case UP:\n                                //    ................o lastVertex\n                                //    .               |\n                                //    .               |\n                                //  --.---------------o beforeVertex\n                                //    .\n                                //    .   +----------+\n                                //    .   |          |\n                                //    ....o  portPos |\n                                //    .   |          |\n                                //    .   +----------+\n                                //    .\n                                //    ................o lastVertex\n                                //                    |\n                                //                    |\n                                //   -----------------o beforeVertex\n                                //\n                                if(lastVertex.x >= (portPos.x-MINDIST)){\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x-MINDIST, lastVertex.y));\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x-MINDIST, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                               //\n                                //            +----------+\n                                //            |          |\n                                //      ......o  portPos |\n                                //      .     |          |\n                                //      .     +----------+\n                                //      o\n                                //      | lastVertex\n                                //      |\n                                //------o\n                                //        beforeVertex\n                                //\n                                //\n                                else if(lastVertex.y > portPos.y && lastVertex.x < (portPos.x-MINDIST)){\n                                    lastVertex.y = portPos.y;\n                                    this.vertices.add(portPos);\n                                }\n                                //          lastVertex\n                                //      o..\n                                //      | .\n                                //      | .\n                                //  ----o .   beforeVertex\n                                //        .\n                                //        .   +----------+\n                                //        .   |          |\n                                //        ....o  portPos |\n                                //            |          |\n                                //            +----------+\n                                //\n                                else{\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x-MINDIST, lastVertex.y));\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x-MINDIST, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case RIGHT:\n                                //    beforeVertex     lastVertex\n                                //    o-------------->o\n                                //                    .\n                                // ....................\n                                // .\n                                // .      +----------+\n                                // .      |          |\n                                // .......o  portPos |\n                                //        |          |\n                                //        +----------+\n                                //\n                                if(lastVertex.y<portPos.y && lastVertex.x > (portPos.x-MINDIST)){\n                                    var center = portPos.y-(portPos.y-lastVertex.y)/2;\n                                    this.vertices.add(new draw2d.geo.Point(lastVertex.x, center));\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x-MINDIST, center));\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x-MINDIST, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                //        +----------+\n                                //        |          |\n                                // .......o  portPos |\n                                // .      |          |\n                                // .      +----------+\n                                // .\n                                // ....................\n                                //                    .\n                                //    o-------------->o\n                                //    beforeVertex     lastVertex\n                                //\n                                else if(lastVertex.y>portPos.y && lastVertex.x > (portPos.x-MINDIST)){\n                                    var center = portPos.y+(lastVertex.y-portPos.y)/2;\n                                    this.vertices.add(new draw2d.geo.Point(lastVertex.x, center));\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x-MINDIST, center));\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x-MINDIST, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                // beforeVertex  lastVertex\n                                // o------------>o\n                                //               .\n                                //               .   +----------+\n                                //               .   |          |\n                                //               ....o  portPos |\n                                //               .   |          |\n                                //               .   +----------+\n                                //               .\n                                //  o----------->o\n                                // beforeVertex  lastVertex\n                                //\n                                else{\n                                    this.vertices.add(new draw2d.geo.Point(lastVertex.x, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case DOWN:\n                                //         -----------o beforeVertex\n                                //                    |\n                                //                    |\n                                //                    V\n                                //    ................o lastVertex\n                                //    .\n                                //    .       +----------+\n                                //    .       |          |\n                                //    ........o portPos  |\n                                //    .       |          |\n                                //    .       +----------+\n                                //    .\n                                //    .        --------o beforeVertex\n                                //    .                |\n                                //    .                |\n                                //    .                V\n                                //    .................o lastVertex\n                                //\n                                if(lastVertex.x >= (portPos.x-MINDIST)){\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x-MINDIST, lastVertex.y));\n                                    this.vertices.add(new draw2d.geo.Point(portPos.x-MINDIST, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                //    -----o beforeVertex\n                                //         |\n                                //         |\n                                //         o lastVertex\n                                //         .\n                                //         .       +----------+\n                                //         .       |          |\n                                //         ........o portPos  |\n                                //             .   |          |\n                                //             .   +----------+\n                                // beforeVertex.\n                                // ------------o\n                                //             |\n                                //             |\n                                // lastVertex  o\n                                //\n                                else{\n                                    lastVertex.y=portPos.y;\n                                    this.vertices.add(portPos);\n                                }\n                                break;\n                            case LEFT:\n                                //   lastVertex      beforeVertex\n                                //    o<--------------o\n                                //    .\n                                //    .       +----------+\n                                //    .       |          |\n                                //    ....... o portPos  |\n                                //    .       |          |\n                                //    .       +----------+\n                                //    .\n                                //    o<--------------o\n                                //    lastVertex      beforeVertex\n                                //\n                                if(lastVertex.x < (portPos.x-MINDIST)){\n                                    this.vertices.add(new draw2d.geo.Point(lastVertex.x, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                                //         lastVertex                beforeVertex\n                                //  .......o<-----------------------o\n                                //  .\n                                //  .    +----------+\n                                //  .    |          |\n                                //  .....o portPos  |\n                                //  .    |          |\n                                //  .    +----------+\n                                //  .\n                                //  ........o<----------------------o\n                                //         lastVertex               beforeVertex\n                                //\n                                else{\n                                    lastVertex.x =  portPos.x-MINDIST;\n                                    this.vertices.add(new draw2d.geo.Point(lastVertex.x, portPos.y));\n                                    this.vertices.add(portPos);\n                                }\n                            break;\n                        }\n                    break;\n                }\n\n                if(this.vertices.getSize()>3) {\n                    connection._routingMetaData.routedByUserInteraction = true;\n                    connection.setVertices(this.vertices);\n                }\n                this.vertices.clear();\n            }\n        }\n\n    },\n\n\n    /**\n     * \n     *\n     * @param {draw2d.Canvas} canvas\n     * @param {Number} x the x-coordinate of the mouse event\n     * @param {Number} y the y-coordinate of the mouse event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @template\n     */\n    onMouseMove: function(canvas, x, y, shiftKey, ctrlKey)\n    {\n        if(this.beeline!==null){\n            this.beeline.setEndPosition(this.orthogonal(this.vertices.last(), {x:x,y:y}));\n        }\n    },\n\n    /**\n     * \n     * Callback if the user press a key down\n     *\n     * @param {draw2d.Canvas} canvas the related canvas\n     * @param {Number} keyCode the pressed key\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @private\n     **/\n    onKeyDown: function(canvas, keyCode, shiftKey, ctrlKey)\n    {\n        var KEYCODE_ENTER = 13;\n        var KEYCODE_ESC = 27;\n        if (keyCode === KEYCODE_ESC && this.beeline!==null){\n            this.beeline.hide();\n            this.tempConnection.hide();\n            this.beeline = null;\n            this.port1=null;\n            this.vertices.clear();\n            if(this.pulse!=null) {\n                this.pulse.remove();\n                this.pulse=null;\n            }\n        }\n    },\n\n    orthogonal: function(anchor, p)\n    {\n        // calculate vertical line distance\n        //\n        var xDiff = Math.abs(anchor.x- p.x)+10;\n        var xDist = draw2d.geo.Line.distance(anchor.x-xDiff, anchor.y, anchor.x+xDiff, anchor.y, p.x, p.y);\n\n        // calculate horizontal line distance\n        //\n        var yDiff = Math.abs(anchor.y- p.y)+10;\n        var yDist = draw2d.geo.Line.distance(anchor.x, anchor.y-yDiff, anchor.x, anchor.y+yDiff, p.x, p.y);\n\n        return yDist>xDist? {x: p.x, y:anchor.y}:{x: anchor.x, y: p.y};\n    },\n\n    createConnection: function()\n    {\n        var connection = this._super();\n        connection.attr({radius:7, stroke:3});\n        connection.setRouter(new draw2d.layout.connection.InteractiveManhattanConnectionRouter());\n        return connection;\n    }\n\n});\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Provide support for selecting and positioning a non-resizable figure.\n * Selection is indicated via rectangular handle that outlines the figure with a 1-pixel black\n * dotted line.\n *\n *\n * @example\n *\n *      circle =new draw2d.shape.basic.Circle({diameter:50, x:90, y:50});\n *      circle.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy());\n *      canvas.add(circle);\n *\n *      canvas.add(new draw2d.shape.basic.Label({text:\"Click on the circle to see the selection feedback\"}),20,10);\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.SelectionFeedbackPolicy\n */\ndraw2d.policy.figure.AntSelectionFeedbackPolicy = draw2d.policy.figure.SelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.AntSelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.figure.AntSelectionFeedbackPolicy\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   *\n   * Called by the framework of the Policy should show a resize handle for the given shape\n   *\n   * @param {draw2d.Canvas} canvas the responsible canvas\n   * @param {draw2d.Figure} figure the figure to decorate with a selection feedback\n   * @param {Boolean} [isPrimarySelection]\n   */\n  onSelect: function (canvas, figure, isPrimarySelection) {\n    if (figure.selectionHandles.isEmpty()) {\n      let box = new draw2d.shape.basic.Rectangle({bgColor: null, dasharray: \"- \", color: \"#2C70FF\"})\n      box.hide = function () {\n        // IMPORTANT\n        // don't add/remove this rectangle to the canvas resizeHandles. This rect isn't responsible for any hitTest or\n        // dragDrop operation\n        //canvas.resizeHandles.remove(box);\n        box.setCanvas(null)\n      }\n      box.show = function (canvas) {\n        box.setCanvas(canvas)\n        // IMPORTANT\n        // don't add/remove this rectangle to the canvas resizeHandles. This rect isn't responsible for any hitTest or\n        // dragDrop operation\n        //canvas.resizeHandles.remove(box);\n        //canvas.resizeHandles.add(box);\n        box.shape.toFront()\n      }\n      box.show(canvas)\n      figure.selectionHandles.add(box)\n\n      // add a bee line to the parent if a parent is given and if the bounding box\n      // of the parent and the figure didn't have intersections\n      if (figure.getParent() !== null) {\n        let line = new draw2d.shape.basic.Line({opacity: 0.5, bgColor: null, dasharray: \"- \", color: \"#2C70FF\"})\n        //line.setStartPosition(figure.getBoundingBox().getCenter());\n        //line.setEndPosition(figure.getParent().getBoundingBox().getCenter());\n        line.show = (canvas) => line.setCanvas(canvas)\n        line.hide = () => line.setCanvas(null)\n        line.show(canvas)\n        figure.selectionHandles.add(line)\n        this._updateBeeLine(line, figure)\n      }\n    }\n    this.moved(canvas, figure)\n  },\n\n\n  /**\n   *\n   * Callback if the figure has been moved\n   *\n   * @param figure\n   *\n   * @template\n   */\n  moved: function (canvas, figure) {\n    if (figure.selectionHandles.isEmpty()) {\n      return // silently\n    }\n\n    let margin = 2\n    let box = figure.selectionHandles.first()\n    box.setPosition(figure.getAbsolutePosition().translate(-margin, -margin))\n    box.setDimension(figure.getWidth() + margin*2, figure.getHeight() + margin*2)\n    box.setRotationAngle(figure.getRotationAngle())\n\n    if (figure.selectionHandles.getSize() > 1) {\n      this._updateBeeLine(figure.selectionHandles.get(1), figure)\n    }\n  },\n\n  /**\n   *\n   * @param {draw2d.shape.basic.Line} line\n   * @param {draw2d.Figure} figure\n   * @private\n   */\n  _updateBeeLine: function (line, figure) {\n    let parent = figure.getParent()\n\n    if (parent === null) {\n      return\n    }\n\n    if (parent instanceof draw2d.shape.basic.Line) {\n      let center = figure.getBoundingBox().getCenter()\n      let projection = parent.pointProjection(center)\n      if (projection === null) {\n        let p1 = line.getStartPosition()\n        let p2 = line.getEndPosition()\n        let d1 = center.distance(p1)\n        let d2 = center.distance(p1)\n        projection = d1 < d2 ? p1 : p2\n      }\n      let intersection = figure.getBoundingBox().intersectionWithLine(center, projection)\n      if (intersection.getSize() > 0) {\n        line.setStartPosition(figure.getBoundingBox().intersectionWithLine(center, projection).get(0))\n          .setEndPosition(projection)\n      }\n      else {\n        line.setStartPosition(figure.getBoundingBox().getCenter())\n          .setEndPosition(projection)\n      }\n    }\n    else {\n      let rect1 = figure.getBoundingBox(),\n        rect2 = parent.getBoundingBox()\n\n      let center1 = rect1.getCenter()\n      let center2 = rect2.getCenter()\n      // the rectangle overlaps -> return the center of booth\n      if (rect1.intersects(rect2)) {\n        line.setStartPosition(center1)\n          .setEndPosition(center2)\n      }\n      // one rect is inside the other rect\n      //\n      else if (rect1.hitTest(center2) || rect2.hitTest(center1)) {\n        line.setStartPosition(center1)\n          .setEndPosition(center2)\n      }\n      else {\n        rect1.scale(3, 3)\n        rect2.scale(3, 3)\n\n        line.setStartPosition(rect1.intersectionWithLine(center1, center2).get(0))\n          .setEndPosition(rect2.intersectionWithLine(center1, center2).get(0))\n      }\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @example\n *\n *      circle =new draw2d.shape.basic.Circle();\n *      circle.installEditPolicy(new draw2d.policy.figure.BigRectangleSelectionFeedbackPolicy());\n *      canvas.add(circle,90,50);\n *\n *      canvas.add(new draw2d.shape.basic.Label({text:\"Click on the circle to see the selection feedback\"}),20,10);\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.SelectionFeedbackPolicy\n */\ndraw2d.policy.figure.BigRectangleSelectionFeedbackPolicy = draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.BigRectangleSelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.figure.BigRectangleSelectionFeedbackPolicy\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n\n  createResizeHandle: function (owner, type){\n    return new draw2d.ResizeHandle({ owner:owner, type:type, width:15, height:15 });\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.SelectionFeedbackPolicy\n */\ndraw2d.policy.figure.BusSelectionFeedbackPolicy = draw2d.policy.figure.SelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.BusSelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.figure.BusSelectionFeedbackPolicy\",\n\n  /**\n   * Creates a new Router object\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   * \n   * Called by the framework of the Policy should show a resize handle for the given shape\n   *\n   * @param {Boolean} isPrimarySelection\n   */\n  onSelect: function (canvas, figure, isPrimarySelection) {\n    if (figure.selectionHandles.isEmpty()) {\n      let r2 = this.createResizeHandle(figure, 2) // 2 = CENTER_TOP\n      let r4 = this.createResizeHandle(figure, 4) // 4 = RIGHT_MIDDLE\n      let r6 = this.createResizeHandle(figure, 6) // 6 = CENTER_BOTTOM\n      let r8 = this.createResizeHandle(figure, 8) // 8 = LEFT_MIDDLE\n\n      figure.selectionHandles.add(r2, r4, r6, r8)\n\n      r2.setDraggable(figure.isResizeable())\n      r4.setDraggable(figure.isResizeable())\n      r6.setDraggable(figure.isResizeable())\n      r8.setDraggable(figure.isResizeable())\n\n      r2.show(canvas)\n      r4.show(canvas)\n      r6.show(canvas)\n      r8.show(canvas)\n    }\n    this.moved(canvas, figure)\n  },\n\n\n  /**\n   * \n   * Callback if the figure has been moved\n   *\n   * @param figure\n   *\n   * @template\n   */\n  moved: function (canvas, figure) {\n    if (figure.selectionHandles.isEmpty()) {\n      return // silently\n    }\n    let r2 = figure.selectionHandles.find(handle => handle.type === 2)\n    let r4 = figure.selectionHandles.find(handle => handle.type === 4)\n    let r6 = figure.selectionHandles.find(handle => handle.type === 6)\n    let r8 = figure.selectionHandles.find(handle => handle.type === 8)\n\n    let objHeight = figure.getHeight()\n    let objWidth = figure.getWidth()\n    let xPos = figure.getX()\n    let yPos = figure.getY()\n\n    r2?.setPosition(xPos + (objWidth / 2) - (r2.getWidth() / 2), yPos - r2.getHeight())\n    r4?.setPosition(xPos + objWidth, yPos + (objHeight / 2) - (r4.getHeight() / 2))\n    r6?.setPosition(xPos + (objWidth / 2) - (r6.getWidth() / 2), yPos + objHeight)\n    r8?.setPosition(xPos - r8.getWidth(), yPos + (objHeight / 2) - (r8.getHeight() / 2))\n  },\n\n  createResizeHandle: function (owner, type){\n    return new draw2d.ResizeHandle({ owner:owner, type:type, width:10, height:10 });\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Called by the framework if the user edit the position of a figure with a drag drop operation.\n * Sub class like SelectionEditPolicy or RegionEditPolicy can adjust the position of the figure or the selections handles.\n *\n * @author  Andreas Herz\n * @extends draw2d.policy.figure.FigureEditPolicy\n */\ndraw2d.policy.figure.DragDropEditPolicy = draw2d.policy.figure.FigureEditPolicy.extend(\n  /** @lends draw2d.policy.figure.DragDropEditPolicy.prototype */\n  {\n\n    NAME: \"draw2d.policy.figure.DragDropEditPolicy\",\n\n    /**\n     */\n    init: function (attr, setter, getter) {\n      this._super(attr, setter, getter)\n      this.moveCallback = (emitter, event) => {\n        this.moved(emitter.getCanvas(), emitter)\n      }\n    },\n\n\n    /**\n     *\n     * Called by the host if the policy has been installed.\n     *\n     * @param {draw2d.Canvas|draw2d.Figure} host\n     */\n    onInstall: function (host) {\n      this._super(host)\n      host.on(\"move\", this.moveCallback)\n    },\n\n    /**\n     *\n     * Called by the host if the policy has been uninstalled.\n     *\n     * @param {draw2d.Canvas|draw2d.Figure} host\n     */\n    onUninstall: function (host) {\n      this._super(host)\n      host.off(this.moveCallback)\n    },\n\n    /**\n     *\n     * Called by the framework if the related shape has init a drag&drop\n     * operation\n     *\n     * The Policy can send a veto to prevent the DragDrop operation\n     *\n     * @param {draw2d.Canvas} canvas The host canvas\n     * @param {draw2d.Figure} figure The related figure\n     * @param {Number} x the x-coordinate of the mouse up event\n     * @param {Number} y the y-coordinate of the mouse up event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @returns {Boolean} return <b>false</b> to send a veto to the drag operation\n     */\n    onDragStart: function (canvas, figure, x, y, shiftKey, ctrlKey) {\n      figure.shape.attr({cursor: \"move\"})\n\n      // this happens if you drag&drop the shape outside of the screen and\n      // release the mouse button outside the window. We restore the alpha\n      // with the next drag&drop operation\n      if (figure.isMoving === true) {\n        figure.setAlpha(figure.originalAlpha)\n      }\n\n      figure.originalAlpha = figure.getAlpha()\n      figure.isMoving = false\n\n      // return value since 6.1.0\n      return true\n    },\n\n    /**\n     *\n     * Called by the framework during drag a figure.\n     *\n     * @param {draw2d.Canvas} canvas The host canvas\n     * @param {draw2d.Figure} figure The related figure\n     * @template\n     */\n    onDrag: function (canvas, figure) {\n      // enable the alpha blending of the first real move of the object\n      //\n      if (figure.isMoving === false) {\n        figure.isMoving = true\n        figure.setAlpha(figure.originalAlpha * 0.4)\n      }\n    },\n\n    /**\n     *\n     * Called by the framework if the drag drop operation ends.\n     *\n     * @param {draw2d.Canvas} canvas The host canvas\n     * @param {draw2d.Figure} figure The related figure\n     * @param {Number} x the x-coordinate of the mouse up event\n     * @param {Number} y the y-coordinate of the mouse up event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     * @template\n     */\n    onDragEnd: function (canvas, figure, x, y, shiftKey, ctrlKey) {\n      figure.shape.attr({cursor: \"default\"})\n      figure.isMoving = false\n      figure.setAlpha(figure.originalAlpha)\n    },\n\n    /**\n     *\n     * Adjust the coordinates to the rectangle/region of this constraint.\n     *\n     * @param {draw2d.Figure} figure\n     * @param {Number|draw2d.geo.Point} x\n     * @param {Number} [y]\n     * @returns {draw2d.geo.Point} the constraint position of the figure\n     *\n     * @template\n     */\n    adjustPosition: function (figure, x, y) {\n      // do nothing per default implementation\n      if (x instanceof draw2d.geo.Point) {\n        return x\n      }\n\n      return new draw2d.geo.Point(x, y)\n    },\n\n    /**\n     *\n     * ensure that the dimension didn't goes outside the given restrictions\n     *\n     * @param {draw2d.Figure} figure\n     * @param {Number} w\n     * @param {number} h\n     * @returns {draw2d.geo.Rectangle} the constraint position of the figure\n     */\n    adjustDimension: function (figure, w, h) {\n      return new draw2d.geo.Rectangle(0, 0, w, h)\n    },\n\n    /**\n     *\n     * Callback if the figure has moved\n     *\n     * @param {draw2d.Canvas} canvas The host canvas\n     * @param {draw2d.Figure} figure The related figure\n     *\n     * @template\n     */\n    moved: function (canvas, figure) {\n    }\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Called by the framework if the user edit the position of a figure with a drag drop operation.\n * Sub class like SelectionEditPolicy or RegionEditPolicy can adjust the position of the figure\n * or the selections handles.\n *\n * @author  Andreas Herz\n * @extends draw2d.policy.EditPolicy\n * @since 4.4.0\n */\ndraw2d.policy.figure.FigureEditPolicy = draw2d.policy.EditPolicy.extend(\n  /** @lends draw2d.policy.figure.FigureEditPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.figure.FigureEditPolicy\",\n\n  /**\n   * Creates a new Router object\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n  /**\n   * \n   * Called if the user press the right mouse on the figure.<br>\n   * You can either override the \"onContextMenu\" method of the figure or install an editor policy and override this method.\n   * Booth is valid and possible.\n   *\n   * @param {draw2d.Figure|draw2d.shape.basic.Line} figure the figure below the mouse\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @template\n   * @since 4.4.0\n   */\n  onRightMouseDown: function (figure, x, y, shiftKey, ctrlKey) {\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @example\n *\n *      circle =new draw2d.shape.basic.Circle();\n *      circle.installEditPolicy(new draw2d.policy.figure.GlowSelectionFeedbackPolicy());\n *      canvas.add(circle,90,50);\n *\n *      canvas.add(new draw2d.shape.basic.Label(\"Click on the circle to see the selection feedback\"),20,10);\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.SelectionFeedbackPolicy\n */\ndraw2d.policy.figure.GlowSelectionFeedbackPolicy = draw2d.policy.figure.SelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.GlowSelectionFeedbackPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.figure.GlowSelectionFeedbackPolicy\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   * \n   * Called by the framework of the Policy should show a resize handle for the given shape\n   *\n   * @param {Boolean} isPrimarySelection\n   */\n  onSelect: function (canvas, figure, isPrimarySelection) {\n    figure.setGlow(true)\n    this.moved(canvas, figure)\n  },\n\n\n  /**\n   * \n   *\n   * @param {draw2d.Figure} figure the unselected figure\n   */\n  onUnselect: function (canvas, figure) {\n    this._super(canvas, figure)\n    figure.setGlow(false)\n  }\n\n})\n","\n/**\n * @class\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.BusSelectionFeedbackPolicy\n */\nimport draw2d from '../../packages'\n\ndraw2d.policy.figure.HBusSelectionFeedbackPolicy = draw2d.policy.figure.BusSelectionFeedbackPolicy.extend(\n    /** @lends draw2d.policy.figure.HBusSelectionFeedbackPolicy.prototype */\n    {\n    \n    NAME: \"draw2d.policy.figure.HBusSelectionFeedbackPolicy\",\n    /**\n     * Creates a new Router object\n     */\n    init: function( attr, setter, getter)\n    {\n        this._super( attr, setter, getter);\n    },\n\n    /**\n     * \n     * Callback if the figure has been moved\n     *\n     * @param figure\n     *\n     * @template\n     */\n    moved: function(canvas, figure){\n        if(figure.selectionHandles.isEmpty()){\n            return; // silently\n        }\n        var r4= figure.selectionHandles.find(function(handle){return handle.type===4});\n        var r8= figure.selectionHandles.find(function(handle){return handle.type===8});\n\n        r4.setDimension(r4.getWidth(), figure.getHeight());\n        r8.setDimension(r4.getWidth(), figure.getHeight());\n\n        this._super(canvas,figure);\n     }\n\n\n});\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * An EditPolicy for use with Figures. With this edit policy you can move the shape only in a horizontal manner.\n *\n *\n * @example\n *      // add some demo figure to the canvas\n *      var circle =new draw2d.shape.basic.Circle({diameter:50, x:10, y:30});\n *      canvas.add(circle);\n *\n *      // add the edit policy to the shape. At this point you can move the shape only\n *      // horizontal\n *      circle.installEditPolicy(new draw2d.policy.figure.HorizontalEditPolicy());\n *\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.figure.DragDropEditPolicy\n */\ndraw2d.policy.figure.HorizontalEditPolicy = draw2d.policy.figure.DragDropEditPolicy.extend(\n  /** @lends draw2d.policy.figure.HorizontalEditPolicy.prototype */\n  {\n\n    NAME: \"draw2d.policy.figure.HorizontalEditPolicy\",\n\n    /**\n     * Creates a new constraint object\n     *\n     */\n    init: function (attr, setter, getter) {\n      this._super(attr, setter, getter)\n    },\n\n\n    /**\n     *\n     * It is only possible to drag&drop the element in a horizontal line\n     *\n     * @param figure\n     * @param {Number|draw2d.geo.Point} x\n     * @param {number} [y]\n     *\n     * @returns {draw2d.geo.Point} the constraint position of the figure\n     */\n    adjustPosition: function (figure, x, y) {\n      return new draw2d.geo.Point(x, figure.getY())\n    }\n\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A SelectionFeedbackPolicy with resize handles (rectangles) on each side and corner of the shape\n *\n *\n * @example\n *\n *      circle =new draw2d.shape.basic.Circle({diameter:50});\n *      circle.installEditPolicy(new draw2d.policy.RectangleSelectionFeedbackPolicy());\n *      canvas.add(circle,90,50);\n *\n *      canvas.add(new draw2d.shape.basic.Label({text:\"Click on the circle to see the selection feedback\"}),20,10);\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.SelectionFeedbackPolicy\n */\ndraw2d.policy.figure.RaftSelectionFeedbackPolicy = draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.RaftSelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.figure.RaftSelectionFeedbackPolicy\",\n\n\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  createResizeHandle: function (owner, type){\n    return new draw2d.shape.composite.RaftResizeHandle({ owner:owner, type:type, width:10, height:10 });\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A SelectionFeedbackPolicy with resize handles (rectangles) on each side and corner of the shape\n *\n *\n * @example\n *\n *      circle =new draw2d.shape.basic.Circle({diameter:50});\n *      circle.installEditPolicy(new draw2d.policy.RectangleSelectionFeedbackPolicy());\n *      canvas.add(circle,90,50);\n *\n *      canvas.add(new draw2d.shape.basic.Label({text:\"Click on the circle to see the selection feedback\"}),20,10);\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.SelectionFeedbackPolicy\n */\ndraw2d.policy.figure.RectangleSelectionFeedbackPolicy = draw2d.policy.figure.SelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.RectangleSelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.figure.RectangleSelectionFeedbackPolicy\",\n  /**\n   * Creates a selection feedback for a shape.\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  onSelect: function (canvas, figure, isPrimarySelection) {\n    if (figure.selectionHandles.isEmpty()) {\n      // Add a dotted line rectangle to the figure. Override the show/hide method of the standard\n      // figure to avoid adding these element to the hit test of the canvas. In this case the element\n      // is just visible but not part of the model or responsible for any drag/drop operation\n      // #2C70FF #2096fc\n      let box = new draw2d.shape.basic.Rectangle({bgColor: null, dashArray: \"- \", color: \"#2C70FF\", stroke: 0.5})\n      box.hide = function () {\n        // IMPORTANT\n        // don't add/remove this rectangle to the canvas resizeHandles. This rect isn't responsible for any hitTest or\n        // dragDrop operation\n        //canvas.resizeHandles.remove(box);\n        box.setCanvas(null)\n      }\n      box.show = function (canvas) {\n        box.setCanvas(canvas)\n        // IMPORTANT\n        // don't add/remove this rectangle to the canvas resizeHandles. This rect isn't responsible for any hitTest or\n        // dragDrop operation\n        //canvas.resizeHandles.remove(box);\n        //canvas.resizeHandles.add(box);\n        box.toFront(figure)\n      }\n\n      // create standard Resize handles for the figure\n      //\n      let r1 = this.createResizeHandle(figure, 1) // 1 = LEFT TOP\n      let r3 = this.createResizeHandle(figure, 3) // 3 = RIGHT_TOP\n      let r5 = this.createResizeHandle(figure, 5) // 5 = RIGHT_BOTTOM\n      let r7 = this.createResizeHandle(figure, 7) // 7 = LEFT_BOTTOM\n      figure.selectionHandles.add(r1, r3, r5, r7)\n      r1.show(canvas)\n      r3.show(canvas)\n      r5.show(canvas)\n      r7.show(canvas)\n\n\n      // change the look&feel of the corner resizehandles if the\n      // figure isn't resizeable\n      //\n      if (figure.isResizeable() === false) {\n        let attr = {bgColor: null, draggable:false}\n        r1.attr(attr)\n        r3.attr(attr)\n        r5.attr(attr)\n        r7.attr(attr)\n        r1.setDraggable(false)\n        r3.setDraggable(false)\n        r5.setDraggable(false)\n        r7.setDraggable(false)\n      }\n\n      // show only the additional resizehandles if the figure is resizeable and didn't care about\n      // the aspect ration\n      //\n      if ((!figure.getKeepAspectRatio()) && figure.isResizeable()) {\n        let r2 = this.createResizeHandle(figure, 2) // 2 = CENTER_TOP\n        let r4 = this.createResizeHandle(figure, 4) // 4 = RIGHT_MIDDLE\n        let r6 = this.createResizeHandle(figure, 6) // 6 = CENTER_BOTTOM\n        let r8 = this.createResizeHandle(figure, 8) // 8 = LEFT_MIDDLE\n        figure.selectionHandles.add(r2, r4, r6, r8)\n        r2.show(canvas)\n        r4.show(canvas)\n        r6.show(canvas)\n        r8.show(canvas)\n      }\n\n      // add the reference of the \"ant box\" to the figure as well. But wee add them\n      // to the end of the array because inherit classes expect the resizehandles\n      // on index 0-7.\n      //\n      figure.selectionHandles.add(box)\n\n      // call the box.show() at last to ensure that the resize handles are above the\n      // rectangle. The rectangle did a toFront(parentShape);\n      box.show(canvas)\n    }\n    this.moved(canvas, figure)\n  },\n\n\n  /**\n   * \n   * Callback if the figure has been moved. In this case we must update the position of the\n   * resize handles and the \"ant\" box.\n   *\n   * @param figure\n   *\n   * @template\n   */\n  moved: function (canvas, figure) {\n\n    if (figure.selectionHandles.isEmpty()) {\n      return // silently\n    }\n\n    let margin = 3 * canvas.getZoom()\n    let objHeight = figure.getHeight()\n    let objWidth = figure.getWidth()\n    let xPos = figure.getAbsoluteX()\n    let yPos = figure.getAbsoluteY()\n\n    let r1 = figure.selectionHandles.find(handle => handle.type === 1)\n    let r3 = figure.selectionHandles.find(handle => handle.type === 3)\n    let r5 = figure.selectionHandles.find(handle => handle.type === 5)\n    let r7 = figure.selectionHandles.find(handle => handle.type === 7)\n\n    r1.setPosition(xPos-r1.getWidth(),yPos-r1.getHeight());\n    r3.setPosition(xPos+objWidth,yPos-r3.getHeight());\n    r5.setPosition(xPos+objWidth,yPos+objHeight);\n    r7.setPosition(xPos-r7.getWidth(),yPos+objHeight);\n\n    if (!figure.getKeepAspectRatio() && figure.isResizeable()) {\n      let r2 = figure.selectionHandles.find(handle => handle.type === 2)\n      let r4 = figure.selectionHandles.find(handle => handle.type === 4)\n      let r6 = figure.selectionHandles.find(handle => handle.type === 6)\n      let r8 = figure.selectionHandles.find(handle => handle.type === 8)\n\n      r2.setPosition(xPos+(objWidth/2)-(r2.getWidth()/2),yPos-r2.getHeight());\n      r4.setPosition(xPos+objWidth,yPos+(objHeight/2)-(r4.getHeight()/2));\n      r6.setPosition(xPos+(objWidth/2)-(r6.getWidth()/2),yPos+objHeight);\n      r8.setPosition(xPos-r8.getWidth(),yPos+(objHeight/2)-(r8.getHeight()/2));\n    }\n    let box = figure.selectionHandles.last()\n    box.attr({\n      x:xPos-margin,\n      y:yPos-margin,\n      width:objWidth + margin*2,\n      height: objHeight + margin*2,\n      stroke:canvas.getZoom()\n    })\n\n    box.setRotationAngle(figure.getRotationAngle())\n  },\n\n  createResizeHandle: function (owner, type){\n    return new draw2d.ResizeHandle({ owner:owner, type:type, width:10, height:10 });\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * An EditPolicy for use with Figures. The constraint for RegionEditPolicy is a Rectangle. It is\n * not possible to move the related figure outside this constrained area.\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.figure.DragDropEditPolicy\n */\ndraw2d.policy.figure.RegionEditPolicy = draw2d.policy.figure.DragDropEditPolicy.extend(\n  /** @lends draw2d.policy.figure.RegionEditPolicy.prototype */\n  {\n\n    NAME: \"draw2d.policy.figure.RegionEditPolicy\",\n\n    /**\n     * Creates a new constraint object\n     *\n     * @param {Number|draw2d.geo.Rectangle} x x coordinate or a rectangle as constraint for the assigned figure.\n     * @param {Number} y\n     * @param {Number} w\n     * @param {Number} h\n     */\n    init: function (x, y, w, h) {\n      this._super()\n      if (x instanceof draw2d.geo.Rectangle) {\n        this.constRect = x\n      } else if (typeof h === \"number\") {\n        this.constRect = new draw2d.geo.Rectangle(x, y, w, h)\n      } else {\n        throw \"Invalid parameter. RegionEditPolicy need a rectangle as parameter in the constructor\"\n      }\n    },\n\n    /**\n     *\n     * Update the constraint bounding box for the policy.\n     *\n     * @param {draw2d.geo.Rectangle} boundingBox the constraint rectangle\n     * @since 4.8.2\n     * @returns {this}\n     */\n    setBoundingBox: function (boundingBox) {\n      this.constRect = boundingBox\n\n      return this\n    },\n\n    /**\n     *\n     * Returns the constraint bounding box for the policy.\n     *\n     * @returns {draw2d.geo.Rectangle}\n     */\n    getBoundingBox: function () {\n      return this.constRect\n    },\n\n    /**\n     *\n     * Adjust the coordinates to the rectangle/region of this constraint.\n     *\n     * @param {draw2d.Figure} figure\n     * @param {Number|draw2d.geo.Point} x\n     * @param {Number} [y]\n     *\n     * @returns {draw2d.geo.Point} the constraint position of the figure\n     */\n    adjustPosition: function (figure, x, y) {\n      let r = null\n      if (x instanceof draw2d.geo.Point) {\n        r = new draw2d.geo.Rectangle(x.x, x.y, figure.getWidth(), figure.getHeight())\n      } else {\n        r = new draw2d.geo.Rectangle(x, y, figure.getWidth(), figure.getHeight())\n      }\n      r = this.constRect.moveInside(r)\n      return r.getTopLeft()\n    },\n\n    /**\n     *\n     * Adjust the dimension of the rectangle to fit into the region of the policy\n     *\n     * @param {draw2d.Figure} figure\n     * @param {Number} w\n     * @param {Number} h\n     * @returns {draw2d.geo.Rectangle} the constraint position of the figure\n     */\n    adjustDimension: function (figure, w, h) {\n      let diffW = (figure.getAbsoluteX() + w) - this.constRect.getRight()\n      let diffH = (figure.getAbsoluteY() + h) - this.constRect.getBottom()\n\n      if (diffW > 0) {\n        w = w - diffW\n      }\n      if (diffH > 0) {\n        h = h - diffH\n      }\n\n      return new draw2d.geo.Rectangle(0, 0, w, h)\n    }\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Selection feedback policy without \"marching ant lines\" or any other rectangle highlight. Just\n * some resize handles at each corner of the shape.\n *\n *\n * @example\n *      circle =new draw2d.shape.basic.Circle();\n *      circle.installEditPolicy(new draw2d.policy.ResizeSelectionFeedbackPolicy());\n *      canvas.add(circle,90,50);\n *\n *      canvas.add(new draw2d.shape.basic.Label({text:\"Click on the circle to see the selection feedback\"}),20,10);\n *\n * @author Andreas Herz\n * @since 4.0.0\n * @extends draw2d.policy.figure.SelectionFeedbackPolicy\n *\n */\ndraw2d.policy.figure.ResizeSelectionFeedbackPolicy = draw2d.policy.figure.SelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.ResizeSelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.figure.ResizeSelectionFeedbackPolicy\",\n  /**\n   * Creates a new Router object\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   *\n   * Called by the framework of the Policy should show a resize handle for the given shape\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {draw2d.Figure} figure the selected figure\n   * @param {Boolean} [isPrimarySelection]\n   */\n  onSelect: function (canvas, figure, isPrimarySelection) {\n\n    if (figure.selectionHandles.isEmpty()) {\n      // create standard Resize handles for the figure\n      //\n      var r1 = draw2d.Configuration.factory.createResizeHandle(figure, 1) // 1 = LEFT TOP\n      var r3 = draw2d.Configuration.factory.createResizeHandle(figure, 3) // 3 = RIGHT_TOP\n      var r5 = draw2d.Configuration.factory.createResizeHandle(figure, 5) // 5 = RIGHT_BOTTOM\n      var r7 = draw2d.Configuration.factory.createResizeHandle(figure, 7) // 7 = LEFT_BOTTOM\n      figure.selectionHandles.add(r1, r3, r5, r7)\n      r1.show(canvas)\n      r3.show(canvas)\n      r5.show(canvas)\n      r7.show(canvas)\n\n      // The corner ResizeHandles are only draggable fi the figure is\n      // resizeable. But the Resize handles are visible\n      //\n\n      // change the look&feel of the corner resizehandles if the\n      // figure isn't resizeable\n      //\n      if (figure.isResizeable() === false) {\n        r1.setBackgroundColor(null)\n        r3.setBackgroundColor(null)\n        r5.setBackgroundColor(null)\n        r7.setBackgroundColor(null)\n        r1.setDraggable(false)\n        r3.setDraggable(false)\n        r5.setDraggable(false)\n        r7.setDraggable(false)\n      }\n\n      // show only the additional resizehandles if the figure is resizeable\n      //\n      if ((!figure.getKeepAspectRatio()) && figure.isResizeable()) {\n        var r2 = draw2d.Configuration.factory.createResizeHandle(figure, 2) // 2 = CENTER_TOP\n        var r4 = draw2d.Configuration.factory.createResizeHandle(figure, 4) // 4 = RIGHT_MIDDLE\n        var r6 = draw2d.Configuration.factory.createResizeHandle(figure, 6) // 6 = CENTER_BOTTOM\n        var r8 = draw2d.Configuration.factory.createResizeHandle(figure, 8) // 8 = LEFT_MIDDLE\n        figure.selectionHandles.add(r2, r4, r6, r8)\n        r2.show(canvas)\n        r4.show(canvas)\n        r6.show(canvas)\n        r8.show(canvas)\n      }\n    }\n    this.moved(canvas, figure)\n  },\n\n  /**\n   *\n   * Callback if the figure has been moved. In this case we must update the position of the\n   * resize handles.\n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {draw2d.Figure} figure the moved figure\n   *\n   */\n  moved: function (canvas, figure) {\n    if (figure.selectionHandles.isEmpty()) {\n      return // silently\n    }\n\n    var objHeight = figure.getHeight()\n    var objWidth = figure.getWidth()\n    var xPos = figure.getX()\n    var yPos = figure.getY()\n\n    var r1 = figure.selectionHandles.find(function (handle) {\n      return handle.type === 1\n    })\n    var r3 = figure.selectionHandles.find(function (handle) {\n      return handle.type === 3\n    })\n    var r5 = figure.selectionHandles.find(function (handle) {\n      return handle.type === 5\n    })\n    var r7 = figure.selectionHandles.find(function (handle) {\n      return handle.type === 7\n    })\n    r1.setPosition(xPos - r1.getWidth(), yPos - r1.getHeight())\n    r3.setPosition(xPos + objWidth, yPos - r3.getHeight())\n    r5.setPosition(xPos + objWidth, yPos + objHeight)\n    r7.setPosition(xPos - r7.getWidth(), yPos + objHeight)\n\n    if (!figure.getKeepAspectRatio()) {\n      var r2 = figure.selectionHandles.find(function (handle) {\n        return handle.type === 2\n      })\n      var r4 = figure.selectionHandles.find(function (handle) {\n        return handle.type === 4\n      })\n      var r6 = figure.selectionHandles.find(function (handle) {\n        return handle.type === 6\n      })\n      var r8 = figure.selectionHandles.find(function (handle) {\n        return handle.type === 8\n      })\n\n      r2.setPosition(xPos + (objWidth / 2) - (r2.getWidth() / 2), yPos - r2.getHeight())\n      r4.setPosition(xPos + objWidth, yPos + (objHeight / 2) - (r4.getHeight() / 2))\n      r6.setPosition(xPos + (objWidth / 2) - (r6.getWidth() / 2), yPos + objHeight)\n      r8.setPosition(xPos - r8.getWidth(), yPos + (objHeight / 2) - (r8.getHeight() / 2))\n    }\n  }\n\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @example\n *      circle =new draw2d.shape.basic.Circle();\n *      circle.installEditPolicy(new draw2d.policy.RoundRectangleSelectionFeedbackPolicy());\n *      canvas.add(circle,90,50);\n *\n *      canvas.add(new draw2d.shape.basic.Label({text:\"Click on the circle to see the selection feedback\"}),20,10);\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.RectangleSelectionFeedbackPolicy\n */\ndraw2d.policy.figure.RoundRectangleSelectionFeedbackPolicy = draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.RoundRectangleSelectionFeedbackPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.figure.RoundRectangleSelectionFeedbackPolicy\",\n\n  /**\n   * Creates a new Router object\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  createResizeHandle: function (owner, type) {\n    return new draw2d.ResizeHandle({owner: owner, type: type, width: 12, height: 12, radius: 4})\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A {@link  draw2d.policy.SelectionFeedbackPolicy} that is sensitive to the canvas selection. Subclasses will typically\n * decorate the {@link draw2d.Figure figure} with things like selection handles and/or focus feedback.\n * <br>\n * If you want to change the handle visibility for a figure, then you should use SelectionFeedbackPolicy to do that.\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.DragDropEditPolicy\n */\ndraw2d.policy.figure.SelectionFeedbackPolicy = draw2d.policy.figure.SelectionPolicy.extend(\n  /** @lends draw2d.policy.figure.SelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.figure.SelectionFeedbackPolicy\",\n\n  /**\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   * \n   *\n   * @param {draw2d.Figure} figure the unselected figure\n   */\n  onUnselect: function (canvas, figure) {\n    this._super(canvas, figure)\n\n    figure.selectionHandles.each( (i, e) => e.hide())\n    figure.selectionHandles = new draw2d.util.ArrayList()\n  },\n\n  /**\n   * \n   * Called by the host if the policy has been installed.\n   *\n   * @param {draw2d.Figure} figure\n   */\n  onInstall: function (figure) {\n    this._super(figure)\n\n    let canvas = figure.getCanvas()\n    if (canvas !== null) {\n      if (canvas.getSelection().contains(figure)) {\n        this.onSelect(canvas, figure, true)\n      }\n    }\n  },\n\n\n  /**\n   * \n   * Called by the host if the policy has been uninstalled.\n   *\n   * @param {draw2d.Figure} figure\n   */\n  onUninstall: function (figure) {\n    this._super(figure)\n\n    figure.selectionHandles.each( (i, e) => e.hide())\n    figure.selectionHandles = new draw2d.util.ArrayList()\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A {@link  draw2d.policy.SelectionFeedbackPolicy} that is sensitive to the canvas selection. Subclasses will typically\n * decorate the {@link draw2d.Figure figure} with things like selection handles and/or focus feedback.\n * <br>\n * If you want to change the handle visibility for a figure, then you should use SelectionFeedbackPolicy to do that.\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.DragDropEditPolicy\n */\ndraw2d.policy.figure.SelectionPolicy = draw2d.policy.figure.DragDropEditPolicy.extend(\n  /** @lends draw2d.policy.figure.SelectionPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.figure.SelectionPolicy\",\n\n  /**\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   *\n   *\n   * @template\n   * @param figure\n   * @param isPrimarySelection\n   */\n  onSelect: function (canvas, figure, isPrimarySelection) {\n  },\n\n\n  /**\n   *\n   *\n   * @param {draw2d.Figure} figure the unselected figure\n   */\n  onUnselect: function (canvas, figure) {\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Add only very small resize handles to the figure.\n *\n *\n *\n * @example\n *      circle =new draw2d.shape.basic.Circle();\n *      circle.installEditPolicy(new draw2d.policy.SlimSelectionFeedbackPolicy());\n *      canvas.add(circle,90,50);\n *\n *      canvas.add(new draw2d.shape.basic.Label({text:\"Click on the circle to see the selection feedback\"}),20,10);\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.RectangleSelectionFeedbackPolicy\n */\ndraw2d.policy.figure.SlimSelectionFeedbackPolicy = draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.SlimSelectionFeedbackPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.figure.SlimSelectionFeedbackPolicy\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  createResizeHandle: function (owner, type) {\n    return new draw2d.ResizeHandle({owner: owner, type: type, width: 6, height: 6, radius: 0})\n  }\n})\n","\n/**\n * @class\n *\n * Selection feedback policy for vertical bus figures.\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.BusSelectionFeedbackPolicy\n */\nimport draw2d from '../../packages'\n\ndraw2d.policy.figure.VBusSelectionFeedbackPolicy = draw2d.policy.figure.BusSelectionFeedbackPolicy.extend(\n    /** @lends draw2d.policy.figure.VBusSelectionFeedbackPolicy.prototype */\n    {\n    \n    NAME: \"draw2d.policy.figure.VBusSelectionFeedbackPolicy\",\n    /**\n     * Creates a new Router object\n     */\n    init: function( attr, setter, getter)\n    {\n        this._super( attr, setter, getter);\n    },\n\n\n  /**\n   * \n   * Called by the framework of the Policy should show a resize handle for the given shape\n   *\n   * @param {Boolean} isPrimarySelection\n   */\n  onSelect: function (canvas, figure, isPrimarySelection) {\n    if (figure.selectionHandles.isEmpty()) {\n      let r2 = this.createResizeHandle(figure, 2) // 2 = CENTER_TOP\n      let r6 = this.createResizeHandle(figure, 6) // 6 = CENTER_BOTTOM\n\n      figure.selectionHandles.add(r2, r6)\n\n      r2.setDraggable(figure.isResizeable())\n      r6.setDraggable(figure.isResizeable())\n\n      r2.show(canvas)\n      r6.show(canvas)\n    }\n    this.moved(canvas, figure)\n  },\n    /**\n     *\n     * Callback if the figure has been moved\n     *\n     * @param {draw2d.Canvas} canvas The host canvas\n     * @param {draw2d.Figure} figure The related figure\n     *\n     **/\n    moved: function(canvas,figure)\n    {\n        if(figure.selectionHandles.isEmpty()){\n            return; // silently\n        }\n\n        var r2= figure.selectionHandles.find( handle => handle.type===2);\n        var r6= figure.selectionHandles.find( handle => handle.type===6);\n\n        var objWidth = figure.getWidth();\n        // adjust the resize handles on the left/right to the new dimension of the shape\n        //\n        r2.setDimension(objWidth, r2.getHeight());\n        r6.setDimension(objWidth, r6.getHeight());\n\n        this._super(canvas,figure);\n     }\n\n});\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Called by the framework if the user edit the position of a figure with a drag drop operation.\n * Sub class like SelectionEditPolicy or RegionEditPolicy cam adjust th e position of the figure or the selections handles.\n *\n * @author  Andreas Herz\n * @extends draw2d.policy.figure.SelectionFeedbackPolicy\n */\ndraw2d.policy.figure.VertexSelectionFeedbackPolicy = draw2d.policy.figure.SelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.VertexSelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.figure.VertexSelectionFeedbackPolicy\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   *\n   *\n   * @param {draw2d.Canvas} canvas The host canvas\n   * @param {draw2d.Connection} connection the selected figure\n   * @param {Boolean} isPrimarySelection\n   */\n  onSelect: function (canvas, connection, isPrimarySelection) {\n//    \tthis._super(canvas, connection, isPrimarySelection);\n\n    let points = connection.getVertices()\n    for (let i = 0; i < points.getSize(); i++) {\n      let handle = new draw2d.shape.basic.VertexResizeHandle(connection, i)\n      connection.selectionHandles.add(handle)\n      handle.setDraggable(connection.isResizeable())\n      handle.show(canvas)\n\n      if (i !== 0) {\n        let handle = new draw2d.shape.basic.GhostVertexResizeHandle(connection, i - 1)\n        connection.selectionHandles.add(handle)\n        handle.setDraggable(connection.isResizeable())\n        handle.show(canvas)\n      }\n    }\n\n    this.moved(canvas, connection)\n  },\n\n  /**\n   *\n   * Callback method if the figure has been moved.\n   *\n   * @param {draw2d.Canvas} canvas The host canvas\n   * @param {draw2d.Figure} figure The related figure\n   */\n  moved: function (canvas, figure) {\n    figure.selectionHandles.each( (i, e) => e.relocate())\n  }\n\n\n})\n","\n/**\n * @class\n *\n * An EditPolicy for use with Figures. With this edit policy you can move the shape only in a vertical manner.\n *\n *\n * @example\n *      // add some demo figure to the canvas\n *      var circle =new draw2d.shape.basic.Circle({diameter:50, x:10, y:30});\n *      canvas.add(circle);\n *\n *      // add the edit policy to the shape. At this point you can move the shape only\n *      // horizontal\n *      circle.installEditPolicy(new draw2d.policy.figure.VerticalEditPolicy());\n *\n *\n * @author Andreas Herz\n *\n * @extends draw2d.policy.figure.DragDropEditPolicy\n */\nimport draw2d from '../../packages'\n\ndraw2d.policy.figure.VerticalEditPolicy = draw2d.policy.figure.DragDropEditPolicy.extend(\n    /** @lends draw2d.policy.figure.VerticalEditPolicy.prototype */\n    {\n    \n    NAME: \"draw2d.policy.figure.VerticalEditPolicy\",\n\n    /**\n     * Creates a new constraint object\n     */\n    init: function( attr, setter, getter)\n    {\n        this._super( attr, setter, getter);\n    },\n\n\n    /**\n     *\n     * It is only possible to drag&drop the element in a vertical line\n     *\n     * @param {draw2d.Figure} figure\n     * @param {Number|draw2d.geo.Point} x\n     * @param {number} [y]\n     * @returns {draw2d.geo.Point} the constraint position of the figure\n     */\n    adjustPosition: function(figure, x, y)\n    {\n        return new draw2d.geo.Point(figure.getX(),y);\n    }\n\n});\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * This selection shows only selection handles for the width. It is only possible to change the width\n * of an shaped. The height stays always the same or is recalculated by the figure itself.\n *\n * @example\n *      // add some demo figure to the canvas\n *      //\n *      let shape =new draw2d.shape.basic.Rectangle({width:50, height:100, x:10, y:30});\n *      canvas.add(shape);\n *\n *      // At this point you can only change the width of the shape\n *      //\n *      shape.installEditPolicy(new draw2d.policy.figure.WidthSelectionFeedbackPolicy());\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.SelectionFeedbackPolicy\n */\ndraw2d.policy.figure.WidthSelectionFeedbackPolicy = draw2d.policy.figure.SelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.figure.BusSelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.figure.BusSelectionFeedbackPolicy\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   *\n   * Called by the framework of the Policy should show a resize handle for the given shape\n   *\n   * @param {draw2d.Canvas} canvas the host of the diagram\n   * @param {draw2d.Figure} figure the figure to select\n   * @param {Boolean} isPrimarySelection\n   */\n  onSelect: function (canvas, figure, isPrimarySelection) {\n    if (figure.selectionHandles.isEmpty()) {\n      let r4 = new draw2d.ResizeHandle({owner: figure, type: 4}) // 4 = RIGHT_MIDDLE\n      let r8 = new draw2d.ResizeHandle({owner: figure, type: 8}) // 8 = LEFT_MIDDLE\n\n      r4.installEditPolicy(new draw2d.policy.figure.HorizontalEditPolicy())\n      r8.installEditPolicy(new draw2d.policy.figure.HorizontalEditPolicy())\n      figure.selectionHandles.add(r4, r8)\n\n      r4.setDraggable(figure.isResizeable())\n      r8.setDraggable(figure.isResizeable())\n\n      r4.show(canvas)\n      r8.show(canvas)\n    }\n    this.moved(canvas, figure)\n  },\n\n\n  /**\n   *\n   * Callback if the figure has been moved\n   *\n   * @param {draw2d.Canvas} canvas The host canvas\n   * @param {draw2d.Figure} figure The related figure\n   *\n   * @template\n   */\n  moved: function (canvas, figure) {\n    if (figure.selectionHandles.isEmpty()) {\n      return // silently\n    }\n    let r4 = figure.selectionHandles.find(handle => handle.type === 4)\n    let r8 = figure.selectionHandles.find(handle => handle.type === 8)\n\n    let objWidth = figure.getWidth()\n\n    let xPos = figure.getX()\n    let yPos = figure.getY()\n    r4.setDimension(r4.getWidth(), figure.getHeight())\n    r8.setDimension(r8.getWidth(), figure.getHeight())\n    r4.setPosition(xPos + objWidth, yPos)\n    r8.setPosition(xPos - r8.getWidth(), yPos)\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.SelectionFeedbackPolicy\n */\ndraw2d.policy.line.LineSelectionFeedbackPolicy = draw2d.policy.figure.SelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.line.LineSelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.line.LineSelectionFeedbackPolicy\",\n\n  /**\n   * Creates a new selection feedback policy for a line or connection\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   * \n   * Called by the framework of the Policy should show a resize handle for the given shape\n   *\n   * @param {draw2d.Canvas} canvas The host canvas\n   * @param {draw2d.Figure} figure The related figure\n   * @param {Boolean} [isPrimarySelection]\n   */\n  onSelect: function (canvas, figure, isPrimarySelection) {\n    if (figure.selectionHandles.isEmpty()) {\n      figure.selectionHandles.add(new draw2d.shape.basic.LineStartResizeHandle(figure))\n      figure.selectionHandles.add(new draw2d.shape.basic.LineEndResizeHandle(figure))\n\n      figure.selectionHandles.each( (i, e) => {\n        e.setDraggable(figure.isResizeable())\n        e.show(canvas)\n      })\n    }\n    this.moved(canvas, figure)\n  },\n\n  /**\n   * \n   * Callback method if the figure has been moved.\n   *\n   * @template\n   */\n  moved: function (canvas, figure) {\n    figure.selectionHandles.each( (i, e) => e.relocate())\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Feedback and edit policy for the InteractiveManhattanRouter.\n *\n * @author  Andreas Herz\n * @extends draw2d.policy.line.LineSelectionFeedbackPolicy\n */\n// do not delete them\nimport plugin from \"lib/jquery.contextmenu\"\nimport css from 'css/contextmenu.css'\n\ndraw2d.policy.line.OrthogonalSelectionFeedbackPolicy = draw2d.policy.line.LineSelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.line.OrthogonalSelectionFeedbackPolicy.prototype */\n  {\n  \n  NAME: \"draw2d.policy.line.OrthogonalSelectionFeedbackPolicy\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    // The ResizeHandle for the Policy. This is inline to avoid that a user want to use them without\n    // the right installed policy.\n    //\n    this.ResizeHandle = draw2d.ResizeHandle.extend(\n      /** @lends draw2d.policy.line.OrthogonalSelectionFeedbackPolicy.ResizeHandle.prototype */\n      {\n      \n      NAME: \"draw2d.policy.line.OrthogonalSelectionFeedbackPolicy.ResizeHandle\",\n\n      init: function (owner, index) {\n        this._super({owner})\n        this.index = index\n      },\n\n\n      /**\n       * \n       * Called if a drag&drop operation starts.<br>\n       * @param {Number} x the x-coordinate of the mouse up event\n       * @param {Number} y the y-coordinate of the mouse up event\n       * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n       * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n       *\n       * @private\n       **/\n      onDragStart: function (x, y, shiftKey, ctrlKey) {\n        this._super(x, y, shiftKey, ctrlKey)\n        this.command = this.getCanvas().getPrimarySelection().createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE_VERTICES))\n\n        // Vertex is a reference and not a copy of the point\n        this.vertex = this.owner.getVertex(this.index).clone()\n      },\n\n      /**\n       * \n       * Called from the framework during a drag&drop operation of the ResizeHandles\n       *\n       * @param {Number} dx the x difference between the start of the drag drop operation and now\n       * @param {Number} dy the y difference between the start of the drag drop operation and now\n       * @param {Number} dx2 The x diff since the last call of this dragging operation\n       * @param {Number} dy2 The y diff since the last call of this dragging operation\n       *\n       * @returns {Boolean}\n       **/\n      onDrag: function (dx, dy, dx2, dy2) {\n        if (this.command == null) {\n          return false\n        }\n\n        let MINDIST = this.owner.getRouter().MINDIST || 10\n\n        let fromDir = this.owner.getSource().getConnectionDirection(this.owner.getTarget())\n        let toDir = this.owner.getTarget().getConnectionDirection(this.owner.getSource())\n\n        this.vertex.translate(dx2, dy2)\n\n        let vertices = this.owner.getVertices()\n        let count = vertices.getSize()\n        //shortcut for math operations\n        let max = Math.max\n        let min = Math.min\n\n\n        // Keep in mind: \"p1\" is always the dragged handle in the coding below\n        //               marked with an '*' in the diagram\n        //\n\n        // FIRST handle of the connection\n        //\n        if (this.index === 1) {\n          let p0 = vertices.get(this.index - 1) // first vertex of the connection\n          let p1 = vertices.get(this.index) // dragged vertex\n          let p2 = vertices.get(this.index + 1) // additional neighbor\n\n          // vertex alignment to handle:\n          //\n          //      p0 +-----* p1       p1 *------+ p0\n          //               |             |\n          //               |             |\n          //               + p2       p2 +\n          if ((p1.x === p2.x) && (p0.y === p1.y)) {\n            switch (fromDir) {\n              case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n                // p0 is on the left of p1\n                //\n                this.owner.setVertex(1, max(p0.x + MINDIST, this.vertex.x), p1.y) // p1\n                this.owner.setVertex(2, max(p0.x + MINDIST, this.vertex.x), p2.y) // p2\n                break\n              // p0 is on the right of p2\n              //\n              case draw2d.geo.Rectangle.DIRECTION_LEFT:\n                this.owner.setVertex(1, min(p0.x - MINDIST, this.vertex.x), p1.y) // p1\n                this.owner.setVertex(2, min(p0.x - MINDIST, this.vertex.x), p2.y) // p2\n                break\n            }\n          }\n\n          // vertices alignment to handle:\n          //\n          //      p0 +              p1 *--------+ p2\n          //         |                 |\n          //         |                 |\n          //      p1 *-----+ p2     p0 +\n          else {\n            switch (fromDir) {\n              case draw2d.geo.Rectangle.DIRECTION_UP:\n                // p0 is below of p1\n                //\n                this.owner.setVertex(1, p1.x, min(p0.y - MINDIST, this.vertex.y)) // p1\n                this.owner.setVertex(2, p2.x, min(p0.y - MINDIST, this.vertex.y)) // p2\n                break\n              // p0 is above of p2\n              //\n              case draw2d.geo.Rectangle.DIRECTION_DOWN:\n                this.owner.setVertex(1, p1.x, max(p0.y + MINDIST, this.vertex.y)) // p1\n                this.owner.setVertex(2, p2.x, max(p0.y + MINDIST, this.vertex.y)) // p2\n                break\n            }\n          }\n        }\n\n        // LAST handle: Only the left hand side sibling can be changed\n        //\n        else if (this.index === (count - 2)) {\n          let p2 = vertices.get(this.index - 1)  // neighbor of the dragged vertex\n          let p1 = vertices.get(this.index)  // dragged vertex\n          let p0 = vertices.get(this.index + 1)  // last vertex of the connection\n\n          // vertices with this alignment.\n          //\n          //      p2 +-----* p1                 + p0\n          //               |                    |\n          //               |                    |\n          //               + p0     p2 +--------* p1\n          if ((p0.x === p1.x) && (p2.y === p1.y)) {\n            switch (toDir) {\n              // p0 is below of p1\n              case draw2d.geo.Rectangle.DIRECTION_UP:\n                this.owner.setVertex(count - 2, p1.x, min(p0.y - MINDIST, this.vertex.y)) // p1\n                this.owner.setVertex(count - 3, p2.x, min(p0.y - MINDIST, this.vertex.y)) // p2\n                break\n              // p0 is above p2\n              case draw2d.geo.Rectangle.DIRECTION_DOWN:\n                this.owner.setVertex(count - 2, p1.x, max(p0.y + MINDIST, this.vertex.y)) // p1\n                this.owner.setVertex(count - 3, p2.x, max(p0.y + MINDIST, this.vertex.y)) // p2\n                break\n            }\n          }\n\n          // vertices with this alignment.\n          //\n          //      p2 +              p0 +--------* p1\n          //         |                          |\n          //         |                          |\n          //      p1 *-----+ p0              p2 +\n          else {\n            switch (toDir) {\n              case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n                // p0 is on the left of p1\n                //\n                this.owner.setVertex(count - 2, max(p0.x + MINDIST, this.vertex.x), p1.y) // p1\n                this.owner.setVertex(count - 3, max(p0.x + MINDIST, this.vertex.x), p2.y) // p2\n                break\n              // p0 is on the right of p2\n              //\n              case draw2d.geo.Rectangle.DIRECTION_LEFT:\n                this.owner.setVertex(count - 2, min(p0.x - MINDIST, this.vertex.x), p1.y) // p1\n                this.owner.setVertex(count - 3, min(p0.x - MINDIST, this.vertex.x), p2.y) // p2\n                break\n            }\n          }\n        }\n        // The resize handle is in the middle of the connection.\n        // -> In this case the connection MUST HAVE at least 5 vertices\n        //\n        else {\n          let p_m1 = vertices.get(this.index - 2)\n          let p0 = vertices.get(this.index - 1)\n          let p1 = vertices.get(this.index)   // selected DragHandle\n          let p2 = vertices.get(this.index + 1)\n          let p3 = vertices.get(this.index + 2)\n\n          // vertices alignment to handle\n          //\n          //               .              .\n          //               .              .\n          //   p1 *------->+  p0      p0  +<---------* p1\n          //      |        .              .          |\n          //      |        .              .          |\n          //   p2 |                                  | p2\n          //   ...+...                         ......+.....\n          //\n          if ((p1.x === p2.x) && (p1.y === p0.y)) {\n            // Exception handling if the dragged handle (p1) is near by the start of the connection\n            // p_m1 is the start of the connection\n            // p0 must be the immediate neighbor of p_m1\n            //\n            if (this.index - 2 === 0) {\n              switch (fromDir) {\n                case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n                  this.owner.setVertex(this.index - 1, p0.x, max(this.vertex.y, p_m1.y - MINDIST))          // p0\n                  this.owner.setVertex(this.index, this.vertex.x, max(this.vertex.y, p_m1.y - MINDIST)) // p1\n                  this.owner.setVertex(this.index + 1, this.vertex.x, p2.y)                         // p2\n                  break\n                case draw2d.geo.Rectangle.DIRECTION_LEFT:\n                  this.owner.setVertex(this.index - 1, p0.x, min(this.vertex.y, p_m1.y + MINDIST))          // p0\n                  this.owner.setVertex(this.index, this.vertex.x, this.vertex.y) // p1\n                  this.owner.setVertex(this.index + 1, this.vertex.x, p2.y)                         // p2\n                  break\n                case draw2d.geo.Rectangle.DIRECTION_UP:\n                  this.owner.setVertex(this.index - 1, p0.x, min(this.vertex.y, p_m1.y - MINDIST))          // p0\n                  this.owner.setVertex(this.index, this.vertex.x, min(this.vertex.y, p_m1.y - MINDIST)) // p1\n                  this.owner.setVertex(this.index + 1, this.vertex.x, p2.y)                         // p2\n                  break\n                case draw2d.geo.Rectangle.DIRECTION_DOWN:\n                  this.owner.setVertex(this.index - 1, p0.x, max(this.vertex.y, p_m1.y + MINDIST))          // p0\n                  this.owner.setVertex(this.index, this.vertex.x, max(this.vertex.y, p_m1.y + MINDIST)) // p1\n                  this.owner.setVertex(this.index + 1, this.vertex.x, p2.y)                        // p2\n                  break\n              }\n            }\n            // Exception handling if the dragged handle (p1L) near by the end of the connection\n            // p3 is the end of the connection\n            //\n            else if ((this.index - count + 3) === 0) {\n              switch (toDir) {\n                case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n                  this.owner.setVertex(this.index - 1, p0.x, this.vertex.y)                       // p0\n                  this.owner.setVertex(this.index, max(this.vertex.x, p3.x + MINDIST), this.vertex.y) // p1\n                  this.owner.setVertex(this.index + 1, max(this.vertex.x, p3.x + MINDIST), p2.y)          // p2\n                  break\n                case draw2d.geo.Rectangle.DIRECTION_LEFT:\n                  this.owner.setVertex(this.index - 1, p0.x, this.vertex.y)                       // p0\n                  this.owner.setVertex(this.index, min(this.vertex.x, p3.x - MINDIST), this.vertex.y) // p1\n                  this.owner.setVertex(this.index + 1, min(this.vertex.x, p3.x - MINDIST), p2.y)          // p2\n                  break\n              }\n            }\n            else {\n              this.owner.setVertex(this.index - 1, p0.x, this.vertex.y)                          // p0\n              this.owner.setVertex(this.index, this.vertex)                                 // p1\n              this.owner.setVertex(this.index + 1, this.vertex.x, p2.y)                          // p2\n            }\n          }\n          // vertices alignment to handle\n          //\n          //  ...+...                            ...+...\n          //  p0 |                        .         | p0\n          //     |          .             .         |\n          //     |          .             .         |\n          //  p1 *----------+ p2      p2  +---------* p1\n          //                .             .\n          //                .             .\n          else if ((p0.x === p1.x) && (p1.y === p2.y)) {\n            // p_m1 is the start of the analyzed segment\n            // p0 must be the immediate neighbor of p_m1\n            //\n            if (this.index - 2 === 0) {\n              switch (fromDir) {\n                case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n                  this.owner.setVertex(this.index - 1, max(this.vertex.x, p_m1.x + MINDIST), p0.y)          // p0\n                  this.owner.setVertex(this.index, max(this.vertex.x, p_m1.x + MINDIST), this.vertex.y) // p1\n                  this.owner.setVertex(this.index + 1, p2.x, this.vertex.y)                              // p2\n                  break\n                case draw2d.geo.Rectangle.DIRECTION_LEFT:\n                  this.owner.setVertex(this.index - 1, min(this.vertex.x, p_m1.x - MINDIST), p0.y)          // p0\n                  this.owner.setVertex(this.index, min(this.vertex.x, p_m1.x - MINDIST), this.vertex.y) // p1\n                  this.owner.setVertex(this.index + 1, p2.x, this.vertex.y)                              // p2\n                  break\n              }\n            }\n            // p3 is the end point\n            //\n            else if ((this.index - count + 3) === 0) {\n              switch (toDir) {\n                case draw2d.geo.Rectangle.DIRECTION_UP:\n                  this.owner.setVertex(this.index - 1, this.vertex.x, max(this.vertex.y, p0.y))      // p0\n                  this.owner.setVertex(this.index, this.vertex.x, min(this.vertex.y, p3.y - MINDIST))   // p1\n                  this.owner.setVertex(this.index + 1, p2.x, min(this.vertex.y, p3.y - MINDIST))   // p2\n                  break\n                case draw2d.geo.Rectangle.DIRECTION_DOWN:\n                  this.owner.setVertex(this.index - 1, this.vertex.x, p0.y)                // p0\n                  this.owner.setVertex(this.index, this.vertex.x, max(this.vertex.y, p3.y + MINDIST))   // p1\n                  this.owner.setVertex(this.index + 1, p2.x, max(this.vertex.y, p3.y + MINDIST))   // p2\n                  break\n              }\n            }\n            // just any element in the middle of the connection\n            //\n            else {\n              this.owner.setVertex(this.index - 1, this.vertex.x, p0.y)                  // p0\n              this.owner.setVertex(this.index, this.vertex)                  // p1\n              this.owner.setVertex(this.index + 1, p2.x, this.vertex.y)                  // p2\n            }\n          }\n        }\n\n        this.relocate()\n\n        // update the command for the undo/redo stuff\n        //\n        if (this.command !== null) {\n          this.command.updateVertices(this.owner.getVertices().clone())\n        }\n\n        // note that the user has changed the routing manually.\n        // This skips the automatic routing.\n        this.owner._routingMetaData.routedByUserInteraction = true\n        return true\n      },\n\n      /**\n       *  Called after a drag and drop action.<br>\n       *        Sub classes can override this method to implement additional stuff. Don't forget to call the super implementation via <code>this._super();</code>\n       *\n       * @param {Number} x the x-coordinate of the mouse event\n       * @param {Number} y the y-coordinate of the mouse event\n       * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n       * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n       *\n       * @returns {Boolean}\n       */\n      onDragEnd: function (x, y, shiftKey, ctrlKey) {\n        let stack = this.getCanvas().getCommandStack()\n\n        stack.execute(this.command)\n        this.command = null\n        return true\n      },\n\n\n      /**\n       * \n       * Controls the location of the resize handle\n       *\n       * @template\n       **/\n      relocate: function () {\n\n        let resizeWidthHalf = this.getWidth() / 2\n        let resizeHeightHalf = this.getHeight() / 2\n\n        let anchor = this.owner.getVertices().get(this.index)\n        if (anchor)\n          this.setPosition(anchor.x - resizeWidthHalf, anchor.y - resizeHeightHalf)\n      }\n\n    })\n  },\n\n\n  /**\n   * \n   *\n   * @template\n   * @param {draw2d.Connection} connection the selected figure\n   * @param {Boolean} isPrimarySelection\n   */\n  onSelect: function (canvas, connection, isPrimarySelection) {\n    this._super(canvas, connection, isPrimarySelection)\n\n    let points = connection.getVertices()\n    let i = 1\n    for (; i < (points.getSize() - 1); i++) {\n      let handle = new this.ResizeHandle(connection, i)\n      connection.selectionHandles.add(handle)\n      handle.setDraggable(connection.isResizeable())\n      handle.show(canvas)\n    }\n\n    this.moved(canvas, connection)\n  },\n\n\n  /**\n   * \n   * remove the segment with the given index.\n   * You must check if it possible to remove the segment before. The method didn'T do any consistency checks.\n   *\n   * @param conn\n   * @param segmentIndex\n   */\n  removeSegment: function (conn, segmentIndex) {\n    let PADDING = 10\n\n    let segmentCount = conn.getVertices().getSize() - 1\n\n    let fromPt = conn.getStartPoint()\n    let fromDir = conn.getSource().getConnectionDirection(conn.getTarget())\n\n    let toPt = conn.getEndPoint()\n    let toDir = conn.getTarget().getConnectionDirection(conn.getSource())\n\n    let p0 = conn.getVertex(segmentIndex - 1)\n    let p1 = conn.getVertex(segmentIndex)\n    let p2 = conn.getVertex(segmentIndex + 1)\n    let p3 = conn.getVertex(segmentIndex + 2)\n\n    //                                             p0 .\n    // Es wird ein Horizontales Segment               .\n    // geloescht. Es muessen somit die Punkte         .\n    // p0 und p3 neu gesetzt werden.               p1 +------*-----+ p2\n    // Ihre neue X-Koordinate ist somit in der               ^     .\n    // Mitte des geloeschten Segmentes                      newX   .\n    //                                                             . p3\n    //\n    if (p1.y === p2.y) {\n      let newX = (p1.x + p2.x) / 2\n      // Die neue X-Koordinate muss auf jeden Falls zwischen p-1 und p4 liegen\n      //\n      if (segmentIndex === 1) {\n        switch (fromDir) {\n          case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n            newX = Math.max(newX, fromPt.x + PADDING)\n            break\n          case draw2d.geo.Rectangle.DIRECTION_LEFT:\n            newX = Math.min(newX, fromPt.x - PADDING)\n            break\n          case draw2d.geo.Rectangle.DIRECTION_UP:\n            newX = fromPt.x\n            break\n          case draw2d.geo.Rectangle.DIRECTION_DOWN:\n            newX = fromPt.x\n            break\n        }\n      }\n\n      if (segmentIndex === segmentCount - 2) {\n        switch (fromDir) {\n          case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n            newX = Math.max(newX, toPt.x + PADDING)\n            break\n          case draw2d.geo.Rectangle.DIRECTION_LEFT:\n            newX = Math.min(newX, toPt.x - PADDING)\n            break\n          case draw2d.geo.Rectangle.DIRECTION_UP:\n            newX = toPt.x\n            break\n          case draw2d.geo.Rectangle.DIRECTION_DOWN:\n            newX = toPt.x\n            break\n        }\n      }\n\n      conn.setVertex(segmentIndex - 1, new draw2d.geo.Point(newX, p0.y))\n      conn.setVertex(segmentIndex + 2, new draw2d.geo.Point(newX, p3.y))\n\n      conn.removeVertexAt(segmentIndex)\n      conn.removeVertexAt(segmentIndex)\n      conn._routingMetaData.routedByUserInteraction = true\n    }\n\n    //                                                         p2       p3\n    // Es wird ein vertikales Segment                        +..........+\n    // geloescht. Es muessen somit die Punkte                |\n    // p0 und p3 neu gesetzt werden.                         |\n    // Ihre neue Y-Koordinate ist somit in der               |\n    // Mitte des geloeschten Segmentes              p0       | p1\n    //                                              +........+\n    //\n    else if (p1.x === p2.x) {\n      let newY = (p1.y + p2.y) / 2\n      // Die neue Y-Koordinate muss auf jeden Falls zwischen p-1 und p4 liegen\n      //\n      if (segmentIndex === 1) {\n        switch (fromDir) {\n          case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n          case draw2d.geo.Rectangle.DIRECTION_LEFT:\n            newY = fromPt.y\n            break\n          case draw2d.geo.Rectangle.DIRECTION_UP:\n          case draw2d.geo.Rectangle.DIRECTION_DOWN:\n            debugger // newX is newer read....why did I calculate them?!\n            newX = fromPt.x\n            break\n        }\n      }\n      if (segmentIndex === segmentCount - 2) {\n        switch (toDir) {\n          case draw2d.geo.Rectangle.DIRECTION_RIGHT:\n          case draw2d.geo.Rectangle.DIRECTION_LEFT:\n            newY = toPt.y\n            break\n          case draw2d.geo.Rectangle.DIRECTION_UP:\n          case draw2d.geo.Rectangle.DIRECTION_DOWN:\n            debugger // newX is newer read....why did I calculate them?!\n            newX = toPt.x\n            break\n        }\n      }\n\n      conn.setVertex(segmentIndex - 1, new draw2d.geo.Point(p0.x, newY))\n      conn.setVertex(segmentIndex + 2, new draw2d.geo.Point(p3.x, newY))\n\n      conn.removeVertexAt(segmentIndex)\n      conn.removeVertexAt(segmentIndex)\n      conn._routingMetaData.routedByUserInteraction = true\n    }\n  },\n\n\n  /**\n   * \n   * split the segment with the given index and insert a new segment.\n   *\n   * @param conn\n   * @param segmentIndex\n   */\n  splitSegment: function (conn, segmentIndex, x, y) {\n    let segmentCount = conn.getVertices().getSize() - 1\n    let p1 = conn.getVertex(segmentIndex)\n    let p2 = conn.getVertex(segmentIndex + 1)\n    let length = 40\n\n    // the selected segment is vertical\n    //\n    if (p1.x === p2.x) {\n      conn._routingMetaData.routedByUserInteraction = true\n      // edge case of an ManhattanRouter: One segment. This happens if the source/target on the same x - coordinate\n      //\n      if (segmentCount === 1) {\n        //     + p1\n        //     |\n        // np1 +-----+ np2\n        //           |\n        //           |\n        // np3 +-----+ np3\n        //     |\n        //     |\n        //     + p2\n        //\n        let newSegLength = (p1.getDistance(p2) / 4) / 2\n        let np1 = new draw2d.geo.Point(p1.x, y - newSegLength)\n        let np2 = new draw2d.geo.Point(p2.x + length, y - newSegLength)\n        let np3 = new draw2d.geo.Point(p2.x + length, y + newSegLength)\n        let np4 = new draw2d.geo.Point(p2.x, y + newSegLength)\n\n        conn.insertVertexAt(segmentIndex + 1, np1)\n        conn.insertVertexAt(segmentIndex + 2, np2)\n        conn.insertVertexAt(segmentIndex + 3, np3)\n        conn.insertVertexAt(segmentIndex + 4, np4)\n      }\n      else {\n        let np1 = new draw2d.geo.Point(0, 0)\n        let np2 = new draw2d.geo.Point(0, 0)\n        //       p2 +\n        //          .\n        // np1 +----+ np2\n        //     .\n        //     .\n        //     + p1\n        // p1 ist der Startpunkt und darf somit nicht verschoben werden\n        //\n        if (segmentIndex === 0) {\n          np1.y = y\n          np1.x = p1.x\n          np2.y = y\n          np2.x = p2.x + length\n          conn.setVertex(segmentIndex + 1, new draw2d.geo.Point(np2.x, p2.y))\n        }\n        // p2 ist der Schlusspunkt und darf somit nicht veaendert werden\n        //\n        else if (segmentIndex === segmentCount - 1) {\n          np1.y = y\n          np1.x = p1.x - length\n          np2.y = y\n          np2.x = p2.x\n          conn.setVertex(segmentIndex, new draw2d.geo.Point(np1.x, p1.y))\n        }\n        else {\n          np1.y = y\n          np1.x = p1.x - (length / 2)\n          np2.y = y\n          np2.x = p2.x + (length / 2)\n          conn.setVertex(segmentIndex, new draw2d.geo.Point(np1.x, p1.y))\n          conn.setVertex(segmentIndex + 1, new draw2d.geo.Point(np2.x, p2.y))\n        }\n\n        conn.insertVertexAt(segmentIndex + 1, np1)\n        conn.insertVertexAt(segmentIndex + 2, np2)\n      }\n    }\n    // the selected segment is horizontal\n    //\n    else if (p1.y == p2.y) {\n      conn._routingMetaData.routedByUserInteraction = true\n      // edge case of an ManhattanRouter: One segment. This happens if the source/target on the same y - coordinate\n      //\n      if (segmentCount === 1) {\n        //     np2 +---------+ np3\n        //         |         |\n        // --------+np1   np4+--------\n        //\n        let newSegLength = (p1.getDistance(p2) / 4) / 2\n        let np1 = new draw2d.geo.Point(x - newSegLength, p1.y)\n        let np2 = new draw2d.geo.Point(x - newSegLength, p1.y - length)\n        let np3 = new draw2d.geo.Point(x + newSegLength, p1.y - length)\n        let np4 = new draw2d.geo.Point(x + newSegLength, p1.y)\n\n        conn.insertVertexAt(segmentIndex + 1, np1)\n        conn.insertVertexAt(segmentIndex + 2, np2)\n        conn.insertVertexAt(segmentIndex + 3, np3)\n        conn.insertVertexAt(segmentIndex + 4, np4)\n      }\n      else {\n        //     p1        np1\n        //   +.........+\n        //             |\n        //             |\n        //             | np2       p2\n        //             +.........+\n        let np1 = new draw2d.geo.Point(0, 0)\n        let np2 = new draw2d.geo.Point(0, 0)\n\n        // p1 ist der Startpunkt und darf somit nicht verschoben werden\n        //\n        if (segmentIndex === 0) {\n          np1.x = x\n          np1.y = p1.y\n          np2.x = x\n          np2.y = p2.y + length\n          conn.setVertex(segmentIndex + 1, new draw2d.geo.Point(p2.x, np2.y))\n        }\n        // p2 ist der Schlusspunkt und darf somit nicht veaendert werden\n        //\n        else if (segmentIndex === segmentCount - 1) {\n          np1.x = x\n          np1.y = p1.y - length\n          np2.x = x\n          np2.y = p2.y\n          conn.setVertex(segmentIndex, new draw2d.geo.Point(p1.x, np1.y))\n        }\n        else {\n          np1.x = x\n          np1.y = p1.y - (length / 2)\n          np2.x = x\n          np2.y = p2.y + (length / 2)\n          conn.setVertex(segmentIndex, new draw2d.geo.Point(p1.x, np1.y))\n          conn.setVertex(segmentIndex + 1, new draw2d.geo.Point(p2.x, np2.y))\n        }\n        conn.insertVertexAt(segmentIndex + 1, np1)\n        conn.insertVertexAt(segmentIndex + 2, np2)\n      }\n    }\n  },\n\n  /**\n   * \n   * Called if the user press the right mouse on the figure.<br>\n   * You can either override the \"onContextMenu\" method of the figure or install an editor policy and override this method.\n   * Booth is valid and possible.\n   *\n   * @param {draw2d.shape.basic.Line} conn the polyline below the mouse\n   * @param {Number} x the x-coordinate of the mouse down event\n   * @param {Number} y the y-coordinate of the mouse down event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @template\n   * @since 4.4.0\n   */\n  onRightMouseDown: function (conn, x, y, shiftKey, ctrlKey) {\n    let segment = conn.hitSegment(x, y)\n    let items = {\"split\": {name: draw2d.Configuration.i18n.menu.addSegment}}\n\n    if (segment === null) {\n      return\n    }\n\n    if (conn.getRouter().canRemoveSegmentAt(conn, segment.index)) {\n      items.remove = {name: draw2d.Configuration.i18n.menu.deleteSegment}\n    }\n\n    $.contextMenu({\n      selector: 'body',\n      events:\n        {\n          hide: function () {\n            $.contextMenu('destroy')\n          }\n        },\n      callback: (key, options) => {\n        switch (key) {\n          case \"remove\": {\n            // deep copy of the vertices of the connection for the command stack to avoid side effects\n            let originalVertices = conn.getVertices().clone(true)\n            this.removeSegment(conn, segment.index)\n            let newVertices = conn.getVertices().clone(true)\n            conn.getCanvas().getCommandStack().execute(new draw2d.command.CommandReplaceVertices(conn, originalVertices, newVertices))\n            }\n            break\n          case \"split\": {\n            // deep copy of the vertices of the connection for the command stack to avoid side effects\n            let originalVertices = conn.getVertices().clone(true)\n            this.splitSegment(conn, segment.index, x, y)\n            let newVertices = conn.getVertices().clone(true)\n            conn.getCanvas().getCommandStack().execute(new draw2d.command.CommandReplaceVertices(conn, originalVertices, newVertices))\n            }\n            break\n          default:\n            break\n        }\n\n      },\n      x: x,\n      y: y,\n      items: items\n    })\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Feedback and edit policy for the VertexRouter.\n *\n * @author  Andreas Herz\n * @extends draw2d.policy.line.LineSelectionFeedbackPolicy\n */\ndraw2d.policy.line.VertexSelectionFeedbackPolicy = draw2d.policy.line.LineSelectionFeedbackPolicy.extend(\n  /** @lends draw2d.policy.line.VertexSelectionFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.line.VertexSelectionFeedbackPolicy\",\n\n  /**\n   *\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n\n  /**\n   * \n   *\n   * @param {draw2d.Canvas} canvas the related canvas\n   * @param {draw2d.Connection} figure the selected figure\n   * @param {Boolean} isPrimarySelection\n   */\n  onSelect: function (canvas, figure, isPrimarySelection) {\n    let startHandle = new draw2d.shape.basic.LineStartResizeHandle(figure)\n    let endHandle = new draw2d.shape.basic.LineEndResizeHandle(figure)\n    figure.selectionHandles.add(startHandle)\n    figure.selectionHandles.add(endHandle)\n\n    let points = figure.getVertices()\n    let count = points.getSize() - 1\n    let i = 1\n    for (; i < count; i++) {\n      figure.selectionHandles.add(new draw2d.shape.basic.VertexResizeHandle(figure, i))\n      figure.selectionHandles.add(new draw2d.shape.basic.GhostVertexResizeHandle(figure, i - 1))\n    }\n\n    figure.selectionHandles.add(new draw2d.shape.basic.GhostVertexResizeHandle(figure, i - 1))\n\n    figure.selectionHandles.each( (i, e) => {\n      e.setDraggable(figure.isResizeable())\n      e.show(canvas)\n    })\n\n    this.moved(canvas, figure)\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A draw2d.policy.SelectionFeedbackPolicy that is sensitive to the canvas selection. Subclasses will typically\n * decorate the {@link draw2d.Figure figure} with things like selection handles and/or focus feedback.\n * <br>\n * If you want to change the handle visibility for a figure, then you should use SelectionFeedbackPolicy to do that.\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.DragDropEditPolicy\n */\ndraw2d.policy.port.ElasticStrapFeedbackPolicy = draw2d.policy.port.PortFeedbackPolicy.extend(\n  /** @lends draw2d.policy.port.ElasticStrapFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.port.ElasticStrapFeedbackPolicy\",\n\n  /**\n   * Creates a new Router object\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n    this.connectionLine = null\n  },\n\n  /**\n   *\n   * Called by the framework if the related shape has init a drag&drop\n   * operation\n   *\n   * @param {draw2d.Canvas} canvas The host canvas\n   * @param {draw2d.Figure} figure The related figure\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   *\n   * @returns {Boolean} return <b>false</b> to send a veto to the drag operation\n   */\n  onDragStart: function (canvas, figure, x, y, shiftKey, ctrlKey) {\n    this.connectionLine = new draw2d.shape.basic.Line()\n    this.connectionLine.setCanvas(canvas)\n    this.connectionLine.getShapeElement()\n\n    this.onDrag(canvas, figure)\n\n    return true\n  },\n\n\n  /**\n   *\n   * Called by the framework during drag a figure.\n   *\n   * @param {draw2d.Canvas} canvas The host canvas\n   * @param {draw2d.Figure} figure The related figure\n   */\n  onDrag: function (canvas, figure) {\n    let x1 = figure.ox + figure.getParent().getAbsoluteX()\n    let y1 = figure.oy + figure.getParent().getAbsoluteY()\n\n    this.connectionLine.setStartPosition(x1, y1)\n    this.connectionLine.setEndPosition(figure.getAbsoluteX(), figure.getAbsoluteY())\n  },\n\n  /**\n   *\n   * Called by the framework if the drag drop operation ends.\n   *\n   * @param {draw2d.Canvas} canvas The host canvas\n   * @param {draw2d.Figure} figure The related figure\n   * @param {Number} x the x-coordinate of the mouse event\n   * @param {Number} y the y-coordinate of the mouse event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onDragEnd: function (canvas, figure, x, y, shiftKey, ctrlKey) {\n    this.connectionLine.setCanvas(null)\n    this.connectionLine = null\n  },\n\n  onHoverEnter: function (canvas, draggedFigure, hoverFiger) {\n    this.connectionLine.setGlow(true)\n    hoverFiger.setGlow(true)\n  },\n\n  onHoverLeave: function (canvas, draggedFigure, hoverFiger) {\n    hoverFiger.setGlow(false)\n    this.connectionLine.setGlow(false)\n  }\n\n\n})\n","import draw2d from '../../packages'\nimport {Tweenable} from \"shifty\"\n\n\n/**\n * @class\n *\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.DragDropEditPolicy\n */\ndraw2d.policy.port.IntrusivePortsFeedbackPolicy = draw2d.policy.port.PortFeedbackPolicy.extend(\n  /** @lends draw2d.policy.port.IntrusivePortsFeedbackPolicy.prototype */\n  {\n\n    NAME: \"draw2d.policy.port.IntrusivePortsFeedbackPolicy\",\n\n    /**\n     */\n    init: function (attr, setter, getter) {\n      this._super(attr, setter, getter)\n      this.connectionLine = null\n      this.tweenable = null\n      this.growFactor = 2\n    },\n\n\n    /**\n     *\n     * Called by the framework if the related shape has init a drag&drop\n     * operation\n     *\n     * @param {draw2d.Canvas} canvas The host canvas\n     * @param {draw2d.Figure} figure The related figure\n     * @param {Number} x the x-coordinate of the mouse up event\n     * @param {Number} y the y-coordinate of the mouse up event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onDragStart: function (canvas, figure, x, y, shiftKey, ctrlKey) {\n      let allPorts = canvas.getAllPorts().clone()\n\n      // filter all candidates for the DropEvent\n      //\n      allPorts.grep(function (p) {\n        return (p.NAME !== figure.NAME && p.parent !== figure.parent && p.getSemanticGroup() === figure.getSemanticGroup())\n          || (p instanceof draw2d.HybridPort)\n          || (figure instanceof draw2d.HybridPort)\n      })\n\n      let start = 0\n      allPorts.each(function (i, element) {\n        if (typeof element.__beforeInflate === \"undefined\") {\n          element.__beforeInflate = element.getWidth()\n        }\n        start = element.__beforeInflate\n      })\n\n      // Animate the ports for a visual feedback\n      //\n      this.tweenable = new Tweenable()\n      this.tweenable.tween({\n        from: {'size': start},\n        to: {'size': start* this.growFactor},\n        duration: 200,\n        easing: \"easeOutSine\",\n        step: function (params) {\n          allPorts.each(function (i, element) {\n            // IMPORTANT shortcut to avoid rendering errors!!\n            // performance shortcut to avoid a lot of events and recalculate/routing of all related connections\n            // for each setDimension call. Additional the connection is following a port during Drag&Drop operation\n            element.shape.attr({rx: params.size/2, ry: params.size/2})\n            element.width = element.height = params.size\n            element.fireEvent(\"resize\")\n          })\n        }\n      })\n\n      this.connectionLine = new draw2d.shape.basic.Line()\n      this.connectionLine.setCanvas(canvas)\n      this.connectionLine.getShapeElement()\n      this.connectionLine.setDashArray(\"- \")\n      this.connectionLine.setColor(\"#30c48a\")\n\n      this.onDrag(canvas, figure)\n\n      return true\n    },\n\n\n    /**\n     *\n     * Called by the framework during drag a figure.\n     *\n     * @param {draw2d.Canvas} canvas The host canvas\n     * @param {draw2d.Figure} figure The related figure\n     * @template\n     */\n    onDrag: function (canvas, figure) {\n      let x1 = figure.ox + figure.getParent().getAbsoluteX()\n      let y1 = figure.oy + figure.getParent().getAbsoluteY()\n\n      this.connectionLine.setStartPosition(x1, y1)\n      this.connectionLine.setEndPosition(figure.getAbsoluteX(), figure.getAbsoluteY())\n    },\n\n    /**\n     *\n     * Called by the framework if the drag drop operation ends.\n     *\n     * @param {draw2d.Canvas} canvas The host canvas\n     * @param {draw2d.Figure} figure The related figure\n     * @param {Number} x the x-coordinate of the mouse event\n     * @param {Number} y the y-coordinate of the mouse event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     */\n    onDragEnd: function (canvas, figure, x, y, shiftKey, ctrlKey) {\n      if (this.tweenable) {\n        this.tweenable.stop(true)\n        this.tweenable.dispose()\n        this.tweenable = null\n      }\n\n      let allPorts = canvas.getAllPorts().clone()\n      // filter all candidates for the DropEvent\n      //\n      allPorts.grep(function (p) {\n        return p.__beforeInflate\n      })\n\n      allPorts.each(function (i, element) {\n        // IMPORTANT shortcut to avoid rendering errors!!\n        // performance shortcut to avoid a lot of events and recalculate/routing of all related connections\n        // for each setDimension call. Additional the connection is following a port during Drag&Drop operation\n        element.shape.attr({rx: element.__beforeInflate / 2, ry: element.__beforeInflate / 2})\n        element.width = element.height = element.__beforeInflate\n        delete element.__beforeInflate\n      })\n      this.connectionLine.setCanvas(null)\n      this.connectionLine = null\n    },\n\n    onHoverEnter: function (canvas, draggedFigure, hoverFigure) {\n      this.connectionLine.setGlow(true)\n      hoverFigure.setGlow(true)\n    },\n\n    onHoverLeave: function (canvas, draggedFigure, hoverFigure) {\n      hoverFigure.setGlow(false)\n      if (this.connectionLine === null) {\n        debugger\n      }\n      this.connectionLine.setGlow(false)\n    }\n\n\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Base class for all port feedback policies. Used for grow, highlight or\n * other decorations during drag&drop and connecting of ports.\n *\n * @author Andreas Herz\n * @extends draw2d.policy.figure.DragDropEditPolicy\n */\ndraw2d.policy.port.PortFeedbackPolicy = draw2d.policy.figure.DragDropEditPolicy.extend(\n  /** @lends draw2d.policy.port.PortFeedbackPolicy.prototype */\n  {\n\n  NAME: \"draw2d.policy.port.PortFeedbackPolicy\",\n\n  /**\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  },\n\n  /**\n   *\n   * Called if the dragged port hove another port\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {draw2d.Port}   draggedFigure\n   * @param {draw2d.Figure} hoverFigure\n   */\n  onHoverEnter: function (canvas, draggedFigure, hoverFigure) {\n  },\n\n  /**\n   *\n   * Fired if the dragged figures leaves the hover figure\n   *\n   * @param {draw2d.Canvas} canvas\n   * @param {draw2d.Port}   draggedFigure\n   * @param {draw2d.Figure} hoverFigure\n   */\n  onHoverLeave: function (canvas, draggedFigure, hoverFigure) {\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Hand drawn arrow which points down left\n *\n *\n * @example\n *    let figure =  new draw2d.shape.analog.OpAmp({x:10, y:10});\n *\n *    canvas.add(figure);\n *\n *\n * @extends draw2d.SVGFigure\n */\ndraw2d.shape.analog.OpAmp = draw2d.SVGFigure.extend(\n  /** @lends draw2d.shape.analog.OpAmp.prototype */\n  {\n\n  NAME: \"draw2d.shape.analog.OpAmp\",\n\n  // custom locator for the special design of the OpAmp Input area\n  MyInputPortLocator: draw2d.layout.locator.PortLocator.extend({\n    init: function () {\n      this._super()\n    },\n    relocate: function (index, port) {\n      let parent = port.getParent()\n      let calcY = (8 + 18.5 * index) * parent.scaleY\n      this.applyConsiderRotation(port, 1, calcY)\n    }\n  }),\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({stroke: 0, bgColor: \"#f0f0ff\"}, attr), setter, getter)\n\n    this.inputLocator = new this.MyInputPortLocator()\n\n    this.createPort(\"input\", this.inputLocator)\n    this.createPort(\"input\", this.inputLocator)\n\n    this.createPort(\"output\")\n\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getSVG: function () {\n    return '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"50\"  height=\"50\">' +\n      '<path d=\"m8.2627,0l0,35.36035l31.23926,-17.76025l-31.23926,-17.60011l0,0l0,0.00001zm2.27832,27.36719l4.08105,0m-2.10449,-2.20703l0,4.27979m2.26367,-21.35938l-4.15918,0\"  stroke=\"#1B1B1B\" fill=\"none\"/>' +\n      '<line x1=\"0.53516\"  y1=\"8\"  x2=\"8.21191\"  y2=\"8\"  stroke=\"#010101\"/>' +\n      '<line x1=\"39.14941\" y1=\"18\" x2=\"45.81055\" y2=\"18\" stroke=\"#010101\" />' +\n      '<line x1=\"0.53516\"  y1=\"27\" x2=\"8.21191\"  y2=\"27\" stroke=\"#010101\" />' +\n      '</svg>'\n  },\n\n  /**\n   * @inheritdoc\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    attributes ??= {}\n\n    // redirect the backgroundColor to an internal SVG node.\n    // In this case only a small part of the shape are filled with the background color\n    // and not the complete rectangle/bounding box\n    //\n    attributes[\"fill\"] = \"none\"\n    if (this.bgColor != null) {\n      this.svgNodes[0].attr({fill: this.bgColor.rgba()})\n    }\n\n    this._super(attributes)\n\n    return this\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.analog.ResistorBridge({x:10, y:10});\n *\n *    canvas.add(figure);\n *\n *\n * @extends draw2d.SVGFigure\n */\ndraw2d.shape.analog.ResistorBridge = draw2d.SVGFigure.extend(\n  /** @lends draw2d.shape.analog.ResistorBridge.prototype */\n  {\n  \n  NAME: \"draw2d.shape.analog.ResistorBridge\",\n\n  // custom locator for the special design of the ResistorBridge Input area\n  MyInputPortLocator: draw2d.layout.locator.PortLocator.extend({\n    init: function () {\n      this._super()\n    },\n    relocate: function (index, figure) {\n      let w = figure.getParent().getWidth()\n      let h = figure.getParent().getHeight()\n      this.applyConsiderRotation(figure, w / 2 + 1, h * index)\n    }\n  }),\n\n  // custom locator for the special design of the ResistorBridge Input area\n  MyOutputPortLocator: draw2d.layout.locator.PortLocator.extend({\n    init: function () {\n      this._super()\n    },\n    relocate: function (index, figure) {\n      let w = figure.getParent().getWidth()\n      let h = figure.getParent().getHeight()\n\n      this.applyConsiderRotation(figure, w * (index - 2), h / 2)\n    }\n  }),\n\n\n  /**\n   * Create a new instance\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n\n    this.inputLocator = new this.MyInputPortLocator()\n    this.outputLocator = new this.MyOutputPortLocator()\n\n    this.createPort(\"hybrid\", this.inputLocator)\n    this.createPort(\"hybrid\", this.inputLocator)\n\n    this.createPort(\"hybrid\", this.outputLocator)\n    this.createPort(\"hybrid\", this.outputLocator)\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getSVG: function () {\n    return '<svg  xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">' +\n      '<path fill=\"#010101\" stroke=\"#010101\" stroke-miterlimit=\"14.3\" id=\"path12322\" d=\"m47.62207,22.71094l0,0c0.73145,0.73242 0.71777,1.93359 -0.03027,2.68164c-0.74805,0.74951 -1.94922,0.76123 -2.68073,0.0293c-0.73138,-0.73242 -0.71967,-1.93211 0.03033,-2.68115c0.74707,-0.74803 1.94727,-0.76219 2.68066,-0.02979l0,0z\"/>' +\n      '<path fill=\"#010101\" stroke=\"#010101\" stroke-miterlimit=\"14.3\" id=\"path12324\" d=\"m25.84082,0.93115l0,0c0.73145,0.73096 0.71875,1.93359 -0.02832,2.68066c-0.75,0.74951 -1.94922,0.76123 -2.68164,0.0293c-0.73242,-0.73241 -0.71973,-1.93164 0.0293,-2.68065c0.74805,-0.74756 1.94922,-0.76172 2.68066,-0.0293l0,0l0,-0.00002z\"/>' +\n      '<path fill=\"#010101\" stroke=\"#010101\" stroke-miterlimit=\"14.3\" id=\"path12326\" d=\"m25.75098,44.58203l0,0c0.73145,0.73193 0.71875,1.93311 -0.02832,2.68115c-0.75,0.74902 -1.94922,0.76074 -2.68262,0.0293c-0.73145,-0.73193 -0.71973,-1.93262 0.03033,-2.68164c0.74707,-0.74756 1.94922,-0.76123 2.68066,-0.02879l0,0l-0.00006,-0.00002z\"/>' +\n      '<path fill=\"#010101\" stroke=\"#010101\" stroke-miterlimit=\"14.3\" id=\"path12328\" d=\"m3.9707,22.80127l0,0c0.73242,0.73193 0.71777,1.93359 -0.0293,2.68115c-0.74902,0.74951 -1.94922,0.76172 -2.68164,0.0293c-0.73145,-0.73242 -0.71973,-1.93164 0.03027,-2.68115c0.74707,-0.74707 1.94922,-0.76074 2.68066,-0.0293l0,0z\"/>' +\n      '<polyline fill=\"none\" stroke=\"#010101\" id=\"polyline12334\" points=\"24.908203125,45.49267578125 31.71875,38.68310546875 31.2119140625,36.98876953125 34.892578125,37.95703125 33.953125,34.22265625 37.6650390625,35.18359375 36.6767578125,31.52490234375 40.3759765625,32.47314453125 39.873046875,30.52783203125 45.884765625,24.51708984375 \" stroke-miterlimit=\"14.3\"/>' +\n      '<polyline fill=\"#010101\" id=\"polyline12338\" points=\"36.3408203125,23.98876953125 38.146484375,29.55810546875 33.630859375,29.55810546875 35.435546875,23.98779296875 \"/>' +\n      '<line fill=\"none\" stroke=\"#010101\" id=\"line12340\" y2=\"28.90967\" x2=\"35.8877\" y1=\"41.13428\" x1=\"35.88867\" stroke-miterlimit=\"14.3\"/>' +\n      '<polyline fill=\"none\" stroke=\"#010101\" id=\"polyline12346\" points=\"3.2109375,23.79248046875 10.01953125,16.98388671875 9.513671875,15.2890625 13.193359375,16.25732421875 12.251953125,12.5234375 15.9658203125,13.48486328125 14.9775390625,9.82568359375 18.6767578125,10.7734375 18.173828125,8.82958984375 24.185546875,2.81787109375 \" stroke-miterlimit=\"14.3\"/>' +\n      '<polyline fill=\"#010101\" id=\"polyline12350\" points=\"13.126953125,23.80419921875 11.3212890625,18.236328125 15.8369140625,18.236328125 14.0322265625,23.806640625 \"/>' +\n      '<line fill=\"none\" stroke=\"#010101\" id=\"line12352\" y2=\"18.8833\" x2=\"13.58008\" y1=\"6.65967\" x1=\"13.5791\" stroke-miterlimit=\"14.3\"/>' +\n      '<polyline fill=\"none\" stroke=\"#010101\" id=\"polyline12358\" points=\"46.65625,24.33642578125 39.84765625,17.52783203125 38.154296875,18.033203125 39.1220703125,14.353515625 35.3876953125,15.29345703125 36.34765625,11.58056640625 32.689453125,12.56884765625 33.6376953125,8.86865234375 31.6923828125,9.373046875 24.322265625,2.00341796875 \" stroke-miterlimit=\"14.3\"/>' +\n      '<polyline fill=\"#010101\" id=\"polyline12362\" points=\"36.578125,1.87109375 38.3828125,7.439453125 33.8681640625,7.439453125 35.6728515625,1.869140625 \"/>' +\n      '<line fill=\"none\" stroke=\"#010101\" id=\"line12364\" y2=\"6.7915\" x2=\"36.125\" y1=\"19.01758\" x1=\"36.125\" stroke-miterlimit=\"14.3\"/>' +\n      '<polyline fill=\"none\" stroke=\"#010101\" id=\"polyline12370\" points=\"24.494140625,46.49951171875 17.685546875,39.69091796875 15.9921875,40.1953125 16.958984375,36.515625 13.2265625,37.45556640625 14.185546875,33.7421875 10.52734375,34.73193359375 11.474609375,31.03125 9.529296875,31.53515625 2.1611328125,24.166015625 \" stroke-miterlimit=\"14.3\"/>' +\n      '<polyline fill=\"#010101\" id=\"polyline12374\" points=\"12.150390625,44.80029296875 10.34765625,39.23193359375 14.861328125,39.23095703125 13.0556640625,44.80224609375 \"/>' +\n      '<line fill=\"none\" stroke=\"#010101\" id=\"line12376\" y2=\"39.87891\" x2=\"12.60352\" y1=\"27.6543\" x1=\"12.60352\" stroke-miterlimit=\"14.3\"/>' +\n      '</svg>'\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.analog.ResistorVertical({x:10, y:10});\n *\n *    canvas.add(figure);\n *\n *\n * @extends draw2d.SVGFigure\n */\ndraw2d.shape.analog.ResistorVertical = draw2d.SetFigure.extend(\n  /** @lends draw2d.shape.analog.ResistorVertical.prototype */\n  {\n\n  NAME: \"draw2d.shape.analog.ResistorVertical\",\n\n  // custom locator for the special design of the Input area\n  MyInputPortLocator: draw2d.layout.locator.PortLocator.extend({\n    init: function () {\n      this._super()\n    },\n    relocate: function (index, figure) {\n      let w = figure.getParent().getWidth()\n      let h = figure.getParent().getHeight()\n      this.applyConsiderRotation(figure, w / 2, h)\n    }\n  }),\n\n  // custom locator for the special design of the Output area\n  MyOutputPortLocator: draw2d.layout.locator.PortLocator.extend({\n    init: function () {\n      this._super()\n    },\n    relocate: function (index, figure) {\n      let w = figure.getParent().getWidth()\n      this.applyConsiderRotation(figure, w / 2, 0)\n    }\n  }),\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n\n    this._super(extend({width: 30, height: 50, bgColor: null}, attr), setter, getter)\n\n    this.inputLocator = new this.MyInputPortLocator()\n    this.outputLocator = new this.MyOutputPortLocator()\n\n    this.createPort(\"hybrid\", this.inputLocator)\n    this.createPort(\"hybrid\", this.outputLocator)\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  createSet: function () {\n    let set = this._super()\n\n    set.push(this.canvas.paper.path(\"M15,0 L15,5 L0,7.5 L30,10 L0,15 L30,20 L0,25 L30,30 L15,32.5 L15,40\"))\n\n    return set\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.analog.VoltageSupplyHorizontal({x:10, y:10});\n *\n *    canvas.add(figure);\n *\n *\n * @extends draw2d.SVGFigure\n */\ndraw2d.shape.analog.VoltageSupplyHorizontal = draw2d.SVGFigure.extend(\n  /** @lends draw2d.shape.analog.VoltageSupplyHorizontal.prototype */\n  {\n\n  NAME: \"draw2d.shape.analog.VoltageSupplyHorizontal\",\n\n  // custom locator for the special design of the Input area\n  MyInputPortLocator: draw2d.layout.locator.PortLocator.extend({\n    init: function () {\n      this._super()\n    },\n    relocate: function (index, figure) {\n      let h = figure.getParent().getHeight()\n      this.applyConsiderRotation(figure, 0, h / 2)\n    }\n  }),\n\n  // custom locator for the special design of the Output area\n  MyOutputPortLocator: draw2d.layout.locator.PortLocator.extend({\n    init: function () {\n      this._super()\n    },\n    relocate: function (index, figure) {\n      let w = figure.getParent().getWidth()\n      let h = figure.getParent().getHeight()\n      this.applyConsiderRotation(figure, w, h / 2)\n    }\n  }),\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 30}, attr), setter, getter)\n\n    this.createPort(\"hybrid\", new this.MyInputPortLocator())  // GND\n    this.createPort(\"hybrid\", new this.MyOutputPortLocator()) // VCC\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getSVG: function () {\n    return '<svg width=\"49\" height=\"28\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">' +\n      '<path d=\"m24.99933,18.95592l0,-9.54576m-5.78374,-9.40907l0,28.35939m-5.78718,-9.40457l0,-9.54576m-5.78374,-9.40907l0,28.35939\" id=\"path10566\" stroke-miterlimit=\"14.3\" stroke=\"#010101\" fill=\"none\"/>' +\n      '<path d=\"m26.79878,14.13039l6.90583,0m-33.22691,0l6.90583,0\" id=\"path10568\" stroke-miterlimit=\"14.3\" stroke-linecap=\"square\" stroke=\"#010101\" fill=\"none\"/>' +\n      '</svg>'\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.analog.VoltageSupplyVertical({x:10, y:10});\n *\n *    canvas.add(figure);\n *\n *\n * @extends draw2d.SVGFigure\n */\ndraw2d.shape.analog.VoltageSupplyVertical = draw2d.SVGFigure.extend(\n  /** @lends draw2d.shape.analog.VoltageSupplyVertical.prototype */\n  {\n\n  NAME: \"draw2d.shape.analog.VoltageSupplyVertical\",\n\n  // custom locator for the special design of the Input area\n  MyInputPortLocator: draw2d.layout.locator.PortLocator.extend({\n    init: function () {\n      this._super()\n    },\n    relocate: function (index, figure) {\n      let w = figure.getParent().getWidth()\n      let h = figure.getParent().getHeight()\n      this.applyConsiderRotation(figure, w / 2, h)\n    }\n  }),\n\n  // custom locator for the special design of the Output area\n  MyOutputPortLocator: draw2d.layout.locator.PortLocator.extend({\n    init: function () {\n      this._super()\n    },\n    relocate: function (index, figure) {\n      let w = figure.getParent().getWidth()\n      this.applyConsiderRotation(figure, w / 2, 0)\n    }\n  }),\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 30, height: 50}, attr), setter, getter)\n\n    this.inputLocator = new this.MyInputPortLocator()\n    this.outputLocator = new this.MyOutputPortLocator()\n\n    this.createPort(\"hybrid\", this.inputLocator) // GND\n    this.createPort(\"hybrid\", this.outputLocator)// VCC\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getSVG: function () {\n    return '<svg  xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">' +\n      '<path d=\"m19.62398,12.37594l-9.87926,0m-9.74355,8.22145l29.36289,0m-9.74007,8.22469l-9.87927,0m-9.74355,8.22145l29.36289,0\" id=\"path10560\" stroke-miterlimit=\"14.3\" stroke=\"#010101\" fill=\"none\"/>' +\n      '<path d=\"m14.63157,9.81646l0,-9.81646m0,47.2328l0,-9.81646\" id=\"path10562\" stroke-miterlimit=\"14.3\" stroke-linecap=\"square\" stroke=\"#010101\" fill=\"none\"/>' +\n      '</svg>'\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Hand drawn arrow which points down left\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.arrow.CalligrapherArrowDownLeft({x:10,y:10, color:\"#3d3d3d\"});\n *\n *    canvas.add(figure);\n *\n *\n * @extends draw2d.SVGFigure\n */\ndraw2d.shape.arrow.CalligrapherArrowDownLeft = draw2d.SVGFigure.extend(\n  /** @lends draw2d.shape.arrow.CalligrapherArrowDownLeft.prototype */\n  {\n\n  NAME: \"draw2d.shape.arrow.CalligrapherArrowDownLeft\",\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr)\n  },\n\n\n  getSVG: function () {\n    return '<svg width=\"180\" height=\"300\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">' +\n      '     <path style=\"fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none\" id=\"path3084\" d=\"m 159.63578,17.846597 c 0.43137,9.44641 -0.0636,18.88035 -0.8284,28.30165 c -1.73211,18.38336 -4.05381,36.71698 -6.08253,55.075313 c -1.61738,13.7075 -3.03402,27.43467 -3.97611,41.19113 c -1.09101,11.16584 -1.31019,22.36559 -1.28541,33.56466 c -0.1328,4.82188 0.3218,9.6468 0.14332,14.46812 c -0.0888,2.39977 -0.28315,3.73625 -0.55012,6.12095 c -0.85848,4.73147 -2.27416,9.40019 -4.7769,13.68272 c -1.47003,2.51544 -3.78493,5.6647 -5.47739,8.05048 c -5.02888,6.66256 -11.08555,12.65652 -18.10552,17.75963 c -4.23302,3.07716 -7.74942,5.12065 -12.22081,7.86298 c -13.253319,6.72606 -25.889792,15.11686 -40.84124,18.60576 c -3.016829,0.7039 -4.431417,0.8157 -7.450859,1.2076 c -6.983246,0.5774 -14.009174,0.3375 -21.010676,0.2509 c -3.278795,-0.033 -6.55749,0.01 -9.835897,0.045 c 0,0 20.838833,-13.2364 20.838833,-13.2364 l 0,0 c 3.147056,0.093 6.294483,0.1852 9.443646,0.2007 c 6.966697,0.011 13.971433,0.1301 20.897176,-0.6344 c 3.732439,-0.5577 7.321215,-1.2431 10.881203,-2.4145 c 1.517208,-0.4992 5.830867,-2.43339 4.487902,-1.6386 c -6.098183,3.6088 -25.104875,12.8748 -9.52514,5.223 c 4.40875,-2.5927 8.262057,-4.7459 12.425175,-7.65986 c 6.839117,-4.78709 12.633657,-10.50427 17.500607,-16.86761 c 2.53518,-3.56692 5.24684,-7.12748 7.07617,-11.03446 c 1.42357,-3.0404 2.21532,-6.28727 2.91146,-9.50152 c 0.91919,-6.88822 1.03991,-13.81392 1.25118,-20.74151 c 0.47683,-11.27871 0.96259,-22.55877 1.61689,-33.83062 c 1.21127,-14.03392 3.64191,-27.94339 5.46543,-41.92167 c 2.26899,-18.186603 4.6835,-36.384373 5.4487,-54.679643 c 0.0788,-2.46092 0.23808,-4.92087 0.23618,-7.38276 c -0.005,-6.45916 -0.62194,-13.00218 -2.13821,-19.32664 c 0,0 23.48134,-10.73998 23.48134,-10.73998 z\" inkscape:connector-curvature=\"0\" />' +\n      '     <path style=\"fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none\" id=\"path3086\" d=\"m 41.271518,252.40239 c 2.465518,-0.7264 4.879503,-1.7726 7.145328,-2.9859 c 0.955597,-0.5117 3.736822,-2.1986 2.791991,-1.6673 c -5.218817,2.9348 -10.409826,5.9187 -15.61474,8.878 c 5.366557,-3.4898 10.227818,-7.6685 14.119927,-12.75576 c 3.507157,-5.09382 4.097613,-11.17122 4.301158,-17.17644 c 0.02635,-3.95844 -0.31227,-7.90612 -0.635377,-11.84752 c 0,0 19.920693,-10.3059 19.920693,-10.3059 l 0,0 c 0.171761,4.05015 0.409899,8.09777 0.50079,12.15101 c -0.185739,6.23619 -0.347804,12.66862 -3.492579,18.24747 c -0.503375,0.75197 -0.961922,1.53596 -1.510126,2.25591 c -3.478528,4.56826 -8.226837,8.04586 -12.757403,11.47443 c -7.345206,4.3297 -14.671333,8.692 -22.035619,12.9891 c -3.551305,2.0723 -7.368692,3.8726 -11.394645,4.7773 c 0,0 18.660602,-14.0344 18.660602,-14.0344 z\" inkscape:connector-curvature=\"0\" />' +\n      '     <path style=\"fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none\" id=\"path3088\" d=\"m 37.815923,255.49919 c 3.41111,0.1581 6.814569,0.2213 10.182693,0.8184 c 6.92998,2.6928 13.533527,6.2357 20.043462,9.8162 c 3.912139,2.1362 7.91195,4.4644 10.690321,8.0298 c 1.039962,1.2802 1.510411,2.7604 1.893523,4.3313 c 0,0 -20.370847,10.9259 -20.370847,10.9259 l 0,0 c -0.225419,-1.2711 -0.55067,-2.4558 -1.329618,-3.5184 c -2.332229,-3.3633 -5.869056,-5.6279 -9.247191,-7.8233 c -6.335066,-3.7106 -12.98611,-7.1834 -20.232784,-8.6836 c -3.497247,-0.3814 -7.011372,-0.4307 -10.521829,-0.1703 c 0,0 18.89227,-13.726 18.89227,-13.726 z\" inkscape:connector-curvature=\"0\" />' +\n      '</svg>'\n  },\n\n  /**\n   *\n   * propagate all attributes like color, stroke,... to the shape element\n   **/\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    this.svgNodes?.attr({fill: this.color.rgba()})\n\n    this._super(attributes)\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Hand drawn arrow to the left.\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.arrow.CalligrapherArrowLeft({x:10, y:10, color:\"#3d3d3d\"});\n *\n *    canvas.add(figure);\n *\n * @extends draw2d.SVGFigure\n */\ndraw2d.shape.arrow.CalligrapherArrowLeft = draw2d.SVGFigure.extend(\n  /** @lends draw2d.shape.arrow.CalligrapherArrowLeft.prototype */\n  {\n  NAME: \"draw2d.shape.arrow.CalligrapherArrowLeft\",\n\n  /**\n   * Creates a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr)\n  },\n\n\n  getSVG: function () {\n    return '<svg width=\"230\" height=\"60\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">' +\n      '  <path style=\"fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none\" id=\"path3024\" d=\"m 218.87943,27.464763 c -1.21088,-0.0563 -2.42064,-0.14616 -3.63262,-0.16893 c -5.82495,-0.10948 -18.61676,-0.0226 -22.97385,0.0122 c -7.12848,0.057 -14.25673,0.14021 -21.38495,0.22333 c -9.03765,0.10539 -18.07511,0.22813 -27.11266,0.3422 c -10.2269,0.11878 -20.4538,0.23756 -30.6807,0.35634 c -35.488759,0.4089 -70.975849,0.82793 -106.4669238,0.95195 c 0,0 7.9718628,-5.70244 7.9718628,-5.70244 l 0,0 c 6.374241,0.28694 12.745594,0.64561 19.122722,0.86083 c 28.09499,0.94816 56.21338,0.92473 84.315959,0.32205 c 10.51273,-0.32805 21.0288,-0.56402 31.53819,-0.98412 c 27.47361,-1.09824 54.91405,-2.91665 82.28177,-5.53697 c 0,0 -12.9788,9.32351 -12.9788,9.32351 z\" inkscape:connector-curvature=\"0\" />' +\n      '  <path style=\"fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none\" id=\"path3026\" d=\"m 100.75066,1.6309831 c -7.165239,3.9571 -14.284929,7.47866 -22.036659,10.2707299 c -5.00195,1.80163 -10.10374,3.31886 -15.2402,4.79424 c -8.25878,2.37815 -16.55626,4.65805 -24.9012,6.79479 c -2.89107,0.71593 -5.74687,1.56407 -8.66266,2.20424 c -3.211679,0.70512 -6.49468,1.17333 -9.752959,1.6747 c -5.447101,0.92112 -10.9044008,1.81762 -16.3983488,2.50082 c -1.608931,0.0814 -0.850754,0.10697 -2.275834,-0.0365 C 20.004071,21.041553 19.256899,21.517873 32.515691,19.216243 c 6.21537,-1.05913 12.34875,-2.37668 18.3945,-4.03234 c 8.12719,-2.02803 16.23765,-4.1157 24.26421,-6.4321199 c 5.23574,-1.55053 10.41682,-3.15473 15.46857,-5.12875 c 1.38953,-0.54295 2.7579,-1.12682 4.12253,-1.71603 c 0.98421,-0.42496 3.86537,-1.81801999 2.92296,-1.32600999 C 93.642191,2.6934931 89.529511,4.7073031 85.450031,6.7704531 l 15.300629,-5.1394 z\" inkscape:connector-curvature=\"0\" sodipodi:nodetypes=\"csccsccccccsssccc\" />' +\n      '  <path style=\"fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none\" id=\"path3028\" d=\"m 80.764281,58.068863 c -2.45498,-3.50762 -6.58178,-6.10525 -10.40324,-8.66732 c -4.30614,-2.72676 -7.93958,-6.28283 -12.6021,-8.28702 c -7.39912,-4.50257 -11.70055,-7.85592 -20.85866,-9.23429 c -4.9257,-0.85706 -17.294247,-1.32043 -22.226462,-2.15427 c -3.445882,-0.42869 -6.2035918,0.70541 -9.6845138,0.57715 c -1.496337,-0.0586 -2.99355,-0.0965 -4.491229,-0.12472 l 13.9525278,-6.24562 l 3.25,-1.17153 c 1.441459,0.0813 -1.116338,0.15309 0.325505,0.23016 c 3.574557,0.17902 7.211864,0.0695 10.712655,0.73822 c 4.723107,1.08097 9.443947,2.1624 14.234177,3.05317 c 2.76739,0.64203 3.92627,0.87082 6.64127,1.66289 c 4.42146,1.28993 8.60075,3.01513 12.86503,4.58129 c 1.90199,0.73446 5.05193,1.93181 6.89302,2.7216 c 4.92005,2.11061 9.5916,4.57045 13.9716,7.31023 c 4.16708,2.62011 8.48023,5.20033 11.72012,8.56863 z\" inkscape:connector-curvature=\"0\" sodipodi:nodetypes=\"ccccccccccccscsccc\" />' +\n      '</svg>'\n  },\n\n  /**\n   *\n   * propagate all attributes like color, stroke,... to the shape element\n   **/\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n\n    if (this.svgNodes !== null) {\n      this.svgNodes.attr({fill: this.color.rgba()})\n    }\n\n    this._super(attributes)\n  }\n\n})\n","import draw2d from '../../packages'\n\n/**\n * @class\n * Oval figure.\n * @example\n *\n *    let arc =  new draw2d.shape.basic.Arc({diameter:150, x:50, y:10, startAngle:0, endAngle:45});\n *\n *    canvas.add(arc);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.VectorFigure\n */\ndraw2d.shape.basic.Arc = draw2d.SetFigure.extend(\n  /** @lends draw2d.shape.basic.Arc.prototype */\n  {\n\n  NAME: \"draw2d.shape.basic.Arc\",\n\n  /**\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this.startAngle = 180\n    this.endAngle = 360\n\n    this._super({width: 80, height: 50, bgColor: null, color: \"#1B1B1B\", ...attr}, setter, getter)\n    this.strokeScale = false // scale the stroke width of the children nodes if the parent resize\n  },\n\n\n  /**\n   * @template\n   **/\n  createSet: function () {\n    this.canvas.paper.setStart()\n\n\n    let flag = (this.endAngle - this.startAngle) > 180\n    let a1 = (this.startAngle % 360) * Math.PI / 180\n    let a2 = (this.endAngle % 360) * Math.PI / 180\n\n    let w2 = this.getWidth() / 2\n    let h2 = this.getHeight() / 2\n\n    this.canvas.paper.path([\n      [\"M\", w2, h2,\n        \"l\", w2 * Math.cos(a1), h2 * Math.sin(a1),\n        \"A\", w2, h2, 0, +flag, 1, w2 + w2 * Math.cos(a2), h2 + h2 * Math.sin(a2),\n        \"z\"]\n    ].join(\"\")).attr({\"fill\": \"#fff0f0\"})\n\n    return this.canvas.paper.setFinish()\n\n  }\n})\n\n","import draw2d from '../../packages'\n\n/**\n * @class\n * A circle figure with basic background and stroke API. <br>\n * A circle can not be streched. <strong>The aspect ration is always 1:1</strong>.\n *\n *\n * @example\n *\n *    let shape =  new draw2d.shape.basic.Circle({x:40,y:10, stroke:3, color:\"#3d3d3d\", bgColor:\"#3dff3d\"});\n *\n *    canvas.add(shape);\n *\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.Oval\n */\ndraw2d.shape.basic.Circle = draw2d.shape.basic.Oval.extend(\n  /** @lends draw2d.shape.basic.Circle.prototype */\n  {\n\n    NAME: \"draw2d.shape.basic.Circle\",\n\n    /**\n     *\n     * @param {Object} [attr] the configuration of the shape\n     * @param {Object} [setter] add or replace setter methods\n     * @param {Object} [getter] add or replace getter methods\n     **/\n    init: function (attr, setter, getter) {\n      this._super(\n        attr,\n        {\n          // @attr {Number} diameter the diameter of the circle */\n          diameter: this.setDiameter,\n          // @attr {Number} radius the radius of the circle */\n          radius: this.setRadius,\n          ...setter},\n        {\n          diameter: this.getDiameter,\n          radius: this.getRadius,\n          ...getter\n        }\n      )\n\n      this.setKeepAspectRatio(true)\n    },\n\n    /**\n     *\n     * Set the diameter of the circle. The center of the circle will be retained.\n     *\n     * @param {Number} d The new diameter of the circle.\n     * @since 4.0.0\n     * @returns {this}\n     **/\n    setDiameter: function (d) {\n      let center = this.getCenter()\n      this.setDimension(d, d)\n      this.setCenter(center)\n      this.fireEvent(\"change:diameter\", {value: d})\n\n      return this\n    },\n\n    /**\n     *\n     * Get the diameter of the circle.\n     *\n     * @since 4.0.0\n     * @returns {Number} the diameter of the circle\n     **/\n    getDiameter: function () {\n      return this.getWidth()\n    },\n\n\n    /**\n     *\n     * Set the radius of the circle. The center of the circle will be retained.\n     *\n     * @param {Number} r The new radius of the circle.\n     * @since 4.0.0\n     * @returns {this}\n     **/\n    setRadius: function (r) {\n      this.setDiameter(r * 2)\n      this.fireEvent(\"change:radius\", {value: r})\n\n      return this\n    },\n\n    /**\n     * Get the radius of the circle\n     *\n     * @returns {Number} the radius of the circle\n     */\n    getRadius: function(){\n      return this.getWidth()/2\n    },\n\n    /**\n     * @inheritdoc\n     * @returns {Object}\n     */\n    getPersistentAttributes: function () {\n      let memento = this._super()\n      // delete the radius attribute of the parent. Because the \"radius\" is the corner radius\n      // of the shape and not the \"radius\" of the circle. Design flaw.  :-/\n      delete memento.radius\n\n      return memento\n    }\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * A Diamond Figure.\n *\n *\n * @example\n *\n *    let d1 =  new draw2d.shape.basic.Diamond({x:10,y:10});\n *    let d2 =  new draw2d.shape.basic.Diamond({x:100,y:10, bgColor:\"#f0f000\", alpha:0.7, width:100, height:60});\n *\n *    canvas.add(d1);\n *    canvas.add(d2);\n *\n *    canvas.setCurrentSelection(d2);\n *\n * @author Andreas Herz\n * @extends draw2d.VectorFigure\n */\ndraw2d.shape.basic.Diamond = draw2d.shape.basic.Polygon.extend(\n  /** @lends draw2d.shape.basic.Diamond.prototype */\n  {\n  \n  NAME: \"draw2d.shape.basic.Diamond\",\n\n  /**\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({bgColor: \"#00a3f6\", color: \"#1B1B1B\"}, attr), setter, getter)\n\n    let pos = this.getPosition()\n\n    this.resetVertices()\n\n    let box = this.getBoundingBox()\n    this.addVertex(box.w / 2, 0)       // Go to the top center..\n    this.addVertex(box.w, box.h / 2) // ...draw line to the right middle\n    this.addVertex(box.w / 2, box.h)   // ...bottom center...\n    this.addVertex(0, box.h / 2) // ...left middle...\n\n    // override the selection handler from the polygon. Because the vertices of\n    // the diamond are not selectable and modifiable\n    //\n    this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy())\n\n    this.setPosition(pos)\n  }\n\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * ResizeHandle for a vertex edit policy. Click of this kind of resize handles\n * adds a new vertex to the polyline or polygon.\n *\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.LineResizeHandle\n */\ndraw2d.shape.basic.GhostVertexResizeHandle = draw2d.shape.basic.LineResizeHandle.extend(\n  /** @lends draw2d.shape.basic.GhostVertexResizeHandle.prototype */\n  {\n  \n  NAME: \"draw2d.shape.basic.GhostVertexResizeHandle\",\n\n    /**\n     *\n     *\n     */\n    init: function (owner, precursorIndex) {\n    this.maxOpacity = 0.35\n    this.precursorIndex = precursorIndex\n\n    this._super({owner: owner, opacity: this.maxOpacity})\n  },\n\n  createShapeElement: function () {\n    let shape = this._super()\n\n    shape.attr({\"cursor\": \"pointer\"})\n\n    return shape\n  },\n\n  /**\n   *\n   * Set the alpha blending of this figure.\n   *\n   * @param {Number} percent Value between [0..1].\n   * @template\n   **/\n  setAlpha: function (percent) {\n    this._super(Math.min(this.maxOpacity, Math.max(0, parseFloat(percent))))\n\n    return this\n  },\n\n  /**\n   *\n   * Called when a user clicks on the element\n   *\n   * @template\n   */\n  onClick: function () {\n    let cmd = new draw2d.command.CommandAddVertex(this.owner, this.precursorIndex + 1, this.getAbsoluteX() + this.getWidth() / 2, this.getAbsoluteY() + this.getHeight() / 2)\n    this.getCanvas().getCommandStack().execute(cmd)\n  },\n\n  /**\n   * Called if the drag and drop action begins. You can return [false] if you\n   * want avoid the that the figure can be move.\n   *\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @type {Boolean}\n   **/\n  onDragStart: function (x, y, shiftKey, ctrlKey) {\n    return true\n  },\n\n  /**\n   *\n   * Called from the framework during a drag&drop operation\n   *\n   * @param {Number} dx the x difference between the start of the drag drop operation and now\n   * @param {Number} dy the y difference between the start of the drag drop operation and now\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @returns {Boolean}\n   **/\n  onDrag: function (dx, dy, dx2, dy2) {\n    return true\n  },\n\n  /**\n   *  Called after a drag and drop action.<br>\n   *        Sub classes can override this method to implement additional stuff. Don't forget to call the super implementation via <code>this._super();</code>\n   *\n   * @param {Number} x the x-coordinate of the mouse event\n   * @param {Number} y the y-coordinate of the mouse event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   *\n   * @returns {Boolean}\n   */\n  onDragEnd: function (x, y, shiftKey, ctrlKey) {\n    // fire an event\n    // @since 5.3.3\n    this.fireEvent(\"dragend\", {x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n\n    return true\n  },\n\n\n  /**\n   *\n   * Controls the location of the resize handle\n   *\n   * @template\n   **/\n  relocate: function () {\n    let p1 = this.owner.getVertices().get(this.precursorIndex)\n    let p2 = this.owner.getVertices().get(this.precursorIndex + 1)\n\n    this.setPosition(\n      ((p2.x - p1.x) / 2 + p1.x - this.getWidth() / 2),\n      ((p2.y - p1.y) / 2 + p1.y - this.getHeight() / 2)\n    )\n  }\n\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Simple Image shape.\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.node.Node\n */\ndraw2d.shape.basic.Image = draw2d.shape.node.Node.extend(\n  /** @lends draw2d.shape.basic.Image.prototype */\n  {\n\n  NAME: \"draw2d.shape.basic.Image\",\n\n  /**\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(\n      attr,\n      {\n        // @attr {String} path the image path (absolute or relative) of the shape */\n        path: this.setPath,\n        ...setter\n      },\n      {\n        path: this.getPath,\n        ...getter\n      })\n  },\n\n\n  /**\n   * \n   * Set the image path attribute of the Image shape and repaint them.\n   * The path can be relative or absolute\n   *\n   * @param path\n   * @since 2.8.0\n   */\n  setPath: function (path) {\n    this.path = path\n\n    this.shape?.attr({src: this.path})\n    this.fireEvent(\"change:path\", {value: this.path})\n\n    return this\n  },\n\n  /**\n   * \n   * Return the image path attribute of the shape.\n   *\n   * @returns {String}\n   * @since 2.8.0\n   */\n  getPath: function () {\n    return this.path\n  },\n\n  /**\n   * @inheritdoc\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return this\n    }\n\n    attributes ??= {}\n\n    attributes.x = this.getAbsoluteX()\n    attributes.y = this.getAbsoluteY()\n    attributes.width = this.getWidth()\n    attributes.height = this.getHeight()\n    attributes.src = this.path\n\n    // propagate the width/height and the display:inline-block as CSS attribute as well because Chrome\n    // did some \"flickering\" in some versions and sometimes the image disappear complete\n    $(this.shape.node).css({display: \"inline-block\", \"width\": attributes.width, \"height\": attributes.height})\n\n    this._super(attributes)\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  createShapeElement: function () {\n    return this.canvas.paper.image(this.path, this.getX(), this.getY(), this.getWidth(), this.getHeight())\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getPersistentAttributes: function () {\n    return {\n      ...this._super(),\n      path: this.path\n    }\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n    if (typeof memento.path !== \"undefined\") {\n      this.setPath(memento.path)\n    }\n  }\n\n})\n\n","import draw2d from '../../packages'\nimport jsonUtil from '../../util/JSONUtil'\n\n/**\n * @class\n * Implements a simple text label.\n *\n *\n * @example\n *\n *    let shape =  new draw2d.shape.basic.Label({text:\"This is a simple label\", x:40, y:10});\n *\n *    canvas.add(shape);\n *\n * @author Andreas Herz\n * @extends draw2d.SetFigure\n */\ndraw2d.shape.basic.Label = draw2d.SetFigure.extend(\n  /** @lends draw2d.shape.basic.Label.prototype */\n  {\n\n    NAME: \"draw2d.shape.basic.Label\",\n\n    FONT_FALLBACK: {\n      'Georgia': 'Georgia, serif',\n      'Palatino Linotype': '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif',\n      'Times New Roman': '\"Times New Roman\", Times, serif',\n      'Arial': 'Arial, Helvetica, sans-serif',\n      'Arial Black': '\"Arial Black\", Gadget, sans-serif',\n      'Comic Sans MS': '\"Comic Sans MS\", cursive, sans-serif',\n      'Impact': 'Impact, Charcoal, sans-serif',\n      'Lucida Sans Unicode': '\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif',\n      'Tahoma, Geneva': 'Tahoma, Geneva, sans-seri',\n      'Trebuchet MS': '\"Trebuchet MS\", Helvetica, sans-serif',\n      'Verdana': 'Verdana, Geneva, sans-serif',\n      'Courier New': '\"Courier New\", Courier, monospace',\n      'Lucida Console': '\"Lucida Console\", Monaco, monospace'\n    },\n\n\n    /**\n     * Creates a new text element.\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function (attr, setter, getter) {\n\n      this.text = \"\"\n      // for performance reasons\n      //\n      this.cachedWidth = null\n      this.cachedHeight = null\n      this.cachedMinWidth = null\n      this.cachedMinHeight = null\n\n      // appearance of the shape\n      //\n      this.fontSize = 12\n      this.fontColor = new draw2d.util.Color(\"#080808\")\n      this.fontFamily = null\n      this.padding = {top: 4, right: 4, bottom: 4, left: 4}\n\n      this.outlineStroke = 0\n      this.outlineColor = new draw2d.util.Color(null)\n\n      this.bold = false\n\n      // behavior of the shape\n      //\n      this.editor = null\n\n      this._super(\n        {stroke: 1, width: 1, height: 1, resizeable: false, ...attr},\n        {\n          // @attr {String} text the text to show */\n          text: this.setText,\n          // @attr {String} set the editor to use see {@link draw2d.ui.LabelEditor} */\n          editor: this.installEditor,\n          // @attr {Number} outlineStroke the line width of the text to draw. Fill color and outline of the text can be different. */\n          outlineStroke: this.setOutlineStroke,\n          // @attr {String|draw2d.util.Color} outlineColor the outline color of the text */\n          outlineColor: this.setOutlineColor,\n          // @attr {String} fontFamily the font to use*/\n          fontFamily: this.setFontFamily,\n          // @attr {Number} fontSize the font size to use */\n          fontSize: this.setFontSize,\n          // @attr {String|draw2d.util.Color} fontColor the font color */\n          fontColor: this.setFontColor,\n          // @attr {Number} padding the padding in pixel around the text */\n          padding: this.setPadding,\n          // @attr {Boolean} bold indicator if bold text should be used*/\n          bold: this.setBold,\n          ...setter},\n        {\n          text: this.getText,\n          outlineStroke: this.getOutlineStroke,\n          outlineColor: this.getOutlineColor,\n          fontFamily: this.getFontFamily,\n          fontSize: this.getFontSize,\n          fontColor: this.getFontColor,\n          padding: this.getPadding,\n          bold: this.isBold,\n          ...getter\n        }\n      )\n\n      this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy())\n      // some performance improvements\n      this.lastAppliedLabelRotation = \"\"\n      this.lastAppliedTextAttributes = {}\n    },\n\n    /**\n     *\n     * Creates the shape object for a text node.\n     *\n     * @private\n     **/\n    createSet: function () {\n      return this.canvas.paper.set([this.canvas.paper.text(0, 0, this.text)])\n    },\n\n    /**\n     *\n     * Set the canvas element of this figures.\n     *\n     * @param {draw2d.Canvas} canvas the new parent of the figure or null\n     * @private\n     */\n    setCanvas: function (canvas) {\n      this.clearCache()\n      this._super(canvas)\n      this.clearCache()\n    },\n\n    /**\n     *\n     * Trigger the repaint of the element and transport all style properties to the visual representation.<br>\n     * Called by the framework.\n     *\n     * @private\n     **/\n    repaint: function (attributes) {\n      if (this.repaintBlocked === true || this.shape === null || (this.parent && this.parent.repaintBlocked === true)) {\n        return\n      }\n\n      // style the label\n      let lattr = this.calculateTextAttr()\n      lattr.text = this.text\n\n      let attrDiff = jsonUtil.flatDiff(lattr, this.lastAppliedTextAttributes)\n      this.lastAppliedTextAttributes = lattr\n\n      // the two \"attr\" calls takes 2/3 of the complete method call (chrome performance check).\n      // now we check if any changes happens and call this method only if necessary.\n      if (Object.getOwnPropertyNames(attrDiff).length > 0) {\n        this.svgNodes.attr(lattr)\n        // set of the x/y must be done AFTER the font-size and bold has been set.\n        // Reason: the getBBox method needs the font attributes for calculation\n        this.svgNodes.attr({\n          x: (this.padding.left + this.stroke),\n          y: (this.svgNodes.getBBox(true).height / 2 + this.padding.top + this.getStroke())\n        })\n      }\n      this._super(attributes)\n    },\n\n\n    /**\n     *\n     * @private\n     */\n    calculateTextAttr: function () {\n      let lattr = {\n        \"text-anchor\": \"start\",\n        \"font-size\": this.fontSize,\n        \"font-weight\": (this.bold === true) ? \"bold\" : \"normal\",\n        fill: this.fontColor.rgba(),\n        stroke: this.outlineColor.rgba(),\n        \"stroke-width\": this.outlineStroke\n      }\n      if (this.fontFamily !== null) {\n        lattr[\"font-family\"] = this.fontFamily\n      }\n      return lattr\n    },\n\n    /**\n     * @private\n     * @returns {this}\n     */\n    applyTransformation: function () {\n      let ts = \"R\" + this.rotationAngle\n      this.shape.transform(ts)\n      this.lastAppliedLabelRotation = ts\n\n      this.svgNodes.transform(\n        \"R\" + this.rotationAngle +\n        \"T\" + this.getAbsoluteX() + \",\" + this.getAbsoluteY())\n\n      return this\n    },\n\n\n    /**\n     *\n     * Set the new font size in [pt].\n     *\n     * @returns {this}\n     * @param {Number} size The new font size in <code>pt</code>\n     **/\n    setFontSize: function (size) {\n      this.clearCache()\n      this.fontSize = size\n\n      this.repaint()\n\n      this.fireEvent(\"change:fontSize\", {value: this.fontSize})\n      this.fireEvent(\"resize\")\n\n      // Update the resize handles if the user change the position of the element via an API call.\n      //\n      this.editPolicy.each( (i, e) =>{\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.moved(this.canvas, this)\n        }\n      })\n\n      return this\n    },\n\n    /**\n     *\n     * Return the current used font size in px.\n     *\n     * @returns {Number}\n     * @since 4.0.1\n     */\n    getFontSize: function () {\n      return this.fontSize\n    },\n\n\n    /**\n     *\n     * Set the label to <b>bold</b> or <b>normal</b> font weight.\n     *\n     * @param {Boolean} bold The bold flag for the label\n     * @since 2.4.1\n     * @returns {this}\n     **/\n    setBold: function (bold) {\n      this.clearCache()\n      this.bold = bold\n      this.repaint()\n\n      this.fireEvent(\"change:bold\", {value: this.bold})\n      this.fireEvent(\"resize\")\n\n      // Update the resize handles if the user change the position of the element via an API call.\n      //\n      this.editPolicy.each((i, e) =>{\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.moved(this.canvas, this)\n        }\n      })\n\n      return this\n    },\n\n    /**\n     *\n     * Return the \"bold\" attribute of the label\n     *\n     * @since 5.0.0\n     * @returns {Boolean}\n     */\n    isBold: function () {\n      return this.bold\n    },\n\n    /**\n     *\n     * Set the outline color of the font.\n     *\n     * @param {draw2d.util.Color/String} color The new color of the line.\n     * @since 4.2.1\n     * @returns {this}\n     **/\n    setOutlineColor: function (color) {\n      this.outlineColor = new draw2d.util.Color(color)\n      this.repaint()\n      this.fireEvent(\"change:outlineColor\", {value: this.outlineColor})\n\n      return this\n    },\n\n    /**\n     *\n     * The outline color of the text\n     *\n     * @returns {draw2d.util.Color}\n     * @since 4.2.1\n     */\n    getOutlineColor: function () {\n      return this.outlineColor\n    },\n\n    /**\n     *\n     * Set the stroke of the text to use.\n     *\n     * @param {Number} w The new line width of the figure\n     * @since 4.2.1\n     * @returns {this}\n     **/\n    setOutlineStroke: function (w) {\n      this.outlineStroke = w\n      this.repaint()\n      this.fireEvent(\"change:outlineStroke\", {value: this.outlineStroke})\n\n      return this\n    },\n\n    /**\n     *\n     * The used outline line width.\n     *\n     * @type {Number}\n     * @since 4.2.1\n     **/\n    getOutlineStroke: function () {\n      return this.outlineStroke\n    },\n\n    /**\n     *\n     * Set the color of the font.\n     *\n     * @param {draw2d.util.Color|String} color The new color of the line.\n     * @returns {this}\n     **/\n    setFontColor: function (color) {\n      this.fontColor = new draw2d.util.Color(color)\n      this.repaint()\n      this.fireEvent(\"change:fontColor\", {value: this.fontColor})\n\n      return this\n    },\n\n    /**\n     *\n     * The current used font color\n     *\n     * @returns {draw2d.util.Color}\n     */\n    getFontColor: function () {\n      return this.fontColor\n    },\n\n    /**\n     *\n     * Set the padding of the element\n     *\n     *     // Alternatively you can use the attr method:\n     *     //\n     *     // set the padding for top,left,bottom,right in one call\n     *     figure.attr({\n     *       padding: 3\n     *     });\n     *\n     *     // update the padding left and top\n     *     figure.attr({\n     *       padding: {left:3, top:30}\n     *     });\n     *\n     * @param {Number|Object} padding The new padding\n     * @returns {this}\n     **/\n    setPadding: function (padding) {\n      this.clearCache()\n      if (typeof padding === \"number\") {\n        this.padding = {top: padding, right: padding, bottom: padding, left: padding}\n      } else {\n        this.padding = {...this.padding, ...padding}\n      }\n      this.repaint()\n      this.fireEvent(\"change:padding\", {value: this.padding})\n\n      return this\n    },\n\n\n    /**\n     *\n     * Get the padding of the element.\n     *\n     * @since 4.0.1\n     **/\n    getPadding: function () {\n      return this.padding\n    },\n\n    /**\n     *\n     * Set the font family to use. If you use the shown font names the typical fallback\n     * font are installed as well.\n     *\n     * <b>Serif Fonts</b>\n     * <ul>\n     *  <li><span style=\"font-family:'Georgia'\">Georgia</span></li>\n     *  <li><span style=\"font-family:'Palatino Linotype'\">Palatino Linotype</span></li>\n     *  <li><span style=\"font-family:'Times New Roman'\">Times New Roman</span></li>\n     * </ul>\n     *\n     * <b>Sans-Serif Fonts</b>\n     * <ul>\n     *  <li><span style=\"font-family:'Arial'\">Arial</span></li>\n     *  <li><span style=\"font-family:'Arial Black'\">Arial Black</span></li>\n     *  <li><span style=\"font-family:'Comic Sans MS'\">Comic Sans MS</span></li>\n     *  <li><span style=\"font-family:'Impact, Charcoal'\">Impact, Charcoal</span></li>\n     *  <li><span style=\"font-family:'Lucida Sans Unicode'\">Lucida Sans Unicode</span></li>\n     *  <li><span style=\"font-family:'Tahoma, Geneva'\">Tahoma, Geneva</span></li>\n     *  <li><span style=\"font-family:'Trebuchet MS'\">Trebuchet MS</span> </li>\n     *  <li><span style=\"font-family:'Verdana'\">Verdana</span></li>\n     * </ul>\n     *\n     * <b>Monospace Fonts</b>\n     * <ul>\n     *  <li><span style=\"font-family:'Courier New'\">Courier New</span></li>\n     *  <li><span style=\"font-family:'Lucida Console'\">Lucida Console</span></li>\n     * </ul>\n     *\n     * @param {String} font The font to use\n     * @returns {this}\n     **/\n    setFontFamily: function (font) {\n      this.clearCache()\n\n      // check for fallback\n      //\n      if ((typeof font !== \"undefined\") && font !== null && typeof this.FONT_FALLBACK[font] !== \"undefined\") {\n        font = this.FONT_FALLBACK[font]\n      }\n\n      this.fontFamily = font\n      this.repaint()\n      this.fireEvent(\"change:fontFamily\", {value: this.fontFamily})\n\n      return this\n    },\n\n\n    /**\n     *\n     * Returns the used font family of the label.\n     *\n     * @returns {String}\n     */\n    getFontFamily: function () {\n      return this.fontFamily\n    },\n\n\n    /**\n     *\n     * A Label did have \"autosize\". Do nothing at all.\n     *\n     * @returns {this}\n     **/\n    setDimension: function (w, h) {\n      this.clearCache()\n\n      this._super(w, h)\n\n      return this\n    },\n\n    /**\n     *\n     * clear the internal cache for width/height precalculation\n     * @private\n     */\n    clearCache: function () {\n      this.portRelayoutRequired = true\n      this.cachedMinWidth = null\n      this.cachedMinHeight = null\n      this.cachedWidth = null\n      this.cachedHeight = null\n      this.lastAppliedTextAttributes = {}\n\n      return this\n    },\n\n    /**\n     *\n     * This value is relevant for the interactive resize of the figure.\n     *\n     * @returns {Number} Returns the min. width of this object.\n     */\n    getMinWidth: function () {\n      if (this.shape === null) {\n        return 0\n      }\n\n      this.cachedMinWidth ??= (this.svgNodes.getBBox(true).width + this.padding.left+ this.padding.right + 2*this.getStroke())\n\n      return this.cachedMinWidth\n    },\n\n    /**\n     *\n     * This value is relevant for the interactive resize of the figure.\n     *\n     * @returns {Number} Returns the min. width of this object.\n     */\n    getMinHeight: function () {\n      if (this.shape === null) {\n        return 0\n      }\n      this.cachedMinHeight ??= (this.svgNodes.getBBox(true).height+ this.padding.top+ this.padding.bottom+ 2*this.getStroke())\n\n      return this.cachedMinHeight\n    },\n\n    /**\n     *\n     * Return the calculate width of the set. This calculates the bounding box of all elements.\n     *\n     * @returns {Number} the calculated width of the label\n     **/\n    getWidth: function () {\n      if (this.shape === null) {\n        return 0\n      }\n\n      if (this.cachedWidth === null) {\n        if (this.resizeable === true) {\n          this.cachedWidth = Math.max(this.width, this.getMinWidth())\n        } else {\n          this.cachedWidth = this.getMinWidth()\n        }\n      }\n\n\n      return this.cachedWidth\n    },\n\n    /**\n     *\n     * Return the calculated height of the set. This calculates the bounding box of all elements.\n     *\n     * @returns {Number} the calculated height of the label\n     */\n    getHeight: function () {\n      if (this.shape === null) {\n        return 0\n      }\n\n      this.cachedHeight ??= Math.max(this.height, this.getMinHeight())\n\n      return this.cachedHeight\n    },\n\n    /**\n     *\n     * Set an editor for the label. This can be a dialog or inplace editor for the\n     * Text.<br>\n     * The editor will be activated if you doubleClick on the label.\n     *\n     * @param {draw2d.ui.LabelEditor|String} editor\n     */\n    installEditor: function (editor) {\n      if (typeof editor === \"string\") {\n        editor = eval(\"new \" + editor + \"()\")\n      }\n      this.editor = editor\n\n      return this\n    },\n\n    /**\n     *\n     * Called when a user dbl clicks on the element\n     *\n     */\n    onDoubleClick: function () {\n        this.editor?.start(this)\n    },\n\n\n    /**\n     *\n     * Returns the current text of the label.\n     *\n     * @returns the current display text of the label\n     * @type {String}\n     **/\n    getText: function () {\n      return this.text\n    },\n\n    /**\n     *\n     * Set the text for the label. Use \\n for multiline text.\n     *\n     * @param {String} text The new text for the label.\n     * @returns {this}\n     **/\n    setText: function (text) {\n      this.clearCache()\n      this.text = text\n\n      this.repaint()\n      // Update the resize handles if the user change the position of the element via an API call.\n      //\n      this.editPolicy.each((i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.moved(this.canvas, this)\n        }\n      })\n\n      this.fireEvent(\"resize\")\n      this.fireEvent(\"change:text\", {value: this.text})\n\n      this.parent?.repaint()\n\n      return this\n    },\n\n\n    /**\n     *\n     * Detect whenever the hands over coordinate is inside the figure.\n     * The default implementation is a simple bounding box test.\n     *\n     * @param {Number} iX\n     * @param {Number} iY\n     * @param {Number} [corona]\n     *\n     * @returns {Boolean}\n     */\n    hitTest: function (x, y, corona) {\n\n      // apply a simple bounding box test if the label isn'T rotated\n      //\n      if (this.rotationAngle === 0) {\n        return this._super(x, y, corona)\n      }\n\n      let boundingBox = this.getBoundingBox()\n      if (typeof corona === \"number\") {\n        boundingBox.scale(corona, corona)\n      }\n\n      // rotate the box with the current matrix of the\n      // shape\n      let matrix = this.shape.matrix\n      let points = boundingBox.getVertices()\n      points.each( (i, point) => {\n        point.x = matrix.x(point.x, point.y)\n        point.y = matrix.y(point.x, point.y)\n      })\n\n      let polySides = 4\n\n      let j = polySides - 1\n      let oddNodes = false\n\n      for (let i = 0; i < polySides; i++) {\n        let pi = points.get(i)\n        let pj = points.get(j)\n        if ((pi.y < y && pj.y >= y\n          || pj.y < y && pi.y >= y)\n          && (pi.x <= x || pj.x <= x)) {\n          if (pi.x + (y - pi.y) / (pj.y - pi.y) * (pj.x - pi.x) < x) {\n            oddNodes = !oddNodes\n          }\n        }\n        j = i\n      }\n      return oddNodes\n    },\n\n\n    /**\n     *\n     * Return an objects with all important attributes for XML or JSON serialization\n     *\n     * @returns {Object}\n     */\n    getPersistentAttributes: function () {\n      let memento = this._super()\n\n      memento.text = this.text\n      memento.outlineStroke = this.outlineStroke\n      memento.outlineColor = this.outlineColor.rgba()\n      memento.fontSize = this.fontSize\n      memento.fontColor = this.fontColor.rgba()\n      memento.fontFamily = this.fontFamily\n\n      if (this.editor !== null) {\n        memento.editor = this.editor.NAME\n      }\n      return memento\n    },\n\n    /**\n     *\n     * Apply all attributes from the serialized properties to the shape.\n     * Used during JSON serialisation.\n     *\n     * @param {Object} memento\n     * @returns {this}\n     */\n    setPersistentAttributes: function (memento) {\n      this._super(memento)\n      if (typeof memento.text !== \"undefined\") {\n        this.setText(memento.text)\n      }\n      if (typeof memento.outlineStroke !== \"undefined\") {\n        this.setOutlineStroke(memento.outlineStroke)\n      }\n      if (typeof memento.outlineColor !== \"undefined\") {\n        this.setOutlineColor(memento.outlineColor)\n      }\n      if (typeof memento.fontFamily !== \"undefined\") {\n        this.setFontFamily(memento.fontFamily)\n      }\n      if (typeof memento.fontSize !== \"undefined\") {\n        this.setFontSize(memento.fontSize)\n      }\n      if (typeof memento.fontColor !== \"undefined\") {\n        this.setFontColor(memento.fontColor)\n      }\n\n      if (typeof memento.editor === \"string\") {\n        this.installEditor(eval(\"new \" + memento.editor + \"()\"))\n      }\n\n      return this\n    }\n\n  })\n\n\n\n","import draw2d from '../../packages'\n\n/**\n * @class\n * The base class for all visible elements inside a canvas.\n *\n *\n * @example\n *\n *    // Create the line and modify the start/end after inserting them into\n *    // the canvas\n *    let line1 =  new draw2d.shape.basic.Line({startX:30, startY:30, endX:100, endY:80});\n *\n *    canvas.add(line1);\n *\n *    // Create the line with a given start/end coordinate in the constructor\n *    //\n *    let line2 = new draw2d.shape.basic.Line({\n *          startX:20,\n *          startY:80,\n *          endX:200,\n *          endY:150,\n *          stroke:3,\n *          color:\"#1d1dff\"\n *     });\n *    canvas.add(line2);\n *\n * @author Andreas Herz\n * @extends draw2d.Figure\n */\ndraw2d.shape.basic.Line = draw2d.Figure.extend(\n  /** @lends draw2d.shape.basic.Line.prototype */\n  {\n\n  NAME: \"draw2d.shape.basic.Line\",\n\n  DEFAULT_COLOR: new draw2d.util.Color(0, 0, 0),\n\n  /**\n   * Creates a new figure element which are not assigned to any canvas witht he given start and\n   * end coordinate.\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    // click area for the line hit test\n    this.corona = 10\n    this.isGlowing = false\n    this.lineColor = this.DEFAULT_COLOR\n    this.stroke = 1\n    this.outlineStroke = 0\n    this.outlineColor = new draw2d.util.Color(null)\n    this.outlineVisible = false\n\n    this.draggedSegment = null\n\n    this.dasharray = null\n\n    this.start = new draw2d.geo.Point(30, 30)\n    this.end = new draw2d.geo.Point(100, 100)\n\n    this.vertices = new draw2d.util.ArrayList()\n    this.vertices.add(this.start.clone())\n    this.vertices.add(this.end.clone())\n\n    this._super(\n      {\n        deleteable: false,\n        selectable: true,\n        ...attr},\n       {\n        // @attr {Number} start the  coordinates of the start point */\n        start: this.setStartPosition,\n        // @attr {Number} startX the x coordinate of the start point */\n        startX: this.setStartX,\n        // @attr {Number} startY the y coordinate of the start point */\n        startY: this.setStartY,\n        // @attr {Number} end the coordinates of the end point */\n        end: this.setEndPosition,\n        // @attr {Number} endX the x coordinate of the end */\n        endX: this.setEndX,\n        // @attr {Number} endY the y coordinate of the end */\n        endY: this.setEndY,\n        // @attr {Number} vertices the x coordinate of the start point */\n        vertices: this.setVertices,\n        // @attr {String | draw2d.util.Color} outlineColor the outline color of the line */\n        outlineColor: this.setOutlineColor,\n        // @attr {Number} outlineStroke the line width of the outline */\n        outlineStroke: this.setOutlineStroke,\n        // @attr {String|draw2d.util.Color} color the color of the line */\n        color: this.setColor,\n        // @attr {Number} stroke the line width of the color */\n        stroke: this.setStroke,\n        corona: this.setCorona,\n        // @attr {String} dasharray the line pattern see {@link draw2d.shape.basic.Line#setDashArray} for more information*/\n        dasharray: this.setDashArray,\n        // @attr {Boolean} glow the glow flag for the shape. The representation of the \"glow\" depends on the shape */\n        glow: this.setGlow,\n        ...setter},\n\n      {\n        start: this.getStartPosition,\n        end: this.getEndPosition,\n        outlineColor: this.getOutlineColor,\n        outlineStroke: this.getOutlineStroke,\n        stroke: this.getStroke,\n        corona: this.getCorona,\n        color: this.getColor,\n        dasharray: this.getDashArray,\n        vertices: this.getVertices,\n        ...getter})\n\n    // some router installs a edit policy. In this case we want delete them\n    //\n    if (this.editPolicy.getSize() === 0) {\n      this.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy())\n    }\n  },\n\n  /**\n   *\n   * Set the outline color of the line.\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr({\n   *       outlineColor: color\n   *     });\n   *\n   * @param {draw2d.util.Color/String} color The new color of the line.\n   * @since 4.2.1\n   **/\n  setOutlineColor: function (color) {\n    this.outlineColor = new draw2d.util.Color(color)\n    this.repaint()\n    this.fireEvent(\"change:outlineColor\", {value: this.outlineColor})\n\n    return this\n  },\n\n  /**\n   *\n   * The outline color of the text\n   *\n   * @returns {draw2d.util.Color}\n   * @since 4.2.1\n   */\n  getOutlineColor: function () {\n    return this.outlineColor\n  },\n\n  /**\n   *\n   * Set the outline stroke of the line to use.\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr({\n   *       outlineStroke: w\n   *     });\n   *\n   * @param {Number} w The new outline width of the line\n   * @since 4.2.1\n   **/\n  setOutlineStroke: function (w) {\n    this.outlineStroke = w\n    this.repaint()\n    this.fireEvent(\"change:outlineStroke\", {value: this.outlineStroke})\n\n    return this\n  },\n\n  /**\n   *\n   * The used outline line width.\n   *\n   * @returns {Number}\n   * @since 4.2.1\n   **/\n  getOutlineStroke: function () {\n    return this.outlineStroke\n  },\n\n  /**\n   *\n   * Called if the drag and drop action begins. You can return [false] if you\n   * want avoid that the figure can be move.\n   *\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   *\n   * @returns {Boolean} true if the figure accepts dragging\n   **/\n  onDragStart: function (x, y, shiftKey, ctrlKey, isFaked) {\n    let result = this._super(x, y, shiftKey, ctrlKey)\n\n    if (result === true && isFaked !== true) {\n      this.draggedSegment = {index: 0, start: this.start, end: this.end}\n    }\n    return result\n  },\n\n  /**\n   *\n   * Don't call them manually. This will be done by the framework.<br>\n   * Will be called if the object are moved via drag and drop.\n   * Sub classes can override this method to implement additional stuff. Don't forget to call\n   * the super implementation via <code>this._super(dx, dy, dx2, dy2);</code>\n   * @private\n   * @param {Number} dx the x difference between the start of the drag drop operation and now\n   * @param {Number} dy the y difference between the start of the drag drop operation and now\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   **/\n  onDrag: function (dx, dy, dx2, dy2) {\n    if (this.command === null) {\n      return\n    }\n\n    this.vertices.each(function (i, e) {\n      e.translate(dx2, dy2)\n    })\n    this.command.updateVertices(this.vertices.clone())\n\n    // start/end are separate draw2d.geo.Point objects. Required for routing and determining if a node is dragged away\n    // from the connection. In this case we must modify the start/end by hand\n    this.start.translate(dx2, dy2)\n    this.end.translate(dx2, dy2)\n\n\n    this.svgPathString = null\n    this._super(dx, dy, dx2, dy2)\n  },\n\n  /**\n   *\n   * @param {Number} x the x-coordinate of the mouse event\n   * @param {Number} y the y-coordinate of the mouse event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onDragEnd: function (x, y, shiftKey, ctrlKey) {\n    // Element ist zwar schon an seine Position, das Command muss aber trotzdem\n    // in dem CommandStack gelegt werden damit das Undo funktioniert.\n    //\n    this.isInDragDrop = false\n    this.draggedSegment = null\n\n    if (this.command === null) {\n      return\n    }\n\n    this.canvas.getCommandStack().execute(this.command)\n    this.command = null\n    this.isMoving = false\n\n    // notify all installed policies\n    //\n    this.editPolicy.each( (i, e) => {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.onDragEnd(this.canvas, this, x, y, shiftKey, ctrlKey)\n      }\n    })\n\n    // inform all other listener\n    this.fireEvent(\"move\", {figure: this, dx: 0, dy: 0})\n\n    // fire an event\n    // @since 5.3.3\n    this.fireEvent(\"dragend\", {x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n\n  },\n\n  /**\n   *\n   * Set the position of the object.\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr({\n   *       x: x,\n   *       y: y\n   *     });\n   *\n   * @param {Number|draw2d.geo.Point} x The new x coordinate of the figure or the x/y coordinate if it is an draw2d.geo.Point\n   * @param {Number} [y] The new y coordinate of the figure\n   **/\n  setPosition: function (x, y) {\n    if (typeof x === \"undefined\") {\n      debugger\n    }\n\n    // get the top left corner of the Line\n    let topLeft = {x: this.getX(), y: this.getY()}\n    let diff = {x:0 , y:0}\n\n    if (x instanceof draw2d.geo.Point) {\n      diff.x = x.x - topLeft.x\n      diff.y = x.y - topLeft.y\n    } else {\n      diff.x = x - topLeft.x\n      diff.y = y - topLeft.y\n    }\n    this.translate(diff.x, diff.y)\n  },\n\n  /**\n   *\n   * Called when a user clicks on the element.\n   *\n   *     // Alternatively you can register for this event with\n   *     figure.on(\"click\", function(emitterFigure){\n   *         alert(\"clicked\");\n   *     });\n   *\n   * @template\n   * @since 4.0.0\n   */\n  onClick: function () {\n  },\n\n  /**\n   *\n   * Set the line style for this object.\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr({\n   *       dasharray: dashPattern\n   *     });\n   *\n   * @param {String} dashPattern Can be one of this [\"\", \"-\", \".\", \"-.\", \"-..\", \". \", \"- \", \"--\", \"- .\", \"--.\", \"--..\"]\n   */\n  setDashArray: function (dashPattern) {\n    this.dasharray = dashPattern\n    this.repaint()\n\n    this.fireEvent(\"change:dashArray\", {value: this.dasharray})\n\n    return this\n  },\n\n  /**\n   *\n   * Get the line style for this object.\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr(\"dasharray\");\n   *\n   * @since 5.1.0\n   */\n  getDashArray: function () {\n    return this.dasharray\n  },\n\n\n\n  /**\n   *\n   * Called by the framework. Don't call them manually.\n   *\n   * @private\n   **/\n  createShapeElement: function () {\n    let set = this.canvas.paper.set()\n\n    // the drop shadow or border line\n    set.push(this.canvas.paper.path(\"M\" + this.start.x + \" \" + this.start.y + \"L\" + this.end.x + \" \" + this.end.y))\n    // the main path\n    set.push(this.canvas.paper.path(\"M\" + this.start.x + \" \" + this.start.y + \"L\" + this.end.x + \" \" + this.end.y))\n    set.node = set.items[1].node\n\n    // indicate that the outline is visible at the moment\n    // the repaint update the status correct and set the attributes for\n    // the first time\n    this.outlineVisible = true//this.outlineStroke>0;\n\n    return set\n  },\n\n  /**\n   * @inheritdoc\n   *\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    // don't override existing values\n    //\n    if (typeof attributes === \"undefined\") {\n      attributes = {\n        \"stroke\": this.lineColor.rgba(),\n        \"stroke-width\": this.stroke,\n        \"path\": [\"M\", this.start.x, this.start.y, \"L\", this.end.x, this.end.y].join(\" \")\n      }\n    }\n    else {\n      // may a router has calculate another path. don't override them.\n      if (typeof attributes.path === \"undefined\") {\n        attributes.path = [\"M\", this.start.x, this.start.y, \"L\", this.end.x, this.end.y].join(\" \")\n      }\n      attributes.stroke??=this.lineColor.rgba()\n      attributes[\"stroke-width\"]??=this.stroke\n    }\n\n    attributes[\"stroke-dasharray\"]??=this.dasharray\n    this._super(attributes)\n\n    if (this.outlineStroke > 0) {\n      this.shape.items[0].attr({\n        \"stroke-width\": (this.outlineStroke + this.stroke),\n        \"stroke\": this.outlineColor.rgba()\n      })\n      if (this.outlineVisible === false)\n        this.shape.items[0].show()\n      this.outlineVisible = true\n    }\n    else if (this.outlineVisible === true) {\n      // reset them once\n      this.shape.items[0].attr({\"stroke-width\": 0, \"stroke\": \"none\"})\n      this.shape.items[0].hide()\n      this.outlineVisible = false\n    }\n  },\n\n  /**\n   *\n   * Moves the element to the background. Additional\n   * the internal model changed as well.\n   *\n   * @since 4.7.2\n   */\n  toBack: function (figure) {\n    this._super(figure)\n\n    if (this.outlineVisible === true) {\n      this.shape.items[0].insertBefore(this.shape.items[1])\n    }\n\n    return this\n  },\n\n\n  /**\n   *\n   * Highlight the element or remove the highlighting\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr({\n   *       glow: flag\n   *     });\n   *\n   * @param {Boolean} flag indicates glow/noGlow\n   * @template\n   */\n  setGlow: function (flag) {\n    if (this.isGlowing === flag) {\n      return\n    }\n\n    if (flag === true) {\n      // store old values for restore\n      this._lineColor = this.lineColor\n      this._stroke = this.stroke\n\n      this.setColor(new draw2d.util.Color(\"#3f72bf\"))\n      this.setStroke((this.stroke * 4) | 0)\n    }\n    else {\n      this.setColor(this._lineColor)\n      this.setStroke(this._stroke)\n    }\n\n    this.isGlowing = flag\n\n    return this\n  },\n\n\n  /**\n   * You can't drag&drop the resize handles if the line not resizeable.\n   * @returns boolean\n   **/\n  isResizeable: function () {\n    return true\n  },\n\n\n  /**\n   * Set the line width. This enforce a repaint of the line.\n   * This method fires a <i>document dirty</i> event.\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr({\n   *       stroke: w\n   *     });\n   *\n   * @param {Number} w The new line width of the figure.\n   **/\n  setStroke: function (w) {\n    this.stroke = parseFloat(w)\n\n    this.repaint()\n    this.fireEvent(\"change:stroke\", {value: this.stroke})\n\n    return this\n  },\n\n\n  /**\n   *\n   * The used line width.\n   *\n   * @returns {Number}\n   **/\n  getStroke: function () {\n    return this.stroke\n  },\n\n\n\n    /**\n     *  click area for the line hit test.\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       corona: w\n     *     });\n     *\n     * @param {Number} w The new click hit offset\n     **/\n    setCorona: function (w) {\n      this.corona = parseFloat(w)\n      return this\n    },\n\n\n    /**\n     *\n     * The used corona hitTest area.\n     *\n     * @returns {Number}\n     **/\n    getCorona: function () {\n      return this.corona\n    },\n\n  /**\n   *\n   * Set the color of the line.\n   * This method fires a <i>document dirty</i> event.\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr({\n   *       color: color\n   *     });\n   *\n   * @param {draw2d.util.Color|String} color The new color of the line.\n   **/\n  setColor: function (color) {\n    this.lineColor = new draw2d.util.Color(color)\n    this.repaint()\n    this.fireEvent(\"change:color\", {value: this.lineColor})\n\n    return this\n  },\n\n  /**\n   *\n   * Return the current paint color.\n   *\n   * @returns {draw2d.util.Color} The paint color of the line.\n   **/\n  getColor: function () {\n    return this.lineColor\n  },\n\n  /**\n   *\n   * Translate the line with the given x/y offset.\n   *\n   * @param {Number} dx The new x translate offset\n   * @param {Number} dy The new y translate offset\n   * @since 4.1.0\n   **/\n  translate: function (dx, dy) {\n    this.vertices.each(function (i, e) {\n      e.translate(dx, dy)\n    })\n\n    // update start/end if the first or last vertex has been changed\n    //\n    this.start = this.vertices.first().clone()\n    this.end = this.vertices.last().clone()\n\n    let _this = this\n    this.editPolicy.each(function (i, e) {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(_this.canvas, _this)\n      }\n    })\n\n    this.svgPathString = null\n    this.repaint()\n\n    return this\n  },\n\n  /**\n   *\n   * return the bounding box of the line or polygon\n   *\n   * TODO: precalculate or cache this values\n   *\n   * @returns {draw2d.geo.Rectangle}\n   * @since 4.8.2\n   */\n  getBoundingBox: function () {\n    let minX = Math.min(...this.vertices.asArray().map(n => n.x))\n    let minY = Math.min(...this.vertices.asArray().map(n => n.y))\n    let maxX = Math.max(...this.vertices.asArray().map(n => n.x))\n    let maxY = Math.max(...this.vertices.asArray().map(n => n.y))\n    let width = maxX - minX\n    let height = maxY - minY\n\n    return new draw2d.geo.Rectangle(minX, minY, width, height)\n  },\n\n\n  /**\n   *\n   * Set the start point of the line.\n   * This method fires a <i>document dirty</i> event.\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr({\n   *       startX: x,\n   *       startY: y\n   *     });\n   *\n   * @param {Number|draw2d.geo.Point} x the x coordinate of the start point\n   * @param {Number} [y] the y coordinate of the start point\n   **/\n  setStartPosition: function (x, y) {\n    let pos = new draw2d.geo.Point(x, y)\n    if (this.start.equals(pos)) {\n      return this\n    }\n\n    this.start.setPosition(pos)\n    this.vertices.first().setPosition(pos)\n    this.repaint()\n\n    let _this = this\n    this.editPolicy.each(function (i, e) {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(_this.canvas, _this)\n      }\n    })\n    this.fireEvent(\"change:start\", {value: this.start})\n\n    return this\n  },\n  /** @deprecated */\n  setStartPoint: function (x, y) {\n    return this.setStartPosition(x, y)\n  },\n\n  setStartX: function (x) {\n    this.setStartPosition(x, this.start.y)\n  },\n\n  setStartY: function (y) {\n    this.setStartPosition(this.start.x, y)\n  },\n\n  setEndX: function (x) {\n    this.setEndPosition(x, this.end.y)\n  },\n\n  setEndY: function (y) {\n    this.setEndPosition(this.end.x, y)\n  },\n\n  /**\n   * Set the end point of the line.\n   * This method fires a <i>document dirty</i> event.\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr({\n   *       endX: 3,\n   *       endY: 10\n   *     });\n   *\n   *     // or\n   *     figure.attr({\n   *       end: {x:3, y:10}\n   *     });\n   * @param {Number|draw2d.geo.Point} x the x coordinate or a draw2d.geo.Point of the end point\n   * @param {Number} [y] the y coordinate of the end point\n   **/\n  setEndPosition: function (x, y) {\n    let pos = new draw2d.geo.Point(x, y)\n    if (this.end.equals(pos)) {\n      return this\n    }\n\n    this.end.setPosition(pos)\n    this.vertices.last().setPosition(pos)\n    this.repaint()\n\n    this.editPolicy.each((i, e) => {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(this.canvas, this)\n      }\n    })\n\n    this.fireEvent(\"change:end\", {value: this.end})\n\n    return this\n  },\n  /** @deprecated **/\n  setEndPoint: function (x, y) {\n    return this.setEndPosition(x, y)\n  },\n\n  /**\n   *\n   * Return the x coordinate of the start.\n   * @returns {Number}\n   **/\n  getStartX: function () {\n    return this.start.x\n  },\n\n  /**\n   *\n   * Return the y coordinate of the start.\n   *\n   * @returns {Number}\n   **/\n  getStartY: function () {\n    return this.start.y\n  },\n\n  /**\n   *\n   * Return the start point.\n   *\n   * @returns {draw2d.geo.Point}\n   **/\n  getStartPosition: function () {\n    return this.start.clone()\n  },\n  /** @deprecated **/\n  getStartPoint: function () {\n    return this.getStartPosition()\n  },\n\n\n  /**\n   *\n   * Return the x coordinate of the end point\n   *\n   * @returns {Number}\n   **/\n  getEndX: function () {\n    return this.end.x\n  },\n\n  /**\n   *\n   * Return the y coordinate of the end point.\n   *\n   * @returns {Number}\n   **/\n  getEndY: function () {\n    return this.end.y\n  },\n\n  /**\n   *\n   * Return the end point.\n   *\n   * @returns {draw2d.geo.Point}\n   **/\n  getEndPosition: function () {\n    return this.end.clone()\n  },\n  /**\n   * @deprecated use `getEndPosition`\n   * @returns {draw2d.geo.Point}\n   **/\n  getEndPoint: function () {\n    return this.getEndPosition()\n  },\n\n  /**\n   *\n   * The x-offset related to the parent figure or canvas.\n   *\n   * @returns {Number} the x-offset to the parent figure\n   **/\n  getX: function () {\n    return this.getBoundingBox().x\n  },\n\n\n  /**\n   *\n   * The x-offset related to the parent figure or canvas.\n   *\n   * @returns {Number} the x-offset to the parent figure\n   **/\n  getY: function () {\n    return this.getBoundingBox().y\n  },\n\n\n  /**\n   *\n   * Return the Vertex with the given index.\n   *\n   * @param {Number} index the index of the vertex to return\n   */\n  getVertex: function (index) {\n    return this.vertices.get(index)\n  },\n\n\n  /**\n   *\n   * Update the vertex at the give position with the new coordinate\n   *\n   * @param {Number} index the index of the vertex to update\n   * @param {Number|draw2d.geo.Point} x the x coordinate or the draw2d.geo.Point object\n   * @param {Number} [y] the y coordinate or undefined of the second argument is a point\n   *\n   * @since 4.0.0\n   */\n  setVertex: function (index, x, y) {\n    if (x instanceof draw2d.geo.Point) {\n      y = x.y\n      x = x.x\n    }\n\n    let vertex = this.vertices.get(index)\n\n    // invalid point or nothing to do\n    //\n    if (vertex === null || (vertex.x === x && vertex.y === y)) {\n      return\n    }\n\n    vertex.x = parseFloat(x)\n    vertex.y = parseFloat(y)\n\n    // update start/end if the first or last vertex has been changed\n    //\n    this.start = this.vertices.first().clone()\n    this.end = this.vertices.last().clone()\n\n    this.svgPathString = null\n    this.routingRequired = true\n    this.repaint()\n\n    this.editPolicy.each((i, e) => {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(this.canvas, this)\n      }\n    })\n    this.fireEvent(\"change:vertices\", {value: this.vertices})\n\n    return this\n  },\n\n  /**\n   *\n   * Returns the vertices of the connection\n   *\n   * @returns {draw2d.util.ArrayList} an draw2d.util.ArrayList of type draw2d.Point\n   **/\n  getVertices: function () {\n    return this.vertices\n  },\n\n  /**\n   *\n   * Update the vertices of the object. The given array is copied and assigned.\n   *\n   * @param {draw2d.util.ArrayList|Array} vertices the new vertices of the polyline.\n   *\n   * @since 4.0.1\n   */\n  setVertices: function (vertices) {\n\n    // convert json document/array to draw2d ArrayList\n    //\n    if (Array.isArray(vertices)) {\n      this.vertices = new draw2d.util.ArrayList()\n      vertices.forEach(element => {\n        this.vertices.add(new draw2d.geo.Point(element))\n      })\n    }\n    // use the given ArrayList\n    //\n    else if (vertices instanceof draw2d.util.ArrayList) {\n      this.vertices = vertices.clone(true)\n    }\n    else {\n      throw \"invalid argument for Line.setVertices\"\n    }\n\n    // can happen if the given vertices array is empty\n    //\n    if (this.vertices.getSize() > 1) {\n      this.start = this.vertices.first().clone()\n      this.end = this.vertices.last().clone()\n    }\n\n    // update the UI and the segment parts\n    this.svgPathString = null\n    this.repaint()\n\n    // align the SelectionHandles to the new situation\n    // This is a Hack....normally this should be done below and the Line shouldn't know\n    // something about this issue....this is complete a \"EditPolicy\" domain to handle this.\n    if (!this.selectionHandles.isEmpty()) {\n      this.editPolicy.each((i, e) =>{\n        if (e instanceof draw2d.policy.figure.SelectionFeedbackPolicy) {\n          e.onUnselect(this.canvas, this)\n          e.onSelect(this.canvas, this)\n        }\n      })\n    }\n\n    // notify the listener about the changes\n    this.editPolicy.each( (i, e) => {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(this.canvas, this)\n      }\n    })\n\n    this.fireEvent(\"change:vertices\", {value: this.vertices})\n\n    return this\n  },\n\n  /**\n   *\n   * Return the segments of the line with {start:s, end: e} JSON array list\n   *\n   * @returns {draw2d.util.ArrayList}\n   */\n  getSegments: function () {\n    let result = new draw2d.util.ArrayList()\n    result.add({start: this.getStartPosition(), end: this.getEndPosition()})\n\n    return result\n  },\n\n  /**\n   *\n   * Returns the length of the line.\n   *\n   * @returns {Number}\n   **/\n  getLength: function () {\n    return Math.sqrt((this.start.x - this.end.x) * (this.start.x - this.end.x) + (this.start.y - this.end.y) * (this.start.y - this.end.y))\n  },\n\n  /**\n   *\n   * Returns the angle of the line in degree.\n   *\n   * <pre>\n   *                                270°\n   *                              |\n   *                              |\n   *                              |\n   *                              |\n   * 180° -------------------------+------------------------> +X\n   *                              |                        0°\n   *                              |\n   *                              |\n   *                              |\n   *                              V +Y\n   *                             90°\n   * </pre>\n   * @returns {Number}\n   **/\n  getAngle: function () {\n    let length = this.getLength()\n    let angle = -(180 / Math.PI) * Math.asin((this.start.y - this.end.y) / length)\n\n    if (angle < 0) {\n      if (this.end.x < this.start.x) {\n        angle = Math.abs(angle) + 180\n      }\n      else {\n        angle = 360 - Math.abs(angle)\n      }\n    }\n    else {\n      if (this.end.x < this.start.x) {\n        angle = 180 - angle\n      }\n    }\n    return angle\n  },\n\n  /**\n   *\n   * Returns the Command to perform the specified Request or null if the shape want cancel the\n   * operation or it can't operate the command.\n   *\n   * @param {draw2d.command.CommandType} request describes the Command being requested\n   * @returns {draw2d.command.Command} null or a Command\n   * @private\n   **/\n  createCommand: function (request) {\n    if (request.getPolicy() === draw2d.command.CommandType.MOVE) {\n      if (this.isDraggable()) {\n        return new draw2d.command.CommandMoveVertices(this)\n      }\n    }\n\n    if (request.getPolicy() === draw2d.command.CommandType.DELETE) {\n      if (this.isDeleteable()) {\n        return new draw2d.command.CommandDelete(this)\n      }\n    }\n\n    if (request.getPolicy() === draw2d.command.CommandType.MOVE_BASEPOINT) {\n      if (this.isDraggable()) {\n        return new draw2d.command.CommandMoveVertex(this)\n      }\n    }\n\n    return null\n  },\n\n  installEditPolicy: function (policy) {\n    if (!(policy instanceof draw2d.policy.line.LineSelectionFeedbackPolicy) && policy instanceof draw2d.policy.figure.SelectionFeedbackPolicy) {\n      return// silently\n    }\n\n    this._super(policy)\n\n  },\n\n  /**\n   *\n   * Checks if the hands over coordinate close to the line. The 'corona' is considered\n   * for this test. This means the point isn't direct on the line. Is it only close to the\n   * line!\n   *\n   * @param {Number} px the x coordinate of the test point\n   * @param {Number} py the y coordinate of the test point\n   * @returns {Boolean}\n   **/\n  hitTest: function (px, py) {\n    return draw2d.shape.basic.Line.hit(this.corona + this.stroke, this.start.x, this.start.y, this.end.x, this.end.y, px, py)\n  },\n\n  /**\n   *\n   * Returns the projection of the point on the line.\n   *\n   * @param {Number} px the x coordinate of the test point\n   * @param {Number} py the y coordinate of the test point\n   * @returns {draw2d.geo.Point}\n   **/\n  pointProjection: function (px, py) {\n    let pt = new draw2d.geo.Point(px, py)\n    let p1 = this.getStartPosition()\n    let p2 = this.getEndPosition()\n    return draw2d.geo.Line.pointProjection(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y)\n  },\n\n\n  /**\n   *\n   * Returns the point onto the line which has the 'percentage' position onto the line.\n   *\n   * @param {Number} percentage value between [0..1]\n   * @returns {*}\n   */\n  lerp: function (percentage) {\n    let p1 = this.getStartPosition()\n    let p2 = this.getEndPosition()\n    percentage = Math.min(1, Math.max(0, percentage))\n    return new draw2d.geo.Point(p1.x + (p2.x - p1.x) * percentage, p1.y + (p2.y - p1.y) * percentage)\n  },\n\n\n  /**\n   *\n   * Return all intersection points between the given Line.\n   *\n   * @param {draw2d.shape.basic.Line} other\n   * @returns {draw2d.util.ArrayList}\n   */\n  intersection: function (other) {\n    let result = new draw2d.util.ArrayList()\n\n    // empty result. the lines are equal...infinit array\n    if (other === this) {\n      return result\n    }\n\n    let segments1 = this.getSegments()\n    let segments2 = other.getSegments()\n\n    segments1.each(function (i, s1) {\n      segments2.each(function (j, s2) {\n        let p = draw2d.shape.basic.Line.intersection(s1.start, s1.end, s2.start, s2.end)\n        if (p !== null) {\n          result.add(p)\n        }\n      })\n    })\n    return result\n  },\n\n\n  /**\n   *\n   * Return an objects with all important attributes for XML or JSON serialization\n   *\n   * @returns {Object}\n   */\n  getPersistentAttributes: function () {\n    let memento = this._super()\n    delete memento.x\n    delete memento.y\n    delete memento.width\n    delete memento.height\n\n    memento.stroke = this.stroke\n    memento.color = this.getColor().rgba()\n    memento.outlineStroke = this.outlineStroke\n    memento.outlineColor = this.outlineColor.rgba()\n    if (this.dasharray !== null) {\n      memento.dasharray = this.dasharray\n    }\n\n    if (this.editPolicy.getSize() > 0) {\n      memento.policy = this.editPolicy.first().NAME\n    }\n\n    // the attribute \"vertex\" will be overridden by a router if the element is a\n    // \"PolyLine\" instance and has the correct router. Connections mainly ignore this\n    // attribute because the start/end is defined by the ports and the vertices in between are\n    // calculated by a router.\n    memento.vertex = []\n    this.getVertices().each(function (i, e) {\n      memento.vertex.push({x: e.x, y: e.y})\n    })\n\n    return memento\n  },\n\n  /**\n   *\n   * Read all attributes from the serialized properties and transfer them into the shape.\n   *\n   * @param {Object} memento\n   * @returns {this}\n   */\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    if (typeof memento.dasharray === \"string\") {\n      this.dasharray = memento.dasharray\n    }\n    if (typeof memento.stroke !== \"undefined\") {\n      this.setStroke(parseFloat(memento.stroke))\n    }\n    if (typeof memento.color !== \"undefined\") {\n      this.setColor(memento.color)\n    }\n    if (typeof memento.outlineStroke !== \"undefined\") {\n      this.setOutlineStroke(memento.outlineStroke)\n    }\n    if (typeof memento.outlineColor !== \"undefined\") {\n      this.setOutlineColor(memento.outlineColor)\n    }\n    if (typeof memento.policy !== \"undefined\") {\n      try {\n        this.installEditPolicy(eval(\"new \" + memento.policy + \"()\"))\n      }\n      catch (exc) {\n        debug.warn(\"Unable to install edit policy '\" + memento.policy + \"' forced by \" + this.NAME + \".setPersistentAttributes. Using default.\")\n      }\n    }\n\n    // restore the vertex of the connection/line if any are given\n    //\n    // it makes no sense to restore vertices with only zero or one vertex. This\n    // isn't a \"line\" at all.\n    if (Array.isArray(memento.vertex) && memento.vertex.length > 1) {\n      this.setVertices(memento.vertex)\n    }\n\n    return this\n  }\n})\n\n\n/**\n * see: http://en.wikipedia.org/wiki/Line-line_intersection\n *\n * @param {draw2d.geo.Point} a1\n * @param {draw2d.geo.Point} a2\n * @param {draw2d.geo.Point} b1\n * @param {draw2d.geo.Point} b2\n *\n * @static\n * @private\n * @returns {draw2d.geo.Point}\n */\ndraw2d.shape.basic.Line.intersection = function (a1, a2, b1, b2) {\n  let result = null\n\n  let ua_t = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x)\n  let ub_t = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x)\n  let u_b = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y)\n\n  if (u_b !== 0) {\n    let ua = ua_t / u_b\n    let ub = ub_t / u_b\n\n    if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n      result = new draw2d.geo.Point((a1.x + ua * (a2.x - a1.x)) | 0, (a1.y + ua * (a2.y - a1.y)) | 0)\n\n      // determine if the lines are crossing or just touching\n      //\n      result.justTouching = (0 === ua || ua === 1 || 0 === ub || ub === 1)\n    }\n  }\n\n  return result\n}\n\n\n/**\n * Static util function to determine is a point(px,py) on the line(x1,y1,x2,y2)\n * A simple hit test.\n *\n * @returns {Boolean}\n * @static\n * @private\n * @param {Number} coronaWidth the accepted corona for the hit test\n * @param {Number} X1 x coordinate of the start point of the line\n * @param {Number} Y1 y coordinate of the start point of the line\n * @param {Number} X2 x coordinate of the end point of the line\n * @param {Number} Y2 y coordinate of the end point of the line\n * @param {Number} px x coordinate of the point to test\n * @param {Number} py y coordinate of the point to test\n **/\ndraw2d.shape.basic.Line.hit = function (coronaWidth, X1, Y1, X2, Y2, px, py) {\n  return draw2d.geo.Line.distance(X1, Y1, X2, Y2, px, py) < coronaWidth\n}\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Selection handle for connections and normal lines.\n *\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.LineResizeHandle\n */\ndraw2d.shape.basic.LineEndResizeHandle = draw2d.shape.basic.LineResizeHandle.extend(\n  /** @lends draw2d.shape.basic.LineEndResizeHandle.prototype */\n  {\n\n  NAME: \"draw2d.shape.basic.LineEndResizeHandle\",\n\n  /**\n   *\n   */\n  init: function (figure) {\n    this._super({owner: figure, index: figure.getVertices().getSize() - 1})\n  },\n\n\n  /**\n   *\n   * Return the Port assigned to this ResizeHandle if the line is an instance of draw2d.Connection\n   *\n   * @returns {draw2d.Port}\n   */\n  getRelatedPort: function () {\n    if (this.owner instanceof draw2d.Connection) {\n      return this.owner.getTarget()\n    }\n\n    return null\n  },\n\n  /**\n   *\n   * Return the peer Port assigned to this ResizeHandle if the line is an instance of draw2d.Connection\n   *\n   * @returns {draw2d.Port}\n   */\n  getOppositePort: function () {\n    if (this.owner instanceof draw2d.Connection) {\n      return this.owner.getSource()\n    }\n\n    return null\n  },\n\n\n  /**\n   *\n   * Called from the framework during a drag&drop operation\n   *\n   * @param {Number} dx the x difference between the start of the drag drop operation and now\n   * @param {Number} dy the y difference between the start of the drag drop operation and now\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @returns {Boolean}\n   * @private\n   **/\n  onDrag: function (dx, dy, dx2, dy2) {\n    this._super(dx, dy, dx2, dy2)\n\n    let objPos = this.owner.getEndPoint().clone()\n    objPos.translate(dx2, dy2)\n\n    if (this.command !== null) {\n      this.command.updatePosition(objPos)\n    }\n\n    this.owner.setEndPoint(objPos)\n\n    this.owner.isMoving = true\n\n    return true\n  },\n\n  /**\n   *\n   * Resizehandle has been drop on a InputPort/OutputPort.\n   *\n   * @param {draw2d.Figure} dropTarget\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @private\n   **/\n  onDrop: function (dropTarget, x, y, shiftKey, ctrlKey) {\n    this.owner.isMoving = false\n\n    if (this.owner instanceof draw2d.Connection && this.command !== null) {\n      this.command.setNewPorts(this.owner.getSource(), dropTarget)\n      this.getCanvas().getCommandStack().execute(this.command)\n    }\n    this.command = null\n  },\n\n  /**\n   *\n   * Controls the location of the resize handle\n   *\n   **/\n  relocate: function () {\n\n    let resizeWidthHalf = this.getWidth() / 2\n    let resizeHeightHalf = this.getHeight() / 2\n\n    let anchor = this.owner.getEndPoint()\n\n    this.setPosition(anchor.x - resizeWidthHalf, anchor.y - resizeHeightHalf)\n\n    return this\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Base class for selection handle for connections and normal lines.\n *\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.basic.Circle\n */\ndraw2d.shape.basic.LineResizeHandle = draw2d.shape.basic.Circle.extend(\n  /** @lends draw2d.shape.basic.LineResizeHandle.prototype */\n  {\n\n  NAME: \"draw2d.shape.basic.LineResizeHandle\",\n\n  /**\n   *\n   */\n  init: function (attr, setter, getter) {\n\n    this.zoomCallback = () => {\n      this.attr({\n        width: this.origWidth * this.getCanvas().getZoom(),\n        height: this.origHeight * this.getCanvas().getZoom(),\n        stroke: this.origStroke * this.getCanvas().getZoom()\n      })\n      // size of the ResizeHandle has changed. Force a reposition of handle\n      //\n      if (!this.blockEvent)\n        this.owner.fireEvent(\"move\", {})\n    }\n\n    this._super(\n     {\n        bgColor: \"#5bcaff\",\n        stroke: 1,\n        width: 10,\n        height: 10,\n        minWidth: 0.3,\n        minHeight: 0.3,\n        selectable: false,\n        ...attr},\n      {\n        owner: this.setOwner,\n        index: this.setIndex,\n        ...setter},\n      {\n        owner: this.getOwner,\n        index: this.getIndex,\n        ...getter})\n\n    // required in the SelectionEditPolicy to indicate the type of figure\n    // which the user clicks\n    this.isResizeHandle = true\n    this.currentTarget = null\n\n    this.origWidth = this.width\n    this.origHeight = this.height\n    this.origStroke = this.stroke\n  },\n\n  /**\n   * \n   * Returns the current used SVG as string\n   *\n   * @returns {String}\n   */\n  getOwner: function () {\n    return this.owner\n  },\n\n  setOwner: function (owner) {\n    this.owner = owner\n    return this\n  },\n\n\n  /**\n   * \n   * Returns the index of the selection. In case of a PlyLine the count is dynamic.\n   *\n   * @returns {Number}\n   */\n  getIndex: function () {\n    return this.index\n  },\n\n  setIndex: function (index) {\n    this.index = index\n    return this\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  createShapeElement: function () {\n    let shape = this._super()\n\n    shape.attr({\"cursor\": \"move\"})\n    return shape\n  },\n\n  /**\n   * @inheritdoc\n   **/\n  setBackgroundColor: function (color) {\n    color = new draw2d.util.Color(color)\n\n    this.bgGradient = \"r(.4,.3)\" + color.hash() + \"-\" + color.darker(0.1).hash() + \":60-\" + color.darker(0.2).hash()\n    this._super(color)\n    this.setColor(color.darker(0.3))\n\n    return this\n  },\n\n\n  /**\n   * \n   * Return the port below the ResizeHandle.\n   *\n   * @template\n   * @returns {draw2d.Port}\n   */\n  getRelatedPort: function () {\n    return null\n  },\n\n\n  /**\n   * \n   * Return the port of the other side of the related connection.\n   *\n   * @template\n   * @returns {draw2d.Port}\n   */\n  getOppositePort: function () {\n    return null\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    attributes ??= {}\n\n\n    if (this.bgColor.hash() === \"none\") {\n      attributes.fill = this.bgColor.rgba()\n    }\n    else if (this.getAlpha() < 0.9) {\n      attributes.fill = this.bgColor.rgba()\n    }\n    else {\n      attributes.fill = this.bgGradient\n    }\n\n\n    this._super(attributes)\n  },\n\n  /**\n   * Called if the drag and drop action begins. You can return [false] if you\n   * want avoid the that the figure can be move.\n   *\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @type {Boolean}\n   **/\n  onDragStart: function (x, y, shiftKey, ctrlKey) {\n    this.command = this.owner.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE_BASEPOINT))\n    // no drag&drop allowed if we didn'T have a valid command.\n    // This is one way to send a veto for Connection reconnect\n    if (this.command !== null) {\n      this.command.setIndex(this.index)\n    }\n\n    this.setAlpha(0.2)\n    this.shape.attr({\"cursor\": \"crosshair\"})\n\n    // fire an event\n    // @since 5.3.3\n    this.fireEvent(\"dragstart\", {x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n\n    return true\n  },\n\n\n  /**\n   * \n   * Called from the framework during a drag&drop operation\n   *\n   * @param {Number} dx the x difference between the start of the drag drop operation and now\n   * @param {Number} dy the y difference between the start of the drag drop operation and now\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @returns {Boolean}\n   * @private\n   **/\n  onDrag: function (dx, dy, dx2, dy2) {\n    this.setPosition(this.x + dx2, this.y + dy2)\n\n    let port = this.getOppositePort()\n\n    let target = port !== null ? port.getCanvas().getBestFigure(this.getX(), this.getY(), [this, this.owner]) : null\n\n    // the hovering element has been changed\n    if (target !== this.currentTarget) {\n\n      if (this.currentTarget !== null) {\n        this.currentTarget.onDragLeave(port)\n        this.currentTarget.setGlow(false)\n        this.currentTarget.fireEvent(\"dragLeave\", {draggingElement: port})\n      }\n\n      if (target !== null) {\n        this.currentTarget = target.delegateTarget(port)\n        if (this.currentTarget !== null) {\n          this.currentTarget.setGlow(true)\n          this.currentTarget.onDragEnter(port) // legacy\n          this.currentTarget.fireEvent(\"dragEnter\", {draggingElement: port})\n        }\n      }\n    }\n\n    return true\n  },\n\n  /**\n   *  Called after a drag and drop action.<br>\n   *        Sub classes can override this method to implement additional stuff. Don't forget to call the super implementation via <code>this._super();</code>\n   *\n   * @param {Number} x the x-coordinate of the mouse event\n   * @param {Number} y the y-coordinate of the mouse event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   *\n   * @returns {Boolean}\n   */\n  onDragEnd: function (x, y, shiftKey, ctrlKey) {\n    if (!this.isDraggable()) {\n      return false\n    }\n\n    this.shape.attr({\"cursor\": \"move\"})\n\n    let port = this.getOppositePort()\n    if (port !== null) {\n      if (this.currentTarget !== null) {\n\n        this.onDrop(this.currentTarget, x, y, shiftKey, ctrlKey)\n        this.currentTarget.onDragLeave(port)\n        this.currentTarget.setGlow(false)\n        this.currentTarget.fireEvent(\"dragLeave\", {draggingElement: port})\n        this.currentTarget.onCatch(this, x, y, shiftKey, ctrlKey)\n        this.currentTarget = null\n      }\n    }\n\n    this.owner.isMoving = false\n    // A Connection is stuck to the corresponding ports. So we must reset the position\n    // to the origin port if we doesn't drop the ResizeHandle on a other port.\n    //\n    if (this.owner instanceof draw2d.Connection) {\n      if (this.command !== null) {\n        this.command.cancel()\n      }\n    }\n    //\n    else {\n      // An non draggable resizeHandle doesn't create a move/resize command.\n      // This happens if the selected figure has set \"isResizeable=false\".\n      //\n      if (this.command !== null) {\n        this.getCanvas().getCommandStack().execute(this.command)\n      }\n    }\n    this.command = null\n\n    this.setAlpha(1)\n\n    // fire an event\n    // @since 5.3.3\n    this.fireEvent(\"dragend\", {x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n  },\n\n\n  /**\n   * \n   * Controls the position of the ResizeHandle\n   * Called by the framework.\n   *\n   **/\n  relocate: function () {\n\n    return this\n  },\n\n\n  /**\n   * \n   * The LineResizeHandle didn't support the SnapToHelper feature if the\n   * corresponding object is an Connection. A Connection is always bounded to\n   * Port. In this case it makes no sense to use a Grid or Geometry for snapping.\n   *\n   * @returns {Boolean} return false if the corresponding object didn't support snapTo\n   **/\n  supportsSnapToHelper: function () {\n    if (this.owner instanceof draw2d.Connection) {\n      return false\n    }\n\n    return true\n  },\n\n  /**\n   * \n   * Show the ResizeHandle and add it to the canvas.<br>\n   * Additional bring it in to the front of other figures.\n   *\n   * @param {draw2d.Canvas} canvas the canvas to use\n   * @param {Number} x the x-position\n   * @param {Number} y the y-position\n   **/\n  show: function (canvas, x, y) {\n    if (x)\n      debugger\n    // don't call the parent function. The parent functions make this object selectable/deleteable\n    // and a resize handle can't be deleted.\n    this.setCanvas(canvas)\n    try {\n      this.blockEvent = true\n      this.zoomCallback()\n    }\n    finally {\n      this.blockEvent = false\n    }\n\n    //     this.setPosition(x,y);\n    this.shape.toFront()\n    this.canvas.resizeHandles.add(this)\n  },\n\n  /**\n   * \n   * Hide the resize handle and remove it from the canvas.\n   *\n   **/\n  hide: function () {\n    // don't call the parent function. The parent functions delete this object\n    // and a resize handle shouldn't be deleted.\n    if (this.shape === null) {\n      return\n    }\n\n    this.canvas.resizeHandles.remove(this)\n    this.setCanvas(null)\n  },\n\n\n  setCanvas: function (canvas) {\n\n    if (this.canvas !== null) {\n      this.canvas.off(this.zoomCallback)\n    }\n\n    this._super(canvas)\n\n    if (this.canvas !== null) {\n      this.canvas.on(\"zoom\", this.zoomCallback)\n    }\n  },\n\n  /**\n   * \n   * Override this method and redirect them to the canvas. A ResizeHandle didn't support\n   * Keyboard interaction at the moment.\n   *\n   * @param {Number} keyCode the id of the pressed key\n   * @param {Boolean} ctrl true if the user has pressed the CTRL/STRG key as well.\n   **/\n  onKeyDown: function (keyCode, ctrl) {\n    // don't call the parent function. The parent functions delete this object\n    // and a resize handle can't be deleted.\n    this.canvas.onKeyDown(keyCode, ctrl)\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Selection handle for connections and normal lines.\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.LineResizeHandle\n */\ndraw2d.shape.basic.LineStartResizeHandle = draw2d.shape.basic.LineResizeHandle.extend(\n  /** @lends draw2d.shape.basic.LineStartResizeHandle.prototype */\n  {\n\n  NAME: \"draw2d.shape.basic.LineStartResizeHandle\",\n\n  /**\n   *\n   */\n  init: function (figure) {\n    this._super({owner: figure, index: 0})\n  },\n\n  /**\n   * Returns the Port below the ResizeHandle\n   *\n   * @returns {draw2d.Port}\n   */\n  getRelatedPort: function () {\n    if (this.owner instanceof draw2d.Connection)\n      return this.owner.getSource()\n\n    return null\n  },\n\n  /**\n   * Returns the Port on the opposite side of the ResizeHandle\n   *\n   * @returns {draw2d.Port}\n   */\n  getOppositePort: function () {\n    if (this.owner instanceof draw2d.Connection)\n      return this.owner.getTarget()\n\n    return null\n  },\n\n  /**\n   * \n   * Called from the framework during a drag&drop operation\n   *\n   * @param {Number} dx the x difference between the start of the drag drop operation and now\n   * @param {Number} dy the y difference between the start of the drag drop operation and now\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @returns {Boolean}\n   **/\n  onDrag: function (dx, dy, dx2, dy2) {\n    this._super(dx, dy, dx2, dy2)\n\n    let objPos = this.owner.getStartPoint()\n    objPos.translate(dx2, dy2)\n\n    if (this.command !== null) {\n      this.command.updatePosition(objPos)\n\n    }\n    this.owner.setStartPoint(objPos)\n\n    this.owner.isMoving = true\n\n    return true\n  },\n\n  /**\n   * \n   * Resize handle has been drop on a InputPort/OutputPort.\n   *\n   * @param {draw2d.Port} dropTarget\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   **/\n  onDrop: function (dropTarget, x, y, shiftKey, ctrlKey) {\n    this.owner.isMoving = false\n\n    // The ResizeHandle of a Connection has been dropped on a Port\n    // This will enforce a ReconnectCommand\n    if (this.owner instanceof draw2d.Connection && this.command !== null) {\n      this.command.setNewPorts(dropTarget, this.owner.getTarget())\n      this.getCanvas().getCommandStack().execute(this.command)\n    }\n    this.command = null\n  },\n\n  /**\n   * \n   * Controls the location of the resize handle\n   **/\n  relocate: function () {\n    let resizeWidthHalf = this.getWidth() / 2\n    let resizeHeightHalf = this.getHeight() / 2\n\n    let anchor = this.owner.getStartPoint()\n\n    this.setPosition(anchor.x - resizeWidthHalf, anchor.y - resizeHeightHalf)\n\n    return this\n  }\n})\n","import draw2d from '../../packages'\n\n/**\n * @class\n * Oval figure.\n *\n * @example\n *\n *    let oval =  new draw2d.shape.basic.Oval({width:150, height:100, x:50, y:10});\n *\n *    canvas.add(oval);\n *\n * @author Andreas Herz\n * @extends draw2d.VectorFigure\n */\ndraw2d.shape.basic.Oval = draw2d.VectorFigure.extend(\n  /** @lends draw2d.shape.basic.Oval.prototype */\n  {\n\n    NAME: \"draw2d.shape.basic.Oval\",\n\n    /**\n     *\n     * Creates a new figure element which are not assigned to any canvas.\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function (attr, setter, getter) {\n      this._super(\n        {\n          bgColor: \"#C02B1D\",\n          color: \"#1B1B1B\",\n          ...attr\n        },\n        {\n          center: this.setCenter,\n          ...setter\n        },\n        getter)\n    },\n\n\n    /**\n     * @template\n     **/\n    createShapeElement: function () {\n      let halfW = this.getWidth() / 2\n      let halfH = this.getHeight() / 2\n\n      return this.canvas.paper.ellipse(this.getAbsoluteX() + halfW, this.getAbsoluteY() + halfH, halfW, halfH)\n    },\n\n\n    /**\n    * @inheritdoc\n    */\n    applyTransformation: function applyTransformation() {\n        var ts = \"R\" + this.rotationAngle;\n\n        this.shape.transform(ts);\n\n        return this;\n    },\n\n    /**\n     *\n     * Get the center of the figure\n     *\n     */\n    getCenter: function () {\n      let w2 = this.getWidth() / 2\n      let h2 = this.getHeight() / 2\n\n      return this.getPosition().translated(w2, h2)\n    },\n\n    /**\n     *\n     * Set the center of the figure.\n     *\n     * @param {Number|draw2d.geo.Point} x the new x coordinate of the center or a draw2d.geo.Point object with the center\n     * @param {Number} [y] the y coordinate of the new center of the first argument isn't a draw2d.geo.Point object\n     */\n    setCenter: function (x, y) {\n      let pos = new draw2d.geo.Point(x, y)\n      let w2 = this.getWidth() / 2\n      let h2 = this.getHeight() / 2\n\n      pos.translate(-w2, -h2)\n      this.setPosition(pos)\n\n      this.fireEvent(\"change:center\", {value: {x: x, y: y}})\n\n      return this\n    },\n\n\n    /**\n     * @inheritdoc\n     *\n     * @template\n     **/\n    repaint: function (attributes) {\n      if (this.repaintBlocked === true || this.shape === null) {\n        return\n      }\n\n      attributes ??= {}\n\n\n      // don't override cx/cy if inherited class has set the center already.\n      if (typeof attributes.rx === \"undefined\") {\n        attributes.rx = this.width / 2\n        attributes.ry = this.height / 2\n      }\n\n      // don't override cx/cy if inherited class has set the center already.\n      if (typeof attributes.cx === \"undefined\") {\n        attributes.cx = this.getAbsoluteX() + attributes.rx\n        attributes.cy = this.getAbsoluteY() + attributes.ry\n      }\n\n      this._super(attributes)\n    },\n\n    /**\n     *\n     *\n     *   NOTE: Rotation will need to be added to this function\n     *\n     **/\n    intersectionWithLine: function (a1, a2) {\n      let rx = this.getWidth() / 2\n      let ry = this.getHeight() / 2\n\n      let result = new draw2d.util.ArrayList()\n\n      let origin = new draw2d.geo.Point(a1.x, a1.y)\n      let dir = a2.subtract(a1)\n      let center = new draw2d.geo.Point(this.getAbsoluteX() + rx, this.getAbsoluteY() + ry)\n      let diff = origin.subtract(center)\n      let mDir = new draw2d.geo.Point(dir.x / (rx * rx), dir.y / (ry * ry))\n      let mDiff = new draw2d.geo.Point(diff.x / (rx * rx), diff.y / (ry * ry))\n\n      let a = dir.dot(mDir)\n      let b = dir.dot(mDiff)\n      let c = diff.dot(mDiff) - 1.0\n      let d = b * b - a * c\n\n      if (d < 0) {\n        // \"Outside\"\n      } else if (d > 0) {\n        let root = Math.sqrt(d)\n        let t_a = (-b - root) / a\n        let t_b = (-b + root) / a\n\n        if ((t_a < 0 || 1 < t_a) && (t_b < 0 || 1 < t_b)) {\n          if ((t_a < 0 && t_b < 0) || (t_a > 1 && t_b > 1)) {\n            //\"Outside\";\n          } else {\n            //\"Inside\";\n          }\n        } else {\n          if (0 <= t_a && t_a <= 1)\n            result.add(a1.lerp(a2, t_a))\n          if (0 <= t_b && t_b <= 1)\n            result.add(a1.lerp(a2, t_b))\n        }\n      } else {\n        let t = -b / a\n        if (0 <= t && t <= 1) {\n          result.add(a1.lerp(a2, t))\n        } else {\n          //\"Outside\";\n        }\n      }\n\n      return result\n    }\n\n  })\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A PolyLine is a line with more than 2 points.\n *\n *\n * @example\n *\n *    let line = new draw2d.shape.basic.PolyLine();\n *    line.setVertices([{x:10,y:10},{x:80,y:70},{x:100,y:110}]);\n *    canvas.add(line);\n *\n *\n *    canvas.setCurrentSelection(line);\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.Line\n */\ndraw2d.shape.basic.PolyLine = draw2d.shape.basic.Line.extend(\n  /** @lends draw2d.shape.basic.PolyLine.prototype */\n  {\n\n  NAME: \"draw2d.shape.basic.PolyLine\",\n\n  /**\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    // internal status handling for performance reasons\n    //\n    this.svgPathString = null\n    this.oldPoint = null\n\n    this.router = null\n    this.routingRequired = true\n    this.lineSegments = new draw2d.util.ArrayList()\n\n    this.radius = \"\"\n\n    this._super(\n      {router: new draw2d.layout.connection.VertexRouter(), ...attr},\n      {\n        router: this.setRouter,\n        radius: this.setRadius,\n        ...setter,\n      },\n      {\n        router: this.getRouter,\n        radius: this.getRadius,\n        ...getter\n      }\n    )\n  },\n\n  /**\n   * \n   * Sets the corner radius of the edges.\n   *\n   * @param {Number} radius the corner radius\n   * @since 4.2.1\n   */\n  setRadius: function (radius) {\n    this.radius = radius\n    this.svgPathString = null\n    this.repaint()\n    this.fireEvent(\"change:radius\", {value: this.radius})\n\n    return this\n  },\n\n\n  setOutlineStroke: function (w) {\n    if (this.outlineStroke !== w) {\n      this.svgPathString = null\n      this.routingRequired = true\n    }\n    this._super(w)\n\n    return this\n  },\n\n  /**\n   * \n   * Get the corner radius of the edges.\n   *\n   * @returns {Number}\n   * @since 4.2.1\n   */\n  getRadius: function () {\n    return this.radius\n  },\n\n\n  /**\n   * \n   * Set the start point of the line.\n   *\n   * @param {Number} x the x coordinate of the start point\n   * @param {Number} y the y coordinate of the start point\n   **/\n  setStartPoint: function (x, y) {\n    if (this.vertices.getSize() > 0) {\n      this.vertices.first().setPosition(x, y)\n    }\n    else {\n      this.vertices.add(new draw2d.geo.Point(x, y))\n    }\n    this.start = this.vertices.first().clone()\n    //     if(this.isInDragDrop===false)\n    this.calculatePath({startMoved: true, endMoved: false})\n\n    this.repaint()\n\n    this.editPolicy.each( (i, e) => {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(this.canvas, this)\n      }\n    })\n\n    this.fireEvent(\"change:start\", {value: this.start})\n\n    return this\n  },\n\n  /**\n   * \n   * Set the end point of the line.\n   *\n   * @param {Number} x the x coordinate of the end point\n   * @param {Number} y the y coordinate of the end point\n   */\n  setEndPoint: function (x, y) {\n    if (this.vertices.getSize() > 1) {\n      this.vertices.last().setPosition(x, y)\n    }\n    else {\n      this.vertices.add(new draw2d.geo.Point(x, y))\n    }\n    this.end = this.vertices.last().clone()\n\n    if (this.isInDragDrop === false)\n      this.calculatePath({startMoved: false, endMoved: true})\n\n    this.repaint()\n\n\n    this.editPolicy.each( (i, e) => {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(this.canvas, this)\n      }\n    })\n    this.fireEvent(\"change:end\", {value: this.end})\n\n    return this\n  },\n\n  /**\n   * \n   * Inserts the draw2d.geo.Point object into the vertex list of the polyline just after the object with the given index.\n   *\n   * @param {Number|draw2d.geo.Point} x the x coordinate or the draw2d.geo.Point object\n   * @param {Number} [y] the y coordinate or undefined of the second argument is a point\n   *\n   * @since 4.0.0\n   */\n  addVertex: function (x, y) {\n    this.vertices.add(new draw2d.geo.Point(x, y))\n\n    this.start = this.vertices.first().clone()\n    this.end = this.vertices.last().clone()\n\n    this.svgPathString = null\n    this.repaint()\n\n    if (!this.selectionHandles.isEmpty()) {\n\n      this.editPolicy.each( (i, e) => {\n        if (e instanceof draw2d.policy.figure.SelectionFeedbackPolicy) {\n          e.onUnselect(this.canvas, this)\n          e.onSelect(this.canvas, this)\n        }\n      })\n    }\n    this.fireEvent(\"change:vertices\", {value: this.vertices})\n\n    return this\n  },\n\n\n  /**\n   * \n   * Inserts the draw2d.geo.Point object into the vertex list of the polyline just after the object with the given index.\n   *\n   * @param {Number} index the insert index\n   * @param {Number|draw2d.geo.Point} x the x coordinate or the draw2d.geo.Point object\n   * @param {Number} [y] the y coordinate or undefined of the second argument is a point\n   *\n   * @since 4.0.0\n   */\n  insertVertexAt: function (index, x, y) {\n    let vertex = new draw2d.geo.Point(x, y)\n\n    this.vertices.insertElementAt(vertex, index)\n\n    this.start = this.vertices.first().clone()\n    this.end = this.vertices.last().clone()\n\n    this.svgPathString = null\n    this.repaint()\n\n    if (!this.selectionHandles.isEmpty()) {\n      this.editPolicy.each( (i, e) => {\n        if (e instanceof draw2d.policy.figure.SelectionFeedbackPolicy) {\n          e.onUnselect(this.canvas, this)\n          e.onSelect(this.canvas, this)\n        }\n      })\n    }\n    this.fireEvent(\"change:vertices\", {value: this.vertices})\n\n    return this\n  },\n\n\n  /**\n   * \n   * Remove a vertex from the polyline and return the removed point. The current installed connection router\n   * can send an veto for this operation.\n   *\n   * @param index\n   * @returns {draw2d.geo.Point} the removed point or null of the current router decline this operation\n   * @since 4.0.0\n   */\n  removeVertexAt: function (index) {\n    let removedPoint = this.vertices.removeElementAt(index)\n\n    this.start = this.vertices.first().clone()\n    this.end = this.vertices.last().clone()\n\n    this.svgPathString = null\n    this.repaint()\n\n    if (!this.selectionHandles.isEmpty()) {\n      this.editPolicy.each( (i, e) => {\n        if (e instanceof draw2d.policy.figure.SelectionFeedbackPolicy) {\n          e.onUnselect(this.canvas, this)\n          e.onSelect(this.canvas, this)\n        }\n      })\n    }\n    this.fireEvent(\"change:vertices\", {value: this.vertices})\n\n    return removedPoint\n  },\n\n\n  /**\n   * \n   * Set the router for this connection.\n   *\n   * @param {draw2d.layout.connection.ConnectionRouter} [router] the new router for this connection or null if the connection should use the default routing\n   **/\n  setRouter: function (router) {\n    if (this.router !== null) {\n      this.router.onUninstall(this)\n    }\n\n    this.router = router ?? new draw2d.layout.connection.DirectRouter()\n\n    this.router.onInstall(this)\n\n    this.routingRequired = true\n\n    // repaint the connection with the new router\n    this.repaint()\n\n    this.fireEvent(\"change:router\", {value: this.router})\n\n    return this\n  },\n\n  /**\n   * \n   * Return the current active router of this connection.\n   *\n   * @returns draw2d.layout.connection.ConnectionRouter\n   **/\n  getRouter: function () {\n    return this.router\n  },\n\n  /**\n   * \n   * Calculate the path of the polyline\n   *\n   * @param {Object} [routingHints] some helper attributes for the router\n   * @param {Boolean} routingHints.startMoved is true if just the start location has moved\n   * @param {Boolean} routingHints.endMoved is true if the destination location has changed\n   * @param {Boolean} routingHints.oldVertices store old vertices for after processing\n   *\n   * @private\n   */\n  calculatePath: function (routingHints) {\n    routingHints ??= {}\n\n    if (this.shape === null) {\n      return\n    }\n\n    this.svgPathString = null\n\n    routingHints.oldVertices = this.vertices\n\n    // cleanup the routing cache\n    //\n    this.oldPoint = null\n    this.lineSegments = new draw2d.util.ArrayList()\n    this.vertices = new draw2d.util.ArrayList()\n\n    // Use the internal router\n    //\n    this.router.route(this, routingHints)\n    this.routingRequired = false\n    this.fireEvent(\"routed\")\n    this.fireEvent(\"change:route\", {})\n  },\n\n  /**\n   * @inheritdoc\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return this\n    }\n\n    if (this.svgPathString === null || this.routingRequired === true) {\n      this.calculatePath()\n    }\n\n    // It is important, that we keep the original \"attributes\" object and mutating them\n    // Maybe the caller needs the modified 'attributes' object. The \"electra.academy designer\"\n    // uses this pattern\n    //\n    // Won't work: attributes = {...attributes ,  path: this.svgPathString})\n    //\n\n    attributes??={}\n    attributes.path = this.svgPathString\n    // set some good defaults\n    attributes[\"stroke-linecap\"] ??= \"round\"\n    attributes[\"stroke-linejoin\"]??= \"round\"\n\n    return this._super(attributes)\n  },\n\n\n  /**\n   * \n   * Return all line segments of the polyline.\n   *\n   * @returns {draw2d.util.ArrayList}\n   */\n  getSegments: function () {\n    return this.lineSegments\n  },\n\n\n    /**\n     * used for the router to add the calculated points\n     *\n     * @param p\n     * @param y\n     */\n  addPoint: function ( p, y) {\n    if (typeof y !== \"undefined\") {\n      p = new draw2d.geo.Point(p, y)\n    }\n    this.vertices.add(p)\n\n    if (this.oldPoint !== null) {\n      // store the painted line segment for the \"mouse selection test\"\n      // (required for user interaction)\n      this.lineSegments.add({\n        start: this.oldPoint,\n        end: p\n      })\n    }\n    this.svgPathString = null\n    this.oldPoint = p\n  },\n\n  /**\n   * \n   * Called if the drag and drop action begins. You can return [false] if you\n   * want avoid that the figure can be move.\n   *\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   *\n   * @returns {Boolean} true if the figure accepts dragging\n   **/\n  onDragStart: function (x, y, shiftKey, ctrlKey, isFaked) {\n    let result = this._super(x, y, shiftKey, ctrlKey, isFaked)\n\n    if (result === true && isFaked !== true) {\n      this.draggedSegment = this.hitSegment(x, y)\n    }\n    return result\n  },\n\n  /**\n   * \n   * Returns the length of the polyline.\n   *\n   * @returns {Number}\n   * @since 6.1.43\n   **/\n  getLength: function () {\n    let result = 0\n    this.lineSegments.each( segment => {\n      let p1 = segment.start\n      let p2 = segment.end\n      result += Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y))\n    })\n    return result\n  },\n\n  setVertices: function (vertices) {\n    // inform the router tha the vertices has set outside. This switch some\n    // router from full autoroute to half autoroute\n    this.router.verticesSet(this)\n\n    this._super(vertices)\n  },\n\n\n  /**\n   * \n   * Returns the projection of the point on the line.\n   *\n   * @param {Number} px the x coordinate of the test point\n   * @param {Number} py the y coordinate of the test point\n   * @returns {draw2d.geo.Point}\n   **/\n  pointProjection: function (px, py) {\n    let result = null,\n      projection = null,\n      p1 = null,\n      p2 = null,\n      segment = null\n    let lastDist = Number.MAX_SAFE_INTEGER\n    let pt = new draw2d.geo.Point(px, py)\n    this.lineSegments.each( segment => {\n      p1 = segment.start\n      p2 = segment.end\n      projection = draw2d.geo.Line.pointProjection(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y)\n      if (projection !== null) {\n        let dist = projection.distance(pt)\n        if (result == null || dist < lastDist) {\n          result = projection\n          result.index = i\n          lastDist = dist\n        }\n      }\n    })\n\n    if (result !== null) {\n      let length = 0\n      this.lineSegments.each( segment => {\n        length += segment.start.distance(segment.end)\n      })\n      let segment = this.lineSegments.get(result.index)\n      p1 = segment.start\n      p2 = segment.end\n      length += p1.distance(p2) * draw2d.geo.Line.inverseLerp(p2.x, p2.y, p1.x, p1.y, result.x, result.y)\n      result.percentage = (1.0 / this.getLength()) * length\n    }\n    return result\n  },\n\n  /**\n   * \n   * Returns the point onto the line which has the relative 'percentage' position onto the line.\n   *\n   * @param {Number} percentage the relative position between [0..1]\n   * @returns {draw2d.geo.Point}\n   */\n  lerp: function (percentage) {\n    let length = this.getLength() * percentage\n    let lastValidLength = length\n    let segment = null, p1 = null, p2 = null\n    for (let i = 0; i < this.lineSegments.getSize(); i++) {\n      segment = this.lineSegments.get(i)\n      p1 = segment.start\n      p2 = segment.end\n      length = length - p1.distance(p2)\n      if (length <= 0) {\n        percentage = 1.0 / p1.distance(p2) * lastValidLength\n        return new draw2d.geo.Point(p1.x + (p2.x - p1.x) * percentage, p1.y + (p2.y - p1.y) * percentage)\n      }\n      lastValidLength = length\n    }\n    return p2\n  },\n\n  /**\n   * \n   * get the best segment of the line which is below the given coordinate or null if\n   * all segment are not below the coordinate. <br>\n   * The 'corona' property of the polyline is considered for this test. This means\n   * the point isn't direct on the line. Is it only close to the line!\n   *\n   * @param {Number} px the x coordinate of the test point\n   * @param {Number} py the y coordinate of the test point\n   * @returns {Object}\n   * @since 4.4.0\n   **/\n  hitSegment: function (px, py) {\n    for (let i = 0; i < this.lineSegments.getSize(); i++) {\n      let segment = this.lineSegments.get(i)\n      if (draw2d.shape.basic.Line.hit(this.corona + this.stroke, segment.start.x, segment.start.y, segment.end.x, segment.end.y, px, py)) {\n        return {index: i, start: segment.start, end: segment.end}\n      }\n    }\n    return null\n  },\n\n  /**\n   * \n   * Checks if the hands over coordinate close to the line. The 'corona' property of the polyline\n   * is considered for this test. This means the point isn't direct on the line. Is it only close to the\n   * line!\n   *\n   * @param {Number} px the x coordinate of the test point\n   * @param {Number} py the y coordinate of the test point\n   * @returns {Boolean}\n   **/\n  hitTest: function (px, py) {\n    return this.hitSegment(px, py) !== null\n  },\n\n  /**\n   * @inheritdoc\n   */\n  createCommand: function (request) {\n\n    if (request.getPolicy() === draw2d.command.CommandType.DELETE) {\n      if (this.isDeleteable() === true) {\n        return new draw2d.command.CommandDelete(this)\n      }\n    }\n    else if (request.getPolicy() === draw2d.command.CommandType.MOVE_VERTEX) {\n      if (this.isResizeable() === true) {\n        return new draw2d.command.CommandMoveVertex(this)\n      }\n    }\n    else if (request.getPolicy() === draw2d.command.CommandType.MOVE_VERTICES) {\n      if (this.isResizeable() === true) {\n        return new draw2d.command.CommandMoveVertices(this)\n      }\n    }\n\n    return this._super(request)\n  },\n\n  /**\n   * @inheritdoc\n   */\n  getPersistentAttributes: function () {\n    return this.router.getPersistentAttributes(this, {...this._super(), \n      router: this.router.NAME,\n      radius: this.radius\n    })\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    if (typeof memento.router !== \"undefined\") {\n      try {\n        this.setRouter(eval(\"new \" + memento.router + \"()\"))\n      }\n      catch (exc) {\n        debug.warn(\"Unable to install router '\" + memento.router + \"' forced by \" + this.NAME + \".setPersistentAttributes. Using default\")\n      }\n    }\n\n    if (typeof memento.radius !== \"undefined\") {\n      this.setRadius(memento.radius)\n    }\n\n    this.router.setPersistentAttributes(this, memento)\n\n    if (this.vertices.getSize() > 1) {\n      this.start = this.vertices.first().clone()\n      this.end = this.vertices.last().clone()\n    }\n  }\n})\n","import draw2d from '../../packages'\nimport jsonUtil from '../../util/JSONUtil'\n\n\n/**\n * @class\n * A Polygon figure.\n *\n *\n * @example\n *\n *    let p1 =  new draw2d.shape.basic.Polygon({width:100, height:100});\n *    let p2 =  new draw2d.shape.basic.Polygon({width:100, height:60});\n *\n *    canvas.add(p1,10,10);\n *    canvas.add(p2,100,10);\n *\n *    p2.attr({color:\"#f0f000\", alpha:0.7});\n *\n *    canvas.setCurrentSelection(p2);\n *\n * @author Andreas Herz\n * @extends draw2d.VectorFigure\n */\ndraw2d.shape.basic.Polygon = draw2d.VectorFigure.extend(\n  /** @lends draw2d.shape.basic.Polygon.prototype */\n  {\n\n  NAME: \"draw2d.shape.basic.Polygon\",\n\n  /**\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this.minX = 0\n    this.minY = 0\n    this.maxX = 0\n    this.maxY = 0\n    this.vertices = new draw2d.util.ArrayList()\n\n    this._super(attr, setter, getter)\n\n    // we must cache the initial width/height because the width/height of the shape\n    // is recalculated in the addVertex method. After the first call this values are 0/0\n    if (this.vertices.getSize() === 0) {\n      let w = this.width\n      let h = this.height\n      let pos = this.getPosition()\n      this.addVertex(new draw2d.geo.Point(0, 0))\n      this.addVertex(new draw2d.geo.Point(w, 0))\n      this.addVertex(new draw2d.geo.Point(w, h))\n\n      this.setPosition(pos)\n    }\n\n    this.svgPathString = null\n\n    this.installEditPolicy(new draw2d.policy.figure.VertexSelectionFeedbackPolicy())\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setRadius: function (radius) {\n    this.svgPathString = null\n\n    this._super(radius)\n    this.fireEvent(\"change:radius\", {value: radius})\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  createShapeElement: function () {\n    // return some good default...\n    return this.canvas.paper.path(\"M0 10L100 100\")\n  },\n\n  /**\n   * \n   * calculate the path of the polygon\n   *\n   */\n  calculatePath: function () {\n    let radius = this.getRadius()\n    let path = []\n    // hard corners\n    //\n    if (radius === 0) {\n      let length = this.vertices.getSize()\n      let p = this.vertices.get(0)\n      path.push(\"M\", p.x, \" \", p.y)\n      for (let i = 1; i < length; i++) {\n        p = this.vertices.get(i)\n        path.push(\"L\", p.x, \" \", p.y)\n      }\n      path.push(\"Z\")\n    }\n    // soften/round corners\n    //\n    else {\n      length = this.vertices.getSize()\n      let start = this.vertices.first()\n      let end = this.vertices.last()\n      if (start.equals(end)) {\n        length = length - 1\n        end = this.vertices.get(length - 1)\n      }\n      let begin = draw2d.geo.Util.insetPoint(start, end, radius)\n      path.push(\"M\", begin.x, \",\", begin.y)\n      for (let i = 0; i < length; i++) {\n        start = this.vertices.get(i)\n        end = this.vertices.get((i + 1) % length)\n        let modStart = draw2d.geo.Util.insetPoint(start, end, radius)\n        let modEnd = draw2d.geo.Util.insetPoint(end, start, radius)\n        path.push(\"Q\", start.x, \",\", start.y, \" \", modStart.x, \", \", modStart.y)\n        path.push(\"L\", modEnd.x, \",\", modEnd.y)\n      }\n    }\n    this.svgPathString = path.join(\"\")\n    return this\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    if (this.svgPathString === null) {\n      this.calculatePath()\n    }\n    //\n    attributes??={}\n    attributes.path ??= this.svgPathString\n\n    this._super(attributes)\n  },\n\n  /**\n   * \n   * Translate the figure with the given x/y offset. This method modifies all\n   * vertices and the bounding box.\n   *\n   * @param {Number} dx The new x translate offset\n   * @param {Number} dy The new y translate offset\n   **/\n  translate: function (dx, dy) {\n    let _this = this\n\n    // TODO: This is not good. If the polygon part of an \"Composite\" I should call\n    //       the adjustPosition. IF we DragDrap the composition the figures inside should follow\n    //       without modify the dx/dy.\n    //\n    dx = this.x + dx\n    dy = this.y + dy\n    this.editPolicy.each(function (i, e) {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        let newPos = e.adjustPosition(_this, dx, dy)\n        dx = newPos.x\n        dy = newPos.y\n      }\n    })\n    dx = dx - this.x\n    dy = dy - this.y\n\n\n    this.vertices.each(function (i, e) {\n      e.translate(dx, dy)\n    })\n    this.svgPathString = null\n    this.updateBoundingBox()\n\n    this.repaint()\n\n\n    // Update the resize handles if the user change the position of the\n    // element via an API call.\n    //\n    this.editPolicy.each(function (i, e) {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(_this.canvas, _this)\n      }\n    })\n\n    this.fireEvent(\"move\", {figure: this, dx: dx, dy: dy})\n    this.fireEvent(\"change:x\", {value: this.x})\n    this.fireEvent(\"change:y\", {value: this.y})\n\n    return this\n  },\n\n  /**\n   * \n   * Change the position of the polygon. This method updates all vertices.\n   *\n   * @param {Number|draw2d.geo.Point} x\n   * @param {Number} [y]\n   */\n  setPosition: function (x, y) {\n    if (x instanceof draw2d.geo.Point) {\n      y = x.y\n      x = x.x\n    }\n    this.svgPathString = null\n\n    let dx = x - this.minX\n    let dy = y - this.minY\n\n    this.translate(dx, dy)\n\n    this.x = x\n    this.y = y\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setDimension: function (w, h) {\n    let oldWidth = this.width\n    let oldHeight = this.height\n\n    this._super(w, h)\n\n    let fracWidth = (1 / oldWidth) * this.width\n    let fracHeight = (1 / oldHeight) * this.height\n\n    let thisX = this.x\n    let thisY = this.y\n    this.vertices.each(function (i, e) {\n      // calculate difference between point and figure origin\n      let diffX = (e.getX() - thisX) * fracWidth\n      let diffY = (e.getY() - thisY) * fracHeight\n      e.setPosition(thisX + diffX, thisY + diffY)\n    })\n\n    this.svgPathString = null\n    this.repaint()\n    this.fireEvent(\"change:dimension\", {value: {width: this.width, height: this.height}})\n\n    return this\n  },\n\n  /**\n   * \n   * Return all vertices of the polygon.\n   *\n   * @returns {draw2d.util.ArrayList}\n   */\n  getVertices: function () {\n    return this.vertices\n  },\n\n\n  /**\n   * \n   * Return the Vertex with the given index.\n   *\n   * @param {Number} index the index of the vertex to return\n   * @since 5.0.2\n   */\n  getVertex: function (index) {\n    return this.vertices.get(index)\n  },\n\n\n  resetVertices: function () {\n    this.vertices = new draw2d.util.ArrayList()\n\n    this.svgPathString = null\n    this.repaint()\n\n    this.updateBoundingBox()\n\n    this.editPolicy.each((i, e) => {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(this.canvas, this)\n      }\n    })\n\n    return this\n  },\n\n  /**\n   * \n   * Update the vertex at the given index. The method call didn't have any effect\n   * if the vertex didn't exists.\n   *\n   * @param {Number} index\n   * @param {Number} x\n   * @param {Number} y\n   */\n  setVertex: function (index, x, y) {\n    let vertex = this.vertices.get(index)\n\n    // invalid point or nothing to do\n    //\n    if (vertex === null || (vertex.x === x && vertex.y === y)) {\n      return this\n    }\n\n    vertex.x = parseFloat(x)\n    vertex.y = parseFloat(y)\n\n    this.svgPathString = null\n    this.repaint()\n\n    this.updateBoundingBox()\n\n    let _this = this\n    this.editPolicy.each(function (i, e) {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(_this.canvas, _this)\n      }\n    })\n    this.fireEvent(\"change:vertices\", {value: this.vertices})\n\n    return this\n  },\n\n  /**\n   * \n   * Append a new vertex to the polygon.\n   *\n   * @param {Number | draw2d.geo.Point} x\n   * @param {Number} [y]\n   */\n  addVertex: function (x, y) {\n    this.vertices.add(new draw2d.geo.Point(x, y))\n\n    this.svgPathString = null\n    this.repaint()\n\n    this.updateBoundingBox()\n\n    let _this = this\n    this.editPolicy.each(function (i, e) {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(_this.canvas, _this)\n      }\n    })\n    this.fireEvent(\"change:vertices\", {value: this.vertices})\n\n    return this\n  },\n\n  /**\n   * \n   * Insert a new vertex at the given index. All vertices will be shifted to\n   * free the requested index.\n   *\n   * @param {Number} index\n   * @param {Number} x\n   * @param {Number} y\n   */\n  insertVertexAt: function (index, x, y) {\n    this.vertices.insertElementAt(new draw2d.geo.Point(x, y), index)\n\n    this.svgPathString = null\n    this.repaint()\n\n    this.updateBoundingBox()\n\n    if (!this.selectionHandles.isEmpty()) {\n      let _this = this\n      this.editPolicy.each(function (i, e) {\n        if (e instanceof draw2d.policy.figure.SelectionFeedbackPolicy) {\n          e.onUnselect(_this.canvas, _this)\n          e.onSelect(_this.canvas, _this)\n        }\n      })\n    }\n    this.fireEvent(\"change:vertices\", {value: this.vertices})\n\n    return this\n  },\n\n\n  /**\n   * \n   * Remove a vertex from the polygon and return the removed point.\n   *\n   * @param {Number} index\n   *\n   * @returns {draw2d.geo.Point} the removed vertex\n   */\n  removeVertexAt: function (index) {\n    // a polygon need at least 3 vertices\n    //\n    if (this.vertices.getSize() <= 3) {\n      return null\n    }\n\n    let vertex = this.vertices.removeElementAt(index)\n\n    this.svgPathString = null\n    this.repaint()\n\n    this.updateBoundingBox()\n\n    if (!this.selectionHandles.isEmpty()) {\n      let _this = this\n      this.editPolicy.each(function (i, e) {\n        if (e instanceof draw2d.policy.figure.SelectionFeedbackPolicy) {\n          e.onUnselect(_this.canvas, _this)\n          e.onSelect(_this.canvas, _this)\n        }\n      })\n    }\n    this.fireEvent(\"change:vertices\", {value: this.vertices})\n\n    return vertex\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  setRotationAngle: function (angle) {\n    this.rotationAngle = 360 % angle\n\n    // The different to the other figures is, the the vertices must rotated instead of\n    // transform the shape with SVG matrix.\n    //\n    // Reason: the vertices are selectable and in this case the coordinates must transform\n    //         and not only the resulting SVG shape.\n    //\n    let radian = angle / (180 / Math.PI)\n    let center = this.getBoundingBox().getCenter()\n    let rotate = function (x, y, xm, ym, radian) {\n      let cos = Math.cos,\n        sin = Math.sin\n      return {\n        x: (x - xm) * cos(radian) - (y - ym) * sin(radian) + xm,\n        y: (x - xm) * sin(radian) + (y - ym) * cos(radian) + ym\n      }\n    }\n\n    this.vertices.each(function (i, e) {\n      let rot = rotate(e.x, e.y, center.x, center.y, radian)\n      e.setPosition(rot.x, rot.y)\n    })\n\n    this.updateBoundingBox()\n\n\n    // Update the resize handles if the user change the position of the element via an API call.\n    //\n    let _this = this\n    this.editPolicy.each(function (i, e) {\n      if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n        e.moved(_this.canvas, _this)\n      }\n    })\n\n    this.repaint()\n    this.fireEvent(\"change:angle\", {value: this.rotationAngle})\n\n    return this\n  },\n\n  /**\n   * \n   * Calculate the bounding box of the shape and store them in an internal\n   * variable for fast access.\n   *\n   * @private\n   */\n  updateBoundingBox: function () {\n    if (this.vertices.isEmpty()) {\n      this.minX = this.x\n      this.minY = this.y\n      this.maxX = this.x + this.width\n      this.maxY = this.y + this.height\n    }\n    else {\n      this.minX = this.x = Math.min(...this.vertices.asArray().map(n => n.x))\n      this.minY = this.y = Math.min(...this.vertices.asArray().map(n => n.y))\n      this.maxX = Math.max(...this.vertices.asArray().map(n => n.x))\n      this.maxY = Math.max(...this.vertices.asArray().map(n => n.y))\n      this.width = this.maxX - this.minX\n      this.height = this.maxY - this.minY\n    }\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  createCommand: function (request) {\n\n    if (request.getPolicy() === draw2d.command.CommandType.MOVE_VERTEX) {\n      if (this.isResizeable() === true) {\n        return new draw2d.command.CommandMoveVertex(this)\n      }\n    }\n\n    return this._super(request)\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getPersistentAttributes: function () {\n    let memento = this._super()\n\n    memento.vertices = []\n\n    this.vertices.each(function (i, e) {\n      memento.vertices.push({x: e.x, y: e.y})\n    })\n\n    return memento\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    // restore the points from the JSON data and add them to the polyline\n    //\n    if (typeof memento.vertices !== \"undefined\") {\n      this.vertices = new draw2d.util.ArrayList()\n      memento.vertices.forEach(point => {\n        this.addVertex(point)\n      })\n    }\n  }\n})\n","import draw2d from '../../packages'\n\n/**\n * @class\n * A Rectangle Figure.\n *\n *\n * @example\n *\n *    let rect1 =  new draw2d.shape.basic.Rectangle({\n *    \tx:10,\n *     y:10\n *    });\n *\n *    let rect2 =  new draw2d.shape.basic.Rectangle({\n *      x: 100,\n *      y: 10,\n *      bgColor: \"#f0f000\",\n *      alpha  : 0.7,\n *      width: 100,\n *      height: 60,\n *      radius: 10\n *    });\n *\n *    canvas.add(rect1);\n *    canvas.add(rect2);\n *\n *    canvas.setCurrentSelection(rect2);\n *\n * @author Andreas Herz\n * @param {Object} [attr] the configuration of the shape\n * @param {Object} [setter] add or replace setter methods\n * @param {Object} [getter] add or replace getter methods\n * @extends draw2d.VectorFigure\n */\ndraw2d.shape.basic.Rectangle = draw2d.VectorFigure.extend(\n  /** @lends draw2d.shape.basic.Rectangle.prototype */\n  {\n\n  NAME: \"draw2d.shape.basic.Rectangle\",\n\n  init: function (attr, setter, getter) {\n    this.dasharray = null\n\n    this._super(\n      {\n        bgColor: \"#a0a0a0\", color: \"#1B1B1B\",\n        ...attr},\n      {\n        dash: this.setDashArray,\n        dasharray: this.setDashArray,\n        ...setter,\n      },\n      { \n        dash: this.getDashArray,\n        dasharray: this.getDashArray,\n        ...getter\n      }\n    )\n  },\n\n  /**\n   * @inheritdoc\n   **/\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    attributes ??={}\n    attributes.width  ??= this.getWidth()\n    attributes.height ??= this.getHeight()\n    attributes.r      ??= this.getRadius()\n    if (this.dasharray !== null) {\n      attributes[\"stroke-dasharray\"] = this.dasharray\n    }\n\n    this._super(attributes)\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  applyTransformation: function () {\n    let ts = \"R\" + this.rotationAngle\n\n    if (this.getRotationAngle() === 90 || this.getRotationAngle() === 270) {\n      let ratio = this.getHeight() / this.getWidth()\n      ts = ts + \"S\" + ratio + \",\" + 1 / ratio + \",\" + (this.getAbsoluteX() + this.getWidth() / 2) + \",\" + (this.getAbsoluteY() + this.getHeight() / 2)\n    }\n\n    this.shape.transform(ts)\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  createShapeElement: function () {\n    return this.canvas.paper.rect(this.getAbsoluteX(), this.getAbsoluteY(), this.getWidth(), this.getHeight())\n  },\n\n\n  /**\n   *\n   * Set the line style for dot/dash styling. Possible values are\n   * [\"\", \"-\", \".\", \"-.\", \"-..\", \". \", \"- \", \"--\", \"- .\", \"--.\", \"--..\"]\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr({\n   *       dash: pattern\n   *     });\n   *\n   * @param {String} pattern the string with the dot/dash pattern. valid values: [\"\", \"-\", \".\", \"-.\", \"-..\", \". \", \"- \", \"--\", \"- .\", \"--.\", \"--..\"]\n   */\n  setDashArray: function (pattern) {\n    this.dasharray = pattern\n    this.repaint()\n    this.fireEvent(\"change:dashArray\", {value: this.dasharray})\n\n    return this\n  },\n\n  /**\n   *\n   * Get the line style for this object.\n   *\n   *     // Alternatively you can use the attr method:\n   *     figure.attr(\"dash\");\n   *\n   * @since 5.1.0\n   */\n  getDashArray: function () {\n    return this.dasharray\n  },\n\n  /**\n   * @inheritdoc\n   */\n  getPersistentAttributes: function () {\n    let memento = this._super()\n\n    if (this.dasharray !== null) {\n      memento.dasharray = this.dasharray\n    }\n\n    return memento\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    if (typeof memento.dasharray === \"string\") {\n      this.dasharray = memento.dasharray\n    }\n\n    return this\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Implements a simple text with word wrapping.<br>The height of the element is automatic calculated. The widht of\n * the element is changeable by the user and respect the minWidth constraint.\n * <br>\n *\n *\n * @example\n *\n *    let shape =  new draw2d.shape.basic.Text({text:\"This is a simple text with some loooooong word in.\"});\n *\n *    canvas.add(shape,40,10);\n *\n * @author Andreas Herz\n * @since 4.2.3\n * @extends draw2d.shape.basic.Label\n */\ndraw2d.shape.basic.Text = draw2d.shape.basic.Label.extend(\n  /** @lends draw2d.shape.basic.Text.prototype */\n  {\n\n    NAME: \"draw2d.shape.basic.Text\",\n\n    /**\n     * Creates a new text element.\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function (attr, setter, getter) {\n      this.cachedWrappedAttr = null\n\n      this._super({ width: 100, height: 50, resizeable: true,...attr}, setter, getter)\n\n      this.installEditPolicy(new draw2d.policy.figure.WidthSelectionFeedbackPolicy())\n    },\n\n\n    /**\n     * @inheritdoc\n     */\n    repaint: function (attributes) {\n      if (this.repaintBlocked === true || this.shape === null) {\n        return\n      }\n\n      // style the label\n      this.svgNodes.attr({...this.calculateTextAttr(), ...this.wrappedTextAttr(this.text, this.getWidth() - this.padding.left - this.padding.right)})\n\n      // set of the x/y must be done AFTER the font-size and bold has been set.\n      // Reason: the getHeight method needs the font-size for calculation because\n      //         it redirects the calculation to the SVG element.\n      this.svgNodes.attr({x: this.padding.left, y: this.getHeight() / 2})\n\n      // this is an exception call. Don't call the super method (Label) to avoid\n      // the calculation in this method.\n      draw2d.SetFigure.prototype.repaint.call(this, attributes)\n    },\n\n\n    /**\n     * @inheritdoc\n     */\n    setDimension: function (w, h) {\n      this.clearCache()\n      let attr = this.wrappedTextAttr(this.text, w)\n\n      this.cachedMinWidth = Math.max(w, attr.width)\n      this.cachedMinHeight = attr.height\n\n      draw2d.shape.node.Node.prototype.setDimension.call(this, this.cachedMinWidth, this.cachedMinHeight)\n      //  this._super(Math.min(w,attr.width),attr.height);\n      this.fireEvent(\"change:dimension\", {value: {width: this.cachedMinWidth, height: this.cachedMinHeight}})\n\n      return this\n    },\n\n    /**\n     *\n     * clear the internal cache for width/height precalculation\n     * @private\n     */\n    clearCache: function () {\n      this._super()\n      this.cachedWrappedAttr = null\n\n      return this\n    },\n\n\n    /**\n     * @inheritdoc\n     */\n    getMinWidth: function () {\n      if (this.shape === null) {\n        return 0\n      }\n\n      if (this.cachedMinWidth === null) {\n        // get the longest word in the text\n        //\n        let longestWord = this.text.split(\" \").reduce( (arg1, arg2)=>arg1.length>arg2.length?arg1:arg2)\n        let svgText = this.canvas.paper\n          .text(0, 0, longestWord)\n          .attr({...this.calculateTextAttr(), text: longestWord})\n        this.cachedMinWidth = svgText.getBBox(true).width + this.padding.left + this.padding.right + 2 * this.getStroke()\n        svgText.remove()\n      }\n\n      return this.cachedMinWidth\n    },\n\n\n    /**\n     *\n     * calculates the attributes (wrapped text and width, height) with the given parameter\n     *\n     * @private\n     */\n    wrappedTextAttr: function (text, width) {\n      let words = text.split(\" \")\n      if (this.canvas === null || words.length === 0) {\n        return {text: text, width: width, height: 20}\n      }\n\n      if (this.cachedWrappedAttr === null) {\n        let abc = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n        let svgText = this.canvas.paper.text(0, 0, \"\")\n        \n        svgText.attr({ ...this.calculateTextAttr(), text: abc})\n\n        // get a good estimation of a letter width...not correct but this is working for the very first draft implementation\n        let letterWidth = svgText.getBBox(true).width / abc.length\n\n        let s = [words[0]], x = s[0].length * letterWidth\n        let w = null\n        for (let i = 1; i < words.length; i++) {\n          w = words[i]\n          let l = w.length * letterWidth\n          if ((x + l) > width) {\n            s.push(\"\\n\")\n            x = l\n          } else {\n            s.push(\" \")\n            x += l\n          }\n          s.push(w)\n        }\n        // set the wrapped text and get the resulted bounding box\n        //\n        svgText.attr({text: s.join(\"\")})\n        let bbox = svgText.getBBox(true)\n        svgText.remove()\n        this.cachedWrappedAttr = {\n          text: s.join(\"\"),\n          width: (Math.max(width, bbox.width) + this.padding.left + this.padding.right),\n          height: (bbox.height + this.padding.top + this.padding.bottom)\n        }\n      }\n      return this.cachedWrappedAttr\n    }\n  })\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Selection handle for polyline vertices.\n *\n *\n * @author Andreas Herz\n * @extends draw2d.ResizeHandle\n */\ndraw2d.shape.basic.VertexResizeHandle = draw2d.ResizeHandle.extend(\n  /** @lends draw2d.shape.basic.VertexResizeHandle.prototype */\n  {\n\n  NAME: \"draw2d.shape.basic.VertexResizeHandle\",\n\n  SNAP_THRESHOLD: 3,\n  LINE_COLOR: \"#1387E6\",\n  FADEOUT_DURATION: 300,\n\n  init: function (owner, index) {\n    this._super({owner})\n    this.index = index\n    this.isDead = false\n  },\n\n\n  /**\n   * Called when a user double clicks on the element\n   *\n   * @template\n   */\n  onDoubleClick: function () {\n    let cmd = new draw2d.command.CommandRemoveVertex(this.owner, this.index)\n    this.getCanvas().getCommandStack().execute(cmd)\n\n    this.isDead = true\n  },\n\n\n  /**\n   *\n   * Called if a drag&drop operation starts.<br>\n   *\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @private\n   **/\n  onDragStart: function (x, y, shiftKey, ctrlKey) {\n    if (this.isDead === true) {\n      return\n    }\n\n    this._super()\n    this.command = this.getCanvas().getPrimarySelection().createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE_VERTEX))\n    if (this.command != null) {\n      this.command.setIndex(this.index)\n      this.setAlpha(0.2)\n      this.shape.attr({\"cursor\": \"crosshair\"})\n    }\n\n    // Vertex is a reference and not a copy of the point\n    this.vertex = this.owner.getVertex(this.index).clone()\n\n    // fire an event\n    // @since 5.3.3\n    this.fireEvent(\"dragstart\", {x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n\n    return true\n  },\n\n  /**\n   *\n   * Called from the framework during a drag&drop operation\n   *\n   * @param {Number} dx the x difference between the start of the drag drop operation and now\n   * @param {Number} dy the y difference between the start of the drag drop operation and now\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   **/\n  onDrag: function (dx, dy, dx2, dy2) {\n    if (this.isDead === true || this.command == null) {\n      return\n    }\n\n    this.setPosition(this.x + dx2, this.y + dy2)\n\n    // update the polyline for immediately  drag&drop feedback\n    //\n    this.vertex.translate(dx2, dy2)\n    let newPos = this.vertex.clone()\n    // Adjust the new location if the object can snap to a helper\n    // like grid, geometry, ruler,...\n    //\n    if (this.getCanSnapToHelper()) {\n      newPos = this.getCanvas().snapToHelper(this, newPos)\n    }\n\n    this.owner.setVertex(this.index, newPos.x, newPos.y)\n\n    // update the command for the undo/redo stuff\n    //\n    this.command.updatePosition(this.vertex.x, this.vertex.y)\n  },\n\n  /**\n   *  Called after a drag and drop action.<br>\n   *        Sub classes can override this method to implement additional stuff. Don't forget to call the super implementation via <code>this._super();</code>\n   *\n   * @param {Number} x the x-coordinate of the mouse event\n   * @param {Number} y the y-coordinate of the mouse event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   */\n  onDragEnd: function (x, y, shiftKey, ctrlKey) {\n    if (this.isDead === true || this.command === null) {\n      return\n    }\n\n    this.shape.attr({\"cursor\": \"move\"})\n\n    let stack = this.getCanvas().getCommandStack()\n\n    let transactionCommand = new draw2d.command.CommandCollection()\n\n    try {\n      transactionCommand.add(this.command)\n      this.command = null\n      if (this.getEnclosingAngle() > 178) {\n        transactionCommand.add(new draw2d.command.CommandRemoveVertex(this.owner, this.index))\n      }\n    }\n    finally {\n      stack.execute(transactionCommand)\n    }\n\n    this.setAlpha(1)\n\n    // fire an event\n    // @since 5.3.3\n    this.fireEvent(\"dragend\", {x: x, y: y, shiftKey: shiftKey, ctrlKey: ctrlKey})\n  },\n\n\n  /**\n   *\n   * Controls the location of the resize handle\n   *\n   * @template\n   **/\n  relocate: function () {\n    let resizeWidthHalf = this.getWidth() / 2\n    let resizeHeightHalf = this.getHeight() / 2\n\n    let anchor = this.owner.getVertex(this.index)\n\n    this.setPosition(anchor.x - resizeWidthHalf, anchor.y - resizeHeightHalf)\n  },\n\n  /**\n   *\n   * Calculates the angle between the siblings\n   *\n   * @returns {Number}\n   */\n  getEnclosingAngle: function () {\n    // calculate the angle between the siblings\n    let points = this.owner.getVertices()\n    let trans = this.vertex.getScaled(-1)\n    let size = points.getSize()\n    let left = points.get((this.index - 1 + size) % size).translated(trans) // % is just to ensure the [0, size] interval\n    let right = points.get((this.index + 1) % size).translated(trans)       // % is just to ensure the [0, size] interval\n\n    let dot = left.dot(right)\n\n    let acos = Math.acos(dot / (left.length() * right.length()))\n    return acos * 180 / Math.PI\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Base interface for the composite shapes\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.Rectangle\n * @since 4.7.2\n */\ndraw2d.shape.composite.Composite = draw2d.SetFigure.extend(\n  /** @lends draw2d.shape.composite.Composite.prototype */\n  {\n\n    NAME: \"draw2d.shape.composite.Composite\",\n\n    /**\n     * Creates a new composite element which are not assigned to any canvas.\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function (attr, setter, getter) {\n      this._super({stroke: 1, \"color\": \"#f0f0f0\",...attr}, setter, getter)\n    },\n\n    /**\n     *\n     * Called when a user dbl clicks on the element\n     *\n     * @template\n     */\n    onDoubleClick: function () {\n      // do nothing per default. no rotation of the shape.\n    },\n\n    /**\n     *\n     * Delegate method to calculate if a figure is selectable. A composite has the right to override the\n     * initial selectable flag of the figure.\n     *\n     * @param {draw2d.Figure} figure the figure to test\n     * @param {Boolean} selectable the initial selectable flag of the figure\n     * @returns {Boolean} returns `selectable`. A figure in a composite is per default selectable if the figure itself allows it.\n     *\n     */\n    isMemberSelectable: function (figure, selectable) {\n      return selectable\n    },\n\n    /**\n     *\n     * Delegate method to calculate if a figure is draggable. A composite has the right to override the\n     * initial draggable flag of the figure.\n     *\n     * @param {draw2d.Figure} figure the figure to test\n     * @param {Boolean} draggable the initial draggable flag of the figure\n     * @returns {Boolean} returns `draggable`. A figure in a composite is per default draggable if the figure itself allows it.\n     *\n     */\n    isMemberDraggable: function (figure, draggable) {\n      return draggable\n    },\n\n\n    /**\n     *\n     * Set the canvas element of this figures. This can be used to determine whenever an element\n     * is added or removed to the canvas.\n     *\n     * @param {draw2d.Canvas} canvas the new parent of the figure or null\n     * @returns {this}\n     */\n    setCanvas: function (canvas) {\n      this._super(canvas)\n\n      // an composite shape goes always in the background\n      //\n      if (canvas !== null) {\n        this.toBack()\n      }\n\n      return this\n    }\n\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A group is a figure that acts as a transparent container for other figures. A group\n * is a StrongComposite node that controls a set of child figures. The bounding rectangle of\n * a group is the union of the bounds of its children. Child nodes cannot be selected or\n * manipulated individually.\n *\n *\n * @author Andreas Herz\n * @extends draw2d.shape.composite.StrongComposite\n * @since 4.8.0\n */\ndraw2d.shape.composite.Group = draw2d.shape.composite.StrongComposite.extend(\n  /** @lends draw2d.shape.composite.Group.prototype */\n  {\n\n    NAME: \"draw2d.shape.composite.Group\",\n\n    /**\n     * Creates a new figure element which are not assigned to any canvas.\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function (attr, setter, getter) {\n      this._super(extend({bgColor: null, color: null, resizeable: false}, attr), setter, getter)\n\n      // used during figure assignment/unassignment. The Group is resizing during figure assignment\n      // and we want avoid that already assigned figures are moving during this resize.\n      //\n      this.stickFigures = false\n    },\n\n\n    /**\n     *\n     * Delegate method to calculate if a figure is selectable. A composite has the right to override the\n     * initial selectable flag of the figure.\n     *\n     * @param {draw2d.Figure} figure the figure to test\n     * @param {Boolean} selectable the initial selectable flag of the figure\n     * @returns {Boolean} returns false because it is not possible toselect single figures in the group\n     */\n    isMemberSelectable: function (figure, selectable) {\n      return false\n    },\n\n    /**\n     *\n     * Delegate method to calculate if a figure is draggable. A composite has the right to override the\n     * initial draggable flag of the figure.\n     * <br>\n     * Returns false because only the complete group is draggable\n     *\n     * @param {draw2d.Figure} figure the figure to test\n     * @param {Boolean} draggable the initial draggable flag of the figure\n     * @returns {Boolean} returns always false because it is not possible to drag&drop single figures in a group\n     *\n     */\n    isMemberDraggable: function (figure, draggable) {\n      return false\n    },\n\n    /**\n     *\n     * Set the position of the object.\n     *\n     * @param {Number/draw2d.geo.Point} x The new x coordinate of the figure\n     * @param {Number} [y] The new y coordinate of the figure\n     * @returns {this}\n     **/\n    setPosition: function (x, y) {\n      let oldX = this.x\n      let oldY = this.y\n\n\n      this._super(x, y)\n\n      let dx = this.x - oldX\n      let dy = this.y - oldY\n\n      if (dx === 0 && dy === 0) {\n        return this\n      }\n\n      if (this.stickFigures === false) {\n        this.assignedFigures.each(function (i, figure) {\n          figure.translate(dx, dy)\n        })\n      }\n\n      return this\n    },\n\n    /**\n     *\n     * Assign a figure to the given group.\n     * The bounding box of the group is recalculated and the union of the current bounding box with the\n     * figure bounding box.\n     *\n     * @param {draw2d.Figure} figure\n     * @returns {this}\n     */\n    assignFigure: function (figure) {\n      if (!this.assignedFigures.contains(figure)) {\n        let _this = this\n        this.stickFigures = true\n        if (this.assignedFigures.isEmpty() === true) {\n          this.setBoundingBox(figure.getBoundingBox())\n        } else {\n          this.setBoundingBox(this.getBoundingBox().merge(figure.getBoundingBox()))\n        }\n        this.assignedFigures.add(figure)\n        figure.setComposite(this)\n        // the selection adapter defines which figure should be selected if the user clicks on\n        // \"figure\". The \"group\" redirects to the group instead to allowing select the child.\n        figure.setSelectionAdapter(function () {\n          return _this\n        })\n        this.stickFigures = false\n      }\n      return this\n    },\n\n    /**\n     *\n     * Remove the given figure from the group assignment\n     *\n     * @param {draw2d.Figure} figure the figure to remove\n     * @returns {this}\n     */\n    unassignFigure: function (figure) {\n      if (this.assignedFigures.contains(figure)) {\n        this.stickFigures = true\n        figure.setComposite(null)\n        figure.setSelectionAdapter(null)\n        this.assignedFigures.remove(figure)\n        if (!this.assignedFigures.isEmpty()) {\n          let box = this.assignedFigures.first().getBoundingBox()\n          this.assignedFigures.each(function (i, figure) {\n            box.merge(figure.getBoundingBox())\n          })\n          this.setBoundingBox(box)\n        }\n        this.stickFigures = false\n      }\n\n      return this\n    },\n\n    /**\n     * @inheritDoc\n     */\n    createCommand: function (request) {\n      if (request === null) {\n        return null\n      }\n\n      if (request.getPolicy() === draw2d.command.CommandType.DELETE) {\n        if (!this.isDeleteable()) {\n          return null\n        }\n        return new draw2d.command.CommandDeleteGroup(this)\n      }\n\n      return this._super(request)\n    }\n\n  })\n\n\n\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A Jailhouse is a figure that acts as a container for other figures. A Jailhouse\n * is a StrongComposite node that controls a set of child figures. Child nodes can't\n * moved outside of the composite.<br>\n * Objects in a jailhouse have the same Z-order, which can be relatively controlled with\n * respect to other figures.\n *\n * @author Andreas Herz\n * @extends draw2d.shape.composite.StrongComposite\n * @since 4.8.0\n */\ndraw2d.shape.composite.Jailhouse = draw2d.shape.composite.StrongComposite.extend(\n  /** @lends draw2d.shape.composite.Jailhouse.prototype */\n  {\n\n    NAME: \"draw2d.shape.composite.Jailhouse\",\n\n    /**\n     * Creates a new figure element which are not assigned to any canvas.\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function (attr, setter, getter) {\n      this.policy = new draw2d.policy.figure.RegionEditPolicy(0, 0, 10, 10)\n      this._super(extend({bgColor: \"#f0f0f0\", color: \"#333333\"}, attr), setter, getter)\n\n      this.stickFigures = false\n    },\n\n    /**\n     *\n     * Set the new width and height of the figure and update the constraint policy for the assigned\n     * figures..\n     *\n     * @param {Number} w The new width of the figure\n     * @param {Number} h The new height of the figure\n     **/\n    setDimension: function (w, h) {\n      this._super(w, h)\n      this.policy.setBoundingBox(this.getAbsoluteBounds())\n    },\n\n\n    /**\n     *\n     * Set the position of the object.\n     *\n     * @param {Number/draw2d.geo.Point} x The new x coordinate of the figure\n     * @param {Number} [y] The new y coordinate of the figure\n     **/\n    setPosition: function (x, y) {\n      let oldX = this.x\n      let oldY = this.y\n\n\n      this._super(x, y)\n\n      let dx = this.x - oldX\n      let dy = this.y - oldY\n\n      if (dx === 0 && dy === 0) {\n        return this\n      }\n      this.policy.getBoundingBox().setPosition(x,y)\n\n      if (this.stickFigures === false) {\n        this.assignedFigures.each(function (i, figure) {\n          figure.translate(dx, dy)\n        })\n      }\n\n      return this\n    },\n\n    /**\n     *\n     * Assign a figure to the given group.\n     * The bounding box of the group is recalculated and the union of the current bounding box with the\n     * figure bounding box.\n     *\n     * @param {draw2d.Figure} figure\n     */\n    assignFigure: function (figure) {\n      if (!this.assignedFigures.contains(figure) && figure !== this) {\n        this.stickFigures = true\n        this.setBoundingBox(this.getBoundingBox().merge(figure.getBoundingBox()))\n        this.assignedFigures.add(figure)\n        figure.setComposite(this)\n        figure.installEditPolicy(this.policy)\n        figure.toFront(this)\n        this.stickFigures = false\n      }\n      return this\n    },\n\n    getAssignedFigures: function () {\n      return this.assignedFigures\n    },\n\n    /**\n     *\n     * Remove the given figure from the group assignment\n     *\n     * @param {draw2d.Figure} figure the figure to remove\n     *\n     */\n    unassignFigure: function (figure) {\n      if (this.assignedFigures.contains(figure)) {\n        this.stickFigures = true\n        figure.setComposite(null)\n        figure.uninstallEditPolicy(this.policy)\n        this.assignedFigures.remove(figure)\n        if (!this.assignedFigures.isEmpty()) {\n          let box = this.assignedFigures.first().getBoundingBox()\n          this.assignedFigures.each(function (i, figure) {\n            box.merge(figure.getBoundingBox())\n          })\n          this.setBoundingBox(box)\n        }\n        this.stickFigures = false\n      }\n\n      return this\n    },\n\n    onCatch: function (droppedFigure, x, y, shiftKey, ctrlKey) {\n      this.getCanvas().getCommandStack().execute(new draw2d.command.CommandAssignFigure(droppedFigure, this))\n    },\n\n\n    /**\n     *\n     * Return the minWidth of the jailhouse. The minWidth is calculated by care the assigned figures.\n     *\n     * @returns {Number} the minimum width for the figure\n     */\n    getMinWidth: function () {\n      let width = 0\n      this.assignedFigures.each(function (i, figure) {\n        width = Math.max(width, figure.getBoundingBox().getRight())\n      })\n      return width - this.getAbsoluteX()\n    },\n\n    /**\n     *\n     * @returns {Number} the minimum height of the figure\n     */\n    getMinHeight: function () {\n      let height = 0\n      this.assignedFigures.each(function (i, figure) {\n        height = Math.max(height, figure.getBoundingBox().getBottom())\n      })\n      return height - this.getAbsoluteY()\n    }\n  })\n\n\n\n\n\n\n","import draw2d from '../../packages'\n\n/**\n * @class\n * Raft figures are shapes, which aggregate multiple figures. It works like a real raft. Aboard figures are\n * moved if the raft figures moves.\n *\n *\n * @example\n *\n *    let rect1 =  new draw2d.shape.composite.Raft({width:200, height:100});\n *    let rect2 =  new draw2d.shape.basic.Rectangle({width:50, height:50});\n *\n *    canvas.add(rect1,10,10);\n *    canvas.add(rect2,20,20);\n *\n *    rect2.attr({bgColor:\"#f0f000\", width:50, height:50, radius:10});\n *\n *    canvas.setCurrentSelection(rect1);\n *\n * @author Andreas Herz\n * @extends draw2d.shape.composite.WeakComposite\n * @since 4.7.0\n */\ndraw2d.shape.composite.Raft = draw2d.shape.composite.WeakComposite.extend(\n  /** @lends draw2d.shape.composite.Raft.prototype */\n  {\n\n    NAME: \"draw2d.shape.composite.Raft\",\n\n    /**\n     * Creates a new figure element which are not assigned to any canvas.\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function (attr, setter, getter) {\n\n      this.aboardFigures = new draw2d.util.ArrayList()\n\n      this._super({bgColor: \"#f0f0f0\", color: \"#1B1B1B\",...attr}, setter, getter)\n      // install default selection handler. Can be overridden or replaced\n\n      this.installEditPolicy(new draw2d.policy.figure.RaftSelectionFeedbackPolicy())\n    },\n\n\n    /**\n     *\n     * Will be called if the drag and drop action begins. You can return [false] if you\n     * want avoid that the figure can be move.\n     *\n     * @param {Number} x the x-coordinate of the mouse up event\n     * @param {Number} y the y-coordinate of the mouse up event\n     * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n     * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n     *\n     * @returns {Boolean} true if the figure accepts dragging\n     **/\n    onDragStart: function (x, y, shiftKey, ctrlKey) {\n      this._super(x, y, shiftKey, ctrlKey)\n\n      this.aboardFigures = new draw2d.util.ArrayList()\n      // force the recalculation of the aboard figures if the shape is in a drag&drop operation\n      this.getAboardFigures(this.isInDragDrop)\n\n      return true\n    },\n\n    /**\n     *\n     * Set the position of the object.\n     *\n     * @param {Number/draw2d.geo.Point} x The new x coordinate of the figure\n     * @param {Number} [y] The new y coordinate of the figure\n     * @param {boolean} [dontApplyToChildren] don't move the children if this flag is set.\n     **/\n    setPosition: function (x, y, dontApplyToChildren) {\n      let oldX = this.x\n      let oldY = this.y\n\n      // we need the figures before the composite has moved. Otherwise some figures are fall out of the raft\n      //\n      let aboardedFigures = (dontApplyToChildren) ? draw2d.util.ArrayList.EMPTY_LIST : this.getAboardFigures(this.isInDragDrop === false)\n\n      this._super(x, y)\n\n      let dx = this.x - oldX\n      let dy = this.y - oldY\n\n      if (dx === 0 && dy === 0) {\n        return this\n      }\n\n      // we must move circuits with \"user routed\" elements as well if the start/target is withing\n      // the raft. Some segments stay still because some coordinates has a fixed position\n      //\n      if (this.canvas !== null) {\n        aboardedFigures = aboardedFigures.clone()\n        this.canvas.getLines().each( (i, line) => {\n          if (line instanceof draw2d.Connection) {\n            if (aboardedFigures.contains(line.getSource().getRoot()) && aboardedFigures.contains(line.getTarget().getRoot())) {\n              aboardedFigures.add(line)\n            }\n          }\n        })\n      }\n\n      aboardedFigures.each( (i, figure) => { figure.translate(dx, dy) })\n\n      return this\n    },\n\n\n    onDrag: function (dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n\n      // apply all EditPolicy for DragDrop Operations\n      //\n      this.editPolicy.each( (i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          let newPos = e.adjustPosition(this, this.ox + dx, this.oy + dy)\n          if (newPos) {\n            dx = newPos.x - this.ox\n            dy = newPos.y - this.oy\n          }\n        }\n      })\n\n      let newPos = new draw2d.geo.Point(this.ox + dx, this.oy + dy)\n\n      // Adjust the new location if the object can snap to a helper\n      // like grid, geometry, ruler,...\n      //\n      if (this.getCanSnapToHelper()) {\n        newPos = this.getCanvas().snapToHelper(this, newPos)\n      }\n\n      // push the shiftKey to the setPosition method and avoid to move the children objects\n      // if the user press the shift key\n      this.setPosition(newPos.x, newPos.y, shiftKey)\n\n      // notify all installed policies\n      //\n      this.editPolicy.each((i, e) => {\n        if (e instanceof draw2d.policy.figure.DragDropEditPolicy) {\n          e.onDrag(this.canvas, this)\n        }\n      })\n\n      // fire an event\n      // @since 5.3.3\n      this.fireEvent(\"drag\", {dx: dx, dy: dy, dx2: dx2, dy2: dy2, shiftKey: shiftKey, ctrlKey: ctrlKey})\n    },\n\n    /**\n     *\n     * Return all figures which are aboard of this shape. These shapes are moved as well if the raft\n     * is moving.\n     *\n     * @returns {draw2d.util.ArrayList}\n     */\n    getAboardFigures: function (recalculate) {\n      if (recalculate === true && this.canvas !== null) {\n        let raftBoundingBox = this.getBoundingBox()\n        let zIndex = this.getZOrder()\n        this.aboardFigures = new draw2d.util.ArrayList()\n\n        let _this = this\n        this.getCanvas().getFigures().each(function (i, figure) {\n          if (figure !== _this && figure.isSelectable() === true && figure.getBoundingBox().isInside(raftBoundingBox)) {\n            // Don't add the figure if it is already catched by another composite with a higher z-index\n            //\n            if (_this.getNextComposite(figure) !== _this) {\n              return\n            }\n            // only add the shape if it is in front of the raft\n            if (figure.getZOrder() > zIndex) {\n              _this.aboardFigures.add(figure)\n            }\n          }\n        })\n      }\n      return this.aboardFigures\n    },\n\n    /**\n     *\n     * return the next potential composite parent figure\n     *\n     * @param {draw2d.Figure} figureToTest\n     * @returns {draw2d.Figure}\n     */\n    getNextComposite: function (figureToTest) {\n      let nextComposite = null\n      this.getCanvas().getFigures().each( (i, figure) => {\n        if (figureToTest === figure) {\n          return\n        }\n        if (figure instanceof draw2d.shape.composite.Composite) {\n          if (nextComposite !== null && nextComposite.getZOrder() > figure.getZOrder()) {\n            return\n          }\n\n          if (figure.getBoundingBox().contains(figureToTest.getBoundingBox())) {\n            nextComposite = figure\n          }\n        }\n      })\n\n      return nextComposite\n    }\n})\n\n\n\n\n\n\n","import draw2d from 'packages'\n\n/**\n * @class\n * The Resizehandles for Figures.\n\n * <pre>\n * Possible Type:\n *\n *   1             2               3\n *    O-----------O-------------O\n *    |                         |\n *    |                         |\n *   8 O           + 9           O 4\n *    |                         |\n *    |                         |\n *    O-----------O-------------O\n *   7             6               5\n * </pre>\n *\n * @author Andreas Herz\n * @extends draw2d.ResizeHandle\n */\ndraw2d.shape.composite.RaftResizeHandle = draw2d.ResizeHandle.extend(\n  /** @lends draw2d.shape.composite.RaftResizeHandle.prototype */\n  {\n\n  NAME: \"draw2d.shape.composite.RaftResizeHandle\",\n\n  /**\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   * @param {draw2d.Figure} the owner if the resize handle\n   * @param {Number} type the type of the ResizeHandle.\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr,setter,getter)\n  },\n\n\n  /**\n   *\n   * Called by the framework if the figure is moved by user interaction.\n   *\n   * @param {Number} dx the move x offset\n   * @param {Number} dy the move y offset\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   *\n   */\n  onDrag: function (dx, dy, dx2, dy2, shiftKey, ctrlKey) {\n    if (this.isDraggable() === false) {\n      return\n    }\n\n    let oldX = this.getAbsoluteX()\n    let oldY = this.getAbsoluteY()\n\n    // call the super.drag method with all snapTo### handler and adjustments\n    draw2d.shape.basic.Rectangle.prototype.onDrag.call(this,dx, dy, dx2, dy2); //DON'T call the super implementation!!!\n\n    let diffX = this.getAbsoluteX() - oldX\n    let diffY = this.getAbsoluteY() - oldY\n\n    let obj = this.owner\n    let objPosX = obj.getAbsoluteX()\n    let objPosY = obj.getAbsoluteY()\n    let objWidth = obj.getWidth()\n    let objHeight = obj.getHeight()\n\n    let newX = null\n    let newY = null\n    let corrPos = null\n    // declare new var just to make the semantic behind the flag more clear\n    let dontMoveChildren = shiftKey===true\n\n    /*\n    *   1             2               3\n    *    O-----------O-------------O\n    *    |                         |\n    *    |                         |\n    *   8 O           + 9           O 4\n    *    |                         |\n    *    |                         |\n    *    O-----------O-------------O\n    *   7             6               5\n    */\n    switch (this.type) {\n      case 1:\n        obj.setDimension(objWidth - diffX, objHeight - diffY)\n        newX = objPosX + (objWidth - obj.getWidth())\n        newY = objPosY + (objHeight - obj.getHeight())\n        obj.setPosition(newX, newY,dontMoveChildren)\n        break\n      case 2:\n        obj.setDimension(objWidth, objHeight - diffY)\n        newX = objPosX\n        newY = objPosY + (objHeight - obj.getHeight())\n        obj.setPosition(newX, newY,dontMoveChildren)\n        break\n      case 3:\n        obj.setDimension(objWidth + diffX, objHeight - diffY)\n        newX = objPosX\n        newY = objPosY + (objHeight - obj.getHeight())\n        obj.setPosition(newX, newY,dontMoveChildren)\n        break\n      case 4:\n        obj.setDimension(objWidth + diffX, objHeight)\n        break\n      case 5:\n        obj.setDimension(objWidth + diffX, objHeight + diffY)\n        break\n      case 6:\n        obj.setDimension(objWidth, objHeight + diffY)\n        break\n      case 7:\n        obj.setDimension(objWidth - diffX, objHeight + diffY)\n        newX = objPosX + (objWidth - obj.getWidth())\n        newY = objPosY\n        obj.setPosition(newX, newY,dontMoveChildren)\n        break\n      case 8:\n        obj.setDimension(objWidth - diffX, objHeight)\n        newX = objPosX + (objWidth - obj.getWidth())\n        newY = objPosY\n        debugger\n        obj.setPosition(newX, newY,dontMoveChildren)\n        break\n    }\n\n    if (newX !== null) {\n      // may the setPosition has changed regarding any constraint or edit policies. In this case\n      // we must adjust the dimension with the related correction\n      //\n      corrPos = obj.getPosition()\n      if (corrPos.x !== newX || corrPos.y !== newY) {\n        obj.setDimension(obj.getWidth() - (corrPos.x - newX), obj.getHeight() - (corrPos.y - newY))\n      }\n    }\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * A StrongComposite is a composite figure with strong assignment of the children and the composite.\n * The child knows everything about the assigned composite and receives events about assignment to a\n * composite.\n *\n *\n * @author Andreas Herz\n * @extends draw2d.shape.composite.Composite\n * @since 4.8.0\n */\ndraw2d.shape.composite.StrongComposite = draw2d.shape.composite.Composite.extend(\n  /** @lends draw2d.shape.composite.StrongComposite.prototype */\n  {\n\n  NAME: \"draw2d.shape.composite.StrongComposite\",\n\n  /**\n   * Creates a new strong composite element which are not assigned to any canvas.\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this.assignedFigures = new draw2d.util.ArrayList()\n\n    this._super(attr, setter, getter)\n  },\n\n  /**\n   * \n   * Check to see if a figure is a descendant of another figure.\n   * <br>\n   * The contains() method returns true if the figure provided by the argument is a descendant of this figure,\n   * whether it is a direct child or nested more deeply. Otherwise, it returns false.\n   *\n   * @param {draw2d.Figure} containedFigure The figure that may be contained by (a descendant of) this figure.\n   * @since 5.5.4\n   */\n  contains: function (containedFigure) {\n    for (let i = 0, len = this.assignedFigures.getSize(); i < len; i++) {\n      let child = this.assignedFigures.get(i)\n      if (child === containedFigure || child.contains(containedFigure)) {\n        return true\n      }\n    }\n    return this._super(containedFigure)\n  },\n\n  /**\n   * \n   * Assign a figure to the composite.\n   *\n   * @param {draw2d.Figure} figure\n   * @template\n   */\n  assignFigure: function (figure) {\n    return this\n  },\n\n  /**\n   * \n   * Remove the given figure from the group assignment\n   *\n   * @param {draw2d.Figure} figure the figure to remove\n   * @template\n   */\n  unassignFigure: function (figure) {\n    return this\n  },\n\n  /**\n   * \n   * Return all assigned figures of the composite\n   *\n   * @returns {draw2d.util.ArrayList}\n   */\n  getAssignedFigures: function () {\n    return this.assignedFigures\n  },\n\n\n  /**\n   * \n   * Called if the user drop this element onto the dropTarget. This event is ONLY fired if the\n   * shape return \"this\" in the onDragEnter method.\n   *\n   *\n   * @param {draw2d.Figure} dropTarget The drop target.\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @template\n   * @since  4.7.4\n   **/\n  onDrop: function (dropTarget, x, y, shiftKey, ctrlKey) {\n  },\n\n  /**\n   * \n   * Called if the user dropped an figure onto this element. This event is ONLY fired if the\n   * shape return \"this\" in the onDragEnter method.\n   *\n   *\n   * @param {draw2d.Figure} droppedFigure The dropped figure.\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   * @template\n   * @since 4.7.4\n   **/\n  onCatch: function (droppedFigure, x, y, shiftKey, ctrlKey) {\n  },\n\n  /**\n   * \n   * Moves the element so it is the closest to the viewer’s eyes, on top of other elements. Additional\n   * the internal model changed as well.\n   *\n   * Optional: Inserts current object in front of the given one.\n   *\n   * @param {draw2d.Figure} [figure] move current object in front of the given one.\n   */\n  toFront: function (figure) {\n    this._super(figure)\n    // ensure that all assigned figures are in front of the composite\n    //\n    let figures = this.getAssignedFigures().clone()\n    figures.sort(function (a, b) {\n      // return 1  if a before b\n      // return -1 if b before a\n      return a.getZOrder() > b.getZOrder() ? -1 : 1\n    })\n    let _this = this\n    figures.each(function (i, f) {\n      f.toFront(_this)\n    })\n\n    return this\n  },\n\n  /**\n   * \n   * Moves the element to the background. Additional\n   * the internal model changed as well.\n   *\n   * @since 4.7.2\n   */\n  toBack: function (figure) {\n    this._super(figure)\n    // ensure that all assigned figures are in front of the composite\n    //\n    let figures = this.getAssignedFigures().clone()\n    figures.sort(function (a, b) {\n      // return 1  if a before b\n      // return -1 if b before a\n      return a.getZOrder() > b.getZOrder() ? -1 : 1\n    })\n\n    let _this = this\n    figures.each(function (i, f) {\n      f.toBack(_this)\n    })\n\n    return this\n  }\n})\n\n\n\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * A WeakComposite is a composite figure with loose coupling of the children and the composite.\n * The child didn't know anything about the assigned composite nor did they receive any events\n * about assignment to a composite.\n *\n * Assignment without obligation.\n *\n *\n * @author Andreas Herz\n * @extends draw2d.shape.composite.Composite\n * @since 4.8.0\n */\ndraw2d.shape.composite.WeakComposite = draw2d.shape.composite.Composite.extend(\n  /** @lends draw2d.shape.composite.WeakComposite.prototype */\n  {\n\n  NAME: \"draw2d.shape.composite.WeakComposite\",\n\n  /**\n   * Creates a new weak composite element which are not assigned to any canvas.\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  }\n})\n\n\n\n\n\n\n","import draw2d from '../../packages'\n\n/**\n * @class\n *\n * Base class for all diagrams.\n *\n * @param {Object} [attr] the configuration of the shape\n * @extends draw2d.SetFigure\n */\ndraw2d.shape.diagram.Diagram = draw2d.SetFigure.extend(\n  /** @lends draw2d.shape.diagram.Diagram */\n  {\n\n  init: function (attr, setter, getter) {\n    this.data = []\n    this.cache = {}\n\n    this._super(\n      {\n        data: [], \n        bgColor: \"#8dabf2\", \n        stroke: 1, \n        color: \"#f0f0f0\", \n        radius: 2, \n        resizeable: true,\n        ...attr},\n      {\n        // @attr {Array} data the data to display in the diagram */\n        data: this.setData,\n        ...setter\n      },\n      {\n        data: this.getData,\n        ...getter\n      }\n    )\n  },\n\n  /**\n   * \n   * Set the data for the chart/diagram element\n   *\n   * @param {Array} data\n   *\n   */\n  setData: function (data) {\n    this.data = data\n    this.cache = {}\n\n\n    if (this.svgNodes !== null) {\n      this.svgNodes.remove()\n      this.svgNodes = this.createSet()\n    }\n\n    this.repaint()\n    this.fireEvent(\"change:data\", {value: data})\n\n  },\n\n  /**\n   * \n   * Return the data of the diagram\n   *\n   * @since 5.0.0\n   */\n  getData: function () {\n    return this.data\n  },\n\n\n  /**\n   * \n   * Set the dimension of the diagram and reset the cached calculation\n   *\n   * @since 5.0.0\n   */\n  setDimension: function (w, h) {\n    this.cache = {}\n    this._super(w, h)\n\n    return this\n  },\n\n\n  /**\n   * \n   * Return the calculate width of the set. This calculates the bounding box of all elements.\n   *\n   * @returns {Number} the calculated width of the label\n   **/\n  getWidth: function () {\n    return this.width\n  },\n\n  /**\n   * \n   * Return the calculated height of the set. This calculates the bounding box of all elements.\n   *\n   * @returns {Number} the calculated height of the label\n   */\n  getHeight: function () {\n    return this.height\n  },\n\n  /**\n   *\n   * @param attributes\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape == null) {\n      return this\n    }\n\n    attributes ??= {}\n\n    attributes.fill ??= \"none\"\n\n    return this._super(attributes)\n  },\n\n  applyTransformation: function () {\n    if (this.isResizeable() === true) {\n      this.svgNodes.transform(\"S\" + this.scaleX + \",\" + this.scaleY + \",\" + this.getAbsoluteX() + \",\" + this.getAbsoluteY() + \"t\" + this.getAbsoluteX() + \",\" + this.getAbsoluteY())\n    }\n    else {\n      this.svgNodes.transform(\"T\" + this.getAbsoluteX() + \",\" + this.getAbsoluteY())\n    }\n\n    return this\n  }\n\n\n})\n","import draw2d from '../../packages'\n\n/**\n * @class\n *\n * Small data pie chart.\n *\n *\n * @example\n *\n *    let pie = new draw2d.shape.diagram.Pie({\n *       diameter:80,\n *       data:[30,60,122,4],\n *       x:100,\n *       y:60\n *    });\n *\n *    canvas.add( pie);\n *\n * @param {Object} [attr] the configuration of the shape\n * @extends draw2d.shape.diagram.Diagram\n */\ndraw2d.shape.diagram.Pie = draw2d.shape.diagram.Diagram.extend(\n  /** @lends draw2d.shape.diagram.Pie */\n  {\n\n  NAME: \"draw2d.shape.diagram.Pie\",\n  COLORS: ['#00A8F0', '#b9dd69', '#f3546a', '#4DA74D', '#9440ED'],\n  TWO_PI: Math.PI * 2,\n\n  init: function (attr, setter, getter) {\n\n\n    this._super(\n      {\n        stroke: 0,\n        ...attr\n      },\n      {\n        // @attr {Number} diameter the diameter of the pie chart */\n        diameter: this.setDiameter,\n        // @attr {Number} radius the radius of the pie chart */\n        radius: this.setRadius,\n        ...setter\n      },\n      {\n        diameter: this.getDiameter,\n        radius: this.getRadius,\n        ...getter\n      })\n  },\n\n  /**\n   *\n   * Set the diameter of the circle. The center of the circle will be retained.\n   *\n   * @param {Number} d The new diameter of the circle.\n   * @since 4.0.0\n   **/\n  setDiameter: function (d) {\n    let center = this.getCenter()\n    this.setDimension(d, d)\n    this.setCenter(center)\n    this.fireEvent(\"change:diameter\", {value: this.width})\n\n    return this\n  },\n\n  /**\n   *\n   * Get the diameter of the circle.\n   *\n   * @since 4.0.0\n   **/\n  getDiameter: function () {\n    return this.getWidth()\n  },\n\n\n  /**\n   *\n   * Set the radius of the circle. The center of the circle will be retained.\n   *\n   * @param {Number} r The new radius of the circle.\n   * @since 4.0.0\n   **/\n  setRadius: function (r) {\n    this.setDiameter(r * 2)\n    this.fireEvent(\"change:radius\", {value: this.width / 2})\n\n    return this\n  },\n\n\n  /**\n   *\n   * Get the center of the circle\n   *\n   */\n  getCenter: function () {\n    let d2 = this.getDiameter() / 2\n    return this.getPosition().translate(d2, d2)\n  },\n\n  /**\n   *\n   * Set the center of the circle.\n   *\n   * @param {Number|draw2d.geo.Point} x the new x coordinate of the center or a draw2d.geo.Point object with the center\n   * @param {Number} y the y coordinate of the new center of the first argument isn't a draw2d.geo.Point object\n   */\n  setCenter: function (x, y) {\n    let pos = new draw2d.geo.Point(x, y)\n    let d2 = this.getDiameter() / 2\n    pos.translate(-d2, -d2)\n    this.setPosition(pos)\n    this.fireEvent(\"change:center\", {value: {x: x, y: y}})\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setData: function (data) {\n\n    // Normalize the Data.\n    // The SUM must be == 1.\n    this.sum = 0\n    data.forEach(val => {\n      this.sum += val\n    })\n    let _sum = 1 / this.sum\n    data.forEach((val, i) => {\n      data[i] = _sum * val\n    })\n\n    //  pass the normalize data to the base implementation\n    //\n    this._super(data)\n    this.fireEvent(\"change:data\", {value: data})\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  createSet: function () {\n    let radius = this.getWidth() / 2\n    let length = this.data.length\n\n    let pie = this.canvas.paper.set()\n\n    let offsetAngle = 0\n\n    for (let i = 0; i < length; i++) {\n      // angle is percent of TWO_PI\n      let angle = this.TWO_PI * this.data[i]\n      let color = this.COLORS[i % length]\n      let seg = this.drawSegment(radius, angle, offsetAngle, 0.1)\n      seg.attr({stroke: this.color.rgba(), fill: color})\n      pie.push(seg)\n      offsetAngle += angle\n    }\n    return pie\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setDimension: function (w, h) {\n    // keep the aspect ration\n    //\n    if (w > h) {\n      this._super(w, w)\n    }\n    else {\n      this._super(h, h)\n    }\n\n    // we must recreate the diagram if we change the size.\n    // low performance. Better: transfor/scale the set. Can be done in the next release\n    //\n    if (this.svgNodes !== null) {\n      this.svgNodes.remove()\n      this.svgNodes = this.createSet()\n    }\n\n    this.repaint()\n\n    return this\n  },\n\n  polarPath: function (radius, theta, rotation) {\n    let x, y\n    x = radius * Math.cos(theta + rotation) + radius\n    y = radius * Math.sin(theta + rotation) + radius\n    return \"L \" + x + \" \" + y + \" \"\n  },\n\n  drawSegment: function (radius, value, rotation, resolution) {\n    let path = \"M \" + radius + \" \" + radius\n\n    for (let i = 0; i < value; i += resolution) {\n      path += this.polarPath(radius, i, rotation)\n    }\n    path += this.polarPath(radius, value, rotation)\n\n    path += \"L \" + radius + \" \" + radius\n    return this.getCanvas().paper.path(path)\n  },\n\n  /**\n   * @inheritdoc\n   */\n  applyTransformation: function () {\n    this.svgNodes.transform(\"T\" + this.getAbsoluteX() + \",\" + this.getAbsoluteY())\n\n    return this\n  }\n\n})\n","import draw2d from '../../packages'\n\n/**\n * @class\n *\n * Small data line diagram.\n *\n *\n * @example\n *\n *    let testData = [];\n *    for(let i=0;i<100;i++) {\n *      testData.push(Math.floor(Math.random() * 100));\n *    }\n *\n *    let sparkline = new draw2d.shape.diagram.Sparkline({\n *    \tdata: testData,\n *     width:150,\n *     height:50,\n *     x:100,\n *     y:60\n *    });\n *\n *    canvas.add( sparkline);\n *\n * @param {Object} [attr] the configuration of the shape\n * @extends draw2d.shape.diagram.Diagram\n */\ndraw2d.shape.diagram.Sparkline = draw2d.shape.diagram.Diagram.extend(\n  /** @lends draw2d.shape.diagram.Sparkline */\n  {\n\n  NAME : \"draw2d.shape.diagram.Sparkline\",\n\n  init: function (attr, setter, getter) {\n    this.min = 0\n    this.max = 10\n    this.padding = 4\n\n    this._super({width: 180, height: 50,...attr}, setter, getter)\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setData: function (data) {\n    if (data.length > 0) {\n      // get the min/max from an array and not only from two elements..\n      this.min = Math.min(...data)\n      this.max = Math.max(...data)\n    }\n    else {\n      this.min = 0\n      this.max = 1\n    }\n\n    if (this.max === this.min) {\n      this.max = this.min + 1\n    }\n\n    this._super(data)\n    this.fireEvent(\"change:data\", {value: data})\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M0 0 l0 0\")\n  },\n\n  /**\n   * @inheritdoc\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    attributes ??= {}\n\n    attributes.fill = \"90-#000:5-#4d4d4d:95\"\n\n    let padding = this.padding\n    let width = this.getWidth() - 2 * padding\n    let height = this.getHeight() - 2 * padding\n    let length = this.data.length\n    let min = this.min\n    let max = this.max\n    let toCoords = function (value, idx) {\n      let step = 1\n      // avoid divisionByZero\n      if (length > 1) {\n        step = (width / (length - 1))\n      }\n\n      return {\n        y: -((value - min) / (max - min) * height) + height + padding,\n        x: padding + idx * step\n      }\n    }\n\n    if (this.svgNodes !== null && (typeof this.cache.pathString === \"undefined\")) {\n      let prev_pt = null\n      this.data.forEach((item, idx) => {\n        let pt = toCoords(item, idx)\n        if (prev_pt === null) {\n          this.cache.pathString = [\"M\", pt.x, pt.y].join(\" \")\n        }\n        else {\n          this.cache.pathString = [this.cache.pathString, \"L\", pt.x, pt.y].join(\" \")\n        }\n        prev_pt = pt\n      })\n\n      this.svgNodes.attr({path: this.cache.pathString, stroke: \"#f0f0f0\"})\n\n    }\n    this._super(attributes)\n\n    return this\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * A Rectangle Figure in a dimetric perspective.\n *\n *\n * @example\n *\n *    let d1 =  new draw2d.shape.dimetric.Rectangle({x:10,y:10});\n *    let d2 =  new draw2d.shape.dimetric.Rectangle({x:100,y:10, bgColor:\"#f0f000\", alpha:0.7, width:100, height:60});\n *\n *    canvas.add(d1);\n *    canvas.add(d2);\n *\n *    canvas.setCurrentSelection(d2);\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.Polygon\n */\ndraw2d.shape.dimetric.Rectangle = draw2d.shape.basic.Polygon.extend(\n  /** @lends draw2d.shape.dimetric.Rectangle.prototype */\n  {\n\n  NAME: \"draw2d.shape.dimetric.Rectangle\",\n\n  /**\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({bgColor: \"#00a3f6\", color: \"#1B1B1B\"}, attr), setter, getter)\n\n    let pos = this.getPosition()\n\n    this.resetVertices()\n\n    let angle26 = Math.atan(.5)\n    let cos30 = Math.cos(angle26)\n    let sin30 = Math.sin(angle26)\n\n    let box = this.getBoundingBox()\n    let w = box.w\n    let h = box.h\n\n    this.addVertex(0, 0) // topLeft\n    this.addVertex(cos30 * w, sin30 * w) // topRight\n    this.addVertex(cos30 * w - cos30 * h, sin30 * w + sin30 * h) // bottomRight\n    this.addVertex(-cos30 * h, sin30 * h) // bottomLeft\n\n    // override the selection handler from the polygon. Because the vertices of\n    // the diamond are not selectable and modifiable\n    //\n    this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy())\n\n    this.setPosition(pos)\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Typical flowchart <b>Document</b> shape\n *\n *\n * @example\n *\n *    let figure = new draw2d.shape.flowchart.Document({\n *       x:100,\n *       y:60\n *    });\n *\n *    canvas.add( figure);\n *\n * @extends draw2d.VectorFigure\n */\ndraw2d.shape.flowchart.Document = draw2d.VectorFigure.extend(\n  /** @lends draw2d.shape.flowchart.Document.prototype */\n  {\n\n  NAME: \"draw2d.shape.flowchart.Document\",\n\n  /**\n   *\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this.amplitude = 0.08 // percentage of height\n\n    this._super(extend({\n      width: 80,\n      height: 50,\n      bgColor: \"#2196f3\",\n      color: \"#1B1B1B\",\n      stroke: 1\n    }, attr), setter, getter)\n  },\n\n  /**\n   * @inheritdoc\n   */\n  createShapeElement: function () {\n    return this.canvas.paper.path(this.calcPath())\n  },\n\n  calcPath: function () {\n    let w = this.getWidth()\n    let h = this.getHeight()\n    let w2 = w / 2\n    let w4 = w / 4\n    let h2 = (h * this.amplitude) | 0\n\n\n    return [\n      \"M\", this.getAbsoluteX(), \",\", this.getAbsoluteY(),\n      \"l\", w, \",\", 0,\n      \"l\", 0, \",\", h - h2,\n      \"q\", -w4, \",\", -h2, -w2, \",\", 0,\n      \"q\", -w4, \",\", h2, -w2, \",\", 0,\n      \"z\"].join(\" \")\n  },\n\n  /**\n   * @inheritdoc\n   **/\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    attributes = extend({}, {\n      path: this.calcPath()\n    }, attributes)\n\n    this._super(attributes)\n\n    return this\n  }\n  /*\n    function draw_curve(Ax, Ay, Bx, By, M) {\n\n    // Find midpoint J\n    let Jx = Ax + (Bx - Ax) / 2\n    let Jy = Ay + (By - Ay) / 2\n\n    // We need a and b to find theta, and we need to know the sign of each to make sure that the orientation is correct.\n    let a = Bx - Ax\n    let asign = (a < 0 ? -1 : 1)\n    let b = By - Ay\n    let bsign = (b < 0 ? -1 : 1)\n    let theta = Math.atan(b / a)\n\n    // Find the point that's perpendicular to J on side\n    let costheta = asign * Math.cos(theta)\n    let sintheta = asign * Math.sin(theta)\n\n    // Find c and d\n    let c = M * sintheta\n    let d = M * costheta\n\n    // Use c and d to find Kx and Ky\n    let Kx = Jx - c\n    let Ky = Jy + d\n\n    return \"M\" + Ax + \",\" + Ay +\n           \"Q\" + Kx + \",\" + Ky +\n           \" \" + Bx + \",\" + By\n   }*/\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Acw();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Acw = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Acw.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Acw\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M19.275,3.849l1.695,8.56l1.875-1.642c2.311,3.59,1.72,8.415-1.584,11.317c-2.24,1.96-5.186,2.57-7.875,1.908l-0.84,3.396c3.75,0.931,7.891,0.066,11.02-2.672c4.768-4.173,5.521-11.219,1.94-16.279l2.028-1.775L19.275,3.849zM8.154,20.232c-2.312-3.589-1.721-8.416,1.582-11.317c2.239-1.959,5.186-2.572,7.875-1.909l0.842-3.398c-3.752-0.93-7.893-0.067-11.022,2.672c-4.765,4.174-5.519,11.223-1.939,16.283l-2.026,1.772l8.26,2.812l-1.693-8.559L8.154,20.232z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Alarm();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Alarm = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Alarm.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Alarm\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M8.179,20.115c-0.478,0.277-0.642,0.889-0.365,1.366c0.275,0.479,0.889,0.642,1.365,0.366c0.479-0.275,0.643-0.888,0.367-1.367C9.27,20.004,8.658,19.84,8.179,20.115zM9.18,12.239c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,13.126,9.657,12.516,9.18,12.239zM8.625,17.043c-0.001-0.552-0.448-0.999-1.001-1c-0.553,0-1,0.448-1,1c0,0.553,0.449,1,1,1C8.176,18.043,8.624,17.596,8.625,17.043zM16.312,3.957V3.031h1c0.275,0,0.5-0.225,0.5-0.5v-0.5c0-0.275-0.225-0.5-0.5-0.5h-3.625c-0.275,0-0.5,0.225-0.5,0.5v0.5c0,0.275,0.225,0.5,0.5,0.5h1v0.926C7.819,4.381,2.376,10.068,2.374,17.042C2.376,24.291,8.251,30.166,15.5,30.169c7.249-0.003,13.124-5.878,13.125-13.127C28.624,10.067,23.181,4.38,16.312,3.957zM15.5,27.166C9.909,27.157,5.385,22.633,5.375,17.042C5.385,11.451,9.909,6.927,15.5,6.917c5.59,0.01,10.115,4.535,10.124,10.125C25.615,22.633,21.091,27.157,15.5,27.166zM12.062,22.998c-0.478-0.275-1.089-0.111-1.366,0.367c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.277,1.091,0.111,1.365-0.365C12.704,23.887,12.54,23.275,12.062,22.998zM12.062,11.088c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,11.2,11.584,11.364,12.062,11.088zM22.822,13.971c0.478-0.275,0.643-0.888,0.366-1.366c-0.275-0.478-0.89-0.642-1.366-0.366c-0.479,0.278-0.642,0.89-0.366,1.367C21.732,14.083,22.344,14.247,22.822,13.971zM15.501,23.92c-0.552,0-1,0.447-1,1c0,0.552,0.448,1,1,1s1-0.448,1-1C16.501,24.367,16.053,23.92,15.501,23.92zM19.938,9.355c-0.477-0.276-1.091-0.111-1.365,0.366c-0.275,0.48-0.111,1.091,0.366,1.367s1.089,0.112,1.366-0.366C20.581,10.245,20.418,9.632,19.938,9.355zM23.378,16.042c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1c0.551,0,1-0.447,1-1C24.378,16.492,23.929,16.042,23.378,16.042zM22.823,20.115c-0.48-0.275-1.092-0.111-1.367,0.365c-0.275,0.479-0.112,1.091,0.367,1.367c0.477,0.275,1.089,0.112,1.365-0.366C23.464,21.004,23.3,20.391,22.823,20.115zM15.501,8.167c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.889-0.365,1.366c0.275,0.479,0.889,0.642,1.365,0.366l3.305-1.676c0.055,0.006,0.109,0.017,0.166,0.017c0.828,0,1.5-0.672,1.5-1.5l-0.5-7.876C16.501,8.614,16.053,8.167,15.501,8.167zM18.939,22.998c-0.479,0.276-0.643,0.888-0.366,1.367c0.275,0.477,0.888,0.642,1.366,0.365c0.478-0.276,0.642-0.889,0.366-1.365C20.028,22.886,19.417,22.723,18.939,22.998zM11.197,3.593c-0.836-1.04-2.103-1.718-3.541-1.718c-2.52,0-4.562,2.042-4.562,4.562c0,0.957,0.297,1.843,0.8,2.576C5.649,6.484,8.206,4.553,11.197,3.593zM27.106,9.014c0.503-0.733,0.8-1.619,0.8-2.576c0-2.52-2.043-4.562-4.562-4.562c-1.438,0-2.704,0.678-3.541,1.717C22.794,4.553,25.351,6.484,27.106,9.014z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Anonymous();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Anonymous = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Anonymous.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Anonymous\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.523,23.813c-0.518-0.51-6.795-2.938-7.934-3.396c-1.132-0.451-1.584-1.697-1.584-1.697s-0.51,0.282-0.51-0.51c0-0.793,0.51,0.51,1.021-2.548c0,0,1.414-0.397,1.133-3.68l-0.338,0.001c0,0,0.85-3.511,0-4.699c-0.854-1.188-1.188-1.981-3.062-2.548c-1.869-0.567-1.188-0.454-2.547-0.396c-1.359,0.057-2.492,0.793-2.492,1.188c0,0-0.849,0.057-1.188,0.397c-0.34,0.34-0.906,1.924-0.906,2.32s0.283,3.059,0.566,3.624l-0.337,0.112c-0.283,3.283,1.132,3.681,1.132,3.681c0.509,3.058,1.019,1.755,1.019,2.548c0,0.792-0.51,0.51-0.51,0.51s-0.452,1.246-1.584,1.697c-1.132,0.453-7.416,2.887-7.927,3.396c-0.511,0.521-0.453,2.896-0.453,2.896h26.954C28.977,26.709,29.039,24.332,28.523,23.813zM16.618,13.693c-0.398-0.251-0.783-1.211-0.783-1.64c0-0.133,0-0.236,0-0.236c-0.105-0.106-0.574-0.096-0.67,0c0,0,0,0.104,0,0.236c0,0.429-0.385,1.389-0.783,1.64c-0.399,0.251-1.611,0.237-2.084-0.236c-0.473-0.473-0.524-1.663-0.643-1.78c-0.118-0.119-0.185-0.185-0.185-0.185l0.029-0.414c0,0,0.842-0.207,1.699-0.207s1.803,0.502,1.803,0.502c0.231-0.074,0.784-0.083,0.996,0c0,0,0.945-0.502,1.803-0.502s1.699,0.207,1.699,0.207l0.029,0.414c0,0-0.066,0.066-0.185,0.185c-0.118,0.118-0.169,1.308-0.643,1.78C18.229,13.93,17.018,13.944,16.618,13.693z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Apple();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Apple = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Apple.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Apple\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.32,10.85c-1.743,1.233-2.615,2.719-2.615,4.455c0,2.079,1.078,3.673,3.232,4.786c-0.578,1.677-1.416,3.134-2.514,4.375c-1.097,1.241-2.098,1.862-3.004,1.862c-0.427,0-1.009-0.143-1.748-0.423l-0.354-0.138c-0.725-0.281-1.363-0.423-1.92-0.423c-0.525,0-1.1,0.11-1.725,0.331l-0.445,0.16l-0.56,0.229c-0.441,0.176-0.888,0.264-1.337,0.264c-1.059,0-2.228-0.872-3.507-2.616c-1.843-2.498-2.764-5.221-2.764-8.167c0-2.095,0.574-3.781,1.725-5.061c1.149-1.279,2.673-1.92,4.568-1.92c0.709,0,1.371,0.13,1.988,0.389l0.423,0.172l0.445,0.183c0.396,0.167,0.716,0.251,0.959,0.251c0.312,0,0.659-0.072,1.04-0.217l0.582-0.229l0.435-0.16c0.693-0.251,1.459-0.377,2.297-0.377C21.512,8.576,23.109,9.334,24.32,10.85zM19.615,3.287c0.021,0.267,0.033,0.473,0.033,0.617c0,1.317-0.479,2.473-1.438,3.467s-2.075,1.49-3.347,1.49c-0.038-0.297-0.058-0.51-0.058-0.639c0-1.12,0.445-2.171,1.337-3.153c0.891-0.982,1.922-1.558,3.096-1.725C19.32,3.329,19.447,3.311,19.615,3.287z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Apps();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Apps = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Apps.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Apps\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.359,18.424l-2.326,1.215c0.708,1.174,1.384,2.281,1.844,3.033l2.043-1.066C25.538,20.822,24.966,19.652,24.359,18.424zM19.143,14.688c0.445,0.84,1.342,2.367,2.274,3.926l2.414-1.261c-0.872-1.769-1.72-3.458-2.087-4.122c-0.896-1.621-1.982-3.108-3.454-5.417c-1.673-2.625-3.462-5.492-4.052-4.947c-1.194,0.384,1.237,4.094,1.876,5.715C16.73,10.147,17.991,12.512,19.143,14.688zM26.457,22.673l-1.961,1.022l1.982,4.598c0,0,0.811,0.684,1.92,0.213c1.104-0.469,0.81-1.706,0.81-1.706L26.457,22.673zM24.35,15.711c0.168,0.339,2.924,5.93,2.924,5.93h1.983v-5.93H24.35zM18.34,15.704h-4.726l-3.424,5.935h11.66C21.559,21.159,18.771,16.479,18.34,15.704zM3.231,21.613l3.437-5.902H2.083v5.93h1.133L3.231,21.613zM15.048,10.145c0-0.93-0.754-1.685-1.685-1.685c-0.661,0-1.231,0.381-1.507,0.936l2.976,1.572C14.97,10.725,15.048,10.444,15.048,10.145zM14.343,12.06l-3.188-1.684L9.62,13.012l3.197,1.689L14.343,12.06zM3.192,26.886l-0.384,1.108v0.299l0.298-0.128l0.725-0.896l2.997-2.354l-3.137-1.651L3.192,26.886zM9.02,14.044l-4.757,8.17l3.23,1.706l4.728-8.186L9.02,14.044z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ArrowDown();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ArrowDown = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ArrowDown.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.ArrowDown\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M5.318,6.684L15.5,24.316L25.682,6.684H5.318z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ArrowLeft();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ArrowLeft = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ArrowLeft.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.ArrowLeft\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.316,5.318L6.684,15.5l17.632,10.182V5.318L24.316,5.318z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ArrowLeft2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ArrowLeft2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ArrowLeft2.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.ArrowLeft2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.871,9.814 15.684,16.001 21.871,22.188 18.335,25.725 8.612,16.001 18.335,6.276z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ArrowRight();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ArrowRight = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ArrowRight.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.ArrowRight\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ArrowRight2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ArrowRight2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ArrowRight2.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.ArrowRight2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M10.129,22.186 16.316,15.999 10.129,9.812 13.665,6.276 23.389,15.999 13.665,25.725z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ArrowUp();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ArrowUp = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ArrowUp.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.ArrowUp\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.682,24.316L15.5,6.684L5.318,24.316H25.682z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Aumade();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Aumade = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Aumade.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Aumade\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.513,24.52c-0.131-0.217-0.14-0.481-0.022-0.711l1.987-3.844l0,0c0.186-0.357,0.625-0.497,0.981-0.312c0.357,0.188,0.498,0.625,0.312,0.982l-1.801,3.48l2.228,3.699h12.269l-14.8-25.631L6.433,18.178c0.434,0.242,0.909,0.479,1.391,0.654c0.571,0.211,1.148,0.342,1.658,0.342c0.276,0,0.579-0.078,0.916-0.238c0.337-0.158,0.7-0.396,1.073-0.688c0.749-0.582,1.527-1.354,2.334-2.021c0.539-0.442,1.091-0.844,1.706-1.099c0.352-0.145,0.729-0.239,1.128-0.239c0.622,0,1.174,0.214,1.622,0.5c0.449,0.287,0.813,0.646,1.11,0.995c0.59,0.697,0.902,1.359,0.924,1.394l0,0c0.18,0.361,0.021,0.801-0.341,0.977c-0.356,0.176-0.798,0.021-0.978-0.34c0-0.002-0.002-0.004-0.004-0.007c-0.002-0.011-0.008-0.021-0.018-0.034c-0.018-0.033-0.043-0.082-0.078-0.146c-0.07-0.125-0.179-0.305-0.312-0.496c-0.271-0.391-0.668-0.845-1.092-1.104c-0.281-0.178-0.561-0.272-0.844-0.272c-0.216,0-0.479,0.069-0.788,0.229c-0.309,0.153-0.653,0.396-1.016,0.688c-0.727,0.584-1.511,1.362-2.351,2.033c-0.562,0.445-1.15,0.853-1.809,1.103c-0.375,0.143-0.776,0.229-1.195,0.229c-0.749,0-1.48-0.181-2.164-0.433c-0.58-0.219-1.125-0.482-1.613-0.764L0.86,27.816h15.63L14.513,24.52zM18.214,22.242c0.222-0.557,0.537-1.217,0.963-1.848c0.427-0.627,0.957-1.232,1.646-1.646c0.379-0.229,0.812-0.391,1.282-0.438l-0.604-0.934l0,0c-0.22-0.339-0.123-0.789,0.215-1.009c0.341-0.219,0.789-0.123,1.013,0.216l1.545,2.391c0.184,0.274,0.147,0.646-0.075,0.893c-0.228,0.247-0.591,0.305-0.886,0.145c-0.354-0.191-0.646-0.258-0.901-0.258c-0.291,0-0.562,0.084-0.845,0.25c-0.277,0.164-0.562,0.414-0.813,0.719c-0.519,0.607-0.937,1.422-1.185,2.055c-0.111,0.285-0.387,0.466-0.678,0.466c-0.092,0-0.183-0.021-0.271-0.056C18.249,23.039,18.064,22.615,18.214,22.242z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.BarChart();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.BarChart = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.BarChart.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.BarChart\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.25,8.375V28h6.5V8.375H21.25zM12.25,28h6.5V4.125h-6.5V28zM3.25,28h6.5V12.625h-6.5V28z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.BioHazard();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.BioHazard = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.BioHazard.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.BioHazard\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M26.154,13.988c-0.96-0.554-1.982-0.892-3.019-1.032c0.396-0.966,0.616-2.023,0.616-3.131c0-4.399-3.438-8.001-7.772-8.264c3.245,0.258,5.803,2.979,5.803,6.292c0,3.373-2.653,6.123-5.983,6.294v1.292c0.908,0.144,1.605,0.934,1.605,1.883c0,0.232-0.043,0.454-0.118,0.66l1.181,0.683c1.826-2.758,5.509-3.658,8.41-1.981c2.896,1.672,3.965,5.299,2.506,8.254C31.386,21.038,29.992,16.204,26.154,13.988zM4.122,16.587c2.92-1.686,6.628-0.764,8.442,2.034l1.141-0.657c-0.072-0.2-0.109-0.417-0.109-0.642c0-0.909,0.638-1.67,1.489-1.859v-1.319c-3.3-0.202-5.92-2.94-5.92-6.292c0-3.297,2.532-6.007,5.757-6.286c-4.312,0.285-7.729,3.875-7.729,8.258c0,1.078,0.206,2.106,0.581,3.05c-1.004,0.147-1.999,0.481-2.931,1.02c-3.812,2.201-5.209,6.985-3.264,10.87C0.174,21.823,1.251,18.244,4.122,16.587zM11.15,11.452c0.114,0.139,0.235,0.271,0.362,0.398c0.126,0.126,0.259,0.247,0.397,0.361c0.102,0.084,0.211,0.16,0.318,0.236c0.93-0.611,2.045-0.969,3.244-0.969c1.201,0,2.312,0.357,3.242,0.969c0.107-0.077,0.217-0.152,0.318-0.236c0.139-0.114,0.271-0.235,0.397-0.361c0.127-0.127,0.248-0.259,0.362-0.398c0.113-0.138,0.222-0.283,0.323-0.431c-1.307-0.956-2.908-1.528-4.643-1.528c-0.042,0-0.083-0.001-0.124,0c-0.019,0-0.04-0.001-0.06,0c-1.666,0.038-3.201,0.605-4.462,1.528C10.929,11.17,11.037,11.314,11.15,11.452zM9.269,16.787c-0.168-0.062-0.338-0.117-0.512-0.164c-0.173-0.047-0.348-0.083-0.525-0.113c-0.177-0.03-0.355-0.053-0.535-0.065c-0.175,1.609,0.13,3.282,0.998,4.786c0.868,1.503,2.164,2.606,3.645,3.259c0.079-0.162,0.15-0.328,0.212-0.496c0.063-0.169,0.118-0.338,0.164-0.512c0.047-0.173,0.087-0.349,0.115-0.525c0.022-0.13,0.034-0.262,0.046-0.394c-0.993-0.5-1.86-1.286-2.461-2.325c-0.6-1.04-0.847-2.182-0.783-3.294C9.512,16.889,9.392,16.833,9.269,16.787zM18.122,22.657c0.014,0.132,0.024,0.263,0.046,0.394c0.03,0.177,0.067,0.352,0.113,0.524c0.047,0.174,0.102,0.346,0.165,0.514c0.062,0.169,0.132,0.333,0.212,0.495c1.48-0.653,2.777-1.755,3.644-3.257c0.868-1.504,1.176-3.179,1.001-4.788c-0.18,0.013-0.358,0.035-0.535,0.065c-0.177,0.029-0.353,0.067-0.525,0.113s-0.345,0.101-0.513,0.163c-0.124,0.047-0.241,0.105-0.362,0.16c0.063,1.11-0.183,2.253-0.784,3.292C19.984,21.373,19.116,22.157,18.122,22.657zM20.569,27.611c-2.92-1.687-3.977-5.358-2.46-8.329l-1.192-0.689c-0.349,0.389-0.854,0.634-1.417,0.634c-0.571,0-1.086-0.254-1.436-0.653l-1.146,0.666c1.475,2.96,0.414,6.598-2.488,8.272c-2.888,1.668-6.552,0.791-8.386-1.935c2.38,3.667,7.249,4.87,11.079,2.658c0.929-0.535,1.711-1.227,2.339-2.018c0.64,0.832,1.45,1.554,2.416,2.112c3.835,2.213,8.709,1.006,11.086-2.671C27.132,28.396,23.463,29.282,20.569,27.611z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Book();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Book = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Book.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Book\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.754,4.626c-0.233-0.161-0.536-0.198-0.802-0.097L12.16,9.409c-0.557,0.213-1.253,0.316-1.968,0.316c-0.997,0.002-2.029-0.202-2.747-0.48C7.188,9.148,6.972,9.04,6.821,8.943c0.056-0.024,0.12-0.05,0.193-0.075L18.648,4.43l1.733,0.654V3.172c0-0.284-0.14-0.554-0.374-0.714c-0.233-0.161-0.538-0.198-0.802-0.097L6.414,7.241c-0.395,0.142-0.732,0.312-1.02,0.564C5.111,8.049,4.868,8.45,4.872,8.896c0,0.012,0.004,0.031,0.004,0.031v17.186c0,0.008-0.003,0.015-0.003,0.021c0,0.006,0.003,0.01,0.003,0.016v0.017h0.002c0.028,0.601,0.371,0.983,0.699,1.255c1.034,0.803,2.769,1.252,4.614,1.274c0.874,0,1.761-0.116,2.583-0.427l12.796-4.881c0.337-0.128,0.558-0.448,0.558-0.809V5.341C26.128,5.057,25.988,4.787,25.754,4.626zM5.672,11.736c0.035,0.086,0.064,0.176,0.069,0.273l0.004,0.054c0.016,0.264,0.13,0.406,0.363,0.611c0.783,0.626,2.382,1.08,4.083,1.093c0.669,0,1.326-0.083,1.931-0.264v1.791c-0.647,0.143-1.301,0.206-1.942,0.206c-1.674-0.026-3.266-0.353-4.509-1.053V11.736zM10.181,24.588c-1.674-0.028-3.266-0.354-4.508-1.055v-2.712c0.035,0.086,0.065,0.176,0.07,0.275l0.002,0.053c0.018,0.267,0.13,0.408,0.364,0.613c0.783,0.625,2.381,1.079,4.083,1.091c0.67,0,1.327-0.082,1.932-0.262v1.789C11.476,24.525,10.821,24.588,10.181,24.588z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Bookmark();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Bookmark = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Bookmark.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Bookmark\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M17.396,1.841L6.076,25.986l7.341-4.566l1.186,8.564l11.32-24.146L17.396,1.841zM19.131,9.234c-0.562-0.264-0.805-0.933-0.541-1.495c0.265-0.562,0.934-0.805,1.496-0.541s0.805,0.934,0.541,1.496S19.694,9.498,19.131,9.234z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Books();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Books = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Books.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Books\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M26.679,7.858c-0.176-0.138-0.404-0.17-0.606-0.083l-9.66,4.183c-0.42,0.183-0.946,0.271-1.486,0.271c-0.753,0.002-1.532-0.173-2.075-0.412c-0.194-0.083-0.356-0.176-0.471-0.259c0.042-0.021,0.09-0.042,0.146-0.064l8.786-3.804l1.31,0.561V6.612c0-0.244-0.106-0.475-0.283-0.612c-0.176-0.138-0.406-0.17-0.605-0.083l-9.66,4.183c-0.298,0.121-0.554,0.268-0.771,0.483c-0.213,0.208-0.397,0.552-0.394,0.934c0,0.01,0.003,0.027,0.003,0.027v14.73c0,0.006-0.002,0.012-0.002,0.019c0,0.005,0.002,0.007,0.002,0.012v0.015h0.002c0.021,0.515,0.28,0.843,0.528,1.075c0.781,0.688,2.091,1.073,3.484,1.093c0.66,0,1.33-0.1,1.951-0.366l9.662-4.184c0.255-0.109,0.422-0.383,0.422-0.692V8.471C26.961,8.227,26.855,7.996,26.679,7.858zM20.553,5.058c-0.017-0.221-0.108-0.429-0.271-0.556c-0.176-0.138-0.404-0.17-0.606-0.083l-9.66,4.183C9.596,8.784,9.069,8.873,8.53,8.873C7.777,8.874,6.998,8.699,6.455,8.46C6.262,8.378,6.099,8.285,5.984,8.202C6.026,8.181,6.075,8.16,6.13,8.138l8.787-3.804l1.309,0.561V3.256c0-0.244-0.106-0.475-0.283-0.612c-0.176-0.138-0.407-0.17-0.606-0.083l-9.66,4.183C5.379,6.864,5.124,7.011,4.907,7.227C4.693,7.435,4.51,7.779,4.513,8.161c0,0.011,0.003,0.027,0.003,0.027v14.73c0,0.006-0.001,0.013-0.001,0.019c0,0.005,0.001,0.007,0.001,0.012v0.016h0.002c0.021,0.515,0.28,0.843,0.528,1.075c0.781,0.688,2.091,1.072,3.485,1.092c0.376,0,0.754-0.045,1.126-0.122V11.544c-0.01-0.7,0.27-1.372,0.762-1.856c0.319-0.315,0.708-0.564,1.19-0.756L20.553,5.058z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Bubble();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Bubble = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Bubble.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Bubble\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Bug();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Bug = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Bug.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Bug\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.589,10.903l-5.828,1.612c-0.534-1.419-1.338-2.649-2.311-3.628l3.082-5.44c0.271-0.48,0.104-1.092-0.38-1.365c-0.479-0.271-1.09-0.102-1.36,0.377l-2.924,5.162c-0.604-0.383-1.24-0.689-1.9-0.896c-0.416-1.437-1.652-2.411-3.058-2.562c-0.001-0.004-0.002-0.008-0.003-0.012c-0.061-0.242-0.093-0.46-0.098-0.65c-0.005-0.189,0.012-0.351,0.046-0.479c0.037-0.13,0.079-0.235,0.125-0.317c0.146-0.26,0.34-0.43,0.577-0.509c0.023,0.281,0.142,0.482,0.352,0.601c0.155,0.088,0.336,0.115,0.546,0.086c0.211-0.031,0.376-0.152,0.496-0.363c0.105-0.186,0.127-0.389,0.064-0.607c-0.064-0.219-0.203-0.388-0.414-0.507c-0.154-0.087-0.314-0.131-0.482-0.129c-0.167,0.001-0.327,0.034-0.481,0.097c-0.153,0.063-0.296,0.16-0.429,0.289c-0.132,0.129-0.241,0.271-0.33,0.426c-0.132,0.234-0.216,0.496-0.25,0.783c-0.033,0.286-0.037,0.565-0.009,0.84c0.017,0.16,0.061,0.301,0.094,0.449c-0.375-0.021-0.758,0.002-1.14,0.108c-0.482,0.133-0.913,0.36-1.28,0.653c-0.052-0.172-0.098-0.344-0.18-0.518c-0.116-0.249-0.263-0.486-0.438-0.716c-0.178-0.229-0.384-0.41-0.618-0.543C9.904,3.059,9.737,2.994,9.557,2.951c-0.18-0.043-0.352-0.052-0.516-0.027s-0.318,0.08-0.463,0.164C8.432,3.172,8.318,3.293,8.23,3.445C8.111,3.656,8.08,3.873,8.136,4.092c0.058,0.221,0.181,0.384,0.367,0.49c0.21,0.119,0.415,0.138,0.611,0.056C9.31,4.556,9.451,4.439,9.539,4.283c0.119-0.21,0.118-0.443-0.007-0.695c0.244-0.055,0.497-0.008,0.757,0.141c0.081,0.045,0.171,0.115,0.27,0.208c0.097,0.092,0.193,0.222,0.286,0.388c0.094,0.166,0.179,0.368,0.251,0.608c0.013,0.044,0.023,0.098,0.035,0.146c-0.911,0.828-1.357,2.088-1.098,3.357c-0.582,0.584-1.072,1.27-1.457,2.035l-5.16-2.926c-0.48-0.271-1.092-0.102-1.364,0.377C1.781,8.404,1.95,9.016,2.43,9.289l5.441,3.082c-0.331,1.34-0.387,2.807-0.117,4.297l-5.828,1.613c-0.534,0.147-0.846,0.699-0.698,1.231c0.147,0.53,0.697,0.843,1.231,0.694l5.879-1.627c0.503,1.057,1.363,2.28,2.371,3.443l-3.194,5.639c-0.272,0.481-0.104,1.092,0.378,1.363c0.239,0.137,0.512,0.162,0.758,0.094c0.248-0.068,0.469-0.229,0.604-0.471l2.895-5.109c2.7,2.594,5.684,4.123,5.778,1.053c1.598,2.56,3.451-0.338,4.502-3.976l5.203,2.947c0.24,0.138,0.514,0.162,0.762,0.094c0.246-0.067,0.467-0.229,0.603-0.471c0.272-0.479,0.104-1.091-0.377-1.362l-5.701-3.229c0.291-1.505,0.422-2.983,0.319-4.138l5.886-1.627c0.53-0.147,0.847-0.697,0.696-1.229C29.673,11.068,29.121,10.756,28.589,10.903z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Calendar();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Calendar = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Calendar.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Calendar\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M11.758,15.318c0.312-0.3,0.408-0.492,0.408-0.492h0.024c0,0-0.012,0.264-0.012,0.528v5.469h-1.871v1.031h4.87v-1.031H13.33v-7.436h-1.055l-2.027,1.967l0.719,0.744L11.758,15.318zM16.163,21.207c0,0.205,0.024,0.42,0.06,0.647h5.457v-1.031h-4.197c0.023-1.931,4.065-2.362,4.065-5.146c0-1.463-1.114-2.436-2.674-2.436c-1.907,0-2.675,1.607-2.675,1.607l0.875,0.587c0,0,0.6-1.08,1.716-1.08c0.887,0,1.522,0.563,1.522,1.403C20.312,17.754,16.163,18.186,16.163,21.207zM12,3.604h-2v3.335h2V3.604zM23,4.77v3.17h-4V4.77h-6v3.168H9.002V4.77H6.583v21.669h18.833V4.77H23zM24.417,25.438H7.584V10.522h16.833V25.438zM22,3.604h-2v3.335h2V3.604z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Cart();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Cart = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Cart.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Cart\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M29.02,11.754L8.416,9.473L7.16,4.716C7.071,4.389,6.772,4.158,6.433,4.158H3.341C3.114,3.866,2.775,3.667,2.377,3.667c-0.686,0-1.242,0.556-1.242,1.242c0,0.686,0.556,1.242,1.242,1.242c0.399,0,0.738-0.201,0.965-0.493h2.512l5.23,19.8c-0.548,0.589-0.891,1.373-0.891,2.242c0,1.821,1.473,3.293,3.293,3.293c1.82,0,3.294-1.472,3.297-3.293c0-0.257-0.036-0.504-0.093-0.743h5.533c-0.056,0.239-0.092,0.486-0.092,0.743c0,1.821,1.475,3.293,3.295,3.293s3.295-1.472,3.295-3.293c0-1.82-1.473-3.295-3.295-3.297c-0.951,0.001-1.801,0.409-2.402,1.053h-7.136c-0.601-0.644-1.451-1.052-2.402-1.053c-0.379,0-0.738,0.078-1.077,0.196l-0.181-0.685H26.81c1.157-0.027,2.138-0.83,2.391-1.959l1.574-7.799c0.028-0.145,0.041-0.282,0.039-0.414C30.823,12.733,30.051,11.86,29.02,11.754zM25.428,27.994c-0.163,0-0.295-0.132-0.297-0.295c0.002-0.165,0.134-0.297,0.297-0.297s0.295,0.132,0.297,0.297C25.723,27.862,25.591,27.994,25.428,27.994zM27.208,20.499l0.948-0.948l-0.318,1.578L27.208,20.499zM12.755,11.463l1.036,1.036l-1.292,1.292l-1.292-1.292l1.087-1.087L12.755,11.463zM17.253,11.961l0.538,0.538l-1.292,1.292l-1.292-1.292l0.688-0.688L17.253,11.961zM9.631,14.075l0.868-0.868l1.292,1.292l-1.292,1.292l-0.564-0.564L9.631,14.075zM9.335,12.956l-0.328-1.24L9.792,12.5L9.335,12.956zM21.791,16.499l-1.292,1.292l-1.292-1.292l1.292-1.292L21.791,16.499zM21.207,14.5l1.292-1.292l1.292,1.292l-1.292,1.292L21.207,14.5zM18.5,15.791l-1.293-1.292l1.292-1.292l1.292,1.292L18.5,15.791zM17.791,16.499L16.5,17.791l-1.292-1.292l1.292-1.292L17.791,16.499zM14.499,15.791l-1.292-1.292l1.292-1.292l1.292,1.292L14.499,15.791zM13.791,16.499l-1.292,1.291l-1.292-1.291l1.292-1.292L13.791,16.499zM10.499,17.207l1.292,1.292l-0.785,0.784l-0.54-2.044L10.499,17.207zM11.302,20.404l1.197-1.197l1.292,1.292L12.5,21.791l-1.131-1.13L11.302,20.404zM13.208,18.499l1.291-1.292l1.292,1.292L14.5,19.791L13.208,18.499zM16.5,19.207l1.292,1.292L16.5,21.79l-1.292-1.291L16.5,19.207zM17.208,18.499l1.292-1.292l1.291,1.292L18.5,19.79L17.208,18.499zM20.499,19.207l1.292,1.292L20.5,21.79l-1.292-1.292L20.499,19.207zM21.207,18.499l1.292-1.292l1.292,1.292l-1.292,1.292L21.207,18.499zM23.207,16.499l1.292-1.292l1.292,1.292l-1.292,1.292L23.207,16.499zM25.207,14.499l1.292-1.292L27.79,14.5l-1.291,1.292L25.207,14.499zM24.499,13.792l-1.156-1.156l2.082,0.23L24.499,13.792zM21.791,12.5l-1.292,1.292L19.207,12.5l0.29-0.29l2.253,0.25L21.791,12.5zM14.5,11.791l-0.152-0.152l0.273,0.03L14.5,11.791zM10.5,11.792l-0.65-0.65l1.171,0.129L10.5,11.792zM14.5,21.207l1.205,1.205h-2.409L14.5,21.207zM18.499,21.207l1.206,1.206h-2.412L18.499,21.207zM22.499,21.207l1.208,1.207l-2.414-0.001L22.499,21.207zM23.207,20.499l1.292-1.292l1.292,1.292l-1.292,1.292L23.207,20.499zM25.207,18.499l1.292-1.291l1.291,1.291l-1.291,1.292L25.207,18.499zM28.499,17.791l-1.291-1.292l1.291-1.291l0.444,0.444l-0.429,2.124L28.499,17.791zM29.001,13.289l-0.502,0.502l-0.658-0.658l1.016,0.112C28.911,13.253,28.956,13.271,29.001,13.289zM13.487,27.994c-0.161,0-0.295-0.132-0.295-0.295c0-0.165,0.134-0.297,0.295-0.297c0.163,0,0.296,0.132,0.296,0.297C13.783,27.862,13.651,27.994,13.487,27.994zM26.81,22.414h-1.517l1.207-1.207l0.93,0.93C27.243,22.306,27.007,22.428,26.81,22.414z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Ccw();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Ccw = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Ccw.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Ccw\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.249,15.499c-0.009,4.832-3.918,8.741-8.75,8.75c-2.515,0-4.768-1.064-6.365-2.763l2.068-1.442l-7.901-3.703l0.744,8.694l2.193-1.529c2.244,2.594,5.562,4.242,9.26,4.242c6.767,0,12.249-5.482,12.249-12.249H24.249zM15.499,6.75c2.516,0,4.769,1.065,6.367,2.764l-2.068,1.443l7.901,3.701l-0.746-8.693l-2.192,1.529c-2.245-2.594-5.562-4.245-9.262-4.245C8.734,3.25,3.25,8.734,3.249,15.499H6.75C6.758,10.668,10.668,6.758,15.499,6.75z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Chat();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Chat = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Chat.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Chat\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.985,5.972c-7.563,0-13.695,4.077-13.695,9.106c0,2.877,2.013,5.44,5.147,7.108c-0.446,1.479-1.336,3.117-3.056,4.566c0,0,4.015-0.266,6.851-3.143c0.163,0.04,0.332,0.07,0.497,0.107c-0.155-0.462-0.246-0.943-0.246-1.443c0-3.393,3.776-6.05,8.599-6.05c3.464,0,6.379,1.376,7.751,3.406c1.168-1.34,1.847-2.892,1.847-4.552C29.68,10.049,23.548,5.972,15.985,5.972zM27.68,22.274c0-2.79-3.401-5.053-7.599-5.053c-4.196,0-7.599,2.263-7.599,5.053c0,2.791,3.403,5.053,7.599,5.053c0.929,0,1.814-0.116,2.637-0.319c1.573,1.597,3.801,1.744,3.801,1.744c-0.954-0.804-1.447-1.713-1.695-2.534C26.562,25.293,27.68,23.871,27.68,22.274z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Check();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Check = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Check.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Check\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M2.379,14.729 5.208,11.899 12.958,19.648 25.877,6.733 28.707,9.561 12.958,25.308z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Chrome();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Chrome = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Chrome.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Chrome\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.318,7.677c0.071-0.029,0.148-0.046,0.229-0.046h11.949c-2.533-3.915-6.938-6.506-11.949-6.506c-5.017,0-9.428,2.598-11.959,6.522l4.291,7.431C8.018,11.041,11.274,7.796,15.318,7.677zM28.196,8.84h-8.579c2.165,1.357,3.605,3.763,3.605,6.506c0,1.321-0.334,2.564-0.921,3.649c-0.012,0.071-0.035,0.142-0.073,0.209l-5.973,10.347c7.526-0.368,13.514-6.587,13.514-14.205C29.77,13.002,29.201,10.791,28.196,8.84zM15.547,23.022c-2.761,0-5.181-1.458-6.533-3.646c-0.058-0.046-0.109-0.103-0.149-0.171L2.89,8.855c-1,1.946-1.565,4.153-1.565,6.492c0,7.624,5.999,13.846,13.534,14.205l4.287-7.425C18.073,22.698,16.848,23.022,15.547,23.022zM9.08,15.347c0,1.788,0.723,3.401,1.894,4.573c1.172,1.172,2.785,1.895,4.573,1.895c1.788,0,3.401-0.723,4.573-1.895s1.895-2.785,1.895-4.573c0-1.788-0.723-3.4-1.895-4.573c-1.172-1.171-2.785-1.894-4.573-1.894c-1.788,0-3.401,0.723-4.573,1.894C9.803,11.946,9.081,13.559,9.08,15.347z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Clip();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Clip = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Clip.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Clip\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M23.898,6.135c-1.571-1.125-3.758-0.764-4.884,0.808l-8.832,12.331c-0.804,1.122-0.546,2.684,0.577,3.488c1.123,0.803,2.684,0.545,3.488-0.578l6.236-8.706l-0.813-0.583l-6.235,8.707h0c-0.483,0.672-1.42,0.828-2.092,0.347c-0.673-0.481-0.827-1.419-0.345-2.093h0l8.831-12.33l0.001-0.001l-0.002-0.001c0.803-1.119,2.369-1.378,3.489-0.576c1.12,0.803,1.379,2.369,0.577,3.489v-0.001l-9.68,13.516l0.001,0.001c-1.124,1.569-3.316,1.931-4.885,0.808c-1.569-1.125-1.93-3.315-0.807-4.885l7.035-9.822l-0.813-0.582l-7.035,9.822c-1.447,2.02-0.982,4.83,1.039,6.277c2.021,1.448,4.831,0.982,6.278-1.037l9.68-13.516C25.83,9.447,25.47,7.261,23.898,6.135z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Clock();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Clock = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Clock.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Clock\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.5,2.374C8.251,2.375,2.376,8.251,2.374,15.5C2.376,22.748,8.251,28.623,15.5,28.627c7.249-0.004,13.124-5.879,13.125-13.127C28.624,8.251,22.749,2.375,15.5,2.374zM15.5,25.623C9.909,25.615,5.385,21.09,5.375,15.5C5.385,9.909,9.909,5.384,15.5,5.374c5.59,0.01,10.115,4.535,10.124,10.125C25.615,21.09,21.091,25.615,15.5,25.623zM8.625,15.5c-0.001-0.552-0.448-0.999-1.001-1c-0.553,0-1,0.448-1,1c0,0.553,0.449,1,1,1C8.176,16.5,8.624,16.053,8.625,15.5zM8.179,18.572c-0.478,0.277-0.642,0.889-0.365,1.367c0.275,0.479,0.889,0.641,1.365,0.365c0.479-0.275,0.643-0.887,0.367-1.367C9.27,18.461,8.658,18.297,8.179,18.572zM9.18,10.696c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,11.584,9.657,10.973,9.18,10.696zM22.822,12.428c0.478-0.275,0.643-0.888,0.366-1.366c-0.275-0.478-0.89-0.642-1.366-0.366c-0.479,0.278-0.642,0.89-0.366,1.367C21.732,12.54,22.344,12.705,22.822,12.428zM12.062,21.455c-0.478-0.275-1.089-0.111-1.366,0.367c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.277,1.091,0.111,1.365-0.365C12.704,22.344,12.54,21.732,12.062,21.455zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM22.823,18.572c-0.48-0.275-1.092-0.111-1.367,0.365c-0.275,0.479-0.112,1.092,0.367,1.367c0.477,0.275,1.089,0.113,1.365-0.365C23.464,19.461,23.3,18.848,22.823,18.572zM19.938,7.813c-0.477-0.276-1.091-0.111-1.365,0.366c-0.275,0.48-0.111,1.091,0.366,1.367s1.089,0.112,1.366-0.366C20.581,8.702,20.418,8.089,19.938,7.813zM23.378,14.5c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1c0.551,0,1-0.447,1-1C24.378,14.949,23.929,14.5,23.378,14.5zM15.501,6.624c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.889-0.365,1.365c0.275,0.479,0.889,0.643,1.365,0.367l3.305-1.676C15.39,16.99,15.444,17,15.501,17c0.828,0,1.5-0.671,1.5-1.5l-0.5-7.876C16.501,7.072,16.053,6.624,15.501,6.624zM15.501,22.377c-0.552,0-1,0.447-1,1s0.448,1,1,1s1-0.447,1-1S16.053,22.377,15.501,22.377zM18.939,21.455c-0.479,0.277-0.643,0.889-0.366,1.367c0.275,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.889,0.366-1.365C20.028,21.344,19.417,21.18,18.939,21.455z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Cloud();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Cloud = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Cloud.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Cloud\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.345,13.904c0.019-0.195,0.03-0.392,0.03-0.591c0-3.452-2.798-6.25-6.25-6.25c-2.679,0-4.958,1.689-5.847,4.059c-0.589-0.646-1.429-1.059-2.372-1.059c-1.778,0-3.219,1.441-3.219,3.219c0,0.21,0.023,0.415,0.062,0.613c-2.372,0.391-4.187,2.436-4.187,4.918c0,2.762,2.239,5,5,5h15.875c2.762,0,5-2.238,5-5C28.438,16.362,26.672,14.332,24.345,13.904z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Cloud2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Cloud2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Cloud2.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Cloud2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M7.562,24.812c-3.313,0-6-2.687-6-6l0,0c0.002-2.659,1.734-4.899,4.127-5.684l0,0c0.083-2.26,1.937-4.064,4.216-4.066l0,0c0.73,0,1.415,0.19,2.01,0.517l0,0c1.266-2.105,3.57-3.516,6.208-3.517l0,0c3.947,0.002,7.157,3.155,7.248,7.079l0,0c2.362,0.804,4.062,3.034,4.064,5.671l0,0c0,3.313-2.687,6-6,6l0,0H7.562L7.562,24.812zM24.163,14.887c-0.511-0.095-0.864-0.562-0.815-1.079l0,0c0.017-0.171,0.027-0.336,0.027-0.497l0,0c-0.007-2.899-2.352-5.245-5.251-5.249l0,0c-2.249-0.002-4.162,1.418-4.911,3.41l0,0c-0.122,0.323-0.406,0.564-0.748,0.63l0,0c-0.34,0.066-0.694-0.052-0.927-0.309l0,0c-0.416-0.453-0.986-0.731-1.633-0.731l0,0c-1.225,0.002-2.216,0.993-2.22,2.218l0,0c0,0.136,0.017,0.276,0.045,0.424l0,0c0.049,0.266-0.008,0.54-0.163,0.762l0,0c-0.155,0.223-0.392,0.371-0.657,0.414l0,0c-1.9,0.313-3.352,1.949-3.35,3.931l0,0c0.004,2.209,1.792,3.995,4.001,4.001l0,0h15.874c2.209-0.006,3.994-1.792,3.999-4.001l0,0C27.438,16.854,26.024,15.231,24.163,14.887L24.163,14.887\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.CloudDown();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.CloudDown = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.CloudDown.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.CloudDown\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.345,13.904c0.019-0.195,0.03-0.392,0.03-0.591c0-3.452-2.798-6.25-6.25-6.25c-2.679,0-4.958,1.689-5.847,4.059c-0.589-0.646-1.429-1.059-2.372-1.059c-1.778,0-3.219,1.441-3.219,3.219c0,0.21,0.023,0.415,0.062,0.613c-2.372,0.391-4.187,2.436-4.187,4.918c0,2.762,2.239,5,5,5h3.404l-0.707-0.707c-0.377-0.377-0.585-0.879-0.585-1.413c0-0.533,0.208-1.035,0.585-1.412l0.556-0.557c0.4-0.399,0.937-0.628,1.471-0.628c0.027,0,0.054,0,0.08,0.002v-0.472c0-1.104,0.898-2.002,2-2.002h3.266c1.103,0,2,0.898,2,2.002v0.472c0.027-0.002,0.054-0.002,0.081-0.002c0.533,0,1.07,0.229,1.47,0.63l0.557,0.552c0.78,0.781,0.78,2.05,0,2.828l-0.706,0.707h2.403c2.762,0,5-2.238,5-5C28.438,16.362,26.672,14.332,24.345,13.904z M21.033,20.986l-0.556-0.555c-0.39-0.389-0.964-0.45-1.276-0.137c-0.312,0.312-0.568,0.118-0.568-0.432v-1.238c0-0.55-0.451-1-1-1h-3.265c-0.55,0-1,0.45-1,1v1.238c0,0.55-0.256,0.744-0.569,0.432c-0.312-0.313-0.887-0.252-1.276,0.137l-0.556,0.555c-0.39,0.389-0.39,1.024-0.001,1.413l4.328,4.331c0.194,0.194,0.451,0.291,0.707,0.291s0.512-0.097,0.707-0.291l4.327-4.331C21.424,22.011,21.423,21.375,21.033,20.986z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.CloudUp();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.CloudUp = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.CloudUp.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.CloudUp\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.345,13.904c0.019-0.195,0.03-0.392,0.03-0.591c0-3.452-2.798-6.25-6.25-6.25c-2.679,0-4.958,1.689-5.847,4.059c-0.589-0.646-1.429-1.059-2.372-1.059c-1.778,0-3.219,1.441-3.219,3.219c0,0.21,0.023,0.415,0.062,0.613c-2.372,0.391-4.187,2.436-4.187,4.918c0,2.762,2.239,5,5,5h2.312c-0.126-0.266-0.2-0.556-0.2-0.859c0-0.535,0.208-1.04,0.587-1.415l4.325-4.329c0.375-0.377,0.877-0.585,1.413-0.585c0.54,0,1.042,0.21,1.417,0.587l4.323,4.329c0.377,0.373,0.585,0.878,0.585,1.413c0,0.304-0.073,0.594-0.2,0.859h1.312c2.762,0,5-2.238,5-5C28.438,16.362,26.672,14.332,24.345,13.904z M16.706,17.916c-0.193-0.195-0.45-0.291-0.706-0.291s-0.512,0.096-0.707,0.291l-4.327,4.33c-0.39,0.389-0.389,1.025,0.001,1.414l0.556,0.555c0.39,0.389,0.964,0.449,1.276,0.137s0.568-0.119,0.568,0.432v1.238c0,0.549,0.451,1,1,1h3.265c0.551,0,1-0.451,1-1v-1.238c0-0.551,0.256-0.744,0.569-0.432c0.312,0.312,0.887,0.252,1.276-0.137l0.556-0.555c0.39-0.389,0.39-1.025,0.001-1.414L16.706,17.916z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Cloudy();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Cloudy = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Cloudy.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Cloudy\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.378,6.781c0.41,0.988,1.938,0.346,1.524-0.648C15.708,5.667,15.515,5.2,15.32,4.734c-0.289-0.695-0.875-3.233-2.042-2.747c-1.03,0.433-0.128,1.846,0.142,2.494C13.739,5.248,14.059,6.015,14.378,6.781M20.8,7.223c1.094,0.453,1.538-1.551,1.813-2.216c0.281-0.677,1.478-2.565,0.357-3.029c-1.092-0.453-1.537,1.548-1.813,2.216C20.876,4.872,19.68,6.757,20.8,7.223M18.137,6.692c1.183,0,0.829-2.019,0.829-2.742c0-0.732,0.383-2.935-0.829-2.935c-1.183,0-0.828,2.019-0.828,2.742C17.309,4.49,16.926,6.692,18.137,6.692M23.058,8.729c0.852,0.85,2.142-0.972,2.659-1.49c0.512-0.513,2.187-1.687,1.352-2.524c-0.834-0.836-2.013,0.843-2.522,1.353C24.028,6.585,22.198,7.874,23.058,8.729M24.565,10.986c0.448,1.091,2.183-0.01,2.849-0.286c0.676-0.28,2.858-0.771,2.394-1.89c-0.455-1.091-2.181,0.008-2.849,0.285C26.281,9.377,24.102,9.866,24.565,10.986M12.036,8.742c0.752,0.75,1.932-0.415,1.17-1.173c-0.253-0.347-0.646-0.645-0.949-0.946c-0.541-0.539-2.162-2.799-3.068-1.889c-0.79,0.791,0.586,1.755,1.083,2.25C10.859,7.57,11.447,8.156,12.036,8.742M29.365,17.397c-0.768-0.317-1.534-0.635-2.302-0.952c-0.646-0.268-2.07-1.169-2.495-0.135c-0.481,1.168,2.054,1.747,2.751,2.035c0.455,0.188,0.911,0.377,1.367,0.565C29.7,19.331,30.379,17.816,29.365,17.397M29.942,12.817c-0.83,0-1.66,0-2.49,0c-0.701,0-2.357-0.288-2.355,0.83c0,1.262,2.567,0.827,3.319,0.827c0.493,0,0.986,0,1.479-0.001C30.99,14.473,31.043,12.815,29.942,12.817M24.234,18.568c-0.673-0.673-1.773,0.189-1.281,1.007c-0.295-0.264-0.614-0.499-0.961-0.69c3.894-2.866,3.328-9.006-1.021-11.107c-2.024-0.978-4.481-0.828-6.368,0.394c-0.871,0.564-1.603,1.336-2.119,2.236c-0.262,0.456-0.468,0.943-0.612,1.449c-0.074,0.258-0.131,0.521-0.172,0.786c-0.083,0.534-0.109,0.553-0.553,0.871c-0.182-0.957-1.64-0.675-2.326-0.674c-0.815,0.001-1.963-0.217-2.752,0.046c-0.867,0.289-0.652,1.615,0.263,1.613c0.324,0.052,0.701-0.001,1.028-0.001c0.904-0.001,1.809-0.002,2.713-0.003c-0.308,0.352-0.496,0.969-0.94,0.77c-0.467-0.209-0.978-0.319-1.49-0.319c-0.951,0-1.877,0.375-2.561,1.036c-0.681,0.658-1.088,1.569-1.123,2.516c-0.944,0.31-1.791,0.891-2.421,1.658c-2.756,3.354-0.265,8.554,4.058,8.554v-0.002c3.597,0,7.194,0,10.792,0c1.341,0,2.843,0.167,4.168-0.113c3.652-0.772,5.361-5.21,3.133-8.229c0.548,0.547,1.096,1.094,1.644,1.641c0.183,0.183,0.364,0.424,0.575,0.574c0.552,0.552,1.524,0.066,1.403-0.713c-0.097-0.622-1.042-1.267-1.448-1.673C25.319,19.652,24.776,19.11,24.234,18.568M18.137,8.787c4.559,0.009,6.576,5.979,2.912,8.734c-0.637-3.505-4.161-5.824-7.629-5.03C13.943,10.367,15.852,8.792,18.137,8.787M22.895,24.08c-0.633,3.346-4.149,2.879-6.68,2.879c-3.017,0-6.033,0-9.049,0c-0.767,0-1.62,0.084-2.373-0.095c-2.274-0.538-3.416-3.242-2.172-5.235c0.678-1.087,1.568-1.19,2.626-1.67c0.604-0.273,0.456-0.807,0.456-1.331c0.002-0.597,0.284-1.169,0.756-1.533c0.787-0.608,1.943-0.497,2.611,0.234c1.098,1.205,1.96-1.346,2.507-1.893c2.025-2.025,5.475-1.708,7.068,0.684c0.344,0.516,0.581,1.102,0.693,1.712c0.097,0.529-0.115,1.341,0.188,1.796c0.291,0.47,0.943,0.463,1.397,0.68c0.508,0.23,0.963,0.591,1.304,1.034C22.834,22.125,23.064,23.107,22.895,24.08M6.906,9.917c0.881,0.364,1.763,0.727,2.644,1.091c0.353,0.146,0.707,0.292,1.06,0.437c0.997,0.412,1.637-1.119,0.642-1.526C10.47,9.441,9.456,9.177,8.609,8.828c-0.354-0.146-0.707-0.292-1.06-0.437C6.554,7.98,5.912,9.505,6.906,9.917\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Code();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Code = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Code.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Code\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M8.982,7.107L0.322,15.77l8.661,8.662l3.15-3.15L6.621,15.77l5.511-5.511L8.982,7.107zM21.657,7.107l-3.148,3.151l5.511,5.511l-5.511,5.511l3.148,3.15l8.662-8.662L21.657,7.107z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.CodeTalk();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.CodeTalk = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.CodeTalk.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.CodeTalk\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,4.938c-7.732,0-14,4.701-14,10.5c0,1.981,0.741,3.833,2.016,5.414L2,25.272l5.613-1.44c2.339,1.316,5.237,2.106,8.387,2.106c7.732,0,14-4.701,14-10.5S23.732,4.938,16,4.938zM13.704,19.47l-2.338,2.336l-6.43-6.431l6.429-6.432l2.339,2.341l-4.091,4.091L13.704,19.47zM20.775,21.803l-2.337-2.339l4.092-4.09l-4.092-4.092l2.337-2.339l6.43,6.426L20.775,21.803z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.CommandLine();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.CommandLine = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.CommandLine.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.CommandLine\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M2.021,9.748L2.021,9.748V9.746V9.748zM2.022,9.746l5.771,5.773l-5.772,5.771l2.122,2.123l7.894-7.895L4.143,7.623L2.022,9.746zM12.248,23.269h14.419V20.27H12.248V23.269zM16.583,17.019h10.084V14.02H16.583V17.019zM12.248,7.769v3.001h14.419V7.769H12.248z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Connect();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Connect = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Connect.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Connect\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.06,13.719c-0.944-5.172-5.461-9.094-10.903-9.094v4c3.917,0.006,7.085,3.176,7.094,7.094c-0.009,3.917-3.177,7.085-7.094,7.093v4.002c5.442-0.004,9.959-3.926,10.903-9.096h4.69v-3.999H25.06zM20.375,15.719c0-3.435-2.784-6.219-6.219-6.219c-2.733,0-5.05,1.766-5.884,4.218H1.438v4.001h6.834c0.833,2.452,3.15,4.219,5.884,4.219C17.591,21.938,20.375,19.153,20.375,15.719z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Contract();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Contract = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Contract.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Contract\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.083,18.895l-8.428-2.259l2.258,8.428l1.838-1.837l7.053,7.053l2.476-2.476l-7.053-7.053L25.083,18.895zM5.542,11.731l8.428,2.258l-2.258-8.428L9.874,7.398L3.196,0.72L0.72,3.196l6.678,6.678L5.542,11.731zM7.589,20.935l-6.87,6.869l2.476,2.476l6.869-6.869l1.858,1.857l2.258-8.428l-8.428,2.258L7.589,20.935zM23.412,10.064l6.867-6.87l-2.476-2.476l-6.868,6.869l-1.856-1.856l-2.258,8.428l8.428-2.259L23.412,10.064z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Crop();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Crop = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Crop.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Crop\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.303,21.707V8.275l4.48-4.421l-2.021-2.048l-4.126,4.07H8.761V2.083H5.882v3.793H1.8v2.877h4.083v15.832h15.542v4.609h2.878v-4.609H29.2v-2.878H24.303zM19.72,8.753L8.761,19.565V8.753H19.72zM10.688,21.706l10.735-10.591l0.001,10.592L10.688,21.706z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Cross();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Cross = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Cross.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Cross\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Cube();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Cube = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Cube.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Cube\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.5,3.029l-10.8,6.235L4.7,21.735L15.5,27.971l10.8-6.235V9.265L15.5,3.029zM24.988,10.599L16,15.789v10.378c0,0.275-0.225,0.5-0.5,0.5s-0.5-0.225-0.5-0.5V15.786l-8.987-5.188c-0.239-0.138-0.321-0.444-0.183-0.683c0.138-0.238,0.444-0.321,0.683-0.183l8.988,5.189l8.988-5.189c0.238-0.138,0.545-0.055,0.684,0.184C25.309,10.155,25.227,10.461,24.988,10.599z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Customer();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Customer = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Customer.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Customer\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.523,23.813c-0.518-0.51-6.795-2.938-7.934-3.396c-1.132-0.451-1.584-1.697-1.584-1.697s-0.51,0.282-0.51-0.51c0-0.793,0.51,0.51,1.021-2.548c0,0,1.414-0.397,1.133-3.68l-0.338,0.001c0,0,0.85-3.511,0-4.699c-0.854-1.188-1.188-1.981-3.062-2.548c-1.869-0.567-1.188-0.454-2.547-0.396c-1.359,0.057-2.492,0.793-2.492,1.188c0,0-0.849,0.057-1.188,0.397c-0.34,0.34-0.906,1.924-0.906,2.32s0.283,3.059,0.566,3.624l-0.337,0.112c-0.283,3.283,1.132,3.681,1.132,3.681c0.509,3.058,1.019,1.755,1.019,2.548c0,0.792-0.51,0.51-0.51,0.51s-0.452,1.246-1.584,1.697c-1.132,0.453-7.416,2.887-7.927,3.396c-0.511,0.521-0.453,2.896-0.453,2.896h12.036l0.878-3.459l-0.781-0.781l1.344-1.344l1.344,1.344l-0.781,0.781l0.879,3.459h12.035C28.977,26.709,29.039,24.332,28.523,23.813z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Db();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Db = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Db.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Db\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.499,23.438c-3.846,0-7.708-0.987-9.534-3.117c-0.054,0.236-0.09,0.48-0.09,0.737v3.877c0,3.435,4.988,4.998,9.625,4.998s9.625-1.563,9.625-4.998v-3.877c0-0.258-0.036-0.501-0.09-0.737C23.209,22.451,19.347,23.438,15.499,23.438zM15.499,15.943c-3.846,0-7.708-0.987-9.533-3.117c-0.054,0.236-0.091,0.479-0.091,0.736v3.877c0,3.435,4.988,4.998,9.625,4.998s9.625-1.563,9.625-4.998v-3.877c0-0.257-0.036-0.501-0.09-0.737C23.209,14.956,19.347,15.943,15.499,15.943zM15.5,1.066c-4.637,0-9.625,1.565-9.625,5.001v3.876c0,3.435,4.988,4.998,9.625,4.998s9.625-1.563,9.625-4.998V6.067C25.125,2.632,20.137,1.066,15.5,1.066zM15.5,9.066c-4.211,0-7.625-1.343-7.625-3c0-1.656,3.414-3,7.625-3s7.625,1.344,7.625,3C23.125,7.724,19.711,9.066,15.5,9.066z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Detour();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Detour = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Detour.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Detour\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M29.342,15.5l-7.556-4.363v2.614H18.75c-1.441-0.004-2.423,1.002-2.875,1.784c-0.735,1.222-1.056,2.561-1.441,3.522c-0.135,0.361-0.278,0.655-0.376,0.817c-1.626,0-0.998,0-2.768,0c-0.213-0.398-0.571-1.557-0.923-2.692c-0.237-0.676-0.5-1.381-1.013-2.071C8.878,14.43,7.89,13.726,6.75,13.75H2.812v3.499c0,0,0.358,0,1.031,0h2.741c0.008,0.013,0.018,0.028,0.029,0.046c0.291,0.401,0.634,1.663,1.031,2.888c0.218,0.623,0.455,1.262,0.92,1.897c0.417,0.614,1.319,1.293,2.383,1.293H11c2.25,0,1.249,0,3.374,0c0.696,0.01,1.371-0.286,1.809-0.657c1.439-1.338,1.608-2.886,2.13-4.127c0.218-0.608,0.453-1.115,0.605-1.314c0.006-0.01,0.012-0.018,0.018-0.025h2.85v2.614L29.342,15.5zM10.173,14.539c0.568,0.76,0.874,1.559,1.137,2.311c0.04,0.128,0.082,0.264,0.125,0.399h2.58c0.246-0.697,0.553-1.479,1.005-2.228c0.252-0.438,0.621-0.887,1.08-1.272H9.43C9.735,14.003,9.99,14.277,10.173,14.539z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Diagram();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Diagram = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Diagram.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Diagram\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super({width: 50, height: 50, ...attr}, setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M6.812,17.202l7.396-3.665v-2.164h-0.834c-0.414,0-0.808-0.084-1.167-0.237v1.159l-7.396,3.667v2.912h2V17.202zM26.561,18.875v-2.913l-7.396-3.666v-1.158c-0.358,0.152-0.753,0.236-1.166,0.236h-0.832l-0.001,2.164l7.396,3.666v1.672H26.561zM16.688,18.875v-7.501h-2v7.501H16.688zM27.875,19.875H23.25c-1.104,0-2,0.896-2,2V26.5c0,1.104,0.896,2,2,2h4.625c1.104,0,2-0.896,2-2v-4.625C29.875,20.771,28.979,19.875,27.875,19.875zM8.125,19.875H3.5c-1.104,0-2,0.896-2,2V26.5c0,1.104,0.896,2,2,2h4.625c1.104,0,2-0.896,2-2v-4.625C10.125,20.771,9.229,19.875,8.125,19.875zM13.375,10.375H18c1.104,0,2-0.896,2-2V3.75c0-1.104-0.896-2-2-2h-4.625c-1.104,0-2,0.896-2,2v4.625C11.375,9.479,12.271,10.375,13.375,10.375zM18,19.875h-4.625c-1.104,0-2,0.896-2,2V26.5c0,1.104,0.896,2,2,2H18c1.104,0,2-0.896,2-2v-4.625C20,20.771,19.104,19.875,18,19.875z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Disconnect();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Disconnect = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Disconnect.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Disconnect\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M9.219,9.5c-2.733,0-5.05,1.766-5.884,4.218H1.438v4.001h1.897c0.833,2.452,3.15,4.219,5.884,4.219c3.435,0,6.219-2.784,6.219-6.219S12.653,9.5,9.219,9.5zM27.685,13.719c-0.944-5.172-5.461-9.094-10.903-9.094v4c3.917,0.006,7.085,3.176,7.094,7.094c-0.009,3.917-3.177,7.085-7.094,7.093v4.002c5.442-0.004,9.959-3.926,10.903-9.096h2.065v-3.999H27.685z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.DockBottom();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.DockBottom = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.DockBottom.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.DockBottom\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M3.083,7.333v16.334h24.833V7.333H3.083zM24.915,16.833H6.083v-6.501h18.833L24.915,16.833L24.915,16.833z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.DockLeft();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.DockLeft = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.DockLeft.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.DockLeft\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M3.084,7.333v16.334h24.832V7.333H3.084z M11.667,10.332h13.251v10.336H11.667V10.332z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.DockRight();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.DockRight = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.DockRight.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.DockRight\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M3.083,7.333v16.334h24.833V7.333H3.083z M19.333,20.668H6.083V10.332h13.25V20.668z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.DockTop();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.DockTop = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.DockTop.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.DockTop\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M27.916,23.667V7.333H3.083v16.334H27.916zM24.915,20.668H6.083v-6.501h18.833L24.915,20.668L24.915,20.668z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Download();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Download = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Download.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Download\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM16,28.792c-1.549,0-2.806-1.256-2.806-2.806s1.256-2.806,2.806-2.806c1.55,0,2.806,1.256,2.806,2.806S17.55,28.792,16,28.792zM16,21.087l-7.858-6.562h3.469V5.747h8.779v8.778h3.468L16,21.087z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Dry();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Dry = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Dry.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Dry\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.784,26.991c0,1.238-1.329,1.696-1.835,1.696c-0.504,0-1.536-0.413-1.65-1.812c0-0.354-0.288-0.642-0.644-0.642c-0.354,0-0.641,0.287-0.641,0.642c0.045,1.056,0.756,3.052,2.935,3.052c2.432,0,3.166-1.882,3.166-3.144v-8.176l-1.328-0.024C14.787,18.584,14.784,25.889,14.784,26.991zM15.584,9.804c-6.807,0-11.084,4.859-11.587,8.326c0.636-0.913,1.694-1.51,2.89-1.51c1.197,0,2.22,0.582,2.855,1.495c0.638-0.904,1.69-1.495,2.88-1.495c1.2,0,2.26,0.6,2.896,1.517c0.635-0.917,1.83-1.517,3.03-1.517c1.19,0,2.241,0.591,2.879,1.495c0.636-0.913,1.659-1.495,2.855-1.495c1.197,0,2.254,0.597,2.89,1.51C26.669,14.663,22.393,9.804,15.584,9.804zM14.733,7.125v2.081h1.323V7.125c0-0.365-0.296-0.661-0.661-0.661C15.029,6.464,14.733,6.76,14.733,7.125zM7.562,6.015c0.54,0.312,1.229,0.128,1.54-0.412c0.109-0.189,0.157-0.398,0.15-0.602L9.251,3.09L7.59,4.047c-0.178,0.095-0.333,0.24-0.441,0.428C6.837,5.015,7.022,5.703,7.562,6.015zM5.572,11.717c0.109-0.19,0.158-0.398,0.151-0.602L5.721,9.203l-1.66,0.957c-0.178,0.096-0.333,0.241-0.441,0.429c-0.311,0.539-0.127,1.229,0.413,1.539C4.571,12.44,5.26,12.256,5.572,11.717zM10.523,9.355c0.539,0.312,1.229,0.126,1.541-0.412c0.109-0.189,0.156-0.398,0.15-0.603L12.214,6.43l-1.662,0.956c-0.177,0.097-0.332,0.241-0.441,0.43C9.799,8.354,9.984,9.044,10.523,9.355zM15.251,3.998c0.539,0.312,1.229,0.126,1.54-0.412c0.11-0.19,0.157-0.398,0.15-0.603L16.94,1.072l-1.661,0.956c-0.178,0.097-0.332,0.242-0.441,0.43C14.526,2.998,14.711,3.687,15.251,3.998zM19.348,8.914c0.539,0.312,1.228,0.128,1.541-0.412c0.109-0.189,0.156-0.398,0.149-0.602h-0.001V5.988l-1.661,0.957c-0.178,0.096-0.332,0.241-0.441,0.429C18.623,7.914,18.809,8.603,19.348,8.914zM23.633,5.196c0.54,0.312,1.23,0.126,1.542-0.413c0.109-0.189,0.156-0.398,0.149-0.602h-0.001V2.27l-1.662,0.957c-0.177,0.096-0.331,0.24-0.44,0.43C22.909,4.195,23.094,4.885,23.633,5.196zM27.528,8.51l-1.659,0.956c-0.18,0.097-0.334,0.242-0.443,0.43c-0.312,0.539-0.127,1.229,0.413,1.54c0.539,0.312,1.229,0.127,1.541-0.412c0.109-0.19,0.158-0.398,0.151-0.603L27.528,8.51z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Employee();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Employee = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Employee.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Employee\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.523,23.813c-0.518-0.51-6.795-2.938-7.934-3.396c-1.132-0.451-1.584-1.697-1.584-1.697s-0.51,0.282-0.51-0.51c0-0.793,0.51,0.51,1.021-2.548c0,0,1.414-0.397,1.133-3.68l-0.338,0.001c0,0,0.85-3.511,0-4.699c-0.854-1.188-1.188-1.981-3.062-2.548c-1.869-0.567-1.188-0.454-2.547-0.396c-1.359,0.057-2.492,0.793-2.492,1.188c0,0-0.849,0.057-1.188,0.397c-0.34,0.34-0.906,1.924-0.906,2.32s0.283,3.059,0.566,3.624l-0.337,0.112c-0.283,3.283,1.132,3.681,1.132,3.681c0.509,3.058,1.019,1.755,1.019,2.548c0,0.792-0.51,0.51-0.51,0.51s-0.452,1.246-1.584,1.697c-1.132,0.453-7.416,2.887-7.927,3.396c-0.511,0.521-0.453,2.896-0.453,2.896h26.954C28.977,26.709,29.039,24.332,28.523,23.813zM22.188,26.062h-4.562v-1.25h4.562V26.062z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.End();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.End = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.End.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.End\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.167,5.5,21.167,13.681,6.684,5.318,6.684,25.682,21.167,17.318,21.167,25.5,25.5,25.5,25.5,5.5z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Ethernet();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Ethernet = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Ethernet.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Ethernet\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M22.5,8.5v3.168l3.832,3.832L22.5,19.332V22.5l7-7L22.5,8.5zM8.5,22.5v-3.168L4.667,15.5L8.5,11.668V8.5l-7,7L8.5,22.5zM15.5,14.101c-0.928,0-1.68,0.751-1.68,1.68c0,0.927,0.752,1.681,1.68,1.681c0.927,0,1.68-0.754,1.68-1.681C17.18,14.852,16.427,14.101,15.5,14.101zM10.46,14.101c-0.928,0-1.68,0.751-1.68,1.68c0,0.927,0.752,1.681,1.68,1.681s1.68-0.754,1.68-1.681C12.14,14.852,11.388,14.101,10.46,14.101zM20.541,14.101c-0.928,0-1.682,0.751-1.682,1.68c0,0.927,0.754,1.681,1.682,1.681s1.68-0.754,1.68-1.681C22.221,14.852,21.469,14.101,20.541,14.101z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Exchange();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Exchange = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Exchange.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Exchange\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.786,12.876l7.556-4.363l-7.556-4.363v2.598H2.813v3.5h18.973V12.876zM10.368,18.124l-7.556,4.362l7.556,4.362V24.25h18.974v-3.501H10.368V18.124z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Expand();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Expand = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Expand.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Expand\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.545,23.328,17.918,15.623,25.534,8.007,27.391,9.864,29.649,1.436,21.222,3.694,23.058,5.53,15.455,13.134,7.942,5.543,9.809,3.696,1.393,1.394,3.608,9.833,5.456,8.005,12.98,15.608,5.465,23.123,3.609,21.268,1.351,29.695,9.779,27.438,7.941,25.6,15.443,18.098,23.057,25.791,21.19,27.638,29.606,29.939,27.393,21.5z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Export();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Export = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Export.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Export\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.086,20.904c-1.805,3.113-5.163,5.212-9.023,5.219c-5.766-0.01-10.427-4.672-10.438-10.435C4.636,9.922,9.297,5.261,15.063,5.25c3.859,0.007,7.216,2.105,9.022,5.218l3.962,2.284l0.143,0.082C26.879,6.784,21.504,2.25,15.063,2.248C7.64,2.25,1.625,8.265,1.624,15.688c0.002,7.42,6.017,13.435,13.439,13.437c6.442-0.002,11.819-4.538,13.127-10.589l-0.141,0.081L24.086,20.904zM28.4,15.688l-7.15-4.129v2.297H10.275v3.661H21.25v2.297L28.4,15.688z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Fave();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Fave = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Fave.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Fave\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.132,7.971c-2.203-2.205-5.916-2.098-8.25,0.235L15.5,8.588l-0.382-0.382c-2.334-2.333-6.047-2.44-8.25-0.235c-2.204,2.203-2.098,5.916,0.235,8.249l8.396,8.396l8.396-8.396C26.229,13.887,26.336,10.174,24.132,7.971z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Feed();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Feed = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Feed.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Feed\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M4.135,16.762c3.078,0,5.972,1.205,8.146,3.391c2.179,2.187,3.377,5.101,3.377,8.202h4.745c0-9.008-7.299-16.335-16.269-16.335V16.762zM4.141,8.354c10.973,0,19.898,8.975,19.898,20.006h4.743c0-13.646-11.054-24.749-24.642-24.749V8.354zM10.701,25.045c0,1.815-1.471,3.287-3.285,3.287s-3.285-1.472-3.285-3.287c0-1.813,1.471-3.285,3.285-3.285S10.701,23.231,10.701,25.045z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Ff();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Ff = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Ff.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Ff\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.5,15.5,15.2,9.552,15.2,15.153,5.5,9.552,5.5,21.447,15.2,15.847,15.2,21.447z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Firefox();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Firefox = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Firefox.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Firefox\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.4,22.469c0.479-0.964,0.851-1.991,1.095-3.066c0.953-3.661,0.666-6.854,0.666-6.854l-0.327,2.104c0,0-0.469-3.896-1.044-5.353c-0.881-2.231-1.273-2.214-1.274-2.21c0.542,1.379,0.494,2.169,0.483,2.288c-0.01-0.016-0.019-0.032-0.027-0.047c-0.131-0.324-0.797-1.819-2.225-2.878c-2.502-2.481-5.943-4.014-9.745-4.015c-4.056,0-7.705,1.745-10.238,4.525C5.444,6.5,5.183,5.938,5.159,5.317c0,0-0.002,0.002-0.006,0.005c0-0.011-0.003-0.021-0.003-0.031c0,0-1.61,1.247-1.436,4.612c-0.299,0.574-0.56,1.172-0.777,1.791c-0.375,0.817-0.75,2.004-1.059,3.746c0,0,0.133-0.422,0.399-0.988c-0.064,0.482-0.103,0.971-0.116,1.467c-0.09,0.845-0.118,1.865-0.039,3.088c0,0,0.032-0.406,0.136-1.021c0.834,6.854,6.667,12.165,13.743,12.165l0,0c1.86,0,3.636-0.37,5.256-1.036C24.938,27.771,27.116,25.196,28.4,22.469zM16.002,3.356c2.446,0,4.73,0.68,6.68,1.86c-2.274-0.528-3.433-0.261-3.423-0.248c0.013,0.015,3.384,0.589,3.981,1.411c0,0-1.431,0-2.856,0.41c-0.065,0.019,5.242,0.663,6.327,5.966c0,0-0.582-1.213-1.301-1.42c0.473,1.439,0.351,4.17-0.1,5.528c-0.058,0.174-0.118-0.755-1.004-1.155c0.284,2.037-0.018,5.268-1.432,6.158c-0.109,0.07,0.887-3.189,0.201-1.93c-4.093,6.276-8.959,2.539-10.934,1.208c1.585,0.388,3.267,0.108,4.242-0.559c0.982-0.672,1.564-1.162,2.087-1.047c0.522,0.117,0.87-0.407,0.464-0.872c-0.405-0.466-1.392-1.105-2.725-0.757c-0.94,0.247-2.107,1.287-3.886,0.233c-1.518-0.899-1.507-1.63-1.507-2.095c0-0.366,0.257-0.88,0.734-1.028c0.58,0.062,1.044,0.214,1.537,0.466c0.005-0.135,0.006-0.315-0.001-0.519c0.039-0.077,0.015-0.311-0.047-0.596c-0.036-0.287-0.097-0.582-0.19-0.851c0.01-0.002,0.017-0.007,0.021-0.021c0.076-0.344,2.147-1.544,2.299-1.659c0.153-0.114,0.55-0.378,0.506-1.183c-0.015-0.265-0.058-0.294-2.232-0.286c-0.917,0.003-1.425-0.894-1.589-1.245c0.222-1.231,0.863-2.11,1.919-2.704c0.02-0.011,0.015-0.021-0.008-0.027c0.219-0.127-2.524-0.006-3.76,1.604C9.674,8.045,9.219,7.95,8.71,7.95c-0.638,0-1.139,0.07-1.603,0.187c-0.05,0.013-0.122,0.011-0.208-0.001C6.769,8.04,6.575,7.88,6.365,7.672c0.161-0.18,0.324-0.356,0.495-0.526C9.201,4.804,12.43,3.357,16.002,3.356z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Flag();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Flag = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Flag.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Flag\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M26.04,9.508c0.138-0.533,0.15-1.407,0.028-1.943l-0.404-1.771c-0.122-0.536-0.665-1.052-1.207-1.146l-3.723-0.643c-0.542-0.094-1.429-0.091-1.97,0.007l-4.033,0.726c-0.542,0.098-1.429,0.108-1.973,0.023L8.812,4.146C8.817,4.165,8.826,4.182,8.83,4.201l2.701,12.831l1.236,0.214c0.542,0.094,1.428,0.09,1.97-0.007l4.032-0.727c0.541-0.097,1.429-0.107,1.973-0.022l4.329,0.675c0.544,0.085,0.906-0.288,0.807-0.829l-0.485-2.625c-0.1-0.541-0.069-1.419,0.068-1.952L26.04,9.508zM6.667,3.636C6.126,3.75,5.78,4.279,5.894,4.819l5.763,27.378H13.7L7.852,4.409C7.736,3.867,7.207,3.521,6.667,3.636z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Flickr();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Flickr = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Flickr.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Flickr\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.77,8.895c-2.379,0-4.479,1.174-5.77,2.969c-1.289-1.795-3.39-2.969-5.77-2.969c-3.924,0-7.105,3.181-7.105,7.105c0,3.924,3.181,7.105,7.105,7.105c2.379,0,4.48-1.175,5.77-2.97c1.29,1.795,3.391,2.97,5.77,2.97c3.925,0,7.105-3.182,7.105-7.105C28.875,12.075,25.694,8.895,21.77,8.895zM21.769,21.822c-3.211,0-5.821-2.61-5.821-5.821c0-3.213,2.61-5.824,5.821-5.824c3.213,0,5.824,2.611,5.824,5.824C27.593,19.212,24.981,21.822,21.769,21.822z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Folder();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Folder = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Folder.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Folder\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.625,26.75h-26.5V8.375h1.124c1.751,0,0.748-3.125,3-3.125c3.215,0,1.912,0,5.126,0c2.251,0,1.251,3.125,3.001,3.125h14.25V26.75z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Font();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Font = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Font.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Font\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M22.255,19.327l-1.017,0.131c-0.609,0.081-1.067,0.208-1.375,0.382c-0.521,0.293-0.779,0.76-0.779,1.398c0,0.484,0.178,0.867,0.532,1.146c0.354,0.28,0.774,0.421,1.262,0.421c0.593,0,1.164-0.138,1.72-0.412c0.938-0.453,1.4-1.188,1.4-2.229v-1.354c-0.205,0.131-0.469,0.229-0.792,0.328C22.883,19.229,22.564,19.29,22.255,19.327zM8.036,18.273h4.309l-2.113-6.063L8.036,18.273zM28.167,7.75H3.168c-0.552,0-1,0.448-1,1v16.583c0,0.553,0.448,1,1,1h24.999c0.554,0,1-0.447,1-1V8.75C29.167,8.198,28.721,7.75,28.167,7.75zM14.305,23.896l-1.433-4.109H7.488L6,23.896H4.094L9.262,10.17h2.099l4.981,13.727H14.305L14.305,23.896zM26.792,23.943c-0.263,0.074-0.461,0.121-0.599,0.141c-0.137,0.02-0.323,0.027-0.562,0.027c-0.579,0-0.999-0.204-1.261-0.615c-0.138-0.219-0.231-0.525-0.29-0.926c-0.344,0.449-0.834,0.839-1.477,1.169c-0.646,0.329-1.354,0.493-2.121,0.493c-0.928,0-1.688-0.28-2.273-0.844c-0.589-0.562-0.884-1.271-0.884-2.113c0-0.928,0.29-1.646,0.868-2.155c0.578-0.511,1.34-0.824,2.279-0.942l2.682-0.336c0.388-0.05,0.646-0.211,0.775-0.484c0.063-0.146,0.104-0.354,0.104-0.646c0-0.575-0.203-0.993-0.604-1.252c-0.408-0.26-0.99-0.389-1.748-0.389c-0.877,0-1.5,0.238-1.865,0.713c-0.205,0.263-0.34,0.654-0.399,1.174H17.85c0.031-1.237,0.438-2.097,1.199-2.582c0.77-0.484,1.659-0.726,2.674-0.726c1.176,0,2.131,0.225,2.864,0.673c0.729,0.448,1.093,1.146,1.093,2.093v5.766c0,0.176,0.035,0.313,0.106,0.422c0.071,0.104,0.223,0.156,0.452,0.156c0.076,0,0.16-0.005,0.254-0.015c0.093-0.011,0.191-0.021,0.299-0.041L26.792,23.943L26.792,23.943z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Fork();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Fork = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Fork.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Fork\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M13.741,10.249h8.045v2.627l7.556-4.363l-7.556-4.363v2.598H9.826C11.369,7.612,12.616,8.922,13.741,10.249zM21.786,20.654c-0.618-0.195-1.407-0.703-2.291-1.587c-1.79-1.756-3.712-4.675-5.731-7.227c-2.049-2.486-4.159-4.972-7.451-5.091h-3.5v3.5h3.5c0.656-0.027,1.683,0.486,2.879,1.683c1.788,1.753,3.712,4.674,5.731,7.226c1.921,2.331,3.907,4.639,6.863,5.016v2.702l7.556-4.362l-7.556-4.362V20.654z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ForkAlt();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ForkAlt = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ForkAlt.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.ForkAlt\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.786,12.873l7.556-4.361l-7.556-4.362v2.701c-2.929,0.374-4.905,2.64-6.809,4.952c0.545,0.703,1.08,1.418,1.604,2.127c0.192,0.26,0.383,0.514,0.573,0.77c0.802-1.043,1.584-1.999,2.341-2.74c0.884-0.885,1.673-1.393,2.291-1.588V12.873zM17.661,17.006c-1.893-2.371-3.815-5.354-6.009-7.537c-1.461-1.428-3.155-2.664-5.34-2.693h-3.5v3.5h3.5c0.971-0.119,2.845,1.333,4.712,3.771c1.895,2.371,3.815,5.354,6.011,7.537c1.326,1.297,2.847,2.426,4.751,2.645v2.646l7.556-4.363l-7.556-4.362v2.535C20.746,20.346,19.205,19.022,17.661,17.006z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.FullCube();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.FullCube = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.FullCube.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.FullCube\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.5,3.029l-10.8,6.235L4.7,21.735L15.5,27.971l10.8-6.235V9.265L15.5,3.029zM15.5,7.029l6.327,3.652L15.5,14.334l-6.326-3.652L15.5,7.029zM24.988,10.599L16,15.789v10.378c0,0.275-0.225,0.5-0.5,0.5s-0.5-0.225-0.5-0.5V15.786l-8.987-5.188c-0.239-0.138-0.321-0.444-0.183-0.683c0.138-0.238,0.444-0.321,0.683-0.183l8.988,5.189l8.988-5.189c0.238-0.138,0.545-0.055,0.684,0.184C25.309,10.155,25.227,10.461,24.988,10.599z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Future();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Future = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Future.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Future\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M17.001,15.5l-0.5-7.876c0-0.552-0.448-1-1-1c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.89-0.365,1.365c0.275,0.479,0.889,0.644,1.365,0.367l3.305-1.677C15.39,16.99,15.444,17,15.501,17C16.329,17,17.001,16.329,17.001,15.5zM18.939,21.455c-0.479,0.277-0.644,0.889-0.366,1.367c0.274,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.89,0.365-1.365C20.027,21.344,19.417,21.18,18.939,21.455zM19.938,7.813c-0.477-0.276-1.09-0.111-1.364,0.366c-0.275,0.48-0.111,1.091,0.366,1.367c0.477,0.276,1.088,0.112,1.365-0.366C20.581,8.702,20.418,8.089,19.938,7.813zM21.823,20.305c0.477,0.274,1.089,0.112,1.364-0.365c0.276-0.479,0.112-1.092-0.364-1.367c-0.48-0.275-1.093-0.111-1.367,0.365C21.182,19.416,21.344,20.029,21.823,20.305zM22.822,12.428c0.478-0.275,0.643-0.888,0.365-1.366c-0.274-0.478-0.89-0.642-1.365-0.366c-0.479,0.278-0.643,0.89-0.366,1.367S22.344,12.705,22.822,12.428zM24.378,15.5c0-0.551-0.448-1-1-1c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1C23.93,16.5,24.378,16.053,24.378,15.5zM9.546,12.062c0.275-0.478,0.111-1.089-0.366-1.366c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366C8.658,12.704,9.269,12.541,9.546,12.062zM6.624,15.5c0,0.553,0.449,1,1,1c0.552,0,1-0.447,1.001-1c-0.001-0.552-0.448-0.999-1.001-1C7.071,14.5,6.624,14.948,6.624,15.5zM9.179,20.305c0.479-0.275,0.643-0.888,0.367-1.367c-0.276-0.477-0.888-0.641-1.367-0.365c-0.478,0.277-0.642,0.889-0.365,1.367C8.089,20.418,8.703,20.58,9.179,20.305zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM14.501,23.377c0,0.553,0.448,1,1,1c0.552,0,1-0.447,1-1s-0.448-1-1-1C14.949,22.377,14.501,22.824,14.501,23.377zM10.696,21.822c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.276,1.091,0.11,1.365-0.365c0.277-0.479,0.113-1.09-0.365-1.367C11.584,21.18,10.973,21.344,10.696,21.822zM28.674,14.087l-3.27-1.186c0.291,1.105,0.41,2.274,0.309,3.478c-0.492,5.639-5.449,9.809-11.091,9.333c-5.639-0.495-9.809-5.45-9.333-11.09c0.494-5.641,5.449-9.812,11.089-9.335c2.428,0.212,4.567,1.266,6.194,2.833l-1.637,1.377l7.031,2.548l-1.309-7.364l-1.771,1.492c-2.133-2.151-4.996-3.597-8.25-3.877C9.346,1.67,2.926,7.072,2.297,14.364c-0.625,7.291,4.777,13.71,12.066,14.339c7.293,0.625,13.713-4.776,14.342-12.066C28.779,15.771,28.762,14.919,28.674,14.087z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.GRaphael();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.GRaphael = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.GRaphael.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.GRaphael\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.833,15.709c0-1.477-0.574-2.862-1.617-3.904l-7.002-7.001l-0.003,0.002c-1.027-1.03-2.445-1.62-3.9-1.62c-1.455,0-2.871,0.59-3.9,1.621l-0.002-0.002l-7,7C4.376,12.836,3.79,14.25,3.79,15.709s0.586,2.873,1.619,3.902l6.312,6.312c0.253,0.285,0.519,0.556,0.8,0.8c1.049,0.989,2.463,1.534,3.908,1.51c1.417-0.021,2.783-0.604,3.785-1.604l6.812-6.812c0.021-0.021,0.035-0.029,0.062-0.062l0.143-0.146c0.271-0.271,0.484-0.562,0.725-0.86l-0.012-0.002C28.516,17.85,28.833,16.805,28.833,15.709zM18.77,25.17c-1.121,1.119-2.917,1.336-4.271,0.514l0.002-0.002c-0.213-0.145-0.414-0.303-0.61-0.471c-0.016-0.016-7.04-7.041-7.04-7.041c-1.34-1.34-1.342-3.584,0-4.92l7-6.998c1.121-1.121,2.908-1.338,4.259-0.512v0.002c0.213,0.141,0.414,0.299,0.604,0.467c0.021,0.016,7.053,7.043,7.053,7.043c0.396,0.388,0.655,0.852,0.818,1.348l-2.607,0.006c-0.537-3.754-3.769-6.641-7.667-6.641c-4.277,0-7.744,3.468-7.745,7.746c0.001,4.277,3.468,7.744,7.745,7.744c3.917,0,7.156-2.91,7.668-6.688l2.638-0.021c-0.16,0.521-0.441,1.02-0.849,1.412L18.77,25.17zM16.312,16.789c0.002,0,0.002,0,0.004,0l5.476-0.02c-0.5,2.562-2.76,4.518-5.48,4.521c-3.084-0.004-5.578-2.5-5.584-5.582c0.006-3.084,2.5-5.58,5.584-5.584c2.708,0.004,4.959,1.929,5.472,4.484l-5.476,0.018c-0.596,0.002-1.078,0.488-1.076,1.084C15.233,16.308,15.715,16.789,16.312,16.789z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Gear();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Gear = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Gear.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Gear\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M26.974,16.514l3.765-1.991c-0.074-0.738-0.217-1.454-0.396-2.157l-4.182-0.579c-0.362-0.872-0.84-1.681-1.402-2.423l1.594-3.921c-0.524-0.511-1.09-0.977-1.686-1.406l-3.551,2.229c-0.833-0.438-1.73-0.77-2.672-0.984l-1.283-3.976c-0.364-0.027-0.728-0.056-1.099-0.056s-0.734,0.028-1.099,0.056l-1.271,3.941c-0.967,0.207-1.884,0.543-2.738,0.986L7.458,4.037C6.863,4.466,6.297,4.932,5.773,5.443l1.55,3.812c-0.604,0.775-1.11,1.629-1.49,2.55l-4.05,0.56c-0.178,0.703-0.322,1.418-0.395,2.157l3.635,1.923c0.041,1.013,0.209,1.994,0.506,2.918l-2.742,3.032c0.319,0.661,0.674,1.303,1.085,1.905l4.037-0.867c0.662,0.72,1.416,1.351,2.248,1.873l-0.153,4.131c0.663,0.299,1.352,0.549,2.062,0.749l2.554-3.283C15.073,26.961,15.532,27,16,27c0.507,0,1.003-0.046,1.491-0.113l2.567,3.301c0.711-0.2,1.399-0.45,2.062-0.749l-0.156-4.205c0.793-0.513,1.512-1.127,2.146-1.821l4.142,0.889c0.411-0.602,0.766-1.243,1.085-1.905l-2.831-3.131C26.778,18.391,26.93,17.467,26.974,16.514zM20.717,21.297l-1.785,1.162l-1.098-1.687c-0.571,0.22-1.186,0.353-1.834,0.353c-2.831,0-5.125-2.295-5.125-5.125c0-2.831,2.294-5.125,5.125-5.125c2.83,0,5.125,2.294,5.125,5.125c0,1.414-0.573,2.693-1.499,3.621L20.717,21.297z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Gear2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Gear2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Gear2.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Gear2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M17.047,27.945c-0.34,0.032-0.688,0.054-1.046,0.054l0,0c-0.32,0-0.631-0.017-0.934-0.043l0,0l-2.626,3.375l-0.646-0.183c-0.758-0.213-1.494-0.48-2.202-0.8l0,0L8.979,30.07l0.158-4.24c-0.558-0.39-1.079-0.825-1.561-1.302l0,0L3.424,25.42l-0.379-0.557c-0.445-0.654-0.824-1.339-1.16-2.032l0,0l-0.292-0.605l2.819-3.12c-0.176-0.661-0.293-1.343-0.353-2.038l0,0l-3.736-1.975l0.068-0.669c0.08-0.801,0.235-1.567,0.42-2.303l0,0l0.165-0.653l4.167-0.577c0.297-0.627,0.647-1.221,1.041-1.78l0,0l-1.59-3.914l0.48-0.47c0.564-0.55,1.168-1.048,1.798-1.503l0,0l0.546-0.394l3.597,2.259c0.606-0.279,1.24-0.509,1.897-0.685l0,0l1.304-4.046l0.672-0.051c0.362-0.027,0.751-0.058,1.174-0.058l0,0c0.422,0,0.81,0.031,1.172,0.058l0,0l0.672,0.051l1.318,4.088c0.632,0.176,1.244,0.401,1.831,0.674l0,0l3.647-2.291l0.548,0.394c0.63,0.455,1.235,0.954,1.798,1.501l0,0l0.482,0.47l-1.639,4.031c0.357,0.519,0.679,1.068,0.954,1.646l0,0l4.297,0.595l0.167,0.653c0.188,0.735,0.342,1.501,0.42,2.303l0,0l0.068,0.669l-3.866,2.044c-0.058,0.634-0.161,1.258-0.315,1.866l0,0l2.913,3.218l-0.293,0.608c-0.335,0.695-0.712,1.382-1.159,2.034l0,0l-0.379,0.555l-4.255-0.912c-0.451,0.451-0.939,0.866-1.461,1.241l0,0l0.162,4.323l-0.615,0.278c-0.709,0.319-1.444,0.587-2.202,0.8l0,0l-0.648,0.183L17.047,27.945L17.047,27.945zM20.424,29.028c0.227-0.076,0.45-0.157,0.671-0.244l0,0l-0.152-4.083l0.479-0.307c0.717-0.466,1.37-1.024,1.95-1.658l0,0l0.386-0.423l4.026,0.862c0.121-0.202,0.238-0.409,0.351-0.62l0,0l-2.754-3.045l0.171-0.544c0.243-0.783,0.381-1.623,0.422-2.5l0,0l0.025-0.571l3.658-1.933c-0.038-0.234-0.082-0.467-0.132-0.7l0,0l-4.07-0.563l-0.219-0.527c-0.327-0.787-0.76-1.524-1.277-2.204l0,0l-0.342-0.453l1.548-3.808c-0.179-0.157-0.363-0.31-0.552-0.458l0,0l-3.455,2.169L20.649,7.15c-0.754-0.397-1.569-0.698-2.429-0.894l0,0l-0.556-0.127l-1.248-3.87c-0.121-0.006-0.239-0.009-0.354-0.009l0,0c-0.117,0-0.235,0.003-0.357,0.009l0,0l-1.239,3.845l-0.564,0.12c-0.875,0.188-1.709,0.494-2.486,0.896l0,0l-0.508,0.264L7.509,5.249c-0.188,0.148-0.372,0.301-0.55,0.458l0,0l1.507,3.708L8.112,9.869c-0.552,0.709-1.011,1.485-1.355,2.319l0,0l-0.218,0.529l-3.939,0.545c-0.05,0.233-0.094,0.466-0.131,0.7l0,0l3.531,1.867l0.022,0.575c0.037,0.929,0.192,1.82,0.459,2.653l0,0l0.175,0.548l-2.667,2.95c0.112,0.212,0.229,0.419,0.351,0.621l0,0l3.916-0.843l0.39,0.423c0.601,0.657,1.287,1.229,2.043,1.703l0,0l0.488,0.305l-0.149,4.02c0.221,0.087,0.445,0.168,0.672,0.244l0,0l2.479-3.188l0.566,0.07c0.427,0.054,0.843,0.089,1.257,0.089l0,0c0.445,0,0.894-0.039,1.353-0.104l0,0l0.571-0.08L20.424,29.028L20.424,29.028zM21.554,20.75l0.546,0.839l-3.463,2.253l-1.229-1.891l0,0c-0.447,0.109-0.917,0.173-1.406,0.173l0,0c-3.384,0-6.126-2.743-6.126-6.123l0,0c0-3.384,2.742-6.126,6.126-6.126l0,0c3.38,0,6.123,2.742,6.123,6.126l0,0c0,1.389-0.467,2.676-1.25,3.704l0,0L21.554,20.75M19.224,21.073l0.108-0.069l-0.987-1.519l0.572-0.572c0.748-0.75,1.207-1.773,1.207-2.912l0,0c-0.004-2.278-1.848-4.122-4.123-4.126l0,0c-2.28,0.004-4.122,1.846-4.126,4.126l0,0c0.004,2.275,1.848,4.119,4.126,4.123l0,0c0.509,0,0.999-0.104,1.473-0.286l0,0l0.756-0.29L19.224,21.073L19.224,21.073z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.GitHub();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.GitHub = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.GitHub.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.GitHub\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.436,15.099c-1.201-0.202-2.451-0.335-3.466-0.371l-0.179-0.006c0.041-0.09,0.072-0.151,0.082-0.16c0.022-0.018,0.04-0.094,0.042-0.168c0-0.041,0.018-0.174,0.046-0.35c0.275,0.01,0.64,0.018,1.038,0.021c1.537,0.012,3.145,0.136,4.248,0.331c0.657,0.116,0.874,0.112,0.389-0.006c-0.491-0.119-1.947-0.294-3.107-0.37c-0.779-0.053-1.896-0.073-2.554-0.062c0.019-0.114,0.041-0.241,0.064-0.371c0.093-0.503,0.124-1.009,0.126-2.016c0.002-1.562-0.082-1.992-0.591-3.025c-0.207-0.422-0.441-0.78-0.724-1.104c0.247-0.729,0.241-1.858-0.015-2.848c-0.211-0.812-0.285-0.864-1.021-0.708C22.19,4.019,21.69,4.2,21.049,4.523c-0.303,0.153-0.721,0.391-1.024,0.578c-0.79-0.278-1.607-0.462-2.479-0.561c-0.884-0.1-3.051-0.044-3.82,0.098c-0.752,0.139-1.429,0.309-2.042,0.511c-0.306-0.189-0.75-0.444-1.067-0.604C9.973,4.221,9.473,4.041,8.847,3.908c-0.734-0.157-0.81-0.104-1.02,0.708c-0.26,1.003-0.262,2.151-0.005,2.878C7.852,7.577,7.87,7.636,7.877,7.682c-1.042,1.312-1.382,2.78-1.156,4.829c0.059,0.534,0.15,1.024,0.277,1.473c-0.665-0.004-1.611,0.02-2.294,0.064c-1.162,0.077-2.618,0.25-3.109,0.369c-0.484,0.118-0.269,0.122,0.389,0.007c1.103-0.194,2.712-0.32,4.248-0.331c0.29-0.001,0.561-0.007,0.794-0.013c0.07,0.237,0.15,0.463,0.241,0.678L7.26,14.759c-1.015,0.035-2.264,0.168-3.465,0.37c-0.901,0.151-2.231,0.453-2.386,0.54c-0.163,0.091-0.03,0.071,0.668-0.106c1.273-0.322,2.928-0.569,4.978-0.741l0.229-0.02c0.44,1.022,1.118,1.802,2.076,2.41c0.586,0.373,1.525,0.756,1.998,0.816c0.13,0.016,0.508,0.094,0.84,0.172c0.333,0.078,0.984,0.195,1.446,0.262h0.011c-0.009,0.006-0.017,0.01-0.025,0.016c-0.56,0.291-0.924,0.744-1.169,1.457c-0.11,0.033-0.247,0.078-0.395,0.129c-0.529,0.18-0.735,0.217-1.271,0.221c-0.556,0.004-0.688-0.02-1.02-0.176c-0.483-0.225-0.933-0.639-1.233-1.133c-0.501-0.826-1.367-1.41-2.089-1.41c-0.617,0-0.734,0.25-0.288,0.615c0.672,0.549,1.174,1.109,1.38,1.537c0.116,0.24,0.294,0.611,0.397,0.824c0.109,0.227,0.342,0.535,0.564,0.748c0.522,0.498,1.026,0.736,1.778,0.848c0.504,0.074,0.628,0.074,1.223-0.002c0.287-0.035,0.529-0.076,0.746-0.127c0,0.244,0,0.525,0,0.855c0,1.766-0.021,2.334-0.091,2.5c-0.132,0.316-0.428,0.641-0.716,0.787c-0.287,0.146-0.376,0.307-0.255,0.455c0.067,0.08,0.196,0.094,0.629,0.066c0.822-0.051,1.403-0.355,1.699-0.891c0.095-0.172,0.117-0.518,0.147-2.318c0.032-1.953,0.046-2.141,0.173-2.42c0.077-0.166,0.188-0.346,0.25-0.395c0.104-0.086,0.111,0.084,0.111,2.42c-0.001,2.578-0.027,2.889-0.285,3.385c-0.058,0.113-0.168,0.26-0.245,0.33c-0.135,0.123-0.192,0.438-0.098,0.533c0.155,0.154,0.932-0.088,1.356-0.422c0.722-0.572,0.808-1.045,0.814-4.461l0.003-2.004l0.219,0.021l0.219,0.02l0.036,2.621c0.041,2.951,0.047,2.994,0.549,3.564c0.285,0.322,0.572,0.5,1.039,0.639c0.625,0.188,0.813-0.102,0.393-0.605c-0.457-0.547-0.479-0.756-0.454-3.994c0.017-2.076,0.017-2.076,0.151-1.955c0.282,0.256,0.336,0.676,0.336,2.623c0,2.418,0.069,2.648,0.923,3.07c0.399,0.195,0.511,0.219,1.022,0.221c0.544,0.002,0.577-0.006,0.597-0.148c0.017-0.115-0.05-0.193-0.304-0.348c-0.333-0.205-0.564-0.467-0.709-0.797c-0.055-0.127-0.092-0.959-0.117-2.672c-0.036-2.393-0.044-2.502-0.193-2.877c-0.201-0.504-0.508-0.902-0.897-1.166c-0.101-0.066-0.202-0.121-0.333-0.162c0.161-0.016,0.317-0.033,0.468-0.055c1.572-0.209,2.403-0.383,3.07-0.641c1.411-0.543,2.365-1.445,2.882-2.724c0.046-0.114,0.092-0.222,0.131-0.309l0.398,0.033c2.051,0.173,3.706,0.42,4.979,0.743c0.698,0.177,0.831,0.198,0.668,0.105C30.666,15.551,29.336,15.25,28.436,15.099zM22.422,15.068c-0.233,0.512-0.883,1.17-1.408,1.428c-0.518,0.256-1.33,0.451-2.25,0.544c-0.629,0.064-4.137,0.083-4.716,0.026c-1.917-0.188-2.991-0.557-3.783-1.296c-0.75-0.702-1.1-1.655-1.039-2.828c0.039-0.734,0.216-1.195,0.679-1.755c0.421-0.51,0.864-0.825,1.386-0.985c0.437-0.134,1.778-0.146,3.581-0.03c0.797,0.051,1.456,0.051,2.252,0c1.886-0.119,3.145-0.106,3.61,0.038c0.731,0.226,1.397,0.834,1.797,1.644c0.18,0.362,0.215,0.516,0.241,1.075C22.808,13.699,22.675,14.517,22.422,15.068zM12.912,11.762c-1.073-0.188-1.686,1.649-0.863,2.587c0.391,0.445,0.738,0.518,1.172,0.248c0.402-0.251,0.62-0.72,0.62-1.328C13.841,12.458,13.472,11.862,12.912,11.762zM19.425,11.872c-1.073-0.188-1.687,1.647-0.864,2.586c0.392,0.445,0.738,0.519,1.173,0.247c0.401-0.25,0.62-0.72,0.62-1.328C20.354,12.569,19.985,11.971,19.425,11.872zM16.539,15.484c-0.023,0.074-0.135,0.184-0.248,0.243c-0.286,0.147-0.492,0.096-0.794-0.179c-0.187-0.169-0.272-0.258-0.329-0.081c-0.053,0.164,0.28,0.493,0.537,0.594c0.236,0.094,0.405,0.097,0.661-0.01c0.254-0.106,0.476-0.391,0.476-0.576C16.842,15.303,16.595,15.311,16.539,15.484zM16.222,14.909c0.163-0.144,0.2-0.44,0.044-0.597s-0.473-0.133-0.597,0.043c-0.144,0.206-0.067,0.363,0.036,0.53C15.865,15.009,16.08,15.034,16.222,14.909z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.GitHubAlt();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.GitHubAlt = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.GitHubAlt.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.GitHubAlt\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M23.356,17.485c-0.004,0.007-0.007,0.013-0.01,0.021l0.162,0.005c0.107,0.004,0.218,0.01,0.33,0.016c-0.046-0.004-0.09-0.009-0.136-0.013L23.356,17.485zM15.5,1.249C7.629,1.25,1.25,7.629,1.249,15.5C1.25,23.371,7.629,29.75,15.5,29.751c7.871-0.001,14.25-6.38,14.251-14.251C29.75,7.629,23.371,1.25,15.5,1.249zM3.771,17.093c0.849-0.092,1.833-0.148,2.791-0.156c0.262,0,0.507-0.006,0.717-0.012c0.063,0.213,0.136,0.419,0.219,0.613H7.492c-0.918,0.031-2.047,0.152-3.134,0.335c-0.138,0.023-0.288,0.051-0.441,0.08C3.857,17.67,3.81,17.383,3.771,17.093zM12.196,22.224c-0.1,0.028-0.224,0.07-0.357,0.117c-0.479,0.169-0.665,0.206-1.15,0.206c-0.502,0.015-0.621-0.019-0.921-0.17C9.33,22.171,8.923,21.8,8.651,21.353c-0.453-0.746-1.236-1.275-1.889-1.275c-0.559,0-0.664,0.227-0.261,0.557c0.608,0.496,1.062,0.998,1.248,1.385c0.105,0.215,0.266,0.546,0.358,0.744c0.099,0.206,0.311,0.474,0.511,0.676c0.472,0.441,0.928,0.659,1.608,0.772c0.455,0.06,0.567,0.06,1.105-0.004c0.26-0.03,0.479-0.067,0.675-0.118v0.771c0,1.049-0.008,1.628-0.031,1.945c-1.852-0.576-3.507-1.595-4.848-2.934c-1.576-1.578-2.706-3.592-3.195-5.848c0.952-0.176,2.073-0.32,3.373-0.43l0.208-0.018c0.398,0.925,1.011,1.631,1.876,2.179c0.53,0.337,1.38,0.685,1.808,0.733c0.118,0.02,0.46,0.09,0.76,0.16c0.302,0.066,0.89,0.172,1.309,0.236h0.009c-0.007,0.018-0.014,0.02-0.022,0.02C12.747,21.169,12.418,21.579,12.196,22.224zM13.732,27.207c-0.168-0.025-0.335-0.056-0.5-0.087c0.024-0.286,0.038-0.785,0.054-1.723c0.028-1.767,0.041-1.94,0.156-2.189c0.069-0.15,0.17-0.32,0.226-0.357c0.095-0.078,0.101,0.076,0.101,2.188C13.769,26.143,13.763,26.786,13.732,27.207zM15.5,27.339c-0.148,0-0.296-0.006-0.443-0.012c0.086-0.562,0.104-1.428,0.106-2.871l0.003-1.82l0.197,0.019l0.199,0.02l0.032,2.365c0.017,1.21,0.027,1.878,0.075,2.296C15.613,27.335,15.558,27.339,15.5,27.339zM17.006,27.24c-0.039-0.485-0.037-1.243-0.027-2.553c0.019-1.866,0.019-1.866,0.131-1.769c0.246,0.246,0.305,0.623,0.305,2.373c0,0.928,0.011,1.497,0.082,1.876C17.334,27.196,17.17,27.22,17.006,27.24zM27.089,17.927c-0.155-0.029-0.307-0.057-0.446-0.08c-0.96-0.162-1.953-0.275-2.804-0.32c1.25,0.108,2.327,0.248,3.246,0.418c-0.479,2.289-1.618,4.33-3.214,5.928c-1.402,1.4-3.15,2.448-5.106,3.008c-0.034-0.335-0.058-1.048-0.066-2.212c-0.03-2.167-0.039-2.263-0.17-2.602c-0.181-0.458-0.47-0.811-0.811-1.055c-0.094-0.057-0.181-0.103-0.301-0.14c0.145-0.02,0.282-0.021,0.427-0.057c1.418-0.188,2.168-0.357,2.772-0.584c1.263-0.492,2.129-1.301,2.606-2.468c0.044-0.103,0.088-0.2,0.123-0.279l0.011,0.001c0.032-0.07,0.057-0.118,0.064-0.125c0.02-0.017,0.036-0.085,0.038-0.151c0-0.037,0.017-0.157,0.041-0.317c0.249,0.01,0.58,0.018,0.938,0.02c0.959,0.008,1.945,0.064,2.794,0.156C27.194,17.356,27.148,17.644,27.089,17.927zM25.823,16.87c-0.697-0.049-1.715-0.064-2.311-0.057c0.02-0.103,0.037-0.218,0.059-0.336c0.083-0.454,0.111-0.912,0.113-1.823c0.002-1.413-0.074-1.801-0.534-2.735c-0.188-0.381-0.399-0.705-0.655-0.998c0.225-0.659,0.207-1.68-0.02-2.575c-0.19-0.734-0.258-0.781-0.924-0.64c-0.563,0.12-1.016,0.283-1.598,0.576c-0.274,0.138-0.652,0.354-0.923,0.522c-0.715-0.251-1.451-0.419-2.242-0.508c-0.799-0.092-2.759-0.04-3.454,0.089c-0.681,0.126-1.293,0.28-1.848,0.462c-0.276-0.171-0.678-0.4-0.964-0.547C9.944,8.008,9.491,7.846,8.925,7.727c-0.664-0.144-0.732-0.095-0.922,0.64c-0.235,0.907-0.237,1.945-0.004,2.603c0.026,0.075,0.043,0.129,0.05,0.17c-0.942,1.187-1.25,2.515-1.046,4.367c0.053,0.482,0.136,0.926,0.251,1.333c-0.602-0.004-1.457,0.018-2.074,0.057c-0.454,0.031-0.957,0.076-1.418,0.129c-0.063-0.5-0.101-1.008-0.101-1.524c0-3.273,1.323-6.225,3.468-8.372c2.146-2.144,5.099-3.467,8.371-3.467c3.273,0,6.226,1.323,8.371,3.467c2.145,2.147,3.468,5.099,3.468,8.372c0,0.508-0.036,1.008-0.098,1.499C26.78,16.946,26.276,16.899,25.823,16.87z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Glasses();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Glasses = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Glasses.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Glasses\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.075,9.531c0,0-2.705-1.438-5.158-1.438c-2.453,0-4.862,0.593-4.862,0.593L3.971,9.869c0,0,0.19,0.19,0.528,0.53c0.338,0.336,0.486,3.741,1.838,5.094c1.353,1.354,4.82,1.396,5.963,0.676c1.14-0.718,2.241-3.466,2.241-4.693c0-0.38,0-0.676,0-0.676c0.274-0.275,1.615-0.303,1.917,0c0,0,0,0.296,0,0.676c0,1.227,1.101,3.975,2.241,4.693c1.144,0.72,4.611,0.678,5.963-0.676c1.355-1.353,1.501-4.757,1.839-5.094c0.338-0.34,0.528-0.53,0.528-0.53l-0.084-1.183c0,0-2.408-0.593-4.862-0.593c-2.453,0-5.158,1.438-5.158,1.438C16.319,9.292,14.737,9.32,14.075,9.531z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Globe();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Globe = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Globe.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Globe\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM19.158,23.269c-0.079,0.064-0.183,0.13-0.105,0.207c0.078,0.078-0.09,0.131-0.09,0.17s0.104,0.246,0.052,0.336c-0.052,0.092-0.091,0.223-0.13,0.301c-0.039,0.077-0.131,0.155-0.104,0.272c0.025,0.116-0.104,0.077-0.104,0.194c0,0.116,0.116,0.065,0.09,0.208c-0.025,0.144-0.09,0.183-0.09,0.285c0,0.104,0.064,0.247,0.064,0.286s-0.064,0.17-0.155,0.272c-0.092,0.104-0.155,0.17-0.144,0.233c0.014,0.065,0.104,0.144,0.091,0.184c-0.013,0.037-0.129,0.168-0.116,0.259c0.014,0.09,0.129,0.053,0.155,0.116c0.026,0.065-0.155,0.118-0.078,0.183c0.078,0.064,0.183,0.051,0.156,0.208c-0.019,0.112,0.064,0.163,0.126,0.198c-0.891,0.221-1.818,0.352-2.777,0.352C9.639,27.533,4.466,22.36,4.466,16c0-2.073,0.557-4.015,1.518-5.697c0.079-0.042,0.137-0.069,0.171-0.062c0.065,0.013,0.079,0.104,0.183,0.13c0.104,0.026,0.195-0.078,0.26-0.117c0.064-0.039,0.116-0.195,0.051-0.182c-0.065,0.013-0.234,0-0.234,0s0.183-0.104,0.183-0.169s0.025-0.169,0.129-0.208C6.83,9.655,6.83,9.681,6.765,9.837C6.7,9.993,6.896,9.928,6.973,9.863s0.13-0.013,0.272-0.104c0.143-0.091,0.143-0.143,0.221-0.143c0.078,0,0.221,0.143,0.299,0.091c0.077-0.052,0.299,0.065,0.429,0.065c0.129,0,0.545,0.169,0.624,0.169c0.078,0,0.312,0.09,0.325,0.259c0.013,0.169,0.09,0.156,0.168,0.156s0.26,0.065,0.26,0.13c0,0.065-0.052,0.325,0.078,0.39c0.129,0.064,0.247,0.169,0.299,0.143c0.052-0.026,0-0.233-0.064-0.26c-0.065-0.026-0.027-0.117-0.052-0.169c-0.026-0.051,0.078-0.051,0.117,0.039c0.039,0.091,0.143,0.26,0.208,0.26c0.064,0,0.208,0.156,0.168,0.247c-0.039,0.091,0.039,0.221,0.156,0.221c0.116,0,0.26,0.182,0.312,0.195c0.052,0.013,0.117,0.078,0.117,0.117c0,0.04,0.065,0.26,0.065,0.351c0,0.09-0.04,0.454-0.053,0.597s0.104,0.39,0.234,0.52c0.129,0.13,0.246,0.377,0.324,0.429c0.079,0.052,0.13,0.195,0.247,0.182c0.117-0.013,0.195,0.078,0.299,0.26c0.104,0.182,0.208,0.48,0.286,0.506c0.078,0.026,0.208,0.117,0.142,0.182c-0.064,0.064-0.168,0.208-0.051,0.208c0.117,0,0.156-0.065,0.247,0.053c0.09,0.116,0.208,0.181,0.194,0.26c-0.013,0.077,0.104,0.103,0.156,0.116c0.052,0.013,0.169,0.247,0.286,0.143c0.117-0.104-0.155-0.259-0.234-0.326c-0.078-0.064,0-0.207-0.182-0.35c-0.182-0.143-0.156-0.247-0.286-0.351c-0.13-0.104-0.233-0.195-0.104-0.286c0.13-0.091,0.143,0.091,0.195,0.208c0.052,0.116,0.324,0.351,0.441,0.454c0.117,0.104,0.326,0.468,0.39,0.468s0.247,0.208,0.247,0.208s0.103,0.168,0.064,0.22c-0.039,0.052,0.053,0.247,0.144,0.299c0.09,0.052,0.455,0.22,0.507,0.247c0.052,0.027,0.155,0.221,0.299,0.221c0.142,0,0.247,0.014,0.286,0.053c0.039,0.038,0.155,0.194,0.234,0.104c0.078-0.092,0.09-0.131,0.208-0.131c0.117,0,0.168,0.091,0.233,0.156c0.065,0.065,0.247,0.235,0.338,0.222c0.091-0.013,0.208,0.104,0.273,0.064s0.169,0.025,0.22,0.052c0.054,0.026,0.234,0.118,0.222,0.272c-0.013,0.157,0.103,0.195,0.182,0.234c0.078,0.039,0.182,0.13,0.248,0.195c0.064,0.063,0.206,0.077,0.246,0.116c0.039,0.039,0.065,0.117,0.182,0.052c0.116-0.064,0.092-0.181,0.092-0.181s0.129-0.026,0.194,0.026c0.064,0.05,0.104,0.22,0.144,0.246c0.038,0.026,0.115,0.221,0.063,0.362c-0.051,0.145-0.038,0.286-0.091,0.286c-0.052,0-0.116,0.17-0.195,0.209c-0.076,0.039-0.285,0.221-0.272,0.286c0.013,0.063,0.131,0.258,0.104,0.35c-0.025,0.091-0.194,0.195-0.154,0.338c0.038,0.144,0.312,0.183,0.323,0.312c0.014,0.131,0.209,0.417,0.235,0.546c0.025,0.13,0.246,0.272,0.246,0.453c0,0.184,0.312,0.3,0.377,0.312c0.063,0.013,0.182,0.131,0.272,0.17s0.169,0.116,0.233,0.221s0.053,0.261,0.053,0.299c0,0.039-0.039,0.44-0.078,0.674C19.145,23.021,19.235,23.203,19.158,23.269zM10.766,11.188c0.039,0.013,0.117,0.091,0.156,0.091c0.04,0,0.234,0.156,0.286,0.208c0.053,0.052,0.053,0.195-0.013,0.208s-0.104-0.143-0.117-0.208c-0.013-0.065-0.143-0.065-0.208-0.104C10.805,11.344,10.66,11.152,10.766,11.188zM27.51,16.41c-0.144,0.182-0.13,0.272-0.195,0.286c-0.064,0.013,0.065,0.065,0.09,0.194c0.022,0.112-0.065,0.224,0.063,0.327c-0.486,4.619-3.71,8.434-8.016,9.787c-0.007-0.011-0.019-0.025-0.021-0.034c-0.027-0.078-0.027-0.233,0.064-0.285c0.091-0.053,0.312-0.233,0.363-0.272c0.052-0.04,0.13-0.221,0.091-0.247c-0.038-0.026-0.232,0-0.26-0.039c-0.026-0.039-0.026-0.092,0.104-0.182c0.13-0.091,0.195-0.222,0.247-0.26c0.052-0.039,0.155-0.117,0.195-0.209c0.038-0.09-0.041-0.039-0.118-0.039s-0.117-0.142-0.117-0.207s0.195,0.026,0.339,0.052c0.143,0.024,0.077-0.065,0.064-0.142c-0.013-0.078,0.026-0.209,0.105-0.17c0.076,0.039,0.479-0.013,0.531-0.026c0.052-0.013,0.194-0.246,0.246-0.312c0.053-0.065,0.064-0.129,0-0.168c-0.065-0.04-0.143-0.184-0.168-0.221c-0.026-0.041-0.039-0.274-0.013-0.34c0.025-0.063,0,0.377,0.181,0.43c0.183,0.052,0.286,0.078,0.455-0.078c0.169-0.155,0.298-0.26,0.312-0.363c0.013-0.104,0.052-0.209,0.117-0.246c0.065-0.039,0.104,0.103,0.182-0.065c0.078-0.17,0.156-0.157,0.234-0.299c0.077-0.144-0.13-0.325,0.024-0.43c0.157-0.103,0.43-0.233,0.43-0.233s0.078-0.039,0.234-0.078c0.155-0.038,0.324-0.014,0.376-0.09c0.052-0.079,0.104-0.247,0.182-0.338c0.079-0.092,0.169-0.234,0.13-0.299c-0.039-0.065,0.104-0.352,0.091-0.429c-0.013-0.078-0.13-0.261,0.065-0.416s0.402-0.391,0.416-0.454c0.012-0.065,0.169-0.338,0.154-0.469c-0.012-0.129-0.154-0.285-0.245-0.325c-0.092-0.037-0.286-0.05-0.364-0.154s-0.299-0.208-0.377-0.182c-0.077,0.026-0.208,0.051-0.312-0.015c-0.104-0.063-0.272-0.143-0.337-0.194c-0.066-0.051-0.234-0.09-0.312-0.09s-0.065-0.053-0.182,0.103c-0.117,0.157,0,0.209-0.208,0.182c-0.209-0.024,0.025-0.038,0.144-0.194c0.115-0.155-0.014-0.247-0.144-0.207c-0.13,0.039-0.039,0.117-0.247,0.156c-0.207,0.038-0.207-0.092-0.077-0.117c0.13-0.026,0.363-0.143,0.363-0.194c0-0.053-0.026-0.196-0.13-0.196s-0.078-0.129-0.233-0.297c-0.156-0.17-0.351-0.274-0.508-0.249c-0.154,0.026-0.272,0.065-0.35-0.076c-0.078-0.144-0.169-0.17-0.222-0.247c-0.051-0.078-0.182,0-0.221-0.039s-0.039-0.039-0.039-0.039s-0.169,0.039-0.077-0.078c0.09-0.117,0.129-0.338,0.09-0.325c-0.038,0.013-0.104,0.196-0.168,0.183c-0.064-0.013-0.014-0.04-0.144-0.117c-0.13-0.078-0.337-0.013-0.337,0.052c0,0.065-0.065,0.117-0.065,0.117s-0.039-0.038-0.078-0.117c-0.039-0.078-0.221-0.091-0.312-0.013c-0.09,0.078-0.142-0.196-0.207-0.196s-0.194,0.065-0.26,0.184c-0.064,0.116-0.038,0.285-0.092,0.272c-0.05-0.013-0.063-0.233-0.05-0.312c0.012-0.079,0.155-0.208,0.05-0.234c-0.103-0.026-0.259,0.13-0.323,0.143c-0.065,0.013-0.195,0.104-0.273,0.209c-0.077,0.103-0.116,0.168-0.195,0.207c-0.077,0.039-0.193,0-0.167-0.039c0.025-0.039-0.222-0.181-0.261-0.13c-0.04,0.052-0.155,0.091-0.272,0.144c-0.117,0.052-0.222-0.065-0.247-0.117s-0.079-0.064-0.091-0.234c-0.013-0.168,0.027-0.351,0.065-0.454c0.038-0.104-0.195-0.312-0.286-0.3c-0.091,0.015-0.182,0.105-0.272,0.091c-0.092-0.012-0.052-0.038-0.195-0.038c-0.143,0-0.026-0.025,0-0.143c0.025-0.116-0.052-0.273,0.092-0.377c0.142-0.104,0.091-0.351,0-0.363c-0.092-0.014-0.261,0.039-0.377,0.026c-0.116-0.014-0.208,0.091-0.169,0.207c0.039,0.117-0.065,0.195-0.104,0.183c-0.039-0.013-0.09-0.078-0.234,0.026c-0.142,0.103-0.194,0.064-0.337-0.052c-0.143-0.118-0.299-0.234-0.325-0.416c-0.026-0.182-0.04-0.364,0.013-0.468c0.051-0.104,0.051-0.285-0.026-0.312c-0.078-0.025,0.09-0.155,0.181-0.181c0.092-0.026,0.234-0.143,0.26-0.195c0.026-0.052,0.156-0.04,0.298-0.04c0.143,0,0.169,0,0.312,0.078c0.143,0.078,0.169-0.039,0.169-0.078c0-0.039,0.052-0.117,0.208-0.104c0.156,0.013,0.376-0.052,0.416-0.013s0.116,0.195,0.194,0.143c0.079-0.051,0.104-0.143,0.131,0.014c0.025,0.155,0.09,0.39,0.208,0.429c0.116,0.039,0.052,0.194,0.168,0.207c0.115,0.013,0.17-0.246,0.131-0.337c-0.04-0.09-0.118-0.363-0.183-0.428c-0.064-0.065-0.064-0.234,0.064-0.286c0.13-0.052,0.442-0.312,0.532-0.389c0.092-0.079,0.338-0.144,0.261-0.248c-0.078-0.104-0.104-0.168-0.104-0.247s0.078-0.052,0.117,0s0.194-0.078,0.155-0.143c-0.038-0.064-0.026-0.155,0.065-0.143c0.091,0.013,0.116-0.065,0.078-0.117c-0.039-0.052,0.091-0.117,0.182-0.091c0.092,0.026,0.325-0.013,0.364-0.065c0.038-0.052-0.078-0.104-0.078-0.208c0-0.104,0.155-0.195,0.247-0.208c0.091-0.013,0.207,0,0.221-0.039c0.012-0.039,0.143-0.143,0.155-0.052c0.014,0.091,0,0.247,0.104,0.247c0.104,0,0.232-0.117,0.272-0.129c0.038-0.013,0.286-0.065,0.338-0.078c0.052-0.013,0.363-0.039,0.325-0.13c-0.039-0.09-0.078-0.181-0.118-0.22c-0.039-0.039-0.077,0.013-0.13,0.078c-0.051,0.065-0.143,0.065-0.168,0.013c-0.026-0.051,0.012-0.207-0.078-0.156c-0.092,0.052-0.104,0.104-0.157,0.078c-0.052-0.026-0.103-0.117-0.103-0.117s0.129-0.064,0.038-0.182c-0.09-0.117-0.221-0.091-0.35-0.025c-0.13,0.064-0.118,0.051-0.273,0.09s-0.234,0.078-0.234,0.078s0.209-0.129,0.299-0.208c0.091-0.078,0.209-0.117,0.286-0.195c0.078-0.078,0.285,0.039,0.285,0.039s0.105-0.104,0.105-0.039s-0.027,0.234,0.051,0.234c0.079,0,0.299-0.104,0.21-0.131c-0.093-0.026,0.129,0,0.219-0.065c0.092-0.065,0.194-0.065,0.247-0.09c0.052-0.026,0.092-0.143,0.182-0.143c0.092,0,0.13,0.117,0,0.195s-0.143,0.273-0.208,0.325c-0.064,0.052-0.026,0.117,0.078,0.104c0.104-0.013,0.194,0.013,0.286-0.013s0.143,0.026,0.168,0.065c0.026,0.039,0.104-0.039,0.104-0.039s0.169-0.039,0.221,0.026c0.053,0.064,0.092-0.039,0.053-0.104c-0.039-0.064-0.092-0.129-0.13-0.208c-0.039-0.078-0.091-0.104-0.194-0.078c-0.104,0.026-0.13-0.026-0.195-0.064c-0.065-0.04-0.118,0.052-0.065-0.04c0.053-0.09,0.078-0.117,0.117-0.195c0.039-0.078,0.209-0.221,0.039-0.259c-0.169-0.04-0.222-0.065-0.247-0.143c-0.026-0.078-0.221-0.221-0.272-0.221c-0.053,0-0.233,0-0.247-0.065c-0.013-0.065-0.143-0.208-0.208-0.273c-0.064-0.065-0.312-0.351-0.351-0.377c-0.039-0.026-0.091-0.013-0.208,0.143c-0.116,0.157-0.22,0.183-0.312,0.144c-0.091-0.039-0.104-0.026-0.193-0.13c-0.093-0.104,0.09-0.117,0.051-0.182c-0.04-0.064-0.247-0.091-0.377-0.104c-0.13-0.013-0.221-0.156-0.416-0.169c-0.194-0.013-0.428,0.026-0.493,0.026c-0.064,0-0.064,0.091-0.09,0.234c-0.027,0.143,0.09,0.182-0.027,0.208c-0.116,0.026-0.169,0.039-0.052,0.091c0.117,0.052,0.273,0.26,0.273,0.26s0,0.117-0.092,0.182c-0.09,0.065-0.182,0.13-0.233,0.053c-0.053-0.079-0.195-0.065-0.155,0.013c0.038,0.078,0.116,0.117,0.116,0.195c0,0.077,0.117,0.272,0.039,0.337c-0.078,0.065-0.168,0.014-0.233,0.026s-0.131-0.104-0.078-0.13c0.051-0.026-0.014-0.221-0.014-0.221s-0.155,0.221-0.143,0.104c0.014-0.117-0.064-0.13-0.064-0.221c0-0.091-0.079-0.13-0.194-0.104c-0.118,0.026-0.26-0.04-0.482-0.079c-0.22-0.039-0.311-0.064-0.493-0.156c-0.182-0.091-0.247-0.026-0.338-0.013c-0.091,0.013-0.052-0.182-0.169-0.207c-0.116-0.027-0.181,0.025-0.207-0.144c-0.026-0.168,0.039-0.208,0.324-0.39c0.286-0.182,0.247-0.26,0.468-0.286c0.22-0.026,0.325,0.026,0.325-0.039s0.052-0.325,0.052-0.195S16.95,9.109,16.832,9.2c-0.116,0.091-0.052,0.104,0.04,0.104c0.091,0,0.259-0.091,0.259-0.091s0.208-0.091,0.26-0.013c0.053,0.078,0.053,0.156,0.144,0.156s0.285-0.104,0.116-0.195c-0.168-0.091-0.272-0.078-0.376-0.182s-0.078-0.065-0.195-0.039c-0.116,0.026-0.116-0.039-0.156-0.039s-0.104,0.026-0.13-0.026c-0.025-0.052,0.014-0.065,0.145-0.065c0.129,0,0.285,0.039,0.285,0.039s0.155-0.052,0.194-0.065c0.039-0.013,0.247-0.039,0.208-0.155c-0.04-0.117-0.169-0.117-0.208-0.156s0.078-0.09,0.143-0.117c0.065-0.026,0.247,0,0.247,0s0.117,0.013,0.117-0.039S17.897,8.2,17.976,8.239s0,0.156,0.117,0.13c0.116-0.026,0.143,0,0.207,0.039c0.065,0.039-0.013,0.195-0.077,0.221c-0.065,0.025-0.169,0.077-0.026,0.09c0.144,0.014,0.246,0.014,0.246,0.014s0.092-0.091,0.131-0.169c0.038-0.078,0.104-0.026,0.155,0c0.052,0.025,0.247,0.065,0.065,0.117c-0.183,0.052-0.221,0.117-0.26,0.182c-0.038,0.065-0.053,0.104-0.221,0.065c-0.17-0.039-0.26-0.026-0.299,0.039c-0.039,0.064-0.013,0.273,0.053,0.247c0.063-0.026,0.129-0.026,0.207-0.052c0.078-0.026,0.39,0.026,0.467,0.013c0.078-0.013,0.209,0.13,0.248,0.104c0.039-0.026,0.117,0.052,0.194,0.104c0.078,0.052,0.052-0.117,0.194-0.013c0.144,0.104,0.065,0.104,0.144,0.104c0.076,0,0.246,0.013,0.246,0.013s0.014-0.129,0.144-0.104c0.13,0.026,0.245,0.169,0.232,0.064c-0.012-0.103,0.013-0.181-0.09-0.259c-0.104-0.078-0.272-0.13-0.299-0.169c-0.026-0.039-0.052-0.091-0.013-0.117c0.039-0.025,0.221,0.013,0.324,0.079c0.104,0.065,0.195,0.13,0.273,0.078c0.077-0.052,0.17-0.078,0.208-0.117c0.038-0.04,0.13-0.156,0.13-0.156s-0.391-0.051-0.441-0.117c-0.053-0.065-0.235-0.156-0.287-0.156s-0.194,0.091-0.246-0.039s-0.052-0.286-0.105-0.299c-0.05-0.013-0.597-0.091-0.674-0.13c-0.078-0.039-0.39-0.13-0.507-0.195s-0.286-0.156-0.389-0.156c-0.104,0-0.533,0.052-0.611,0.039c-0.078-0.013-0.312,0.026-0.403,0.039c-0.091,0.013,0.117,0.182-0.077,0.221c-0.195,0.039-0.169,0.065-0.13-0.13c0.038-0.195-0.131-0.247-0.299-0.169c-0.169,0.078-0.442,0.13-0.377,0.221c0.065,0.091-0.012,0.157,0.117,0.247c0.13,0.091,0.183,0.117,0.35,0.104c0.17-0.013,0.339,0.025,0.339,0.025s0,0.157-0.064,0.182c-0.065,0.026-0.169,0.026-0.196,0.104c-0.025,0.078-0.155,0.117-0.155,0.078s0.065-0.169-0.026-0.234c-0.09-0.065-0.117-0.078-0.221-0.013c-0.104,0.065-0.116,0.091-0.169-0.013C16.053,8.291,15.897,8.2,15.897,8.2s-0.104-0.129-0.182-0.194c-0.077-0.065-0.22-0.052-0.234,0.013c-0.013,0.064,0.026,0.129,0.078,0.247c0.052,0.117,0.104,0.337,0.013,0.351c-0.091,0.013-0.104,0.026-0.195,0.052c-0.091,0.026-0.13-0.039-0.13-0.143s-0.04-0.195-0.013-0.234c0.026-0.039-0.104,0.027-0.234,0c-0.13-0.025-0.233,0.052-0.104,0.092c0.13,0.039,0.157,0.194,0.039,0.233c-0.117,0.039-0.559,0-0.702,0s-0.35,0.039-0.39-0.039c-0.039-0.078,0.118-0.129,0.208-0.129c0.091,0,0.363,0.012,0.467-0.13c0.104-0.143-0.13-0.169-0.233-0.169c-0.104,0-0.183-0.039-0.299-0.155c-0.118-0.117,0.078-0.195,0.052-0.247c-0.026-0.052-0.156-0.014-0.272-0.014c-0.117,0-0.299-0.09-0.299,0.014c0,0.104,0.143,0.402,0.052,0.337c-0.091-0.064-0.078-0.156-0.143-0.234c-0.065-0.078-0.168-0.065-0.299-0.052c-0.129,0.013-0.35,0.052-0.415,0.039c-0.064-0.013-0.013-0.013-0.156-0.078c-0.142-0.065-0.208-0.052-0.312-0.117C12.091,7.576,12.182,7.551,12,7.538c-0.181-0.013-0.168,0.09-0.35,0.065c-0.182-0.026-0.234,0.013-0.416,0c-0.182-0.013-0.272-0.026-0.299,0.065c-0.025,0.091-0.078,0.247-0.156,0.247c-0.077,0-0.169,0.091,0.078,0.104c0.247,0.013,0.105,0.129,0.325,0.117c0.221-0.013,0.416-0.013,0.468-0.117c0.052-0.104,0.091-0.104,0.117-0.065c0.025,0.039,0.22,0.272,0.22,0.272s0.131,0.104,0.183,0.13c0.051,0.026-0.052,0.143-0.156,0.078c-0.104-0.065-0.299-0.051-0.377-0.116c-0.078-0.065-0.429-0.065-0.52-0.052c-0.09,0.013-0.247-0.039-0.299-0.039c-0.051,0-0.221,0.13-0.221,0.13S10.532,8.252,10.494,8.2c-0.039-0.052-0.104,0.052-0.156,0.065c-0.052,0.013-0.208-0.104-0.364-0.052C9.818,8.265,9.87,8.317,9.649,8.304s-0.272-0.052-0.35-0.039C9.22,8.278,9.22,8.278,9.22,8.278S9.233,8.33,9.143,8.382C9.052,8.434,8.986,8.499,8.921,8.421C8.857,8.343,8.818,8.343,8.779,8.33c-0.04-0.013-0.118-0.078-0.286-0.04C8.324,8.33,8.064,8.239,8.013,8.239c-0.04,0-0.313-0.015-0.491-0.033c2.109-2.292,5.124-3.74,8.478-3.74c2.128,0,4.117,0.589,5.83,1.598c-0.117,0.072-0.319,0.06-0.388,0.023c-0.078-0.043-0.158-0.078-0.475-0.061c-0.317,0.018-0.665,0.122-0.595,0.226c0.072,0.104-0.142,0.165-0.197,0.113c-0.055-0.052-0.309,0.06-0.293,0.165c0.016,0.104-0.039,0.225-0.175,0.199c-0.134-0.027-0.229,0.06-0.237,0.146c-0.007,0.087-0.309,0.147-0.332,0.147c-0.024,0-0.412-0.008-0.27,0.095c0.097,0.069,0.15,0.027,0.27,0.052c0.119,0.026,0.214,0.217,0.277,0.243c0.062,0.026,0.15,0,0.189-0.052c0.04-0.052,0.095-0.234,0.095-0.234s0,0.173,0.097,0.208c0.095,0.035,0.331-0.026,0.395-0.017c0.064,0.008,0.437,0.061,0.538,0.112c0.104,0.052,0.356,0.087,0.428,0.199c0.071,0.113,0.08,0.503,0.119,0.546c0.04,0.043,0.174-0.139,0.205-0.182c0.031-0.044,0.198-0.018,0.254,0.042c0.056,0.061,0.182,0.208,0.175,0.269C21.9,8.365,21.877,8.459,21.83,8.425c-0.048-0.034-0.127-0.025-0.096-0.095c0.032-0.069,0.048-0.217-0.015-0.217c-0.064,0-0.119,0-0.119,0s-0.12-0.035-0.199,0.095s-0.015,0.26,0.04,0.26s0.184,0,0.184,0.034c0,0.035-0.136,0.139-0.128,0.2c0.009,0.061,0.11,0.268,0.144,0.312c0.031,0.043,0.197,0.086,0.244,0.096c0.049,0.008-0.111,0.017-0.07,0.077c0.04,0.061,0.102,0.208,0.189,0.243c0.087,0.035,0.333,0.19,0.363,0.26c0.032,0.069,0.222-0.052,0.262-0.061c0.04-0.008,0.032,0.182,0.143,0.191c0.11,0.008,0.15-0.018,0.245-0.096s0.072-0.182,0.079-0.26c0.009-0.078,0-0.138,0.104-0.113c0.104,0.026,0.158-0.018,0.15-0.104c-0.008-0.087-0.095-0.191,0.07-0.217c0.167-0.026,0.254-0.138,0.357-0.138c0.103,0,0.389,0.043,0.419,0c0.032-0.043,0.167-0.243,0.254-0.251c0.067-0.007,0.224-0.021,0.385-0.042c1.582,1.885,2.561,4.284,2.673,6.905c-0.118,0.159-0.012,0.305,0.021,0.408c0.001,0.03,0.005,0.058,0.005,0.088c0,0.136-0.016,0.269-0.021,0.404C27.512,16.406,27.512,16.408,27.51,16.41zM17.794,12.084c-0.064,0.013-0.169-0.052-0.169-0.143s-0.091,0.169-0.04,0.247c0.053,0.078-0.104,0.169-0.155,0.169s-0.091-0.116-0.078-0.233c0.014-0.117-0.077-0.221-0.221-0.208c-0.143,0.014-0.208,0.13-0.259,0.169c-0.053,0.039-0.053,0.259-0.04,0.312s0.013,0.235-0.116,0.221c-0.118-0.013-0.092-0.233-0.079-0.312c0.014-0.078-0.039-0.273,0.014-0.376c0.053-0.104,0.207-0.143,0.312-0.156s0.324,0.065,0.363,0.052c0.04-0.014,0.222-0.014,0.312,0C17.729,11.837,17.858,12.071,17.794,12.084zM18.027,12.123c0.04,0.026,0.311-0.039,0.364,0.026c0.051,0.065-0.054,0.078-0.183,0.13c-0.129,0.052-0.169,0.039-0.221,0.104s-0.221,0.09-0.299,0.168c-0.078,0.079-0.217,0.125-0.246,0.065c-0.04-0.078,0.013-0.039,0.025-0.078c0.013-0.039,0.245-0.129,0.245-0.129S17.988,12.097,18.027,12.123zM16.988,11.668c-0.038,0.013-0.182-0.026-0.3-0.026c-0.116,0-0.091-0.078-0.143-0.064c-0.051,0.013-0.168,0.039-0.247,0.078c-0.078,0.039-0.208,0.03-0.208-0.04c0-0.104,0.052-0.078,0.221-0.143c0.169-0.065,0.352-0.247,0.429-0.169c0.078,0.078,0.221,0.169,0.312,0.182C17.144,11.5,17.026,11.655,16.988,11.668zM15.659,7.637c-0.079,0.026-0.347,0.139-0.321,0.199c0.01,0.023,0.078,0.069,0.19,0.052c0.113-0.018,0.276-0.035,0.355-0.043c0.078-0.009,0.095-0.139,0.009-0.147C15.805,7.689,15.736,7.611,15.659,7.637zM14.698,7.741c-0.061,0.026-0.243-0.043-0.338,0.018c-0.061,0.038-0.026,0.164,0.07,0.172c0.095,0.009,0.259-0.06,0.276-0.008c0.018,0.052,0.078,0.286,0.234,0.208c0.156-0.078,0.147-0.147,0.19-0.156c0.043-0.009-0.008-0.199-0.078-0.243C14.983,7.689,14.758,7.715,14.698,7.741zM14.385,7.005c0.017,0.044-0.008,0.078,0.113,0.095c0.121,0.018,0.173,0.035,0.243,0.035c0.069,0,0.042-0.113-0.018-0.19c-0.061-0.078-0.043-0.069-0.199-0.113c-0.156-0.043-0.312-0.043-0.416-0.035c-0.104,0.009-0.217-0.017-0.243,0.104c-0.013,0.062,0.07,0.112,0.174,0.112S14.368,6.962,14.385,7.005zM14.611,7.481c0.043,0.095,0.043,0.051,0.165,0.061C14.896,7.551,14.991,7.421,15,7.378c0.009-0.044-0.061-0.13-0.225-0.113c-0.165,0.017-0.667-0.026-0.736,0.034c-0.066,0.058,0,0.233-0.026,0.251c-0.026,0.017,0.009,0.095,0.077,0.078c0.069-0.017,0.104-0.182,0.157-0.182C14.299,7.447,14.568,7.386,14.611,7.481zM12.982,7.126c0.052,0.043,0.183,0.008,0.173-0.035c-0.008-0.043,0.053-0.217-0.051-0.225C13,6.858,12.854,6.962,12.697,7.014c-0.101,0.033-0.078,0.13-0.009,0.13S12.931,7.083,12.982,7.126zM13.72,7.282c-0.087,0.043-0.114,0.069-0.191,0.052c-0.078-0.017-0.078-0.156-0.217-0.13c-0.138,0.026-0.164,0.104-0.207,0.139s-0.139,0.061-0.173,0.043c-0.034-0.017-0.234-0.129-0.234-0.129s-0.416-0.018-0.433-0.07c-0.017-0.052-0.086-0.138-0.277-0.121s-0.52,0.13-0.572,0.13c-0.052,0,0.062,0.104-0.009,0.104c-0.069,0-0.155-0.008-0.181,0.069c-0.018,0.053,0.078,0.052,0.189,0.052c0.112,0,0.295,0,0.347-0.026c0.052-0.026,0.312-0.087,0.303-0.009c-0.009,0.079,0.104,0.199,0.164,0.182c0.061-0.017,0.183-0.13,0.243-0.086c0.061,0.043,0.07,0.146,0.13,0.173c0.061,0.025,0.226,0.025,0.304,0c0.077-0.027,0.294-0.027,0.389-0.009c0.095,0.018,0.373,0.069,0.399,0.018c0.026-0.053,0.104-0.061,0.112-0.113s0.051-0.216,0.051-0.216S13.806,7.239,13.72,7.282zM18.105,16.239c-0.119,0.021-0.091,0.252,0.052,0.21C18.3,16.407,18.223,16.217,18.105,16.239zM19.235,15.929c-0.104-0.026-0.221,0-0.299,0.013c-0.078,0.013-0.299,0.208-0.299,0.208s0.143,0.026,0.233,0.026c0.092,0,0.144,0.051,0.221,0.09c0.078,0.04,0.221-0.052,0.272-0.052c0.053,0,0.118,0.156,0.131-0.013C19.508,16.032,19.339,15.955,19.235,15.929zM15.616,7.507c-0.043-0.104-0.259-0.139-0.304-0.035C15.274,7.563,15.659,7.611,15.616,7.507zM18.093,15.292c0.143-0.026,0.064-0.144-0.053-0.13C17.922,15.175,17.949,15.318,18.093,15.292zM19.82,16.095c-0.119,0.022-0.092,0.253,0.051,0.211C20.015,16.264,19.937,16.074,19.82,16.095zM18.247,15.708c-0.09,0.013-0.285-0.09-0.389-0.182c-0.104-0.091-0.299-0.091-0.377-0.091c-0.077,0-0.39,0.091-0.39,0.091c-0.013,0.13,0.117,0.091,0.273,0.091s0.429-0.026,0.479,0.039c0.053,0.064,0.286,0.168,0.352,0.221c0.064,0.052,0.272,0.065,0.285,0.013S18.338,15.695,18.247,15.708zM16.698,7.412c-0.13-0.009-0.295-0.009-0.399,0c-0.104,0.008-0.182-0.069-0.26-0.113c-0.077-0.043-0.251-0.182-0.354-0.199c-0.104-0.017-0.086-0.017-0.303-0.069c-0.11-0.027-0.294-0.061-0.294-0.086c0-0.026-0.052,0.121,0.043,0.165c0.095,0.043,0.251,0.121,0.363,0.164c0.114,0.043,0.329,0.052,0.399,0.139c0.069,0.086,0.303,0.156,0.303,0.156l0.277,0.026c0,0,0.191-0.043,0.39-0.026c0.199,0.017,0.493,0.043,0.659,0.035c0.163-0.008,0.189-0.061,0.208-0.095c0.016-0.035-0.304-0.104-0.383-0.095C17.271,7.42,16.827,7.42,16.698,7.412zM17.182,9.404c-0.034,0.039,0.157,0.095,0.191,0.043C17.407,9.396,17.271,9.309,17.182,9.404zM17.764,9.585c0.086-0.035,0.043-0.139-0.079-0.104C17.547,9.521,17.676,9.62,17.764,9.585z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.GlobeAlt();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.GlobeAlt = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.GlobeAlt.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.GlobeAlt\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM27.436,17.39c0.001,0.002,0.004,0.002,0.005,0.004c-0.022,0.187-0.054,0.37-0.085,0.554c-0.015-0.012-0.034-0.025-0.047-0.036c-0.103-0.09-0.254-0.128-0.318-0.115c-0.157,0.032,0.229,0.305,0.267,0.342c0.009,0.009,0.031,0.03,0.062,0.058c-1.029,5.312-5.709,9.338-11.319,9.338c-4.123,0-7.736-2.18-9.776-5.441c0.123-0.016,0.24-0.016,0.28-0.076c0.051-0.077,0.102-0.241,0.178-0.331c0.077-0.089,0.165-0.229,0.127-0.292c-0.039-0.064,0.101-0.344,0.088-0.419c-0.013-0.076-0.127-0.256,0.064-0.407s0.394-0.382,0.407-0.444c0.012-0.063,0.166-0.331,0.152-0.458c-0.012-0.127-0.152-0.28-0.24-0.318c-0.09-0.037-0.28-0.05-0.356-0.151c-0.077-0.103-0.292-0.203-0.368-0.178c-0.076,0.025-0.204,0.05-0.305-0.015c-0.102-0.062-0.267-0.139-0.33-0.189c-0.065-0.05-0.229-0.088-0.305-0.088c-0.077,0-0.065-0.052-0.178,0.101c-0.114,0.153,0,0.204-0.204,0.177c-0.204-0.023,0.025-0.036,0.141-0.189c0.113-0.152-0.013-0.242-0.141-0.203c-0.126,0.038-0.038,0.115-0.241,0.153c-0.203,0.036-0.203-0.09-0.076-0.115s0.355-0.139,0.355-0.19c0-0.051-0.025-0.191-0.127-0.191s-0.077-0.126-0.229-0.291c-0.092-0.101-0.196-0.164-0.299-0.204c-0.09-0.579-0.15-1.167-0.15-1.771c0-2.844,1.039-5.446,2.751-7.458c0.024-0.02,0.048-0.034,0.069-0.036c0.084-0.009,0.31-0.025,0.51-0.059c0.202-0.034,0.418-0.161,0.489-0.153c0.069,0.008,0.241,0.008,0.186-0.042C8.417,8.2,8.339,8.082,8.223,8.082S8.215,7.896,8.246,7.896c0.03,0,0.186,0.025,0.178,0.11C8.417,8.091,8.471,8.2,8.625,8.167c0.156-0.034,0.132-0.162,0.102-0.195C8.695,7.938,8.672,7.853,8.642,7.794c-0.031-0.06-0.023-0.136,0.14-0.153C8.944,7.625,9.168,7.708,9.16,7.573s0-0.28,0.046-0.356C9.253,7.142,9.354,7.09,9.299,7.065C9.246,7.04,9.176,7.099,9.121,6.972c-0.054-0.127,0.047-0.22,0.108-0.271c0.02-0.015,0.067-0.06,0.124-0.112C11.234,5.257,13.524,4.466,16,4.466c3.213,0,6.122,1.323,8.214,3.45c-0.008,0.022-0.01,0.052-0.031,0.056c-0.077,0.013-0.166,0.063-0.179-0.051c-0.013-0.114-0.013-0.331-0.102-0.203c-0.089,0.127-0.127,0.127-0.127,0.191c0,0.063,0.076,0.127,0.051,0.241C23.8,8.264,23.8,8.341,23.84,8.341c0.036,0,0.126-0.115,0.239-0.141c0.116-0.025,0.319-0.088,0.332,0.026c0.013,0.115,0.139,0.152,0.013,0.203c-0.128,0.051-0.267,0.026-0.293-0.051c-0.025-0.077-0.114-0.077-0.203-0.013c-0.088,0.063-0.279,0.292-0.279,0.292s-0.306,0.139-0.343,0.114c-0.04-0.025,0.101-0.165,0.203-0.228c0.102-0.064,0.178-0.204,0.14-0.242c-0.038-0.038-0.088-0.279-0.063-0.343c0.025-0.063,0.139-0.152,0.013-0.216c-0.127-0.063-0.217-0.14-0.318-0.178s-0.216,0.152-0.305,0.204c-0.089,0.051-0.076,0.114-0.191,0.127c-0.114,0.013-0.189,0.165,0,0.254c0.191,0.089,0.255,0.152,0.204,0.204c-0.051,0.051-0.267-0.025-0.267-0.025s-0.165-0.076-0.268-0.076c-0.101,0-0.229-0.063-0.33-0.076c-0.102-0.013-0.306-0.013-0.355,0.038c-0.051,0.051-0.179,0.203-0.28,0.152c-0.101-0.051-0.101-0.102-0.241-0.051c-0.14,0.051-0.279-0.038-0.355,0.038c-0.077,0.076-0.013,0.076-0.255,0c-0.241-0.076-0.189,0.051-0.419,0.089s-0.368-0.038-0.432,0.038c-0.064,0.077-0.153,0.217-0.19,0.127c-0.038-0.088,0.126-0.241,0.062-0.292c-0.062-0.051-0.33-0.025-0.367,0.013c-0.039,0.038-0.014,0.178,0.011,0.229c0.026,0.05,0.064,0.254-0.011,0.216c-0.077-0.038-0.064-0.166-0.141-0.152c-0.076,0.013-0.165,0.051-0.203,0.077c-0.038,0.025-0.191,0.025-0.229,0.076c-0.037,0.051,0.014,0.191-0.051,0.203c-0.063,0.013-0.114,0.064-0.254-0.025c-0.14-0.089-0.14-0.038-0.178-0.012c-0.038,0.025-0.216,0.127-0.229,0.012c-0.013-0.114,0.025-0.152-0.089-0.229c-0.115-0.076-0.026-0.076,0.127-0.025c0.152,0.05,0.343,0.075,0.622-0.013c0.28-0.089,0.395-0.127,0.28-0.178c-0.115-0.05-0.229-0.101-0.406-0.127c-0.179-0.025-0.42-0.025-0.7-0.127c-0.279-0.102-0.343-0.14-0.457-0.165c-0.115-0.026-0.813-0.14-1.132-0.089c-0.317,0.051-1.193,0.28-1.245,0.318s-0.128,0.19-0.292,0.318c-0.165,0.127-0.47,0.419-0.712,0.47c-0.241,0.051-0.521,0.254-0.521,0.305c0,0.051,0.101,0.242,0.076,0.28c-0.025,0.038,0.05,0.229,0.191,0.28c0.139,0.05,0.381,0.038,0.393-0.039c0.014-0.076,0.204-0.241,0.217-0.127c0.013,0.115,0.14,0.292,0.114,0.368c-0.025,0.077,0,0.153,0.09,0.14c0.088-0.012,0.559-0.114,0.559-0.114s0.153-0.064,0.127-0.166c-0.026-0.101,0.166-0.241,0.203-0.279c0.038-0.038,0.178-0.191,0.014-0.241c-0.167-0.051-0.293-0.064-0.115-0.216s0.292,0,0.521-0.229c0.229-0.229-0.051-0.292,0.191-0.305c0.241-0.013,0.496-0.025,0.444,0.051c-0.05,0.076-0.342,0.242-0.508,0.318c-0.166,0.077-0.14,0.216-0.076,0.292c0.063,0.076,0.09,0.254,0.204,0.229c0.113-0.025,0.254-0.114,0.38-0.101c0.128,0.012,0.383-0.013,0.42-0.013c0.039,0,0.216,0.178,0.114,0.203c-0.101,0.025-0.229,0.013-0.445,0.025c-0.215,0.013-0.456,0.013-0.456,0.051c0,0.039,0.292,0.127,0.19,0.191c-0.102,0.063-0.203-0.013-0.331-0.026c-0.127-0.012-0.203,0.166-0.241,0.267c-0.039,0.102,0.063,0.28-0.127,0.216c-0.191-0.063-0.331-0.063-0.381-0.038c-0.051,0.025-0.203,0.076-0.331,0.114c-0.126,0.038-0.076-0.063-0.242-0.063c-0.164,0-0.164,0-0.164,0l-0.103,0.013c0,0-0.101-0.063-0.114-0.165c-0.013-0.102,0.05-0.216-0.013-0.241c-0.064-0.026-0.292,0.012-0.33,0.088c-0.038,0.076-0.077,0.216-0.026,0.28c0.052,0.063,0.204,0.19,0.064,0.152c-0.14-0.038-0.317-0.051-0.419,0.026c-0.101,0.076-0.279,0.241-0.279,0.241s-0.318,0.025-0.318,0.102c0,0.077,0,0.178-0.114,0.191c-0.115,0.013-0.268,0.05-0.42,0.076c-0.153,0.025-0.139,0.088-0.317,0.102s-0.204,0.089-0.038,0.114c0.165,0.025,0.418,0.127,0.431,0.241c0.014,0.114-0.013,0.242-0.076,0.356c-0.043,0.079-0.305,0.026-0.458,0.026c-0.152,0-0.456-0.051-0.584,0c-0.127,0.051-0.102,0.305-0.064,0.419c0.039,0.114-0.012,0.178-0.063,0.216c-0.051,0.038-0.065,0.152,0,0.204c0.063,0.051,0.114,0.165,0.166,0.178c0.051,0.013,0.215-0.038,0.279,0.025c0.064,0.064,0.127,0.216,0.165,0.178c0.039-0.038,0.089-0.203,0.153-0.166c0.064,0.039,0.216-0.012,0.331-0.025s0.177-0.14,0.292-0.204c0.114-0.063,0.05-0.063,0.013-0.14c-0.038-0.076,0.114-0.165,0.204-0.254c0.088-0.089,0.253-0.013,0.292-0.115c0.038-0.102,0.051-0.279,0.151-0.267c0.103,0.013,0.243,0.076,0.331,0.076c0.089,0,0.279-0.14,0.332-0.165c0.05-0.025,0.241-0.013,0.267,0.102c0.025,0.114,0.241,0.254,0.292,0.279c0.051,0.025,0.381,0.127,0.433,0.165c0.05,0.038,0.126,0.153,0.152,0.254c0.025,0.102,0.114,0.102,0.128,0.013c0.012-0.089-0.065-0.254,0.025-0.242c0.088,0.013,0.191-0.026,0.191-0.026s-0.243-0.165-0.331-0.203c-0.088-0.038-0.255-0.114-0.331-0.241c-0.076-0.127-0.267-0.153-0.254-0.279c0.013-0.127,0.191-0.051,0.292,0.051c0.102,0.102,0.356,0.241,0.445,0.33c0.088,0.089,0.229,0.127,0.267,0.242c0.039,0.114,0.152,0.241,0.19,0.292c0.038,0.051,0.165,0.331,0.204,0.394c0.038,0.063,0.165-0.012,0.229-0.063c0.063-0.051,0.179-0.076,0.191-0.178c0.013-0.102-0.153-0.178-0.203-0.216c-0.051-0.038,0.127-0.076,0.191-0.127c0.063-0.05,0.177-0.14,0.228-0.063c0.051,0.077,0.026,0.381,0.051,0.432c0.025,0.051,0.279,0.127,0.331,0.191c0.05,0.063,0.267,0.089,0.304,0.051c0.039-0.038,0.242,0.026,0.294,0.038c0.049,0.013,0.202-0.025,0.304-0.05c0.103-0.025,0.204-0.102,0.191,0.063c-0.013,0.165-0.051,0.419-0.179,0.546c-0.127,0.127-0.076,0.191-0.202,0.191c-0.06,0-0.113,0-0.156,0.021c-0.041-0.065-0.098-0.117-0.175-0.097c-0.152,0.038-0.344,0.038-0.47,0.19c-0.128,0.153-0.178,0.165-0.204,0.114c-0.025-0.051,0.369-0.267,0.317-0.331c-0.05-0.063-0.355-0.038-0.521-0.038c-0.166,0-0.305-0.102-0.433-0.127c-0.126-0.025-0.292,0.127-0.418,0.254c-0.128,0.127-0.216,0.038-0.331,0.038c-0.115,0-0.331-0.165-0.331-0.165s-0.216-0.089-0.305-0.089c-0.088,0-0.267-0.165-0.318-0.165c-0.05,0-0.19-0.115-0.088-0.166c0.101-0.05,0.202,0.051,0.101-0.229c-0.101-0.279-0.33-0.216-0.419-0.178c-0.088,0.039-0.724,0.025-0.775,0.025c-0.051,0-0.419,0.127-0.533,0.178c-0.116,0.051-0.318,0.115-0.369,0.14c-0.051,0.025-0.318-0.051-0.433,0.013c-0.151,0.084-0.291,0.216-0.33,0.216c-0.038,0-0.153,0.089-0.229,0.28c-0.077,0.19,0.013,0.355-0.128,0.419c-0.139,0.063-0.394,0.204-0.495,0.305c-0.102,0.101-0.229,0.458-0.355,0.623c-0.127,0.165,0,0.317,0.025,0.419c0.025,0.101,0.114,0.292-0.025,0.471c-0.14,0.178-0.127,0.266-0.191,0.279c-0.063,0.013,0.063,0.063,0.088,0.19c0.025,0.128-0.114,0.255,0.128,0.369c0.241,0.113,0.355,0.217,0.418,0.367c0.064,0.153,0.382,0.407,0.382,0.407s0.229,0.205,0.344,0.293c0.114,0.089,0.152,0.038,0.177-0.05c0.025-0.09,0.178-0.104,0.355-0.104c0.178,0,0.305,0.04,0.483,0.014c0.178-0.025,0.356-0.141,0.42-0.166c0.063-0.025,0.279-0.164,0.443-0.063c0.166,0.103,0.141,0.241,0.23,0.332c0.088,0.088,0.24,0.037,0.355-0.051c0.114-0.09,0.064-0.052,0.203,0.025c0.14,0.075,0.204,0.151,0.077,0.267c-0.128,0.113-0.051,0.293-0.128,0.47c-0.076,0.178-0.063,0.203,0.077,0.278c0.14,0.076,0.394,0.548,0.47,0.638c0.077,0.088-0.025,0.342,0.064,0.495c0.089,0.151,0.178,0.254,0.077,0.331c-0.103,0.075-0.28,0.216-0.292,0.47s0.051,0.431,0.102,0.521s0.177,0.331,0.241,0.419c0.064,0.089,0.14,0.305,0.152,0.445c0.013,0.14-0.024,0.306,0.039,0.381c0.064,0.076,0.102,0.191,0.216,0.292c0.115,0.103,0.152,0.318,0.152,0.318s0.039,0.089,0.051,0.229c0.012,0.14,0.025,0.228,0.152,0.292c0.126,0.063,0.215,0.076,0.28,0.013c0.063-0.063,0.381-0.077,0.546-0.063c0.165,0.013,0.355-0.075,0.521-0.19s0.407-0.419,0.496-0.508c0.089-0.09,0.292-0.255,0.268-0.356c-0.025-0.101-0.077-0.203,0.024-0.254c0.102-0.052,0.344-0.152,0.356-0.229c0.013-0.077-0.09-0.395-0.115-0.457c-0.024-0.064,0.064-0.18,0.165-0.306c0.103-0.128,0.421-0.216,0.471-0.267c0.051-0.053,0.191-0.267,0.217-0.433c0.024-0.167-0.051-0.369,0-0.457c0.05-0.09,0.013-0.165-0.103-0.268c-0.114-0.102-0.089-0.407-0.127-0.457c-0.037-0.051-0.013-0.319,0.063-0.345c0.076-0.023,0.242-0.279,0.344-0.393c0.102-0.114,0.394-0.47,0.534-0.496c0.139-0.025,0.355-0.229,0.368-0.343c0.013-0.115,0.38-0.547,0.394-0.635c0.013-0.09,0.166-0.42,0.102-0.497c-0.062-0.076-0.559,0.115-0.622,0.141c-0.064,0.025-0.241,0.127-0.446,0.113c-0.202-0.013-0.114-0.177-0.127-0.254c-0.012-0.076-0.228-0.368-0.279-0.381c-0.051-0.012-0.203-0.166-0.267-0.317c-0.063-0.153-0.152-0.343-0.254-0.458c-0.102-0.114-0.165-0.38-0.268-0.559c-0.101-0.178-0.189-0.407-0.279-0.572c-0.021-0.041-0.045-0.079-0.067-0.117c0.118-0.029,0.289-0.082,0.31-0.009c0.024,0.088,0.165,0.279,0.19,0.419s0.165,0.089,0.178,0.216c0.014,0.128,0.14,0.433,0.19,0.47c0.052,0.038,0.28,0.242,0.318,0.318c0.038,0.076,0.089,0.178,0.127,0.369c0.038,0.19,0.076,0.444,0.179,0.482c0.102,0.038,0.444-0.064,0.508-0.102s0.482-0.242,0.635-0.255c0.153-0.012,0.179-0.115,0.368-0.152c0.191-0.038,0.331-0.177,0.458-0.28c0.127-0.101,0.28-0.355,0.33-0.444c0.052-0.088,0.179-0.152,0.115-0.253c-0.063-0.103-0.331-0.254-0.433-0.268c-0.102-0.012-0.089-0.178-0.152-0.178s-0.051,0.088-0.178,0.153c-0.127,0.063-0.255,0.19-0.344,0.165s0.026-0.089-0.113-0.203s-0.192-0.14-0.192-0.228c0-0.089-0.278-0.255-0.304-0.382c-0.026-0.127,0.19-0.305,0.254-0.19c0.063,0.114,0.115,0.292,0.279,0.368c0.165,0.076,0.318,0.204,0.395,0.229c0.076,0.025,0.267-0.14,0.33-0.114c0.063,0.024,0.191,0.253,0.306,0.292c0.113,0.038,0.495,0.051,0.559,0.051s0.33,0.013,0.381-0.063c0.051-0.076,0.089-0.076,0.153-0.076c0.062,0,0.177,0.229,0.267,0.254c0.089,0.025,0.254,0.013,0.241,0.179c-0.012,0.164,0.076,0.305,0.165,0.317c0.09,0.012,0.293-0.191,0.293-0.191s0,0.318-0.012,0.433c-0.014,0.113,0.139,0.534,0.139,0.534s0.19,0.393,0.241,0.482s0.267,0.355,0.267,0.47c0,0.115,0.025,0.293,0.103,0.293c0.076,0,0.152-0.203,0.24-0.331c0.091-0.126,0.116-0.305,0.153-0.432c0.038-0.127,0.038-0.356,0.038-0.444c0-0.09,0.075-0.166,0.255-0.242c0.178-0.076,0.304-0.292,0.456-0.407c0.153-0.115,0.141-0.305,0.446-0.305c0.305,0,0.278,0,0.355-0.077c0.076-0.076,0.151-0.127,0.19,0.013c0.038,0.14,0.254,0.343,0.292,0.394c0.038,0.052,0.114,0.191,0.103,0.344c-0.013,0.152,0.012,0.33,0.075,0.33s0.191-0.216,0.191-0.216s0.279-0.189,0.267,0.013c-0.014,0.203,0.025,0.419,0.025,0.545c0,0.053,0.042,0.135,0.088,0.21c-0.005,0.059-0.004,0.119-0.009,0.178C27.388,17.153,27.387,17.327,27.436,17.39zM20.382,12.064c0.076,0.05,0.102,0.127,0.152,0.203c0.052,0.076,0.14,0.05,0.203,0.114c0.063,0.064-0.178,0.14-0.075,0.216c0.101,0.077,0.151,0.381,0.165,0.458c0.013,0.076-0.279,0.114-0.369,0.102c-0.089-0.013-0.354-0.102-0.445-0.127c-0.089-0.026-0.139-0.343-0.025-0.331c0.116,0.013,0.141-0.025,0.267-0.139c0.128-0.115-0.189-0.166-0.278-0.191c-0.089-0.025-0.268-0.305-0.331-0.394c-0.062-0.089-0.014-0.228,0.141-0.331c0.076-0.051,0.279,0.063,0.381,0c0.101-0.063,0.203-0.14,0.241-0.165c0.039-0.025,0.293,0.038,0.33,0.114c0.039,0.076,0.191,0.191,0.141,0.229c-0.052,0.038-0.281,0.076-0.356,0c-0.075-0.077-0.255,0.012-0.268,0.152C20.242,12.115,20.307,12.013,20.382,12.064zM16.875,12.28c-0.077-0.025,0.025-0.178,0.102-0.229c0.075-0.051,0.164-0.178,0.241-0.305c0.076-0.127,0.178-0.14,0.241-0.127c0.063,0.013,0.203,0.241,0.241,0.318c0.038,0.076,0.165-0.026,0.217-0.051c0.05-0.025,0.127-0.102,0.14-0.165s0.127-0.102,0.254-0.102s0.013,0.102-0.076,0.127c-0.09,0.025-0.038,0.077,0.113,0.127c0.153,0.051,0.293,0.191,0.459,0.279c0.165,0.089,0.19,0.267,0.088,0.292c-0.101,0.025-0.406,0.051-0.521,0.038c-0.114-0.013-0.254-0.127-0.419-0.153c-0.165-0.025-0.369-0.013-0.433,0.077s-0.292,0.05-0.395,0.05c-0.102,0-0.228,0.127-0.253,0.077C16.875,12.534,16.951,12.306,16.875,12.28zM17.307,9.458c0.063-0.178,0.419,0.038,0.355,0.127C17.599,9.675,17.264,9.579,17.307,9.458zM17.802,18.584c0.063,0.102-0.14,0.431-0.254,0.407c-0.113-0.027-0.076-0.318-0.038-0.382C17.548,18.545,17.769,18.529,17.802,18.584zM13.189,12.674c0.025-0.051-0.039-0.153-0.127-0.013C13.032,12.71,13.164,12.725,13.189,12.674zM20.813,8.035c0.141,0.076,0.339,0.107,0.433,0.013c0.076-0.076,0.013-0.204-0.05-0.216c-0.064-0.013-0.104-0.115,0.062-0.203c0.165-0.089,0.343-0.204,0.534-0.229c0.19-0.025,0.622-0.038,0.774,0c0.152,0.039,0.382-0.166,0.445-0.254s-0.203-0.152-0.279-0.051c-0.077,0.102-0.444,0.076-0.521,0.051c-0.076-0.025-0.686,0.102-0.812,0.102c-0.128,0-0.179,0.152-0.356,0.229c-0.179,0.076-0.42,0.191-0.509,0.229c-0.088,0.038-0.177,0.19-0.101,0.216C20.509,7.947,20.674,7.959,20.813,8.035zM14.142,12.674c0.064-0.089-0.051-0.217-0.114-0.217c-0.12,0-0.178,0.191-0.103,0.254C14.002,12.776,14.078,12.763,14.142,12.674zM14.714,13.017c0.064,0.025,0.114,0.102,0.165,0.114c0.052,0.013,0.217,0,0.167-0.127s-0.167-0.127-0.204-0.127c-0.038,0-0.203-0.038-0.267,0C14.528,12.905,14.65,12.992,14.714,13.017zM11.308,10.958c0.101,0.013,0.217-0.063,0.305-0.101c0.088-0.038,0.216-0.114,0.216-0.229c0-0.114-0.025-0.216-0.077-0.267c-0.051-0.051-0.14-0.064-0.216-0.051c-0.115,0.02-0.127,0.14-0.203,0.14c-0.076,0-0.165,0.025-0.14,0.114s0.077,0.152,0,0.19C11.117,10.793,11.205,10.946,11.308,10.958zM11.931,10.412c0.127,0.051,0.394,0.102,0.292,0.153c-0.102,0.051-0.28,0.19-0.305,0.267s0.216,0.153,0.216,0.153s-0.077,0.089-0.013,0.114c0.063,0.025,0.102-0.089,0.203-0.089c0.101,0,0.304,0.063,0.406,0.063c0.103,0,0.267-0.14,0.254-0.229c-0.013-0.089-0.14-0.229-0.254-0.28c-0.113-0.051-0.241-0.28-0.317-0.331c-0.076-0.051,0.076-0.178-0.013-0.267c-0.09-0.089-0.153-0.076-0.255-0.14c-0.102-0.063-0.191,0.013-0.254,0.089c-0.063,0.076-0.14-0.013-0.217,0.012c-0.102,0.035-0.063,0.166-0.012,0.229C11.714,10.221,11.804,10.361,11.931,10.412zM24.729,17.198c-0.083,0.037-0.153,0.47,0,0.521c0.152,0.052,0.241-0.202,0.191-0.267C24.868,17.39,24.843,17.147,24.729,17.198zM20.114,20.464c-0.159-0.045-0.177,0.166-0.304,0.306c-0.128,0.141-0.267,0.254-0.317,0.241c-0.052-0.013-0.331,0.089-0.242,0.279c0.089,0.191,0.076,0.382-0.013,0.472c-0.089,0.088,0.076,0.342,0.052,0.482c-0.026,0.139,0.037,0.229,0.215,0.229s0.242-0.064,0.318-0.229c0.076-0.166,0.088-0.331,0.164-0.47c0.077-0.141,0.141-0.434,0.179-0.51c0.038-0.075,0.114-0.316,0.102-0.457C20.254,20.669,20.204,20.489,20.114,20.464zM10.391,8.802c-0.069-0.06-0.229-0.102-0.306-0.11c-0.076-0.008-0.152,0.06-0.321,0.06c-0.168,0-0.279,0.067-0.347,0C9.349,8.684,9.068,8.65,9.042,8.692C9.008,8.749,8.941,8.751,9.008,8.87c0.069,0.118,0.12,0.186,0.179,0.178s0.262-0.017,0.288,0.051C9.5,9.167,9.569,9.226,9.712,9.184c0.145-0.042,0.263-0.068,0.296-0.119c0.033-0.051,0.263-0.059,0.263-0.059S10.458,8.861,10.391,8.802z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.GlobeAlt2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.GlobeAlt2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.GlobeAlt2.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.GlobeAlt2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM8.251,7.48c0.122,0.055,0.255,0.104,0.28,0.137C8.57,7.668,8.621,7.823,8.557,7.861C8.492,7.9,8.39,7.887,8.376,7.771c-0.013-0.115-0.026-0.128-0.18-0.18c-0.022-0.007-0.035-0.01-0.051-0.015C8.18,7.544,8.216,7.512,8.251,7.48zM7.733,7.974c0.031,0.087,0.113,0.125,0,0.17C7.673,8.168,7.611,8.172,7.559,8.165C7.617,8.102,7.672,8.035,7.733,7.974zM16,27.533C9.639,27.533,4.466,22.36,4.466,16c0-0.085,0.011-0.168,0.013-0.254c0.004-0.003,0.008-0.006,0.012-0.009c0.129-0.102,0.283-0.359,0.334-0.45c0.052-0.089,0.181-0.154,0.116-0.256c-0.059-0.096-0.292-0.23-0.407-0.261c0.01-0.099,0.032-0.195,0.045-0.294c0.063,0.077,0.137,0.17,0.208,0.194c0.115,0.038,0.501,0.052,0.566,0.052c0.063,0,0.334,0.014,0.386-0.064c0.051-0.077,0.09-0.077,0.154-0.077c0.064,0,0.18,0.231,0.271,0.257c0.089,0.026,0.257,0.013,0.244,0.181c-0.012,0.166,0.077,0.309,0.167,0.321c0.09,0.013,0.296-0.194,0.296-0.194s0,0.322-0.012,0.438C6.846,15.698,7,16.124,7,16.124s0.193,0.397,0.244,0.488c0.052,0.09,0.27,0.36,0.27,0.476c0,0.117,0.026,0.297,0.104,0.297s0.155-0.206,0.244-0.335c0.091-0.128,0.117-0.31,0.155-0.438c0.039-0.129,0.039-0.36,0.039-0.45c0-0.091,0.076-0.168,0.257-0.245c0.181-0.077,0.309-0.296,0.463-0.412c0.155-0.116,0.142-0.309,0.452-0.309c0.308,0,0.282,0,0.36-0.078c0.077-0.077,0.154-0.128,0.192,0.013c0.039,0.142,0.257,0.347,0.296,0.399c0.039,0.052,0.116,0.193,0.104,0.348c-0.013,0.153,0.012,0.334,0.077,0.334c0.064,0,0.193-0.219,0.193-0.219s0.283-0.192,0.27,0.014c-0.014,0.205,0.025,0.425,0.025,0.552c0,0.13,0.232,0.438,0.232,0.362c0-0.079,0.103-0.296,0.103-0.413c0-0.114,0.064-0.063,0.231,0.051c0.167,0.116,0.283,0.349,0.283,0.349s0.168,0.154,0.193,0.219c0.026,0.064,0.206-0.025,0.244-0.104c0.039-0.076,0.065-0.115,0.167-0.141c0.104-0.026,0.231-0.026,0.271-0.168c0.039-0.142,0.154-0.308,0-0.502c-0.154-0.193-0.232-0.321-0.347-0.412c-0.117-0.09-0.206-0.322-0.206-0.322s0.244-0.218,0.321-0.296c0.079-0.077,0.193-0.025,0.207,0.064c0.013,0.091-0.115,0.168-0.141,0.361c-0.026,0.192,0.154,0.257,0.206,0.192c0.051-0.065,0.18-0.219,0.18-0.257c0-0.039-0.089-0.026-0.102-0.167c-0.013-0.142,0.166-0.245,0.23-0.207c0.066,0.039,0.477-0.051,0.67-0.154s0.308-0.322,0.425-0.412c0.116-0.089,0.515-0.386,0.489-0.527c-0.026-0.142,0.012-0.334-0.09-0.515c-0.103-0.18-0.232-0.295-0.283-0.373c-0.051-0.077,0.219-0.09,0.347-0.206c0.129-0.116,0-0.219-0.064-0.206c-0.064,0.013-0.232,0.052-0.296,0.039c-0.064-0.013-0.103-0.077-0.206-0.155c-0.102-0.077,0.026-0.192,0.091-0.179c0.064,0.013,0.23-0.129,0.308-0.193c0.077-0.064,0.193-0.115,0.154-0.051c-0.038,0.064-0.128,0.296-0.026,0.309c0.104,0.013,0.348-0.193,0.388-0.18c0.038,0.013,0.102,0.18,0.064,0.257c-0.039,0.077-0.039,0.206,0.013,0.193c0.051-0.013,0.154-0.129,0.18-0.09c0.027,0.039,0.154,0.116,0.09,0.257c-0.063,0.142-0.193,0.193-0.039,0.284c0.154,0.089,0.206,0.012,0.322-0.052c0.115-0.064,0.193-0.347,0.128-0.438c-0.064-0.09-0.218-0.27-0.218-0.334c0-0.064,0.257-0.064,0.257-0.167s0.09-0.18,0.18-0.219c0.091-0.039,0.206-0.206,0.244-0.154c0.039,0.052,0.271,0.116,0.334,0.039c0.064-0.077,0.4-0.36,0.605-0.515c0.206-0.154,0.283-0.334,0.336-0.515c0.051-0.18,0.128-0.296,0.102-0.437v0c0.077,0.18,0.09,0.309,0.077,0.45c-0.013,0.142,0,0.438,0.026,0.476c0.025,0.039,0.129,0.128,0.192,0.103c0.064-0.025-0.025-0.283-0.025-0.334c0-0.052,0.09-0.129,0.142-0.142c0.052-0.013,0-0.231-0.065-0.322c-0.063-0.09-0.154-0.142-0.102-0.154c0.051-0.013,0.115-0.116,0.077-0.142c-0.039-0.025-0.014-0.116-0.103-0.09c-0.065,0.019-0.241-0.015-0.235,0.095c-0.037-0.11-0.116-0.183-0.216-0.172c-0.116,0.013-0.181,0.077-0.296,0.077s-0.025-0.18-0.077-0.18c-0.051,0-0.168,0.167-0.231,0.077c-0.064-0.09,0.18-0.206,0.373-0.27c0.192-0.064,0.514-0.438,0.644-0.451c0.128-0.013,0.45,0.026,0.733,0.013c0.283-0.013,0.373-0.129,0.463-0.064s0.283,0.142,0.399,0.129c0.116-0.014,0.064,0,0.244-0.129c0.18-0.129,0.348-0.193,0.438-0.296c0.09-0.103,0.335-0.18,0.348-0.077c0.014,0.103-0.026,0.206,0.077,0.206s0.258-0.103,0.386-0.154c0.129-0.051,0.231-0.116,0.231-0.116s-0.527,0.36-0.655,0.438c-0.129,0.077-0.438,0.129-0.567,0.283c-0.128,0.155-0.205,0.206-0.192,0.374c0.014,0.167,0.231,0.386,0.128,0.54c-0.103,0.154-0.141,0.373-0.141,0.373s0.154-0.219,0.373-0.36s0.348-0.334,0.425-0.412s0.309-0.091,0.309-0.181s0.064-0.206,0.104-0.309c0.038-0.103-0.077-0.078,0-0.206c0.076-0.129,0.064-0.232,0.45-0.232s0.257,0.026,0.566,0.013c0.309-0.013,0.424-0.167,0.72-0.245c0.296-0.077,0.527-0.128,0.618-0.089c0.09,0.038,0.232,0.012,0.141-0.078c-0.089-0.09-0.295-0.219-0.193-0.245c0.104-0.026,0.207-0.039,0.246-0.142c0.039-0.103-0.142-0.283-0.039-0.386c0.104-0.103-0.077-0.231-0.207-0.257c-0.128-0.025-0.63,0.026-0.731-0.025c-0.104-0.052-0.271-0.116-0.322-0.078c-0.052,0.039-0.168,0.245-0.168,0.245s-0.09,0.025-0.168-0.09c-0.076-0.116-0.5-0.103-0.629-0.103s-0.271,0.025-0.413,0.039c-0.141,0.013-0.219,0.052-0.322-0.039c-0.102-0.09-0.243-0.129-0.296-0.167c-0.051-0.039-0.334-0.039-0.553-0.012c-0.218,0.025-0.438,0.025-0.438,0.025s-0.104-0.039-0.257-0.129c-0.154-0.09-0.309-0.154-0.361-0.154c-0.051,0-0.449,0.064-0.539,0c-0.091-0.064-0.181-0.103-0.245-0.103s-0.115-0.103-0.038-0.103s0.437-0.103,0.437-0.103s-0.103-0.142-0.231-0.142c-0.128,0-0.359-0.064-0.424-0.064s-0.014,0.064-0.142,0.039c-0.13-0.026-0.258-0.078-0.335-0.026c-0.076,0.051-0.258,0.128-0.064,0.18c0.193,0.052,0.373,0,0.425,0.078c0.052,0.077,0,0.115,0,0.167s-0.103,0.193-0.167,0.219c-0.064,0.025-0.143-0.039-0.27,0.025c-0.129,0.064-0.451,0.013-0.49,0.052c-0.038,0.039-0.115-0.103-0.18-0.077c-0.064,0.025-0.232,0.193-0.322,0.18c-0.089-0.013-0.206-0.103-0.206-0.206s-0.038-0.232-0.077-0.258c-0.038-0.025-0.322-0.039-0.425-0.025c-0.103,0.013-0.424,0.038-0.477,0.09c-0.052,0.052-0.193,0.09-0.283,0.09s-0.167-0.09-0.36-0.116c-0.192-0.026-0.617-0.039-0.669-0.026s-0.218-0.025-0.155-0.077c0.065-0.051,0.257-0.219,0.143-0.295c-0.117-0.078-0.375-0.078-0.489-0.09c-0.117-0.013-0.232-0.039-0.413-0.013c-0.181,0.026-0.219,0.116-0.296,0.039c-0.077-0.077,0.193,0.039-0.077-0.077c-0.27-0.116-0.399-0.103-0.477-0.064c-0.077,0.039,0.013,0.025-0.192,0.103c-0.206,0.078-0.322,0.116-0.374,0.129c-0.051,0.012-0.372-0.065-0.411-0.091c-0.038-0.025-0.181,0.013-0.309,0.064S9.895,7.025,9.767,7C9.638,6.973,9.432,6.973,9.303,7.025C9.174,7.076,9.084,7.076,8.956,7.166c-0.13,0.09-0.373,0.142-0.373,0.142S8.522,7.305,8.448,7.301C10.474,5.541,13.111,4.466,16,4.466c6.361,0,11.534,5.173,11.534,11.534S22.36,27.533,16,27.533zM14.888,19.92c0,0,0.207-0.026,0.207-0.117c0-0.089-0.207-0.205-0.282-0.102c-0.078,0.102-0.219,0.205-0.207,0.296C14.625,20.138,14.888,19.92,14.888,19.92zM14.875,17.023c-0.181,0.233-0.167,0.182-0.296,0.128c-0.128-0.05-0.334,0.116-0.296,0.182c0.039,0.064,0.322-0.014,0.386,0.102c0.065,0.116,0.065,0.129,0.193,0.104c0.128-0.026,0.257-0.205,0.219-0.295C15.043,17.151,14.875,17.023,14.875,17.023zM14.837,18.245c-0.051,0-0.412,0.064-0.451,0.079c-0.039,0.013-0.27-0.025-0.27-0.025c-0.09,0.089-0.026,0.179,0.116,0.166s0.438-0.052,0.502-0.052C14.799,18.413,14.888,18.245,14.837,18.245zM14.284,14.668c-0.19,0.03-0.308,0.438-0.155,0.425C14.284,15.081,14.451,14.643,14.284,14.668zM14.734,16.959c-0.052-0.064-0.181-0.271-0.323-0.219c-0.042,0.017-0.153,0.245-0.012,0.245C14.541,16.985,14.786,17.023,14.734,16.959zM14.85,16.805c0.232-0.013,0.167-0.245-0.013-0.257C14.786,16.544,14.618,16.818,14.85,16.805zM17.591,18.928c-0.193-0.039-0.244-0.102-0.45-0.205c-0.207-0.103-0.67-0.103-0.682-0.039c-0.014,0.064,0,0-0.155-0.05c-0.153-0.054-0.271,0-0.309-0.091c-0.038-0.091-0.128-0.117-0.244-0.002c-0.097,0.097-0.142,0.104,0.078,0.143c0.218,0.039,0.283,0.039,0.192,0.141c-0.09,0.104-0.154,0.233-0.077,0.244c0.077,0.015,0.309-0.05,0.334,0c0.026,0.054-0.051,0.064,0.207,0.105c0.258,0.037,0.309,0.128,0.359,0.178c0.051,0.052,0.206,0.22,0.104,0.22c-0.104,0-0.219,0.128-0.142,0.143c0.077,0.013,0.309-0.039,0.321,0c0.014,0.037,0.143,0.283,0.271,0.271c0.129-0.013,0.206-0.244,0.27-0.31c0.065-0.064,0.322-0.104,0.349,0.012c0.026,0.116,0.104,0.233,0.257,0.311c0.154,0.076,0.335,0.154,0.348,0.089c0.013-0.064-0.077-0.309-0.181-0.346c-0.103-0.041-0.282-0.259-0.282-0.348c0-0.091-0.155-0.117-0.232-0.182C17.849,19.147,17.784,18.967,17.591,18.928zM8.042,17.023c-0.084,0.037-0.155,0.476,0,0.527c0.154,0.052,0.244-0.205,0.193-0.271C8.183,17.218,8.158,16.973,8.042,17.023zM15.429,18.117c-0.118-0.05-0.335,0.424-0.181,0.463C15.403,18.62,15.518,18.156,15.429,18.117zM15.687,13.703c0.077,0,0.18-0.051,0.18-0.193c0-0.142,0.18,0,0.27-0.013s0.141-0.103,0.18-0.206c0.005-0.013,0.008-0.021,0.009-0.027c-0.003,0.024-0.001,0.093,0.095,0.117c0.154,0.038,0.205-0.064,0.205-0.103s0.283-0.103,0.336-0.142c0.051-0.038,0.258-0.103,0.27-0.154c0.013-0.051,0-0.348,0.064-0.373c0.064-0.026,0.154-0.026,0.052-0.206c-0.104-0.181-0.104-0.348-0.232-0.271c-0.095,0.057-0.038,0.284-0.115,0.438s-0.142,0.296-0.193,0.296s-0.321,0.103-0.399,0.18c-0.076,0.077-0.45-0.064-0.501,0c-0.052,0.064-0.154,0.141-0.219,0.193c-0.065,0.051-0.245,0.013-0.207,0.167C15.518,13.562,15.609,13.703,15.687,13.703zM17.449,12.056c0.18-0.013,0.348-0.064,0.348-0.064s0.271,0.013,0.232-0.116c-0.04-0.128-0.322-0.141-0.375-0.128c-0.051,0.013-0.142-0.142-0.244-0.116c-0.096,0.023-0.128,0.155-0.128,0.193c0,0.039-0.36,0.115-0.245,0.219C17.153,12.146,17.27,12.069,17.449,12.056zM13.91,19.058c0.104,0.064,0.296-0.219,0.349-0.13c0.051,0.091-0.013,0.13,0.076,0.246c0.091,0.114,0.258,0.102,0.258,0.102s-0.013-0.309-0.155-0.387c-0.142-0.077-0.232-0.166-0.064-0.141c0.167,0.026,0.257-0.039,0.219-0.114c-0.039-0.078-0.283-0.039-0.361-0.026s-0.193-0.052-0.193-0.052c-0.077,0.024-0.063,0.089-0.09,0.219C13.923,18.902,13.807,18.992,13.91,19.058zM20.924,21.618c-0.231-0.052-0.077,0.039,0,0.154c0.077,0.116,0.232,0.176,0.258,0.05C21.193,21.759,21.155,21.67,20.924,21.618zM21.915,24.744c-0.077,0.064,0,0.091-0.219,0.22c-0.22,0.13-0.49,0.271-0.541,0.386c-0.052,0.116,0.051,0.181,0.258,0.192c0.206,0.013,0.154,0.053,0.296-0.103s0.271-0.244,0.438-0.373c0.168-0.128,0.168-0.322,0.168-0.322s-0.181-0.178-0.193-0.141C22.1,24.665,21.992,24.681,21.915,24.744zM18.504,21.618c0.014-0.116-0.219-0.116-0.334-0.207c-0.116-0.089-0.128-0.359-0.193-0.515c-0.064-0.153-0.192-0.257-0.322-0.397c-0.128-0.143-0.192-0.465-0.23-0.438c-0.039,0.025-0.154,0.399-0.064,0.515c0.09,0.116-0.039,0.348-0.103,0.503c-0.065,0.153-0.22-0.026-0.349-0.104c-0.129-0.078-0.308-0.128-0.398-0.219c-0.09-0.091,0.155-0.335,0.091-0.426c-0.065-0.09-0.412-0.013-0.45-0.013c-0.039,0-0.116-0.128-0.194-0.128c-0.077,0-0.064,0.258-0.064,0.258s-0.078-0.091-0.193-0.207c-0.117-0.115,0.012,0.077-0.103,0.193c-0.117,0.117-0.079,0.078-0.129,0.206c-0.051,0.129-0.167,0.077-0.283-0.052c-0.116-0.128-0.179-0.037-0.258,0c-0.077,0.039-0.141,0.259-0.18,0.309c-0.039,0.052-0.309,0.117-0.374,0.182c-0.064,0.062-0.09,0.27-0.09,0.322c0,0.05-0.271,0.023-0.361,0.089c-0.09,0.064-0.23,0.025-0.321,0.025c-0.09,0-0.399,0.244-0.502,0.308c-0.103,0.066-0.103,0.298-0.051,0.362c0.051,0.063,0.154,0.219,0.09,0.244c-0.064,0.026-0.104,0.206,0.051,0.359c0.154,0.155,0.103,0.194,0.115,0.271c0.014,0.077,0.078,0.104,0.181,0.232c0.102,0.128-0.181,0.231-0.219,0.31c-0.039,0.076,0.091,0.192,0.167,0.257c0.077,0.063,0.271,0.026,0.386-0.013c0.117-0.039,0.245-0.143,0.321-0.155c0.079-0.013,0.438-0.026,0.438-0.026s0.129-0.192,0.219-0.296c0.089-0.102,0.372-0.013,0.372-0.013s0.117-0.076,0.426-0.141c0.309-0.065,0.179,0.064,0.296,0.104c0.115,0.037,0.27,0.062,0.359,0.128c0.09,0.064,0,0.218-0.012,0.283c-0.014,0.064,0.219,0.038,0.23-0.026c0.014-0.064,0.077-0.128,0.207-0.205c0.128-0.078,0.025,0.114,0.076,0.231c0.052,0.116,0.129-0.157,0.129-0.026c0,0.039,0.039,0.078,0.051,0.116c0.014,0.039,0.181,0.052,0.181,0.18c0,0.13,0,0.207,0.039,0.231c0.038,0.026,0.244,0,0.335,0.155c0.089,0.154,0.154,0.013,0.205-0.052c0.052-0.064,0.231,0.026,0.283,0.078c0.052,0.05,0.193-0.104,0.387-0.155c0.192-0.051,0.167-0.039,0.219-0.115c0.051-0.078,0.09-0.283,0.205-0.438c0.115-0.153,0.271-0.424,0.271-0.631c0-0.206-0.014-0.682-0.155-0.899C18.761,21.953,18.492,21.733,18.504,21.618zM18.029,24.77c-0.065-0.013-0.207-0.062-0.207-0.062c-0.142,0.141,0.142,0.141,0.104,0.283c-0.039,0.141,0.193,0.089,0.257,0.064c0.063-0.027,0.22-0.323,0.193-0.399C18.351,24.577,18.093,24.783,18.029,24.77zM22.803,24.178c-0.052,0-0.077,0.064-0.192,0c-0.117-0.063-0.091-0.037-0.168-0.167c-0.077-0.127-0.091-0.296-0.219-0.23c-0.051,0.025,0,0.168,0.051,0.218c0.053,0.052,0.077,0.231,0.064,0.283c-0.012,0.052-0.231,0.116-0.129,0.18c0.104,0.064,0.297,0,0.271,0.078c-0.025,0.077-0.129,0.179-0.013,0.205c0.115,0.025,0.154-0.089,0.207-0.178c0.051-0.093,0.089-0.169,0.179-0.221C22.944,24.294,22.854,24.178,22.803,24.178zM22.815,21.18c0.168,0.064,0.464-0.231,0.347-0.27C23.047,20.871,22.815,21.18,22.815,21.18zM13.923,19.906c-0.029,0.115,0.193,0.167,0.206,0.039C14.141,19.816,13.949,19.803,13.923,19.906zM14.27,16.47c-0.064,0.065-0.257,0.193-0.283,0.31c-0.025,0.115,0.309-0.182,0.399-0.296c0.091-0.117,0.27-0.052,0.308-0.117c0.04-0.063,0.04-0.063,0.04-0.063s-0.142-0.025-0.257-0.063c-0.117-0.039-0.258,0.102-0.193-0.104c0.064-0.206,0.257-0.167,0.219-0.322c-0.039-0.154-0.168-0.193-0.207-0.193c-0.09,0,0.013,0.141-0.116,0.231c-0.128,0.09-0.271,0.128-0.193,0.283C14.064,16.29,14.334,16.405,14.27,16.47zM13.254,19.751c0.013-0.076-0.142-0.192-0.206-0.192c-0.065,0-0.386-0.077-0.386-0.077c-0.058,0.023-0.135,0.045-0.158,0.077c-0.007-0.011-0.022-0.024-0.049-0.039c-0.142-0.075-0.309,0-0.361-0.102c-0.05-0.104-0.127-0.104-0.179-0.039c-0.094,0.117,0.025,0.206,0.063,0.231c0.038,0.024,0.181,0.052,0.309,0.039c0.08-0.008,0.181-0.027,0.21-0.059c0.004,0.014,0.016,0.027,0.035,0.044c0.103,0.092,0.167,0.13,0.321,0.116C13.009,19.74,13.241,19.829,13.254,19.751zM12.881,18.992c0.065,0,0.193,0,0.283,0.026c0.09,0.025,0.386,0.05,0.373-0.064c-0.013-0.115-0.038-0.297,0.089-0.411c0.13-0.117,0.257-0.18,0.193-0.348c-0.063-0.167-0.193-0.271-0.103-0.349c0.09-0.076,0.192-0.102,0.192-0.166c0-0.065-0.217,0.18-0.244-0.246c-0.005-0.091-0.206,0.025-0.219,0.116c-0.012,0.091,0.142,0.167-0.103,0.167c-0.245,0-0.257,0.194-0.309,0.232c-0.052,0.039-0.103,0.051-0.207,0.076c-0.102,0.026-0.127,0.13-0.153,0.194c-0.025,0.063-0.206-0.116-0.257-0.064c-0.051,0.052-0.013,0.296,0.077,0.501C12.585,18.863,12.816,18.992,12.881,18.992zM11.979,18.928c0.065-0.077,0.038-0.192-0.063-0.18c-0.103,0.013-0.193-0.168-0.36-0.283c-0.168-0.114-0.296-0.194-0.451-0.36c-0.154-0.167-0.347-0.271-0.45-0.359c-0.104-0.091-0.257-0.13-0.322-0.116c-0.159,0.032,0.231,0.309,0.271,0.346c0.039,0.041,0.387,0.335,0.387,0.478s0.231,0.476,0.296,0.527c0.064,0.052,0.385,0.244,0.437,0.348c0.052,0.103,0.167,0.13,0.167-0.013C11.89,19.174,11.916,19.006,11.979,18.928zM11.002,17.474c0.064,0.232,0.193,0.464,0.244,0.555c0.052,0.089,0.271,0.217,0.348,0.281c0.077,0.064,0.192-0.024,0.143-0.102c-0.052-0.078-0.155-0.192-0.167-0.283c-0.013-0.091-0.078-0.233-0.181-0.387c-0.102-0.153-0.192-0.192-0.257-0.295c-0.064-0.104-0.296-0.297-0.296-0.297c-0.102,0.013-0.102,0.205-0.051,0.271C10.834,17.28,10.938,17.243,11.002,17.474z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Hail();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Hail = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Hail.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Hail\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.372,6.912c-0.093-3.925-3.302-7.078-7.248-7.08c-2.638,0.002-4.942,1.412-6.208,3.518c-0.595-0.327-1.28-0.518-2.01-0.518C7.627,2.834,5.773,4.639,5.69,6.898c-2.393,0.786-4.125,3.025-4.127,5.686c0,3.312,2.687,6,6,6v-0.002h15.875c3.312,0,6-2.688,6-6C29.434,9.944,27.732,7.715,25.372,6.912zM23.436,16.584H7.562c-2.209-0.006-3.997-1.793-4.001-4c-0.002-1.983,1.45-3.619,3.35-3.933c0.265-0.043,0.502-0.19,0.657-0.414C7.723,8.015,7.78,7.74,7.731,7.475C7.703,7.326,7.686,7.187,7.686,7.051c0.004-1.225,0.995-2.217,2.22-2.219c0.647,0,1.217,0.278,1.633,0.731c0.233,0.257,0.587,0.375,0.927,0.31c0.342-0.066,0.626-0.308,0.748-0.631c0.749-1.992,2.662-3.412,4.911-3.41c2.898,0.004,5.244,2.351,5.251,5.25c0,0.16-0.009,0.325-0.026,0.496c-0.05,0.518,0.305,0.984,0.814,1.079c1.859,0.345,3.273,1.966,3.271,3.923C27.43,14.791,25.645,16.578,23.436,16.584zM11.503,23.709c-0.784-0.002-1.418-0.636-1.418-1.416c0-0.785,0.634-1.416,1.418-1.418c0.78,0.002,1.413,0.633,1.416,1.418C12.917,23.073,12.284,23.707,11.503,23.709zM19.002,23.709c-0.783-0.002-1.418-0.636-1.418-1.416c0-0.785,0.635-1.416,1.418-1.418c0.779,0.002,1.414,0.633,1.414,1.418C20.417,23.073,19.784,23.707,19.002,23.709zM7.503,28.771c-0.783-0.002-1.417-0.637-1.417-1.418s0.634-1.414,1.417-1.416c0.78,0.002,1.415,0.635,1.415,1.416C8.917,28.135,8.284,28.77,7.503,28.771zM15.001,28.771c-0.782-0.002-1.417-0.637-1.417-1.418s0.634-1.414,1.417-1.416c0.78,0.002,1.413,0.635,1.415,1.416C16.415,28.135,15.784,28.77,15.001,28.771zM22.5,28.771c-0.782-0.002-1.416-0.634-1.416-1.416c0-0.785,0.634-1.418,1.416-1.42c0.781,0.002,1.414,0.635,1.418,1.42C23.915,28.138,23.282,28.77,22.5,28.771z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Hammer();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Hammer = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Hammer.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Hammer\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M7.831,29.354c0.685,0.353,1.62,1.178,2.344,0.876c0.475-0.195,0.753-1.301,1.048-1.883c2.221-4.376,4.635-9.353,6.392-13.611c0-0.19,0.101-0.337-0.049-0.595c0.983-1.6,1.65-3.358,2.724-5.138c0.34-0.566,0.686-1.351,1.163-1.577l0.881-0.368c1.12-0.288,1.938-0.278,2.719,0.473c0.396,0.383,0.578,1.015,0.961,1.395c0.259,0.26,1.246,0.899,1.613,0.8c0.285-0.077,0.52-0.364,0.72-0.728l0.696-1.286c0.195-0.366,0.306-0.718,0.215-0.999c-0.117-0.362-1.192-0.84-1.552-0.915c-0.528-0.113-1.154,0.081-1.692-0.041c-1.057-0.243-1.513-0.922-1.883-2.02c-2.608-1.533-6.119-2.53-10.207-1.244c-1.109,0.349-2.172,0.614-2.901,1.323c-0.146,0.412,0.143,0.494,0.446,0.489c-0.237,0.216-0.62,0.341-0.399,0.848c2.495-1.146,7.34-1.542,7.669,0.804c0.072,0.522-0.395,1.241-0.682,1.835c-0.905,1.874-2.011,3.394-2.813,5.091c-0.298,0.017-0.366,0.18-0.525,0.287c-2.604,3.8-5.451,8.541-7.9,12.794c-0.326,0.566-1.098,1.402-1.002,1.906C5.961,28.641,7.146,29,7.831,29.354z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.HammerAndScrewDriver();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.HammerAndScrewDriver = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.HammerAndScrewDriver.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.HammerAndScrewDriver\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.537,9.859c-0.473-0.259-1.127-0.252-1.609-0.523c-0.943-0.534-1.186-1.316-1.226-2.475c-2.059-2.215-5.138-4.176-9.424-4.114c-1.162,0.017-2.256-0.035-3.158,0.435c-0.258,0.354-0.004,0.516,0.288,0.599c-0.29,0.138-0.692,0.147-0.626,0.697c2.72-0.383,7.475,0.624,7.116,2.966c-0.08,0.521-0.735,1.076-1.179,1.563c-1.263,1.382-2.599,2.45-3.761,3.667l0.336,0.336c0.742-0.521,1.446-0.785,2.104-0.785c0.707,0,1.121,0.297,1.276,0.433c0.575-0.618,1.166-1.244,1.839-1.853c0.488-0.444,1.047-1.099,1.566-1.178l0.949-0.101c1.156,0.047,1.937,0.29,2.471,1.232c0.27,0.481,0.262,1.139,0.521,1.613c0.175,0.324,0.937,1.218,1.316,1.228c0.294,0.009,0.603-0.199,0.899-0.49l1.033-1.034c0.291-0.294,0.501-0.6,0.492-0.896C29.754,10.801,28.861,10.035,28.537,9.859zM13.021,15.353l-0.741-0.741c-3.139,2.643-6.52,5.738-9.531,8.589c-0.473,0.443-1.452,1.021-1.506,1.539c-0.083,0.781,0.95,1.465,1.506,2c0.556,0.533,1.212,1.602,1.994,1.51c0.509-0.043,1.095-1.029,1.544-1.502c2.255-2.374,4.664-4.976,6.883-7.509c-0.312-0.371-0.498-0.596-0.498-0.596C12.535,18.451,11.779,17.272,13.021,15.353zM20.64,15.643c-0.366-0.318-1.466,0.143-1.777-0.122c-0.311-0.266,0.171-1.259-0.061-1.455c-0.482-0.406-0.77-0.646-0.77-0.646s-0.862-0.829-2.812,0.928L7.44,6.569C7.045,6.173,7.203,4.746,7.203,4.746L3.517,2.646L2.623,3.541l2.1,3.686c0,0,1.428-0.158,1.824,0.237l7.792,7.793c-1.548,1.831-0.895,2.752-0.895,2.752s0.238,0.288,0.646,0.771c0.196,0.23,1.188-0.249,1.455,0.061c0.264,0.312-0.196,1.41,0.12,1.777c2.666,3.064,6.926,7.736,8.125,7.736c0.892,0,2.021-0.724,2.948-1.64c0.925-0.917,1.639-2.055,1.639-2.947C28.377,22.567,23.704,18.309,20.64,15.643z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.HangUp();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.HangUp = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.HangUp.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.HangUp\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.563,10.494c-7.35-7.349-19.265-7.348-26.612,0.001c-1.796,1.796-0.247,6.84-0.247,6.84c0.135,0.443,0.616,0.72,1.067,0.614l6.898-1.604c0.451-0.105,0.82-0.57,0.82-1.033l0.001-3.685c0-0.463,0.379-0.842,0.842-0.842h8.285c0.464,0,0.843,0.379,0.843,0.842l-0.001,3.471c0.001,0.462,0.375,0.907,0.83,0.986l7.635,1.316c0.456,0.08,0.873-0.232,0.926-0.692C29.851,16.708,30.359,12.29,28.563,10.494zM17.264,14.072h-3.501v4.39h-2.625l4.363,7.556l4.363-7.556h-2.6V14.072z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Help();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Help = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Help.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Help\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M4.834,4.834L4.833,4.833c-5.889,5.892-5.89,15.443,0.001,21.334s15.44,5.888,21.33-0.002c5.891-5.891,5.893-15.44,0.002-21.33C20.275-1.056,10.725-1.056,4.834,4.834zM25.459,5.542c0.833,0.836,1.523,1.757,2.104,2.726l-4.08,4.08c-0.418-1.062-1.053-2.06-1.912-2.918c-0.859-0.859-1.857-1.494-2.92-1.913l4.08-4.08C23.7,4.018,24.622,4.709,25.459,5.542zM10.139,20.862c-2.958-2.968-2.959-7.758-0.001-10.725c2.966-2.957,7.756-2.957,10.725,0c2.954,2.965,2.955,7.757-0.001,10.724C17.896,23.819,13.104,23.817,10.139,20.862zM5.542,25.459c-0.833-0.837-1.524-1.759-2.105-2.728l4.081-4.081c0.418,1.063,1.055,2.06,1.914,2.919c0.858,0.859,1.855,1.494,2.917,1.913l-4.081,4.081C7.299,26.982,6.379,26.292,5.542,25.459zM8.268,3.435l4.082,4.082C11.288,7.935,10.29,8.571,9.43,9.43c-0.858,0.859-1.494,1.855-1.912,2.918L3.436,8.267c0.58-0.969,1.271-1.89,2.105-2.727C6.377,4.707,7.299,4.016,8.268,3.435zM22.732,27.563l-4.082-4.082c1.062-0.418,2.061-1.053,2.919-1.912c0.859-0.859,1.495-1.857,1.913-2.92l4.082,4.082c-0.58,0.969-1.271,1.891-2.105,2.728C24.623,26.292,23.701,26.983,22.732,27.563z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.History();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.History = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.History.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.History\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M10.666,18.292c0.275,0.479,0.889,0.644,1.365,0.367l3.305-1.677C15.39,16.99,15.444,17,15.501,17c0.828,0,1.5-0.671,1.5-1.5l-0.5-7.876c0-0.552-0.448-1-1-1c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96C10.553,17.204,10.389,17.816,10.666,18.292zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM8.179,18.572c-0.478,0.277-0.642,0.889-0.365,1.367c0.275,0.479,0.889,0.641,1.365,0.365c0.479-0.275,0.643-0.888,0.367-1.367C9.27,18.461,8.658,18.297,8.179,18.572zM9.18,10.696c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,11.584,9.657,10.973,9.18,10.696zM6.624,15.5c0,0.553,0.449,1,1,1c0.552,0,1-0.447,1.001-1c-0.001-0.552-0.448-0.999-1.001-1C7.071,14.5,6.624,14.948,6.624,15.5zM14.501,23.377c0,0.553,0.448,1,1,1c0.552,0,1-0.447,1-1s-0.448-1-1-1C14.949,22.377,14.501,22.824,14.501,23.377zM10.696,21.822c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.276,1.091,0.11,1.365-0.365c0.277-0.479,0.113-1.09-0.365-1.367C11.584,21.18,10.973,21.344,10.696,21.822zM21.822,10.696c-0.479,0.278-0.643,0.89-0.366,1.367s0.888,0.642,1.366,0.365c0.478-0.275,0.643-0.888,0.365-1.366C22.913,10.584,22.298,10.42,21.822,10.696zM21.456,18.938c-0.274,0.479-0.112,1.092,0.367,1.367c0.477,0.274,1.089,0.112,1.364-0.365c0.276-0.479,0.112-1.092-0.364-1.367C22.343,18.297,21.73,18.461,21.456,18.938zM24.378,15.5c0-0.551-0.448-1-1-1c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1C23.93,16.5,24.378,16.053,24.378,15.5zM18.573,22.822c0.274,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.89,0.365-1.365c-0.277-0.479-0.888-0.643-1.365-0.367C18.46,21.732,18.296,22.344,18.573,22.822zM18.939,9.546c0.477,0.276,1.088,0.112,1.365-0.366c0.276-0.478,0.113-1.091-0.367-1.367c-0.477-0.276-1.09-0.111-1.364,0.366C18.298,8.659,18.462,9.27,18.939,9.546zM28.703,14.364C28.074,7.072,21.654,1.67,14.364,2.295c-3.254,0.281-6.118,1.726-8.25,3.877L4.341,4.681l-1.309,7.364l7.031-2.548L8.427,8.12c1.627-1.567,3.767-2.621,6.194-2.833c5.64-0.477,10.595,3.694,11.089,9.335c0.477,5.64-3.693,10.595-9.333,11.09c-5.643,0.476-10.599-3.694-11.092-9.333c-0.102-1.204,0.019-2.373,0.31-3.478l-3.27,1.186c-0.089,0.832-0.106,1.684-0.031,2.55c0.629,7.29,7.048,12.691,14.341,12.066C23.926,28.074,29.328,21.655,28.703,14.364z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Home();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Home = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Home.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Home\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M27.812,16l-3.062-3.062V5.625h-2.625v4.688L16,4.188L4.188,16L7,15.933v11.942h17.875V16H27.812zM16,26.167h-5.833v-7H16V26.167zM21.667,23.167h-3.833v-4.042h3.833V23.167z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.IMac();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.IMac = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.IMac.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.IMac\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.936,2.099H2.046c-0.506,0-0.919,0.414-0.919,0.92v21.097c0,0.506,0.413,0.919,0.919,0.919h17.062v-0.003h9.828c0.506,0,0.92-0.413,0.92-0.921V3.019C29.854,2.513,29.439,2.099,28.936,2.099zM28.562,20.062c0,0.412-0.338,0.75-0.75,0.75H3.062c-0.413,0-0.75-0.338-0.75-0.75v-16c0-0.413,0.337-0.75,0.75-0.75h24.75c0.412,0,0.75,0.337,0.75,0.75V20.062zM20.518,28.4c-0.033-0.035-0.062-0.055-0.068-0.062l-0.01-0.004l-0.008-0.004c0,0-0.046-0.021-0.119-0.062c-0.108-0.056-0.283-0.144-0.445-0.237c-0.162-0.097-0.32-0.199-0.393-0.271c-0.008-0.014-0.035-0.079-0.058-0.17c-0.083-0.32-0.161-0.95-0.22-1.539h-7.5c-0.023,0.23-0.048,0.467-0.076,0.691c-0.035,0.272-0.073,0.524-0.113,0.716c-0.02,0.096-0.039,0.175-0.059,0.23c-0.009,0.025-0.018,0.05-0.024,0.062c-0.003,0.006-0.005,0.01-0.007,0.013c-0.094,0.096-0.34,0.246-0.553,0.36c-0.107,0.062-0.209,0.11-0.283,0.146c-0.074,0.037-0.119,0.062-0.119,0.062l-0.007,0.004l-0.008,0.004c-0.01,0.009-0.038,0.022-0.07,0.062c-0.031,0.037-0.067,0.103-0.067,0.185c0.002,0.002-0.004,0.037-0.006,0.088c0,0.043,0.007,0.118,0.068,0.185c0.061,0.062,0.143,0.08,0.217,0.08h9.716c0.073,0,0.153-0.021,0.215-0.08c0.062-0.063,0.068-0.142,0.068-0.185c-0.001-0.051-0.008-0.086-0.007-0.088C20.583,28.503,20.548,28.439,20.518,28.4z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.SetFigure\n */\ndraw2d.shape.icon.Icon = draw2d.SetFigure.extend(\n  /** @lends draw2d.shape.icon.Icon.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Icon\",\n\n  /**\n   *\n   * Creates a new figure element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({\n      width: 50,\n      height: 50,\n      color:\"#333333\",\n      bgColor:null\n    }, attr), setter, getter)\n    this.keepAspectRatio = false\n  },\n\n  /**\n   * \n   * propagate all attributes like color, stroke,... to the shape element\n   **/\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    attributes ??= {}\n\n    this.svgNodes?.attr({fill: this.color.rgba(), stroke: \"none\"})\n\n    this._super(attributes)\n  },\n\n  applyTransformation: function () {\n    let trans = []\n\n    if (this.rotationAngle !== 0) {\n      trans.push(\"R\" + this.rotationAngle)\n    }\n\n    if (this.getRotationAngle() === 90 || this.getRotationAngle() === 270) {\n      let ratio = this.getHeight() / this.getWidth()\n      trans.push(\"T\" + (-this.offsetY) + \",\" + (-this.offsetX))\n      trans.push(\"S\" + ratio + \",\" + 1 / ratio + \",0,0\")\n    }\n    else {\n      trans.push(\"T\" + (-this.offsetX) + \",\" + (-this.offsetY))\n\n    }\n    if (this.isResizeable() === true) {\n      trans.push(\n        \"T\" + this.getAbsoluteX() + \",\" + this.getAbsoluteY() +\n        \"S\" + this.scaleX + \",\" + this.scaleY + \",\" + this.getAbsoluteX() + \",\" + this.getAbsoluteY()\n      )\n    }\n    else {\n      trans.push(\"T\" + this.getAbsoluteX() + \",\" + this.getAbsoluteY())\n    }\n\n    this.svgNodes.transform(trans.join(\" \"))\n\n    return this\n  },\n\n  /**\n   * @private\n   */\n  createShapeElement: function () {\n    let shape = this._super()\n\n    let bb = this.svgNodes.getBBox()\n\n    this.offsetX = bb.x\n    this.offsetY = bb.y\n\n    return shape\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Icons();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Icons = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Icons.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Icons\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M4.083,14H14V4.083H4.083V14zM17,4.083V14h9.917V4.083H17zM17,26.917h9.917v-9.918H17V26.917zM4.083,26.917H14v-9.918H4.083V26.917z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Ie();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Ie = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Ie.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Ie\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M27.998,2.266c-2.12-1.91-6.925,0.382-9.575,1.93c-0.76-0.12-1.557-0.185-2.388-0.185c-3.349,0-6.052,0.985-8.106,2.843c-2.336,2.139-3.631,4.94-3.631,8.177c0,0.028,0.001,0.056,0.001,0.084c3.287-5.15,8.342-7.79,9.682-8.487c0.212-0.099,0.338,0.155,0.141,0.253c-0.015,0.042-0.015,0,0,0c-2.254,1.35-6.434,5.259-9.146,10.886l-0.003-0.007c-1.717,3.547-3.167,8.529-0.267,10.358c2.197,1.382,6.13-0.248,9.295-2.318c0.764,0.108,1.567,0.165,2.415,0.165c5.84,0,9.937-3.223,11.399-7.924l-8.022-0.014c-0.337,1.661-1.464,2.548-3.223,2.548c-2.21,0-3.729-1.211-3.828-4.012l15.228-0.014c0.028-0.578-0.042-0.985-0.042-1.436c0-5.251-3.143-9.355-8.255-10.663c2.081-1.294,5.974-3.209,7.848-1.681c1.407,1.14,0.633,3.533,0.295,4.518c-0.056,0.254,0.24,0.296,0.296,0.057C28.814,5.573,29.026,3.194,27.998,2.266zM13.272,25.676c-2.469,1.475-5.873,2.539-7.539,1.289c-1.243-0.935-0.696-3.468,0.398-5.938c0.664,0.992,1.495,1.886,2.473,2.63C9.926,24.651,11.479,25.324,13.272,25.676zM12.714,13.046c0.042-2.435,1.787-3.49,3.617-3.49c1.928,0,3.49,1.112,3.49,3.49H12.714z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Ie9();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Ie9 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Ie9.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Ie9\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M27.751,17.887c0.054-0.434,0.081-0.876,0.081-1.324c0-1.744-0.413-3.393-1.146-4.854c1.133-2.885,1.155-5.369-0.201-6.777c-1.756-1.822-5.391-1.406-9.433,0.721c-0.069-0.001-0.138-0.003-0.206-0.003c-6.069,0-10.988,4.888-10.988,10.917c0,0.183,0.005,0.354,0.014,0.529c-2.688,4.071-3.491,7.967-1.688,9.838c1.557,1.613,4.691,1.344,8.2-0.392c1.363,0.604,2.873,0.938,4.462,0.938c4.793,0,8.867-3.049,10.369-7.299H21.26c-0.814,1.483-2.438,2.504-4.307,2.504c-2.688,0-4.867-2.104-4.867-4.688c0-0.036,0.002-0.071,0.003-0.106h15.662V17.887zM26.337,6.099c0.903,0.937,0.806,2.684-0.087,4.818c-1.27-2.083-3.221-3.71-5.546-4.576C23.244,5.217,25.324,5.047,26.337,6.099zM16.917,10.372c2.522,0,4.585,1.991,4.748,4.509h-9.496C12.333,12.363,14.396,10.372,16.917,10.372zM5.687,26.501c-1.103-1.146-0.712-3.502,0.799-6.298c0.907,2.546,2.736,4.658,5.09,5.938C8.92,27.368,6.733,27.587,5.687,26.501z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Import();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Import = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Import.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Import\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.067,2.25c-5.979,0-11.035,3.91-12.778,9.309h3.213c1.602-3.705,5.271-6.301,9.565-6.309c5.764,0.01,10.428,4.674,10.437,10.437c-0.009,5.764-4.673,10.428-10.437,10.438c-4.294-0.007-7.964-2.605-9.566-6.311H2.289c1.744,5.399,6.799,9.31,12.779,9.312c7.419-0.002,13.437-6.016,13.438-13.438C28.504,8.265,22.486,2.252,15.067,2.25zM10.918,19.813l7.15-4.126l-7.15-4.129v2.297H-0.057v3.661h10.975V19.813z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.InkScape();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.InkScape = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.InkScape.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.InkScape\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M20.402,17.626c0.84-0.772,2.468-0.381,5.979-1.853c1.716-0.72,1.572-1.265,1.566-1.928c-0.001-0.014,0-0.027,0-0.041h-0.005c-0.012-0.667-0.291-1.332-0.846-1.845L17.049,2.684c-0.566-0.522-1.304-0.782-2.042-0.782V1.898c-0.738,0-1.475,0.261-2.04,0.783l-10.05,9.276c-0.554,0.512-0.832,1.176-0.843,1.844H2.07c0,0,0.003,0.011,0.004,0.011c0,0.012-0.004,0.024-0.004,0.034h0.017c0.193,0.676,5.164,1.536,5.718,2.049c0.838,0.774-3.211,1.339-2.374,2.114c0.838,0.773,5.062,1.496,5.898,2.271c0.838,0.771-1.711,1.596-0.874,2.366c0.837,0.773,3.651-0.191,3.142,1.822c1.13,1.045,3.49,0.547,5.071-0.498c0.837-0.771-1.607-0.703-0.77-1.477c0.836-0.774,2.949-0.777,4.73-2.627C21.913,18.838,19.566,18.398,20.402,17.626zM10.973,16.868l-0.42-0.504c1.497,0.358,3.162,0.827,4.498,0.837l0.058,0.554C13.964,17.646,11.544,17.137,10.973,16.868zM18.161,8.58l-1.396-0.74L14.53,9.594l-1.067-3.192l-1.177,2.545L8.998,9.25l0.036-1.352c0-0.324,1.895-2.596,3.05-3.136l2.112-1.401c0.312-0.186,0.53-0.261,0.727-0.257c0.327,0.011,0.593,0.239,1.112,0.55l4.748,3.25c0.357,0.215,0.619,0.522,0.626,0.898l-2.813-1.254L18.161,8.58zM26.434,19.594c-0.313-0.07-1.688-0.691-2.035,0.165c0.968,0.981,2.645,2.181,3.316,1.482C28.391,20.543,27.102,19.745,26.434,19.594zM4.663,21.566c-0.315,0.074-1.842,0.115-1.719,1.021c1.351,0.451,3.438,0.792,3.684-0.113C6.873,21.566,5.33,21.414,4.663,21.566zM17.877,26.396c-0.232,0.209-1.53,0.953-0.929,1.681c1.413-0.236,3.403-0.914,3.12-1.812C19.786,25.369,18.37,25.953,17.877,26.396z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Ipad();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Ipad = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Ipad.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Ipad\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.221,1.417H6.11c-0.865,0-1.566,0.702-1.566,1.566v25.313c0,0.865,0.701,1.565,1.566,1.565h19.111c0.865,0,1.565-0.7,1.565-1.565V2.984C26.787,2.119,26.087,1.417,25.221,1.417zM15.666,29.299c-0.346,0-0.626-0.279-0.626-0.625s0.281-0.627,0.626-0.627c0.346,0,0.627,0.281,0.627,0.627S16.012,29.299,15.666,29.299zM24.376,26.855c0,0.174-0.142,0.312-0.313,0.312H7.27c-0.173,0-0.313-0.142-0.313-0.312V4.3c0-0.173,0.14-0.313,0.313-0.313h16.792c0.172,0,0.312,0.14,0.312,0.313L24.376,26.855L24.376,26.855z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Iphone();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Iphone = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Iphone.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Iphone\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M20.755,1H10.62C9.484,1,8.562,1.921,8.562,3.058v24.385c0,1.136,0.921,2.058,2.058,2.058h10.135c1.136,0,2.058-0.922,2.058-2.058V3.058C22.812,1.921,21.891,1,20.755,1zM14.659,3.264h2.057c0.101,0,0.183,0.081,0.183,0.18c0,0.1-0.082,0.18-0.183,0.18h-2.057c-0.1,0-0.181-0.081-0.181-0.18C14.478,3.344,14.559,3.264,14.659,3.264zM13.225,3.058c0.199,0,0.359,0.162,0.359,0.36c0,0.198-0.161,0.36-0.359,0.36c-0.2,0-0.36-0.161-0.36-0.36S13.025,3.058,13.225,3.058zM15.688,28.473c-0.796,0-1.44-0.646-1.44-1.438c0-0.799,0.645-1.439,1.44-1.439s1.44,0.646,1.44,1.439S16.483,28.473,15.688,28.473zM22.041,24.355c0,0.17-0.139,0.309-0.309,0.309H9.642c-0.17,0-0.308-0.139-0.308-0.309V6.042c0-0.17,0.138-0.309,0.308-0.309h12.09c0.17,0,0.309,0.138,0.309,0.309V24.355z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.JQuery();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.JQuery = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.JQuery.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.JQuery\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M10.322,23.041C4.579,18.723,2.777,11.07,5.494,4.583c-0.254,0.291-0.502,0.59-0.739,0.904c-5.177,6.887-4.008,16.505,2.613,21.482c6.62,4.979,16.184,3.432,21.362-3.455c0.237-0.314,0.454-0.635,0.663-0.959C23.915,26.963,16.064,27.357,10.322,23.041zM13.662,18.598c4.765,3.582,11.604,2.564,15.567-2.198c-3.609,2.641-9.09,2.475-13.361-0.736S9.916,7.231,11.451,3.03C7.976,8.161,8.897,15.015,13.662,18.598zM18.642,11.976c3.254,2.447,8.146,1.438,10.967-2.242c-2.604,1.921-6.341,1.955-9.157-0.164c-2.819-2.118-3.826-5.718-2.701-8.754C14.998,4.549,15.387,9.528,18.642,11.976z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Jigsaw();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Jigsaw = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Jigsaw.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Jigsaw\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M3.739,13.619c0,0,3.516-4.669,5.592-3.642c2.077,1.027-0.414,2.795,1.598,3.719c2.011,0.924,5.048-0.229,4.376-2.899c-0.672-2.67-1.866-0.776-2.798-2.208c-0.934-1.432,4.586-4.59,4.586-4.59s3.361,6.651,4.316,4.911c1.157-2.105,3.193-4.265,5.305-1.025c0,0,1.814,2.412,0.246,3.434s-2.917,0.443-3.506,1.553c-0.586,1.112,3.784,4.093,3.784,4.093s-2.987,4.81-4.926,3.548c-1.939-1.262,0.356-3.364-2.599-3.989c-1.288-0.23-3.438,0.538-3.818,2.34c-0.13,2.709,1.604,2.016,2.797,3.475c1.191,1.457-4.484,4.522-4.484,4.522s-1.584-3.923-3.811-4.657c-2.227-0.735-0.893,2.135-2.917,2.531c-2.024,0.396-4.816-2.399-3.46-4.789c1.358-2.391,3.275-0.044,3.441-1.951C7.629,16.087,3.739,13.619,3.739,13.619z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Key();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Key = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Key.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Key\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M18.386,16.009l0.009-0.006l-0.58-0.912c1.654-2.226,1.876-5.319,0.3-7.8c-2.043-3.213-6.303-4.161-9.516-2.118c-3.212,2.042-4.163,6.302-2.12,9.517c1.528,2.402,4.3,3.537,6.944,3.102l0.424,0.669l0.206,0.045l0.779-0.447l-0.305,1.377l2.483,0.552l-0.296,1.325l1.903,0.424l-0.68,3.06l1.406,0.313l-0.424,1.906l4.135,0.918l0.758-3.392L18.386,16.009z M10.996,8.944c-0.685,0.436-1.593,0.233-2.029-0.452C8.532,7.807,8.733,6.898,9.418,6.463s1.594-0.233,2.028,0.452C11.883,7.6,11.68,8.509,10.996,8.944z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Lab();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Lab = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Lab.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Lab\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M22.121,24.438l-3.362-7.847c-0.329-0.769-0.599-2.081-0.599-2.917s0.513-1.521,1.14-1.521s1.141-0.513,1.141-1.14s-0.685-1.14-1.521-1.14h-6.84c-0.836,0-1.52,0.513-1.52,1.14s0.513,1.14,1.14,1.14s1.14,0.685,1.14,1.521s-0.269,2.148-0.599,2.917l-3.362,7.847C8.55,25.206,8.28,26.177,8.28,26.595s0.342,1.103,0.76,1.521s1.444,0.76,2.28,0.76h8.359c0.836,0,1.862-0.342,2.28-0.76s0.76-1.103,0.76-1.521S22.45,25.206,22.121,24.438zM16.582,7.625c0,0.599,0.484,1.083,1.083,1.083s1.083-0.484,1.083-1.083s-0.484-1.084-1.083-1.084S16.582,7.026,16.582,7.625zM13.667,7.792c0.276,0,0.5-0.224,0.5-0.5s-0.224-0.5-0.5-0.5s-0.5,0.224-0.5,0.5S13.391,7.792,13.667,7.792zM15.584,5.292c0.874,0,1.583-0.709,1.583-1.583c0-0.875-0.709-1.584-1.583-1.584C14.709,2.125,14,2.834,14,3.709C14,4.583,14.709,5.292,15.584,5.292z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Lamp();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Lamp = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Lamp.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Lamp\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.5,2.833c-3.866,0-7,3.134-7,7c0,3.859,3.945,4.937,4.223,9.499h5.553c0.278-4.562,4.224-5.639,4.224-9.499C22.5,5.968,19.366,2.833,15.5,2.833zM15.5,28.166c1.894,0,2.483-1.027,2.667-1.666h-5.334C13.017,27.139,13.606,28.166,15.5,28.166zM12.75,25.498h5.5v-5.164h-5.5V25.498z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Lamp_alt();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Lamp_alt = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Lamp_alt.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Lamp_alt\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M12.75,25.498h5.5v-5.164h-5.5V25.498zM15.5,28.166c1.894,0,2.483-1.027,2.667-1.666h-5.334C13.017,27.139,13.606,28.166,15.5,28.166zM15.5,2.833c-3.866,0-7,3.134-7,7c0,3.859,3.945,4.937,4.223,9.499h1.271c-0.009-0.025-0.024-0.049-0.029-0.078L11.965,8.256c-0.043-0.245,0.099-0.485,0.335-0.563c0.237-0.078,0.494,0.026,0.605,0.25l0.553,1.106l0.553-1.106c0.084-0.17,0.257-0.277,0.446-0.277c0.189,0,0.362,0.107,0.446,0.277l0.553,1.106l0.553-1.106c0.084-0.17,0.257-0.277,0.448-0.277c0.189,0,0.36,0.107,0.446,0.277l0.554,1.106l0.553-1.106c0.111-0.224,0.368-0.329,0.604-0.25s0.377,0.318,0.333,0.563l-1.999,10.998c-0.005,0.029-0.02,0.053-0.029,0.078h1.356c0.278-4.562,4.224-5.639,4.224-9.499C22.5,5.968,19.366,2.833,15.5,2.833zM17.458,10.666c-0.191,0-0.364-0.107-0.446-0.275l-0.554-1.106l-0.553,1.106c-0.086,0.168-0.257,0.275-0.446,0.275c-0.191,0-0.364-0.107-0.449-0.275l-0.553-1.106l-0.553,1.106c-0.084,0.168-0.257,0.275-0.446,0.275c-0.012,0-0.025,0-0.037-0.001l1.454,8.001h1.167l1.454-8.001C17.482,10.666,17.47,10.666,17.458,10.666z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Landing();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Landing = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Landing.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Landing\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M23.322,19.491c0,0,1.903,0.342,0.299-1.869c-1.353-1.866-5.261-3.104-5.261-3.104l-4.213-8.229l-2.47-0.394l0.973,5.449L9.241,10.11L8.772,7.273L7.008,6.302c0,0-0.496,2.742-0.149,5.271C6.859,11.573,13.965,17.999,23.322,19.491zM3.251,23.106v1.998h24.498v-1.998H3.251zM14,17.94c0,0.414,0.336,0.75,0.75,0.75s0.75-0.336,0.75-0.75s-0.336-0.75-0.75-0.75S14,17.526,14,17.94z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Landscape1();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Landscape1 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Landscape1.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Landscape1\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M19.883,5.71H2.746c-0.163,0-0.319,0.071-0.435,0.188c-0.118,0.117-0.18,0.272-0.18,0.435v18.364c0,0.164,0.063,0.318,0.18,0.436c0.123,0.117,0.287,0.18,0.435,0.18h25.75c0.164,0,0.324-0.066,0.438-0.18c0.118-0.114,0.182-0.273,0.182-0.436V14.551c-0.002-0.102-0.01-0.188-0.021-0.271c-0.186-1.543-1.543-3.424-3.236-5.168C24.039,7.31,21.869,5.753,19.883,5.71zM26.914,12.314c-0.008-0.005-0.019-0.007-0.029-0.01c-1.092-0.293-2.33-0.355-3.199-0.355c-0.162,0-0.312,0.002-0.445,0.004c-0.037-0.604-0.129-1.604-0.356-2.625c-0.11-0.461-0.246-0.94-0.433-1.42c0.857,0.541,1.748,1.264,2.535,2.068C25.74,10.718,26.41,11.551,26.914,12.314zM3.365,6.947h16.517c0.058,0,0.12,0,0.183,0.004c0.694,0.105,1.307,1.221,1.616,2.646c0.335,1.484,0.354,2.997,0.354,3l0.007,0.656l0.651-0.051c0,0,0.398-0.027,0.99-0.025c0.809,0,1.977,0.062,2.871,0.312c0.939,0.275,1.352,0.635,1.326,1.051h0.002v9.542H3.365V6.951V6.947z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Landscape2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Landscape2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Landscape2.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Landscape2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M19.883,5.71H2.746c-0.163,0-0.319,0.071-0.435,0.188c-0.118,0.117-0.18,0.272-0.18,0.435v18.364c0,0.164,0.063,0.318,0.18,0.436c0.123,0.117,0.287,0.18,0.435,0.18h25.75c0.164,0,0.324-0.066,0.438-0.18c0.118-0.114,0.182-0.273,0.182-0.436V14.551c-0.002-0.102-0.01-0.188-0.021-0.271c-0.186-1.543-1.543-3.424-3.236-5.168C24.039,7.31,21.869,5.753,19.883,5.71zM3.365,6.947h16.517c0.058,0,0.12,0,0.183,0.004c0.694,0.105,1.307,1.221,1.616,2.646c0.335,1.484,0.354,2.997,0.354,3l0.007,0.656l0.651-0.051c0,0,0.398-0.027,0.99-0.025c0.809,0,1.977,0.062,2.871,0.312c0.939,0.275,1.352,0.635,1.326,1.051h0.002v9.542H3.365V6.951V6.947z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.LineChart();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.LineChart = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.LineChart.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.LineChart\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M3.625,25.062c-0.539-0.115-0.885-0.646-0.77-1.187l0,0L6.51,6.584l2.267,9.259l1.923-5.188l3.581,3.741l3.883-13.103l2.934,11.734l1.96-1.509l5.271,11.74c0.226,0.504,0,1.095-0.505,1.321l0,0c-0.505,0.227-1.096,0-1.322-0.504l0,0l-4.23-9.428l-2.374,1.826l-1.896-7.596l-2.783,9.393l-3.754-3.924L8.386,22.66l-1.731-7.083l-1.843,8.711c-0.101,0.472-0.515,0.794-0.979,0.794l0,0C3.765,25.083,3.695,25.076,3.625,25.062L3.625,25.062z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Link();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Link = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Link.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Link\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16.45,18.085l-2.47,2.471c0.054,1.023-0.297,2.062-1.078,2.846c-1.465,1.459-3.837,1.459-5.302-0.002c-1.461-1.465-1.46-3.836-0.001-5.301c0.783-0.781,1.824-1.131,2.847-1.078l2.469-2.469c-2.463-1.057-5.425-0.586-7.438,1.426c-2.634,2.637-2.636,6.907,0,9.545c2.638,2.637,6.909,2.635,9.545,0l0.001,0.002C17.033,23.511,17.506,20.548,16.45,18.085zM14.552,12.915l2.467-2.469c-0.053-1.023,0.297-2.062,1.078-2.848C19.564,6.139,21.934,6.137,23.4,7.6c1.462,1.465,1.462,3.837,0,5.301c-0.783,0.783-1.822,1.132-2.846,1.079l-2.469,2.468c2.463,1.057,5.424,0.584,7.438-1.424c2.634-2.639,2.633-6.91,0-9.546c-2.639-2.636-6.91-2.637-9.545-0.001C13.967,7.489,13.495,10.451,14.552,12.915zM18.152,10.727l-7.424,7.426c-0.585,0.584-0.587,1.535,0,2.121c0.585,0.584,1.536,0.584,2.121-0.002l7.425-7.424c0.584-0.586,0.584-1.535,0-2.121C19.687,10.141,18.736,10.142,18.152,10.727z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.LinkedIn();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.LinkedIn = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.LinkedIn.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.LinkedIn\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M27.25,3.125h-22c-1.104,0-2,0.896-2,2v22c0,1.104,0.896,2,2,2h22c1.104,0,2-0.896,2-2v-22C29.25,4.021,28.354,3.125,27.25,3.125zM11.219,26.781h-4v-14h4V26.781zM9.219,11.281c-1.383,0-2.5-1.119-2.5-2.5s1.117-2.5,2.5-2.5s2.5,1.119,2.5,2.5S10.602,11.281,9.219,11.281zM25.219,26.781h-4v-8.5c0-0.4-0.403-1.055-0.687-1.213c-0.375-0.211-1.261-0.229-1.665-0.034l-1.648,0.793v8.954h-4v-14h4v0.614c1.583-0.723,3.78-0.652,5.27,0.184c1.582,0.886,2.73,2.864,2.73,4.702V26.781z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Linux();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Linux = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Linux.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Linux\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M11.791,25.229c1.027-0.104,1.162-1.191,0.68-1.666c-0.398-0.392-2.598-2.022-3.171-2.664C9.033,20.6,8.673,20.454,8.52,20.12c-0.352-0.771-0.598-1.869-0.151-2.658c0.081-0.144,0.133-0.078,0.071,0.22c-0.351,1.684,0.746,3.059,0.986,2.354c0.167-0.487,0.013-1.358,0.102-2.051c0.158-1.226,1.273-3.577,1.763-3.712c-0.755-1.398,0.886-2.494,0.866-3.723c-0.014-0.798,0.701,0.982,1.419,1.359c0.802,0.422,1.684-0.794,2.936-1.41c0.354-0.176,0.809-0.376,0.776-0.524c-0.146-0.718-1.644,0.886-2.979,0.939c-0.61,0.024-0.837-0.12-1.072-0.347c-0.712-0.689,0.073-0.115,1.132-0.307c0.471-0.085,0.629-0.163,1.128-0.365c0.5-0.201,1.069-0.5,1.636-0.654c0.395-0.106,0.361-0.402,0.208-0.491c-0.088-0.051-0.219-0.046-0.321,0.133c-0.244,0.419-1.383,0.661-1.74,0.771c-0.457,0.14-0.962,0.271-1.634,0.243c-1.021-0.042-0.782-0.509-1.513-0.928c-0.213-0.122-0.156-0.444,0.129-0.729c0.148-0.148,0.557-0.232,0.76-0.572c0.028-0.047,0.289-0.32,0.494-0.461c0.07-0.049,0.076-1.295-0.562-1.32c-0.543-0.021-0.697,0.398-0.675,0.818c0.022,0.419,0.245,0.765,0.393,0.764c0.285-0.004,0.019,0.311-0.138,0.361c-0.237,0.078-0.562-0.934-0.525-1.418c0.039-0.506,0.303-1.4,0.942-1.383c0.576,0.016,0.993,0.737,0.973,1.983c-0.003,0.211,0.935-0.101,1.247,0.229c0.224,0.236-0.767-2.207,1.438-2.375c0.582,0.111,1.14,0.305,1.371,1.641c-0.086,0.139,0.146,1.07-0.215,1.182c-0.438,0.135-0.707-0.02-0.453-0.438c0.172-0.418,0.004-1.483-0.882-1.42c-0.887,0.064-0.769,1.637-0.526,1.668c0.243,0.031,0.854,0.465,1.282,0.549c1.401,0.271,0.371,1.075,0.555,2.048c0.205,1.099,0.929,0.809,1.578,3.717c0.137,0.177,0.676,0.345,1.199,2.579c0.473,2.011-0.195,3.473,0.938,3.353c0.256-0.026,0.629-0.1,0.792-0.668c0.425-1.489-0.213-3.263-0.855-4.46c-0.375-0.698-0.729-1.174-0.916-1.337c0.738,0.436,1.683,1.829,1.898,2.862c0.286,1.358,0.49,1.934,0.059,3.37c0.25,0.125,0.871,0.39,0.871,0.685c-0.647-0.53-2.629-0.625-2.68,0.646c-0.338,0.008-0.594,0.034-0.811,0.293c-0.797,0.944-0.059,2.842-0.139,3.859c-0.07,0.896-0.318,1.783-0.46,2.683c-0.474-0.019-0.428-0.364-0.274-0.852c0.135-0.431,0.351-0.968,0.365-1.484c0.012-0.467-0.039-0.759-0.156-0.831c-0.118-0.072-0.303,0.074-0.559,0.485c-0.543,0.875-1.722,1.261-2.821,1.397c-1.099,0.138-2.123,0.028-2.664-0.578c-0.186-0.207-0.492,0.058-0.529,0.111c-0.049,0.074,0.18,0.219,0.352,0.533c0.251,0.461,0.49,1.159-0.105,1.479C12.83,26.314,12.316,26.221,11.791,25.229L11.791,25.229zM11.398,25.188c0.395,0.621,1.783,3.232-0.652,3.571c-0.814,0.114-2.125-0.474-3.396-0.784c-1.142-0.279-2.301-0.444-2.949-0.627c-0.391-0.108-0.554-0.25-0.588-0.414c-0.091-0.434,0.474-1.041,0.503-1.555c0.028-0.514-0.188-0.779-0.364-1.199c-0.177-0.42-0.224-0.734-0.081-0.914c0.109-0.141,0.334-0.199,0.698-0.164c0.462,0.047,1.02-0.049,1.319-0.23c0.505-0.309,0.742-0.939,0.516-1.699c0,0.744-0.244,1.025-0.855,1.366c-0.577,0.319-1.467,0.062-1.875,0.416c-0.492,0.427,0.175,1.528,0.12,2.338c-0.042,0.622-0.69,1.322-0.401,1.946c0.291,0.627,1.648,0.695,3.064,0.99c2.012,0.422,3.184,1.153,4.113,1.188c1.356,0.05,1.564-1.342,3.693-1.36c0.621-0.033,1.229-0.052,1.835-0.06c0.688-0.009,1.375-0.003,2.079,0.014c1.417,0.034,0.931,0.773,1.851,1.246c0.774,0.397,2.17,0.241,2.504-0.077c0.451-0.431,1.662-1.467,2.592-1.935c1.156-0.583,3.876-1.588,1.902-2.812c-0.461-0.285-1.547-0.588-1.639-2.676c-0.412,0.366-0.365,2.312,0.784,2.697c1.283,0.431,2.085,1.152-0.301,1.969c-1.58,0.54-1.849,0.706-3.099,1.747c-1.267,1.054-3.145,0.636-2.815-1.582c0.171-1.155,0.269-2.11-0.019-3.114c-0.142-0.49-0.211-1.119-0.114-1.562c0.187-0.858,0.651-1.117,1.106-0.293c0.285,0.519,0.385,1.122,1.408,1.171c1.607,0.077,1.926-1.553,2.439-1.627c0.343-0.05,0.686-1.02,0.425-2.589c-0.28-1.681-1.269-4.332-2.536-5.677c-1.053-1.118-1.717-2.098-2.135-3.497c-0.352-1.175-0.547-2.318-0.475-3.412c0.094-1.417-0.691-3.389-1.943-4.316c-0.782-0.581-2.011-0.893-3.122-0.88c-0.623,0.007-1.21,0.099-1.661,0.343c-1.855,1.008-2.113,2.445-2.086,4.088c0.025,1.543,0.078,3.303,0.254,4.977c-0.208,0.77-1.288,2.227-1.979,3.114C8.59,14.233,8.121,16.01,7.52,17.561c-0.321,0.828-0.862,1.2-0.908,2.265C6.6,20.122,6.61,20.891,6.894,20.672C7.98,19.829,9.343,21.95,11.398,25.188L11.398,25.188zM17.044,2.953c-0.06,0.176-0.3,0.321-0.146,0.443c0.152,0.123,0.24-0.171,0.549-0.281c0.08-0.028,0.449,0.012,0.519-0.164c0.03-0.077-0.19-0.164-0.321-0.291c-0.133-0.125-0.262-0.236-0.386-0.229C16.938,2.451,17.096,2.798,17.044,2.953L17.044,2.953zM18.934,9.35c0.115-0.121,0.174,0.207,0.483,0.402c0.244,0.154,0.481,0.04,0.545,0.354c0.044,0.225-0.097,0.467-0.284,0.436C19.35,10.486,18.596,9.705,18.934,9.35L18.934,9.35zM13.832,7.375c-0.508-0.037-0.543,0.33-0.375,0.324C13.629,7.693,13.523,7.408,13.832,7.375L13.832,7.375zM12.96,6.436c0.06-0.013,0.146,0.09,0.119,0.233c-0.037,0.199-0.021,0.324,0.117,0.325c0.022,0,0.048-0.005,0.056-0.057c0.066-0.396-0.14-0.688-0.225-0.711C12.834,6.178,12.857,6.458,12.96,6.436L12.96,6.436zM16.663,6.268c0.129,0.039,0.253,0.262,0.28,0.504c0.002,0.021,0.168-0.035,0.17-0.088c0.011-0.389-0.321-0.571-0.408-0.562C16.506,6.139,16.562,6.238,16.663,6.268L16.663,6.268zM14.765,7.423c0.463-0.214,0.625,0.118,0.465,0.171C15.066,7.648,15.065,7.345,14.765,7.423L14.765,7.423zM9.178,15.304c-0.219-0.026,0.063-0.19,0.184-0.397c0.131-0.227,0.105-0.511,0.244-0.469s0.061,0.2-0.033,0.461C9.491,15.121,9.258,15.313,9.178,15.304L9.178,15.304z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.List();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.List = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.List.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.List\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M4.082,4.083v2.999h22.835V4.083H4.082zM4.082,20.306h22.835v-2.999H4.082V20.306zM4.082,13.694h22.835v-2.999H4.082V13.694zM4.082,26.917h22.835v-2.999H4.082V26.917z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Location();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Location = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Location.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Location\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,3.5c-4.142,0-7.5,3.358-7.5,7.5c0,4.143,7.5,18.121,7.5,18.121S23.5,15.143,23.5,11C23.5,6.858,20.143,3.5,16,3.5z M16,14.584c-1.979,0-3.584-1.604-3.584-3.584S14.021,7.416,16,7.416S19.584,9.021,19.584,11S17.979,14.584,16,14.584z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Lock();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Lock = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Lock.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Lock\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M22.335,12.833V9.999h-0.001C22.333,6.501,19.498,3.666,16,3.666S9.666,6.502,9.666,10h0v2.833H7.375V25h17.25V12.833H22.335zM11.667,10C11.667,10,11.667,10,11.667,10c0-2.39,1.944-4.334,4.333-4.334c2.391,0,4.335,1.944,4.335,4.333c0,0,0,0,0,0v2.834h-8.668V10z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Locked();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Locked = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Locked.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Locked\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M26.711,14.085L16.914,4.29c-0.778-0.778-2.051-0.778-2.829,0L4.29,14.086c-0.778,0.778-0.778,2.05,0,2.829l9.796,9.796c0.778,0.777,2.051,0.777,2.829,0l9.797-9.797C27.488,16.136,27.488,14.863,26.711,14.085zM8.218,16.424c-0.4-0.153-0.687-0.533-0.687-0.987s0.287-0.834,0.687-0.987V16.424zM8.969,16.424v-1.974c0.4,0.152,0.687,0.533,0.687,0.987S9.369,16.272,8.969,16.424zM13.5,19.188l1.203-3.609c-0.689-0.306-1.172-0.994-1.172-1.797c0-1.087,0.881-1.969,1.969-1.969c1.087,0,1.969,0.881,1.969,1.969c0,0.803-0.482,1.491-1.172,1.797l1.203,3.609H13.5zM22.03,16.549c-0.399-0.152-0.687-0.533-0.687-0.986s0.287-0.834,0.687-0.987V16.549zM22.781,16.549v-1.973c0.4,0.152,0.688,0.533,0.688,0.987S23.182,16.397,22.781,16.549z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Magic();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Magic = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Magic.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Magic\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M23.043,4.649l-0.404-2.312l-1.59,1.727l-2.323-0.33l1.151,2.045l-1.032,2.108l2.302-0.463l1.686,1.633l0.271-2.332l2.074-1.099L23.043,4.649zM26.217,18.198l-0.182-1.25l-0.882,0.905l-1.245-0.214l0.588,1.118l-0.588,1.118l1.245-0.214l0.882,0.905l0.182-1.25l1.133-0.56L26.217,18.198zM4.92,7.672L5.868,7.3l0.844,0.569L6.65,6.853l0.802-0.627L6.467,5.97L6.118,5.013L5.571,5.872L4.553,5.908l0.647,0.786L4.92,7.672zM10.439,10.505l1.021-1.096l1.481,0.219l-0.727-1.31l0.667-1.341l-1.47,0.287l-1.069-1.048L10.16,7.703L8.832,8.396l1.358,0.632L10.439,10.505zM17.234,12.721c-0.588-0.368-1.172-0.618-1.692-0.729c-0.492-0.089-1.039-0.149-1.425,0.374L2.562,30.788h6.68l9.669-15.416c0.303-0.576,0.012-1.041-0.283-1.447C18.303,13.508,17.822,13.09,17.234,12.721zM13.613,21.936c-0.254-0.396-0.74-0.857-1.373-1.254c-0.632-0.396-1.258-0.634-1.726-0.69l4.421-7.052c0.064-0.013,0.262-0.021,0.543,0.066c0.346,0.092,0.785,0.285,1.225,0.562c0.504,0.313,0.908,0.677,1.133,0.97c0.113,0.145,0.178,0.271,0.195,0.335c0.002,0.006,0.004,0.011,0.004,0.015L13.613,21.936z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Magnet();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Magnet = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Magnet.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Magnet\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M20.812,19.5h5.002v-6.867c-0.028-1.706-0.61-3.807-2.172-5.841c-1.539-2.014-4.315-3.72-7.939-3.687C12.076,3.073,9.3,4.779,7.762,6.792C6.2,8.826,5.617,10.928,5.588,12.634V19.5h5v-6.866c-0.027-0.377,0.303-1.789,1.099-2.748c0.819-0.979,1.848-1.747,4.014-1.778c2.165,0.032,3.195,0.799,4.013,1.778c0.798,0.959,1.126,2.372,1.099,2.748V19.5L20.812,19.5zM25.814,25.579c0,0,0-2.354,0-5.079h-5.002c0,2.727,0,5.08,0,5.08l5.004-0.001H25.814zM5.588,25.58h5c0,0,0-2.354,0-5.08h-5C5.588,23.227,5.588,25.58,5.588,25.58z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Mail();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Mail = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Mail.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Mail\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.516,7.167H3.482l12.517,7.108L28.516,7.167zM16.74,17.303C16.51,17.434,16.255,17.5,16,17.5s-0.51-0.066-0.741-0.197L2.5,10.06v14.773h27V10.06L16.74,17.303z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Man();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Man = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Man.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Man\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.021,16.349c-0.611-1.104-1.359-1.998-2.109-2.623c-0.875,0.641-1.941,1.031-3.103,1.031c-1.164,0-2.231-0.391-3.105-1.031c-0.75,0.625-1.498,1.519-2.111,2.623c-1.422,2.563-1.578,5.192-0.35,5.874c0.55,0.307,1.127,0.078,1.723-0.496c-0.105,0.582-0.166,1.213-0.166,1.873c0,2.932,1.139,5.307,2.543,5.307c0.846,0,1.265-0.865,1.466-2.189c0.201,1.324,0.62,2.189,1.463,2.189c1.406,0,2.545-2.375,2.545-5.307c0-0.66-0.061-1.291-0.168-1.873c0.598,0.574,1.174,0.803,1.725,0.496C22.602,21.541,22.443,18.912,21.021,16.349zM15.808,13.757c2.362,0,4.278-1.916,4.278-4.279s-1.916-4.279-4.278-4.279c-2.363,0-4.28,1.916-4.28,4.279S13.445,13.757,15.808,13.757z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Merge();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Merge = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Merge.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Merge\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M29.342,15.5l-7.556-4.363v2.613h-1.411c-0.788-0.01-1.331-0.241-2.019-0.743c-1.021-0.745-2.094-2.181-3.551-3.568C13.367,8.06,11.291,6.73,8.5,6.749H2.812v3.5H8.5c2.231,0.012,3.441,1.185,5.07,2.934c0.697,0.753,1.428,1.58,2.324,2.323c-1.396,1.165-2.412,2.516-3.484,3.501c-1.183,1.081-2.202,1.723-3.912,1.741H2.813v3.5h5.716c3.752,0.001,6.035-2.319,7.619-4.066c0.817-0.895,1.537-1.691,2.209-2.191c0.686-0.502,1.23-0.732,2.017-0.742h1.412v2.614L29.342,15.5z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Mic();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Mic = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Mic.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Mic\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.5,21.125c2.682,0,4.875-2.25,4.875-5V5.875c0-2.75-2.193-5-4.875-5s-4.875,2.25-4.875,5v10.25C10.625,18.875,12.818,21.125,15.5,21.125zM21.376,11v5.125c0,3.308-2.636,6-5.876,6s-5.875-2.691-5.875-6V11H6.626v5.125c0,4.443,3.194,8.132,7.372,8.861v2.139h-3.372v3h9.749v-3h-3.376v-2.139c4.181-0.727,7.375-4.418,7.375-8.861V11H21.376z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.MicMute();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.MicMute = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.MicMute.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.MicMute\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M10.121,18.529c-0.317-0.736-0.496-1.549-0.496-2.404V11H6.626v5.125c0,1.693,0.466,3.275,1.272,4.627L10.121,18.529zM20.375,8.276V5.875c0-2.75-2.193-5-4.875-5s-4.875,2.25-4.875,5v10.25c0,0.568,0.113,1.105,0.285,1.615L20.375,8.276zM21.376,12.931v3.195c0,3.308-2.636,6-5.876,6c-0.958,0-1.861-0.24-2.661-0.657l-2.179,2.179c0.995,0.659,2.123,1.128,3.338,1.34v2.139h-3.372v3h9.749v-3h-3.376v-2.139c4.181-0.727,7.375-4.418,7.375-8.861V11h-1.068L21.376,12.931zM20.375,16.125v-2.194l-6.788,6.788c0.588,0.26,1.234,0.405,1.913,0.405C18.182,21.125,20.375,18.875,20.375,16.125zM25.542,4.522L4.855,25.209l1.415,1.416L26.956,5.937L25.542,4.522z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Minus();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Minus = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Minus.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Minus\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.979,12.896,5.979,12.896,5.979,19.562,25.979,19.562z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.NewWindow();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.NewWindow = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.NewWindow.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.NewWindow\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M5.896,5.333V21.25h23.417V5.333H5.896zM26.312,18.25H8.896V8.334h17.417V18.25L26.312,18.25zM4.896,9.542H1.687v15.917h23.417V22.25H4.896V9.542z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.No();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.No = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.No.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.No\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,2.939C9.006,2.942,3.338,8.61,3.335,15.605C3.335,22.6,9.005,28.268,16,28.27c6.994-0.002,12.662-5.67,12.664-12.664C28.663,8.61,22.995,2.939,16,2.939zM25.663,15.605c-0.003,1.943-0.583,3.748-1.569,5.264L10.736,7.513c1.515-0.988,3.32-1.569,5.265-1.573C21.337,5.951,25.654,10.269,25.663,15.605zM6.335,15.605c0.004-1.943,0.584-3.75,1.573-5.266l13.355,13.357c-1.516,0.986-3.32,1.566-5.264,1.569C10.664,25.26,6.346,20.941,6.335,15.605z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.NoMagnet();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.NoMagnet = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.NoMagnet.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.NoMagnet\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M10.59,17.857v-5.225c-0.027-0.376,0.303-1.789,1.099-2.748c0.819-0.979,1.849-1.748,4.014-1.778c1.704,0.026,2.699,0.508,3.447,1.189l3.539-3.539c-1.616-1.526-4.01-2.679-6.986-2.652C12.077,3.073,9.3,4.779,7.762,6.793C6.2,8.826,5.617,10.928,5.59,12.634V19.5h3.357L10.59,17.857zM5.59,20.5v2.357L7.947,20.5H5.59zM20.812,13.29v6.21h5.002v-6.866c-0.021-1.064-0.252-2.283-0.803-3.542L20.812,13.29zM25.339,4.522L4.652,25.209l1.415,1.416L26.753,5.937L25.339,4.522zM20.812,25.58h5.002c0,0,0-2.354,0-5.08h-5.002C20.812,23.227,20.812,25.58,20.812,25.58zM10.59,25.58c0,0,0-0.827,0-2.064L8.525,25.58H10.59z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.NodeJs();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.NodeJs = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.NodeJs.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.NodeJs\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M4.783,4.458L2.59,3.196C2.553,3.174,2.511,3.163,2.469,3.161H2.447C2.405,3.163,2.363,3.174,2.326,3.196L0.133,4.458C0.051,4.505,0,4.593,0,4.688l0.005,3.398c0,0.047,0.024,0.092,0.066,0.114c0.041,0.024,0.091,0.024,0.132,0l1.303-0.746c0.083-0.049,0.132-0.136,0.132-0.229V5.637c0-0.095,0.05-0.183,0.132-0.229l0.555-0.32c0.041-0.023,0.086-0.035,0.132-0.035c0.045,0,0.092,0.012,0.132,0.035l0.555,0.32c0.082,0.047,0.133,0.135,0.133,0.229v1.588c0,0.094,0.051,0.182,0.132,0.229l1.303,0.746c0.041,0.024,0.092,0.024,0.132,0c0.041-0.022,0.066-0.067,0.066-0.114l0.004-3.398C4.915,4.593,4.865,4.505,4.783,4.458zM17.93,0.745l-1.305-0.729c-0.042-0.023-0.091-0.022-0.132,0.001c-0.041,0.024-0.065,0.067-0.065,0.114v3.365c0,0.033-0.018,0.064-0.046,0.081s-0.064,0.017-0.093,0l-0.549-0.316c-0.082-0.047-0.183-0.047-0.265,0l-2.193,1.266c-0.082,0.047-0.133,0.135-0.133,0.229V7.29c0,0.095,0.051,0.182,0.132,0.229l2.194,1.267c0.082,0.048,0.183,0.048,0.265,0l2.194-1.267c0.082-0.048,0.133-0.135,0.133-0.229V0.977C18.066,0.88,18.014,0.792,17.93,0.745zM16.421,6.458c0,0.023-0.013,0.045-0.033,0.057l-0.753,0.435c-0.021,0.012-0.045,0.012-0.066,0l-0.753-0.435c-0.021-0.012-0.033-0.034-0.033-0.057v-0.87c0-0.023,0.013-0.045,0.033-0.058l0.753-0.435c0.021-0.012,0.045-0.012,0.066,0l0.753,0.435c0.021,0.012,0.033,0.034,0.033,0.058V6.458zM24.473,4.493l-2.18-1.266c-0.082-0.047-0.183-0.048-0.265,0l-2.193,1.266c-0.082,0.047-0.132,0.135-0.132,0.229v2.532c0,0.096,0.051,0.184,0.133,0.23l2.18,1.242c0.08,0.045,0.179,0.046,0.26,0.001l1.318-0.732c0.042-0.023,0.067-0.067,0.068-0.115c0-0.048-0.025-0.092-0.066-0.116l-2.207-1.266c-0.041-0.023-0.066-0.067-0.066-0.115V5.59c0-0.047,0.025-0.091,0.065-0.115l0.688-0.396c0.041-0.024,0.091-0.024,0.132,0l0.688,0.396c0.041,0.023,0.066,0.067,0.066,0.115v0.625c0,0.047,0.025,0.091,0.066,0.114c0.041,0.024,0.092,0.024,0.132,0l1.314-0.764c0.081-0.047,0.132-0.135,0.132-0.229V4.722C24.605,4.628,24.555,4.541,24.473,4.493zM11.363,4.48L9.169,3.214c-0.082-0.047-0.183-0.047-0.265,0L6.711,4.48C6.629,4.527,6.579,4.615,6.579,4.709v2.534c0,0.095,0.051,0.182,0.133,0.229l2.193,1.267c0.082,0.048,0.183,0.048,0.265,0l2.193-1.267c0.082-0.048,0.132-0.135,0.132-0.229V4.709C11.495,4.615,11.445,4.527,11.363,4.48zM31.019,4.382L28.95,3.187c-0.13-0.074-0.304-0.074-0.435,0l-2.068,1.195c-0.135,0.077-0.218,0.222-0.218,0.377v2.386c0,0.156,0.083,0.301,0.218,0.378l0.542,0.312c0.263,0.13,0.356,0.13,0.477,0.13c0.389,0,0.612-0.236,0.612-0.646V4.962c0-0.033-0.027-0.06-0.06-0.06h-0.263c-0.033,0-0.061,0.026-0.061,0.06v2.356c0,0.182-0.188,0.363-0.495,0.209l-0.566-0.326c-0.021-0.012-0.033-0.033-0.033-0.057V4.759c0-0.023,0.013-0.045,0.033-0.057l2.067-1.193c0.019-0.011,0.044-0.011,0.063,0l2.067,1.193c0.02,0.012,0.032,0.034,0.032,0.057v2.386c0,0.023-0.013,0.046-0.032,0.057l-2.068,1.193c-0.018,0.012-0.045,0.012-0.063,0l-0.53-0.314c-0.017-0.01-0.036-0.013-0.052-0.004c-0.146,0.083-0.175,0.094-0.312,0.143c-0.034,0.012-0.084,0.031,0.019,0.09l0.691,0.408c0.065,0.038,0.141,0.059,0.217,0.059s0.151-0.021,0.218-0.059l2.068-1.194c0.134-0.078,0.217-0.222,0.217-0.378V4.759C31.235,4.604,31.152,4.459,31.019,4.382zM29.371,6.768c-0.548,0-0.668-0.138-0.708-0.41c-0.005-0.029-0.029-0.051-0.06-0.051h-0.268c-0.033,0-0.06,0.026-0.06,0.06c0,0.349,0.189,0.765,1.095,0.765c0.655,0,1.031-0.259,1.031-0.709c0-0.447-0.302-0.566-0.938-0.65c-0.643-0.085-0.708-0.128-0.708-0.279c0-0.125,0.056-0.29,0.531-0.29c0.425,0,0.581,0.091,0.646,0.378c0.006,0.027,0.03,0.047,0.059,0.047h0.269c0.017,0,0.032-0.007,0.044-0.019c0.011-0.013,0.017-0.029,0.016-0.046c-0.042-0.493-0.37-0.723-1.032-0.723c-0.59,0-0.941,0.249-0.941,0.666c0,0.453,0.35,0.578,0.916,0.634c0.677,0.066,0.729,0.166,0.729,0.298C29.992,6.669,29.807,6.768,29.371,6.768zM22.128,5.446l-0.42,0.243c-0.016,0.009-0.025,0.026-0.025,0.044v0.486c0,0.019,0.01,0.035,0.025,0.044l0.42,0.243c0.016,0.009,0.035,0.009,0.052,0l0.421-0.243c0.016-0.009,0.025-0.025,0.025-0.044V5.733c0-0.018-0.01-0.035-0.025-0.044L22.18,5.446C22.163,5.438,22.144,5.438,22.128,5.446z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Notebook();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Notebook = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Notebook.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Notebook\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.875,1.375H8c-1.033,0-1.874,0.787-1.979,1.792h1.604c1.102,0,2,0.898,2,2c0,1.102-0.898,2-2,2H6v0.999h1.625c1.104,0,2.002,0.898,2.002,2.002c0,1.104-0.898,2.001-2.002,2.001H6v0.997h1.625c1.102,0,2,0.898,2,2c0,1.104-0.898,2.004-2,2.004H6v0.994h1.625c1.102,0,2,0.898,2,2.002s-0.898,2.002-2,2.002H6v0.997h1.624c1.104,0,2.002,0.897,2.002,2.001c0,1.104-0.898,2.002-2.002,2.002H6.004C6.027,28.252,6.91,29.125,8,29.125h16.875c1.104,0,2-0.896,2-2V3.375C26.875,2.271,25.979,1.375,24.875,1.375zM25.25,8.375c0,0.552-0.447,1-1,1H14c-0.553,0-1-0.448-1-1V4c0-0.552,0.447-1,1-1h10.25c0.553,0,1,0.448,1,1V8.375zM8.625,25.166c0-0.554-0.449-1.001-1-1.001h-3.25c-0.552,0-1,0.447-1,1.001c0,0.552,0.449,1,1,1h3.25C8.176,26.166,8.625,25.718,8.625,25.166zM4.375,6.166h3.251c0.551,0,0.999-0.448,0.999-0.999c0-0.555-0.448-1-0.999-1H4.375c-0.553,0-1,0.445-1,1C3.374,5.718,3.822,6.166,4.375,6.166zM4.375,11.167h3.25c0.553,0,1-0.448,1-1s-0.448-1-1-1h-3.25c-0.553,0-1,0.448-1,1S3.822,11.167,4.375,11.167zM4.375,16.167h3.25c0.551,0,1-0.448,1-1.001s-0.448-0.999-1-0.999h-3.25c-0.553,0-1.001,0.446-1.001,0.999S3.822,16.167,4.375,16.167zM3.375,20.165c0,0.553,0.446,1.002,1,1.002h3.25c0.551,0,1-0.449,1-1.002c0-0.552-0.448-1-1-1h-3.25C3.821,19.165,3.375,19.613,3.375,20.165z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Noview();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Noview = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Noview.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Noview\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M11.478,17.568c-0.172-0.494-0.285-1.017-0.285-1.568c0-2.65,2.158-4.807,4.807-4.807c0.552,0,1.074,0.113,1.568,0.285l2.283-2.283C18.541,8.647,17.227,8.286,16,8.286C8.454,8.286,2.5,16,2.5,16s2.167,2.791,5.53,5.017L11.478,17.568zM23.518,11.185l-3.056,3.056c0.217,0.546,0.345,1.138,0.345,1.76c0,2.648-2.158,4.807-4.807,4.807c-0.622,0-1.213-0.128-1.76-0.345l-2.469,2.47c1.327,0.479,2.745,0.783,4.229,0.783c5.771,0,13.5-7.715,13.5-7.715S26.859,13.374,23.518,11.185zM25.542,4.917L4.855,25.604L6.27,27.02L26.956,6.332L25.542,4.917z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Opera();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Opera = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Opera.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Opera\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.954,2.046c-7.489,0-12.872,5.432-12.872,13.581c0,7.25,5.234,13.835,12.873,13.835c7.712,0,12.974-6.583,12.974-13.835C28.929,7.413,23.375,2.046,15.954,2.046zM15.952,26.548L15.952,26.548c-2.289,0-3.49-1.611-4.121-3.796c-0.284-1.037-0.458-2.185-0.563-3.341c-0.114-1.374-0.129-2.773-0.129-4.028c0-0.993,0.018-1.979,0.074-2.926c0.124-1.728,0.386-3.431,0.89-4.833c0.694-1.718,1.871-2.822,3.849-2.822c2.5,0,3.763,1.782,4.385,4.322c0.429,1.894,0.56,4.124,0.56,6.274c0,2.299-0.103,5.153-0.763,7.442C19.473,24.979,18.242,26.548,15.952,26.548z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Package();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Package = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Package.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Package\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M17.078,22.004l-1.758-4.129l-2.007,4.752l-7.519-3.289l0.174,3.905l9.437,4.374l10.909-5.365l-0.149-4.989L17.078,22.004zM29.454,6.619L18.521,3.383l-3.006,2.671l-3.091-2.359L1.546,8.199l3.795,3.048l-3.433,5.302l10.879,4.757l2.53-5.998l2.257,5.308l11.393-5.942l-3.105-4.709L29.454,6.619zM15.277,14.579l-9.059-3.83l9.275-4.101l9.608,3.255L15.277,14.579z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Page();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Page = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Page.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Page\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M23.024,5.673c-1.744-1.694-3.625-3.051-5.168-3.236c-0.084-0.012-0.171-0.019-0.263-0.021H7.438c-0.162,0-0.322,0.063-0.436,0.18C6.889,2.71,6.822,2.87,6.822,3.033v25.75c0,0.162,0.063,0.317,0.18,0.435c0.117,0.116,0.271,0.179,0.436,0.179h18.364c0.162,0,0.317-0.062,0.434-0.179c0.117-0.117,0.182-0.272,0.182-0.435V11.648C26.382,9.659,24.824,7.49,23.024,5.673zM25.184,28.164H8.052V3.646h9.542v0.002c0.416-0.025,0.775,0.386,1.05,1.326c0.25,0.895,0.313,2.062,0.312,2.871c0.002,0.593-0.027,0.991-0.027,0.991l-0.049,0.652l0.656,0.007c0.003,0,1.516,0.018,3,0.355c1.426,0.308,2.541,0.922,2.645,1.617c0.004,0.062,0.005,0.124,0.004,0.182V28.164z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Page2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Page2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Page2.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Page2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M23.024,5.673c-1.744-1.694-3.625-3.051-5.168-3.236c-0.084-0.012-0.171-0.019-0.263-0.021H7.438c-0.162,0-0.322,0.063-0.436,0.18C6.889,2.71,6.822,2.87,6.822,3.033v25.75c0,0.162,0.063,0.317,0.18,0.435c0.117,0.116,0.271,0.179,0.436,0.179h18.364c0.162,0,0.317-0.062,0.434-0.179c0.117-0.117,0.182-0.272,0.182-0.435V11.648C26.382,9.659,24.824,7.49,23.024,5.673zM22.157,6.545c0.805,0.786,1.529,1.676,2.069,2.534c-0.468-0.185-0.959-0.322-1.42-0.431c-1.015-0.228-2.008-0.32-2.625-0.357c0.003-0.133,0.004-0.283,0.004-0.446c0-0.869-0.055-2.108-0.356-3.2c-0.003-0.01-0.005-0.02-0.009-0.03C20.584,5.119,21.416,5.788,22.157,6.545zM25.184,28.164H8.052V3.646h9.542v0.002c0.416-0.025,0.775,0.386,1.05,1.326c0.25,0.895,0.313,2.062,0.312,2.871c0.002,0.593-0.027,0.991-0.027,0.991l-0.049,0.652l0.656,0.007c0.003,0,1.516,0.018,3,0.355c1.426,0.308,2.541,0.922,2.645,1.617c0.004,0.062,0.005,0.124,0.004,0.182V28.164z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Pallete();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Pallete = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Pallete.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Pallete\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.653,7.25c-3.417,0-8.577,0.983-8.577,3.282c0,1.91,2.704,3.229,1.691,3.889c-1.02,0.666-2.684-1.848-4.048-1.848c-1.653,0-2.815,1.434-2.815,2.926c0,4.558,6.326,8.25,13.749,8.25c7.424,0,13.443-3.692,13.443-8.25C29.096,10.944,23.077,7.25,15.653,7.25zM10.308,13.521c0-0.645,0.887-1.166,1.98-1.166c1.093,0,1.979,0.521,1.979,1.166c0,0.644-0.886,1.166-1.979,1.166C11.195,14.687,10.308,14.164,10.308,13.521zM14.289,22.299c-1.058,0-1.914-0.68-1.914-1.518s0.856-1.518,1.914-1.518c1.057,0,1.914,0.68,1.914,1.518S15.346,22.299,14.289,22.299zM19.611,21.771c-1.057,0-1.913-0.681-1.913-1.519c0-0.84,0.856-1.521,1.913-1.521c1.059,0,1.914,0.681,1.914,1.521C21.525,21.092,20.67,21.771,19.611,21.771zM20.075,10.66c0-0.838,0.856-1.518,1.914-1.518s1.913,0.68,1.913,1.518c0,0.839-0.855,1.518-1.913,1.518C20.934,12.178,20.075,11.499,20.075,10.66zM24.275,19.482c-1.057,0-1.914-0.681-1.914-1.519s0.857-1.518,1.914-1.518c1.059,0,1.914,0.68,1.914,1.518S25.334,19.482,24.275,19.482zM25.286,15.475c-1.058,0-1.914-0.68-1.914-1.519c0-0.838,0.856-1.518,1.914-1.518c1.057,0,1.913,0.68,1.913,1.518C27.199,14.795,26.343,15.475,25.286,15.475z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Palm();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Palm = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Palm.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Palm\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.296,27.885v-2.013c0,0-0.402-1.408-1.073-2.013c-0.671-0.604-1.274-1.274-1.409-1.61c0,0-0.268,0.135-0.737-0.335s-1.812-2.616-1.812-2.616l-0.671-0.872c0,0-0.47-0.671-1.275-1.342c-0.805-0.672-0.938-0.067-1.476-0.738s0.604-1.275,1.006-1.409c0.403-0.134,1.946,0.134,2.684,0.872c0.738,0.738,0.738,0.738,0.738,0.738l1.073,1.141l0.537,0.201l0.671-1.073l-0.269-2.281c0,0-0.604-2.55-0.737-4.764c-0.135-2.214-0.47-5.703,1.006-5.837s1.007,2.55,1.073,3.489c0.067,0.938,0.806,5.232,1.208,5.568c0.402,0.335,0.671,0.066,0.671,0.066l0.402-7.514c0,0-0.479-2.438,1.073-2.549c0.939-0.067,0.872,1.543,0.872,2.147c0,0.604,0.269,7.514,0.269,7.514l0.537,0.135c0,0,0.402-2.214,0.604-3.153s0.604-2.416,0.537-3.087c-0.067-0.671-0.135-2.348,1.006-2.348s0.872,1.812,0.939,2.415s-0.134,3.153-0.134,3.757c0,0.604-0.738,3.623-0.537,3.824s2.08-2.817,2.349-3.958c0.268-1.141,0.201-3.02,1.408-2.885c1.208,0.134,0.47,2.817,0.402,3.086c-0.066,0.269-0.671,2.349-0.872,2.952s-0.805,1.476-1.006,2.013s0.402,2.349,0,4.629c-0.402,2.281-1.61,5.166-1.61,5.166l0.604,2.08c0,0-1.744,0.671-3.824,0.805C16.443,28.221,14.296,27.885,14.296,27.885z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Paper();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Paper = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Paper.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Paper\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.916,8.009L15.953,1.888c-0.251-0.119-0.548-0.115-0.798,0.008c-0.25,0.125-0.433,0.357-0.491,0.629c-0.002,0.01-1.04,4.83-2.578,9.636c-0.526,1.646-1.114,3.274-1.728,4.704l1.665,0.786c2-4.643,3.584-11.052,4.181-13.614l11.264,5.316c-0.346,1.513-1.233,5.223-2.42,8.927c-0.767,2.399-1.665,4.797-2.585,6.532c-0.889,1.79-1.958,2.669-2.197,2.552c-1.419,0.03-2.418-1.262-3.09-2.918c-0.32-0.803-0.53-1.63-0.657-2.246c-0.127-0.618-0.166-1.006-0.168-1.006c-0.034-0.317-0.232-0.597-0.52-0.731l-12.962-6.12c-0.301-0.142-0.654-0.11-0.925,0.081c-0.27,0.193-0.416,0.518-0.38,0.847c0.008,0.045,0.195,1.848,0.947,3.736c0.521,1.321,1.406,2.818,2.845,3.575l12.956,6.131l0.006-0.013c0.562,0.295,1.201,0.487,1.947,0.496c1.797-0.117,2.777-1.668,3.818-3.525c3-5.69,5.32-16.602,5.338-16.642C29.512,8.615,29.302,8.19,28.916,8.009z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Parent();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Parent = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Parent.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Parent\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.423,12.17c-0.875,0.641-1.941,1.031-3.102,1.031c-1.164,0-2.231-0.391-3.104-1.031c-0.75,0.625-1.498,1.519-2.111,2.623c-1.422,2.563-1.578,5.192-0.35,5.874c0.549,0.312,1.127,0.078,1.723-0.496c-0.105,0.582-0.166,1.213-0.166,1.873c0,2.938,1.139,5.312,2.543,5.312c0.846,0,1.265-0.865,1.466-2.188c0.2,1.314,0.62,2.188,1.461,2.188c1.396,0,2.545-2.375,2.545-5.312c0-0.66-0.062-1.291-0.168-1.873c0.6,0.574,1.176,0.812,1.726,0.496c1.227-0.682,1.068-3.311-0.354-5.874C15.921,13.689,15.173,12.795,14.423,12.17zM11.32,12.201c2.361,0,4.277-1.916,4.277-4.279s-1.916-4.279-4.277-4.279c-2.363,0-4.28,1.916-4.28,4.279S8.957,12.201,11.32,12.201zM21.987,17.671c1.508,0,2.732-1.225,2.732-2.735c0-1.51-1.225-2.735-2.732-2.735c-1.511,0-2.736,1.225-2.736,2.735C19.251,16.446,20.477,17.671,21.987,17.671zM25.318,19.327c-0.391-0.705-0.869-1.277-1.349-1.677c-0.56,0.41-1.24,0.659-1.982,0.659c-0.744,0-1.426-0.25-1.983-0.659c-0.479,0.399-0.958,0.972-1.35,1.677c-0.909,1.638-1.009,3.318-0.224,3.754c0.351,0.2,0.721,0.05,1.101-0.317c-0.067,0.372-0.105,0.775-0.105,1.197c0,1.878,0.728,3.396,1.625,3.396c0.54,0,0.808-0.553,0.937-1.398c0.128,0.841,0.396,1.398,0.934,1.398c0.893,0,1.627-1.518,1.627-3.396c0-0.422-0.04-0.825-0.107-1.197c0.383,0.367,0.752,0.52,1.104,0.317C26.328,22.646,26.227,20.965,25.318,19.327z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Pc();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Pc = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Pc.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Pc\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M29.249,3.14h-9.188l-0.459,0.459v18.225l0.33,2.389H19.57v0.245h-0.307v-0.306h-0.611v0.244h-0.311v-0.367h-0.486v0.307h-1.104l-2.022-0.367v-0.92h0.858l0.302-1.47h2.728c0.188,0,0.339-0.152,0.339-0.339V7.828c0-0.187-0.149-0.338-0.339-0.338H1.591c-0.187,0-0.339,0.152-0.339,0.338V21.24c0,0.187,0.152,0.339,0.339,0.339h3.016l0.199,1.47h1.409l-3.4,3.4L2.11,27.951c0,0,2.941,1.102,6.678,1.102c3.737,0,9.679-0.857,10.476-0.857s4.84,0,4.84,0v-1.225l-0.137-1.068h1.744c-0.2,0.106-0.322,0.244-0.322,0.396v0.979c0,0.341,0.604,0.613,1.352,0.613c0.742,0,1.348-0.272,1.348-0.613v-0.979c0-0.339-0.604-0.611-1.348-0.611c-0.188,0-0.364,0.019-0.525,0.049v-0.17h-2.29l-0.055-0.432h5.382L29.249,3.14L29.249,3.14zM2.478,20.17V8.714h15.07V20.17H2.478z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Pen();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Pen = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Pen.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Pen\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M13.587,12.074c-0.049-0.074-0.11-0.147-0.188-0.202c-0.333-0.243-0.803-0.169-1.047,0.166c-0.244,0.336-0.167,0.805,0.167,1.048c0.303,0.22,0.708,0.167,0.966-0.091l-7.086,9.768l-2.203,7.997l6.917-4.577L26.865,4.468l-4.716-3.42l-1.52,2.096c-0.087-0.349-0.281-0.676-0.596-0.907c-0.73-0.529-1.751-0.369-2.28,0.363C14.721,6.782,16.402,7.896,13.587,12.074zM10.118,25.148L6.56,27.503l1.133-4.117L10.118,25.148zM14.309,11.861c2.183-3.225,1.975-4.099,3.843-6.962c0.309,0.212,0.664,0.287,1.012,0.269L14.309,11.861z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Pensil();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Pensil = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Pensil.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Pensil\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.31,2.872l-3.384-2.127c-0.854-0.536-1.979-0.278-2.517,0.576l-1.334,2.123l6.474,4.066l1.335-2.122C26.42,4.533,26.164,3.407,25.31,2.872zM6.555,21.786l6.474,4.066L23.581,9.054l-6.477-4.067L6.555,21.786zM5.566,26.952l-0.143,3.819l3.379-1.787l3.14-1.658l-6.246-3.925L5.566,26.952z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.People();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.People = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.People.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.People\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.066,20.667c1.227-0.682,1.068-3.311-0.354-5.874c-0.611-1.104-1.359-1.998-2.109-2.623c-0.875,0.641-1.941,1.031-3.102,1.031c-1.164,0-2.231-0.391-3.104-1.031c-0.75,0.625-1.498,1.519-2.111,2.623c-1.422,2.563-1.578,5.192-0.35,5.874c0.549,0.312,1.127,0.078,1.723-0.496c-0.105,0.582-0.166,1.213-0.166,1.873c0,2.938,1.139,5.312,2.543,5.312c0.846,0,1.265-0.865,1.466-2.188c0.2,1.314,0.62,2.188,1.461,2.188c1.396,0,2.545-2.375,2.545-5.312c0-0.66-0.062-1.291-0.168-1.873C19.939,20.745,20.516,20.983,21.066,20.667zM15.5,12.201c2.361,0,4.277-1.916,4.277-4.279S17.861,3.644,15.5,3.644c-2.363,0-4.28,1.916-4.28,4.279S13.137,12.201,15.5,12.201zM24.094,14.914c1.938,0,3.512-1.573,3.512-3.513c0-1.939-1.573-3.513-3.512-3.513c-1.94,0-3.513,1.573-3.513,3.513C20.581,13.341,22.153,14.914,24.094,14.914zM28.374,17.043c-0.502-0.907-1.116-1.641-1.732-2.154c-0.718,0.526-1.594,0.846-2.546,0.846c-0.756,0-1.459-0.207-2.076-0.55c0.496,1.093,0.803,2.2,0.861,3.19c0.093,1.516-0.381,2.641-1.329,3.165c-0.204,0.117-0.426,0.183-0.653,0.224c-0.056,0.392-0.095,0.801-0.095,1.231c0,2.412,0.935,4.361,2.088,4.361c0.694,0,1.039-0.71,1.204-1.796c0.163,1.079,0.508,1.796,1.199,1.796c1.146,0,2.09-1.95,2.09-4.361c0-0.542-0.052-1.06-0.139-1.538c0.492,0.472,0.966,0.667,1.418,0.407C29.671,21.305,29.541,19.146,28.374,17.043zM6.906,14.914c1.939,0,3.512-1.573,3.512-3.513c0-1.939-1.573-3.513-3.512-3.513c-1.94,0-3.514,1.573-3.514,3.513C3.392,13.341,4.966,14.914,6.906,14.914zM9.441,21.536c-1.593-0.885-1.739-3.524-0.457-6.354c-0.619,0.346-1.322,0.553-2.078,0.553c-0.956,0-1.832-0.321-2.549-0.846c-0.616,0.513-1.229,1.247-1.733,2.154c-1.167,2.104-1.295,4.262-0.287,4.821c0.451,0.257,0.925,0.064,1.414-0.407c-0.086,0.479-0.136,0.996-0.136,1.538c0,2.412,0.935,4.361,2.088,4.361c0.694,0,1.039-0.71,1.204-1.796c0.165,1.079,0.509,1.796,1.201,1.796c1.146,0,2.089-1.95,2.089-4.361c0-0.432-0.04-0.841-0.097-1.233C9.874,21.721,9.651,21.656,9.441,21.536z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Phone();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Phone = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Phone.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Phone\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M22.065,18.53c-0.467-0.29-1.167-0.21-1.556,0.179l-3.093,3.092c-0.389,0.389-1.025,0.389-1.414,0L9.05,14.848c-0.389-0.389-0.389-1.025,0-1.414l2.913-2.912c0.389-0.389,0.447-1.075,0.131-1.524L6.792,1.485C6.476,1.036,5.863,0.948,5.433,1.29c0,0-4.134,3.281-4.134,6.295c0,12.335,10,22.334,22.334,22.334c3.015,0,5.948-5.533,5.948-5.533c0.258-0.486,0.087-1.122-0.38-1.412L22.065,18.53z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Photo();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Photo = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Photo.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Photo\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.25,10.25H20.5v-1.5h-9.375v1.5h-3.75c-1.104,0-2,0.896-2,2v10.375c0,1.104,0.896,2,2,2H24.25c1.104,0,2-0.896,2-2V12.25C26.25,11.146,25.354,10.25,24.25,10.25zM15.812,23.499c-3.342,0-6.06-2.719-6.06-6.061c0-3.342,2.718-6.062,6.06-6.062s6.062,2.72,6.062,6.062C21.874,20.78,19.153,23.499,15.812,23.499zM15.812,13.375c-2.244,0-4.062,1.819-4.062,4.062c0,2.244,1.819,4.062,4.062,4.062c2.244,0,4.062-1.818,4.062-4.062C19.875,15.194,18.057,13.375,15.812,13.375z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Picker();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Picker = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Picker.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Picker\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M22.221,10.853c-0.111-0.414-0.261-0.412,0.221-1.539l1.66-3.519c0.021-0.051,0.2-0.412,0.192-0.946c0.015-0.529-0.313-1.289-1.119-1.642c-1.172-0.555-1.17-0.557-2.344-1.107c-0.784-0.396-1.581-0.171-1.979,0.179c-0.42,0.333-0.584,0.7-0.609,0.75L16.58,6.545c-0.564,1.084-0.655,0.97-1.048,1.147c-0.469,0.129-1.244,0.558-1.785,1.815c-1.108,2.346-1.108,2.346-1.108,2.346l-0.276,0.586l1.17,0.553l-3.599,7.623c-0.38,0.828-0.166,1.436-0.166,2.032c0.01,0.627-0.077,1.509-0.876,3.21l-0.276,0.586l3.517,1.661l0.276-0.585c0.808-1.699,1.431-2.326,1.922-2.717c0.46-0.381,1.066-0.6,1.465-1.42l3.599-7.618l1.172,0.554l0.279-0.589c0,0,0,0,1.105-2.345C22.578,12.166,22.419,11.301,22.221,10.853zM14.623,22.83c-0.156,0.353-0.413,0.439-1.091,0.955c-0.577,0.448-1.264,1.172-2.009,2.6l-1.191-0.562c0.628-1.48,0.75-2.474,0.73-3.203c-0.031-0.851-0.128-1.104,0.045-1.449l3.599-7.621l3.517,1.662L14.623,22.83z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Picture();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Picture = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Picture.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Picture\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M2.5,4.833v22.334h27V4.833H2.5zM25.25,25.25H6.75V6.75h18.5V25.25zM11.25,14c1.426,0,2.583-1.157,2.583-2.583c0-1.427-1.157-2.583-2.583-2.583c-1.427,0-2.583,1.157-2.583,2.583C8.667,12.843,9.823,14,11.25,14zM24.251,16.25l-4.917-4.917l-6.917,6.917L10.5,16.333l-2.752,2.752v5.165h16.503V16.25z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.PieChart();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.PieChart = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.PieChart.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.PieChart\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.583,15.917l1.648-10.779C16.692,5.056,16.145,5,15.583,5C9.554,5,4.666,9.888,4.666,15.917c0,6.029,4.888,10.917,10.917,10.917S26.5,21.946,26.5,15.917c0-0.256-0.021-0.507-0.038-0.759L15.583,15.917zM19.437,3.127l-1.648,10.779l10.879-0.759C28.313,8.026,24.436,3.886,19.437,3.127z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Plane();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Plane = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Plane.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Plane\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M19.671,8.11l-2.777,2.777l-3.837-0.861c0.362-0.505,0.916-1.683,0.464-2.135c-0.518-0.517-1.979,0.278-2.305,0.604l-0.913,0.913L7.614,8.804l-2.021,2.021l2.232,1.061l-0.082,0.082l1.701,1.701l0.688-0.687l3.164,1.504L9.571,18.21H6.413l-1.137,1.138l3.6,0.948l1.83,1.83l0.947,3.598l1.137-1.137V21.43l3.725-3.725l1.504,3.164l-0.687,0.687l1.702,1.701l0.081-0.081l1.062,2.231l2.02-2.02l-0.604-2.689l0.912-0.912c0.326-0.326,1.121-1.789,0.604-2.306c-0.452-0.452-1.63,0.101-2.135,0.464l-0.861-3.838l2.777-2.777c0.947-0.947,3.599-4.862,2.62-5.839C24.533,4.512,20.618,7.163,19.671,8.11z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Plugin();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Plugin = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Plugin.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Plugin\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M26.33,15.836l-3.893-1.545l3.136-7.9c0.28-0.705-0.064-1.505-0.771-1.785c-0.707-0.28-1.506,0.065-1.785,0.771l-3.136,7.9l-4.88-1.937l3.135-7.9c0.281-0.706-0.064-1.506-0.77-1.786c-0.706-0.279-1.506,0.065-1.785,0.771l-3.136,7.9L8.554,8.781l-1.614,4.066l2.15,0.854l-2.537,6.391c-0.61,1.54,0.143,3.283,1.683,3.895l1.626,0.646L8.985,26.84c-0.407,1.025,0.095,2.188,1.122,2.596l0.93,0.369c1.026,0.408,2.188-0.095,2.596-1.121l0.877-2.207l1.858,0.737c1.54,0.611,3.284-0.142,3.896-1.682l2.535-6.391l1.918,0.761L26.33,15.836z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Plus();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Plus = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Plus.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Plus\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.979,12.896 19.312,12.896 19.312,6.229 12.647,6.229 12.647,12.896 5.979,12.896 5.979,19.562 12.647,19.562 12.647,26.229 19.312,26.229 19.312,19.562 25.979,19.562z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Power();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Power = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Power.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Power\",\n\n  /**\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.542,8.354c-1.47-1.766-2.896-2.617-3.025-2.695c-0.954-0.565-2.181-0.241-2.739,0.724c-0.556,0.961-0.24,2.194,0.705,2.763c0,0,0.001,0,0.002,0.001c0.001,0,0.002,0.001,0.003,0.002c0.001,0,0.003,0.001,0.004,0.001c0.102,0.062,1.124,0.729,2.08,1.925c1.003,1.261,1.933,3.017,1.937,5.438c-0.001,2.519-1.005,4.783-2.64,6.438c-1.637,1.652-3.877,2.668-6.368,2.669c-2.491-0.001-4.731-1.017-6.369-2.669c-1.635-1.654-2.639-3.919-2.64-6.438c0.005-2.499,0.995-4.292,2.035-5.558c0.517-0.625,1.043-1.098,1.425-1.401c0.191-0.152,0.346-0.263,0.445-0.329c0.049-0.034,0.085-0.058,0.104-0.069c0.005-0.004,0.009-0.006,0.012-0.008s0.004-0.002,0.004-0.002l0,0c0.946-0.567,1.262-1.802,0.705-2.763c-0.559-0.965-1.785-1.288-2.739-0.724c-0.128,0.079-1.555,0.93-3.024,2.696c-1.462,1.751-2.974,4.511-2.97,8.157C2.49,23.775,8.315,29.664,15.5,29.667c7.186-0.003,13.01-5.892,13.012-13.155C28.516,12.864,27.005,10.105,25.542,8.354zM15.5,17.523c1.105,0,2.002-0.907,2.002-2.023h-0.001V3.357c0-1.118-0.896-2.024-2.001-2.024s-2.002,0.906-2.002,2.024V15.5C13.498,16.616,14.395,17.523,15.5,17.523z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Ppt();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Ppt = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Ppt.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Ppt\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16.604,1.914c0-0.575-0.466-1.041-1.041-1.041s-1.041,0.466-1.041,1.041v1.04h2.082V1.914zM16.604,22.717h-2.082v3.207c0,0.574-4.225,4.031-4.225,4.031l2.468-0.003l2.807-2.673l3.013,2.693l2.272-0.039l-4.254-4.011V22.717L16.604,22.717zM28.566,7.113c0.86,0,1.56-0.698,1.56-1.56c0-0.861-0.698-1.56-1.56-1.56H2.561c-0.861,0-1.56,0.699-1.56,1.56c0,0.862,0.699,1.56,1.56,1.56h1.583v12.505l-0.932-0.022c-0.861,0-1.213,0.467-1.213,1.04c0,0.576,0.352,1.041,1.213,1.041h24.597c0.86,0,1.299-0.465,1.299-1.041c0-1.094-1.299-1.04-1.299-1.04l-0.804,0.109V7.113H28.566zM11.435,17.516c-3.771,0-4.194-4.191-4.194-4.191c0-4.096,4.162-4.161,4.162-4.161v4.161h4.193C15.596,17.516,11.435,17.516,11.435,17.516zM18.716,13.388h-1.071v-1.073h1.071V13.388zM18.716,10.267h-1.071V9.194h1.071V10.267zM23.314,13.388H20.26c-0.296,0-0.535-0.24-0.535-0.536c0-0.297,0.239-0.537,0.535-0.537h3.057c0.297,0,0.535,0.24,0.535,0.537C23.852,13.147,23.611,13.388,23.314,13.388zM23.314,10.267H20.26c-0.296,0-0.535-0.239-0.535-0.535c0-0.297,0.239-0.537,0.535-0.537h3.057c0.297,0,0.535,0.24,0.535,0.537C23.852,10.027,23.611,10.267,23.314,10.267z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Printer();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Printer = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Printer.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Printer\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.569,12.125h-2.12c-0.207-1.34-1.247-2.759-2.444-3.967c-1.277-1.24-2.654-2.234-3.784-2.37c-0.062-0.008-0.124-0.014-0.198-0.015H8.594c-0.119,0-0.235,0.047-0.319,0.132c-0.083,0.083-0.132,0.2-0.132,0.32v5.9H6.069c-1.104,0-2,0.896-2,2V23h4.074v2.079c0,0.118,0.046,0.23,0.132,0.318c0.086,0.085,0.199,0.131,0.319,0.131h13.445c0.118,0,0.232-0.046,0.318-0.131s0.138-0.199,0.138-0.318V23h4.074v-8.875C26.569,13.021,25.674,12.125,24.569,12.125zM21.589,24.626H9.043V21.5h12.546V24.626zM21.589,13.921c0-0.03,0-0.063-0.003-0.096c-0.015-0.068-0.062-0.135-0.124-0.2H9.043v-6.95h6.987v0.001c0.305-0.019,0.567,0.282,0.769,0.971c0.183,0.655,0.229,1.509,0.229,2.102c0.001,0.433-0.019,0.725-0.019,0.725l-0.037,0.478l0.48,0.005c0.002,0,1.109,0.014,2.196,0.26c1.044,0.226,1.86,0.675,1.938,1.184c0.003,0.045,0.003,0.091,0.003,0.133V13.921z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Quote();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Quote = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Quote.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Quote\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.505,5.873c-3.937,2.52-5.904,5.556-5.904,9.108c0,1.104,0.192,1.656,0.576,1.656l0.396-0.107c0.312-0.12,0.563-0.18,0.756-0.18c1.128,0,2.07,0.411,2.826,1.229c0.756,0.82,1.134,1.832,1.134,3.037c0,1.157-0.408,2.14-1.224,2.947c-0.816,0.807-1.801,1.211-2.952,1.211c-1.608,0-2.935-0.661-3.979-1.984c-1.044-1.321-1.565-2.98-1.565-4.977c0-2.259,0.443-4.327,1.332-6.203c0.888-1.875,2.243-3.57,4.067-5.085c1.824-1.514,2.988-2.272,3.492-2.272c0.336,0,0.612,0.162,0.828,0.486c0.216,0.324,0.324,0.606,0.324,0.846L14.505,5.873zM27.465,5.873c-3.937,2.52-5.904,5.556-5.904,9.108c0,1.104,0.192,1.656,0.576,1.656l0.396-0.107c0.312-0.12,0.563-0.18,0.756-0.18c1.104,0,2.04,0.411,2.808,1.229c0.769,0.82,1.152,1.832,1.152,3.037c0,1.157-0.408,2.14-1.224,2.947c-0.816,0.807-1.801,1.211-2.952,1.211c-1.608,0-2.935-0.661-3.979-1.984c-1.044-1.321-1.565-2.98-1.565-4.977c0-2.284,0.449-4.369,1.35-6.256c0.9-1.887,2.256-3.577,4.068-5.067c1.812-1.49,2.97-2.236,3.474-2.236c0.336,0,0.612,0.162,0.828,0.486c0.216,0.324,0.324,0.606,0.324,0.846L27.465,5.873z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Rain();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Rain = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Rain.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Rain\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.371,7.306c-0.092-3.924-3.301-7.077-7.248-7.079c-2.638,0.001-4.942,1.412-6.208,3.517c-0.595-0.327-1.28-0.517-2.01-0.517C7.626,3.229,5.772,5.033,5.689,7.293c-2.393,0.786-4.125,3.025-4.127,5.686c0,3.312,2.687,6,6,6v-0.002h15.874c3.312,0,6-2.688,6-6C29.434,10.34,27.732,8.11,25.371,7.306zM23.436,16.979H7.561c-2.209-0.006-3.997-1.792-4.001-4.001c-0.002-1.982,1.45-3.618,3.35-3.931c0.265-0.043,0.502-0.191,0.657-0.414C7.722,8.41,7.779,8.136,7.73,7.87C7.702,7.722,7.685,7.582,7.685,7.446C7.689,6.221,8.68,5.23,9.905,5.228c0.647,0,1.217,0.278,1.633,0.731c0.233,0.257,0.587,0.375,0.927,0.309c0.342-0.066,0.626-0.307,0.748-0.63c0.749-1.992,2.662-3.412,4.911-3.41c2.899,0.004,5.244,2.35,5.251,5.249c0,0.161-0.009,0.326-0.027,0.497c-0.049,0.517,0.305,0.984,0.815,1.079c1.86,0.344,3.274,1.966,3.271,3.923C27.43,15.186,25.645,16.973,23.436,16.979zM9.029,26.682c0-1.115,0.021-5.425,0.021-5.432c0.002-0.409-0.247-0.779-0.628-0.932c-0.38-0.152-0.815-0.059-1.099,0.24c-0.006,0.008-1.037,1.098-2.081,2.342c-0.523,0.627-1.048,1.287-1.463,1.896c-0.399,0.648-0.753,1.066-0.811,1.885C2.971,28.355,4.324,29.711,6,29.714C7.672,29.71,9.029,28.354,9.029,26.682zM4.971,26.727c0.091-0.349,1.081-1.719,1.993-2.764c0.025-0.029,0.051-0.061,0.076-0.089c-0.005,1.124-0.01,2.294-0.01,2.808c0,0.567-0.461,1.028-1.029,1.03C5.447,27.71,4.997,27.273,4.971,26.727zM16.425,26.682c0-1.115,0.021-5.424,0.021-5.43c0.002-0.41-0.247-0.779-0.628-0.934c-0.381-0.152-0.814-0.058-1.1,0.242c-0.006,0.008-1.035,1.094-2.08,2.342c-0.522,0.623-1.047,1.285-1.463,1.894c-0.399,0.649-0.753,1.068-0.809,1.888c0,1.672,1.354,3.028,3.029,3.028C15.068,29.711,16.425,28.354,16.425,26.682zM12.365,26.729c0.092-0.349,1.081-1.72,1.993-2.765c0.025-0.03,0.05-0.06,0.075-0.089c-0.005,1.123-0.011,2.294-0.011,2.807c-0.002,0.568-0.461,1.027-1.028,1.029C12.84,27.709,12.392,27.273,12.365,26.729zM23.271,20.317c-0.38-0.153-0.816-0.06-1.099,0.24c-0.009,0.008-1.037,1.097-2.08,2.342c-0.523,0.625-1.049,1.285-1.462,1.896c-0.402,0.649-0.754,1.067-0.812,1.886c0,1.672,1.354,3.029,3.03,3.029c1.673,0,3.027-1.357,3.027-3.029c0-1.115,0.022-5.425,0.022-5.431C23.9,20.84,23.651,20.47,23.271,20.317zM21.879,26.681c-0.004,0.568-0.463,1.027-1.031,1.029c-0.553-0.002-1.002-0.438-1.028-0.982c0.092-0.349,1.081-1.72,1.993-2.765c0.025-0.028,0.05-0.059,0.074-0.088C21.883,24.998,21.879,26.167,21.879,26.681z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Raphael();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Raphael = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Raphael.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Raphael\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M27.777,18.941c0.584-0.881,0.896-1.914,0.896-2.998c0-1.457-0.567-2.826-1.598-3.854l-6.91-6.911l-0.003,0.002c-0.985-0.988-2.35-1.6-3.851-1.6c-1.502,0-2.864,0.612-3.85,1.6H12.46l-6.911,6.911c-1.031,1.029-1.598,2.398-1.598,3.854c0,1.457,0.567,2.826,1.598,3.854l6.231,6.229c0.25,0.281,0.512,0.544,0.789,0.785c1.016,0.961,2.338,1.49,3.743,1.49c1.456,0,2.825-0.565,3.854-1.598l6.723-6.725c0.021-0.019,0.034-0.032,0.051-0.051l0.14-0.138c0.26-0.26,0.487-0.54,0.688-0.838c0.004-0.008,0.01-0.015,0.014-0.021L27.777,18.941zM26.658,15.946c0,0.678-0.197,1.326-0.561,1.879c-0.222,0.298-0.447,0.559-0.684,0.784L25.4,18.625c-1.105,1.052-2.354,1.35-3.414,1.35c-0.584,0-1.109-0.09-1.523-0.195c-2.422-0.608-5.056-2.692-6.261-5.732c0.649,0.274,1.362,0.426,2.11,0.426c2.811,0,5.129-2.141,5.415-4.877l3.924,3.925C26.301,14.167,26.658,15.029,26.658,15.946zM16.312,5.6c1.89,0,3.426,1.538,3.426,3.427c0,1.89-1.536,3.427-3.426,3.427c-1.889,0-3.426-1.537-3.426-3.427C12.886,7.138,14.423,5.6,16.312,5.6zM6.974,18.375c-0.649-0.648-1.007-1.512-1.007-2.429c0-0.917,0.357-1.78,1.007-2.428l2.655-2.656c-0.693,2.359-0.991,4.842-0.831,7.221c0.057,0.854,0.175,1.677,0.345,2.46L6.974,18.375zM11.514,11.592c0.583,4.562,4.195,9.066,8.455,10.143c0.693,0.179,1.375,0.265,2.033,0.265c0.01,0,0.02,0,0.027,0l-3.289,3.289c-0.648,0.646-1.512,1.006-2.428,1.006c-0.638,0-1.248-0.177-1.779-0.5l0.001-0.002c-0.209-0.142-0.408-0.295-0.603-0.461c-0.015-0.019-0.031-0.026-0.046-0.043l-0.665-0.664c-1.367-1.567-2.227-3.903-2.412-6.671C10.669,15.856,10.921,13.673,11.514,11.592\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ReflectH();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ReflectH = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ReflectH.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.ReflectH\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.57,20.273h0.854v-1.705H15.57V20.273zM15.57,23.686h0.854V21.98H15.57V23.686zM15.57,27.096h0.854v-1.705H15.57V27.096zM15.57,29.689h0.854V28.8H15.57V29.689zM15.57,16.865h0.854V15.16H15.57V16.865zM15.57,3.225h0.854V1.52H15.57V3.225zM15.57,6.635h0.854V4.93H15.57V6.635zM15.57,10.045h0.854V8.34H15.57V10.045zM15.57,13.455h0.854V11.75H15.57V13.455zM18.41,3.327V25.46h12.015L18.41,3.327zM19.264,6.68l9.729,17.93h-9.729V6.68zM13.535,25.46V3.327L1.521,25.46H13.535z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ReflectV();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ReflectV = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ReflectV.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.ReflectV\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M20.643,16.008v-0.854h-1.705v0.854H20.643zM24.053,16.008v-0.854h-1.705v0.854H24.053zM27.463,16.008v-0.854h-1.705v0.854H27.463zM30.059,16.008v-0.854h-0.891v0.854H30.059zM17.232,16.008v-0.854h-1.709v0.854H17.232zM3.593,16.008v-0.854H1.888v0.854H3.593zM7.003,16.008v-0.854H5.298v0.854H7.003zM10.414,16.008v-0.854H8.709v0.854H10.414zM13.824,16.008v-0.854h-1.705v0.854H13.824zM3.694,13.167h22.134V1.152L3.694,13.167zM7.048,12.314l17.929-9.729v9.729H7.048zM25.828,18.042H3.694l22.134,12.015V18.042z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Refresh();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Refresh = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Refresh.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Refresh\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.083,15.5c-0.009,4.739-3.844,8.574-8.583,8.583c-4.741-0.009-8.577-3.844-8.585-8.583c0.008-4.741,3.844-8.577,8.585-8.585c1.913,0,3.665,0.629,5.09,1.686l-1.782,1.783l8.429,2.256l-2.26-8.427l-1.89,1.89c-2.072-1.677-4.717-2.688-7.587-2.688C8.826,3.418,3.418,8.826,3.416,15.5C3.418,22.175,8.826,27.583,15.5,27.583S27.583,22.175,27.583,15.5H24.083z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Resize2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Resize2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Resize2.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Resize2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M1.999,2.332v26.499H28.5V2.332H1.999zM26.499,26.832H4V12.5h8.167V4.332h14.332V26.832zM15.631,17.649l5.468,5.469l-1.208,1.206l5.482,1.469l-1.47-5.481l-1.195,1.195l-5.467-5.466l1.209-1.208l-5.482-1.469l1.468,5.48L15.631,17.649z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Rotate();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Rotate = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Rotate.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Rotate\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.5,5.27c1.914,0,3.666,0.629,5.089,1.686l-1.781,1.783l8.428,2.256l-2.26-8.427l-1.889,1.89C21.016,2.781,18.371,1.77,15.5,1.77C8.827,1.773,3.418,7.181,3.417,13.855c0.001,4.063,2.012,7.647,5.084,9.838v-4.887c-0.993-1.4-1.583-3.105-1.585-4.952C6.923,9.114,10.759,5.278,15.5,5.27zM9.5,29.23h12V12.355h-12V29.23z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Ruler();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Ruler = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Ruler.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Ruler\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M6.63,21.796l-5.122,5.121h25.743V1.175L6.63,21.796zM18.702,10.48c0.186-0.183,0.48-0.183,0.664,0l1.16,1.159c0.184,0.183,0.186,0.48,0.002,0.663c-0.092,0.091-0.213,0.137-0.332,0.137c-0.121,0-0.24-0.046-0.33-0.137l-1.164-1.159C18.519,10.96,18.519,10.664,18.702,10.48zM17.101,12.084c0.184-0.183,0.48-0.183,0.662,0l2.156,2.154c0.184,0.183,0.184,0.48,0.002,0.661c-0.092,0.092-0.213,0.139-0.334,0.139s-0.24-0.046-0.33-0.137l-2.156-2.154C16.917,12.564,16.917,12.267,17.101,12.084zM15.497,13.685c0.184-0.183,0.48-0.183,0.664,0l1.16,1.161c0.184,0.183,0.182,0.48-0.002,0.663c-0.092,0.092-0.211,0.138-0.33,0.138c-0.121,0-0.24-0.046-0.332-0.138l-1.16-1.16C15.314,14.166,15.314,13.868,15.497,13.685zM13.896,15.288c0.184-0.183,0.48-0.181,0.664,0.002l1.158,1.159c0.183,0.184,0.183,0.48,0,0.663c-0.092,0.092-0.212,0.138-0.332,0.138c-0.119,0-0.24-0.046-0.332-0.138l-1.158-1.161C13.713,15.767,13.713,15.471,13.896,15.288zM12.293,16.892c0.183-0.184,0.479-0.184,0.663,0l2.154,2.153c0.184,0.184,0.184,0.481,0,0.665c-0.092,0.092-0.211,0.138-0.33,0.138c-0.121,0-0.242-0.046-0.334-0.138l-2.153-2.155C12.11,17.371,12.11,17.075,12.293,16.892zM10.302,24.515c-0.091,0.093-0.212,0.139-0.332,0.139c-0.119,0-0.238-0.045-0.33-0.137l-2.154-2.153c-0.184-0.183-0.184-0.479,0-0.663s0.479-0.184,0.662,0l2.154,2.153C10.485,24.036,10.485,24.332,10.302,24.515zM10.912,21.918c-0.093,0.093-0.214,0.139-0.333,0.139c-0.12,0-0.24-0.045-0.33-0.137l-1.162-1.161c-0.184-0.183-0.184-0.479,0-0.66c0.184-0.185,0.48-0.187,0.664-0.003l1.161,1.162C11.095,21.438,11.095,21.735,10.912,21.918zM12.513,20.316c-0.092,0.092-0.211,0.138-0.332,0.138c-0.119,0-0.239-0.046-0.331-0.138l-1.159-1.16c-0.184-0.184-0.184-0.48,0-0.664s0.48-0.182,0.663,0.002l1.159,1.161C12.696,19.838,12.696,20.135,12.513,20.316zM22.25,21.917h-8.67l8.67-8.67V21.917zM22.13,10.7c-0.09,0.092-0.211,0.138-0.33,0.138c-0.121,0-0.242-0.046-0.334-0.138l-1.16-1.159c-0.184-0.183-0.184-0.479,0-0.663c0.182-0.183,0.479-0.183,0.662,0l1.16,1.159C22.312,10.221,22.313,10.517,22.13,10.7zM24.726,10.092c-0.092,0.092-0.213,0.137-0.332,0.137s-0.24-0.045-0.33-0.137l-2.154-2.154c-0.184-0.183-0.184-0.481,0-0.664s0.482-0.181,0.664,0.002l2.154,2.154C24.911,9.613,24.909,9.91,24.726,10.092z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Run();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Run = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Run.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Run\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M17.41,20.395l-0.778-2.723c0.228-0.2,0.442-0.414,0.644-0.643l2.721,0.778c0.287-0.418,0.534-0.862,0.755-1.323l-2.025-1.96c0.097-0.288,0.181-0.581,0.241-0.883l2.729-0.684c0.02-0.252,0.039-0.505,0.039-0.763s-0.02-0.51-0.039-0.762l-2.729-0.684c-0.061-0.302-0.145-0.595-0.241-0.883l2.026-1.96c-0.222-0.46-0.469-0.905-0.756-1.323l-2.721,0.777c-0.201-0.228-0.416-0.442-0.644-0.643l0.778-2.722c-0.418-0.286-0.863-0.534-1.324-0.755l-1.96,2.026c-0.287-0.097-0.581-0.18-0.883-0.241l-0.683-2.73c-0.253-0.019-0.505-0.039-0.763-0.039s-0.51,0.02-0.762,0.039l-0.684,2.73c-0.302,0.061-0.595,0.144-0.883,0.241l-1.96-2.026C7.048,3.463,6.604,3.71,6.186,3.997l0.778,2.722C6.736,6.919,6.521,7.134,6.321,7.361L3.599,6.583C3.312,7.001,3.065,7.446,2.844,7.907l2.026,1.96c-0.096,0.288-0.18,0.581-0.241,0.883l-2.73,0.684c-0.019,0.252-0.039,0.505-0.039,0.762s0.02,0.51,0.039,0.763l2.73,0.684c0.061,0.302,0.145,0.595,0.241,0.883l-2.026,1.96c0.221,0.46,0.468,0.905,0.755,1.323l2.722-0.778c0.2,0.229,0.415,0.442,0.643,0.643l-0.778,2.723c0.418,0.286,0.863,0.533,1.323,0.755l1.96-2.026c0.288,0.097,0.581,0.181,0.883,0.241l0.684,2.729c0.252,0.02,0.505,0.039,0.763,0.039s0.51-0.02,0.763-0.039l0.683-2.729c0.302-0.061,0.596-0.145,0.883-0.241l1.96,2.026C16.547,20.928,16.992,20.681,17.41,20.395zM11.798,15.594c-1.877,0-3.399-1.522-3.399-3.399s1.522-3.398,3.399-3.398s3.398,1.521,3.398,3.398S13.675,15.594,11.798,15.594zM27.29,22.699c0.019-0.547-0.06-1.104-0.23-1.654l1.244-1.773c-0.188-0.35-0.4-0.682-0.641-0.984l-2.122,0.445c-0.428-0.364-0.915-0.648-1.436-0.851l-0.611-2.079c-0.386-0.068-0.777-0.105-1.173-0.106l-0.974,1.936c-0.279,0.054-0.558,0.128-0.832,0.233c-0.257,0.098-0.497,0.22-0.727,0.353L17.782,17.4c-0.297,0.262-0.568,0.545-0.813,0.852l0.907,1.968c-0.259,0.495-0.437,1.028-0.519,1.585l-1.891,1.06c0.019,0.388,0.076,0.776,0.164,1.165l2.104,0.519c0.231,0.524,0.541,0.993,0.916,1.393l-0.352,2.138c0.32,0.23,0.66,0.428,1.013,0.6l1.715-1.32c0.536,0.141,1.097,0.195,1.662,0.15l1.452,1.607c0.2-0.057,0.399-0.118,0.596-0.193c0.175-0.066,0.34-0.144,0.505-0.223l0.037-2.165c0.455-0.339,0.843-0.747,1.152-1.206l2.161-0.134c0.152-0.359,0.279-0.732,0.368-1.115L27.29,22.699zM23.127,24.706c-1.201,0.458-2.545-0.144-3.004-1.345s0.143-2.546,1.344-3.005c1.201-0.458,2.547,0.144,3.006,1.345C24.931,22.902,24.328,24.247,23.127,24.706z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Rw();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Rw = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Rw.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Rw\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M5.5,15.499,15.8,21.447,15.8,15.846,25.5,21.447,25.5,9.552,15.8,15.152,15.8,9.552z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Safari();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Safari = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Safari.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Safari\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16.154,5.135c-0.504,0-1,0.031-1.488,0.089l-0.036-0.18c-0.021-0.104-0.06-0.198-0.112-0.283c0.381-0.308,0.625-0.778,0.625-1.306c0-0.927-0.751-1.678-1.678-1.678s-1.678,0.751-1.678,1.678c0,0.745,0.485,1.376,1.157,1.595c-0.021,0.105-0.021,0.216,0,0.328l0.033,0.167C7.645,6.95,3.712,11.804,3.712,17.578c0,6.871,5.571,12.441,12.442,12.441c6.871,0,12.441-5.57,12.441-12.441C28.596,10.706,23.025,5.135,16.154,5.135zM16.369,8.1c4.455,0,8.183,3.116,9.123,7.287l-0.576,0.234c-0.148-0.681-0.755-1.191-1.48-1.191c-0.837,0-1.516,0.679-1.516,1.516c0,0.075,0.008,0.148,0.018,0.221l-2.771-0.028c-0.054-0.115-0.114-0.226-0.182-0.333l3.399-5.11l0.055-0.083l-4.766,4.059c-0.352-0.157-0.74-0.248-1.148-0.256l0.086-0.018l-1.177-2.585c0.64-0.177,1.111-0.763,1.111-1.459c0-0.837-0.678-1.515-1.516-1.515c-0.075,0-0.147,0.007-0.219,0.018l0.058-0.634C15.357,8.141,15.858,8.1,16.369,8.1zM12.146,3.455c0-0.727,0.591-1.318,1.318-1.318c0.727,0,1.318,0.591,1.318,1.318c0,0.425-0.203,0.802-0.516,1.043c-0.183-0.123-0.413-0.176-0.647-0.13c-0.226,0.045-0.413,0.174-0.535,0.349C12.542,4.553,12.146,4.049,12.146,3.455zM7.017,17.452c0-4.443,3.098-8.163,7.252-9.116l0.297,0.573c-0.61,0.196-1.051,0.768-1.051,1.442c0,0.837,0.678,1.516,1.515,1.516c0.068,0,0.135-0.006,0.2-0.015l-0.058,2.845l0.052-0.011c-0.442,0.204-0.824,0.513-1.116,0.895l0.093-0.147l-1.574-0.603l1.172,1.239l0.026-0.042c-0.19,0.371-0.306,0.788-0.324,1.229l-0.003-0.016l-2.623,1.209c-0.199-0.604-0.767-1.041-1.438-1.041c-0.837,0-1.516,0.678-1.516,1.516c0,0.064,0.005,0.128,0.013,0.191l-0.783-0.076C7.063,18.524,7.017,17.994,7.017,17.452zM16.369,26.805c-4.429,0-8.138-3.078-9.106-7.211l0.691-0.353c0.146,0.686,0.753,1.2,1.482,1.2c0.837,0,1.515-0.679,1.515-1.516c0-0.105-0.011-0.207-0.031-0.307l2.858,0.03c0.045,0.095,0.096,0.187,0.15,0.276l-3.45,5.277l0.227-0.195l4.529-3.92c0.336,0.153,0.705,0.248,1.094,0.266l-0.019,0.004l1.226,2.627c-0.655,0.166-1.142,0.76-1.142,1.468c0,0.837,0.678,1.515,1.516,1.515c0.076,0,0.151-0.007,0.225-0.018l0.004,0.688C17.566,26.746,16.975,26.805,16.369,26.805zM18.662,26.521l-0.389-0.6c0.661-0.164,1.152-0.759,1.152-1.47c0-0.837-0.68-1.516-1.516-1.516c-0.066,0-0.13,0.005-0.193,0.014v-2.86l-0.025,0.004c0.409-0.185,0.77-0.459,1.055-0.798l1.516,0.659l-1.104-1.304c0.158-0.335,0.256-0.704,0.278-1.095l2.552-1.164c0.19,0.618,0.766,1.068,1.447,1.068c0.838,0,1.516-0.679,1.516-1.516c0-0.069-0.006-0.137-0.016-0.204l0.65,0.12c0.089,0.517,0.136,1.049,0.136,1.591C25.722,21.826,22.719,25.499,18.662,26.521z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ScrewDriver();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ScrewDriver = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ScrewDriver.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.ScrewDriver\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M19.387,14.373c2.119-2.619,5.322-6.77,5.149-7.75c-0.128-0.729-0.882-1.547-1.763-2.171c-0.883-0.625-1.916-1.044-2.645-0.915c-0.98,0.173-3.786,4.603-5.521,7.49c-0.208,0.344,0.328,1.177,0.156,1.468c-0.172,0.292-1.052,0.042-1.18,0.261c-0.263,0.451-0.417,0.722-0.417,0.722s-0.553,0.823,1.163,2.163l-5.233,7.473c-0.267,0.381-1.456,0.459-1.456,0.459l-1.184,3.312l0.859,0.602l2.708-2.246c0,0-0.334-1.143-0.068-1.523l5.242-7.489c1.719,1,2.377,0.336,2.377,0.336s0.201-0.238,0.536-0.639c0.161-0.194-0.374-0.936-0.159-1.197C18.169,14.467,19.133,14.685,19.387,14.373z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Search();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Search = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Search.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Search\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M29.772,26.433l-7.126-7.126c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127L29.772,26.433zM7.203,13.885c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486c-0.007,3.58-2.905,6.476-6.484,6.484C10.106,20.361,7.209,17.465,7.203,13.885z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Sencha();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Sencha = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Sencha.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Sencha\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M18.265,22.734c1.365,0.662,2.309,2.062,2.309,3.682c0,1.566-0.881,2.928-2.176,3.615l1.922-0.98c3.16-1.58,5.332-4.846,5.332-8.617c0-3.719-2.109-6.945-5.195-8.547l-6.272-3.144c-1.366-0.662-2.308-2.062-2.308-3.682c0-1.567,0.881-2.928,2.175-3.614L12.13,2.428c-3.161,1.578-5.332,4.843-5.332,8.616c0,3.718,2.108,6.944,5.195,8.546L18.265,22.734z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Settings();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Settings = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Settings.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Settings\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16.015,12.03c-2.156,0-3.903,1.747-3.903,3.903c0,2.155,1.747,3.903,3.903,3.903c0.494,0,0.962-0.102,1.397-0.27l0.836,1.285l1.359-0.885l-0.831-1.276c0.705-0.706,1.142-1.681,1.142-2.757C19.918,13.777,18.171,12.03,16.015,12.03zM16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM26.174,20.809c-0.241,0.504-0.513,0.99-0.826,1.45L22.19,21.58c-0.481,0.526-1.029,0.994-1.634,1.385l0.119,3.202c-0.507,0.23-1.028,0.421-1.569,0.57l-1.955-2.514c-0.372,0.051-0.75,0.086-1.136,0.086c-0.356,0-0.706-0.029-1.051-0.074l-1.945,2.5c-0.541-0.151-1.065-0.342-1.57-0.569l0.117-3.146c-0.634-0.398-1.208-0.88-1.712-1.427L6.78,22.251c-0.313-0.456-0.583-0.944-0.826-1.448l2.088-2.309c-0.226-0.703-0.354-1.451-0.385-2.223l-2.768-1.464c0.055-0.563,0.165-1.107,0.301-1.643l3.084-0.427c0.29-0.702,0.675-1.352,1.135-1.942L8.227,7.894c0.399-0.389,0.83-0.744,1.283-1.07l2.663,1.672c0.65-0.337,1.349-0.593,2.085-0.75l0.968-3.001c0.278-0.021,0.555-0.042,0.837-0.042c0.282,0,0.56,0.022,0.837,0.042l0.976,3.028c0.72,0.163,1.401,0.416,2.036,0.75l2.704-1.697c0.455,0.326,0.887,0.681,1.285,1.07l-1.216,2.986c0.428,0.564,0.793,1.181,1.068,1.845l3.185,0.441c0.135,0.535,0.247,1.081,0.302,1.643l-2.867,1.516c-0.034,0.726-0.15,1.43-0.355,2.1L26.174,20.809z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.SettingsAlt();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.SettingsAlt = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.SettingsAlt.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.SettingsAlt\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM24.386,14.968c-1.451,1.669-3.706,2.221-5.685,1.586l-7.188,8.266c-0.766,0.88-2.099,0.97-2.979,0.205s-0.973-2.099-0.208-2.979l7.198-8.275c-0.893-1.865-0.657-4.164,0.787-5.824c1.367-1.575,3.453-2.151,5.348-1.674l-2.754,3.212l0.901,2.621l2.722,0.529l2.761-3.22C26.037,11.229,25.762,13.387,24.386,14.968z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Shuffle();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Shuffle = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Shuffle.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Shuffle\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.786,20.654c-0.618-0.195-1.407-0.703-2.291-1.587c-0.757-0.742-1.539-1.698-2.34-2.741c-0.191,0.256-0.382,0.51-0.574,0.77c-0.524,0.709-1.059,1.424-1.604,2.127c1.904,2.31,3.88,4.578,6.809,4.952v2.701l7.556-4.362l-7.556-4.362V20.654zM9.192,11.933c0.756,0.741,1.538,1.697,2.339,2.739c0.195-0.262,0.39-0.521,0.587-0.788c0.52-0.703,1.051-1.412,1.592-2.11c-2.032-2.463-4.133-4.907-7.396-5.025h-3.5v3.5h3.5C6.969,10.223,7.996,10.735,9.192,11.933zM21.786,10.341v2.535l7.556-4.363l-7.556-4.363v2.647c-1.904,0.219-3.425,1.348-4.751,2.644c-2.196,2.183-4.116,5.167-6.011,7.538c-1.867,2.438-3.741,3.888-4.712,3.771h-3.5v3.5h3.5c2.185-0.029,3.879-1.266,5.34-2.693c2.194-2.184,4.116-5.167,6.009-7.538C19.205,12.003,20.746,10.679,21.786,10.341z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Skull();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Skull = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Skull.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Skull\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.947,11.14c0-5.174-3.979-9.406-10.613-9.406c-6.633,0-10.282,4.232-10.282,9.406c0,5.174,1.459,4.511,1.459,7.43c0,1.095-1.061,0.564-1.061,2.919c0,2.587,3.615,2.223,4.677,3.283c1.061,1.062,0.961,3.019,0.961,3.019s0.199,0.796,0.564,0.563c0,0,0.232,0.564,0.498,0.232c0,0,0.265,0.563,0.531,0.1c0,0,0.265,0.631,0.696,0.166c0,0,0.431,0.63,0.929,0.133c0,0,0.564,0.53,1.194,0.133c0.63,0.397,1.194-0.133,1.194-0.133c0.497,0.497,0.929-0.133,0.929-0.133c0.432,0.465,0.695-0.166,0.695-0.166c0.268,0.464,0.531-0.1,0.531-0.1c0.266,0.332,0.498-0.232,0.498-0.232c0.365,0.232,0.564-0.563,0.564-0.563s-0.1-1.957,0.961-3.019c1.062-1.061,4.676-0.696,4.676-3.283c0-2.354-1.061-1.824-1.061-2.919C24.488,15.651,25.947,16.314,25.947,11.14zM10.333,20.992c-1.783,0.285-2.59-0.215-2.785-1.492c-0.508-3.328,2.555-3.866,4.079-3.683c0.731,0.088,1.99,0.862,1.99,1.825C13.617,20.229,11.992,20.727,10.333,20.992zM16.461,25.303c-0.331,0-0.862-0.431-0.895-1.227c-0.033,0.796-0.63,1.227-0.961,1.227c-0.332,0-0.83-0.331-0.863-1.127c-0.033-0.796,1.028-4.013,1.792-4.013c0.762,0,1.824,3.217,1.791,4.013S16.794,25.303,16.461,25.303zM23.361,19.5c-0.195,1.277-1.004,1.777-2.787,1.492c-1.658-0.266-3.283-0.763-3.283-3.35c0-0.963,1.258-1.737,1.99-1.825C20.805,15.634,23.869,16.172,23.361,19.5z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Skype();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Skype = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Skype.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Skype\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.777,18.438c0.209-0.948,0.318-1.934,0.318-2.944c0-7.578-6.144-13.722-13.724-13.722c-0.799,0-1.584,0.069-2.346,0.2C11.801,1.199,10.35,0.75,8.793,0.75c-4.395,0-7.958,3.562-7.958,7.958c0,1.47,0.399,2.845,1.094,4.024c-0.183,0.893-0.277,1.814-0.277,2.76c0,7.58,6.144,13.723,13.722,13.723c0.859,0,1.699-0.078,2.515-0.23c1.119,0.604,2.399,0.945,3.762,0.945c4.395,0,7.957-3.562,7.957-7.959C29.605,20.701,29.309,19.502,28.777,18.438zM22.412,22.051c-0.635,0.898-1.573,1.609-2.789,2.115c-1.203,0.5-2.646,0.754-4.287,0.754c-1.971,0-3.624-0.346-4.914-1.031C9.5,23.391,8.74,22.717,8.163,21.885c-0.583-0.842-0.879-1.676-0.879-2.479c0-0.503,0.192-0.939,0.573-1.296c0.375-0.354,0.857-0.532,1.432-0.532c0.471,0,0.878,0.141,1.209,0.422c0.315,0.269,0.586,0.662,0.805,1.174c0.242,0.558,0.508,1.027,0.788,1.397c0.269,0.355,0.656,0.656,1.151,0.89c0.497,0.235,1.168,0.354,1.992,0.354c1.135,0,2.064-0.241,2.764-0.721c0.684-0.465,1.016-1.025,1.016-1.711c0-0.543-0.173-0.969-0.529-1.303c-0.373-0.348-0.865-0.621-1.465-0.807c-0.623-0.195-1.47-0.404-2.518-0.623c-1.424-0.306-2.634-0.668-3.596-1.076c-0.984-0.419-1.777-1-2.357-1.727c-0.59-0.736-0.889-1.662-0.889-2.75c0-1.036,0.314-1.971,0.933-2.776c0.613-0.8,1.51-1.423,2.663-1.849c1.139-0.422,2.494-0.635,4.027-0.635c1.225,0,2.303,0.141,3.201,0.421c0.904,0.282,1.668,0.662,2.267,1.13c0.604,0.472,1.054,0.977,1.335,1.5c0.284,0.529,0.43,1.057,0.43,1.565c0,0.49-0.189,0.937-0.563,1.324c-0.375,0.391-0.851,0.589-1.408,0.589c-0.509,0-0.905-0.124-1.183-0.369c-0.258-0.227-0.523-0.58-0.819-1.09c-0.342-0.65-0.756-1.162-1.229-1.523c-0.463-0.351-1.232-0.529-2.292-0.529c-0.984,0-1.784,0.197-2.379,0.588c-0.572,0.375-0.85,0.805-0.85,1.314c0,0.312,0.09,0.574,0.273,0.799c0.195,0.238,0.471,0.447,0.818,0.621c0.36,0.182,0.732,0.326,1.104,0.429c0.382,0.106,1.021,0.263,1.899,0.466c1.11,0.238,2.131,0.506,3.034,0.793c0.913,0.293,1.703,0.654,2.348,1.072c0.656,0.429,1.178,0.979,1.547,1.635c0.369,0.658,0.558,1.471,0.558,2.416C23.371,20.119,23.049,21.148,22.412,22.051z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.SlideShare();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.SlideShare = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.SlideShare.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.SlideShare\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.952,12.795c-0.956,1.062-5.073,2.409-5.604,2.409h-4.513c-0.749,0-1.877,0.147-2.408,0.484c0.061,0.054,0.122,0.108,0.181,0.163c0.408,0.379,1.362,0.913,2.206,0.913c0.397,0,0.723-0.115,1-0.354c1.178-1.007,1.79-1.125,2.145-1.125c0.421,0,0.783,0.193,0.996,0.531c0.4,0.626,0.106,1.445-0.194,2.087c-0.718,1.524-3.058,3.171-5.595,3.171c-0.002,0-0.002,0-0.004,0c-0.354,0-0.701-0.033-1.033-0.099v3.251c0,0.742,1.033,2.533,4.167,2.533s3.955-3.701,3.955-4.338v-4.512c2.23-1.169,4.512-1.805,5.604-3.895C30.882,12.05,29.907,11.733,28.952,12.795zM21.942,17.521c0.796-1.699-0.053-1.699-1.54-0.425s-3.665,0.105-4.408-0.585c-0.743-0.689-1.486-1.22-2.814-1.167c-1.328,0.053-4.46-0.161-6.267-0.585c-1.805-0.425-4.895-3-5.15-2.335c-0.266,0.69,0.211,1.168,1.168,2.335c0.955,1.169,5.075,2.778,5.075,2.778s0,3.453,0,4.886c0,1.435,2.973,3.61,4.512,3.61s2.708-1.062,2.708-1.806v-4.512C17.775,21.045,21.146,19.221,21.942,17.521zM20.342,13.73c1.744,0,3.159-1.414,3.159-3.158c0-1.745-1.415-3.159-3.159-3.159s-3.158,1.414-3.158,3.159C17.184,12.316,18.598,13.73,20.342,13.73zM12.019,13.73c1.744,0,3.158-1.414,3.158-3.158c0-1.745-1.414-3.159-3.158-3.159c-1.745,0-3.159,1.414-3.159,3.159C8.86,12.316,10.273,13.73,12.019,13.73z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Smile();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Smile = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Smile.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Smile\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM20.729,7.375c0.934,0,1.688,1.483,1.688,3.312S21.661,14,20.729,14c-0.932,0-1.688-1.483-1.688-3.312S19.798,7.375,20.729,7.375zM11.104,7.375c0.932,0,1.688,1.483,1.688,3.312S12.037,14,11.104,14s-1.688-1.483-1.688-3.312S10.172,7.375,11.104,7.375zM16.021,26c-2.873,0-5.563-1.757-7.879-4.811c2.397,1.564,5.021,2.436,7.774,2.436c2.923,0,5.701-0.98,8.215-2.734C21.766,24.132,18.99,26,16.021,26z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Smile2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Smile2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Smile2.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Smile2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM16,29.534C8.539,29.534,2.466,23.462,2.466,16C2.466,8.539,8.539,2.466,16,2.466c7.462,0,13.535,6.072,13.535,13.533C29.534,23.462,23.462,29.534,16,29.534zM11.104,14c0.932,0,1.688-1.483,1.688-3.312s-0.755-3.312-1.688-3.312s-1.688,1.483-1.688,3.312S10.172,14,11.104,14zM20.729,14c0.934,0,1.688-1.483,1.688-3.312s-0.756-3.312-1.688-3.312c-0.932,0-1.688,1.483-1.688,3.312S19.798,14,20.729,14zM8.143,21.189C10.458,24.243,13.148,26,16.021,26c2.969,0,5.745-1.868,8.11-5.109c-2.515,1.754-5.292,2.734-8.215,2.734C13.164,23.625,10.54,22.756,8.143,21.189z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Snow();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Snow = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Snow.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Snow\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.372,6.912c-0.093-3.925-3.302-7.078-7.248-7.08c-2.638,0.002-4.942,1.412-6.208,3.518c-0.595-0.327-1.28-0.518-2.01-0.518C7.627,2.834,5.773,4.639,5.69,6.898c-2.393,0.786-4.125,3.025-4.127,5.686c0,3.312,2.687,6,6,6v-0.002h15.875c3.312,0,6-2.688,6-6C29.434,9.944,27.732,7.715,25.372,6.912zM23.436,16.584H7.562c-2.209-0.006-3.997-1.793-4.001-4c-0.002-1.983,1.45-3.619,3.35-3.933c0.265-0.043,0.502-0.19,0.657-0.414C7.723,8.015,7.78,7.74,7.731,7.475C7.703,7.326,7.686,7.187,7.686,7.051c0.004-1.225,0.995-2.217,2.22-2.219c0.647,0,1.217,0.278,1.633,0.731c0.233,0.257,0.587,0.375,0.927,0.31c0.342-0.066,0.626-0.308,0.748-0.631c0.749-1.992,2.662-3.412,4.911-3.41c2.898,0.004,5.244,2.351,5.251,5.25c0,0.16-0.009,0.325-0.026,0.496c-0.05,0.518,0.305,0.984,0.814,1.079c1.859,0.345,3.273,1.966,3.271,3.923C27.43,14.791,25.645,16.578,23.436,16.584zM16.667,24.09l1.119-1.119c0.389-0.391,0.389-1.025,0-1.416c-0.392-0.391-1.025-0.391-1.415,0l-1.119,1.119l-1.119-1.119c-0.391-0.391-1.025-0.391-1.415,0c-0.391,0.391-0.391,1.025,0,1.416l1.118,1.117l-1.12,1.121c-0.389,0.393-0.389,1.021,0,1.414c0.195,0.188,0.451,0.293,0.707,0.293c0.256,0,0.512-0.104,0.708-0.293l1.12-1.119l1.12,1.119c0.195,0.188,0.451,0.293,0.708,0.293c0.256,0,0.512-0.104,0.707-0.293c0.391-0.396,0.391-1.021,0-1.414L16.667,24.09zM25.119,21.817c-0.393-0.392-1.025-0.392-1.415,0l-1.12,1.121l-1.12-1.121c-0.391-0.392-1.022-0.392-1.414,0c-0.39,0.392-0.39,1.022,0,1.416l1.119,1.119l-1.119,1.119c-0.39,0.391-0.39,1.022,0,1.413c0.195,0.195,0.451,0.294,0.707,0.294c0.257,0,0.513-0.099,0.707-0.294l1.12-1.118l1.12,1.118c0.194,0.195,0.45,0.294,0.707,0.294c0.256,0,0.513-0.099,0.708-0.294c0.389-0.391,0.389-1.022,0-1.413l-1.12-1.119l1.12-1.119C25.507,22.842,25.507,22.209,25.119,21.817zM9.334,23.953l1.119-1.119c0.389-0.394,0.389-1.021,0-1.414c-0.391-0.394-1.025-0.394-1.415,0l-1.119,1.119l-1.12-1.121c-0.391-0.39-1.023-0.39-1.415,0c-0.391,0.396-0.391,1.024,0,1.418l1.119,1.117l-1.12,1.118c-0.391,0.394-0.391,1.025,0,1.414c0.196,0.195,0.452,0.293,0.708,0.293c0.256,0,0.511-0.098,0.707-0.293l1.12-1.119l1.121,1.121c0.195,0.195,0.451,0.293,0.707,0.293s0.513-0.098,0.708-0.293c0.389-0.391,0.389-1.022,0-1.416L9.334,23.953z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Split();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Split = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Split.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Split\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.786,20.698c-1.792-0.237-2.912-1.331-4.358-2.886c-0.697-0.751-1.428-1.577-2.324-2.319c1.396-1.165,2.411-2.519,3.483-3.503c1.01-0.92,1.901-1.519,3.199-1.688v2.574l7.556-4.363L21.786,4.15v2.652c-3.34,0.266-5.45,2.378-6.934,4.013c-0.819,0.896-1.537,1.692-2.212,2.192c-0.685,0.501-1.227,0.731-2.013,0.742c-0.001,0-0.002,0-0.003,0H2.812v3.5h0.001v0.001c0,0,0.046-0.001,0.136-0.001h7.677c0.786,0.011,1.33,0.241,2.017,0.743c1.021,0.743,2.095,2.181,3.552,3.568c1.312,1.258,3.162,2.46,5.592,2.649v2.664l7.556-4.36l-7.556-4.361V20.698z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Star();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Star = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Star.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Star\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,22.375L7.116,28.83l3.396-10.438l-8.883-6.458l10.979,0.002L16.002,1.5l3.391,10.434h10.981l-8.886,6.457l3.396,10.439L16,22.375L16,22.375z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Star2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Star2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Star2.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Star2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.615,4.928c0.487-0.986,1.284-0.986,1.771,0l2.249,4.554c0.486,0.986,1.775,1.923,2.864,2.081l5.024,0.73c1.089,0.158,1.335,0.916,0.547,1.684l-3.636,3.544c-0.788,0.769-1.28,2.283-1.095,3.368l0.859,5.004c0.186,1.085-0.459,1.553-1.433,1.041l-4.495-2.363c-0.974-0.512-2.567-0.512-3.541,0l-4.495,2.363c-0.974,0.512-1.618,0.044-1.432-1.041l0.858-5.004c0.186-1.085-0.307-2.6-1.094-3.368L3.93,13.977c-0.788-0.768-0.542-1.525,0.547-1.684l5.026-0.73c1.088-0.158,2.377-1.095,2.864-2.081L14.615,4.928z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Star2Off();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Star2Off = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Star2Off.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Star2Off\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M26.522,12.293l-5.024-0.73c-1.089-0.158-2.378-1.095-2.864-2.081l-2.249-4.554c-0.487-0.986-1.284-0.986-1.771,0l-2.247,4.554c-0.487,0.986-1.776,1.923-2.864,2.081l-5.026,0.73c-1.088,0.158-1.334,0.916-0.547,1.684l3.637,3.544c0.788,0.769,1.28,2.283,1.094,3.368l-0.858,5.004c-0.186,1.085,0.458,1.553,1.432,1.041l4.495-2.363c0.974-0.512,2.566-0.512,3.541,0l4.495,2.363c0.974,0.512,1.618,0.044,1.433-1.041l-0.859-5.004c-0.186-1.085,0.307-2.6,1.095-3.368l3.636-3.544C27.857,13.209,27.611,12.452,26.522,12.293zM22.037,16.089c-1.266,1.232-1.966,3.394-1.67,5.137l0.514,2.984l-2.679-1.409c-0.757-0.396-1.715-0.612-2.702-0.612s-1.945,0.216-2.7,0.61l-2.679,1.409l0.511-2.982c0.297-1.743-0.404-3.905-1.671-5.137l-2.166-2.112l2.995-0.435c1.754-0.255,3.592-1.591,4.373-3.175L15.5,7.652l1.342,2.716c0.781,1.583,2.617,2.92,4.369,3.173l2.992,0.435L22.037,16.089z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Star3();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Star3 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Star3.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Star3\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M22.441,28.181c-0.419,0-0.835-0.132-1.189-0.392l-5.751-4.247L9.75,27.789c-0.354,0.26-0.771,0.392-1.189,0.392c-0.412,0-0.824-0.128-1.175-0.384c-0.707-0.511-1-1.422-0.723-2.25l2.26-6.783l-5.815-4.158c-0.71-0.509-1.009-1.416-0.74-2.246c0.268-0.826,1.037-1.382,1.904-1.382c0.004,0,0.01,0,0.014,0l7.15,0.056l2.157-6.816c0.262-0.831,1.035-1.397,1.906-1.397s1.645,0.566,1.906,1.397l2.155,6.816l7.15-0.056c0.004,0,0.01,0,0.015,0c0.867,0,1.636,0.556,1.903,1.382c0.271,0.831-0.028,1.737-0.739,2.246l-5.815,4.158l2.263,6.783c0.276,0.826-0.017,1.737-0.721,2.25C23.268,28.053,22.854,28.181,22.441,28.181L22.441,28.181z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Star3Off();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Star3Off = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Star3Off.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Star3Off\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M28.631,12.359c-0.268-0.826-1.036-1.382-1.903-1.382h-0.015l-7.15,0.056l-2.155-6.816c-0.262-0.831-1.035-1.397-1.906-1.397s-1.645,0.566-1.906,1.397l-2.157,6.816l-7.15-0.056H4.273c-0.868,0-1.636,0.556-1.904,1.382c-0.27,0.831,0.029,1.737,0.74,2.246l5.815,4.158l-2.26,6.783c-0.276,0.828,0.017,1.739,0.723,2.25c0.351,0.256,0.763,0.384,1.175,0.384c0.418,0,0.834-0.132,1.189-0.392l5.751-4.247l5.751,4.247c0.354,0.26,0.771,0.392,1.189,0.392c0.412,0,0.826-0.128,1.177-0.384c0.704-0.513,0.997-1.424,0.721-2.25l-2.263-6.783l5.815-4.158C28.603,14.097,28.901,13.19,28.631,12.359zM19.712,17.996l2.729,8.184l-6.94-5.125L8.56,26.18l2.729-8.184l-7.019-5.018l8.627,0.066L15.5,4.82l2.603,8.225l8.627-0.066L19.712,17.996z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.StarOff();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.StarOff = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.StarOff.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.StarOff\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,22.375L7.116,28.83l3.396-10.438l-8.883-6.458l10.979,0.002L16.002,1.5l3.391,10.434h10.981l-8.886,6.457l3.396,10.439L16,22.375L16,22.375zM22.979,26.209l-2.664-8.205l6.979-5.062h-8.627L16,4.729l-2.666,8.206H4.708l6.979,5.07l-2.666,8.203L16,21.146L22.979,26.209L22.979,26.209z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Start();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Start = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Start.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Start\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.316,5.318,9.833,13.682,9.833,5.5,5.5,5.5,5.5,25.5,9.833,25.5,9.833,17.318,24.316,25.682z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Sticker();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Sticker = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Sticker.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Sticker\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.5,1.999c-1.042,0-1.916,0.377-2.57,1.088L2.895,13.138C2.302,13.784,1.999,14.58,1.999,15.5C1.999,22.943,8.057,29,15.5,29S29,22.943,29,15.5S22.943,1.999,15.5,1.999zM15.5,28C8.596,28,3,22.404,3,15.5c0-3.452,5.239-2.737,7.501-4.999C12.762,8.239,12.048,3,15.5,3C22.404,3,28,8.597,28,15.5S22.404,28,15.5,28z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Stop();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Stop = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Stop.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Stop\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M5.5,5.5h20v20h-20z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.StopWatch();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.StopWatch = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.StopWatch.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.StopWatch\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M27.216,18.533c0-3.636-1.655-6.883-4.253-9.032l0.733-0.998l0.482,0.354c0.198,0.146,0.481,0.104,0.628-0.097l0.442-0.604c0.146-0.198,0.103-0.482-0.097-0.628l-2.052-1.506c-0.199-0.146-0.481-0.103-0.628,0.097L22.03,6.724c-0.146,0.199-0.104,0.482,0.096,0.628l0.483,0.354l-0.736,1.003c-1.28-0.834-2.734-1.419-4.296-1.699c0.847-0.635,1.402-1.638,1.403-2.778h-0.002c0-1.922-1.557-3.48-3.479-3.48c-1.925,0-3.48,1.559-3.48,3.48c0,1.141,0.556,2.144,1.401,2.778c-1.549,0.277-2.99,0.857-4.265,1.68L8.424,7.684l0.484-0.353c0.198-0.145,0.245-0.428,0.098-0.628l-0.44-0.604C8.42,5.899,8.136,5.855,7.937,6.001L5.881,7.5c-0.2,0.146-0.243,0.428-0.099,0.628l0.442,0.604c0.145,0.2,0.428,0.244,0.627,0.099l0.483-0.354l0.729,0.999c-2.615,2.149-4.282,5.407-4.282,9.057c0,6.471,5.245,11.716,11.718,11.716c6.47,0,11.716-5.243,11.718-11.716H27.216zM12.918,4.231c0.002-1.425,1.155-2.58,2.582-2.582c1.426,0.002,2.579,1.157,2.581,2.582c-0.002,1.192-0.812,2.184-1.908,2.482v-1.77h0.6c0.246,0,0.449-0.203,0.449-0.449V3.746c0-0.247-0.203-0.449-0.449-0.449h-2.545c-0.247,0-0.449,0.202-0.449,0.449v0.749c0,0.246,0.202,0.449,0.449,0.449h0.599v1.77C13.729,6.415,12.919,5.424,12.918,4.231zM15.5,27.554c-4.983-0.008-9.015-4.038-9.022-9.021c0.008-4.982,4.039-9.013,9.022-9.022c4.981,0.01,9.013,4.04,9.021,9.022C24.513,23.514,20.481,27.546,15.5,27.554zM15.5,12.138c0.476,0,0.861-0.385,0.861-0.86s-0.386-0.861-0.861-0.861s-0.861,0.386-0.861,0.861S15.024,12.138,15.5,12.138zM15.5,24.927c-0.476,0-0.861,0.386-0.861,0.861s0.386,0.861,0.861,0.861s0.861-0.386,0.861-0.861S15.976,24.927,15.5,24.927zM12.618,11.818c-0.237-0.412-0.764-0.553-1.176-0.315c-0.412,0.238-0.554,0.765-0.315,1.177l2.867,6.722c0.481,0.831,1.543,1.116,2.375,0.637c0.829-0.479,1.114-1.543,0.635-2.374L12.618,11.818zM18.698,24.07c-0.412,0.237-0.555,0.765-0.316,1.176c0.237,0.412,0.764,0.554,1.176,0.315c0.413-0.238,0.553-0.765,0.316-1.176C19.635,23.974,19.108,23.832,18.698,24.07zM8.787,15.65c0.412,0.238,0.938,0.097,1.176-0.315c0.237-0.413,0.097-0.938-0.314-1.176c-0.412-0.239-0.938-0.098-1.177,0.313C8.234,14.886,8.375,15.412,8.787,15.65zM22.215,21.413c-0.412-0.236-0.938-0.096-1.176,0.316c-0.238,0.412-0.099,0.938,0.314,1.176c0.41,0.238,0.937,0.098,1.176-0.314C22.768,22.178,22.625,21.652,22.215,21.413zM9.107,18.531c-0.002-0.476-0.387-0.86-0.861-0.86c-0.477,0-0.862,0.385-0.862,0.86c0.001,0.476,0.386,0.86,0.861,0.861C8.722,19.393,9.106,19.008,9.107,18.531zM21.896,18.531c0,0.477,0.384,0.862,0.859,0.86c0.476,0.002,0.862-0.382,0.862-0.859s-0.387-0.86-0.862-0.862C22.279,17.671,21.896,18.056,21.896,18.531zM8.787,21.413c-0.412,0.238-0.554,0.765-0.316,1.176c0.239,0.412,0.765,0.553,1.177,0.316c0.413-0.239,0.553-0.765,0.315-1.178C9.725,21.317,9.198,21.176,8.787,21.413zM21.352,14.157c-0.411,0.238-0.551,0.764-0.312,1.176c0.237,0.413,0.764,0.555,1.174,0.315c0.412-0.236,0.555-0.762,0.316-1.176C22.29,14.06,21.766,13.921,21.352,14.157zM12.304,24.067c-0.413-0.235-0.939-0.096-1.176,0.315c-0.238,0.413-0.098,0.939,0.312,1.178c0.413,0.236,0.939,0.096,1.178-0.315C12.857,24.832,12.715,24.308,12.304,24.067zM18.698,12.992c0.41,0.238,0.938,0.099,1.174-0.313c0.238-0.411,0.1-0.938-0.314-1.177c-0.414-0.238-0.937-0.097-1.177,0.315C18.144,12.229,18.286,12.755,18.698,12.992z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Sun();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Sun = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Sun.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Sun\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.502,7.504c-4.35,0-7.873,3.523-7.873,7.873c0,4.347,3.523,7.872,7.873,7.872c4.346,0,7.871-3.525,7.871-7.872C23.374,11.027,19.85,7.504,15.502,7.504zM15.502,21.25c-3.244-0.008-5.866-2.63-5.874-5.872c0.007-3.243,2.63-5.866,5.874-5.874c3.242,0.008,5.864,2.631,5.871,5.874C21.366,18.62,18.744,21.242,15.502,21.25zM15.502,6.977c0.553,0,1-0.448,1-1.001V1.125c-0.002-0.553-0.448-1-1-1c-0.553,0-1.001,0.449-1,1.002v4.85C14.502,6.528,14.949,6.977,15.502,6.977zM18.715,7.615c0.125,0.053,0.255,0.076,0.382,0.077c0.394,0,0.765-0.233,0.925-0.618l1.856-4.483c0.21-0.511-0.031-1.095-0.541-1.306c-0.511-0.211-1.096,0.031-1.308,0.541L18.174,6.31C17.963,6.82,18.205,7.405,18.715,7.615zM21.44,9.436c0.195,0.194,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293l3.43-3.433c0.391-0.39,0.39-1.023,0-1.415c-0.392-0.39-1.025-0.39-1.415,0.002L21.44,8.021C21.049,8.412,21.049,9.045,21.44,9.436zM23.263,12.16c0.158,0.385,0.531,0.617,0.923,0.617c0.127,0,0.257-0.025,0.383-0.078l4.48-1.857c0.511-0.211,0.753-0.797,0.541-1.307s-0.796-0.752-1.307-0.54l-4.481,1.857C23.292,11.064,23.051,11.65,23.263,12.16zM29.752,14.371l-4.851,0.001c-0.552,0-1,0.448-0.998,1.001c0,0.553,0.447,0.999,0.998,0.999l4.852-0.002c0.553,0,0.999-0.449,0.999-1C30.752,14.817,30.304,14.369,29.752,14.371zM29.054,19.899l-4.482-1.854c-0.512-0.212-1.097,0.03-1.307,0.541c-0.211,0.511,0.031,1.096,0.541,1.308l4.482,1.854c0.126,0.051,0.256,0.075,0.383,0.075c0.393,0,0.765-0.232,0.925-0.617C29.806,20.695,29.563,20.109,29.054,19.899zM22.86,21.312c-0.391-0.391-1.023-0.391-1.414,0.001c-0.391,0.39-0.39,1.022,0,1.413l3.434,3.429c0.195,0.195,0.45,0.293,0.706,0.293s0.513-0.098,0.708-0.293c0.391-0.392,0.389-1.025,0-1.415L22.86,21.312zM20.029,23.675c-0.211-0.511-0.796-0.752-1.307-0.541c-0.51,0.212-0.752,0.797-0.54,1.308l1.86,4.48c0.159,0.385,0.531,0.617,0.925,0.617c0.128,0,0.258-0.024,0.383-0.076c0.511-0.211,0.752-0.797,0.54-1.309L20.029,23.675zM15.512,23.778c-0.553,0-1,0.448-1,1l0.004,4.851c0,0.553,0.449,0.999,1,0.999c0.553,0,1-0.448,0.998-1l-0.003-4.852C16.511,24.226,16.062,23.777,15.512,23.778zM12.296,23.142c-0.51-0.21-1.094,0.031-1.306,0.543l-1.852,4.483c-0.21,0.511,0.033,1.096,0.543,1.307c0.125,0.052,0.254,0.076,0.382,0.076c0.392,0,0.765-0.234,0.924-0.619l1.853-4.485C13.051,23.937,12.807,23.353,12.296,23.142zM9.57,21.325c-0.392-0.391-1.025-0.389-1.415,0.002L4.729,24.76c-0.391,0.392-0.389,1.023,0.002,1.415c0.195,0.194,0.45,0.292,0.706,0.292c0.257,0,0.513-0.098,0.708-0.293l3.427-3.434C9.961,22.349,9.961,21.716,9.57,21.325zM7.746,18.604c-0.213-0.509-0.797-0.751-1.307-0.54L1.96,19.925c-0.511,0.212-0.752,0.798-0.54,1.308c0.16,0.385,0.531,0.616,0.924,0.616c0.127,0,0.258-0.024,0.383-0.076l4.479-1.861C7.715,19.698,7.957,19.113,7.746,18.604zM7.1,15.392c0-0.553-0.447-0.999-1-0.999l-4.851,0.006c-0.553,0-1.001,0.448-0.999,1.001c0.001,0.551,0.449,1,1,0.998l4.852-0.006C6.654,16.392,7.102,15.942,7.1,15.392zM1.944,10.869l4.485,1.85c0.125,0.053,0.254,0.076,0.381,0.076c0.393,0,0.766-0.232,0.925-0.618c0.212-0.511-0.032-1.097-0.544-1.306L2.708,9.021c-0.511-0.21-1.095,0.032-1.306,0.542C1.19,10.074,1.435,10.657,1.944,10.869zM8.137,9.451c0.195,0.193,0.449,0.291,0.705,0.291s0.513-0.098,0.709-0.295c0.391-0.389,0.389-1.023-0.004-1.414L6.113,4.609C5.723,4.219,5.088,4.221,4.699,4.612c-0.391,0.39-0.389,1.024,0.002,1.414L8.137,9.451zM10.964,7.084c0.16,0.384,0.532,0.615,0.923,0.615c0.128,0,0.258-0.025,0.384-0.077c0.51-0.212,0.753-0.798,0.54-1.307l-1.864-4.479c-0.212-0.51-0.798-0.751-1.308-0.539C9.129,1.51,8.888,2.096,9.1,2.605L10.964,7.084z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Svg();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Svg = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Svg.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Svg\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M31.274,15.989c0-2.473-2.005-4.478-4.478-4.478l0,0c0.81-0.811,1.312-1.93,1.312-3.167c0-2.474-2.005-4.479-4.479-4.479c-1.236,0-2.356,0.501-3.167,1.312c0-2.473-2.005-4.478-4.478-4.478c-2.474,0-4.479,2.005-4.479,4.478c-0.811-0.81-1.93-1.312-3.167-1.312c-2.474,0-4.479,2.005-4.479,4.479c0,1.236,0.501,2.356,1.312,3.166c-2.474,0-4.479,2.005-4.479,4.479c0,2.474,2.005,4.479,4.479,4.479c-0.811,0.81-1.312,1.93-1.312,3.167c0,2.473,2.005,4.478,4.479,4.478c1.236,0,2.356-0.501,3.167-1.312c0,2.473,2.005,4.479,4.479,4.479c2.473,0,4.478-2.006,4.478-4.479l0,0c0.811,0.811,1.931,1.312,3.167,1.312c2.474,0,4.478-2.005,4.478-4.478c0-1.237-0.501-2.357-1.312-3.168c0.001,0,0.001,0,0.001,0C29.27,20.467,31.274,18.463,31.274,15.989zM23.583,21.211c0.016,0,0.031-0.001,0.047-0.001c1.339,0,2.424,1.085,2.424,2.425c0,1.338-1.085,2.424-2.424,2.424s-2.424-1.086-2.424-2.424c0-0.017,0.001-0.031,0.001-0.047l-3.541-3.542v5.009c0.457,0.44,0.743,1.06,0.743,1.746c0,1.339-1.086,2.424-2.424,2.424c-1.339,0-2.425-1.085-2.425-2.424c0-0.687,0.286-1.306,0.743-1.746v-5.009l-3.541,3.542c0,0.016,0.001,0.031,0.001,0.047c0,1.338-1.085,2.424-2.424,2.424s-2.424-1.086-2.424-2.424c0-1.34,1.085-2.425,2.424-2.425c0.015,0,0.031,0.001,0.046,0.001l3.542-3.541H6.919c-0.44,0.458-1.06,0.743-1.746,0.743c-1.339,0-2.424-1.085-2.424-2.424s1.085-2.424,2.424-2.424c0.686,0,1.305,0.285,1.746,0.744h5.008l-3.542-3.542c-0.015,0-0.031,0.001-0.046,0.001c-1.339,0-2.424-1.085-2.424-2.424S7.001,5.92,8.34,5.92s2.424,1.085,2.424,2.424c0,0.015-0.001,0.031-0.001,0.046l3.541,3.542V6.924c-0.457-0.441-0.743-1.06-0.743-1.746c0-1.339,1.086-2.425,2.425-2.425c1.338,0,2.424,1.085,2.424,2.425c0,0.686-0.286,1.305-0.743,1.746v5.008l3.541-3.542c0-0.015-0.001-0.031-0.001-0.046c0-1.339,1.085-2.424,2.424-2.424s2.424,1.085,2.424,2.424c0,1.339-1.085,2.424-2.424,2.424c-0.016,0-0.031-0.001-0.047-0.001l-3.541,3.542h5.008c0.441-0.458,1.061-0.744,1.747-0.744c1.338,0,2.423,1.085,2.423,2.424s-1.085,2.424-2.423,2.424c-0.687,0-1.306-0.285-1.747-0.743h-5.008L23.583,21.211z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.TShirt();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.TShirt = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.TShirt.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.TShirt\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M20.1,4.039c-0.681,1.677-2.32,2.862-4.24,2.862c-1.921,0-3.56-1.185-4.24-2.862L1.238,8.442l2.921,6.884l3.208-1.361V28h17.099V14.015l3.093,1.312l2.922-6.884L20.1,4.039z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Tag();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Tag = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Tag.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Tag\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.263,2.826H7.904L2.702,8.028v6.359L18.405,30.09l11.561-11.562L14.263,2.826zM6.495,8.859c-0.619-0.619-0.619-1.622,0-2.24C7.114,6,8.117,6,8.736,6.619c0.62,0.62,0.619,1.621,0,2.241C8.117,9.479,7.114,9.479,6.495,8.859z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.TakeOff();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.TakeOff = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.TakeOff.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.TakeOff\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M10.27,19.267c0,0,9.375-1.981,16.074-8.681c0,0,1.395-1.339-1.338-1.339c-2.305,0-5.6,2.438-5.6,2.438l-9.137-1.42l-1.769,1.769l4.983,2.411l-3.001,2.035l-2.571-1.285L6.09,16.052C6.09,16.052,8.02,18.062,10.27,19.267zM3.251,23.106v1.998h24.498v-1.998H3.251z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Talke();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Talke = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Talke.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Talke\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,4.938c-7.732,0-14,4.701-14,10.5c0,1.981,0.741,3.833,2.016,5.414L2,25.272l5.613-1.44c2.339,1.316,5.237,2.106,8.387,2.106c7.732,0,14-4.701,14-10.5S23.732,4.938,16,4.938zM16.982,21.375h-1.969v-1.889h1.969V21.375zM16.982,17.469v0.625h-1.969v-0.769c0-2.321,2.641-2.689,2.641-4.337c0-0.752-0.672-1.329-1.553-1.329c-0.912,0-1.713,0.672-1.713,0.672l-1.12-1.393c0,0,1.104-1.153,3.009-1.153c1.81,0,3.49,1.121,3.49,3.009C19.768,15.437,16.982,15.741,16.982,17.469z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Talkq();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Talkq = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Talkq.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Talkq\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,4.938c-7.732,0-14,4.701-14,10.5c0,1.981,0.741,3.833,2.016,5.414L2,25.272l5.613-1.44c2.339,1.316,5.237,2.106,8.387,2.106c7.732,0,14-4.701,14-10.5S23.732,4.938,16,4.938zM16.868,21.375h-1.969v-1.889h1.969V21.375zM16.772,18.094h-1.777l-0.176-8.083h2.113L16.772,18.094z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Thunder();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Thunder = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Thunder.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Thunder\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.371,7.306c-0.092-3.924-3.301-7.077-7.248-7.079c-2.638,0.001-4.942,1.412-6.208,3.517c-0.595-0.327-1.28-0.517-2.01-0.517C7.626,3.229,5.772,5.033,5.689,7.293c-2.393,0.786-4.125,3.025-4.127,5.686c0,3.312,2.687,6,6,6v-0.002h5.271l-2.166,3.398l1.977-0.411L10,30.875l9.138-10.102L17,21l2.167-2.023h4.269c3.312,0,6-2.688,6-6C29.434,10.34,27.732,8.11,25.371,7.306zM23.436,16.979H7.561c-2.209-0.006-3.997-1.792-4.001-4.001c-0.002-1.982,1.45-3.618,3.35-3.931c0.265-0.043,0.502-0.191,0.657-0.414C7.722,8.41,7.779,8.136,7.73,7.87C7.702,7.722,7.685,7.582,7.685,7.446C7.689,6.221,8.68,5.23,9.905,5.228c0.647,0,1.217,0.278,1.633,0.731c0.233,0.257,0.587,0.375,0.927,0.309c0.342-0.066,0.626-0.307,0.748-0.63c0.749-1.992,2.662-3.412,4.911-3.41c2.899,0.004,5.244,2.35,5.251,5.249c0,0.161-0.009,0.326-0.027,0.497c-0.049,0.517,0.305,0.984,0.815,1.079c1.86,0.344,3.274,1.966,3.271,3.923C27.43,15.186,25.645,16.973,23.436,16.979z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Trash();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Trash = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Trash.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Trash\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M20.826,5.75l0.396,1.188c1.54,0.575,2.589,1.44,2.589,2.626c0,2.405-4.308,3.498-8.312,3.498c-4.003,0-8.311-1.093-8.311-3.498c0-1.272,1.21-2.174,2.938-2.746l0.388-1.165c-2.443,0.648-4.327,1.876-4.327,3.91v2.264c0,1.224,0.685,2.155,1.759,2.845l0.396,9.265c0,1.381,3.274,2.5,7.312,2.5c4.038,0,7.313-1.119,7.313-2.5l0.405-9.493c0.885-0.664,1.438-1.521,1.438-2.617V9.562C24.812,7.625,23.101,6.42,20.826,5.75zM11.093,24.127c-0.476-0.286-1.022-0.846-1.166-1.237c-1.007-2.76-0.73-4.921-0.529-7.509c0.747,0.28,1.58,0.491,2.45,0.642c-0.216,2.658-0.43,4.923,0.003,7.828C11.916,24.278,11.567,24.411,11.093,24.127zM17.219,24.329c-0.019,0.445-0.691,0.856-1.517,0.856c-0.828,0-1.498-0.413-1.517-0.858c-0.126-2.996-0.032-5.322,0.068-8.039c0.418,0.022,0.835,0.037,1.246,0.037c0.543,0,1.097-0.02,1.651-0.059C17.251,18.994,17.346,21.325,17.219,24.329zM21.476,22.892c-0.143,0.392-0.69,0.95-1.165,1.235c-0.474,0.284-0.817,0.151-0.754-0.276c0.437-2.93,0.214-5.209-0.005-7.897c0.881-0.174,1.708-0.417,2.44-0.731C22.194,17.883,22.503,20.076,21.476,22.892zM11.338,9.512c0.525,0.173,1.092-0.109,1.268-0.633h-0.002l0.771-2.316h4.56l0.771,2.316c0.14,0.419,0.53,0.685,0.949,0.685c0.104,0,0.211-0.017,0.316-0.052c0.524-0.175,0.808-0.742,0.633-1.265l-1.002-3.001c-0.136-0.407-0.518-0.683-0.945-0.683h-6.002c-0.428,0-0.812,0.275-0.948,0.683l-1,2.999C10.532,8.77,10.815,9.337,11.338,9.512z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Twitter();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Twitter = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Twitter.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Twitter\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M23.295,22.567h-7.213c-2.125,0-4.103-2.215-4.103-4.736v-1.829h11.232c1.817,0,3.291-1.469,3.291-3.281c0-1.813-1.474-3.282-3.291-3.282H11.979V6.198c0-1.835-1.375-3.323-3.192-3.323c-1.816,0-3.29,1.488-3.29,3.323v11.633c0,6.23,4.685,11.274,10.476,11.274h7.211c1.818,0,3.318-1.463,3.318-3.298S25.112,22.567,23.295,22.567z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.TwitterBird();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.TwitterBird = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.TwitterBird.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.TwitterBird\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.605,13.11c0.913-2.851,2.029-4.698,3.313-6.038c0.959-1,1.453-1.316,0.891-0.216c0.25-0.199,0.606-0.464,0.885-0.605c1.555-0.733,1.442-0.119,0.373,0.54c2.923-1.045,2.82,0.286-0.271,0.949c2.527,0.047,5.214,1.656,5.987,5.077c0.105,0.474-0.021,0.428,0.464,0.514c1.047,0.186,2.03,0.174,2.991-0.13c-0.104,0.708-1.039,1.167-2.497,1.471c-0.541,0.112-0.651,0.083-0.005,0.229c0.799,0.179,1.69,0.226,2.634,0.182c-0.734,0.846-1.905,1.278-3.354,1.296c-0.904,3.309-2.976,5.678-5.596,7.164c-6.152,3.492-15.108,2.984-19.599-3.359c2.947,2.312,7.312,2.821,10.555-0.401c-2.125,0-2.674-1.591-0.99-2.449c-1.595-0.017-2.608-0.521-3.203-1.434c-0.226-0.347-0.229-0.374,0.14-0.64c0.405-0.293,0.958-0.423,1.528-0.467c-1.651-0.473-2.66-1.335-3.009-2.491c-0.116-0.382-0.134-0.363,0.256-0.462c0.38-0.097,0.87-0.148,1.309-0.17C6.11,10.88,5.336,9.917,5.139,8.852c-0.186-1.006,0.005-0.748,0.758-0.46C9.263,9.68,12.619,11.062,14.605,13.11L14.605,13.11z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Umbrella();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Umbrella = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Umbrella.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Umbrella\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M14.784,26.991c0,1.238-1.329,1.696-1.835,1.696c-0.504,0-1.536-0.413-1.65-1.812c0-0.354-0.288-0.642-0.644-0.642c-0.354,0-0.641,0.287-0.641,0.642c0.045,1.056,0.756,3.052,2.935,3.052c2.432,0,3.166-1.882,3.166-3.144v-8.176l-1.328-0.024C14.787,18.584,14.784,25.889,14.784,26.991zM15.584,9.804c-6.807,0-11.084,4.859-11.587,8.326c0.636-0.913,1.694-1.51,2.89-1.51c1.197,0,2.22,0.582,2.855,1.495c0.638-0.904,1.69-1.495,2.88-1.495c1.2,0,2.26,0.6,2.896,1.517c0.635-0.917,1.83-1.517,3.03-1.517c1.19,0,2.241,0.591,2.879,1.495c0.636-0.913,1.659-1.495,2.855-1.495c1.197,0,2.254,0.597,2.89,1.51C26.669,14.663,22.393,9.804,15.584,9.804zM14.733,7.125v2.081h1.323V7.125c0-0.365-0.296-0.661-0.661-0.661C15.029,6.464,14.733,6.76,14.733,7.125z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Undo();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Undo = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Undo.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Undo\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M12.981,9.073V6.817l-12.106,6.99l12.106,6.99v-2.422c3.285-0.002,9.052,0.28,9.052,2.269c0,2.78-6.023,4.263-6.023,4.263v2.132c0,0,13.53,0.463,13.53-9.823C29.54,9.134,17.952,8.831,12.981,9.073z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Unlock();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Unlock = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Unlock.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Unlock\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M20.375,12.833h-2.209V10c0,0,0,0,0-0.001c0-2.389,1.945-4.333,4.334-4.333c2.391,0,4.335,1.944,4.335,4.333c0,0,0,0,0,0v2.834h2V9.999h-0.001c-0.001-3.498-2.836-6.333-6.334-6.333S16.166,6.502,16.166,10v2.833H3.125V25h17.25V12.833z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Usb();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Usb = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Usb.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Usb\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M15.5,1.667L13.745,4.74h1.252v15.709L11.8,17.391c-0.205-0.26-0.351-0.601-0.358-0.952c0-1.417-0.001-2.258-0.001-2.568c0.592-0.21,1.02-0.774,1.02-1.444c0-0.849-0.682-1.538-1.521-1.538c-0.84,0-1.521,0.689-1.521,1.538c0,0.67,0.427,1.234,1.019,1.444l-0.001,2.539c0,0.688,0.373,1.409,0.812,1.868c-0.013-0.013-0.027-0.025,0,0c0.011,0.01,3.392,3.245,3.392,3.245c0.205,0.26,0.35,0.6,0.357,0.951v1.776c-1.161,0.236-2.036,1.272-2.036,2.517c0,1.418,1.137,2.566,2.539,2.566c1.403,0,2.54-1.148,2.54-2.566c0-1.244-0.875-2.28-2.038-2.517v-1.746c0-0.005,0-0.009,0-0.014v-3.861c0.008-0.35,0.152-0.689,0.358-0.949c0,0,3.38-3.234,3.392-3.245c0.027-0.026,0.012-0.013,0,0c0.438-0.459,0.811-1.181,0.811-1.869V10.12h1.02V7.046h-3.041v3.075h1.018c0,0-0.002,0.644-0.002,2.476c-0.008,0.351-0.152,0.692-0.357,0.952l-3.198,3.06V4.74h1.254L15.5,1.667z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.User();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.User = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.User.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.User\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M20.771,12.364c0,0,0.849-3.51,0-4.699c-0.85-1.189-1.189-1.981-3.058-2.548s-1.188-0.454-2.547-0.396c-1.359,0.057-2.492,0.792-2.492,1.188c0,0-0.849,0.057-1.188,0.397c-0.34,0.34-0.906,1.924-0.906,2.321s0.283,3.058,0.566,3.624l-0.337,0.113c-0.283,3.283,1.132,3.68,1.132,3.68c0.509,3.058,1.019,1.756,1.019,2.548s-0.51,0.51-0.51,0.51s-0.452,1.245-1.584,1.698c-1.132,0.452-7.416,2.886-7.927,3.396c-0.511,0.511-0.453,2.888-0.453,2.888h26.947c0,0,0.059-2.377-0.452-2.888c-0.512-0.511-6.796-2.944-7.928-3.396c-1.132-0.453-1.584-1.698-1.584-1.698s-0.51,0.282-0.51-0.51s0.51,0.51,1.02-2.548c0,0,1.414-0.397,1.132-3.68H20.771z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Users();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Users = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Users.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Users\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.053,20.8c-1.132-0.453-1.584-1.698-1.584-1.698s-0.51,0.282-0.51-0.51s0.51,0.51,1.02-2.548c0,0,1.414-0.397,1.132-3.68h-0.34c0,0,0.849-3.51,0-4.699c-0.85-1.189-1.189-1.981-3.058-2.548s-1.188-0.454-2.547-0.396c-1.359,0.057-2.492,0.792-2.492,1.188c0,0-0.849,0.057-1.188,0.397c-0.34,0.34-0.906,1.924-0.906,2.321s0.283,3.058,0.566,3.624l-0.337,0.113c-0.283,3.283,1.132,3.68,1.132,3.68c0.509,3.058,1.019,1.756,1.019,2.548s-0.51,0.51-0.51,0.51s-0.452,1.245-1.584,1.698c-1.132,0.452-7.416,2.886-7.927,3.396c-0.511,0.511-0.453,2.888-0.453,2.888h26.947c0,0,0.059-2.377-0.452-2.888C28.469,23.686,22.185,21.252,21.053,20.8zM8.583,20.628c-0.099-0.18-0.148-0.31-0.148-0.31s-0.432,0.239-0.432-0.432s0.432,0.432,0.864-2.159c0,0,1.199-0.336,0.959-3.119H9.538c0,0,0.143-0.591,0.237-1.334c-0.004-0.308,0.006-0.636,0.037-0.996l0.038-0.426c-0.021-0.492-0.107-0.939-0.312-1.226C8.818,9.619,8.53,8.947,6.947,8.467c-1.583-0.48-1.008-0.385-2.159-0.336C3.636,8.179,2.676,8.802,2.676,9.139c0,0-0.72,0.048-1.008,0.336c-0.271,0.271-0.705,1.462-0.757,1.885v0.281c0.047,0.653,0.258,2.449,0.469,2.872l-0.286,0.096c-0.239,2.783,0.959,3.119,0.959,3.119c0.432,2.591,0.864,1.488,0.864,2.159s-0.432,0.432-0.432,0.432s-0.383,1.057-1.343,1.439c-0.061,0.024-0.139,0.056-0.232,0.092v5.234h0.575c-0.029-1.278,0.077-2.927,0.746-3.594C2.587,23.135,3.754,22.551,8.583,20.628zM30.913,11.572c-0.04-0.378-0.127-0.715-0.292-0.946c-0.719-1.008-1.008-1.679-2.59-2.159c-1.584-0.48-1.008-0.385-2.16-0.336C24.72,8.179,23.76,8.802,23.76,9.139c0,0-0.719,0.048-1.008,0.336c-0.271,0.272-0.709,1.472-0.758,1.891h0.033l0.08,0.913c0.02,0.231,0.022,0.436,0.027,0.645c0.09,0.666,0.21,1.35,0.33,1.589l-0.286,0.096c-0.239,2.783,0.96,3.119,0.96,3.119c0.432,2.591,0.863,1.488,0.863,2.159s-0.432,0.432-0.432,0.432s-0.053,0.142-0.163,0.338c4.77,1.9,5.927,2.48,6.279,2.834c0.67,0.667,0.775,2.315,0.746,3.594h0.48v-5.306c-0.016-0.006-0.038-0.015-0.052-0.021c-0.959-0.383-1.343-1.439-1.343-1.439s-0.433,0.239-0.433-0.432s0.433,0.432,0.864-2.159c0,0,0.804-0.229,0.963-1.841v-1.227c-0.001-0.018-0.001-0.033-0.003-0.051h-0.289c0,0,0.215-0.89,0.292-1.861V11.572z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Video();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Video = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Video.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Video\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M27.188,4.875v1.094h-4.5V4.875H8.062v1.094h-4.5V4.875h-1v21.25h1v-1.094h4.5v1.094h14.625v-1.094h4.5v1.094h1.25V4.875H27.188zM8.062,23.719h-4.5v-3.125h4.5V23.719zM8.062,19.281h-4.5v-3.125h4.5V19.281zM8.062,14.844h-4.5v-3.125h4.5V14.844zM8.062,10.406h-4.5V7.281h4.5V10.406zM11.247,20.59V9.754l9.382,5.418L11.247,20.59zM27.188,23.719h-4.5v-3.125h4.5V23.719zM27.188,19.281h-4.5v-3.125h4.5V19.281zM27.188,14.844h-4.5v-3.125h4.5V14.844zM27.188,10.406h-4.5V7.281h4.5V10.406z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.View();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.View = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.View.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.View\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M16,8.286C8.454,8.286,2.5,16,2.5,16s5.954,7.715,13.5,7.715c5.771,0,13.5-7.715,13.5-7.715S21.771,8.286,16,8.286zM16,20.807c-2.649,0-4.807-2.157-4.807-4.807s2.158-4.807,4.807-4.807s4.807,2.158,4.807,4.807S18.649,20.807,16,20.807zM16,13.194c-1.549,0-2.806,1.256-2.806,2.806c0,1.55,1.256,2.806,2.806,2.806c1.55,0,2.806-1.256,2.806-2.806C18.806,14.451,17.55,13.194,16,13.194z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Vim();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Vim = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Vim.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Vim\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M25.012,10.44l4.571-4.645c0.11-0.113,0.173-0.264,0.173-0.423V3.134c0-0.159-0.064-0.314-0.177-0.427l-0.604-0.602c-0.111-0.112-0.261-0.176-0.42-0.177l-9.646-0.086C18.71,1.84,18.523,1.935,18.41,2.099L17.807,2.96c-0.033,0.047-0.059,0.099-0.076,0.154l-2.144-2.156l0,0l-1.646,1.666l-0.447-0.497c-0.112-0.125-0.27-0.197-0.438-0.199L3.324,1.756c-0.163-0.003-0.322,0.06-0.437,0.176L2.284,2.535C2.171,2.647,2.107,2.803,2.107,2.962v2.325c0,0.164,0.066,0.32,0.183,0.434l0.657,0.635C3.056,6.461,3.2,6.521,3.352,6.525l0.285,0.007l0.007,6.512l-2.527,2.557l2.533,2.533l0.008,8.084c0,0.159,0.065,0.314,0.177,0.427l0.861,0.861c0.112,0.111,0.268,0.176,0.427,0.176h2.67c0.161,0,0.317-0.064,0.43-0.181l2.378-2.417l4.9,4.9l14.47-14.558L25.012,10.44zM9.747,24.232l-2.208,2.242H5.372l-0.509-0.509L4.856,19.34l-0.008-7.515L4.842,5.943c0-0.328-0.261-0.594-0.588-0.603L3.617,5.326L3.313,5.031v-1.82l0.245-0.245l9.215,0.163l0.319,0.354l0.126,0.141v1.419l-0.352,0.362H12.26c-0.331,0-0.6,0.266-0.603,0.597l-0.076,7.203c-0.002,0.244,0.141,0.463,0.365,0.56c0.224,0.096,0.482,0.049,0.657-0.12l7.495-7.235c0.174-0.171,0.23-0.432,0.139-0.66c-0.09-0.228-0.312-0.377-0.56-0.377h-0.479l-0.296-0.379V3.496l0.312-0.445l9.083,0.081l0.252,0.252v1.743l-4.388,4.458L9.747,24.232z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Volume0();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Volume0 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Volume0.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Volume0\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M4.998,12.127v7.896h4.495l6.729,5.526l0.004-18.948l-6.73,5.526H4.998z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Volume1();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Volume1 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Volume1.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.Volume1\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M4.998,12.127v7.896h4.495l6.729,5.526l0.004-18.948l-6.73,5.526H4.998z M18.806,11.219c-0.393-0.389-1.024-0.389-1.415,0.002c-0.39,0.391-0.39,1.024,0.002,1.416v-0.002c0.863,0.864,1.395,2.049,1.395,3.366c0,1.316-0.531,2.497-1.393,3.361c-0.394,0.389-0.394,1.022-0.002,1.415c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.708-0.293c1.222-1.22,1.98-2.915,1.979-4.776C20.788,14.136,20.027,12.439,18.806,11.219z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Volume2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Volume2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Volume2.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Volume2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M4.998,12.127v7.896h4.495l6.729,5.526l0.004-18.948l-6.73,5.526H4.998z M18.806,11.219c-0.393-0.389-1.024-0.389-1.415,0.002c-0.39,0.391-0.39,1.024,0.002,1.416v-0.002c0.863,0.864,1.395,2.049,1.395,3.366c0,1.316-0.531,2.497-1.393,3.361c-0.394,0.389-0.394,1.022-0.002,1.415c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.708-0.293c1.222-1.22,1.98-2.915,1.979-4.776C20.788,14.136,20.027,12.439,18.806,11.219z M21.101,8.925c-0.393-0.391-1.024-0.391-1.413,0c-0.392,0.391-0.392,1.025,0,1.414c1.45,1.451,2.344,3.447,2.344,5.661c0,2.212-0.894,4.207-2.342,5.659c-0.392,0.39-0.392,1.023,0,1.414c0.195,0.195,0.451,0.293,0.708,0.293c0.256,0,0.512-0.098,0.707-0.293c1.808-1.809,2.929-4.315,2.927-7.073C24.033,13.24,22.912,10.732,21.101,8.925z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Volume3();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Volume3 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Volume3.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Volume3\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M4.998,12.127v7.896h4.495l6.729,5.526l0.004-18.948l-6.73,5.526H4.998z M18.806,11.219c-0.393-0.389-1.024-0.389-1.415,0.002c-0.39,0.391-0.39,1.024,0.002,1.416v-0.002c0.863,0.864,1.395,2.049,1.395,3.366c0,1.316-0.531,2.497-1.393,3.361c-0.394,0.389-0.394,1.022-0.002,1.415c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.708-0.293c1.222-1.22,1.98-2.915,1.979-4.776C20.788,14.136,20.027,12.439,18.806,11.219z M21.101,8.925c-0.393-0.391-1.024-0.391-1.413,0c-0.392,0.391-0.392,1.025,0,1.414c1.45,1.451,2.344,3.447,2.344,5.661c0,2.212-0.894,4.207-2.342,5.659c-0.392,0.39-0.392,1.023,0,1.414c0.195,0.195,0.451,0.293,0.708,0.293c0.256,0,0.512-0.098,0.707-0.293c1.808-1.809,2.929-4.315,2.927-7.073C24.033,13.24,22.912,10.732,21.101,8.925z M23.28,6.746c-0.393-0.391-1.025-0.389-1.414,0.002c-0.391,0.389-0.391,1.023,0.002,1.413h-0.002c2.009,2.009,3.248,4.773,3.248,7.839c0,3.063-1.239,5.828-3.246,7.838c-0.391,0.39-0.391,1.023,0.002,1.415c0.194,0.194,0.45,0.291,0.706,0.291s0.513-0.098,0.708-0.293c2.363-2.366,3.831-5.643,3.829-9.251C27.115,12.389,25.647,9.111,23.28,6.746z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Warning();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Warning = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Warning.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Warning\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M29.225,23.567l-3.778-6.542c-1.139-1.972-3.002-5.2-4.141-7.172l-3.778-6.542c-1.14-1.973-3.003-1.973-4.142,0L9.609,9.853c-1.139,1.972-3.003,5.201-4.142,7.172L1.69,23.567c-1.139,1.974-0.207,3.587,2.071,3.587h23.391C29.432,27.154,30.363,25.541,29.225,23.567zM16.536,24.58h-2.241v-2.151h2.241V24.58zM16.428,20.844h-2.023l-0.201-9.204h2.407L16.428,20.844z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.WheelChair();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.WheelChair = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.WheelChair.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.WheelChair\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M20.373,19.85c0,4.079-3.318,7.397-7.398,7.397c-4.079,0-7.398-3.318-7.398-7.397c0-2.466,1.213-4.652,3.073-5.997l-0.251-2.21c-2.875,1.609-4.825,4.684-4.825,8.207c0,5.184,4.217,9.4,9.401,9.4c4.395,0,8.093-3.031,9.117-7.111L20.37,19.73C20.37,19.771,20.373,19.81,20.373,19.85zM11.768,6.534c1.321,0,2.392-1.071,2.392-2.392c0-1.321-1.071-2.392-2.392-2.392c-1.321,0-2.392,1.071-2.392,2.392C9.375,5.463,10.446,6.534,11.768,6.534zM27.188,22.677l-5.367-7.505c-0.28-0.393-0.749-0.579-1.226-0.538c-0.035-0.003-0.071-0.006-0.106-0.006h-6.132l-0.152-1.335h4.557c0.53,0,0.96-0.429,0.96-0.959c0-0.53-0.43-0.959-0.96-0.959h-4.776l-0.25-2.192c-0.146-1.282-1.303-2.203-2.585-2.057C9.869,7.271,8.948,8.428,9.094,9.71l0.705,6.19c0.136,1.197,1.154,2.078,2.332,2.071c0.004,0,0.007,0.001,0.012,0.001h8.023l4.603,6.436c0.439,0.615,1.338,0.727,2.007,0.248C27.442,24.178,27.628,23.292,27.188,22.677z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Windows();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Windows = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Windows.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Windows\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M20.023,17.484c-1.732-0.205-3.022-0.908-4.212-1.701l0,0l-0.559,0.279l-2.578,8.924l0,0c1.217,0.805,2.905,1.707,4.682,1.914c2.686,0.312,5.56-0.744,6.391-1.195l2.617-9.061l-0.559-0.279C25.805,16.365,23.193,17.857,20.023,17.484zM14.424,14.825c-1.267-0.87-2.578-1.652-4.375-1.816c-0.318-0.029-0.627-0.042-0.925-0.042c-3.011,0-4.948,1.347-4.948,1.347l-2.565,8.877l0,0l0.526,0.281c0.981-0.476,2.78-1.145,5.09-0.984c1.665,0.113,2.92,0.781,4.117,1.531l0.507-0.26l0,0L14.424,14.825zM10.201,12.094c1.664,0.114,2.921,0.78,4.117,1.533l0.509-0.26l0,0L17.4,4.431c-1.27-0.87-2.579-1.653-4.377-1.816c-0.318-0.029-0.626-0.042-0.924-0.042C9.088,2.573,7.15,3.92,7.15,3.92l-2.566,8.878L5.11,13.08C6.092,12.604,7.891,11.936,10.201,12.094zM28.779,5.971L28.779,5.971c0,0.001-2.609,1.492-5.779,1.119c-1.734-0.204-3.023-0.907-4.213-1.701L18.227,5.67l-2.576,8.923l0,0c1.215,0.803,2.906,1.709,4.68,1.915c2.687,0.312,5.558-0.745,6.392-1.197l2.615-9.059L28.779,5.971z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Woman();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Woman = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Woman.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Woman\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M21.022,16.349c-0.611-1.104-1.359-1.998-2.109-2.623c-0.875,0.641-1.941,1.031-3.104,1.031c-1.164,0-2.231-0.391-3.105-1.031c-0.75,0.625-1.498,1.519-2.111,2.623c-1.422,2.563-1.579,5.192-0.351,5.874c0.55,0.307,1.127,0.078,1.723-0.496c-0.105,0.582-0.167,1.213-0.167,1.873c0,2.932,1.139,5.307,2.543,5.307c0.846,0,1.265-0.865,1.466-2.189c0.201,1.324,0.62,2.189,1.464,2.189c1.406,0,2.545-2.375,2.545-5.307c0-0.66-0.061-1.291-0.168-1.873c0.598,0.574,1.174,0.803,1.725,0.496C22.603,21.541,22.444,18.912,21.022,16.349zM15.808,13.757c2.363,0,4.279-1.916,4.279-4.279s-1.916-4.279-4.279-4.279c-2.363,0-4.28,1.916-4.28,4.279S13.445,13.757,15.808,13.757zM18.731,4.974c1.235,0.455,0.492-0.725,0.492-1.531s0.762-1.792-0.492-1.391c-1.316,0.422-2.383,0.654-2.383,1.461S17.415,4.489,18.731,4.974zM15.816,4.4c0.782,0,0.345-0.396,0.345-0.884c0-0.488,0.438-0.883-0.345-0.883s-0.374,0.396-0.374,0.883C15.442,4.005,15.034,4.4,15.816,4.4zM12.884,4.974c1.316-0.484,2.383-0.654,2.383-1.461S14.2,2.474,12.884,2.052c-1.254-0.402-0.492,0.584-0.492,1.391S11.648,5.428,12.884,4.974z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Wrench();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Wrench = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Wrench.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Wrench\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M26.834,14.693c1.816-2.088,2.181-4.938,1.193-7.334l-3.646,4.252l-3.594-0.699L19.596,7.45l3.637-4.242c-2.502-0.63-5.258,0.13-7.066,2.21c-1.907,2.193-2.219,5.229-1.039,7.693L5.624,24.04c-1.011,1.162-0.888,2.924,0.274,3.935c1.162,1.01,2.924,0.888,3.935-0.274l9.493-10.918C21.939,17.625,24.918,16.896,26.834,14.693z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Wrench2();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Wrench2 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Wrench2.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Wrench2\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M24.946,9.721l-2.872-0.768l-0.771-2.874l3.188-3.231c-1.992-0.653-4.268-0.192-5.848,1.391c-1.668,1.668-2.095,4.111-1.279,6.172l-3.476,3.478l-3.478,3.478c-2.062-0.816-4.504-0.391-6.173,1.277c-1.583,1.581-2.043,3.856-1.39,5.849l3.231-3.188l2.874,0.77l0.769,2.872l-3.239,3.197c1.998,0.665,4.288,0.207,5.876-1.384c1.678-1.678,2.1-4.133,1.271-6.202l3.463-3.464l3.464-3.463c2.069,0.828,4.523,0.406,6.202-1.272c1.592-1.589,2.049-3.878,1.384-5.876L24.946,9.721z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.Wrench3();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.Wrench3 = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.Wrench3.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.Wrench3\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   *\n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M27.839,6.775l-3.197,3.239L21.77,9.246l-0.771-2.874l3.188-3.231c-1.992-0.653-4.268-0.192-5.848,1.391c-1.668,1.668-2.095,4.111-1.279,6.172L7.42,20.344c-0.204-0.032-0.408-0.062-0.621-0.062c-2.173,0-3.933,1.759-3.933,3.933c0,2.173,1.76,3.933,3.933,3.933c2.171,0,3.931-1.76,3.933-3.933c0-0.24-0.03-0.473-0.071-0.7l9.592-9.59c2.069,0.828,4.523,0.406,6.202-1.272C28.047,11.062,28.504,8.772,27.839,6.775zM6.799,25.146c-0.517,0-0.933-0.418-0.935-0.933c0.002-0.515,0.418-0.933,0.935-0.933c0.514,0,0.932,0.418,0.932,0.933S7.313,25.146,6.799,25.146z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ZoomIn();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ZoomIn = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ZoomIn.prototype */\n  {\n\n  NAME: \"draw2d.shape.icon.ZoomIn\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M22.646,19.307c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127l3.535-3.537L22.646,19.307zM13.688,20.369c-3.582-0.008-6.478-2.904-6.484-6.484c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486C20.165,17.465,17.267,20.361,13.688,20.369zM15.687,9.051h-4v2.833H8.854v4.001h2.833v2.833h4v-2.834h2.832v-3.999h-2.833V9.051z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n\n *\n * @example\n *\n *    let icon =  new draw2d.shape.icon.ZoomOut();\n *\n *    canvas.add(icon,50,10);\n *\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.shape.icon.Icon\n */\ndraw2d.shape.icon.ZoomOut = draw2d.shape.icon.Icon.extend(\n  /** @lends draw2d.shape.icon.ZoomOut.prototype */\n  {\n  \n  NAME: \"draw2d.shape.icon.ZoomOut\",\n\n  /**\n   *\n   * Creates a new icon element which are not assigned to any canvas.\n   * \n   * @param {Object} attr the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 50, height: 50}, attr), setter, getter)\n  },\n\n  /**\n   * @private\n   * @returns {Object} the raphaelJS path object\n   */\n  createSet: function () {\n    return this.canvas.paper.path(\"M22.646,19.307c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127l3.535-3.537L22.646,19.307zM13.688,20.369c-3.582-0.008-6.478-2.904-6.484-6.484c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486C20.165,17.465,17.267,20.361,13.688,20.369zM8.854,11.884v4.001l9.665-0.001v-3.999L8.854,11.884z\")\n  }\n})\n\n","import draw2d from '../../packages'\n\n/**\n * @class\n *\n * FlexGridLayout is a powerful, flexible and precise layout manager that aligns components vertically and\n * horizontally in a dynamic rectangular grid of cells, with each component occupying in one or more cell.\n * To define a form layout you specify the form's columns, rows. Everyhing that applies to columns applies\n * to rows too - just with a different orientation. FlexGridLayout uses the same API, algorithms and implementation\n * for column and rows.\n *\n * FlexGridLayout focuses on form-oriented panels much like the 'Segment' panel. Nevertheless, it is a general purpose\n * layout system that can be used for the vast majority of rectangular layouts.\n *\n * Define your layout with:\n * <ul>\n *  <li>[number]px</li>\n *  <li>grow</li>\n *  <li>pref</li>\n * </ul>\n *\n * e.g. we want build a shape with a border on the left and right and a label in the\n * center. We allow the center to grow, the shape is resizeable.\n *\n * <pre>\n *    10px       grow         10px\n *\n *    -----+------------------+-----\n *    |    |  [LABEL]         |    |\n *    |    |                  |    |\n *    |    |                  |    |    grow\n *    |    |                  |    |\n *    |    |                  |    |\n *    -----+------------------+-----\n * </pre>\n *\n * The number forces the exact width or height of the cell. <b>grow</b> respect the minimum width of the\n * element and allows to resize the shape. The row/col with the <b>grow</b> declaration will be resized.\n * The <b>pref</b> declaration forces the cell to the minimum width/height of the embedded figure.\n *\n * Example Implementation of a shape:\n *\n * @example\n *    let PredefinedProcess = draw2d.shape.layout.FlexGridLayout.extend({\n *\n *\n *         //     10px       grow         10px\n *         //\n *         //    -----+------------------+-----\n *         //    |    |  [LABEL]         |    |\n *         //    |    |                  |    |\n *         //    |    |                  |    |    grow\n *         //    |    |                  |    |\n *         //    |    |                  |    |\n *         //    -----+------------------+-----\n *         //\n *         // @param attr\n *         //\n *        init: function(attr, setter, getter)\n *        {\n *           this._super(extend({\n *                columns:\"10px, grow, 10px\",\n *                rows:   \"grow\",\n *                bgColor:\"#FFFFFF\",\n *                stroke:2\n *            },attr),\n *           setter,\n *            getter);\n *\n *\n *            this.label = new draw2d.shape.basic.Label({text:\"Process Name\", resizeable:true, stroke:2});\n *            this.label.installEditor(new draw2d.ui.LabelInplaceEditor());\n *            this.add(this.label, {row:0, col:1});\n *\n *            this.setDimension(120,80);\n *        }\n *    });\n *    let shape = new PredefinedProcess();\n *    canvas.add(shape,10,10);\n *\n *\n * @author Andreas Herz\n * @extends draw2d.shape.layout.Layout\n * @since 2.5.1\n */\ndraw2d.shape.layout.FlexGridLayout = draw2d.shape.layout.Layout.extend(\n  /** @lends draw2d.shape.layout.FlexGridLayout.prototype */\n  {\n  \n  NAME: \"draw2d.shape.layout.FlexGridLayout\",\n\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this.cellLocator = {\n      relocate: (index, figure) => {\n        if (this.gridDef.layoutRequired === true) {\n          this._layout()\n        }\n        let cell = figure.__cellConstraint\n        let x = cell.x\n        let y = cell.y\n\n        // stretch the figure to fill the complete cell\n        //\n        if (figure.isResizeable()) {\n          figure.setDimension(\n            Math.max(figure.getMinWidth(), cell.width),\n            Math.max(figure.getMinHeight(), cell.height))\n        }\n        // else apply the valign and align property\n        //\n        else {\n          // apply vertical alignment\n          //\n          switch (cell.valign) {\n            case \"middle\":\n              y += (cell.height - figure.getHeight()) / 2\n              break\n            case \"bottom\":\n              y += (cell.height - figure.getHeight())\n              break\n          }\n\n          // apply horizontal alignment\n          //\n          switch (cell.align) {\n            case \"center\":\n              x += (cell.width - figure.getWidth()) / 2\n              break\n            case \"right\":\n              x += (cell.width - figure.getWidth())\n              break\n          }\n        }\n        figure.setPosition(x, y)\n      },\n      bind: () => {},\n      unbind: () => { },\n      translate: (figure, diff) => {\n        figure.setPosition(figure.x + diff.x, figure.y + diff.y)\n      }\n    }\n\n    this.debug = false\n    this.gridDef = {\n      debugLines: [],\n      def_cols: [],\n      def_rows: [],\n      min_height: [],\n      min_width: [],\n      minGridWidth: 10,\n      minGridHeight: 10,\n      hResizeable: false,\n      vResizeable: false,\n      layoutRequired: true\n    }\n\n    this._super(\n      {stroke: 2, ...attr},\n      setter,\n      getter)\n\n    this.resizeListener =  (figure) => {\n      this.gridDef.layoutRequired = true\n      // propagate the event to the parent or other listener if existing\n      //\n      if (this.getParent() instanceof draw2d.shape.layout.Layout) {\n        this.fireEvent(\"resize\")\n      }\n      // or we are the parent and must consume it self\n      else {\n        this.setDimension(\n          this.gridDef.hResizeable === true ? this.getWidth() : 1,\n          this.gridDef.vResizeable === true ? this.getHeight() : 1\n        )\n      }\n    }\n\n    let rows = attr.rows.split(\",\")\n    let columns = attr.columns.split(\",\")\n    for (let i = 0; i < columns.length; i++) {\n      this.gridDef.def_cols[i] = this.cellWidthFromDef(columns[i])\n    }\n\n    for (let i = 0; i < rows.length; i++) {\n      this.gridDef.def_rows[i] = this.cellWidthFromDef(rows[i])\n    }\n\n    this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy())\n  },\n\n  add: function (figure, cellConstraint) {\n\n    figure.__cellConstraint = {\n      row: 0,\n      col: 0,\n      rowspan: 1,\n      colspan: 1,\n      align: \"left\",\n      valign: \"top\",\n      width: 1,\n      height: 1,\n      ...cellConstraint}\n    this.gridDef.layoutRequired = true\n    this._super(figure, this.cellLocator)\n    this._layout()\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getMinWidth: function () {\n    return this.gridDef.minGridWidth\n  },\n\n  /**\n   * @inheritdoc\n   */\n  getMinHeight: function () {\n    return this.gridDef.minGridHeight\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setCanvas: function (canvas) {\n    // layout must be recalculated if the shape will be assigned\n    // to a canvas. \"Text\" elements can now calculate correct with the right font settings.\n    //\n    this.gridDef.layoutRequired = true\n    this._super(canvas)\n\n    return this\n  },\n\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return this\n    }\n    this._super(attributes)\n    if (this.debug) {\n      this.paintDebugGrid()\n    }\n\n    return this\n  },\n\n  setDimension: function (w, h) {\n    // we need the calculated layout to determine the min width/height of the figure\n    //\n    if (this.gridDef.layoutRequired === true) {\n      this._layout()\n    }\n    // set the new dimension\n    this._super(w, h)\n\n    // after setting the new dimension a recalculation of the layout is required. May the shape\n    // has grown up\n    this.gridDef.layoutRequired = true\n    this.repaint()\n\n    return this\n  },\n\n  _layout: function () {\n    this.gridDef.layoutRequired = false\n\n    let figures = this.getChildren()\n\n    // copy the initial requested width/heights\n    //\n    this.gridDef.min_height = this.gridDef.def_rows.slice(0)\n    this.gridDef.min_width = this.gridDef.def_cols.slice(0)\n\n    // Calculate the basic width/height of the elements without considering the \"span\" and \"grow\"\n    //\n    for (let i = 0; i < figures.getSize(); i++) {\n      let figure = figures.get(i)\n      let cell = figure.__cellConstraint\n      // ermitteln der derzeitig zur verfügung stehenden weite\n      this.gridDef.min_width[cell.col] = Math.max(this.gridDef.min_width[cell.col], figure.getMinWidth())\n\n      // Falls das Elemente eine y_span hat, dann versuchen ob es auf die ganze\n      // höhe rein passt. Wenn nicht wird der Teil der 'grow' angegeben hat verändert.\n      // Wenn kein Element 'grow' angegeben hat, dann wird das letzte Element verändert\n      if (cell.rowspan > 1) {\n        let eHeight = figure.getMinHeight()\n        let cHeight = this.cellHeight(cell.row, cell.row + cell.rowspan)\n        if (cHeight < eHeight) {\n          let diff = eHeight - cHeight\n          this.gridDef.min_height[cell.row + cell.rowspan - 1] = this.gridDef.min_height[cell.row + cell.rowspan - 1] + diff\n        }\n      }\n      else {\n        this.gridDef.min_height[cell.row] = Math.max(this.gridDef.min_height[cell.row], figure.getMinHeight())\n      }\n    }\n    this.gridDef.minGridWidth = this._getGridWidth()\n    this.gridDef.minGridHeight = this._getGridHeight()\n\n    // Resize the grid height if at least one row supports \"grow\"\n    //\n    let gridHeight = this._getGridHeight()\n    for (let i = 0; i < this.gridDef.def_rows.length; i++) {\n      // row found which can grow\n      if (this.gridDef.def_rows[i] === -1) {\n        this.gridDef.min_height[i] = this.gridDef.min_height[i] + Math.max(0, this.getHeight() - gridHeight)\n        this.gridDef.vResizeable = true\n        break\n      }\n    }\n\n    // Resize the grid if at least one column supports \"grow\"\n    //\n    let gridWidth = this._getGridWidth()\n    for (let i = 0; i < this.gridDef.def_cols.length; i++) {\n      // column found which can grow\n      if (this.gridDef.def_cols[i] === -1) {\n        this.gridDef.min_width[i] = this.gridDef.min_width[i] + Math.max(0, this.getWidth() - gridWidth)\n        this.gridDef.hResizeable = true\n        break\n      }\n    }\n\n    // apply the cell constraints to the elements\n    //\n    for (let i = 0; i < figures.getSize(); i++) {\n      let cell = figures.get(i).__cellConstraint\n      cell.width = this.cellWidth(cell.col, cell.col + cell.colspan)\n      cell.height = this.cellHeight(cell.row, cell.row + cell.rowspan)\n      cell.x = this.cellX(cell.col)\n      cell.y = this.cellY(cell.row)\n    }\n\n    return this\n  },\n\n  cellX: function (col) {\n    let r = 0\n    for (let i = 0; i < col; i++) {\n      r = r + this.gridDef.min_width[i]\n    }\n\n    return r\n  },\n\n  cellY: function (row) {\n    let r = 0\n    for (let i = 0; i < row; i++) {\n      r = r + this.gridDef.min_height[i]\n    }\n\n    return r\n  },\n\n  cellWidth: function (from, to) {\n    let r = 0\n    for (let i = from; i < to; i++) {\n      r = r + this.gridDef.min_width[i]\n    }\n\n    return r\n  },\n\n  cellHeight: function (from, to) {\n    let r = 0\n    for (let i = from; i < to; i++) {\n      r = r + this.gridDef.min_height[i]\n    }\n\n    return r\n  },\n\n  paintDebugGrid: function () {\n    // alte Linien erstmal entfernen bevor man neue zeichnet\n    //\n    for (let i = 0; i < this.gridDef.debugLines.length; i++)\n      this.gridDef.debugLines[i].remove()\n    this.gridDef.debugLines = []\n\n    let gridHeight = this._getGridHeight()\n    let gridWidth = this._getGridWidth()\n    let posX = this.getAbsoluteX()\n    let posY = this.getAbsoluteY()\n\n    // draw the cols first\n    let x = posX\n    for (let i = 0; i <= this.gridDef.min_width.length; i++) {\n      let newLine = this.canvas.paper.path(\"M \" + x + \" \" + posY + \" l 0 \" + gridHeight).attr({\n        \"stroke\": \"#FF0000\",\n        \"stroke-width\": 1\n      })\n      this.gridDef.debugLines.push(newLine)\n      if (i < this.gridDef.min_width.length)\n        x = x + this.gridDef.min_width[i]\n    }\n\n    let y = posY\n    for (let i = 0; i <= this.gridDef.min_height.length; i++) {\n      let newLine = this.canvas.paper.path(\"M \" + posX + \" \" + y + \" l \" + gridWidth + \" 0\").attr({\n        \"stroke\": \"#FF0000\",\n        \"stroke-width\": 1\n      })\n      this.gridDef.debugLines.push(newLine)\n      if (i < this.gridDef.min_height.length)\n        y = y + this.gridDef.min_height[i]\n    }\n  },\n\n  _getGridWidth: function () {\n    let gridWidth = 0\n    for (let i = 0; i < this.gridDef.min_width.length; i++) {\n      gridWidth = gridWidth + this.gridDef.min_width[i]\n    }\n\n    return gridWidth\n  },\n\n  _getGridHeight: function () {\n    let gridHeight = 0\n    for (let i = 0; i < this.gridDef.min_height.length; i++) {\n      gridHeight = gridHeight + this.gridDef.min_height[i]\n    }\n\n    return gridHeight\n  },\n\n\n  cellWidthFromDef: function (def) {\n    let pattern = new RegExp(\"(\\\\d+)(?:px)?\")\n    let match = def.match(pattern)\n\n    if (match != null) {\n      return parseInt(match[1])\n    }\n\n    pattern = new RegExp(\"p(?:ref)?\")\n    match = def.match(pattern)\n    if (match != null) {\n      return 0\n    }\n\n    pattern = new RegExp(\"g(?:row)?\")\n    match = def.match(pattern)\n    if (match != null) {\n      this.autoResize = false\n      return -1\n    }\n\n    return 0\n  }\n\n\n})\n\n\n\n","import draw2d from '../../packages'\n\n/**\n * @class\n * The HorizontalLayout class arranges the layout elements in a horizontal sequence,\n * left to right, with optional gaps between the elements.\n *\n * During the execution of the setDimension() method, the minimum width of the container is calculated\n * by accumulating the minimum sizes of the elements, including stroke, gaps and padding.\n *\n *\n * See the example below with and without gap and border settings\n *\n *\n * @example\n *\n *    // first container without any gap and a border of the parent\n *    // container\n *    let label1 =  new draw2d.shape.basic.Label({text:\"Label 1\"});\n *    let label2 =  new draw2d.shape.basic.Label({text:\"Label 2\"});\n *    let label3 =  new draw2d.shape.basic.Label({text:\"Label 3\"});\n *\n *    let container1 = new draw2d.shape.layout.HorizontalLayout();\n *\n *    container1.add(label1);\n *    container1.add(label2);\n *    container1.add(label3);\n *    container1.setGap(10);\n *    container1.setStroke(2);\n *    canvas.add(container1,50,10);\n *\n *    // second container without any gab or border\n *    //\n *    let label11 =  new draw2d.shape.basic.Label({text:\"Label 1\"});\n *    let label12 =  new draw2d.shape.basic.Label({text:\"Label 2\"});\n *    let label13 =  new draw2d.shape.basic.Label({text:\"Label 3\"});\n *\n *    let container2 = new draw2d.shape.layout.HorizontalLayout();\n *\n *    container2.add(label11);\n *    container2.add(label12);\n *    container2.add(label13);\n *\n *    canvas.add(container2,50,90);\n *\n *\n * @author Andreas Herz\n * @extends draw2d.shape.layout.Layout\n * @since 2.5.1\n */\ndraw2d.shape.layout.HorizontalLayout = draw2d.shape.layout.Layout.extend(\n  /** @lends draw2d.shape.layout.HorizontalLayout.prototype */\n  {\n\n    NAME: \"draw2d.shape.layout.HorizontalLayout\",\n\n    /**\n     * Create a new instance\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function (attr, setter, getter) {\n      this.gap = 0\n      let _this = this\n      this.locator = {\n        translate: function (figure, diff) {\n          figure.setPosition(figure.x + diff.x, figure.y + diff.y)\n        },\n        bind: function () {\n        },\n        unbind: function () {\n        },\n        relocate: function (index, target) {\n          let stroke = _this.getStroke()\n          let yPos = stroke + _this.padding.top\n          let xPos = stroke + _this.padding.left // respect the border and padding of the parent\n          for (let i = 0; i < index; i++) {\n            let child = _this.children.get(i).figure\n            if (child.isVisible()) {\n              xPos += child.getWidth() + _this.gap\n            }\n          }\n\n          target.setPosition(xPos, yPos)\n        }\n      }\n\n      this._super(\n        {width: 1, height: 1, gap: 0, ...attr},\n        {\n          // @attr {Number} gap the gap between the children shapes */\n          gap: this.setGap,\n          ...setter},\n        {\n          gap: this.getGap,\n          ...getter}\n      )\n\n    },\n\n\n    /**\n     * @inheritdoc\n     */\n    add: function (child, locator, index) {\n      this._super(child, this.locator, index)\n\n      this.setDimension(1, 1)\n\n      return this\n    },\n\n    /**\n     *\n     * Set the gap width between child components within this layout.\n     * This will only affect the space between components, not the space around all the components in the layout.\n     *\n     * @param {Number} gap The space, in pixels, between items.\n     * @since 2.5.1\n     */\n    setGap: function (gap) {\n      this.gap = gap\n      // this forces a relayout of the element\n      this.setDimension(1, 1)\n\n      return this\n    },\n\n    /**\n     *\n     * Return the gap between the children shapes\n     *\n     * @since 5.0.0\n     *\n     */\n    getGap: function () {\n      return this.gap\n    },\n\n    /**\n     * @inheritdoc\n     */\n    getMinWidth: function () {\n      let _this = this\n      let width = this.stroke * 2 + this.padding.left + this.padding.right\n      let gap = 0\n\n      this.children.each(function (i, e) {\n        if (e.figure.isVisible()) {\n          width += (e.figure.isResizeable() ? e.figure.getMinWidth() : e.figure.getWidth() + gap)\n          gap = _this.gap\n        }\n      })\n\n      return width\n    },\n\n    /**\n     * @inheritdoc\n     */\n    getMinHeight: function () {\n      let markup = (this.stroke * 2) + this.padding.top + this.padding.bottom\n      let height = 0\n\n      this.children.each(function (i, e) {\n        height = Math.max(height, (e.figure.isResizeable() ? e.figure.getMinHeight() : e.figure.getHeight()))\n      })\n\n      return height + markup\n    },\n\n    /**\n     * @inheritdoc\n     */\n    setDimension: function (w, h) {\n      this._super(w, h)\n\n      let diff = this.width - this.getMinWidth()\n      if (diff > 0) {\n        diff = (diff / this.children.getSize()) | 0\n        this.children.each(function (i, e) {\n          if (e.figure.isResizeable() === true) {\n            e.figure.setDimension(e.figure.getMinWidth() + diff, e.figure.getHeight())\n          }\n        })\n      } else {\n        let minHeight = this.getMinHeight()\n        this.children.each(function (i, e) {\n          // The layout respect the \"resizeable\" flag because a layout is a kind of layouter and\n          // any kind of autolayouter must respect this flag\n          if (e.figure.isResizeable() === true) {\n            // reset the shape to the minimum width/height. see setMinWidth/setMinHeight\n            e.figure.setDimension(1, minHeight)\n          }\n        })\n      }\n\n      return this\n    },\n\n\n    /**\n     * @inheritdoc\n     */\n    getPersistentAttributes: function () {\n      let memento = this._super()\n\n      memento.gap = this.gap\n\n      return memento\n    },\n\n\n    /**\n     * @inheritdoc\n     */\n    setPersistentAttributes: function (memento) {\n      this._super(memento)\n\n      if (typeof memento.gap === \"number\") {\n        this.gap = memento.gap\n      }\n\n      return this\n    }\n\n  })\n\n\n\n","import draw2d from '../../packages'\n\n/**\n * @class\n *\n * A base class for positioning child figures and determining the ideal size for\n * a figure with children.\n *\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.Rectangle\n */\ndraw2d.shape.layout.Layout = draw2d.shape.basic.Rectangle.extend(\n  /** @lends draw2d.shape.layout.Layout.prototype */\n  {\n\n  NAME: \"draw2d.shape.layout.Layout\",\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    // @since 4.3.3\n    this.padding = {top: 0, right: 0, bottom: 0, left: 0}\n\n    this._super({bgColor: null, radius: 0, stroke: 0, ...attr},\n      {\n        // @attr {Number} padding the padding in pixel around the text */\n        padding: this.setPadding,\n        ...setter\n      },\n      {\n        padding: this.getPadding,\n        ...getter\n      }\n    )\n\n\n    this.resizeListener =  figure => {\n      // propagate the event to the parent or other listener if existing\n      //\n      if (this.getParent() instanceof draw2d.shape.layout.Layout) {\n        this.fireEvent(\"resize\")\n      }\n      // or we are the parent and must consume it self\n      else {\n        this.setDimension(1, 1)\n        this.fireEvent(\"resize\")\n      }\n    }\n\n    this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy())\n  },\n\n  /**\n   * @inheritdoc\n   */\n  add: function (child, locator, index) {\n    this._super(child, locator, index)\n\n    child.on(\"resize\", this.resizeListener)\n    child.on(\"change:visibility\", this.resizeListener)\n\n    // don't use the getter/setter. This considers the canvas assignment and\n    // the child is always invisible. BIG BUG. The example shape_db will break if you change this.\n//       child.setVisible(this.isVisible());\n    // respect the \"visible\" flag of the child as well\n    child.visible = child.visible && this.visible\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  remove: function (child) {\n    let r = this._super(child)\n    child.off(this.resizeListener)\n    this.setDimension(1, 1)\n\n    return r\n  },\n\n\n  /**\n   * \n   * Set the padding of the element\n   *\n   *     // Alternatively you can use the attr method:\n   *     //\n   *     // set the padding for top,left,bottom,right in one call\n   *     figure.attr({\n   *       padding: 3\n   *     });\n   *\n   *     // update the padding left and top\n   *     figure.attr({\n   *       padding: {left:3, top:30}\n   *     });\n   *\n   * @param {Number|Object} padding The new padding\n   * @since 4.3.3\n   **/\n  setPadding: function (padding) {\n    if (typeof padding === \"number\") {\n      this.padding = {top: padding, right: padding, bottom: padding, left: padding}\n    }\n    else {\n      this.padding = {...this.padding, ...padding}\n    }\n    this.fireEvent(\"change:padding\", {value: this.padding})\n\n    // force a relayout of the figure\n    this.setDimension(1, 1)\n\n\n    return this\n  },\n\n\n  /**\n   * \n   * Get the padding of the element.\n   *\n   * @since 4.3.3\n   * @returns {this}\n   **/\n  getPadding: function () {\n    return this.padding\n  },\n\n  /**\n   * @inheritdoc\n   * @returns {this}\n   */\n  setVisible: function (flag) {\n    // propagate the visibility to all children too.\n    //\n    this.children.each(function (i, e) {\n      e.figure.setVisible(flag)\n    })\n\n\n    this._super(flag)\n\n    // force a relayout of the shape because the dimension has been changed\n    // by enable/disable of child shapes\n    this.setDimension(1, 1)\n\n    return this\n  },\n\n  /**\n   * \n   * Returns the Command to perform the specified Request or null.\n   *\n   * @param {draw2d.command.CommandType} request describes the Command being requested\n   * @returns {draw2d.command.Command} null or a Command\n   * @private\n   **/\n  createCommand: function (request) {\n    // it is not possible to rate a layout object\n    // ..at the moment\n    if (request.getPolicy() === draw2d.command.CommandType.ROTATE) {\n      return null\n    }\n\n\n    return this._super(request)\n  }\n})\n\n\n\n","import draw2d from '../../packages'\n\n/**\n * @class\n * Using the StackLayout as their layout shape have their children placed on top of one another.\n * Order of placement is determined by the order in which the children were added, first child\n * added placed on the bottom. Only one child is visible at once.\n *\n * @author Andreas Herz\n * @extends draw2d.shape.layout.Layout\n */\ndraw2d.shape.layout.StackLayout = draw2d.shape.layout.Layout.extend(\n  /** @lends draw2d.shape.layout.StackLayout.prototype */\n  {\n  \n  NAME: \"draw2d.shape.layout.StackLayout\",\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this.visibleLayer = 0\n    this.locator = new draw2d.layout.locator.XYAbsPortLocator(0, 0)\n\n    this._super(\n      {resizeable: true, width: 10, height: 10, ...attr},\n      { ...setter},\n      { ...getter})\n\n    this.resizeListener =  () => {}\n\n    // install default selection handler. Can be overridden or replaced\n    this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy())\n  },\n\n  /**\n   *\n   * Set the current visible layer of the stack layout\n   *\n   * @param {Number} visibleLayer the layer to show or -1 to hide all of them\n   */\n  setVisibleLayer: function (visibleLayer, duration) {\n    if(this.visibleLayer>=0) {\n      this.getChildren().get(this.visibleLayer).setVisible(false, duration)\n    }\n    this.visibleLayer = Math.min(this.getChildren().getSize() - 1, Math.max(-1, visibleLayer))\n\n    if(this.visibleLayer>=0){\n      this.getChildren().get(this.visibleLayer).setVisible(true, duration)\n    }\n    return this\n  },\n\n  /**\n   *\n   * Returns the current visible layer\n   *\n   * @returns {Number}\n   */\n  getVisibleLayer: function () {\n    return this.visibleLayer\n  },\n\n  /**\n   * @inheritdoc\n   */\n  add: function (child, locator, index) {\n    // the child didn't care about events...at the moment\n    //\n    child.hitTest =  () =>  false\n\n    // make all existing shapes invisible\n    //\n    this.getChildren().each( (i, c) => {\n      c.setVisible(false)\n    })\n    this.visibleLayer = this.getChildren().getSize()\n\n    // ignore the parameter \"locator\" and use the locator for the stack layout instead\n    return this._super(child, this.locator, index)\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setVisible: function (flag) {\n    draw2d.shape.basic.Rectangle.prototype.setVisible.call(this, flag)\n\n\n    return this\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getMinWidth: function () {\n    let markup = (this.stroke * 2) + this.padding.left + this.padding.right\n    let width = 10\n    this.children.each( (i, e)=> {\n      width = Math.max(width, e.figure.isResizeable() ? e.figure.getMinWidth() : e.figure.getWidth())\n    })\n    return width + markup\n  },\n\n  /**\n   * @inheritdoc\n   */\n  getMinHeight: function () {\n    let markup = (this.stroke * 2) + this.padding.top + this.padding.bottom\n    let height = 10\n    this.children.each( (i, e) =>{\n      height = Math.max(height, e.figure.isResizeable() ? e.figure.getMinHeight() : e.figure.getHeight())\n    })\n    return height + markup\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setDimension: function (w, h) {\n    this._super(w, h)\n\n    let width = this.width - this.padding.left - this.padding.right\n    let height = this.height - this.padding.top - this.padding.bottom\n    if (width === this._recursiveWidth && height === this._recursiveHeight) {\n      return this\n    }\n    this._recursiveHeight = height\n    this._recursiveWidth = width\n\n    this.children.each( (i, e) =>{\n      if (e.figure.isResizeable()) {\n        e.figure.setDimension(width, height)\n      }\n    })\n\n    delete this._recursiveHeight\n    delete this._recursiveWidth\n\n    return this\n  }\n\n})\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * The TableLayout class arranges the children in a row/column order. Each cell can be styled\n * with valign, align and padding.\n *\n *\n * See the example below with and without padding or alignment settings\n *\n *\n * @example\n *\n *        let label1 =  new draw2d.shape.basic.Label({text:\"[0,1] with long long long long label\", fontColor:\"#00AF00\"});\n *        let label2 =  new draw2d.shape.basic.Label({text:\"[1,1] padding:10\", fontColor:\"#00AF00\"});\n *        let label3 =  new draw2d.shape.basic.Label({text:\"[2,1] align:right\", fontColor:\"#00AF00\"});\n *        let label4 =  new draw2d.shape.basic.Label({text:\"[3,1] resize:true\",resizeable:true, fontColor:\"#00AF00\"});\n *\n *        let container = new draw2d.shape.layout.TableLayout();\n *\n *        container.addRow(\"[0,0]\", label1 ,\"[0,2] align:center\");\n *        container.addRow(\"[1,0] valign:bottom\", label2,\"[1,2] long long long label\");\n *        container.addRow(\"[2,0]\", label3,\"[2,2]\");\n *        container.addRow(\"[3,0]\", label4,\"[3,2]\");\n *\n *        container.setPadding(0);\n *        container.setCellPadding(1,1, 10);\n *\n *        container.setCellAlign(0,2, \"center\");\n *        container.setCellAlign(2,1, \"right\");\n *\n *        container.setCellVerticalAlign(1, 0, \"bottom\");\n *        canvas.add(container,10,10);\n *\n *\n * @author Andreas Herz\n * @extends draw2d.shape.layout.Layout\n * @since 5.3.0\n */\ndraw2d.shape.layout.TableLayout = draw2d.shape.layout.Layout.extend(\n  /** @lends draw2d.shape.layout.TableLayout.prototype */\n  {\n\n  NAME: \"draw2d.shape.layout.TableLayout\",\n\n  DUMMY_CELL: {\n    getMinHeight: function () {\n      return 1\n    },\n    getMinWidth: function () {\n      return 1\n    },\n    off: function () {\n    }\n  },\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    let _this = this\n    this.cellLocator = {\n      relocate: function (index, figure) {\n        if (_this.repaintBlocked === true) {\n          return\n        }\n        let cell = figure.__cell\n        let layout = _this.getCellLayout(cell.row, cell.column)\n        let outerWidth = _this.getWidth()\n        let minWidth = _this.getMinWidth()\n        let widthOffset = 0\n        if (outerWidth != minWidth) {\n          widthOffset = ((outerWidth - minWidth) / _this.layoutInfos[0].length) * cell.column\n        }\n\n        let width = figure.getWidth()\n        let height = figure.getHeight()\n        let x = layout.x + _this.padding.left + layout.padding.left + widthOffset\n        let y = layout.y + _this.padding.top + layout.padding.top\n\n        // stretch the figure to fill the complete cell\n        //\n        if (figure.isResizeable()) {\n          let w = Math.max(figure.getMinWidth(), layout.w - (layout.padding.left + layout.padding.right) + widthOffset)\n          let h = Math.max(figure.getMinHeight(), layout.h - (layout.padding.top + layout.padding.bottom))\n          figure.setDimension(w, h)\n        }\n        // else apply the valign and align property\n        //\n        else {\n          // apply vertical alignment\n          //\n          switch (layout.valign) {\n            case \"middle\":\n              y = y + (layout.h - (height + layout.padding.top + layout.padding.bottom)) / 2\n              break\n            case \"bottom\":\n              y = y + (layout.h - (height + layout.padding.top + layout.padding.bottom))\n              break\n          }\n\n          // apply horizontal alignment\n          //\n          switch (layout.align) {\n            case \"center\":\n              x = x + (layout.w - (width + layout.padding.left + layout.padding.right)) / 2 + (widthOffset / 2)\n              break\n            case \"right\":\n              x = x + (layout.w - (width + layout.padding.left + layout.padding.right)) + widthOffset\n              break\n          }\n        }\n        figure.setPosition(x, y)\n      },\n      bind: function () {\n      },\n      unbind: function () {\n      },\n      translate: function (figure, diff) {\n        figure.setPosition(figure.x + diff.x, figure.y + diff.y)\n      }\n    }\n\n    this.padding = {top: 4, right: 4, bottom: 4, left: 4}\n\n    this.grid = []\n    this.layoutInfos = []\n    this.layoutInfos[0] = []\n    this.layoutInfos[0][0] = {x: 0, y: 0, w: 1, h: 1, valign: \"top\", align: \"left\"}\n\n\n    this._super(\n      extend({stroke: 1, resizeable: false}, attr),\n      extend({\n        // @attr {Number} padding the padding in pixel around the text */\n        padding: this.setPadding\n      }, setter),\n      extend({\n        padding: this.getPadding\n      }, getter))\n\n\n  },\n\n  /**\n   * \n   * Set the padding of the given cell.\n   *\n   *\n   * @param {Number|Object} padding The new padding\n   **/\n  setCellPadding: function (row, column, padding) {\n    let layout = this.getCellLayout(row, column)\n    if (layout === null) {\n      return this\n    }\n\n    if (typeof padding === \"number\") {\n      layout.padding = {top: padding, right: padding, bottom: padding, left: padding}\n    }\n    else {\n      extend(layout.padding, padding)\n    }\n\n    this.calculateLayout()\n    this.setDimension(1, 1)\n\n    return this\n  },\n\n  /**\n   * \n   * Get the padding of the outer grid.\n   *\n   **/\n  getCellPadding: function (row, column) {\n\n    let layout = this.getCellLayout(row, column)\n    if (layout === null || typeof layout.padding === \"undefined\") {\n      return {top: 0, right: 0, bottom: 0, left: 0}\n    }\n    return layout.padding\n  },\n\n\n  /**\n   * \n   * Set the padding of the outer grid.\n   *\n   *     // Alternatively you can use the attr method:\n   *     //\n   *     // set the padding for top,left,bottom,right in one call\n   *     figure.attr({\n   *       padding: 3\n   *     });\n   *\n   *     // update the padding left and top\n   *     figure.attr({\n   *       padding: {left:3, top:30}\n   *     });\n   *\n   * @param {Number|Object} padding The new padding\n   **/\n  setPadding: function (padding) {\n    if (typeof padding === \"number\") {\n      this.padding = {top: padding, right: padding, bottom: padding, left: padding}\n    }\n    else {\n      this.padding = extend(this.padding, padding)\n    }\n    this.calculateLayout()\n    this.setDimension(1, 1)\n    this.fireEvent(\"change:padding\", {value: this.padding})\n\n    return this\n  },\n\n  /**\n   * \n   * Get the padding of the outer grid.\n   *\n   **/\n  getPadding: function () {\n    return this.padding\n  },\n\n  setCanvas: function (canvas) {\n    this._super(canvas)\n    this.calculateLayout()\n    this.setDimension(2, 2)\n\n    return this\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  add: function (child, locator, index) {\n    this._super(child, locator, index)\n\n    this.setDimension(1, 1)\n\n    return this\n  },\n\n  /**\n   *\n   * \n   * Removes the row from the TableLayout\n   *\n   * @returns the removed row\n   */\n  removeRow: function (index) {\n    let _this = this\n    let removedRow = this.grid.splice(index, 1)\n    removedRow[0].forEach(function (figure) {\n      _this.remove(figure)\n    })\n\n    this.calculateLayout()\n    this.setDimension(2, 2)\n\n    return removedRow\n  },\n\n\n  /**\n   * \n   * Add a row to the table grid.\n   * This method has a variable argument list. All arguments are added in one row.\n   *\n   * @param {Array} figures variable count of figures to add as one row\n   */\n  addRow: function () {\n    let figuresToAdd = []\n    let _this = this\n    let args = Array.prototype.slice.call(arguments) // sometimes js is stupid...\n\n    let rowCount = this.grid.length + 1\n    let columnCount = this.grid.length > 0 ? Math.max(this.grid[0].length, args.length) : args.length\n\n    let row = []\n\n    args.forEach(function (figure, index) {\n      if (typeof figure === \"string\") {\n        figure = new draw2d.shape.basic.Label({text: figure})\n      }\n      row.push(figure)\n      figuresToAdd.push(figure)\n    })\n    this.grid.push(row)\n\n    // adjust the columns. All rows must have the same column count. Add empty cells\n    // if required.\n    //\n    this.grid.forEach(function (row, index) {\n      let missingColumns = columnCount - row.length\n      for (let i = 0; i < missingColumns; i++) {\n        row.push(_this.DUMMY_CELL)\n      }\n    })\n\n    let orig = this.repaintBlocked\n    this.repaintBlocked = true\n    figuresToAdd.forEach(function (figure) {\n      _this.add(figure, _this.cellLocator)\n    })\n    this.repaintBlocked = orig\n\n    this.calculateLayout()\n    this.setDimension(1, 1)\n\n    return this\n  },\n\n  getMinWidth: function () {\n    // return some good default if we are not part of the canvas.\n    // A real width/height calculation isn'T possible if the canvas not set\n    if (this.canvas === null || this.layoutInfos.length === 0) {\n      return 10\n    }\n\n    let bottom = this.layoutInfos[this.layoutInfos.length - 1]\n    let layout = bottom[bottom.length - 1]\n\n    return layout.w + layout.x + this.padding.left + this.padding.right\n  },\n\n  getMinHeight: function () {\n    // return some good default if we are not part of the canvas.\n    // A real width/height calculation isn'T possible if the canvas not set\n    if (this.canvas === null || this.layoutInfos.length === 0) {\n      return 10\n    }\n\n    let bottom = this.layoutInfos[this.layoutInfos.length - 1]\n    let layout = bottom[bottom.length - 1]\n\n    return layout.h + layout.y + this.padding.top + this.padding.bottom\n  },\n\n\n  /**\n   * \n   * Set the vertical alignment of a cell. Possible values are\n   * <ul>\n   * <li>top</li>\n   * <li>middle</li>\n   * <li>bottom</li>\n   * </ul>\n   *\n   * @param {Number} row  The row index of the cell. Starting by 0\n   * @param {Number} column The column index of the cell. Starting by 0\n   * @param {String} align The vertical alignment of the cell\n   */\n  setCellVerticalAlign: function (row, column, valign) {\n    let layout = this.getCellLayout(row, column)\n    if (layout === null) {\n      return // silently\n    }\n\n    switch (valign) {\n      case \"top\":\n      case \"middle\":\n      case \"bottom\":\n        layout.valign = valign\n        this.calculateLayout()\n        this.setDimension(1, 1)\n    }\n\n    return this\n  },\n\n  /**\n   * \n   * Get the vertical alignment of a cell. Possible values are\n   * <ul>\n   * <li>top</li>\n   * <li>middle</li>\n   * <li>bottom</li>\n   * </ul>\n   *\n   * @param {Number} row  The row index of the cell. Starting by 0\n   * @param {Number} column The column index of the cell. Starting by 0\n   * @returns {String} The vertical alignment of the cell\n   */\n  getCellVerticalAlign: function (row, column) {\n    let layout = this.getCellLayout(row, column)\n    if (layout === null) {\n      return \"top\"\n    }\n\n    return layout.valign\n  },\n\n\n  /**\n   * \n   * Set the alignment of a cell. Possible values are\n   * <ul>\n   * <li>left</li>\n   * <li>center</li>\n   * <li>right</li>\n   * </ul>\n   *\n   *\n   * @param {Number} row  The row index of the cell. Starting by 0\n   * @param {Number} column The column index of the cell. Starting by 0\n   * @param {String} align The horizontal alignment of the cell\n   */\n  setCellAlign: function (row, column, align) {\n\n    let layout = this.getCellLayout(row, column)\n    if (layout === null) {\n      return // silently\n    }\n\n    switch (align) {\n      case \"left\":\n      case \"center\":\n      case \"right\":\n        layout.align = align\n        this.calculateLayout()\n        this.setDimension(1, 1)\n    }\n\n    return this\n  },\n\n  /**\n   * \n   * Return the alignment of a cell. Possible values are\n   * <ul>\n   * <li>left</li>\n   * <li>center</li>\n   * <li>right</li>\n   * </ul>\n   *\n   *\n   * @param {Number} row  The row index of the cell. Starting by 0\n   * @param {Number} column The column index of the cell. Starting by 0\n   * return {String} The horizontal alignment of the cell\n   */\n  getCellAlign: function (row, column) {\n\n    let layout = this.getCellLayout(row, column)\n    if (layout === null) {\n      return \"left\"\n    }\n    return layout.align\n  },\n\n\n  /**\n   * \n   * Return the layout information for the given row/column or <b>null</b>\n   * if the row/column index is out of range.\n   *\n   * @private\n   */\n  getCellLayout: function (row, column) {\n    if (row < 0 || column < 0) {\n      return null // silently\n    }\n\n    if (row >= this.layoutInfos.length) {\n      return null // silently\n    }\n\n    let layouts = this.layoutInfos[row]\n    if (column >= layouts.length) {\n      return null // silently\n    }\n\n    return layouts[column]\n  },\n\n  /**\n   * \n   * Recalculate the layout of the table\n   *\n   * @private\n   */\n  calculateLayout: function () {\n    let _this = this\n    let rowCount = this.grid.length\n    let columnCount = this.grid.length > 0 ? this.grid[0].length : 0\n\n    let newLayoutInfos = []\n    for (let row = 0; row < rowCount; row++) {\n      newLayoutInfos[row] = []\n      for (let column = 0; column < columnCount; column++) {\n        newLayoutInfos[row][column] = {\n          width: 0,\n          height: 0,\n          x: 0,\n          y: 0,\n          valign: this.getCellVerticalAlign(row, column),\n          align: this.getCellAlign(row, column),\n          padding: this.getCellPadding(row, column)\n        }\n      }\n    }\n\n    // determine the heights/widths of the grid\n    //\n    let layoutWidths = new Array(columnCount + 1).join('0').split('').map(parseFloat)\n    let layoutHeights = new Array(rowCount + 1).join('0').split('').map(parseFloat)\n    this.grid.forEach(function (figures, row) {\n      for (let column = 0; column < columnCount; column++) {\n        let layout = newLayoutInfos[row][column]\n        let figure = figures[column]\n        figure.__cell = {row: row, column: column}\n        layoutHeights[row] = Math.max(layoutHeights[row], figure.getMinHeight() + layout.padding.top + layout.padding.bottom)\n        layoutWidths[column] = Math.max(layoutWidths[column], figure.getMinWidth() + layout.padding.left + layout.padding.right)\n      }\n    })\n\n    let x = 0, y = 0\n    for (let row = 0; row < rowCount; row++) {\n      for (let column = 0; column < columnCount; column++) {\n        let layout = newLayoutInfos[row][column]\n        layout.w = layoutWidths[column]\n        layout.h = layoutHeights[row]\n        layout.x = x\n        layout.y = y\n        x = x + layout.w\n      }\n      y = y + layoutHeights[row]\n      x = 0\n    }\n\n    this.layoutInfos = newLayoutInfos\n\n    return this\n  }\n})\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * The VerticalLayout class arranges the layout elements in a vertical sequence,\n * left to right, with optional gaps between the elements.\n *\n * During the execution of the setDimension() method, the minimum height of the container is calculated\n * by accumulating the minimum sizes of the elements, including stroke, gaps and padding.\n *\n * See the example below with and without gap and border settings\n *\n *\n * @example\n *\n *    // first container without any gap and a border of the parent\n *    // container\n *    let label1 =  new draw2d.shape.basic.Label({text:\"Label 1\"});\n *    let label2 =  new draw2d.shape.basic.Label({text:\"Label 2\"});\n *    let label3 =  new draw2d.shape.basic.Label({text:\"Label 3\"});\n *\n *    let container1 = new draw2d.shape.layout.VerticalLayout();\n *\n *    container1.add(label1);\n *    container1.add(label2);\n *    container1.add(label3);\n *    container1.setGap(10);\n *    container1.setStroke(2);\n *    canvas.add(container1,50,10);\n *\n *    // second container without any gab or border\n *    //\n *    let label11 =  new draw2d.shape.basic.Label({text:\"Label 1\"});\n *    let label12 =  new draw2d.shape.basic.Label({text:\"Label 2\"});\n *    let label13 =  new draw2d.shape.basic.Label({text:\"Label 3\"});\n *\n *    let container2 = new draw2d.shape.layout.VerticalLayout();\n *\n *    container2.add(label11);\n *    container2.add(label12);\n *    container2.add(label13);\n *\n *    canvas.add(container2,150,10);\n *\n * @author Andreas Herz\n * @extends draw2d.shape.layout.Layout\n */\ndraw2d.shape.layout.VerticalLayout = draw2d.shape.layout.Layout.extend(\n  /** @lends draw2d.shape.layout.VerticalLayout.prototype */\n  {\n\n  NAME: \"draw2d.shape.layout.VerticalLayout\",\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    // some layout parameter\n    //\n    this.gap = 0\n\n    // \"this\" shortcut to avoid $.proxy\n    let _this = this\n\n    this.locator = {\n      translate: function (figure, diff) {\n        figure.setPosition(figure.x + diff.x, figure.y + diff.y)\n      },\n      bind: function () {\n      },\n      unbind: function () {\n      },\n      relocate: function (index, target) {\n        let stroke = _this.getStroke()\n        let yPos = stroke + _this.padding.top // respect the border and padding of the shape\n        let xPos = _this.padding.left\n\n        for (let i = 0; i < index; i++) {\n          let child = _this.children.get(i).figure\n          if (child.isVisible()) {\n            yPos += child.getHeight() + _this.gap\n          }\n        }\n\n        target.setPosition(xPos, yPos)\n      }\n    }\n\n    this._super(\n      extend({width: 10, height: 10}, attr),\n      extend({\n        // @attr {Number} gap the gap between the children shapes */\n        gap: this.setGap\n      }, setter),\n      extend({\n        gap: this.getGap\n      }, getter))\n\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  add: function (child, locator, index) {\n    this._super(child, this.locator, index)\n\n    this.setDimension(1, 1)\n\n    return this\n  },\n\n\n  /**\n   * \n   * Set the gap width between child components within this layout.\n   * This will only affect the space between components, not the space around all the components in the layout.\n   *\n   * @param {Number} gap The space, in pixels, between items.\n   */\n  setGap: function (gap) {\n    this.gap = gap\n    // this forces a relayout of the element\n    this.setDimension(1, 1)\n  },\n\n  /**\n   * @inheritdoc\n   */\n  getMinWidth: function () {\n    let markup = (this.stroke * 2) + this.padding.left + this.padding.right\n    let width = 10\n    this.children.each(function (i, e) {\n      if (e.figure.isVisible())\n        width = Math.max(width, e.figure.isResizeable() ? e.figure.getMinWidth() : e.figure.getWidth())\n    })\n    return width + markup\n  },\n\n  /**\n   * @inheritdoc\n   */\n  getMinHeight: function () {\n    let _this = this\n    let gap = 0\n    let markup = (this.stroke * 2) + this.padding.top + this.padding.bottom\n    let height = 0\n\n    this.children.each(function (i, e) {\n      if (e.figure.isVisible()) {\n        height += ((e.figure.isResizeable() ? e.figure.getMinHeight() : e.figure.getHeight()) + gap)\n        // first element is iterated. Now we must add the gap to all next elements\n        gap = _this.gap\n      }\n    })\n\n    return height + markup\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setDimension: function (w, h) {\n    this._super(w, h)\n\n    let width = this.width - this.padding.left - this.padding.right\n    if (width === this._recursiveWidth) {\n      return this\n    }\n    this._recursiveWidth = width\n\n    this.children.each(function (i, e) {\n      if (e.figure.isResizeable() && e.figure.isVisible()) {\n        e.figure.setDimension(width, e.figure.getMinHeight())\n      }\n    })\n\n    delete this._recursiveWidth\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  getPersistentAttributes: function () {\n    let memento = this._super()\n\n    memento.gap = this.gap\n\n    return memento\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    if (typeof memento.gap === \"number\") {\n      this.gap = memento.gap\n    }\n\n    return this\n  }\n\n\n})\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * A simple Node which has a  InputPort and OutputPort. Mainly used for demo and examples.\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.node.Between({color: \"#3d3d3d\"});\n *\n *    canvas.add(figure,50,10);\n *\n * @extends draw2d.shape.basic.Rectangle\n */\ndraw2d.shape.node.Between = draw2d.shape.basic.Rectangle.extend(\n  /** @lends draw2d.shape.node.Between.prototype */\n  {\n  \n  NAME: \"draw2d.shape.node.Between\",\n\n  DEFAULT_COLOR: new draw2d.util.Color(\"#4D90FE\"),\n\n  /**\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({\n      bgColor: this.DEFAULT_COLOR,\n      color: this.DEFAULT_COLOR.darker(),\n      width: 50,\n      height: 50\n    }, attr), setter, getter)\n\n    this.createPort(\"output\")\n    this.createPort(\"input\")\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * A simple Node which has a InputPort. Mainly used for demo and examples.\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.node.End({color: \"#3d3d3d\"});\n *\n *    canvas.add(figure,50,10);\n *\n * @extends draw2d.shape.basic.Rectangle\n */\ndraw2d.shape.node.End = draw2d.shape.basic.Rectangle.extend(\n  /** @lends draw2d.shape.node.End.prototype */\n  {\n  \n  NAME: \"draw2d.shape.node.End\",\n\n  DEFAULT_COLOR: new draw2d.util.Color(\"#4D90FE\"),\n\n  /**\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({\n      bgColor: this.DEFAULT_COLOR,\n      color: this.DEFAULT_COLOR.darker(),\n      width: 50,\n      height: 50\n    }, attr), setter, getter)\n\n    this.createPort(\"input\")\n\n  }\n\n})\n","import draw2d from '../../packages'\nimport jsonUtil from '../../util/JSONUtil'\n\n\n/**\n * @class\n *\n * A horizontal bus shape with a special kind of port handling. The hole figure is a hybrid port.\n *\n *\n * @example\n *\n *    canvas.add( new draw2d.shape.node.Fulcrum(),50,10);\n *    canvas.add( new draw2d.shape.node.Fulcrum(),80,100);\n *    canvas.add( new draw2d.shape.node.Fulcrum(),150,50);\n *\n * @extends draw2d.shape.node.Hub\n */\ndraw2d.shape.node.Fulcrum = draw2d.shape.node.Hub.extend(\n  /** @lends draw2d.shape.node.Fulcrum.prototype */\n  {\n\n  NAME: \"draw2d.shape.node.Fulcrum\",\n\n  /**\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({width: 40, height: 40}, attr), setter, getter)\n\n\n    this.port.setConnectionAnchor(new draw2d.layout.anchor.ConnectionAnchor(this.port))\n    this.port.setVisible(true)\n    this.port.hitTest = this.port._orig_hitTest\n\n    this.setConnectionDirStrategy(0)\n    this.setColor(null)\n    this.setRadius(10)\n    this.setBackgroundColor(null)\n    this.setStroke(0)\n    this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy())\n  },\n\n  /**\n   * @inheritdoc\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return this\n    }\n\n    attributes ??= {}\n\n    // set some good defaults if the parent didn't\n    attributes.fill ??=this.bgColor.rgba()\n\n    return this._super(attributes)\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A horizontal bus shape with a special kind of port handling. The hole figure is a hybrid port.\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.node.HorizontalBus({width:300, height:20, text:\"Horizontal Bus\"});\n *\n *    canvas.add(figure,50,10);\n *\n * @extends draw2d.shape.node.Hub\n */\ndraw2d.shape.node.HorizontalBus = draw2d.shape.node.Hub.extend(\n  /** @lends draw2d.shape.node.HorizontalBus.prototype */\n  {\n\n  NAME: \"draw2d.shape.node.HorizontalBus\",\n\n  /**\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    this.setConnectionDirStrategy(1)\n\n    this.installEditPolicy(new draw2d.policy.figure.HBusSelectionFeedbackPolicy())\n  }\n\n})\n","import draw2d from '../../packages'\nimport Color from '../../util/Color'\n\n\n/**\n * @class\n *\n * A hub is a shape with a special kind of port handling. The hole figure is a hybrid port. You can drag&drop a Port directly on\n * the figure.\n *\n *\n * @example\n *\n *\n *    canvas.add(new draw2d.shape.node.Start({x:50, y:50}));\n *    canvas.add(new draw2d.shape.node.Hub({x:150, y:50}));\n *\n * @extends draw2d.shape.basic.Rectangle\n */\ndraw2d.shape.node.Hub = draw2d.shape.basic.Rectangle.extend(\n  /** @lends draw2d.shape.node.Hub.prototype */\n  {\n\n    NAME: \"draw2d.shape.node.Hub\",\n\n    DEFAULT_COLOR: new Color(\"#4DF0FE\"),\n    BACKGROUND_COLOR: new Color(\"#29AA77\"),\n\n    /**\n     *\n     * @param {Object} [attr] the configuration of the shape\n     */\n    init: function (attr, setter, getter) {\n      this.label = null\n\n      this._super(\n        {\n          color: this.DEFAULT_COLOR.darker(), \n          bgColor: this.BACKGROUND_COLOR, \n          ...attr\n        },\n        extend({\n          // deprecated\n          label: this.setLabel,\n          // @attr {String} text the text to display in the center of the hub */\n          text: this.setLabel\n        }, setter),\n        extend({\n          label: this.getLabel,\n          text: this.getLabel\n        }, getter))\n\n      let _port = this.port = this.createPort(\"hybrid\", new draw2d.layout.locator.CenterLocator())\n\n      let r = draw2d.geo.Rectangle\n      this.CONNECTION_DIR_STRATEGY = [\n        function (peerPort) {\n          return _port.getParent().getBoundingBox().getDirection(peerPort.getAbsolutePosition())\n        },\n        function (peerPort) {\n          return _port.getAbsoluteY() > peerPort.getAbsoluteY() ? r.DIRECTION_UP : r.DIRECTION_DOWN\n        },\n        function (peerPort) {\n          return _port.getAbsoluteX() > peerPort.getAbsoluteX() ? r.DIRECTION_LEFT : r.DIRECTION_RIGHT\n        }]\n\n      // redirect the glow effect and the hitTest for the port to the parent node\n      //\n      this.port.setGlow = this.setGlow.bind(this)\n      this.port._orig_hitTest = this.port.hitTest\n      this.port.hitTest = this.hitTest.bind(this)\n\n\n      // provide a special connection anchor for this port. We use the bounding box of the\n      // parent as connection border\n      //\n      this.port.setConnectionAnchor(new draw2d.layout.anchor.ShortesPathConnectionAnchor(this.port))\n      this.port.setVisible(false)\n      this.port.setVisible = function () {\n      }\n\n      this.setConnectionDirStrategy(0)\n    },\n\n    /**\n     *\n     * Called by the framework during drag&drop operations if the user drag a figure over this figure\n     *\n     * @param {draw2d.Figure} draggedFigure The figure which is currently dragging\n     *\n     * @returns {draw2d.Figure} the figure which should receive the drop event or null if the element didn't want a drop event\n     **/\n    delegateTarget: function (draggedFigure) {\n      // redirect the dragEnter handling to the hybrid port\n      //\n      return this.getHybridPort(0).delegateTarget(draggedFigure)\n    },\n\n\n    /**\n     *\n     * This value is relevant for the interactive resize of the figure.\n     *\n     * @returns {Number} Returns the min. width of this object.\n     */\n    getMinWidth: function () {\n      if (this.label !== null) {\n        return Math.max(this.label.getMinWidth(), this._super())\n      }\n      return this._super()\n    },\n\n\n    /**\n     * @inheritdoc\n     *\n     * @private\n     */\n    repaint: function (attributes) {\n      if (this.repaintBlocked === true || this.shape === null) {\n        return\n      }\n\n      attributes ??= {}\n\n      // set some good defaults if the parent didn't\n      if (typeof attributes.fill === \"undefined\") {\n        if (this.bgColor !== null) {\n          attributes.fill = \"90-\" + this.bgColor.hash() + \":5-\" + this.bgColor.lighter(0.3).hash() + \":95\"\n        } else {\n          attributes.fill = \"none\"\n        }\n      }\n\n      this._super(attributes)\n    },\n\n    /**\n     *\n     * Set the label for the Hub\n     *\n     *     // Alternatively you can use the attr method:\n     *     figure.attr({\n     *       text: label\n     *     });\n     *\n     *\n     * @param {String} label\n     * @since 3.0.4\n     */\n    setLabel: function (label) {\n      // Create any Draw2D figure as decoration for the connection\n      //\n      if (this.label === null) {\n\n        this.label = new draw2d.shape.basic.Label({text: label, color: \"#0d0d0d\", fontColor: \"#0d0d0d\", stroke: 0})\n        // add the new decoration to the connection with a position locator.\n        //\n        this.add(this.label, new draw2d.layout.locator.CenterLocator())\n        this.label.setSelectionAdapter( () => this )\n        this.label.delegateTarget = () => this.port\n      } else {\n        this.label.setText(label)\n      }\n    },\n\n    /**\n     *\n     * Set the strategy for the connection direction calculation.<br>\n     * <br>\n     *\n     * <ul>\n     * <li>0 - Use the best/shortest direction (UP/RIGHT/DOWN/LEFT) for the connection routing (default)</li>\n     * <li>1 - Use UP/DOWN for the connection direction</li>\n     * <li>2 - Use LEFT/RIGHT</li>\n     * </ul>\n     * @param {Number} strategy the connection routing strategy to use\n     * @since 2.4.3\n     */\n    setConnectionDirStrategy: function (strategy) {\n      switch (strategy) {\n        case 0:\n        case 1:\n        case 2:\n          this.port.getConnectionDirection = this.CONNECTION_DIR_STRATEGY[strategy]\n          break\n      }\n    },\n\n    /**\n     * @inheritdoc\n     */\n    getPersistentAttributes: function () {\n      let memento = this._super()\n\n      memento.dirStrategy = this.CONNECTION_DIR_STRATEGY.indexOf(this.port.getConnectionDirection)\n      if (this.label !== null) {\n        memento.label = this.label.getText()\n      }\n\n      return memento\n    },\n\n    /**\n     * @inheritdoc\n     */\n    setPersistentAttributes: function (memento) {\n      this._super(memento)\n\n      if (typeof memento.dirStrategy === \"number\") {\n        this.setConnectionDirStrategy(memento.dirStrategy)\n      }\n\n      if (typeof memento.label !== \"undefined\") {\n        this.setLabel(memento.label)\n      }\n    }\n\n  })\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A Node is the base class for all figures which can have {@link draw2d.Port}s. A {@link draw2d.Port} is the\n * anchor for a {@link draw2d.Connection} line.<br><br>A {@link draw2d.Port} is a green dot which can\n * be dragged and dropped over another port.<br>\n * @inheritable\n * @author Andreas Herz\n * @extends draw2d.Figure\n */\ndraw2d.shape.node.Node = draw2d.Figure.extend(\n  /** @lends draw2d.shape.node.Node.prototype */\n  {\n  \n  NAME: \"draw2d.shape.node.Node\",\n\n  /**\n   * Creates a new Node element which are not assigned to any canvas.\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this.inputPorts = new draw2d.util.ArrayList()\n    this.outputPorts = new draw2d.util.ArrayList()\n    this.hybridPorts = new draw2d.util.ArrayList()\n\n    // flag which indicates if the figure should read/write ports to\n    // JSON\n    this.persistPorts = true\n\n    // Flags just for performance reasons\n    //\n    this.portRelayoutRequired = true\n\n    // just for performance reasons\n    //\n    this.cachedPorts = null\n\n    this._super(\n      {width: 50, height: 50, ...attr},\n      {\n        // @attr {Number} indicate whenever you want persists the ports too */\n        persistPorts: this.setPersistPorts,\n        ...setter\n      },\n      {\n        persistPorts: this.getPersistPorts,\n        ...getter\n      })\n  },\n\n\n  /**\n   *\n   * Indicates if the node should read/write the ports via the draw2d.Figure.getPersistenAttributes\n   * to the JSON object\n   *\n   * @param {Boolean} flag\n   * @since 5.0.4\n   */\n  setPersistPorts: function (flag) {\n    this.persistPorts = flag\n    this.fireEvent(\"change:persistPorts\", {value: this.persistPorts})\n\n    return this\n  },\n\n  /**\n   *\n   * Indicates if the figure writes the ports to the JSON structore too.\n   * Default is \"false\"\n   *\n   * @returns {Boolean}\n   */\n  getPersistPorts: function () {\n    return this.persistPorts\n  },\n\n  /**\n   * @inheritdoc\n   */\n  toFront: function (figure) {\n    this._super(figure)\n\n    this.getPorts().each((i, port) => {\n      port.getConnections().each((i, connection) => connection.toFront(figure))\n      port.toFront(this)\n    })\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  toBack: function (figure) {\n\n    this.getPorts().each((i, port) => {\n      port.getConnections().each((i, connection) => connection.toBack(figure))\n      port.toBack(figure)\n    })\n\n    this._super(figure)\n\n    return this\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setVisible: function (flag, duration) {\n    // adjust the visibility of the ports to the parent state\n    //\n    if (!flag) {\n      this.getPorts().each( (i, port) => {\n        port.__initialVisibilityState = port.isVisible()\n        port.setVisible(false, duration)\n      })\n    }\n    else {\n      this.getPorts().each( (i, port) => {\n        if (typeof port.__initialVisibilityState !== \"undefined\") {\n          port.setVisible(port.__initialVisibilityState, duration)\n        }\n        else {\n          port.setVisible(true, duration)\n        }\n        delete port.__initialVisibilityState\n      })\n    }\n    this._super(flag, duration)\n  },\n\n\n  /**\n   *\n   * Return all ports of the node. The results contains\n   * all ports of the children too per default. Set <b>recursive</b>\n   * to false to retrieve direct assigned ports only.\n   *\n   * @param {Boolean} [recursive] indicates if the method should return children ports too. Default is <b>true</b>\n   * @returns  {draw2d.util.ArrayList}\n   **/\n  getPorts: function (recursive) {\n\n    if (typeof recursive === \"boolean\" && recursive === false) {\n      let ports = new draw2d.util.ArrayList()\n      ports.addAll(this.inputPorts)\n      ports.addAll(this.outputPorts)\n      ports.addAll(this.hybridPorts)\n      return ports\n    }\n\n    if (this.cachedPorts === null) {\n      this.cachedPorts = new draw2d.util.ArrayList()\n      this.cachedPorts.addAll(this.inputPorts)\n      this.cachedPorts.addAll(this.outputPorts)\n      this.cachedPorts.addAll(this.hybridPorts)\n\n      this.children.each((i, e) => {\n        this.cachedPorts.addAll(e.figure.getPorts())\n      })\n    }\n    return this.cachedPorts\n  },\n\n\n  /**\n   *\n   * Return all input ports of the node.\n   *\n   * @returns {draw2d.util.ArrayList}\n   **/\n  getInputPorts: function () {\n    return this.inputPorts\n      .clone()\n      .addAll(this.hybridPorts)\n  },\n\n  /**\n   *\n   * Return all output ports of the node.\n   *\n   * @returns {draw2d.util.ArrayList}\n   **/\n  getOutputPorts: function () {\n    return this.outputPorts\n      .clone()\n      .addAll(this.hybridPorts)\n  },\n\n\n  /**\n   *\n   * Clone the figure. <br>\n   * You must override and implement the methods <b>getPersistentAttributes</b> and <b>setPersistentAttributes</b> for your custom\n   * figures if the have special attributes.\n   *\n   * The clone() method performs a deep copy of the object, meaning that it copies the children, ports and decorations\n   * per default. You can control the clone procedure with the 'cloneMetaData'.\n   *\n   *\n   * @param {Object} [cloneMetaData] controls the clone procedure\n   * @param {Boolean} [cloneMetaData.excludeChildren] set it to true if you want exclude the children.\n   * @param {Boolean} [cloneMetaData.excludePorts] set it to true if you want exclude the ports of the node.\n   *\n   * @since 4.1.0\n   * @experimental\n   */\n  clone: function (cloneMetaData) {\n    cloneMetaData = {excludePorts: false, ...cloneMetaData}\n\n    let clone = this._super(cloneMetaData)\n\n    // remove all ports of the clone. the \"init\" method can have create some. but this must\n    // removed because we want a clone of an existing figure\n    //\n    if (cloneMetaData.excludePorts === false) {\n      clone.resetPorts()\n      let ports = this.getPorts(false)\n\n      ports.each(function (i, port) {\n        let clonePort = port.clone()\n        let locator = port.getLocator().clone()\n        clone.addPort(clonePort, locator)\n      })\n    }\n\n    return clone\n  },\n\n  /**\n   *\n   * Return the port with the corresponding name.\n   *\n   *\n   * @param {String} portName The name of the port to return.\n   * @returns {draw2d.Port} Returns the port with the hands over name or null.\n   **/\n  getPort: function (portName) {\n    return this.getPorts().find(e => e.getName() === portName)\n  },\n\n  /**\n   *\n   * Return the input port with the corresponding name.\n   *\n   *\n   * @param {String/Number} portNameOrIndex The name or numeric index of the port to return.\n   * @returns {draw2d.InputPort} Returns the port with the hands over name or null.\n   **/\n  getInputPort: function (portNameOrIndex) {\n    if (typeof portNameOrIndex === \"number\") {\n      return this.inputPorts.get(portNameOrIndex)\n    }\n\n    return this.inputPorts.find( port => port.getName()===portNameOrIndex )\n  },\n\n  /**\n   *\n   * Return the output port with the corresponding name.\n   *\n   * @param {String/Number} portNameOrIndex The name or the numeric index of the port to return.\n   * @returns {draw2d.OutputPort} Returns the port with the hands over name or null.\n   **/\n  getOutputPort: function (portNameOrIndex) {\n    if (typeof portNameOrIndex === \"number\") {\n      return this.outputPorts.get(portNameOrIndex)\n    }\n\n    return this.outputPorts.find( port => port.getName()===portNameOrIndex )\n  },\n\n  /**\n   *\n   * Return the input port with the corresponding name.\n   *\n   *\n   * @param {String/Number} portNameOrIndex The name or numeric index of the port to return.\n   * @returns {draw2d.InputPort} Returns the port with the hands over name or null.\n   **/\n  getHybridPort: function (portNameOrIndex) {\n    if (typeof portNameOrIndex === \"number\") {\n      return this.hybridPorts.get(portNameOrIndex)\n    }\n\n    return this.hybridPorts.find( port => port.getName()===portNameOrIndex )\n  },\n\n  /**\n   *\n   * Add a port to this node at the given position.<br>\n   *\n   * @param {draw2d.Port} port The new port to add.\n   * @param {draw2d.layout.locator.Locator} locator The layout for the port.\n   **/\n  addPort: function (port, locator) {\n    if (!(port instanceof draw2d.Port)) {\n      throw \"Argument is not typeof 'draw2d.Port'. \\nFunction: draw2d.shape.node.Node#addPort\"\n    }\n\n    // add to the internal cache if already build\n    if (this.cachedPorts !== null) {\n      this.cachedPorts.add(port)\n    }\n\n    this.portRelayoutRequired = true\n\n    if (port instanceof draw2d.InputPort) {\n      this.inputPorts.add(port)\n    }\n    else if (port instanceof draw2d.OutputPort) {\n      this.outputPorts.add(port)\n    }\n    else if (port instanceof draw2d.HybridPort) {\n      this.hybridPorts.add(port)\n    }\n\n    if ((typeof locator !== \"undefined\") && (locator instanceof draw2d.layout.locator.Locator)) {\n      port.setLocator(locator)\n    }\n\n    port.setParent(this)\n    port.setCanvas(this.canvas)\n\n    // You can't delete a port with the [DEL] key if a port is a child of a node\n    port.setDeleteable(false)\n\n    if (this.canvas !== null) {\n      port.getShapeElement()\n      this.canvas.registerPort(port)\n    }\n\n    return port\n  },\n\n  /**\n   *\n   * Remove all ports of this node\n   *\n   * @since 5.0.0\n   * @returns {this}\n   */\n  resetPorts: function () {\n    this.getPorts().each((i, port) => this.removePort(port))\n    return this\n  },\n\n\n  /**\n   *\n   * Removes a port and all related connections from this node.<br>\n   *\n   * @param {draw2d.Port} port The port to remove.\n   * @returns {this}\n   **/\n  removePort: function (port) {\n    this.portRelayoutRequired = true\n\n    this.cachedPorts = null\n    this.inputPorts.remove(port)\n    this.outputPorts.remove(port)\n    this.hybridPorts.remove(port)\n\n    if (port.getCanvas() !== null) {\n      let canvas = port.getCanvas()\n      canvas.unregisterPort(port)\n      // remove the related connections of the port too.\n      let connections = port.getConnections().clone()\n      connections.each( (i, connection) => {\n        canvas.remove(connection)\n      })\n    }\n\n    port.setCanvas(null)\n\n    return this\n  },\n\n  /**\n   *\n   * Create a standard Port for this element. Inherited class can override this\n   * method to create its own type of ports.\n   *\n   * @param {String} type the type of the requested port. possible [\"input\", \"output\"]\n   * @param {draw2d.layout.locator.Locator} [locator] the layouter to use for this port\n   * @template\n   */\n  createPort: function (type, locator) {\n    let newPort = null\n    let count = 0\n\n    switch (type) {\n      case \"input\":\n        newPort = draw2d.Configuration.factory.createInputPort(this)\n        count = this.inputPorts.getSize()\n        break\n      case \"output\":\n        newPort = draw2d.Configuration.factory.createOutputPort(this)\n        count = this.outputPorts.getSize()\n        break\n      case \"hybrid\":\n        newPort = draw2d.Configuration.factory.createHybridPort(this)\n        count = this.hybridPorts.getSize()\n        break\n      default:\n        throw \"Unknown type [\" + type + \"] of port requested\"\n    }\n\n    newPort.setName(type + count)\n\n    this.addPort(newPort, locator)\n    // relayout the ports\n    this.setDimension(this.width, this.height)\n\n    return newPort\n  },\n\n  /**\n   *\n   * Return all connections related to this node.\n   *\n   * @returns {draw2d.util.ArrayList}\n   */\n  getConnections: function () {\n    let connections = new draw2d.util.ArrayList()\n    let ports = this.getPorts()\n    for (let i = 0; i < ports.getSize(); i++) {\n      let port = ports.get(i)\n      // Do NOT add twice the same connection if it is linking ports from the same node\n      for (let c = 0, c_size = port.getConnections().getSize(); c < c_size; c++) {\n        if (!connections.contains(port.getConnections().get(c))) {\n          connections.add(port.getConnections().get(c))\n        }\n      }\n    }\n    return connections\n  },\n\n\n  /**\n   * @returns {this}\n   */\n  setCanvas: function (canvas) {\n    let oldCanvas = this.canvas\n    this._super(canvas)\n\n    let ports = this.getPorts()\n    if (oldCanvas !== null) {\n      ports.each((i, port) => oldCanvas.unregisterPort(port))\n    }\n\n    if (canvas !== null) {\n      ports.each((i, port) => {\n        port.setCanvas(canvas)\n        canvas.registerPort(port)\n      })\n      // relayout the ports\n      this.setDimension(this.width, this.height)\n    }\n    else {\n      ports.each((i, port) => port.setCanvas(null))\n    }\n    return this\n  },\n\n  /**\n   * @returns {this}\n   */\n  setRotationAngle: function (angle) {\n    this.portRelayoutRequired = true\n    this._super(angle)\n\n    this.layoutPorts()\n\n    return this\n  },\n\n  /**\n   * @returns {this}\n   */\n  setDimension: function (w, h) {\n    this.portRelayoutRequired = true\n    this._super(w, h)\n\n    return this\n  },\n\n  /**\n   *\n   * Called if the value of any port has been changed\n   *\n   * @param {draw2d.Port} relatedPort\n   * @template\n   */\n  onPortValueChanged: function (relatedPort) {\n  },\n\n  /**\n   * @private\n   * @return {this}\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return this\n    }\n\n    this._super(attributes)\n    this.layoutPorts()\n\n    return this\n  },\n\n  /**\n   *\n   *\n   * @private\n   * @returns {this}\n   */\n  layoutPorts: function () {\n    if (this.portRelayoutRequired === false) {\n      return this//silently\n    }\n    this.portRelayoutRequired = false\n\n    // layout the ports\n    //\n    this.outputPorts.each((i, port) => port.locator.relocate(i, port))\n    this.inputPorts.each((i, port) => port.locator.relocate(i, port))\n    this.hybridPorts.each((i, port) => port.locator.relocate(i, port))\n\n    return this\n  },\n\n  /**\n   *\n   * Returns the Command to perform the specified Request or null.\n   *\n   * @param {draw2d.command.CommandType} request describes the Command being requested\n   * @returns {draw2d.command.Command} null or a Command\n   * @private\n   **/\n  createCommand: function (request) {\n    if (request === null) {\n      return null\n    }\n\n    if (request.getPolicy() === draw2d.command.CommandType.ROTATE) {\n      return new draw2d.command.CommandRotate(this, (this.getRotationAngle() + 90) % 360)\n    }\n\n\n    return this._super(request)\n  },\n\n\n  /**\n   *\n   * Return an objects with all important attributes for XML or JSON serialization\n   *\n   * @returns {Object}\n   */\n  getPersistentAttributes: function () {\n    let memento = this._super()\n\n    // write all ports to the JSON\n    //\n    if (this.persistPorts === true) {\n      memento.ports = []\n      this.getPorts().each(function (i, port) {\n        memento.ports.push(\n          {...port.getPersistentAttributes(), \n            name: port.getName(),\n            port: port.NAME,\n            locator: port.getLocator().NAME,\n            locatorAttr: port.getLocator().attr()\n          }\n        )\n      })\n    }\n\n    return memento\n  },\n\n  /**\n   *\n   * Read all attributes from the serialized properties and transfer them into the shape.\n   *\n   * @param {Object} memento\n   * @returns {this}\n   */\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    if (typeof memento.ports !== \"undefined\") {\n      // we read the ports from the JSON and now we save it to the JSON too.\n      this.persistPorts = true\n\n      // remove all ports created in the init method\n      //\n      this.resetPorts()\n\n      // and restore all ports of the JSON document instead.\n      //\n      memento.ports.forEach((e) => {\n        let locator = eval(\"new \" + e.locator + \"()\")\n        if(e.locatorAttr) {\n          locator.attr(e.locatorAttr)\n        }\n\n        let port = eval(\"new \" + e.port + \"()\")\n        port.setPersistentAttributes(e)\n        this.addPort(port, locator)\n      })\n    }\n\n    return this\n  }\n\n})\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A generic Node which has an OutputPort. Mainly used for demos and examples.\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.node.Start({color: \"#3d3d3d\"});\n *\n *    canvas.add(figure,50,10);\n *\n * @extends draw2d.shape.basic.Rectangle\n */\ndraw2d.shape.node.Start = draw2d.shape.basic.Rectangle.extend(\n  /** @lends draw2d.shape.node.Start.prototype */\n  {\n\n  NAME: \"draw2d.shape.node.Start\",\n  DEFAULT_COLOR: new draw2d.util.Color(\"#4D90FE\"),\n\n  /**\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(extend({\n      bgColor: this.DEFAULT_COLOR,\n      color: this.DEFAULT_COLOR.darker(),\n      width: 50,\n      height: 50\n    }, attr), setter, getter)\n    this.createPort(\"output\")\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A horizontal bus shape with a special kind of port handling. The hole figure is a hybrid port.\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.node.VerticalBus({width:40, height:300, text:\"Vertical Bus\"});\n *\n *    canvas.add(figure,50,10);\n *\n * @extends draw2d.shape.node.Hub\n */\ndraw2d.shape.node.VerticalBus = draw2d.shape.node.Hub.extend(\n  /** @lends draw2d.shape.node.VerticalBus.prototype */\n  {\n  \n  NAME: \"draw2d.shape.node.VerticalBus\",\n\n  /**\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    this.setConnectionDirStrategy(2)\n    this.installEditPolicy(new draw2d.policy.figure.VBusSelectionFeedbackPolicy())\n  },\n\n\n  /**\n   * \n   * set the label for the Hub\n   *\n   * @param {String} labelString\n   * @since 3.0.4\n   */\n  setLabel: function (labelString) {\n    let mustAdjustTheAngel = this.label === null\n\n    this._super(labelString)\n\n    if (mustAdjustTheAngel === true && this.label !== null) {\n      this.label.setRotationAngle(90)\n    }\n  },\n\n  /**\n   * @inheritdoc\n   */\n  getMinHeight: function () {\n    if (this.shape === null && this.label === null) {\n      return 0\n    }\n\n    if (this.label !== null) {\n      return this.label.getMinWidth()\n    }\n\n    return this._super()\n  },\n\n  /**\n   * @inheritdoc\n   */\n  getMinWidth: function () {\n    if (this.shape === null && this.label === null) {\n      return 0\n    }\n\n    if (this.label !== null) {\n      return this.label.getMinHeight()\n    }\n\n    return this._super()\n  }\n\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Simple Post-it like figure with text. Can be used for annotations or documentation.\n *\n *\n * @example\n *\n *    let shape =  new draw2d.shape.note.PostIt({\n *       text:\"This is a simple sticky note\",\n *       color:\"#000000\",\n *       padding:20\n *    });\n *\n *    canvas.add(shape,40,10);\n *\n * @author Andreas Herz\n * @extends draw2d.shape.basic.Label\n */\ndraw2d.shape.note.PostIt = draw2d.shape.basic.Label.extend(\n  /** @lends draw2d.shape.note.PostIt.prototype */\n  {\n\n  NAME: \"draw2d.shape.note.PostIt\",\n\n  /**\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    this.setStroke(1)\n    this.setBackgroundColor(\"#5b5b5b\")\n    this.setColor(\"#FFFFFF\")\n    this.setFontColor(\"#ffffff\")\n    this.setFontSize(14)\n    this.setPadding(5)\n    this.setRadius(5)\n  }\n})\n\n\n\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * NOT FOR PRODUCTIVE\n *\n * Checkout [Wikipedia PERT][1] for more information.\n * [1] http://en.wikipedia.org/wiki/Program_Evaluation_and_Review_Technique\n *\n * Double click on the Task name or the top middle number to change the value.\n *\n *\n * @example\n *\n *    canvas.add( new draw2d.shape.pert.Start(),10,10);\n *    canvas.add( new draw2d.shape.pert.Activity(),80,130);\n *    canvas.add( new draw2d.shape.pert.Activity(),180,50);\n *\n *\n *\n *\n * @extends draw2d.shape.layout.VerticalLayout\n */\ndraw2d.shape.pert.Activity = draw2d.shape.layout.VerticalLayout.extend(\n  /** @lends draw2d.shape.pert.Activity.prototype */\n  {\n\n  NAME: \"draw2d.shape.pert.Activity\",\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    // shortcut for some callback methods to avoid $.proxy wrapper\n    let _this = this\n\n    // persistence values for the activity\n    // will be stored/read in the JSON\n    this.mementoValues = {\n      duration: null\n    }\n\n    // just some color attributes for the rendering/gradient\n    this.bgColor = new draw2d.util.Color(\"#f3f3f3\")\n    this.lighterBgColor = this.bgColor.lighter(0.2).rgba()\n    this.darkerBgColor = this.bgColor.darker(0.2).rgba()\n\n\n    this._super(extend({bgColor: this.bgColor, stroke: 2, radius: 2, color: this.darkerBgColor}, attr), setter, getter)\n\n    // Compose the top row of the shape\n    //\n    let top = new draw2d.shape.layout.HorizontalLayout({stroke: 0})\n\n\n    this.earlyStartLabel = this.createLabel(\"Early Start\").setStroke(0)\n\n    this.durationLabel = new draw2d.shape.basic.Label({\n      text: \"Duration\",\n      stroke: 1,\n      color: this.darkerBgColor,\n      radius: 0,\n      bgColor: null,\n      padding: 5\n    })\n    // duration label has a inplaceEditor for the value\n    this.durationLabel.installEditor(new draw2d.ui.LabelEditor({\n      onCommit: function (value) {\n        _this.setDuration(parseFloat(value))\n      }\n    }))\n\n    this.earlyEndLabel = this.createLabel({text: \"Early End\", stroke: 0})\n\n    top.add(this.earlyStartLabel)\n    top.add(this.durationLabel)\n    top.add(this.earlyEndLabel)\n\n\n    // the middle part of the shape\n    // This part contains the ports for the connection\n    //\n    this.activityLabel = new draw2d.shape.basic.Label({\n      text: \"Activity Name\",\n      radius: 0,\n      padding: 10,\n      color: this.darkerBgColor,\n      bgColor: null\n    })\n    // direct editor for the label\n    this.activityLabel.installEditor(new draw2d.ui.LabelInplaceEditor())\n\n    this.inputPort = this.activityLabel.createPort(\"input\")\n    this.inputPort.getActivity = function () {\n      return _this\n    }\n    this.inputPort.onConnect = function () {\n      _this.setDuration(_this.mementoValues.duration)\n    }\n    this.inputPort.onDisconnect = function () {\n      _this.setDuration(_this.mementoValues.duration)\n    }\n    this.inputPort.setValue = function (anyValue) {\n      _this.setDuration(_this.mementoValues.duration)\n    }\n\n    this.outputPort = this.activityLabel.createPort(\"output\")\n    this.outputPort.getActivity = function () {\n      return _this\n    }\n    this.outputPort.onConnect = function () {\n      _this.setDuration(_this.mementoValues.duration)\n    }\n    this.outputPort.onDisconnect = function () {\n      _this.setDuration(_this.mementoValues.duration)\n    }\n\n\n    // the bottom of the activity shape\n    //\n    let bottom = new draw2d.shape.layout.HorizontalLayout({stroke: 0})\n\n\n    this.lateStartLabel = this.createLabel(\"Late Start\").setStroke(0)\n    this.stackLabel = this.createLabel(\"Stack\")\n    this.lateEndLabel = this.createLabel(\"Late End\").setStroke(0)\n\n    bottom.add(this.lateStartLabel)\n    bottom.add(this.stackLabel)\n    bottom.add(this.lateEndLabel)\n\n    // finally compose the shape with top/middle/bottom in VerticalLayout\n    //\n    this.add(top)\n    this.add(this.activityLabel)\n    this.add(bottom)\n\n\n    // set some good default value for the activity\n    //\n    this.setDuration(1)\n  },\n\n  /**\n   * \n   * Set the duration for the activity. This triggers a complete recalculation of the complete\n   * diagram. No further calls are required\n   *\n   * @param {Number} duration the new Duration for the activity\n   */\n  setDuration: function (duration) {\n\n    if (this.mementoValues.duration !== duration) {\n      // store the new value\n      this.mementoValues.duration = duration\n\n      // update the labels for duration\n      this.durationLabel.setText(this.mementoValues.duration)\n    }\n\n    // calculate the earlyStart and latestEnd and set the labels\n    //\n    let start = this.getEarlyStart()\n\n    this.earlyStartLabel.setText(start)\n    this.earlyEndLabel.setText(start + this.mementoValues.duration)\n\n    // notify all children that a parent value has been changed\n    // Just knock on the inputPort...\n    //\n    let connections = this.outputPort.getConnections()\n    connections.each(function (i, conn) {\n      let targetPort = conn.getTarget()\n      targetPort.setValue()\n    })\n\n    // propagate the lateFinish up to all parent nodes if we are a leaf\n    //\n    if (connections.getSize() === 0) {\n      let lateFinish = parseFloat(this.earlyEndLabel.getText())\n      this.setLateFinish(lateFinish)\n    }\n  },\n\n  getEarlyEnd: function () {\n    return this.getEarlyStart() + this.mementoValues.duration\n  },\n\n  getEarlyStart: function () {\n    let latestEarlyEnd = 0\n\n    // retrieve the greatest \"earlyStart\" from all parent activities\n    this.inputPort.getConnections().each(function (i, conn) {\n      let parentActivity = conn.getSource().getActivity()\n      latestEarlyEnd = Math.max(latestEarlyEnd, parentActivity.getEarlyEnd())\n    })\n\n    return latestEarlyEnd\n  },\n\n  setLateFinish: function (value) {\n    let lateStart = value - this.mementoValues.duration\n\n    this.lateEndLabel.setText(value)\n    this.lateStartLabel.setText(lateStart)\n    this.stackLabel.setText(lateStart - parseFloat(this.earlyStartLabel.getText()))\n\n    let connections = this.inputPort.getConnections()\n    connections.each(function (i, conn) {\n      let sourcePort = conn.getSource()\n      sourcePort.getActivity().setLateFinish(lateStart)\n    })\n  },\n\n  /**\n   * \n   * help method to create some labels\n   *\n   * @param {String} txt the label to display\n   * @returns {draw2d.shape.basic.Label}\n   */\n  createLabel: function (txt) {\n    let label = new draw2d.shape.basic.Label({text: txt})\n    label.setStroke(1)\n    label.setColor(this.darkerBgColor)\n    label.setRadius(0)\n    label.setBackgroundColor(null)\n    label.setPadding(5)\n    label.setColor(this.bgColor.darker(0.2))\n    label.onDoubleClick = function (angle) {/* ignore them for the layout elements*/\n    }\n\n    return label\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setBackgroundColor: function (color) {\n    this._super(color)\n\n    // calculate the new lighter and darker colors for the gradient\n    //\n    this.lighterBgColor = this.bgColor.lighter(0.2).rgba()\n    this.darkerBgColor = this.bgColor.darker(0.2).rgba()\n  },\n\n  /**\n   * @inheritdoc\n   */\n  repaint: function (attributes) {\n\n    // repaint can be blocked during deserialization and if the shape\n    // not part of any canvas.\n    //\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n\n    attributes ??= {}\n\n    if (this.getAlpha() < 0.9) {\n      attributes.fill = this.bgColor.rgba()\n    }\n    else {\n      attributes.fill = [\"90\", this.bgColor.hash(), this.lighterBgColor].join(\"-\")\n    }\n\n\n    this._super(attributes)\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * NOT FOR PRODUCTIVE\n *\n * Checkout [Wikipedia PERT][1] for more information.\n *\n * Double click on the Task name or the top middle number to change the value.\n *\n *\n * @example\n *\n *    canvas.add( new draw2d.shape.pert.Start(),10,10);\n *    canvas.add( new draw2d.shape.pert.Activity(),80,130);\n *    canvas.add( new draw2d.shape.pert.Activity(),180,50);\n *\n * [1] http://en.wikipedia.org/wiki/Program_Evaluation_and_Review_Technique\n *\n * @extends draw2d.shape.layout.VerticalLayout\n */\ndraw2d.shape.pert.Start = draw2d.shape.layout.VerticalLayout.extend(\n  /** @lends draw2d.shape.pert.Start.prototype */\n  {\n\n  NAME: \"draw2d.shape.pert.Start\",\n\n  /**\n   * Create a new instance\n   *\n   * @param {Object} [attr] the configuration of the shape\n   */\n  init: function (attr, setter, getter) {\n    // shortcut for some callback methods to avoid $.proxy wrapper\n    let _this = this\n\n    // persistence values for the activity\n    // will be stored/read in the JSON\n    this.mementoValues = {\n      duration: null\n    }\n\n    // just some color attributes for the rendering/gradient\n    this.bgColor = new draw2d.util.Color(\"#f3f3f3\")\n    this.lighterBgColor = this.bgColor.lighter(0.2).rgba()\n    this.darkerBgColor = this.bgColor.darker(0.2).rgba()\n\n\n    this._super(extend({bgColor: this.bgColor, stroke: 2, radius: 2, color: this.darkerBgColor}, attr), setter, getter)\n\n    // Compose the top row of the shape\n    //\n    let top = new draw2d.shape.layout.HorizontalLayout({stroke: 0})\n\n\n    this.durationLabel = new draw2d.shape.basic.Label({\n      text: \"Duration\",\n      stroke: 1,\n      color: this.darkerBgColor,\n      radius: 0,\n      bgColor: null,\n      padding: 5\n    })\n    // duration label has a inplaceEditor for the value\n    this.durationLabel.installEditor(new draw2d.ui.LabelEditor({\n      text: \"Enter new duration\",\n      onCommit: function (value) {\n        _this.setDuration(parseFloat(value))\n      }\n    }))\n\n    this.earlyEndLabel = this.createLabel({text: \"Early End\", stroke: 0})\n\n    top.add(this.durationLabel)\n    top.add(this.earlyEndLabel)\n\n\n    // the middle part of the shape\n    // This part contains the ports for the connection\n    //\n    this.activityLabel = new draw2d.shape.basic.Label({\n      text: \"Start\",\n      radius: 0,\n      padding: 10,\n      color: this.darkerBgColor,\n      bgColor: null\n    })\n    // direct editor for the label\n    this.activityLabel.installEditor(new draw2d.ui.LabelInplaceEditor())\n\n    this.outputPort = this.activityLabel.createPort(\"output\")\n    this.outputPort.getActivity = function () {\n      return _this\n    }\n    this.outputPort.onConnect = function () {\n      _this.setDuration(_this.mementoValues.duration)\n    }\n    this.outputPort.onDisconnect = function () {\n      _this.setDuration(_this.mementoValues.duration)\n    }\n\n\n    // the bottom of the activity shape\n    //\n    let bottom = this.createLabel(\" \")\n    bottom.setPadding(10)\n    bottom.setStroke(0)\n    this.lateEndLabel = bottom\n\n    // finally compose the shape with top/middle/bottom in VerticalLayout\n    //\n    this.add(top)\n    this.add(this.activityLabel)\n    this.add(bottom)\n\n    // set some good default value for the activity\n    //\n    this.setDuration(1)\n  },\n\n  /**\n   * \n   * Set the duration for the activity. This triggers a complete recalculation of the complete\n   * diagram. No further calls are required\n   *\n   * @param {Number} duration the new Duration for the activity\n   */\n  setDuration: function (duration) {\n\n    if (this.mementoValues.duration !== duration) {\n      // store the new value\n      this.mementoValues.duration = duration\n\n      // update the labels for duration\n      this.durationLabel.setText(this.mementoValues.duration)\n    }\n\n    this.earlyEndLabel.setText(this.mementoValues.duration)\n\n    // notify all children that a parent value has been changed\n    // Just knock on the inputPort...\n    //\n    let connections = this.outputPort.getConnections()\n    connections.each(function (i, conn) {\n      let targetPort = conn.getTarget()\n      targetPort.setValue()\n    })\n\n    // propagate the lateFinish up to all parent nodes if we are a leaf\n    //\n    if (connections.getSize() === 0) {\n      let lateFinish = parseFloat(this.earlyEndLabel.getText())\n      this.setLateFinish(lateFinish)\n    }\n  },\n\n  getEarlyEnd: function () {\n    return this.mementoValues.duration\n  },\n\n\n  setLateFinish: function (value) {\n    let lateStart = value - this.mementoValues.duration\n\n    this.lateEndLabel.setText(value)\n\n  },\n\n  /**\n   * \n   * help method to create some labels\n   *\n   * @param {String} txt the label to display\n   * @returns {draw2d.shape.basic.Label}\n   */\n  createLabel: function (txt) {\n    let label = new draw2d.shape.basic.Label({text: txt})\n    label.setStroke(1)\n    label.setColor(this.darkerBgColor)\n    label.setRadius(0)\n    label.setBackgroundColor(null)\n    label.setPadding(5)\n    label.setColor(this.bgColor.darker(0.2))\n    label.onDoubleClick = function (angle) {/* ignore them for the layout elements*/\n    }\n\n    return label\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setBackgroundColor: function (color) {\n    this._super(color)\n\n    // calculate the new lighter and darker colors for the gradient\n    //\n    this.lighterBgColor = this.bgColor.lighter(0.2).rgba()\n    this.darkerBgColor = this.bgColor.darker(0.2).rgba()\n  },\n\n  /**\n   * @inheritdoc\n   */\n  repaint: function (attributes) {\n\n    // repaint can be blocked during deserialization and if the shape\n    // not part of any canvas.\n    //\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n\n    attributes ??= {}\n\n    if (this.getAlpha() < 0.9) {\n      attributes.fill = this.bgColor.rgba()\n    }\n    else {\n      attributes.fill = [\"90\", this.bgColor.hash(), this.lighterBgColor].join(\"-\")\n    }\n\n    this._super(attributes)\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * Connection designed for a state diagram with arrow decoration at the\n * target of the connection and a label\n *\n *\n * @example\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let start = new draw2d.shape.state.Start();\n *    let end   = new draw2d.shape.state.End();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( end, 230,180);\n *\n *    // Create a Connection and connect the Start and End node\n *    //\n *    let c = new draw2d.shape.state.Connection({\n *    \t source : start.getOutputPort(0),\n *      target : end.getInputPort(0)\n *    });\n *\n *    // and finally add the connection to the canvas\n *    canvas.add(c);\n *\n *\n * @extends draw2d.Connection\n */\ndraw2d.shape.state.Connection = draw2d.Connection.extend(\n  /** @lends draw2d.shape.state.Connection.prototype */\n  {\n  NAME: \"draw2d.shape.state.Connection\",\n\n  DEFAULT_COLOR: new draw2d.util.Color(\"#4D90FE\"),\n\n  init: function (attr, setter, getter) {\n    this._super(extend({router: null, stroke: 2}, attr), setter, getter)\n\n    this.setTargetDecorator(new draw2d.decoration.connection.ArrowDecorator(17, 8))\n\n\n    this.label = new draw2d.shape.basic.Label({text: \"label\"})\n    this.label.setStroke(1)\n    this.label.setPadding(2)\n    this.label.setBackgroundColor(\"#f0f0f0\")\n    this.add(this.label, new draw2d.layout.locator.ParallelMidpointLocator())\n\n  },\n  /**\n   * \n   * Set the text to show if the state shape\n   *\n   * @param {String} text\n   */\n  setLabel: function (text) {\n    this.label.setText(text)\n\n    // hide the label if no text available\n    this.label.setVisible(!(text === null || text === \"\"))\n    this.fireEvent(\"change:label\", {value: text})\n\n    return this\n  },\n\n\n  /**\n   * \n   * Return the label of the shape\n   *\n   */\n  getLabel: function () {\n    return this.label.getText()\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getPersistentAttributes: function () {\n    return extend(this._super(), {\n      label: this.getLabel()\n    })\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    if (typeof memento.label !== \"undefined\") {\n      this.setLabel(memento.label)\n    }\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * The end node for a state diagram\n *\n *\n * @example\n *    let end   = new draw2d.shape.state.End();\n\n *    // ...add it to the canvas\n *    canvas.add( end, 230,80);\n *\n * @extends draw2d.shape.basic.Circle\n */\ndraw2d.shape.state.End = draw2d.shape.basic.Circle.extend(\n  /** @lends draw2d.shape.state.End.prototype */\n  {\n  \n  NAME: \"draw2d.shape.state.End\",\n\n  DEFAULT_COLOR: new draw2d.util.Color(\"#4D90FE\"),\n\n  init: function (attr, setter, getter) {\n    this.innerCircle = new draw2d.shape.basic.Circle(20)\n\n    this._super(attr, setter, getter)\n\n    this.port = this.createPort(\"input\", new draw2d.layout.locator.TopLocator())\n    this.port.setConnectionAnchor(new draw2d.layout.anchor.ShortesPathConnectionAnchor(this.port))\n\n    this.setDimension(50, 50)\n    this.setBackgroundColor(this.DEFAULT_COLOR)\n    this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy())\n\n    this.innerCircle.setStroke(2)\n    this.innerCircle.setBackgroundColor(null)\n    this.add(this.innerCircle, new draw2d.layout.locator.CenterLocator())\n\n    this.setStroke(0)\n    //this.setColor(this.DEFAULT_COLOR.darker());\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setDimension: function (w, h) {\n    this._super(w, h)\n    this.innerCircle.setDimension(this.getWidth() - 10, this.getHeight() - 10)\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * The start node for a state diagram\n *\n *\n * @example\n *\n *    let figure =  new draw2d.shape.state.Start({color:\"#3d3d3d\"});\n *\n *    canvas.add(figure,50,10);\n *\n * @extends draw2d.shape.basic.Rectangle\n */\ndraw2d.shape.state.Start = draw2d.shape.basic.Circle.extend(\n  /** @lends draw2d.shape.state.Start.prototype */\n  {\n\n  NAME: \"draw2d.shape.state.Start\",\n\n  DEFAULT_COLOR: new draw2d.util.Color(\"#3369E8\"),\n\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    this.port = this.createPort(\"output\", new draw2d.layout.locator.BottomLocator())\n    this.port.setConnectionAnchor(new draw2d.layout.anchor.ShortesPathConnectionAnchor(this.port))\n\n    this.setDimension(50, 50)\n    this.setBackgroundColor(this.DEFAULT_COLOR)\n    this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy())\n\n    this.setStroke(0)\n    //this.setColor(this.DEFAULT_COLOR.darker());\n\n    let label = new draw2d.shape.basic.Label({text: \"START\"})\n    label.setStroke(0)\n    label.setFontColor(\"#ffffff\")\n    label.setFontFamily('\"Open Sans\",sans-serif')\n    this.add(label, new draw2d.layout.locator.CenterLocator())\n  }\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * a state shape for a state diagram\n *\n * @example\n *\n *    // create and add two nodes which contains Ports (In and OUT)\n *    //\n *    let start = new draw2d.shape.state.Start();\n *    let state   = new draw2d.shape.state.State();\n\n *    // ...add it to the canvas\n *    canvas.add( start, 50,50);\n *    canvas.add( state, 230,180);\n *\n *    // Create a Connection and connect the Start and End node\n *    //\n *    let c = new draw2d.shape.state.Connection({\n *    \t\tsource : start.getOutputPort(0),\n *         target : state.getInputPort(0)\n *    });\n *\n *\n *    // and finally add the connection to the canvas\n *    canvas.add(c);\n *\n * @extends draw2d.shape.layout.VerticalLayout\n */\ndraw2d.shape.state.State = draw2d.shape.layout.VerticalLayout.extend(\n  /** @lends draw2d.shape.state.State.prototype */\n  {\n\n  NAME: \"draw2d.shape.state.State\",\n\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n\n    this.port = this.createPort(\"hybrid\", new draw2d.layout.locator.BottomLocator())\n    this.port.setConnectionAnchor(new draw2d.layout.anchor.ChopboxConnectionAnchor(this.port))\n\n\n    this.setBackgroundColor(\"#f3f3f3\")\n\n    // UI representation\n    this.setStroke(1)\n    this.setColor(\"#e0e0e0\")\n    this.setRadius(5)\n\n    // Compose the top row of the shape\n    //\n    let top = this.createLabel(\"State\").setStroke(0)\n    this.label = top\n\n    // the middle part of the shape\n    // This part contains the ports for the connection\n    //\n    let center = new draw2d.shape.basic.Rectangle()\n    center.getHeight = function () {\n      return 1\n    }\n    center.setMinWidth(90)\n    center.setColor(\"#e0e0e0\")\n\n    // the bottom of the activity shape\n    //\n    let bottom = new draw2d.shape.basic.Rectangle()\n    bottom.setMinHeight(30)\n    bottom.setStroke(0)\n    bottom.setBackgroundColor(null)\n\n    // finally compose the shape with top/middle/bottom in VerticalLayout\n    //\n    this.add(top)\n    this.add(center)\n    this.add(bottom)\n  },\n\n  /**\n   *\n   * Set the text to show if the state shape\n   *\n   * @param {String} text\n   */\n  setLabel: function (text) {\n    this.label.setText(text)\n    this.fireEvent(\"change:label\", {value: text})\n\n    return this\n  },\n\n\n  /**\n   *\n   * Return the label of the shape\n   *\n   */\n  getLabel: function () {\n    return this.label.getText()\n  },\n\n\n  /**\n   *\n   * helper method to create some labels\n   *\n   * @param {String} txt the label to display\n   * @returns {draw2d.shape.basic.Label}\n   * @private\n   */\n  createLabel: function (txt) {\n    let label = new draw2d.shape.basic.Label(txt)\n    label.setStroke(1)\n    label.setColor(this.darkerBgColor)\n    label.setRadius(0)\n    label.setBackgroundColor(null)\n    label.setPadding(5)\n    label.setColor(this.bgColor.darker(0.2))\n    label.onDoubleClick = function (angle) {/* ignore them for the layout elements*/\n    }\n\n    return label\n  },\n\n\n  /**\n   * @inheritdoc\n   */\n  getPersistentAttributes: function () {\n    return extend(this._super(), {\n      label: this.getLabel()\n    })\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setPersistentAttributes: function (memento) {\n    this._super(memento)\n\n    if (typeof memento.label !== \"undefined\") {\n      this.setLabel(memento.label)\n    }\n\n  }\n})\n","import draw2d from '../../packages'\nimport {Tweenable} from 'shifty'\n\n\n/**\n * @class\n *\n * @example\n *\n *    let slider = new draw2d.shape.widget.Slider({width:120, height:20});\n *    canvas.add( slider,100,60);\n *\n * @extends draw2d.shape.widget.Widget\n */\ndraw2d.shape.widget.Slider = draw2d.shape.widget.Widget.extend(\n  /** @lends draw2d.shape.widget.Slider.prototype */\n  {\n\n  NAME: \"draw2d.shape.widget.Slider\",\n\n  DEFAULT_COLOR_THUMB: new draw2d.util.Color(\"#bddf69\"),\n  DEFAULT_COLOR_BG: new draw2d.util.Color(\"#d3d3d3\"),\n\n\n  init: function (attr, setter, getter) {\n    this.currentValue = 0 // [0..100]\n    this.slideBoundingBox = new draw2d.geo.Rectangle(0, 0, 10, 20)\n    this.padding = {top: 4, right: 4, bottom: 4, left: 4}\n    this.panning = false\n    this.thumbGrow = 0\n\n    this._super(\n      {\n        width: 150,\n        height: 15,\n        stroke: 1,\n        radius: 4,\n        resizeable: true,\n        color: this.DEFAULT_COLOR_THUMB,\n        bgColor: this.DEFAULT_COLOR_BG,\n        value: 50,\n        ...attr},\n      extend({\n        // @attr {Number} padding the padding in pixel around the text */\n        padding: this.setPadding,\n        // @attr {Number} value the new value of the slider. values must be in range of [0..100] */\n        value: this.setValue\n      }, setter),\n      extend({\n        padding: this.getPadding,\n        value: this.getValue\n      }, getter))\n\n    this.setMinHeight(15)\n    this.setMinWidth(80)\n  },\n\n  /**\n   * \n   * Create the additional elements for the figure\n   *\n   */\n  createSet: function () {\n    let result = this.canvas.paper.set()\n    let thumb = this.canvas.paper.rect(0, 0, 10, 20)\n    thumb.node.style.cursor = \"col-resize\"\n    result.push(thumb)\n\n    return result\n  },\n\n  /**\n   * @inheritdoc\n   */\n  setDimension: function (w, h) {\n    this._super(w, h)\n    this.slideBoundingBox.setBoundary(this.padding.left, 0, this.getWidth() - this.padding.right, this.getHeight())\n    this.slideBoundingBox.setHeight(this.getHeight() + 1)\n\n    // TODO: and repaint again.....two repaints for one \"setDimension\"....BAD\n    //\n    this.repaint()\n  },\n\n\n  /**\n   * \n   * Set the padding of the element\n   *\n   *     // Alternatively you can use the attr method:\n   *     //\n   *     // set the padding for top,left,bottom,right in one call\n   *     figure.attr({\n   *       padding: 3\n   *     });\n   *\n   *     // update the padding left and top\n   *     figure.attr({\n   *       padding: {left:3, top:30}\n   *     });\n   *\n   * @param {Number|Object} padding The new padding\n   * @since 5.6.0\n   **/\n  setPadding: function (padding) {\n    this.clearCache()\n    if (typeof padding === \"number\") {\n      this.padding = {top: padding, right: padding, bottom: padding, left: padding}\n    }\n    else {\n      this.padding = extend(this.padding, padding)\n    }\n    this.repaint()\n    this.fireEvent(\"change:padding\", {value: this.padding})\n\n    return this\n  },\n\n\n  /**\n   * \n   * Get the padding of the element.\n   *\n   * @since 5.6.0\n   **/\n  getPadding: function () {\n    return this.padding\n  },\n\n  /**\n   * \n   * Called if the value of the slider has been changed.\n   *\n   * @param {Number} value The new value of the slider in percentage [0..100]\n   * @template\n   */\n  onValueChange: function (value) {\n  },\n\n  /**\n   * \n   * Will be called if the drag and drop action begins. You can return [false] if you\n   * want avoid that the figure can be move.\n   *\n   * @param {Number} x the x-coordinate of the mouse up event\n   * @param {Number} y the y-coordinate of the mouse up event\n   * @param {Boolean} shiftKey true if the shift key has been pressed during this event\n   * @param {Boolean} ctrlKey true if the ctrl key has been pressed during the event\n   *\n   * @returns {Boolean} true if the figure accepts dragging\n   **/\n  onDragStart: function (x, y, shiftKey, ctrlKey) {\n    // check if the use has been clicked on the thumb.\n    // Return \"false\" to prevent drag&drop operation.\n    //\n    if (this.slideBoundingBox.hitTest(x, y)) {\n\n      this.panningX = x\n      this.panningY = y\n      this.panning = true\n      let tweenable = new Tweenable()\n      tweenable.tween({\n        from: {grow: this.thumbGrow},\n        to: {grow: 10},\n        duration: 500,\n        easing: 'easeOutQuart',\n        step: function (state) {\n          this.thumbGrow = state.grow\n          this.repaint()\n        }.bind(this),\n        finish: function () {\n          tweenable.dispose()\n        }\n      })\n      return false\n    }\n\n    return this._super(x, y, shiftKey, ctrlKey)\n  },\n\n  /**\n   * \n   * Called by the framework if the figure returns false for the drag operation. In this\n   * case we send a \"panning\" event - mouseDown + mouseMove. This is very useful for\n   * UI-Widget like slider, spinner,...\n   *\n   * @param {Number} dx the x difference between the mouse down operation and now\n   * @param {Number} dy the y difference between the mouse down operation and now\n   * @param {Number} dx2 The x diff since the last call of this dragging operation\n   * @param {Number} dy2 The y diff since the last call of this dragging operation\n   */\n\n\n  onPanning: function (dx, dy, dx2, dy2) {\n    // calculate the current position of the mouse pos\n    //\n    let width = this.getWidth()\n    let sliderWidth = width - this.padding.left - this.padding.right\n\n    let figurePos = Math.min(width, Math.max(0, this.panningX + dx))\n    let sliderPos = Math.min(width - this.padding.left - this.padding.right, figurePos)\n\n    this.setValue(100 / sliderWidth * sliderPos)\n  },\n\n  /**\n   * @inheritdoc\n   */\n  onPanningEnd: function () {\n    this.panning = false\n\n    let tweenable = new Tweenable()\n    tweenable.tween({\n      from: {grow: this.thumbGrow},\n      to: {grow: 0},\n      duration: 300,\n      easing: 'easeOutQuart',\n      step: function (state) {\n        this.thumbGrow = state.grow\n        this.repaint()\n      }.bind(this),\n      finish: function () {\n        tweenable.dispose()\n      }\n    })\n    this.thumbGrow = 0\n    this.repaint()\n  },\n\n  /**\n   * \n   * Set the current value of the slider. Valid values are [0..100]\n   *\n   * @param {Number} value values between [0..100]\n   */\n  setValue: function (value) {\n    this.currentValue = Math.min(Math.max(0, (value | 0)), 100)\n    this.repaint()\n    this.onValueChange(this.currentValue)\n    this.fireEvent(\"change:value\", {value: this.currentValue})\n\n    return this\n  },\n\n  /**\n   * \n   * Returns the current value of the slider\n   *\n   * @since 5.6.0\n   *\n   * @returns {Number}\n   */\n  getValue: function () {\n    return this.currentValue\n  },\n\n  /**\n   *\n   * @param attributes\n   */\n  repaint: function (attributes) {\n    if (this.repaintBlocked === true || this.shape === null) {\n      return\n    }\n\n    attributes ??= {}\n\n    // adjust the slider to the current value and the new dimension of the widget\n    //\n    let thumbX = (((this.getWidth() - this.padding.left - this.padding.right) / 100 * this.currentValue) + this.padding.left) | 0\n    this.slideBoundingBox.setX(thumbX)\n\n\n    // update slider\n    //\n    if (this.svgNodes !== null) {\n      let attr = this.slideBoundingBox.toJSON()\n      attr.y -= (this.thumbGrow / 2)\n      attr.height += this.thumbGrow\n      attr.fill = this.getColor().rgba()\n      attr.stroke = this.getColor().darker(0.2).rgba()\n      attr.r = 4\n      this.svgNodes.attr(attr)\n    }\n\n\n    attributes.fill = \"90-\" + this.bgColor.hash() + \":5-\" + this.bgColor.lighter(0.3).hash() + \":95\"\n    attributes.stroke = this.bgColor.darker(0.1).rgba()\n\n    this._super(attributes)\n  },\n\n\n  applyTransformation: function () {\n    this.svgNodes.transform(\"T\" + this.getAbsoluteX() + \",\" + this.getAbsoluteY())\n\n    return this\n  }\n\n})\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n * Base class for all diagrams.\n *\n * @extends draw2d.SetFigure\n */\ndraw2d.shape.widget.Widget = draw2d.SetFigure.extend({\n\n  init: function (attr, setter, getter) {\n    this._super(attr, setter, getter)\n  }\n})\n","import draw2d from '../packages'\n\n\n/**\n * @class\n *\n * Base class for all draw2d.shape.basic.Label editors. The default implementation is to open\n * a simple javascript prompt dialog.<br>\n * Use LabelInplaceEditor or your own implementation if you need more comfort.\n *\n * @example\n *\n *    let label =  new draw2d.shape.basic.Label({text:\"Double Click on me\"});\n *\n *    label.installEditor(new draw2d.ui.LabelEditor({\n *       // called after the value has been set to the LabelFigure\n *       onCommit: $.proxy(function(value){\n *           alert(\"new value set to:\"+value);\n *       },this),\n *       // called if the user abort the operation\n *       onCancel: function(){\n *       }\n *    }));\n *\n *    canvas.add(label,50,10);\n *\n *\n * @author Andreas Herz\n */\ndraw2d.ui.LabelEditor = Class.extend(\n  /** @lends draw2d.ui.LabelEditor.prototype */\n  {\n    NAME: \"draw2d.ui.LabelEditor\",\n\n    /**\n     *\n     * @param {Object} attr callback handler and configuration. **{ onCommit:function(){}}, onCancel: function(){}, onStart: function(){}, text:'My Dialog Title' }**\n     */\n    init: function (attr) {\n     this.configuration = {\n          onCommit:  () =>{},\n          onCancel:  () =>{},\n          onStart:   () =>{},\n          text: \"Value\"\n        ,...attr}\n    },\n\n    /**\n     *\n     * Trigger the edit of the label text.\n     *\n     * @param {draw2d.shape.basic.Label} label the label to edit\n     */\n    start: function (label) {\n      this.configuration.onStart()\n      let newText = prompt(this.configuration.text, label.getText())\n      if (newText) {\n        let cmd = new draw2d.command.CommandAttr(label, {text: newText})\n        label.getCanvas().getCommandStack().execute(cmd)\n\n        this.configuration.onCommit(label.getText())\n      } else {\n        this.configuration.onCancel()\n      }\n    }\n  })\n","import draw2d from '../packages'\nimport r from \"lib/jquery.autoresize\"\n\n\n/**\n * @class\n *\n * Inplace editor for draw2d.shape.base.Label\n *\n * @example\n *\n *    var label =  new draw2d.shape.basic.Label({text:\"Double Click on me\"});\n *\n *    label.installEditor(new draw2d.ui.LabelInplaceEditor({\n *       // called after the value has been set to the LabelFigure\n *       onCommit: $.proxy(function(value){\n *           alert(\"new value set to:\"+value);\n *       },this),\n *       // called if the user abort the operation\n *       onCancel: function(){\n *       }\n *    }));\n *\n *    canvas.add(label,50,10);\n *\n * @author Andreas Herz\n * @extends draw2d.ui.LabelEditor\n */\ndraw2d.ui.LabelInplaceEditor = draw2d.ui.LabelEditor.extend(\n  /** @lends draw2d.ui.LabelInplaceEditor.prototype */\n  {\n\n    NAME: \"draw2d.ui.LabelInplaceEditor\",\n\n    init: function (listener) {\n      this._super();\n\n      // register some default listener and override this with the handover one\n      this.listener = extend({\n        onCommit: function () {\n        },\n        onCancel: function () {\n        },\n        onStart: function () {\n        }\n      }, listener);\n    },\n\n    /**\n     *\n     * Trigger the edit of the label text.\n     *\n     * @param {draw2d.shape.basic.Label} label the label to edit\n     */\n    start: function (label) {\n      this.label = label;\n\n      this.commitCallback = this.commit.bind(this);\n\n      // commit the editor if the user clicks anywhere in the document\n      //\n      $(\"body\").bind(\"click\", this.commitCallback);\n\n      // append the input field to the document and register\n      // the ENTER and ESC key to commit /cancel the operation\n      //\n      this.html = $('<input id=\"inplaceeditor\">');\n      this.html.val(label.getText());\n      this.html.hide();\n\n      $(\"body\").append(this.html);\n\n      this.html.autoResize();\n\n      this.html.bind(\"keyup\", function (e) {\n        switch (e.which) {\n          case 13:\n            this.commit();\n            break;\n          case 27:\n            this.cancel();\n            break;\n        }\n      }.bind(this));\n\n      this.html.bind(\"blur\", this.commitCallback);\n\n      // avoid commit of the operation if we click inside the editor\n      //\n      this.html.bind(\"click\", function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      });\n\n      // Position the INPUT and init the autoresize of the element\n      //\n      var canvas = this.label.getCanvas();\n      var bb = this.label.getBoundingBox();\n\n      bb.setPosition(canvas.fromCanvasToDocumentCoordinate(bb.x, bb.y));\n\n      // remove the scroll from the body if we add the canvas directly into the body\n      var scrollDiv = canvas.getScrollArea();\n      if (scrollDiv.is($(\"body\"))) {\n        bb.translate(canvas.getScrollLeft(), canvas.getScrollTop());\n      }\n\n      bb.translate(-1, -1);\n      bb.resize(2, 2);\n\n      this.html.css({\n        position: \"absolute\",\n        \"top\": bb.y,\n        \"left\": bb.x,\n        \"min-width\": bb.w * (1 / canvas.getZoom()),\n        \"height\": Math.max(25, bb.h * (1 / canvas.getZoom()))\n      });\n      this.html.fadeIn(() => {\n        this.html.focus();\n        this.listener.onStart()\n      });\n    },\n\n    /**\n     *\n     * Transfer the data from the editor into the label.<br>\n     * Remove the editor.<br>\n     *\n     * @private\n     */\n    commit: function () {\n      this.html.unbind(\"blur\", this.commitCallback);\n      $(\"body\").unbind(\"click\", this.commitCallback);\n      var label = this.html.val();\n      var cmd = new draw2d.command.CommandAttr(this.label, {text: label});\n      this.label.getCanvas().getCommandStack().execute(cmd);\n      this.html.fadeOut(() => {\n        this.html.remove();\n        this.html = null;\n        this.listener.onCommit(this.label.getText());\n      });\n    },\n\n    /**\n     *\n     * Transfer the data from the editor into the label.<br>\n     * Remove the editor.<br>\n     * @private\n     */\n    cancel: function () {\n      this.html.unbind(\"blur\", this.commitCallback);\n      $(\"body\").unbind(\"click\", this.commitCallback);\n      this.html.fadeOut(() => {\n        this.html.remove();\n        this.html = null;\n        this.listener.onCancel();\n      });\n\n    }\n  });\n\n","import draw2d from '../packages'\n\n/**\n * @class\n *\n * <Disclaimer> Writing my own class for arrays was one of my worst ideas...\n *\n * An ArrayList stores a variable number of objects. This is similar to making an array of\n * objects, but with an ArrayList, items can be easily added and removed from the ArrayList\n * and it is resized dynamically. This can be very convenient, but it's slower than making\n * an array of objects when using many elements.\n */\ndraw2d.util.ArrayList = Class.extend(\n  /** @lends draw2d.util.ArrayList */\n  {\n\n    init: function (a) {\n      if (Array.isArray(a)) {\n        this.data = a\n      } else {\n        this.data = []\n      }\n    },\n\n\n    /**\n     *\n     * Clears the array\n     *\n     * @since 6.1.0\n     * @returns {this}\n     */\n    clear: function () {\n      this.data = []\n\n      return this\n    },\n\n    /**\n     *\n     * Reverses the order of the elements in the ArrayList. The array will be modified!\n     *\n     * @returns {this}\n     */\n    reverse: function () {\n      this.data.reverse()\n\n      return this\n    },\n\n    /**\n     *\n     * The size/count of the stored objects.\n     *\n     * @returns {Number}\n     */\n    getSize: function () {\n      return this.data.length\n    },\n\n\n    /**\n     *\n     * checks to see if the Vector has any elements.\n     *\n     * @returns {Boolean} true if the list is empty\n     **/\n    isEmpty: function () {\n      return this.getSize() === 0\n    },\n\n    /**\n     *\n     * return the last element.\n     *\n     * @returns {Object}\n     */\n    last: function () {\n      return this.data[this.data.length - 1]\n    },\n\n    /**\n     *\n     * Return a reference to the internal javascript native array.\n     *\n     * @returns {Array}\n     */\n    asArray: function () {\n      return this.data\n    },\n\n    /**\n     *\n     * returns the first element\n     *\n     * @returns {Object}\n     */\n    first: function () {\n      if (this.data.length > 0) {\n        return this.data[0]\n      }\n      return null\n    },\n\n\n    /**\n     *\n     * returns an element at a specified index\n     *\n     * @param {Number} i\n     * @returns {Object}\n     */\n    get: function (i) {\n      return this.data[i]\n    },\n\n    /**\n     *\n     * Adds a element at the end of the Vector.\n     *\n     * @param {Object} obj the object to add\n     * @returns {this}\n     */\n    add: function (...objs) {\n      this.data.push(...objs)\n\n      return this\n    },\n\n    /**\n     *\n     *\n     * The method modifies the array and removes items from an array as necessary so that all remaining items pass a\n     * provided test. The test is a function that is passed an array item and the index of the\n     * item within the array. Only if the test returns true will the item stay in the array.\n     *\n     * @param {Function} func the filter function(element,index)\n     * @param {Object} func.value value of the element in iteration.\n     * @since 2.0.0\n     * @returns {this}\n     */\n    grep: function (func) {\n      this.data = this.data.filter(func)\n\n      return this\n    },\n\n    /**\n     *\n     *\n     * Return ONE element which matches by the given function or <b>null</b>\n     * if no element is found.\n     *\n     *    var r1= figures.find(function(figure){\n     *                  return figure.id===123456\n     *            });\n     *\n     * @param {Function} func the filter function\n     * @param {Object} func.value value of the element in iteration.\n     * @param {Object} func.index index of the element in collection.\n     * @since 2.0.0\n     */\n    find: function (func) {\n      return this.data.find(func)\n    },\n\n    /**\n     *\n     * Translate all items in the array into new items. The array list is modified after this call.\n     * You must clone the array before if you want avoid this.\n     *\n     *    var labels = this.commands.clone().map(function(e){\n     *         return e.getLabel();\n     *    });\n     *\n     * @param {Function} func The function to process each item against. The first argument to the function is the value; the second argument is the index or key of the array or object property.\n     * @param {Object} func.value value of the element in iteration.\n     * @param {Number} func.i index of the element in iteration\n     *\n     * @since 4.0.0\n     * @returns {this}\n     */\n    map: function (func) {\n      this.data = this.data.map(func)\n\n      return this\n    },\n\n    /**\n     *\n     * Removes any duplicate elements from the array. The array is modified after this call. You\n     * must clone the array before if you want avoid this\n     *\n     * @since 4.0.0\n     * @returns {this}\n     */\n    unique: function () {\n      this.data = this.data.filter((value, index, self) => self.indexOf(value) === index)\n\n      return this\n    },\n\n\n    /**\n     *\n     * Add all elements into this array.\n     *\n     * @param {draw2d.util.ArrayList} list\n     * @param {Boolean} [avoidDuplicates] checks whenever the new elements exists before insert if the parameter is to [true]\n     * @returns {this}\n     */\n    addAll: function (list, avoidDuplicates) {\n      if (!(list instanceof draw2d.util.ArrayList)) {\n        throw \"Unable to handle unknown object type in ArrayList.addAll\"\n      }\n\n      this.data = this.data.concat(list.data)\n      if (avoidDuplicates) {\n        this.unique()\n      }\n      return this\n    },\n\n    /**\n     *\n     * You can use the Array list as Stack as well. this is the pop method to remove one element\n     * at the end of the stack.\n     *\n     * @returns {Object} the remove object\n     */\n    pop: function () {\n      return this.removeElementAt(this.data.length - 1)\n    },\n\n    /**\n     * Push one element at the top of the stack/array\n     *\n     * @param {Object} value The object to add\n     * @returns {this}\n     */\n    push: function (value) {\n      this.add(value)\n    },\n\n    /**\n     *\n     * Remove the element from the list\n     *\n     * @param {Object} obj the object to remove\n     *\n     * @returns {Object} the removed object or null\n     */\n    remove: function (obj) {\n      let index = this.indexOf(obj)\n      if (index >= 0) {\n        return this.removeElementAt(index)\n      }\n\n      return null\n    },\n\n\n    /**\n     *\n     * Inserts an element at a given position. Existing elements will be shifted\n     * to the right.\n     *\n     * @param {Object} obj the object to insert.\n     * @param {Number} index the insert position.\n     * @returns {this}\n     */\n    insertElementAt: function (obj, index) {\n      this.data.splice(index, 0, obj)\n\n      return this\n    },\n\n    /**\n     *\n     * Removes an element at a specific index.\n     *\n     * @param {Number} index the index of the element to remove\n     * @returns {Object} the removed object\n     */\n    removeElementAt: function (index) {\n      let element = this.data[index]\n\n      this.data.splice(index, 1)\n\n      return element\n    },\n\n    /**\n     *\n     * removes all given elements in the ArrayList\n     *\n     * @param {draw2d.util.ArrayList} elements The elements to remove\n     * @returns {this}\n     */\n    removeAll: function (elements) {\n      if (elements instanceof draw2d.util.ArrayList) {\n        elements = elements.data\n      }\n\n      if (Array.isArray(elements)) {\n        elements.forEach((e) => {\n          this.remove(e)\n        })\n      }\n\n      return this\n    },\n\n    /**\n     *\n     * Return the zero based index of the given element or -1 if the element\n     * not in the list.\n     *\n     * @param {Object} obj the element to check\n     *\n     * @returns {Number} the index of the element or -1\n     */\n    indexOf: function (obj) {\n      return this.data.indexOf(obj)\n    },\n\n    /**\n     *\n     * returns true if the element is in the Vector, otherwise false.\n     *\n     * @param {Object} obj the object to check\n     *\n     * @returns {Boolean}\n     */\n    contains: function (obj) {\n      return this.data.includes(obj)\n    },\n\n\n    /**\n     *\n     * Sorts the collection based on a field name or sort a function. See on http://www.w3schools.com/jsref/jsref_sort.asp\n     * if you use a sort function.\n     *\n     * @param {String|Function} f the field name for the sorting or a sort function\n     *\n     * @returns {this}\n     *\n     */\n    sort: function (f) {\n      if (typeof f === \"function\") {\n        this.data.sort(f)\n      } else {\n        this.data.sort(function (a, b) {\n          if (a[f] < b[f])\n            return -1\n          if (a[f] > b[f])\n            return 1\n          return 0\n        })\n      }\n      return this\n    },\n\n    /**\n     *\n     * Copies the contents of a Vector to another Vector returning the new Vector.\n     *\n     * @param {Boolean} [deep] call \"clone\" of each elements and add the clone to the new ArrayList\n     *\n     * @returns {draw2d.util.ArrayList} the new ArrayList\n     */\n    clone: function (deep) {\n      let newVector = new draw2d.util.ArrayList()\n\n\n      if (deep) {\n        for (let i = 0; i < this.data.length; i++) {\n          newVector.data.push(this.data[i].clone())\n        }\n      } else {\n        newVector.data = this.data.slice(0)\n      }\n\n      return newVector\n    },\n\n\n    /**\n     *\n     * Iterates over the list of elements, yielding each in turn to an iterator\n     * function.\n     * Each invocation of iterator is called with two arguments: (index, element).\n     *\n     * @param {Function} func the callback function to call for each element\n     * @param {Number} func.i index of the element in iteration\n     * @param {Object} func.value value of the element in iteration.\n     * @param {Boolean} [reverse] optional parameter. Iterate the collection reverse if it set to <b>true</b>\n     * @returns {this}\n     */\n    each: function (func, reverse) {\n      if (typeof reverse !== \"undefined\" && reverse === true) {\n        for (let i = this.data.length - 1; i >= 0; i--) {\n          if (func(i, this.data[i]) === false)\n            break\n        }\n      } else {\n        for (let i = 0; i < this.data.length; i++) {\n          if (func(i, this.data[i]) === false)\n            break\n        }\n      }\n\n      return this\n    },\n\n\n    /**\n     * overwrites the element with an object at the specific index.\n     *\n     * @param {Object} obj The object to add\n     * @param {Number} index the index where the object should places.\n     *\n     * @returns {this}\n     */\n    overwriteElementAt: function (obj, index) {\n      this.data[index] = obj\n\n      return this\n    },\n\n    /**\n     *\n     * @returns {Object} the attributes which are required for persistence\n     */\n    getPersistentAttributes: function () {\n      return {data: this.data}\n    },\n\n    /**\n     *\n     * Read all attributes from the serialized properties and transfer them into the shape.\n     *\n     * @param {Object} memento\n     * @returns {this}\n     */\n    setPersistentAttributes: function (memento) {\n      this.data = memento.data\n\n      return this\n    }\n  })\n\ndraw2d.util.ArrayList.EMPTY_LIST = new draw2d.util.ArrayList()\n\n\n","import draw2d from '../packages'\n\n\ndraw2d.util.Base64 = {\n\n    /**\n     * Maps bytes to characters.\n     * @type {Object}\n     * @private\n     */\n    byteToCharMap_ :null,\n\n\n    /**\n     * Maps characters to bytes.\n     * @type {Object}\n     * @private\n     */\n    charToByteMap_: null,\n\n\n    /**\n     * Maps bytes to websafe characters.\n     * @type {Object}\n     * @private\n     */\n    byteToCharMapWebSafe_ : null,\n\n    /**\n     * Maps websafe characters to bytes.\n     * @type {Object}\n     * @private\n     */\n    charToByteMapWebSafe_ : null,\n\n\n    /**\n     * Our default alphabet, shared between\n     * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n     * @type {string}\n     */\n    ENCODED_VALS_BASE : 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',\n\n    /**\n     * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n     * @type {string}\n     */\n    ENCODED_VALS : 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789' + '+/=',\n\n\n    /**\n     * Our websafe alphabet.\n     * @type {string}\n     */\n    ENCODED_VALS_WEBSAFE :'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789' + '-_.',\n\n\n    encodeByteArray: function(input, opt_webSafe) {\n        draw2d.util.Base64.init();\n\n        var byteToCharMap = opt_webSafe ?  draw2d.util.Base64.byteToCharMapWebSafe_ : draw2d.util.Base64.byteToCharMap_;\n\n        var output = [];\n\n        for (var i = 0; i < input.length; i += 3) {\n          var byte1 = input[i];\n          var haveByte2 = i + 1 < input.length;\n          var byte2 = haveByte2 ? input[i + 1] : 0;\n          var haveByte3 = i + 2 < input.length;\n          var byte3 = haveByte3 ? input[i + 2] : 0;\n\n          var outByte1 = byte1 >> 2;\n          var outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n          var outByte3 = ((byte2 & 0x0F) << 2) | (byte3 >> 6);\n          var outByte4 = byte3 & 0x3F;\n\n          if (!haveByte3) {\n            outByte4 = 64;\n\n            if (!haveByte2) {\n              outByte3 = 64;\n            }\n          }\n\n          output.push(byteToCharMap[outByte1],\n                      byteToCharMap[outByte2],\n                      byteToCharMap[outByte3],\n                      byteToCharMap[outByte4]);\n        }\n\n        return output.join('');\n      },\n\n\n      /**\n       * \n       * Base64-encode a string.\n       *\n       * @param {string} input A string to encode.\n       * @param {boolean=} opt_webSafe If true, we should use the alternative alphabet.\n       * @returns {string} The base64 encoded string.\n       */\n     encode: function(input, opt_webSafe) {\n        return draw2d.util.Base64.encodeByteArray( draw2d.util.Base64.stringToByteArray(input), opt_webSafe);\n      },\n\n\n      /**\n       * \n       * Base64-decode a string.\n       *\n       * @param {String} input to decode (length not required to be a multiple of 4).\n       * @param {boolean=} opt_webSafe True if we should use the\n       *    alternative alphabet.\n       * @returns {Array} bytes representing the decoded value.\n       */\n      decode: function(input, opt_webSafe) {\n        draw2d.util.Base64.init();\n\n        var charToByteMap = opt_webSafe ?draw2d.util.Base64.charToByteMapWebSafe_ : draw2d.util.Base64.charToByteMap_;\n\n        var output = [];\n\n        for (var i = 0; i < input.length; ) {\n          var byte1 = charToByteMap[input.charAt(i++)];\n\n          var haveByte2 = i < input.length;\n          var byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n          ++i;\n\n          var haveByte3 = i < input.length;\n          var byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 0;\n          ++i;\n\n          var haveByte4 = i < input.length;\n          var byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 0;\n          ++i;\n\n          if (byte1 == null || byte2 == null ||\n              byte3 == null || byte4 == null) {\n            throw Error();\n          }\n\n          var outByte1 = (byte1 << 2) | (byte2 >> 4);\n          output.push(outByte1);\n\n          if (byte3 != 64) {\n            var outByte2 = ((byte2 << 4) & 0xF0) | (byte3 >> 2);\n            output.push(outByte2);\n\n            if (byte4 != 64) {\n              var outByte3 = ((byte3 << 6) & 0xC0) | byte4;\n              output.push(outByte3);\n            }\n          }\n        }\n\n        return output;\n     },\n\n    /**\n     * Turns a string into an array of bytes; a \"byte\" being a JS number in the\n     * range 0-255.\n     * @param {string} str String value to arrify.\n     * @returns {!Array.<number>} Array of numbers corresponding to the\n     *    UCS character codes of each character in str.\n     */\n    stringToByteArray: function(str) {\n      var output = [], p = 0;\n      for (var i = 0; i < str.length; i++) {\n        var c = str.charCodeAt(i);\n        while (c > 0xff) {\n          output[p++] = c & 0xff;\n          c >>= 8;\n        }\n        output[p++] = c;\n      }\n      return output;\n    },\n\n    init: function() {\n        if (!draw2d.util.Base64.byteToCharMap_) {\n            draw2d.util.Base64.byteToCharMap_ = {};\n            draw2d.util.Base64.charToByteMap_ = {};\n            draw2d.util.Base64.byteToCharMapWebSafe_ = {};\n            draw2d.util.Base64.charToByteMapWebSafe_ = {};\n\n          // We want quick mappings back and forth, so we precompute two maps.\n          for (var i = 0; i < draw2d.util.Base64.ENCODED_VALS.length; i++) {\n              draw2d.util.Base64.byteToCharMap_[i] = draw2d.util.Base64.ENCODED_VALS.charAt(i);\n              draw2d.util.Base64.charToByteMap_[draw2d.util.Base64.byteToCharMap_[i]] = i;\n              draw2d.util.Base64.byteToCharMapWebSafe_[i] = draw2d.util.Base64.ENCODED_VALS_WEBSAFE.charAt(i);\n              draw2d.util.Base64.charToByteMapWebSafe_[draw2d.util.Base64.byteToCharMapWebSafe_[i]] = i;\n          }\n        }\n    }\n};\n","import draw2d from '../packages'\n\n/**\n * @class\n * Util class to handle colors in the draw2d enviroment.\n *\n * @example\n *     // Create a new Color with RGB values\n *     var color = new draw2d.util.Color(127,0,0);\n *\n *     // of from a hex string\n *     var color2 = new draw2d.util.Color(\"#f00000\");\n *\n *     // Create a little bit darker color\n *     var darkerColor = color.darker(0.2); // 20% darker\n *\n *     // create a optimal text color if 'color' the background color\n *     // (best in meaning of contrast and readability)\n *     var fontColor = color.getIdealTextColor();\n *\n * @param {Number|String|draw2d.util.Color|Array} red\n * @param {Number} green\n * @param {Number} blue\n * @param {Number} [alpha]\n */\ndraw2d.util.Color = Class.extend(\n  /** @lends draw2d.util.Color */\n  {\n\n    init: function(red, green, blue, alpha) {\n\n      this.hashString = null;\n\n      if(typeof red === \"undefined\" || red===null){\n          this.hashString = \"none\";\n      }\n      else if(red instanceof draw2d.util.Color){\n          if(red.hashString===\"none\"){\n              this.hashString = \"none\";\n          }\n          else{\n              this.red = red.red;\n              this.green = red.green;\n              this.blue = red.blue;\n              this.alpha = red.alpha;\n          }\n      }\n      else if(typeof red === \"string\")\n      {\n           if (red === \"none\") {\n              this.hashString = \"none\";\n           }\n           else {\n              let rgba = this.hex2rgb(red);\n              this.red = rgba[0];\n              this.green = rgba[1];\n              this.blue = rgba[2];\n              this.alpha = rgba[3];\n          }\n      }\n      // JSON struct of {red:###, green:###, blue:### }\n      else if(typeof red === \"object\" && typeof red.red===\"number\")\n      {\n        this.red= red.red;\n        this.green = red.green;\n        this.blue = red.blue;\n        this.alpha = red.alpha;\n      }\n      // array detection 1\n      else if(red instanceof Array && red.length===3)\n      {\n        this.red= red[0];\n        this.green = red[1];\n        this.blue = red[2];\n        this.alpha = red[3];\n      }\n      // array detection 2\n      else if(typeof red === \"object\" && typeof red.length ===\"number\" && red.length===3)\n      {\n        this.red= red[0]\n        this.green = red[1]\n        this.blue = red[2]\n        this.alpha = red[3]\n      }\n      else\n      {\n        this.red= parseInt(red)\n        this.green = parseInt(green)\n        this.blue = parseInt(blue)\n        this.alpha = (typeof alpha === 'undefined')? 1 : parseFloat(alpha)\n      }\n    },\n\n\n    /**\n     * \n     * Convert the color object into a HTML CSS representation\n     * @returns {String} the color in rgb(##,##,##) representation\n     **/\n    getHTMLStyle: function()\n    {\n      if(typeof this.red ===\"undefined\")\n        return \"rgba(0,0,0,0)\";\n\n      return \"rgba(\"+this.red+\",\"+this.green+\",\"+this.blue+\",\"+this.alpha+\")\"\n    },\n\n\n    /**\n     * \n     * The red part of the color.\n     *\n     * @returns {Number} the [red] part of the color.\n     **/\n    getRed: function()\n    {\n      return this.red\n    },\n\n\n    /**\n     * \n     * The green part of the color.\n     *\n     * @returns {Number} the [green] part of the color.\n     **/\n    getGreen: function()\n    {\n      return this.green;\n    },\n\n\n    /**\n     * \n     * The blue part of the color\n     *\n     * @returns {Number} the [blue] part of the color.\n     **/\n    getBlue: function()\n    {\n      return this.blue;\n    },\n\n\n    /**\n     * \n     * The alpha part of the color\n     *\n     * @returns {Number} the [alpha] part of the color.\n     **/\n    getAlpha: function()\n    {\n      return this.alpha;\n    },\n\n    /**\n     * \n     * Returns the ideal Text Color. Useful for font color selection by a given background color.\n     *\n     * @returns {draw2d.util.Color} The <i>ideal</i> inverse color.\n     **/\n    getIdealTextColor: function()\n    {\n       let nThreshold = 105;\n       let bgDelta = (this.red * 0.299) + (this.green * 0.587) + (this.blue * 0.114);\n       return (255 - bgDelta < nThreshold) ? new  draw2d.util.Color(0,0,0) : new  draw2d.util.Color(255,255,255);\n    },\n\n    /**\n     * return array of [r,g,b,a] from any valid color. if failed returns [0,0,0,1]\n     *\n     * @param hexcolor\n     * @returns {*}\n     */\n    hex2rgb: function(color)\n    {\n      if (!color) {\n        return [0, 0, 0, 1]\n      }\n\n      if (color.toLowerCase() === 'transparent') {\n        return [0, 0, 0, 0]\n      }\n\n      if (color[0] === '#'){\n        if (color.length < 7){\n          // convert #RGB and #RGBA to #RRGGBB and #RRGGBBAA\n          color = '#' + color[1] + color[1] + color[2] + color[2] + color[3] + color[3] + (color.length > 4 ? color[4] + color[4] : '');\n        }\n        return [parseInt(color.substr(1, 2), 16),\n          parseInt(color.substr(3, 2), 16),\n          parseInt(color.substr(5, 2), 16),\n          color.length > 7 ? parseInt(color.substr(7, 2), 16)/255 : 1]\n      }\n\n      if (color.indexOf('rgb') === -1){\n        // convert named colors\n        let temp_elem = document.body.appendChild(document.createElement('fictum')); // intentionally use unknown tag to lower chances of css rule override with !important\n        let flag = 'rgb(1, 2, 3)' // this flag tested on chrome 59, ff 53, ie9, ie10, ie11, edge 14\n        temp_elem.style.color = flag\n        if (temp_elem.style.color !== flag) {\n          return [0, 0, 0, 1] // color set failed - some monstrous css rule is probably taking over the color of our object\n        }\n        temp_elem.style.color = color\n\n        if (temp_elem.style.color === flag || temp_elem.style.color === '') {\n          return [0, 0, 0, 1] // color parse failed\n        }\n        color = getComputedStyle(temp_elem).color\n        document.body.removeChild(temp_elem)\n      }\n\n      if (color.indexOf('rgb') === 0) {\n        if (color.indexOf('rgba') === -1) {\n          color += ',1'; // convert 'rgb(R,G,B)' to 'rgb(R,G,B)A' which looks awful but will pass the regxep below\n        }\n        return color.match(/[\\.\\d]+/g).map( a => +a);\n      }\n    },\n\n    /**\n     *\n     **/\n    hex: function()\n    {\n      return(\n        this.int2hex(this.red)+\n        this.int2hex(this.green)+\n        this.int2hex(this.blue)\n        // breaks raphaelJS...so don'T use it right now\n        //(this.alpha * 255).toString(16).substring(0,2).toUpperCase()\n      );\n    },\n\n\n    /**\n     * \n     * Convert the color object into a HTML CSS representation\n     * @returns {String} the color in rgb(##,##,##) representation\n     **/\n    rgba: function()\n    {\n      return this.getHTMLStyle()\n    },\n\n\n    /**\n     * \n     * Convert the color object into a HTML CSS representation\n     * @returns {String} the color in #RRGGBB representation\n     **/\n    hash: function()\n    {\n        if(this.hashString===null){\n            this.hashString= \"#\"+this.hex();\n        }\n        return this.hashString;\n    },\n\n    /**\n     * @private\n     */\n    int2hex: function(v)\n    {\n      v=Math.round(Math.min(Math.max(0,v),255));\n      return(\"0123456789ABCDEF\".charAt((v-v%16)/16)+\"0123456789ABCDEF\".charAt(v%16));\n    },\n\n    /**\n     * \n     * Returns a darker color of the given one. The original color is unchanged.\n     *\n     * @param {Number} fraction  Darkness fraction between [0..1].\n     * @return{draw2d.util.Color}        Darker color.\n     */\n    darker: function(fraction)\n    {\n       // we can't \"darker\" a undefined color. In this case we return the undefnied color itself\n       //\n       if(this.hashString===\"none\")\n           return this;\n\n       fraction = (typeof fraction === 'undefined') ? 0.1 : fraction;\n\n       let red   = parseInt(Math.round (this.getRed()   * (1.0 - fraction)));\n       let green = parseInt(Math.round (this.getGreen() * (1.0 - fraction)));\n       let blue  = parseInt(Math.round (this.getBlue()  * (1.0 - fraction)));\n\n       if (red   < 0) red   = 0; else if (red   > 255) red   = 255;\n       if (green < 0) green = 0; else if (green > 255) green = 255;\n       if (blue  < 0) blue  = 0; else if (blue  > 255) blue  = 255;\n\n       return new draw2d.util.Color(red, green, blue, this.alpha);\n    },\n\n\n    /**\n     * \n     * Make a color lighter. The original color is unchanged.\n     *\n     * @param {Number} fraction  lighter fraction between [0..1].\n     * @returns {draw2d.util.Color} Lighter color.\n     */\n    lighter: function( fraction)\n    {\n        // we can't \"lighter\" a undefined color. In this case we return the undefined color itself\n        //\n        if(this.hashString===\"none\")\n            return this;\n\n        fraction = (typeof fraction === 'undefined') ? 0.1 : fraction;\n\n        let red   = parseInt(Math.round (this.getRed()   * (1.0 + fraction)));\n        let green = parseInt(Math.round (this.getGreen() * (1.0 + fraction)));\n        let blue  = parseInt(Math.round (this.getBlue()  * (1.0 + fraction)));\n\n        if (red   < 0) red   = 0; else if (red   > 255) red   = 255;\n        if (green < 0) green = 0; else if (green > 255) green = 255;\n        if (blue  < 0) blue  = 0; else if (blue  > 255) blue  = 255;\n\n        return new draw2d.util.Color(red, green, blue, this.alpha);\n    },\n\n    /**\n     * \n     * Return a new color wich is faded to the given color.\n     * @param {draw2d.util.Color} color\n     * @param {Number} pc the fade percentage in [0..1]\n     * @returns {draw2d.util.Color}\n     *\n     * @since 2.1.0\n     */\n    fadeTo: function(color, pc){\n\n        let r= Math.floor(this.red+(pc*(color.red-this.red)) + .5);\n        let g= Math.floor(this.green+(pc*(color.green-this.green)) + .5);\n        let b= Math.floor(this.blue+(pc*(color.blue-this.blue)) + .5);\n        let a= Math.floor(this.alpha+(pc*(color.alpha-this.alpha)) + .5);\n\n        return new draw2d.util.Color(r,g,b,a);\n    },\n\n\t/**\n\t * \n\t * Compares two color objects\n\t *\n\t * @param {draw2d.util.Color} o\n\t * @returns {Boolean}\n\t **/\n\tequals: function( o)\n\t{\n\t\tif(!(o instanceof draw2d.util.Color)){\n\t\t\treturn false;\n\t\t}\n\t\treturn this.rgba()===o.rgba();\n\t}\n\n});\n\nexport default draw2d.util.Color;\n","\n\n/*!\n * JavaScript Debug - v0.4 - 6/22/2010\n * http://benalman.com/projects/javascript-debug-console-log/\n *\n * Copyright (c) 2010 \"Cowboy\" Ben Alman\n * Dual licensed under the MIT and GPL licenses.\n * http://benalman.com/about/license/\n *\n * With lots of help from Paul Irish!\n * http://paulirish.com/\n */\n// Script: JavaScript Debug: A simple wrapper for console.log\n//\n// *Version: 0.4, Last Updated: 6/22/2010*\n//\n// Tested with Internet Explorer 6-8, Firefox 3-3.6, Safari 3-4, Chrome 3-5, Opera 9.6-10.5\n//\n// Home       - http://benalman.com/projects/javascript-debug-console-log/\n// GitHub     - http://github.com/cowboy/javascript-debug/\n// Source     - http://github.com/cowboy/javascript-debug/raw/master/ba-debug.js\n// (Minified) - http://github.com/cowboy/javascript-debug/raw/master/ba-debug.min.js (1.1kb)\n//\n// About: License\n//\n// Copyright (c) 2010 \"Cowboy\" Ben Alman,\n// Dual licensed under the MIT and GPL licenses.\n// http://benalman.com/about/license/\n//\n// About: Support and Testing\n//\n// Information about what browsers this code has been tested in.\n//\n// Browsers Tested - Internet Explorer 6-8, Firefox 3-3.6, Safari 3-4, Chrome\n// 3-5, Opera 9.6-10.5\n//\n// About: Examples\n//\n// These working examples, complete with fully commented code, illustrate a few\n// ways in which this plugin can be used.\n//\n// Examples - http://benalman.com/code/projects/javascript-debug/examples/debug/\n//\n// About: Revision History\n//\n// 0.4 - (6/22/2010) Added missing passthrough methods: exception,\n//       groupCollapsed, table\n// 0.3 - (6/8/2009) Initial release\n//\n// Topic: Pass-through console methods\n//\n// assert, clear, count, dir, dirxml, exception, group, groupCollapsed,\n// groupEnd, profile, profileEnd, table, time, timeEnd, trace\n//\n// These console methods are passed through (but only if both the console and\n// the method exists), so use them without fear of reprisal. Note that these\n// methods will not be passed through if the logging level is set to 0 via\n// <debug.setLevel>.\n\nwindow.debug = (function(){\n  var window = this,\n\n    // Some convenient shortcuts.\n    aps = Array.prototype.slice,\n    con = console,\n\n    // Public object to be returned.\n    that = {},\n\n    callback_func,\n    callback_force,\n\n    // Default logging level, show everything.\n    log_level = 9,\n\n    // Logging methods, in \"priority order\". Not all console implementations\n    // will utilize these, but they will be used in the callback passed to\n    // setCallback.\n    log_methods = [ 'error', 'warn', 'info', 'debug', 'log' ],\n\n    // Pass these methods through to the console if they exist, otherwise just\n    // fail gracefully. These methods are provided for convenience.\n    pass_methods = 'assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace'.split(' '),\n    idx = pass_methods.length,\n\n    // Logs are stored here so that they can be recalled as necessary.\n    logs = [];\n\n  while ( --idx >= 0 ) {\n    (function( method ){\n\n      // Generate pass-through methods. These methods will be called, if they\n      // exist, as long as the logging level is non-zero.\n      that[ method ] = function() {\n        log_level !== 0 && con && con[ method ]\n          && con[ method ].apply( con, arguments );\n      };\n\n    })( pass_methods[idx] );\n  }\n\n  idx = log_methods.length;\n  while ( --idx >= 0 ) {\n    (function( idx, level ){\n\n      // Method: debug.log\n      //\n      // Call the console.log method if available. Adds an entry into the logs\n      // array for a callback specified via <debug.setCallback>.\n      //\n      // Usage:\n      //\n      //  debug.log( object [, object, ...] );                               - -\n      //\n      // Arguments:\n      //\n      //  object - (Object) Any valid JavaScript object.\n\n      // Method: debug.debug\n      //\n      // Call the console.debug method if available, otherwise call console.log.\n      // Adds an entry into the logs array for a callback specified via\n      // <debug.setCallback>.\n      //\n      // Usage:\n      //\n      //  debug.debug( object [, object, ...] );                             - -\n      //\n      // Arguments:\n      //\n      //  object - (Object) Any valid JavaScript object.\n\n      // Method: debug.info\n      //\n      // Call the console.info method if available, otherwise call console.log.\n      // Adds an entry into the logs array for a callback specified via\n      // <debug.setCallback>.\n      //\n      // Usage:\n      //\n      //  debug.info( object [, object, ...] );                              - -\n      //\n      // Arguments:\n      //\n      //  object - (Object) Any valid JavaScript object.\n\n      // Method: debug.warn\n      //\n      // Call the console.warn method if available, otherwise call console.log.\n      // Adds an entry into the logs array for a callback specified via\n      // <debug.setCallback>.\n      //\n      // Usage:\n      //\n      //  debug.warn( object [, object, ...] );                              - -\n      //\n      // Arguments:\n      //\n      //  object - (Object) Any valid JavaScript object.\n\n      // Method: debug.error\n      //\n      // Call the console.error method if available, otherwise call console.log.\n      // Adds an entry into the logs array for a callback specified via\n      // <debug.setCallback>.\n      //\n      // Usage:\n      //\n      //  debug.error( object [, object, ...] );                             - -\n      //\n      // Arguments:\n      //\n      //  object - (Object) Any valid JavaScript object.\n\n      that[ level ] = function() {\n        var args = aps.call( arguments ),\n          log_arr = [ level ].concat( args );\n\n        logs.push( log_arr );\n        exec_callback( log_arr );\n\n        if ( !con || !is_level( idx ) ) { return; }\n\n        con.firebug ? con[ level ].apply( window, args )\n          : con[ level ] ? con[ level ]( args )\n          : con.log( args );\n      };\n\n    })( idx, log_methods[idx] );\n  }\n\n  // Execute the callback function if set.\n  function exec_callback( args ) {\n    if ( callback_func && (callback_force || !con || !con.log) ) {\n      callback_func.apply( window, args );\n    }\n  };\n\n  // Method: debug.setLevel\n  //\n  // Set a minimum or maximum logging level for the console. Doesn't affect\n  // the <debug.setCallback> callback function, but if set to 0 to disable\n  // logging, <Pass-through console methods> will be disabled as well.\n  //\n  // Usage:\n  //\n  //  debug.setLevel( [ level ] )                                            - -\n  //\n  // Arguments:\n  //\n  //  level - (Number) If 0, disables logging. If negative, shows N lowest\n  //    priority levels of log messages. If positive, shows N highest priority\n  //    levels of log messages.\n  //\n  // Priority levels:\n  //\n  //   log (1) < debug (2) < info (3) < warn (4) < error (5)\n\n  that.setLevel = function( level ) {\n    log_level = typeof level === 'number' ? level : 9;\n  };\n\n  // Determine if the level is visible given the current log_level.\n  function is_level( level ) {\n    return log_level > 0\n      ? log_level > level\n      : log_methods.length + log_level <= level;\n  };\n\n  // Method: debug.setCallback\n  //\n  // Set a callback to be used if logging isn't possible due to console.log\n  // not existing. If unlogged logs exist when callback is set, they will all\n  // be logged immediately unless a limit is specified.\n  //\n  // Usage:\n  //\n  //  debug.setCallback( callback [, force ] [, limit ] )\n  //\n  // Arguments:\n  //\n  //  callback - (Function) The aforementioned callback function. The first\n  //    argument is the logging level, and all subsequent arguments are those\n  //    passed to the initial debug logging method.\n  //  force - (Boolean) If false, log to console.log if available, otherwise\n  //    callback. If true, log to both console.log and callback.\n  //  limit - (Number) If specified, number of lines to limit initial scrollback\n  //    to.\n\n  that.setCallback = function() {\n    var args = aps.call( arguments ),\n      max = logs.length,\n      i = max;\n\n    callback_func = args.shift() || null;\n    callback_force = typeof args[0] === 'boolean' ? args.shift() : false;\n\n    i -= typeof args[0] === 'number' ? args.shift() : max;\n\n    while ( i < max ) {\n      exec_callback( logs[i++] );\n    }\n  };\n\n  return that;\n})();\n\n","import draw2d from '../packages'\n\n\ndraw2d.util.JSON = {\n\n        /**\n         * \n         * Given a dot deliminated string set will create an object\n         * based on the structure of the string with the desired value\n         *\n         * @param {Object} data   the json object to modify\n         * @param {String} path   path indicating where value should be placed\n         * @param {Object} value  the value desired to be set at the location determined by path\n         */\n        set: function(data, path, value) {\n          if(!path || path===''){\n              return;\n          }\n\n          let re = /[\\w-]+|\\[\\]|([^\\[[\\w]\\]]|[\"'](.*?)['\"])/g;\n          // parse path on dots, and brackets\n          let pathList = path.match(re);\n          let parent = data;\n          let parentKey;\n          let grandParent = null;\n          let grandParentKey = null;\n\n          let addObj = function(obj, key, data) {\n            if(key === '[]') {\n              obj.push(data);\n            } else {\n              obj[key] = data;\n            }\n          };\n\n          while(pathList.length > 0) {\n            parentKey = pathList.shift().replace(/[\"']/g, '');\n\n            // Number, treat it as an array\n            if (!isNaN(+parentKey) || parentKey === \"[]\") {\n              if(parent.constructor !== Array ) {\n                parent = [];\n                addObj(grandParent, grandParentKey, parent);\n              }\n            // String, treat it as a key\n            }\n            else if (typeof parentKey===\"string\") {\n              if(!$.isPlainObject(parent)) {\n                parent = {};\n                addObj(grandParent, grandParentKey, parent);\n              }\n            }\n            // Next\n            grandParent = parent;\n            grandParentKey = parentKey;\n            parent = parent[parentKey];\n          }\n\n          addObj(grandParent, grandParentKey, value);\n        },\n\n        /**\n         * \n         * Returns the value defined by the path passed in\n         *\n         * @param  {Object} data the JSON data object\n         * @param  {String} path string leading to a desired value\n         */\n        get: function(data, path) {\n          let regex = /[\\w-]+|\\[\\]|([^\\[[\\w]\\]]|[\"'](.*?)['\"])/g;\n          //check if path is truthy\n          if (!path){\n              return undefined;\n          }\n          //parse path on dots and brackets\n          let paths = path.match(regex);\n          //step through data object until all keys in path have been processed\n          while (data !== null && paths.length > 0) {\n            if(data.propertyIsEnumerable(paths[0].replace(/\"/g, ''))){\n              data = data[paths.shift().replace(/\"/g, '')];\n            }\n            else{\n              return undefined;\n            }\n          }\n          return data;\n        },\n\n        /**\n         * \n         * calculates the diff between the given json objects\n         *\n         */\n        diff: function(obj1, obj2) {\n            let result = {};\n            for(let key in obj1) {\n              let v1 = obj1[key];\n              let v2 = obj2[key];\n                if(v1 !== v2) {\n                \tif(v1.equals ){\n                \t\tif(!v1.equals(v2)){\n                \t\t\tresult[key] = obj1[key];\n                \t\t}\n                \t}\n                \telse{\n            \t\t\tresult[key] = obj1[key];\n                \t}\n                }\n            }\n            return result;\n        },\n\n        flatDiff: function(obj1, obj2) {\n          let result = {};\n            for(let key in obj1) {\n                if(obj1[key] !== obj2[key]) {\n                    result[key] = obj1[key];\n                }\n            }\n            return result;\n        },\n\n        ensureDefault:function( json, attribute, value)\n        {\n            if (!json.hasOwnProperty(attribute)) {\n                json[attribute] = value;\n            }\n        }\n};\n\nexport default draw2d.util.JSON;\n","// avoid iPad bounce effect during DragDrop//\ndocument.ontouchmove = function(e){e.preventDefault();};\n\n\n","\n// extending raphael with a polygon function\nRaphael.fn.polygon = function(pointString) {\n  var poly  = ['M'];\n  var point = pointString.split(' ');\n      \n  for(var i=0; i < point.length; i++) {\n     var c = point[i].split(',');\n     for(var j=0; j < c.length; j++) {\n        var d = parseFloat(c[j]);\n        if (!isNaN(d))\n          poly.push(d);\n     };\n     if (i == 0)\n      poly.push('L');\n  }\n  poly.push('Z');\n  \n  return this.path(poly);\n};","import draw2d from '../packages'\n\n/**\n * @class\n * Generates a (pseudo) UUID's\n *\n * @example\n *     // a UUID in the format\n *     // xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx (8-4-4-4-12)\n *     var id = draw2d.util.UUID.create();\n *\n * @author Andreas Herz\n */\ndraw2d.util.UUID = {\n  /**\n   *\n   * Generates a unique id.<br>\n   * But just for the correctness: <strong>this is no Global Unique Identifier</strong>, it is just a random generator\n   * with the output that looks like a GUID. <br>\n   * But may be also useful.\n   *\n   * @returns {String} the  UUID in the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx (8-4-4-4-12)\n   **/\n  create: function () {\n    let segment = function () {\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1)\n    }\n    return (segment() + segment() + \"-\" + segment() + \"-\" + segment() + \"-\" + segment() + \"-\" + segment() + segment() + segment())\n  }\n}\n\nexport default draw2d.util.UUID\n","\n\n// Pass in the objects to merge as arguments.// For a deep extend, set the first argument to `true`.\nlet fn = function () {\n\n  // Variables\n  let extended = {}\n  let deep = false\n  let i = 0\n  let length = arguments.length\n\n  // Check if a deep merge\n  if ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {\n    deep = arguments[0]\n    i++\n  }\n\n  // Merge the object into the extended object\n  /**\n   *\n   * @param obj\n   */\n  let merge = function (obj) {\n    for ( let prop in obj ) {\n      if ( Object.prototype.hasOwnProperty.call( obj, prop ) ) {\n        // If deep merge and property is an object, merge properties\n        if ( deep && Object.prototype.toString.call(obj[prop]) === '[object Object]' ) {\n          extended[prop] = extend( true, extended[prop], obj[prop] )\n        } else {\n          extended[prop] = obj[prop]\n        }\n      }\n    }\n  }\n\n  // Loop through each object and conduct a merge\n  for ( ; i < length; i++ ) {\n    let obj = arguments[i]\n    merge(obj)\n  }\n\n  return extended\n\n}\nmodule.exports = fn\nglobal.extend = fn\n","/**\n * adding support method to check if the node is already visible\n **/\n(function() {\n    Raphael.el.isVisible = function() {\n        return (this.node.style.display !== \"none\");\n    }\n})();\n","\n\n/**\n * @class\n *\n * A bezier spline object.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.util.spline.Spline\n */\nimport draw2d from '../../packages'\n\ndraw2d.util.spline.BezierSpline = draw2d.util.spline.Spline.extend(\n\n    /** @lends draw2d.util.spline.BezierSpline.prototype */\n    {\n    \n    NAME: \"draw2d.util.spline.BezierSpline\",\n\n    /**\n     */\n    init: function()\n    {\n        this._super();\n    },\n\n\n\n    /**\n     * Create a spline based on the given control points.\n     * The generated curve starts in the first control point and ends\n     * in the last control point.\n     *\n     * @param {Array} controlPoints  Control points of spline (x0,y0,z0,x1,y1,z1,...).\n     * @param {Number} parts Number of parts to divide each leg into.\n     *\n     * @returns {Array} the new generated array with new draw2d.geo.Point\n     */\n    generate: function(controlPoints, parts)\n    {\n      var n = controlPoints.getSize();\n      var spline = new draw2d.util.ArrayList();\n\n      spline.add(this.p(0, 0, controlPoints));\n\n      for (var i = 0; i < n - 3; i += 3) {\n        for (var j = 1; j <= parts; j++) {\n           spline.add(this.p (i, j /  parts, controlPoints));\n        }\n      }\n\n  //    spline.add(controlPoints.get(controlPoints.getSize()-1));\n\n      return spline;\n    },\n\n\n\n    p: function( i,  t,  cp)\n    {\n      var x = 0.0;\n      var y = 0.0;\n\n      var k = i;\n      for (var j = 0; j <= 3; j++) {\n        var b = this.blend (j, t);\n        var p = cp.get(k++);\n        x += b * p?.x || 0;\n        y += b * p?.y || 0;\n     }\n\n      return new draw2d.geo.Point( x, y);\n    },\n\n\n\n    blend: function ( i,  t)\n    {\n      if      (i == 0) return (1 - t) * (1 - t) * (1 - t);\n      else if (i == 1) return 3 * t * (1 - t) * (1 - t);\n      else if (i == 2) return 3 * t * t * (1 - t);\n      else             return t * t * t;\n    }\n});\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A catmull-rom spline object.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.util.spline.CubicSpline\n */\ndraw2d.util.spline.CatmullRomSpline = draw2d.util.spline.CubicSpline.extend(\n\n    /** @lends draw2d.util.spline.CatmullRomSpline.prototype */\n    {\n    \n    NAME: \"draw2d.util.spline.CatmullRomSpline\",\n\n    /**\n     */\n    init: function()\n    {\n        this._super();\n    },\n\n\n    blend: function(i, t) {\n        if (i == -2)\n            return ((-t + 2) * t - 1) * t / 2;\n        else if (i == -1)\n            return (((3 * t - 5) * t) * t + 2) / 2;\n        else if (i == 0)\n            return ((-3 * t + 4) * t + 1) * t / 2;\n        else\n            return ((t - 1) * t * t) / 2;\n    }\n\n});\n","import draw2d from '../../packages'\n\n\n/**\n * @class\n *\n * A cubic spline object.\n *\n * @inheritable\n * @author Andreas Herz\n *\n * @extends draw2d.util.spline.Spline\n */\ndraw2d.util.spline.CubicSpline = draw2d.util.spline.Spline.extend(\n\n    /** @lends draw2d.util.spline.CubicSpline.prototype */\n    {\n    \n    NAME: \"draw2d.util.spline.CubicSpline\",\n\n    /**\n     */\n    init: function()\n    {\n        this._super();\n    },\n\n\n    /**\n    * Create a spline based on the given control points.\n    * The generated curve starts in the first control point and ends\n    * in the last control point.\n    *\n    * @param {Array} controlPoints  Control points of spline (x0,y0,z0,x1,y1,z1,...).\n    * @param {Number} parts Number of parts to divide each leg into.\n    *\n    * @returns {Array} the new generated array with new draw2d.geo.Point\n    */\n    generate: function(controlPoints, parts)\n    {\n        // Endpoints are added twice to get them include in the\n        // generated array\n        var cp = new draw2d.util.ArrayList();\n        cp.add(controlPoints.get(0));\n        cp.addAll(controlPoints);\n        cp.add(controlPoints.get(controlPoints.getSize()-1));\n\n      var n = cp.getSize();\n      var spline = new draw2d.util.ArrayList();\n      spline.add(controlPoints.get(0));\n      spline.add( this.p(1, 0, cp) );\n\n      for (var i = 1; i < n - 2; i++) {\n        for (var j = 1; j <= parts; j++) {\n          spline.add( this.p(i, j / parts, cp));\n        }\n      }\n      spline.add(controlPoints.get(controlPoints.getSize()-1));\n\n      return spline;\n    },\n\n\n      p: function( i,  t,  cp)\n      {\n        var x = 0.0;\n        var y = 0.0;\n\n        var k = i-1;\n        for (var j = -2; j <= 1; j++) {\n          var b = this.blend (j, t);\n          var p = cp.get(k++);\n          x += b * p?.x || 0;\n          y += b * p?.y || 0;\n        }\n\n       return new draw2d.geo.Point(x, y);\n      },\n\n\n\n      blend: function(i, t)\n      {\n        if (i === -2)\n            return (((-t + 3) * t - 3) * t + 1) / 6;\n        else if (i === -1)\n            return (((3 * t - 6) * t) * t + 4) / 6;\n        else if (i === 0)\n            return (((-3 * t + 3) * t + 3) * t + 1) / 6;\n\n        return (t * t * t) / 6;\n      }\n\n});\n","\n/**\n * @class\n *\n *  An abstract class defining a general spline object.\n */\nimport draw2d from '../../packages'\n\ndraw2d.util.spline.Spline = Class.extend(\n    /** @lends draw2d.util.spline.Spline.prototype */\n    {\n    \n    NAME: \"draw2d.util.spline.Spline\",\n\n    /**\n     */\n    init: function()\n    {\n    },\n\n   /**\n    * Create a spline based on the given control points.\n    * The generated curve starts in the first control point and ends\n    * in the last control point.\n    *\n    * @param {Array} controlPoints  Control points of spline (x0,y0,z0,x1,y1,z1,...).\n    * @param {Number} parts Number of parts to divide each leg into.\n    **/\n    generate: function(controlPoints, parts){\n        throw \"inherit classes must implement the method 'draw2d.util.spline.Spline.generate()'\";\n    }\n\n});\n","'use strict';\r\n\r\n var RGBColor = require('rgbcolor');\r\n var stackblur = require('stackblur');\r\n var xmldom = require('xmldom');\r\n\r\n/*\r\n * canvg.js - Javascript SVG parser and renderer on Canvas\r\n * MIT Licensed\r\n * Gabe Lerner (gabelerner@gmail.com)\r\n * http://code.google.com/p/canvg/\r\n *\r\n * Requires: rgbcolor.js - http://www.phpied.com/rgb-color-parser-in-javascript/\r\n */\r\n\r\n/*\r\ncanvg(target, s)\r\n  empty parameters: replace all 'svg' elements on page with 'canvas' elements\r\n  target: canvas element or the id of a canvas element\r\n  s: svg string, url to svg file, or xml document\r\n  opts: optional hash of options\r\n    ignoreMouse: true => ignore mouse events\r\n    ignoreAnimation: true => ignore animations\r\n    ignoreDimensions: true => does not try to resize canvas\r\n    ignoreClear: true => does not clear canvas\r\n    offsetX: int => draws at a x offset\r\n    offsetY: int => draws at a y offset\r\n    scaleWidth: int => scales horizontally to width\r\n    scaleHeight: int => scales vertically to height\r\n    renderCallback: function => will call the function after the first render is completed\r\n    forceRedraw: function => will call the function on every frame, if it returns true, will redraw\r\n*/\r\nfunction canvg(target, s, opts) {\r\n\r\n\t// no parameters\r\n\tif (target == null && s == null && opts == null) {\r\n\t\tvar svgTags = document.querySelectorAll('svg');\r\n\t\tfor (var i=0; i<svgTags.length; i++) {\r\n\t\t\tvar svgTag = svgTags[i];\r\n\t\t\tvar c = document.createElement('canvas');\r\n\t\t\tc.width = svgTag.clientWidth;\r\n\t\t\tc.height = svgTag.clientHeight;\r\n\t\t\tsvgTag.parentNode.insertBefore(c, svgTag);\r\n\t\t\tsvgTag.parentNode.removeChild(svgTag);\r\n\t\t\tvar div = document.createElement('div');\r\n\t\t\tdiv.appendChild(svgTag);\r\n\t\t\tcanvg(c, div.innerHTML);\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (typeof target == 'string') {\r\n\t\ttarget = document.getElementById(target);\r\n\t}\r\n\r\n\t// store class on canvas\r\n\tif (target.svg != null) target.svg.stop();\r\n\tvar svg = build(opts || {});\r\n\t// on i.e. 8 for flash canvas, we can't assign the property so check for it\r\n\tif (!(target.childNodes.length == 1 && target.childNodes[0].nodeName == 'OBJECT')) target.svg = svg;\r\n\r\n\tvar ctx = target.getContext('2d');\r\n\tif (typeof s.documentElement != 'undefined') {\r\n\t\t// load from xml doc\r\n\t\tsvg.loadXmlDoc(ctx, s);\r\n\t}\r\n\telse if (s.substr(0,1) == '<') {\r\n\t\t// load from xml string\r\n\t\tsvg.loadXml(ctx, s);\r\n\t}\r\n\telse {\r\n\t\t// load from url\r\n\t\tsvg.load(ctx, s);\r\n\t}\r\n}\r\n\r\nfunction getMatchesSelector() {\r\n  // see https://developer.mozilla.org/en-US/docs/Web/API/Element.matches\r\n  var matchesSelector;\r\n  if (typeof Element.prototype.matches != 'undefined') {\r\n  \tmatchesSelector = function(node, selector) {\r\n  \t\treturn node.matches(selector);\r\n  \t};\r\n  } else if (typeof Element.prototype.webkitMatchesSelector != 'undefined') {\r\n  \tmatchesSelector = function(node, selector) {\r\n  \t\treturn node.webkitMatchesSelector(selector);\r\n  \t};\r\n  } else if (typeof Element.prototype.mozMatchesSelector != 'undefined') {\r\n  \tmatchesSelector = function(node, selector) {\r\n  \t\treturn node.mozMatchesSelector(selector);\r\n  \t};\r\n  } else if (typeof Element.prototype.msMatchesSelector != 'undefined') {\r\n  \tmatchesSelector = function(node, selector) {\r\n  \t\treturn node.msMatchesSelector(selector);\r\n  \t};\r\n  } else if (typeof Element.prototype.oMatchesSelector != 'undefined') {\r\n  \tmatchesSelector = function(node, selector) {\r\n  \t\treturn node.oMatchesSelector(selector);\r\n  \t};\r\n  } else {\r\n  \t// requires Sizzle: https://github.com/jquery/sizzle/wiki/Sizzle-Documentation\r\n  \t// or jQuery: http://jquery.com/download/\r\n  \t// or Zepto: http://zeptojs.com/#\r\n  \t// without it, this is a ReferenceError\r\n\r\n  \tif (typeof jQuery == 'function' || typeof Zepto == 'function') {\r\n  \t\tmatchesSelector = function (node, selector) {\r\n  \t\t\treturn $(node).is(selector);\r\n  \t\t};\r\n  \t}\r\n\r\n  \tif (typeof matchesSelector == 'undefined') {\r\n  \t\tmatchesSelector = Sizzle.matchesSelector;\r\n  \t}\r\n  }\r\n\r\n  return matchesSelector;\r\n}\r\n\r\nfunction getSelectorSpecificity(selector) {\r\n\tvar typeCount = [0, 0, 0];\r\n\r\n  // slightly modified version of https://github.com/keeganstreet/specificity/blob/master/specificity.js\r\n  var attributeRegex = /(\\[[^\\]]+\\])/g;\r\n  var idRegex = /(#[^\\s\\+>~\\.\\[:]+)/g;\r\n  var classRegex = /(\\.[^\\s\\+>~\\.\\[:]+)/g;\r\n  var pseudoElementRegex = /(::[^\\s\\+>~\\.\\[:]+|:first-line|:first-letter|:before|:after)/gi;\r\n  var pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^\\)]*\\))/gi;\r\n  var pseudoClassRegex = /(:[^\\s\\+>~\\.\\[:]+)/g;\r\n  var elementRegex = /([^\\s\\+>~\\.\\[:]+)/g;\r\n\r\n\tvar findMatch = function(regex, type) {\r\n\t\tvar matches = selector.match(regex);\r\n\t\tif (matches == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttypeCount[type] += matches.length;\r\n\t\tselector = selector.replace(regex, ' ');\r\n\t};\r\n\r\n\tselector = selector.replace(/:not\\(([^\\)]*)\\)/g, '     $1 ');\r\n\tselector = selector.replace(/{[^]*/gm, ' ');\r\n\tfindMatch(attributeRegex, 1);\r\n\tfindMatch(idRegex, 0);\r\n\tfindMatch(classRegex, 1);\r\n\tfindMatch(pseudoElementRegex, 2);\r\n\tfindMatch(pseudoClassWithBracketsRegex, 1);\r\n\tfindMatch(pseudoClassRegex, 1);\r\n\tselector = selector.replace(/[\\*\\s\\+>~]/g, ' ');\r\n\tselector = selector.replace(/[#\\.]/g, ' ');\r\n\tfindMatch(elementRegex, 2);\r\n\treturn typeCount.join('');\r\n}\r\n\r\nfunction build(opts) {\r\n\tvar svg = { opts: opts };\r\n\r\n  var matchesSelector = getMatchesSelector();\r\n\r\n  if (typeof CanvasRenderingContext2D  != 'undefined') {\r\n    CanvasRenderingContext2D.prototype.drawSvg = function(s, dx, dy, dw, dh, opts) {\r\n      var cOpts = {\r\n        ignoreMouse: true,\r\n        ignoreAnimation: true,\r\n        ignoreDimensions: true,\r\n        ignoreClear: true,\r\n        offsetX: dx,\r\n        offsetY: dy,\r\n        scaleWidth: dw,\r\n        scaleHeight: dh\r\n      };\r\n\r\n      for(var prop in opts) {\r\n        if(opts.hasOwnProperty(prop)){\r\n          cOpts[prop] = opts[prop];\r\n        }\r\n      }\r\n      canvg(this.canvas, s, cOpts);\r\n    };\r\n  }\r\n\r\n\tsvg.FRAMERATE = 30;\r\n\tsvg.MAX_VIRTUAL_PIXELS = 30000;\r\n\r\n\tsvg.log = function(msg) {};\r\n\tif (svg.opts.log == true && typeof console != 'undefined') {\r\n\t\tsvg.log = function(msg) { console.log(msg); };\r\n\t}\r\n\r\n\t// globals\r\n\tsvg.init = function(ctx) {\r\n\t\tvar uniqueId = 0;\r\n\t\tsvg.UniqueId = function () { uniqueId++; return 'canvg' + uniqueId;\t};\r\n\t\tsvg.Definitions = {};\r\n\t\tsvg.Styles = {};\r\n\t\tsvg.StylesSpecificity = {};\r\n\t\tsvg.Animations = [];\r\n\t\tsvg.Images = [];\r\n\t\tsvg.ctx = ctx;\r\n\t\tsvg.ViewPort = new (function () {\r\n\t\t\tthis.viewPorts = [];\r\n\t\t\tthis.Clear = function() { this.viewPorts = []; };\r\n\t\t\tthis.SetCurrent = function(width, height) { this.viewPorts.push({ width: width, height: height }); };\r\n\t\t\tthis.RemoveCurrent = function() { this.viewPorts.pop(); };\r\n\t\t\tthis.Current = function() { return this.viewPorts[this.viewPorts.length - 1]; };\r\n\t\t\tthis.width = function() { return this.Current().width; };\r\n\t\t\tthis.height = function() { return this.Current().height; };\r\n\t\t\tthis.ComputeSize = function(d) {\r\n\t\t\t\tif (d != null && typeof d == 'number') return d;\r\n\t\t\t\tif (d == 'x') return this.width();\r\n\t\t\t\tif (d == 'y') return this.height();\r\n\t\t\t\treturn Math.sqrt(Math.pow(this.width(), 2) + Math.pow(this.height(), 2)) / Math.sqrt(2);\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\tsvg.init();\r\n\r\n\t// images loaded\r\n\tsvg.ImagesLoaded = function() {\r\n\t\tfor (var i=0; i<svg.Images.length; i++) {\r\n\t\t\tif (!svg.Images[i].loaded) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// trim\r\n\tsvg.trim = function(s) { return s.replace(/^\\s+|\\s+$/g, ''); }\r\n\r\n\t// compress spaces\r\n\tsvg.compressSpaces = function(s) { return s.replace(/[\\s\\r\\t\\n]+/gm,' '); }\r\n\r\n\t// ajax\r\n\tsvg.ajax = function(url) {\r\n\t\tvar AJAX;\r\n\t\tif(window.XMLHttpRequest){AJAX=new XMLHttpRequest();}\r\n\t\telse{AJAX=new ActiveXObject('Microsoft.XMLHTTP');}\r\n\t\tif(AJAX){\r\n\t\t   AJAX.open('GET',url,false);\r\n\t\t   AJAX.send(null);\r\n\t\t   return AJAX.responseText;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// parse xml\r\n\tsvg.parseXml = function(xml) {\r\n\t\tif (typeof Windows != 'undefined' && typeof Windows.Data != 'undefined' && typeof Windows.Data.Xml != 'undefined') {\r\n\t\t\tvar xmlDoc = new Windows.Data.Xml.Dom.XmlDocument();\r\n\t\t\tvar settings = new Windows.Data.Xml.Dom.XmlLoadSettings();\r\n\t\t\tsettings.prohibitDtd = false;\r\n\t\t\txmlDoc.loadXml(xml, settings);\r\n\t\t\treturn xmlDoc;\r\n\t\t}\r\n\t\telse if (window.DOMParser)\r\n\t\t{\r\n\t\t\tvar parser = new DOMParser();\r\n\t\t\treturn parser.parseFromString(xml, 'text/xml');\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\txml = xml.replace(/<!DOCTYPE svg[^>]*>/, '');\r\n\t\t\tvar xmlDoc = new ActiveXObject('Microsoft.XMLDOM');\r\n\t\t\txmlDoc.async = 'false';\r\n\t\t\txmlDoc.loadXML(xml);\r\n\t\t\treturn xmlDoc;\r\n\t\t}\r\n\t}\r\n\r\n\tsvg.Property = function(name, value) {\r\n\t\tthis.name = name;\r\n\t\tthis.value = value;\r\n\t}\r\n\t\tsvg.Property.prototype.getValue = function() {\r\n\t\t\treturn this.value;\r\n\t\t}\r\n\r\n\t\tsvg.Property.prototype.hasValue = function() {\r\n\t\t\treturn (this.value != null && this.value != '');\r\n\t\t}\r\n\r\n\t\t// return the numerical value of the property\r\n\t\tsvg.Property.prototype.numValue = function() {\r\n\t\t\tif (!this.hasValue()) return 0;\r\n\r\n\t\t\tvar n = parseFloat(this.value);\r\n\t\t\tif ((this.value + '').match(/%$/)) {\r\n\t\t\t\tn = n / 100.0;\r\n\t\t\t}\r\n\t\t\treturn n;\r\n\t\t}\r\n\r\n\t\tsvg.Property.prototype.valueOrDefault = function(def) {\r\n\t\t\tif (this.hasValue()) return this.value;\r\n\t\t\treturn def;\r\n\t\t}\r\n\r\n\t\tsvg.Property.prototype.numValueOrDefault = function(def) {\r\n\t\t\tif (this.hasValue()) return this.numValue();\r\n\t\t\treturn def;\r\n\t\t}\r\n\r\n\t\t// color extensions\r\n\t\t\t// augment the current color value with the opacity\r\n\t\t\tsvg.Property.prototype.addOpacity = function(opacityProp) {\r\n\t\t\t\tvar newValue = this.value;\r\n\t\t\t\tif (opacityProp.value != null && opacityProp.value != '' && typeof this.value == 'string') { // can only add opacity to colors, not patterns\r\n\t\t\t\t\tvar color = new RGBColor(this.value);\r\n\t\t\t\t\tif (color.ok) {\r\n\t\t\t\t\t\tnewValue = 'rgba(' + color.r + ', ' + color.g + ', ' + color.b + ', ' + opacityProp.numValue() + ')';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn new svg.Property(this.name, newValue);\r\n\t\t\t}\r\n\r\n\t\t// definition extensions\r\n\t\t\t// get the definition from the definitions table\r\n\t\t\tsvg.Property.prototype.getDefinition = function() {\r\n\t\t\t\tvar name = this.value.match(/#([^\\)'\"]+)/);\r\n\t\t\t\tif (name) { name = name[1]; }\r\n\t\t\t\tif (!name) { name = this.value; }\r\n\t\t\t\treturn svg.Definitions[name];\r\n\t\t\t}\r\n\r\n\t\t\tsvg.Property.prototype.isUrlDefinition = function() {\r\n\t\t\t\treturn this.value.indexOf('url(') == 0\r\n\t\t\t}\r\n\r\n\t\t\tsvg.Property.prototype.getFillStyleDefinition = function(e, opacityProp) {\r\n\t\t\t\tvar def = this.getDefinition();\r\n\r\n\t\t\t\t// gradient\r\n\t\t\t\tif (def != null && def.createGradient) {\r\n\t\t\t\t\treturn def.createGradient(svg.ctx, e, opacityProp);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// pattern\r\n\t\t\t\tif (def != null && def.createPattern) {\r\n\t\t\t\t\tif (def.getHrefAttribute().hasValue()) {\r\n\t\t\t\t\t\tvar pt = def.attribute('patternTransform');\r\n\t\t\t\t\t\tdef = def.getHrefAttribute().getDefinition();\r\n\t\t\t\t\t\tif (pt.hasValue()) { def.attribute('patternTransform', true).value = pt.value; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn def.createPattern(svg.ctx, e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t// length extensions\r\n\t\t\tsvg.Property.prototype.getDPI = function(viewPort) {\r\n\t\t\t\treturn 96.0; // TODO: compute?\r\n\t\t\t}\r\n\r\n\t\t\tsvg.Property.prototype.getEM = function(viewPort) {\r\n\t\t\t\tvar em = 12;\r\n\r\n\t\t\t\tvar fontSize = new svg.Property('fontSize', svg.Font.Parse(svg.ctx.font).fontSize);\r\n\t\t\t\tif (fontSize.hasValue()) em = fontSize.toPixels(viewPort);\r\n\r\n\t\t\t\treturn em;\r\n\t\t\t}\r\n\r\n\t\t\tsvg.Property.prototype.getUnits = function() {\r\n\t\t\t\tvar s = this.value+'';\r\n\t\t\t\treturn s.replace(/[0-9\\.\\-]/g,'');\r\n\t\t\t}\r\n\r\n\t\t\t// get the length as pixels\r\n\t\t\tsvg.Property.prototype.toPixels = function(viewPort, processPercent) {\r\n\t\t\t\tif (!this.hasValue()) return 0;\r\n\t\t\t\tvar s = this.value+'';\r\n\t\t\t\tif (s.match(/em$/)) return this.numValue() * this.getEM(viewPort);\r\n\t\t\t\tif (s.match(/ex$/)) return this.numValue() * this.getEM(viewPort) / 2.0;\r\n\t\t\t\tif (s.match(/px$/)) return this.numValue();\r\n\t\t\t\tif (s.match(/pt$/)) return this.numValue() * this.getDPI(viewPort) * (1.0 / 72.0);\r\n\t\t\t\tif (s.match(/pc$/)) return this.numValue() * 15;\r\n\t\t\t\tif (s.match(/cm$/)) return this.numValue() * this.getDPI(viewPort) / 2.54;\r\n\t\t\t\tif (s.match(/mm$/)) return this.numValue() * this.getDPI(viewPort) / 25.4;\r\n\t\t\t\tif (s.match(/in$/)) return this.numValue() * this.getDPI(viewPort);\r\n\t\t\t\tif (s.match(/%$/)) return this.numValue() * svg.ViewPort.ComputeSize(viewPort);\r\n\t\t\t\tvar n = this.numValue();\r\n\t\t\t\tif (processPercent && n < 1.0) return n * svg.ViewPort.ComputeSize(viewPort);\r\n\t\t\t\treturn n;\r\n\t\t\t}\r\n\r\n\t\t// time extensions\r\n\t\t\t// get the time as milliseconds\r\n\t\t\tsvg.Property.prototype.toMilliseconds = function() {\r\n\t\t\t\tif (!this.hasValue()) return 0;\r\n\t\t\t\tvar s = this.value+'';\r\n\t\t\t\tif (s.match(/s$/)) return this.numValue() * 1000;\r\n\t\t\t\tif (s.match(/ms$/)) return this.numValue();\r\n\t\t\t\treturn this.numValue();\r\n\t\t\t}\r\n\r\n\t\t// angle extensions\r\n\t\t\t// get the angle as radians\r\n\t\t\tsvg.Property.prototype.toRadians = function() {\r\n\t\t\t\tif (!this.hasValue()) return 0;\r\n\t\t\t\tvar s = this.value+'';\r\n\t\t\t\tif (s.match(/deg$/)) return this.numValue() * (Math.PI / 180.0);\r\n\t\t\t\tif (s.match(/grad$/)) return this.numValue() * (Math.PI / 200.0);\r\n\t\t\t\tif (s.match(/rad$/)) return this.numValue();\r\n\t\t\t\treturn this.numValue() * (Math.PI / 180.0);\r\n\t\t\t}\r\n\r\n\t\t// text extensions\r\n\t\t\t// get the text baseline\r\n\t\t\tvar textBaselineMapping = {\r\n\t\t\t\t'baseline': 'alphabetic',\r\n\t\t\t\t'before-edge': 'top',\r\n\t\t\t\t'text-before-edge': 'top',\r\n\t\t\t\t'middle': 'middle',\r\n\t\t\t\t'central': 'middle',\r\n\t\t\t\t'after-edge': 'bottom',\r\n\t\t\t\t'text-after-edge': 'bottom',\r\n\t\t\t\t'ideographic': 'ideographic',\r\n\t\t\t\t'alphabetic': 'alphabetic',\r\n\t\t\t\t'hanging': 'hanging',\r\n\t\t\t\t'mathematical': 'alphabetic'\r\n\t\t\t};\r\n\t\t\tsvg.Property.prototype.toTextBaseline = function () {\r\n\t\t\t\tif (!this.hasValue()) return null;\r\n\t\t\t\treturn textBaselineMapping[this.value];\r\n\t\t\t}\r\n\r\n\t// fonts\r\n\tsvg.Font = new (function() {\r\n\t\tthis.Styles = 'normal|italic|oblique|inherit';\r\n\t\tthis.Variants = 'normal|small-caps|inherit';\r\n\t\tthis.Weights = 'normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit';\r\n\r\n\t\tthis.CreateFont = function(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit) {\r\n\t\t\tvar f = inherit != null ? this.Parse(inherit) : this.CreateFont('', '', '', '', '', svg.ctx.font);\r\n\t\t\treturn {\r\n\t\t\t\tfontFamily: fontFamily || f.fontFamily,\r\n\t\t\t\tfontSize: fontSize || f.fontSize,\r\n\t\t\t\tfontStyle: fontStyle || f.fontStyle,\r\n\t\t\t\tfontWeight: fontWeight || f.fontWeight,\r\n\t\t\t\tfontVariant: fontVariant || f.fontVariant,\r\n\t\t\t\ttoString: function () { return [this.fontStyle, this.fontVariant, this.fontWeight, this.fontSize, this.fontFamily].join(' ') }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar that = this;\r\n\t\tthis.Parse = function(s) {\r\n\t\t\tvar f = {};\r\n\t\t\tvar d = svg.trim(svg.compressSpaces(s || '')).split(' ');\r\n\t\t\tvar set = { fontSize: false, fontStyle: false, fontWeight: false, fontVariant: false }\r\n\t\t\tvar ff = '';\r\n\t\t\tfor (var i=0; i<d.length; i++) {\r\n\t\t\t\tif (!set.fontStyle && that.Styles.indexOf(d[i]) != -1) { if (d[i] != 'inherit') f.fontStyle = d[i]; set.fontStyle = true; }\r\n\t\t\t\telse if (!set.fontVariant && that.Variants.indexOf(d[i]) != -1) { if (d[i] != 'inherit') f.fontVariant = d[i]; set.fontStyle = set.fontVariant = true;\t}\r\n\t\t\t\telse if (!set.fontWeight && that.Weights.indexOf(d[i]) != -1) {\tif (d[i] != 'inherit') f.fontWeight = d[i]; set.fontStyle = set.fontVariant = set.fontWeight = true; }\r\n\t\t\t\telse if (!set.fontSize) { if (d[i] != 'inherit') f.fontSize = d[i].split('/')[0]; set.fontStyle = set.fontVariant = set.fontWeight = set.fontSize = true; }\r\n\t\t\t\telse { if (d[i] != 'inherit') ff += d[i]; }\r\n\t\t\t} if (ff != '') f.fontFamily = ff;\r\n\t\t\treturn f;\r\n\t\t}\r\n\t});\r\n\r\n\t// points and paths\r\n\tsvg.ToNumberArray = function(s) {\r\n\t\tvar a = svg.trim(svg.compressSpaces((s || '').replace(/,/g, ' '))).split(' ');\r\n\t\tfor (var i=0; i<a.length; i++) {\r\n\t\t\ta[i] = parseFloat(a[i]);\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\tsvg.Point = function(x, y) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\t\tsvg.Point.prototype.angleTo = function(p) {\r\n\t\t\treturn Math.atan2(p.y - this.y, p.x - this.x);\r\n\t\t}\r\n\r\n\t\tsvg.Point.prototype.applyTransform = function(v) {\r\n\t\t\tvar xp = this.x * v[0] + this.y * v[2] + v[4];\r\n\t\t\tvar yp = this.x * v[1] + this.y * v[3] + v[5];\r\n\t\t\tthis.x = xp;\r\n\t\t\tthis.y = yp;\r\n\t\t}\r\n\r\n\tsvg.CreatePoint = function(s) {\r\n\t\tvar a = svg.ToNumberArray(s);\r\n\t\treturn new svg.Point(a[0], a[1]);\r\n\t}\r\n\tsvg.CreatePath = function(s) {\r\n\t\tvar a = svg.ToNumberArray(s);\r\n\t\tvar path = [];\r\n\t\tfor (var i=0; i<a.length; i+=2) {\r\n\t\t\tpath.push(new svg.Point(a[i], a[i+1]));\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\r\n\t// bounding box\r\n\tsvg.BoundingBox = function(x1, y1, x2, y2) { // pass in initial points if you want\r\n\t\tthis.x1 = Number.NaN;\r\n\t\tthis.y1 = Number.NaN;\r\n\t\tthis.x2 = Number.NaN;\r\n\t\tthis.y2 = Number.NaN;\r\n\r\n\t\tthis.x = function() { return this.x1; }\r\n\t\tthis.y = function() { return this.y1; }\r\n\t\tthis.width = function() { return this.x2 - this.x1; }\r\n\t\tthis.height = function() { return this.y2 - this.y1; }\r\n\r\n\t\tthis.addPoint = function(x, y) {\r\n\t\t\tif (x != null) {\r\n\t\t\t\tif (isNaN(this.x1) || isNaN(this.x2)) {\r\n\t\t\t\t\tthis.x1 = x;\r\n\t\t\t\t\tthis.x2 = x;\r\n\t\t\t\t}\r\n\t\t\t\tif (x < this.x1) this.x1 = x;\r\n\t\t\t\tif (x > this.x2) this.x2 = x;\r\n\t\t\t}\r\n\r\n\t\t\tif (y != null) {\r\n\t\t\t\tif (isNaN(this.y1) || isNaN(this.y2)) {\r\n\t\t\t\t\tthis.y1 = y;\r\n\t\t\t\t\tthis.y2 = y;\r\n\t\t\t\t}\r\n\t\t\t\tif (y < this.y1) this.y1 = y;\r\n\t\t\t\tif (y > this.y2) this.y2 = y;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.addX = function(x) { this.addPoint(x, null); }\r\n\t\tthis.addY = function(y) { this.addPoint(null, y); }\r\n\r\n\t\tthis.addBoundingBox = function(bb) {\r\n\t\t\tthis.addPoint(bb.x1, bb.y1);\r\n\t\t\tthis.addPoint(bb.x2, bb.y2);\r\n\t\t}\r\n\r\n\t\tthis.addQuadraticCurve = function(p0x, p0y, p1x, p1y, p2x, p2y) {\r\n\t\t\tvar cp1x = p0x + 2/3 * (p1x - p0x); // CP1 = QP0 + 2/3 *(QP1-QP0)\r\n\t\t\tvar cp1y = p0y + 2/3 * (p1y - p0y); // CP1 = QP0 + 2/3 *(QP1-QP0)\r\n\t\t\tvar cp2x = cp1x + 1/3 * (p2x - p0x); // CP2 = CP1 + 1/3 *(QP2-QP0)\r\n\t\t\tvar cp2y = cp1y + 1/3 * (p2y - p0y); // CP2 = CP1 + 1/3 *(QP2-QP0)\r\n\t\t\tthis.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y,\tcp2y, p2x, p2y);\r\n\t\t}\r\n\r\n\t\tthis.addBezierCurve = function(p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y) {\r\n\t\t\t// from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\r\n\t\t\tvar p0 = [p0x, p0y], p1 = [p1x, p1y], p2 = [p2x, p2y], p3 = [p3x, p3y];\r\n\t\t\tthis.addPoint(p0[0], p0[1]);\r\n\t\t\tthis.addPoint(p3[0], p3[1]);\r\n\r\n\t\t\tfor (var i=0; i<=1; i++) {\r\n\t\t\t\tvar f = function(t) {\r\n\t\t\t\t\treturn Math.pow(1-t, 3) * p0[i]\r\n\t\t\t\t\t+ 3 * Math.pow(1-t, 2) * t * p1[i]\r\n\t\t\t\t\t+ 3 * (1-t) * Math.pow(t, 2) * p2[i]\r\n\t\t\t\t\t+ Math.pow(t, 3) * p3[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\r\n\t\t\t\tvar a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\r\n\t\t\t\tvar c = 3 * p1[i] - 3 * p0[i];\r\n\r\n\t\t\t\tif (a == 0) {\r\n\t\t\t\t\tif (b == 0) continue;\r\n\t\t\t\t\tvar t = -c / b;\r\n\t\t\t\t\tif (0 < t && t < 1) {\r\n\t\t\t\t\t\tif (i == 0) this.addX(f(t));\r\n\t\t\t\t\t\tif (i == 1) this.addY(f(t));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar b2ac = Math.pow(b, 2) - 4 * c * a;\r\n\t\t\t\tif (b2ac < 0) continue;\r\n\t\t\t\tvar t1 = (-b + Math.sqrt(b2ac)) / (2 * a);\r\n\t\t\t\tif (0 < t1 && t1 < 1) {\r\n\t\t\t\t\tif (i == 0) this.addX(f(t1));\r\n\t\t\t\t\tif (i == 1) this.addY(f(t1));\r\n\t\t\t\t}\r\n\t\t\t\tvar t2 = (-b - Math.sqrt(b2ac)) / (2 * a);\r\n\t\t\t\tif (0 < t2 && t2 < 1) {\r\n\t\t\t\t\tif (i == 0) this.addX(f(t2));\r\n\t\t\t\t\tif (i == 1) this.addY(f(t2));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.isPointInBox = function(x, y) {\r\n\t\t\treturn (this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n\t\t}\r\n\r\n\t\tthis.addPoint(x1, y1);\r\n\t\tthis.addPoint(x2, y2);\r\n\t}\r\n\r\n\t// transforms\r\n\tsvg.Transform = function(v) {\r\n\t\tvar that = this;\r\n\t\tthis.Type = {}\r\n\r\n\t\t// translate\r\n\t\tthis.Type.translate = function(s) {\r\n\t\t\tthis.p = svg.CreatePoint(s);\r\n\t\t\tthis.apply = function(ctx) {\r\n\t\t\t\tctx.translate(this.p.x || 0.0, this.p.y || 0.0);\r\n\t\t\t}\r\n\t\t\tthis.unapply = function(ctx) {\r\n\t\t\t\tctx.translate(-1.0 * this.p.x || 0.0, -1.0 * this.p.y || 0.0);\r\n\t\t\t}\r\n\t\t\tthis.applyToPoint = function(p) {\r\n\t\t\t\tp.applyTransform([1, 0, 0, 1, this.p.x || 0.0, this.p.y || 0.0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// rotate\r\n\t\tthis.Type.rotate = function(s) {\r\n\t\t\tvar a = svg.ToNumberArray(s);\r\n\t\t\tthis.angle = new svg.Property('angle', a[0]);\r\n\t\t\tthis.cx = a[1] || 0;\r\n\t\t\tthis.cy = a[2] || 0;\r\n\t\t\tthis.apply = function(ctx) {\r\n\t\t\t\tctx.translate(this.cx, this.cy);\r\n\t\t\t\tctx.rotate(this.angle.toRadians());\r\n\t\t\t\tctx.translate(-this.cx, -this.cy);\r\n\t\t\t}\r\n\t\t\tthis.unapply = function(ctx) {\r\n\t\t\t\tctx.translate(this.cx, this.cy);\r\n\t\t\t\tctx.rotate(-1.0 * this.angle.toRadians());\r\n\t\t\t\tctx.translate(-this.cx, -this.cy);\r\n\t\t\t}\r\n\t\t\tthis.applyToPoint = function(p) {\r\n\t\t\t\tvar a = this.angle.toRadians();\r\n\t\t\t\tp.applyTransform([1, 0, 0, 1, this.p.x || 0.0, this.p.y || 0.0]);\r\n\t\t\t\tp.applyTransform([Math.cos(a), Math.sin(a), -Math.sin(a), Math.cos(a), 0, 0]);\r\n\t\t\t\tp.applyTransform([1, 0, 0, 1, -this.p.x || 0.0, -this.p.y || 0.0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.Type.scale = function(s) {\r\n\t\t\tthis.p = svg.CreatePoint(s);\r\n\t\t\tthis.apply = function(ctx) {\r\n\t\t\t\tctx.scale(this.p.x || 1.0, this.p.y || this.p.x || 1.0);\r\n\t\t\t}\r\n\t\t\tthis.unapply = function(ctx) {\r\n\t\t\t\tctx.scale(1.0 / this.p.x || 1.0, 1.0 / this.p.y || this.p.x || 1.0);\r\n\t\t\t}\r\n\t\t\tthis.applyToPoint = function(p) {\r\n\t\t\t\tp.applyTransform([this.p.x || 0.0, 0, 0, this.p.y || 0.0, 0, 0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.Type.matrix = function(s) {\r\n\t\t\tthis.m = svg.ToNumberArray(s);\r\n\t\t\tthis.apply = function(ctx) {\r\n\t\t\t\tctx.transform(this.m[0], this.m[1], this.m[2], this.m[3], this.m[4], this.m[5]);\r\n\t\t\t}\r\n\t\t\tthis.unapply = function(ctx) {\r\n\t\t\t\tvar a = this.m[0];\r\n\t\t\t\tvar b = this.m[2];\r\n\t\t\t\tvar c = this.m[4];\r\n\t\t\t\tvar d = this.m[1];\r\n\t\t\t\tvar e = this.m[3];\r\n\t\t\t\tvar f = this.m[5];\r\n\t\t\t\tvar g = 0.0;\r\n\t\t\t\tvar h = 0.0;\r\n\t\t\t\tvar i = 1.0;\r\n\t\t\t\tvar det = 1 / (a*(e*i-f*h)-b*(d*i-f*g)+c*(d*h-e*g));\r\n\t\t\t\tctx.transform(\r\n\t\t\t\t\tdet*(e*i-f*h),\r\n\t\t\t\t\tdet*(f*g-d*i),\r\n\t\t\t\t\tdet*(c*h-b*i),\r\n\t\t\t\t\tdet*(a*i-c*g),\r\n\t\t\t\t\tdet*(b*f-c*e),\r\n\t\t\t\t\tdet*(c*d-a*f)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tthis.applyToPoint = function(p) {\r\n\t\t\t\tp.applyTransform(this.m);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.Type.SkewBase = function(s) {\r\n\t\t\tthis.base = that.Type.matrix;\r\n\t\t\tthis.base(s);\r\n\t\t\tthis.angle = new svg.Property('angle', s);\r\n\t\t}\r\n\t\tthis.Type.SkewBase.prototype = new this.Type.matrix;\r\n\r\n\t\tthis.Type.skewX = function(s) {\r\n\t\t\tthis.base = that.Type.SkewBase;\r\n\t\t\tthis.base(s);\r\n\t\t\tthis.m = [1, 0, Math.tan(this.angle.toRadians()), 1, 0, 0];\r\n\t\t}\r\n\t\tthis.Type.skewX.prototype = new this.Type.SkewBase;\r\n\r\n\t\tthis.Type.skewY = function(s) {\r\n\t\t\tthis.base = that.Type.SkewBase;\r\n\t\t\tthis.base(s);\r\n\t\t\tthis.m = [1, Math.tan(this.angle.toRadians()), 0, 1, 0, 0];\r\n\t\t}\r\n\t\tthis.Type.skewY.prototype = new this.Type.SkewBase;\r\n\r\n\t\tthis.transforms = [];\r\n\r\n\t\tthis.apply = function(ctx) {\r\n\t\t\tfor (var i=0; i<this.transforms.length; i++) {\r\n\t\t\t\tthis.transforms[i].apply(ctx);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.unapply = function(ctx) {\r\n\t\t\tfor (var i=this.transforms.length-1; i>=0; i--) {\r\n\t\t\t\tthis.transforms[i].unapply(ctx);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.applyToPoint = function(p) {\r\n\t\t\tfor (var i=0; i<this.transforms.length; i++) {\r\n\t\t\t\tthis.transforms[i].applyToPoint(p);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar data = svg.trim(svg.compressSpaces(v)).replace(/\\)([a-zA-Z])/g, ') $1').replace(/\\)(\\s?,\\s?)/g,') ').split(/\\s(?=[a-z])/);\r\n\t\tfor (var i=0; i<data.length; i++) {\r\n\t\t\tvar type = svg.trim(data[i].split('(')[0]);\r\n\t\t\tvar s = data[i].split('(')[1].replace(')','');\r\n\t\t\tvar transformType = this.Type[type];\r\n\t\t\tif (typeof transformType != 'undefined') {\r\n\t\t\t\tvar transform = new transformType(s);\r\n\t\t\t\ttransform.type = type;\r\n\t\t\t\tthis.transforms.push(transform);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// aspect ratio\r\n\tsvg.AspectRatio = function(ctx, aspectRatio, width, desiredWidth, height, desiredHeight, minX, minY, refX, refY) {\r\n\t\t// aspect ratio - http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\r\n\t\taspectRatio = svg.compressSpaces(aspectRatio);\r\n\t\taspectRatio = aspectRatio.replace(/^defer\\s/,''); // ignore defer\r\n\t\tvar align = aspectRatio.split(' ')[0] || 'xMidYMid';\r\n\t\tvar meetOrSlice = aspectRatio.split(' ')[1] || 'meet';\r\n\r\n\t\t// calculate scale\r\n\t\tvar scaleX = width / desiredWidth;\r\n\t\tvar scaleY = height / desiredHeight;\r\n\t\tvar scaleMin = Math.min(scaleX, scaleY);\r\n\t\tvar scaleMax = Math.max(scaleX, scaleY);\r\n\t\tif (meetOrSlice == 'meet') { desiredWidth *= scaleMin; desiredHeight *= scaleMin; }\r\n\t\tif (meetOrSlice == 'slice') { desiredWidth *= scaleMax; desiredHeight *= scaleMax; }\r\n\r\n\t\trefX = new svg.Property('refX', refX);\r\n\t\trefY = new svg.Property('refY', refY);\r\n\t\tif (refX.hasValue() && refY.hasValue()) {\r\n\t\t\tctx.translate(-scaleMin * refX.toPixels('x'), -scaleMin * refY.toPixels('y'));\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// align\r\n\t\t\tif (align.match(/^xMid/) && ((meetOrSlice == 'meet' && scaleMin == scaleY) || (meetOrSlice == 'slice' && scaleMax == scaleY))) ctx.translate(width / 2.0 - desiredWidth / 2.0, 0);\r\n\t\t\tif (align.match(/YMid$/) && ((meetOrSlice == 'meet' && scaleMin == scaleX) || (meetOrSlice == 'slice' && scaleMax == scaleX))) ctx.translate(0, height / 2.0 - desiredHeight / 2.0);\r\n\t\t\tif (align.match(/^xMax/) && ((meetOrSlice == 'meet' && scaleMin == scaleY) || (meetOrSlice == 'slice' && scaleMax == scaleY))) ctx.translate(width - desiredWidth, 0);\r\n\t\t\tif (align.match(/YMax$/) && ((meetOrSlice == 'meet' && scaleMin == scaleX) || (meetOrSlice == 'slice' && scaleMax == scaleX))) ctx.translate(0, height - desiredHeight);\r\n\t\t}\r\n\r\n\t\t// scale\r\n\t\tif (align == 'none') ctx.scale(scaleX, scaleY);\r\n\t\telse if (meetOrSlice == 'meet') ctx.scale(scaleMin, scaleMin);\r\n\t\telse if (meetOrSlice == 'slice') ctx.scale(scaleMax, scaleMax);\r\n\r\n\t\t// translate\r\n\t\tctx.translate(minX == null ? 0 : -minX, minY == null ? 0 : -minY);\r\n\t}\r\n\r\n\t// elements\r\n\tsvg.Element = {}\r\n\r\n\tsvg.EmptyProperty = new svg.Property('EMPTY', '');\r\n\r\n\tsvg.Element.ElementBase = function(node) {\r\n\t\tthis.attributes = {};\r\n\t\tthis.styles = {};\r\n\t\tthis.stylesSpecificity = {};\r\n\t\tthis.children = [];\r\n\r\n\t\t// get or create attribute\r\n\t\tthis.attribute = function(name, createIfNotExists) {\r\n\t\t\tvar a = this.attributes[name];\r\n\t\t\tif (a != null) return a;\r\n\r\n\t\t\tif (createIfNotExists == true) { a = new svg.Property(name, ''); this.attributes[name] = a; }\r\n\t\t\treturn a || svg.EmptyProperty;\r\n\t\t}\r\n\r\n\t\tthis.getHrefAttribute = function() {\r\n\t\t\tfor (var a in this.attributes) {\r\n\t\t\t\tif (a == 'href' || a.match(/:href$/)) {\r\n\t\t\t\t\treturn this.attributes[a];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn svg.EmptyProperty;\r\n\t\t}\r\n\r\n\t\t// get or create style, crawls up node tree\r\n\t\tthis.style = function(name, createIfNotExists, skipAncestors) {\r\n\t\t\tvar s = this.styles[name];\r\n\t\t\tif (s != null) return s;\r\n\r\n\t\t\tvar a = this.attribute(name);\r\n\t\t\tif (a != null && a.hasValue()) {\r\n\t\t\t\tthis.styles[name] = a; // move up to me to cache\r\n\t\t\t\treturn a;\r\n\t\t\t}\r\n\r\n\t\t\tif (skipAncestors != true) {\r\n\t\t\t\tvar p = this.parent;\r\n\t\t\t\tif (p != null) {\r\n\t\t\t\t\tvar ps = p.style(name);\r\n\t\t\t\t\tif (ps != null && ps.hasValue()) {\r\n\t\t\t\t\t\treturn ps;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (createIfNotExists == true) { s = new svg.Property(name, ''); this.styles[name] = s; }\r\n\t\t\treturn s || svg.EmptyProperty;\r\n\t\t}\r\n\r\n\t\t// base render\r\n\t\tthis.render = function(ctx) {\r\n\t\t\t// don't render display=none\r\n\t\t\tif (this.style('display').value == 'none') return;\r\n\r\n\t\t\t// don't render visibility=hidden\r\n\t\t\tif (this.style('visibility').value == 'hidden') return;\r\n\r\n\t\t\tctx.save();\r\n\t\t\tif (this.style('mask').hasValue()) { // mask\r\n\t\t\t\tvar mask = this.style('mask').getDefinition();\r\n\t\t\t\tif (mask != null) mask.apply(ctx, this);\r\n\t\t\t}\r\n\t\t\telse if (this.style('filter').hasValue()) { // filter\r\n\t\t\t\tvar filter = this.style('filter').getDefinition();\r\n\t\t\t\tif (filter != null) filter.apply(ctx, this);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.setContext(ctx);\r\n\t\t\t\tthis.renderChildren(ctx);\r\n\t\t\t\tthis.clearContext(ctx);\r\n\t\t\t}\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\r\n\t\t// base set context\r\n\t\tthis.setContext = function(ctx) {\r\n\t\t\t// OVERRIDE ME!\r\n\t\t}\r\n\r\n\t\t// base clear context\r\n\t\tthis.clearContext = function(ctx) {\r\n\t\t\t// OVERRIDE ME!\r\n\t\t}\r\n\r\n\t\t// base render children\r\n\t\tthis.renderChildren = function(ctx) {\r\n\t\t\tfor (var i=0; i<this.children.length; i++) {\r\n\t\t\t\tthis.children[i].render(ctx);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.addChild = function(childNode, create) {\r\n\t\t\tvar child = childNode;\r\n\t\t\tif (create) child = svg.CreateElement(childNode);\r\n\t\t\tchild.parent = this;\r\n\t\t\tif (child.type != 'title') { this.children.push(child);\t}\r\n\t\t}\r\n\r\n\t\tthis.addStylesFromStyleDefinition = function () {\r\n\t\t\t// add styles\r\n\t\t\tfor (var selector in svg.Styles) {\r\n\t\t\t\tif (selector[0] != '@' && matchesSelector(node, selector)) {\r\n\t\t\t\t\tvar styles = svg.Styles[selector];\r\n\t\t\t\t\tvar specificity = svg.StylesSpecificity[selector];\r\n\t\t\t\t\tif (styles != null) {\r\n\t\t\t\t\t\tfor (var name in styles) {\r\n\t\t\t\t\t\t\tvar existingSpecificity = this.stylesSpecificity[name];\r\n\t\t\t\t\t\t\tif (typeof existingSpecificity == 'undefined') {\r\n\t\t\t\t\t\t\t\texistingSpecificity = '000';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (specificity > existingSpecificity) {\r\n\t\t\t\t\t\t\t\tthis.styles[name] = styles[name];\r\n\t\t\t\t\t\t\t\tthis.stylesSpecificity[name] = specificity;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (node != null && node.nodeType == 1) { //ELEMENT_NODE\r\n\t\t\t// add attributes\r\n\t\t\tfor (var i=0; i<node.attributes.length; i++) {\r\n\t\t\t\tvar attribute = node.attributes[i];\r\n\t\t\t\tthis.attributes[attribute.nodeName] = new svg.Property(attribute.nodeName, attribute.value);\r\n\t\t\t}\r\n\r\n\t\t\tthis.addStylesFromStyleDefinition();\r\n\r\n\t\t\t// add inline styles\r\n\t\t\tif (this.attribute('style').hasValue()) {\r\n\t\t\t\tvar styles = this.attribute('style').value.split(';');\r\n\t\t\t\tfor (var i=0; i<styles.length; i++) {\r\n\t\t\t\t\tif (svg.trim(styles[i]) != '') {\r\n\t\t\t\t\t\tvar style = styles[i].split(':');\r\n\t\t\t\t\t\tvar name = svg.trim(style[0]);\r\n\t\t\t\t\t\tvar value = svg.trim(style[1]);\r\n\t\t\t\t\t\tthis.styles[name] = new svg.Property(name, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// add id\r\n\t\t\tif (this.attribute('id').hasValue()) {\r\n\t\t\t\tif (svg.Definitions[this.attribute('id').value] == null) {\r\n\t\t\t\t\tsvg.Definitions[this.attribute('id').value] = this;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// add children\r\n\t\t\tfor (var i=0; i<node.childNodes.length; i++) {\r\n\t\t\t\tvar childNode = node.childNodes[i];\r\n\t\t\t\tif (childNode.nodeType == 1) this.addChild(childNode, true); //ELEMENT_NODE\r\n\t\t\t\tif (this.captureTextNodes && (childNode.nodeType == 3 || childNode.nodeType == 4)) {\r\n\t\t\t\t\tvar text = childNode.value || childNode.text || childNode.textContent || '';\r\n\t\t\t\t\tif (svg.compressSpaces(text) != '') {\r\n\t\t\t\t\t\tthis.addChild(new svg.Element.tspan(childNode), false); // TEXT_NODE\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsvg.Element.RenderedElementBase = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.setContext = function(ctx) {\r\n\t\t\t// fill\r\n\t\t\tif (this.style('fill').isUrlDefinition()) {\r\n\t\t\t\tvar fs = this.style('fill').getFillStyleDefinition(this, this.style('fill-opacity'));\r\n\t\t\t\tif (fs != null) ctx.fillStyle = fs;\r\n\t\t\t}\r\n\t\t\telse if (this.style('fill').hasValue()) {\r\n\t\t\t\tvar fillStyle = this.style('fill');\r\n\t\t\t\tif (fillStyle.value == 'currentColor') fillStyle.value = this.style('color').value;\r\n\t\t\t\tif (fillStyle.value != 'inherit') ctx.fillStyle = (fillStyle.value == 'none' ? 'rgba(0,0,0,0)' : fillStyle.value);\r\n\t\t\t}\r\n\t\t\tif (this.style('fill-opacity').hasValue()) {\r\n\t\t\t\tvar fillStyle = new svg.Property('fill', ctx.fillStyle);\r\n\t\t\t\tfillStyle = fillStyle.addOpacity(this.style('fill-opacity'));\r\n\t\t\t\tctx.fillStyle = fillStyle.value;\r\n\t\t\t}\r\n\r\n\t\t\t// stroke\r\n\t\t\tif (this.style('stroke').isUrlDefinition()) {\r\n\t\t\t\tvar fs = this.style('stroke').getFillStyleDefinition(this, this.style('stroke-opacity'));\r\n\t\t\t\tif (fs != null) ctx.strokeStyle = fs;\r\n\t\t\t}\r\n\t\t\telse if (this.style('stroke').hasValue()) {\r\n\t\t\t\tvar strokeStyle = this.style('stroke');\r\n\t\t\t\tif (strokeStyle.value == 'currentColor') strokeStyle.value = this.style('color').value;\r\n\t\t\t\tif (strokeStyle.value != 'inherit') ctx.strokeStyle = (strokeStyle.value == 'none' ? 'rgba(0,0,0,0)' : strokeStyle.value);\r\n\t\t\t}\r\n\t\t\tif (this.style('stroke-opacity').hasValue()) {\r\n\t\t\t\tvar strokeStyle = new svg.Property('stroke', ctx.strokeStyle);\r\n\t\t\t\tstrokeStyle = strokeStyle.addOpacity(this.style('stroke-opacity'));\r\n\t\t\t\tctx.strokeStyle = strokeStyle.value;\r\n\t\t\t}\r\n\t\t\tif (this.style('stroke-width').hasValue()) {\r\n\t\t\t\tvar newLineWidth = this.style('stroke-width').toPixels();\r\n\t\t\t\tctx.lineWidth = newLineWidth == 0 ? 0.001 : newLineWidth; // browsers don't respect 0\r\n\t\t    }\r\n\t\t\tif (this.style('stroke-linecap').hasValue()) ctx.lineCap = this.style('stroke-linecap').value;\r\n\t\t\tif (this.style('stroke-linejoin').hasValue()) ctx.lineJoin = this.style('stroke-linejoin').value;\r\n\t\t\tif (this.style('stroke-miterlimit').hasValue()) ctx.miterLimit = this.style('stroke-miterlimit').value;\r\n\t\t\tif (this.style('stroke-dasharray').hasValue() && this.style('stroke-dasharray').value != 'none') {\r\n\t\t\t\tvar gaps = svg.ToNumberArray(this.style('stroke-dasharray').value);\r\n\t\t\t\tif (typeof ctx.setLineDash != 'undefined') { ctx.setLineDash(gaps); }\r\n\t\t\t\telse if (typeof ctx.webkitLineDash != 'undefined') { ctx.webkitLineDash = gaps; }\r\n\t\t\t\telse if (typeof ctx.mozDash != 'undefined' && !(gaps.length==1 && gaps[0]==0)) { ctx.mozDash = gaps; }\r\n\r\n\t\t\t\tvar offset = this.style('stroke-dashoffset').numValueOrDefault(1);\r\n\t\t\t\tif (typeof ctx.lineDashOffset != 'undefined') { ctx.lineDashOffset = offset; }\r\n\t\t\t\telse if (typeof ctx.webkitLineDashOffset != 'undefined') { ctx.webkitLineDashOffset = offset; }\r\n\t\t\t\telse if (typeof ctx.mozDashOffset != 'undefined') { ctx.mozDashOffset = offset; }\r\n\t\t\t}\r\n\r\n\t\t\t// font\r\n\t\t\tif (typeof ctx.font != 'undefined') {\r\n\t\t\t\tctx.font = svg.Font.CreateFont(\r\n\t\t\t\t\tthis.style('font-style').value,\r\n\t\t\t\t\tthis.style('font-variant').value,\r\n\t\t\t\t\tthis.style('font-weight').value,\r\n\t\t\t\t\tthis.style('font-size').hasValue() ? this.style('font-size').toPixels() + 'px' : '',\r\n\t\t\t\t\tthis.style('font-family').value).toString();\r\n\t\t\t}\r\n\r\n\t\t\t// transform\r\n\t\t\tif (this.style('transform', false, true).hasValue()) {\r\n\t\t\t\tvar transform = new svg.Transform(this.style('transform', false, true).value);\r\n\t\t\t\ttransform.apply(ctx);\r\n\t\t\t}\r\n\r\n\t\t\t// clip\r\n\t\t\tif (this.style('clip-path', false, true).hasValue()) {\r\n\t\t\t\tvar clip = this.style('clip-path', false, true).getDefinition();\r\n\t\t\t\tif (clip != null) clip.apply(ctx);\r\n\t\t\t}\r\n\r\n\t\t\t// opacity\r\n\t\t\tif (this.style('opacity').hasValue()) {\r\n\t\t\t\tctx.globalAlpha = this.style('opacity').numValue();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsvg.Element.RenderedElementBase.prototype = new svg.Element.ElementBase;\r\n\r\n\tsvg.Element.PathElementBase = function(node) {\r\n\t\tthis.base = svg.Element.RenderedElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.path = function(ctx) {\r\n\t\t\tif (ctx != null) ctx.beginPath();\r\n\t\t\treturn new svg.BoundingBox();\r\n\t\t}\r\n\r\n\t\tthis.renderChildren = function(ctx) {\r\n\t\t\tthis.path(ctx);\r\n\t\t\tsvg.Mouse.checkPath(this, ctx);\r\n\t\t\tif (ctx.fillStyle != '') {\r\n\t\t\t\tif (this.style('fill-rule').valueOrDefault('inherit') != 'inherit') { ctx.fill(this.style('fill-rule').value); }\r\n\t\t\t\telse { ctx.fill(); }\r\n\t\t\t}\r\n\t\t\tif (ctx.strokeStyle != '') ctx.stroke();\r\n\r\n\t\t\tvar markers = this.getMarkers();\r\n\t\t\tif (markers != null) {\r\n\t\t\t\tif (this.style('marker-start').isUrlDefinition()) {\r\n\t\t\t\t\tvar marker = this.style('marker-start').getDefinition();\r\n\t\t\t\t\tmarker.render(ctx, markers[0][0], markers[0][1]);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.style('marker-mid').isUrlDefinition()) {\r\n\t\t\t\t\tvar marker = this.style('marker-mid').getDefinition();\r\n\t\t\t\t\tfor (var i=1;i<markers.length-1;i++) {\r\n\t\t\t\t\t\tmarker.render(ctx, markers[i][0], markers[i][1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.style('marker-end').isUrlDefinition()) {\r\n\t\t\t\t\tvar marker = this.style('marker-end').getDefinition();\r\n\t\t\t\t\tmarker.render(ctx, markers[markers.length-1][0], markers[markers.length-1][1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getBoundingBox = function() {\r\n\t\t\treturn this.path();\r\n\t\t}\r\n\r\n\t\tthis.getMarkers = function() {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\tsvg.Element.PathElementBase.prototype = new svg.Element.RenderedElementBase;\r\n\r\n\t// svg element\r\n\tsvg.Element.svg = function(node) {\r\n\t\tthis.base = svg.Element.RenderedElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.baseClearContext = this.clearContext;\r\n\t\tthis.clearContext = function(ctx) {\r\n\t\t\tthis.baseClearContext(ctx);\r\n\t\t\tsvg.ViewPort.RemoveCurrent();\r\n\t\t}\r\n\r\n\t\tthis.baseSetContext = this.setContext;\r\n\t\tthis.setContext = function(ctx) {\r\n\t\t\t// initial values and defaults\r\n\t\t\tctx.strokeStyle = 'rgba(0,0,0,0)';\r\n\t\t\tctx.lineCap = 'butt';\r\n\t\t\tctx.lineJoin = 'miter';\r\n\t\t\tctx.miterLimit = 4;\r\n\t\t\tif (typeof ctx.font != 'undefined' && typeof window.getComputedStyle != 'undefined') {\r\n\t\t\t\tctx.font = window.getComputedStyle(ctx.canvas).getPropertyValue('font');\r\n\t\t\t}\r\n\r\n\t\t\tthis.baseSetContext(ctx);\r\n\r\n\t\t\t// create new view port\r\n\t\t\tif (!this.attribute('x').hasValue()) this.attribute('x', true).value = 0;\r\n\t\t\tif (!this.attribute('y').hasValue()) this.attribute('y', true).value = 0;\r\n\t\t\tctx.translate(this.attribute('x').toPixels('x'), this.attribute('y').toPixels('y'));\r\n\r\n\t\t\tvar width = svg.ViewPort.width();\r\n\t\t\tvar height = svg.ViewPort.height();\r\n\r\n\t\t\tif (!this.attribute('width').hasValue()) this.attribute('width', true).value = '100%';\r\n\t\t\tif (!this.attribute('height').hasValue()) this.attribute('height', true).value = '100%';\r\n\t\t\tif (typeof this.root == 'undefined') {\r\n\t\t\t\twidth = this.attribute('width').toPixels('x');\r\n\t\t\t\theight = this.attribute('height').toPixels('y');\r\n\r\n\t\t\t\tvar x = 0;\r\n\t\t\t\tvar y = 0;\r\n\t\t\t\tif (this.attribute('refX').hasValue() && this.attribute('refY').hasValue()) {\r\n\t\t\t\t\tx = -this.attribute('refX').toPixels('x');\r\n\t\t\t\t\ty = -this.attribute('refY').toPixels('y');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.attribute('overflow').valueOrDefault('hidden') != 'visible') {\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(x, y);\r\n\t\t\t\t\tctx.lineTo(width, y);\r\n\t\t\t\t\tctx.lineTo(width, height);\r\n\t\t\t\t\tctx.lineTo(x, height);\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tctx.clip();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsvg.ViewPort.SetCurrent(width, height);\r\n\r\n\t\t\t// viewbox\r\n\t\t\tif (this.attribute('viewBox').hasValue()) {\r\n\t\t\t\tvar viewBox = svg.ToNumberArray(this.attribute('viewBox').value);\r\n\t\t\t\tvar minX = viewBox[0];\r\n\t\t\t\tvar minY = viewBox[1];\r\n\t\t\t\twidth = viewBox[2];\r\n\t\t\t\theight = viewBox[3];\r\n\r\n\t\t\t\tsvg.AspectRatio(ctx,\r\n\t\t\t\t\t\t\t\tthis.attribute('preserveAspectRatio').value,\r\n\t\t\t\t\t\t\t\tsvg.ViewPort.width(),\r\n\t\t\t\t\t\t\t\twidth,\r\n\t\t\t\t\t\t\t\tsvg.ViewPort.height(),\r\n\t\t\t\t\t\t\t\theight,\r\n\t\t\t\t\t\t\t\tminX,\r\n\t\t\t\t\t\t\t\tminY,\r\n\t\t\t\t\t\t\t\tthis.attribute('refX').value,\r\n\t\t\t\t\t\t\t\tthis.attribute('refY').value);\r\n\r\n\t\t\t\tsvg.ViewPort.RemoveCurrent();\r\n\t\t\t\tsvg.ViewPort.SetCurrent(viewBox[2], viewBox[3]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsvg.Element.svg.prototype = new svg.Element.RenderedElementBase;\r\n\r\n\t// rect element\r\n\tsvg.Element.rect = function(node) {\r\n\t\tthis.base = svg.Element.PathElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.path = function(ctx) {\r\n\t\t\tvar x = this.attribute('x').toPixels('x');\r\n\t\t\tvar y = this.attribute('y').toPixels('y');\r\n\t\t\tvar width = this.attribute('width').toPixels('x');\r\n\t\t\tvar height = this.attribute('height').toPixels('y');\r\n\t\t\tvar rx = this.attribute('rx').toPixels('x');\r\n\t\t\tvar ry = this.attribute('ry').toPixels('y');\r\n\t\t\tif (this.attribute('rx').hasValue() && !this.attribute('ry').hasValue()) ry = rx;\r\n\t\t\tif (this.attribute('ry').hasValue() && !this.attribute('rx').hasValue()) rx = ry;\r\n\t\t\trx = Math.min(rx, width / 2.0);\r\n\t\t\try = Math.min(ry, height / 2.0);\r\n\t\t\tif (ctx != null) {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(x + rx, y);\r\n\t\t\t\tctx.lineTo(x + width - rx, y);\r\n\t\t\t\tctx.quadraticCurveTo(x + width, y, x + width, y + ry)\r\n\t\t\t\tctx.lineTo(x + width, y + height - ry);\r\n\t\t\t\tctx.quadraticCurveTo(x + width, y + height, x + width - rx, y + height)\r\n\t\t\t\tctx.lineTo(x + rx, y + height);\r\n\t\t\t\tctx.quadraticCurveTo(x, y + height, x, y + height - ry)\r\n\t\t\t\tctx.lineTo(x, y + ry);\r\n\t\t\t\tctx.quadraticCurveTo(x, y, x + rx, y)\r\n\t\t\t\tctx.closePath();\r\n\t\t\t}\r\n\r\n\t\t\treturn new svg.BoundingBox(x, y, x + width, y + height);\r\n\t\t}\r\n\t}\r\n\tsvg.Element.rect.prototype = new svg.Element.PathElementBase;\r\n\r\n\t// circle element\r\n\tsvg.Element.circle = function(node) {\r\n\t\tthis.base = svg.Element.PathElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.path = function(ctx) {\r\n\t\t\tvar cx = this.attribute('cx').toPixels('x');\r\n\t\t\tvar cy = this.attribute('cy').toPixels('y');\r\n\t\t\tvar r = this.attribute('r').toPixels();\r\n\r\n\t\t\tif (ctx != null) {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc(cx, cy, r, 0, Math.PI * 2, true);\r\n\t\t\t\tctx.closePath();\r\n\t\t\t}\r\n\r\n\t\t\treturn new svg.BoundingBox(cx - r, cy - r, cx + r, cy + r);\r\n\t\t}\r\n\t}\r\n\tsvg.Element.circle.prototype = new svg.Element.PathElementBase;\r\n\r\n\t// ellipse element\r\n\tsvg.Element.ellipse = function(node) {\r\n\t\tthis.base = svg.Element.PathElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.path = function(ctx) {\r\n\t\t\tvar KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\r\n\t\t\tvar rx = this.attribute('rx').toPixels('x');\r\n\t\t\tvar ry = this.attribute('ry').toPixels('y');\r\n\t\t\tvar cx = this.attribute('cx').toPixels('x');\r\n\t\t\tvar cy = this.attribute('cy').toPixels('y');\r\n\r\n\t\t\tif (ctx != null) {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(cx, cy - ry);\r\n\t\t\t\tctx.bezierCurveTo(cx + (KAPPA * rx), cy - ry,  cx + rx, cy - (KAPPA * ry), cx + rx, cy);\r\n\t\t\t\tctx.bezierCurveTo(cx + rx, cy + (KAPPA * ry), cx + (KAPPA * rx), cy + ry, cx, cy + ry);\r\n\t\t\t\tctx.bezierCurveTo(cx - (KAPPA * rx), cy + ry, cx - rx, cy + (KAPPA * ry), cx - rx, cy);\r\n\t\t\t\tctx.bezierCurveTo(cx - rx, cy - (KAPPA * ry), cx - (KAPPA * rx), cy - ry, cx, cy - ry);\r\n\t\t\t\tctx.closePath();\r\n\t\t\t}\r\n\r\n\t\t\treturn new svg.BoundingBox(cx - rx, cy - ry, cx + rx, cy + ry);\r\n\t\t}\r\n\t}\r\n\tsvg.Element.ellipse.prototype = new svg.Element.PathElementBase;\r\n\r\n\t// line element\r\n\tsvg.Element.line = function(node) {\r\n\t\tthis.base = svg.Element.PathElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.getPoints = function() {\r\n\t\t\treturn [\r\n\t\t\t\tnew svg.Point(this.attribute('x1').toPixels('x'), this.attribute('y1').toPixels('y')),\r\n\t\t\t\tnew svg.Point(this.attribute('x2').toPixels('x'), this.attribute('y2').toPixels('y'))];\r\n\t\t}\r\n\r\n\t\tthis.path = function(ctx) {\r\n\t\t\tvar points = this.getPoints();\r\n\r\n\t\t\tif (ctx != null) {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(points[0].x, points[0].y);\r\n\t\t\t\tctx.lineTo(points[1].x, points[1].y);\r\n\t\t\t}\r\n\r\n\t\t\treturn new svg.BoundingBox(points[0].x, points[0].y, points[1].x, points[1].y);\r\n\t\t}\r\n\r\n\t\tthis.getMarkers = function() {\r\n\t\t\tvar points = this.getPoints();\r\n\t\t\tvar a = points[0].angleTo(points[1]);\r\n\t\t\treturn [[points[0], a], [points[1], a]];\r\n\t\t}\r\n\t}\r\n\tsvg.Element.line.prototype = new svg.Element.PathElementBase;\r\n\r\n\t// polyline element\r\n\tsvg.Element.polyline = function(node) {\r\n\t\tthis.base = svg.Element.PathElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.points = svg.CreatePath(this.attribute('points').value);\r\n\t\tthis.path = function(ctx) {\r\n\t\t\tvar bb = new svg.BoundingBox(this.points[0].x, this.points[0].y);\r\n\t\t\tif (ctx != null) {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(this.points[0].x, this.points[0].y);\r\n\t\t\t}\r\n\t\t\tfor (var i=1; i<this.points.length; i++) {\r\n\t\t\t\tbb.addPoint(this.points[i].x, this.points[i].y);\r\n\t\t\t\tif (ctx != null) ctx.lineTo(this.points[i].x, this.points[i].y);\r\n\t\t\t}\r\n\t\t\treturn bb;\r\n\t\t}\r\n\r\n\t\tthis.getMarkers = function() {\r\n\t\t\tvar markers = [];\r\n\t\t\tfor (var i=0; i<this.points.length - 1; i++) {\r\n\t\t\t\tmarkers.push([this.points[i], this.points[i].angleTo(this.points[i+1])]);\r\n\t\t\t}\r\n\t\t\tif (markers.length > 0) {\r\n\t\t\t\tmarkers.push([this.points[this.points.length-1], markers[markers.length-1][1]]);\r\n\t\t\t}\r\n\t\t\treturn markers;\r\n\t\t}\r\n\t}\r\n\tsvg.Element.polyline.prototype = new svg.Element.PathElementBase;\r\n\r\n\t// polygon element\r\n\tsvg.Element.polygon = function(node) {\r\n\t\tthis.base = svg.Element.polyline;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.basePath = this.path;\r\n\t\tthis.path = function(ctx) {\r\n\t\t\tvar bb = this.basePath(ctx);\r\n\t\t\tif (ctx != null) {\r\n\t\t\t\tctx.lineTo(this.points[0].x, this.points[0].y);\r\n\t\t\t\tctx.closePath();\r\n\t\t\t}\r\n\t\t\treturn bb;\r\n\t\t}\r\n\t}\r\n\tsvg.Element.polygon.prototype = new svg.Element.polyline;\r\n\r\n\t// path element\r\n\tsvg.Element.path = function(node) {\r\n\t\tthis.base = svg.Element.PathElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tvar d = this.attribute('d').value;\r\n\t\t// TODO: convert to real lexer based on http://www.w3.org/TR/SVG11/paths.html#PathDataBNF\r\n\t\td = d.replace(/,/gm,' '); // get rid of all commas\r\n\t\t// As the end of a match can also be the start of the next match, we need to run this replace twice.\r\n\t\tfor(var i=0; i<2; i++)\r\n\t\t\td = d.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\\s])/gm,'$1 $2'); // suffix commands with spaces\r\n\t\td = d.replace(/([^\\s])([MmZzLlHhVvCcSsQqTtAa])/gm,'$1 $2'); // prefix commands with spaces\r\n\t\td = d.replace(/([0-9])([+\\-])/gm,'$1 $2'); // separate digits on +- signs\r\n\t\t// Again, we need to run this twice to find all occurances\r\n\t\tfor(var i=0; i<2; i++)\r\n\t\t\td = d.replace(/(\\.[0-9]*)(\\.)/gm,'$1 $2'); // separate digits when they start with a comma\r\n\t\td = d.replace(/([Aa](\\s+[0-9]+){3})\\s+([01])\\s*([01])/gm,'$1 $3 $4 '); // shorthand elliptical arc path syntax\r\n\t\td = svg.compressSpaces(d); // compress multiple spaces\r\n\t\td = svg.trim(d);\r\n\t\tthis.PathParser = new (function(d) {\r\n\t\t\tthis.tokens = d.split(' ');\r\n\r\n\t\t\tthis.reset = function() {\r\n\t\t\t\tthis.i = -1;\r\n\t\t\t\tthis.command = '';\r\n\t\t\t\tthis.previousCommand = '';\r\n\t\t\t\tthis.start = new svg.Point(0, 0);\r\n\t\t\t\tthis.control = new svg.Point(0, 0);\r\n\t\t\t\tthis.current = new svg.Point(0, 0);\r\n\t\t\t\tthis.points = [];\r\n\t\t\t\tthis.angles = [];\r\n\t\t\t}\r\n\r\n\t\t\tthis.isEnd = function() {\r\n\t\t\t\treturn this.i >= this.tokens.length - 1;\r\n\t\t\t}\r\n\r\n\t\t\tthis.isCommandOrEnd = function() {\r\n\t\t\t\tif (this.isEnd()) return true;\r\n\t\t\t\treturn this.tokens[this.i + 1].match(/^[A-Za-z]$/) != null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.isRelativeCommand = function() {\r\n\t\t\t\tswitch(this.command)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'm':\r\n\t\t\t\t\tcase 'l':\r\n\t\t\t\t\tcase 'h':\r\n\t\t\t\t\tcase 'v':\r\n\t\t\t\t\tcase 'c':\r\n\t\t\t\t\tcase 's':\r\n\t\t\t\t\tcase 'q':\r\n\t\t\t\t\tcase 't':\r\n\t\t\t\t\tcase 'a':\r\n\t\t\t\t\tcase 'z':\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.getToken = function() {\r\n\t\t\t\tthis.i++;\r\n\t\t\t\treturn this.tokens[this.i];\r\n\t\t\t}\r\n\r\n\t\t\tthis.getScalar = function() {\r\n\t\t\t\treturn parseFloat(this.getToken());\r\n\t\t\t}\r\n\r\n\t\t\tthis.nextCommand = function() {\r\n\t\t\t\tthis.previousCommand = this.command;\r\n\t\t\t\tthis.command = this.getToken();\r\n\t\t\t}\r\n\r\n\t\t\tthis.getPoint = function() {\r\n\t\t\t\tvar p = new svg.Point(this.getScalar(), this.getScalar());\r\n\t\t\t\treturn this.makeAbsolute(p);\r\n\t\t\t}\r\n\r\n\t\t\tthis.getAsControlPoint = function() {\r\n\t\t\t\tvar p = this.getPoint();\r\n\t\t\t\tthis.control = p;\r\n\t\t\t\treturn p;\r\n\t\t\t}\r\n\r\n\t\t\tthis.getAsCurrentPoint = function() {\r\n\t\t\t\tvar p = this.getPoint();\r\n\t\t\t\tthis.current = p;\r\n\t\t\t\treturn p;\r\n\t\t\t}\r\n\r\n\t\t\tthis.getReflectedControlPoint = function() {\r\n\t\t\t\tif (this.previousCommand.toLowerCase() != 'c' &&\r\n\t\t\t\t    this.previousCommand.toLowerCase() != 's' &&\r\n\t\t\t\t\tthis.previousCommand.toLowerCase() != 'q' &&\r\n\t\t\t\t\tthis.previousCommand.toLowerCase() != 't' ){\r\n\t\t\t\t\treturn this.current;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// reflect point\r\n\t\t\t\tvar p = new svg.Point(2 * this.current.x - this.control.x, 2 * this.current.y - this.control.y);\r\n\t\t\t\treturn p;\r\n\t\t\t}\r\n\r\n\t\t\tthis.makeAbsolute = function(p) {\r\n\t\t\t\tif (this.isRelativeCommand()) {\r\n\t\t\t\t\tp.x += this.current.x;\r\n\t\t\t\t\tp.y += this.current.y;\r\n\t\t\t\t}\r\n\t\t\t\treturn p;\r\n\t\t\t}\r\n\r\n\t\t\tthis.addMarker = function(p, from, priorTo) {\r\n\t\t\t\t// if the last angle isn't filled in because we didn't have this point yet ...\r\n\t\t\t\tif (priorTo != null && this.angles.length > 0 && this.angles[this.angles.length-1] == null) {\r\n\t\t\t\t\tthis.angles[this.angles.length-1] = this.points[this.points.length-1].angleTo(priorTo);\r\n\t\t\t\t}\r\n\t\t\t\tthis.addMarkerAngle(p, from == null ? null : from.angleTo(p));\r\n\t\t\t}\r\n\r\n\t\t\tthis.addMarkerAngle = function(p, a) {\r\n\t\t\t\tthis.points.push(p);\r\n\t\t\t\tthis.angles.push(a);\r\n\t\t\t}\r\n\r\n\t\t\tthis.getMarkerPoints = function() { return this.points; }\r\n\t\t\tthis.getMarkerAngles = function() {\r\n\t\t\t\tfor (var i=0; i<this.angles.length; i++) {\r\n\t\t\t\t\tif (this.angles[i] == null) {\r\n\t\t\t\t\t\tfor (var j=i+1; j<this.angles.length; j++) {\r\n\t\t\t\t\t\t\tif (this.angles[j] != null) {\r\n\t\t\t\t\t\t\t\tthis.angles[i] = this.angles[j];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this.angles;\r\n\t\t\t}\r\n\t\t})(d);\r\n\r\n\t\tthis.path = function(ctx) {\r\n\t\t\tvar pp = this.PathParser;\r\n\t\t\tpp.reset();\r\n\r\n\t\t\tvar bb = new svg.BoundingBox();\r\n\t\t\tif (ctx != null) ctx.beginPath();\r\n\t\t\twhile (!pp.isEnd()) {\r\n\t\t\t\tpp.nextCommand();\r\n\t\t\t\tswitch (pp.command) {\r\n\t\t\t\tcase 'M':\r\n\t\t\t\tcase 'm':\r\n\t\t\t\t\tvar p = pp.getAsCurrentPoint();\r\n\t\t\t\t\tpp.addMarker(p);\r\n\t\t\t\t\tbb.addPoint(p.x, p.y);\r\n\t\t\t\t\tif (ctx != null) ctx.moveTo(p.x, p.y);\r\n\t\t\t\t\tpp.start = pp.current;\r\n\t\t\t\t\twhile (!pp.isCommandOrEnd()) {\r\n\t\t\t\t\t\tvar p = pp.getAsCurrentPoint();\r\n\t\t\t\t\t\tpp.addMarker(p, pp.start);\r\n\t\t\t\t\t\tbb.addPoint(p.x, p.y);\r\n\t\t\t\t\t\tif (ctx != null) ctx.lineTo(p.x, p.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'L':\r\n\t\t\t\tcase 'l':\r\n\t\t\t\t\twhile (!pp.isCommandOrEnd()) {\r\n\t\t\t\t\t\tvar c = pp.current;\r\n\t\t\t\t\t\tvar p = pp.getAsCurrentPoint();\r\n\t\t\t\t\t\tpp.addMarker(p, c);\r\n\t\t\t\t\t\tbb.addPoint(p.x, p.y);\r\n\t\t\t\t\t\tif (ctx != null) ctx.lineTo(p.x, p.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'H':\r\n\t\t\t\tcase 'h':\r\n\t\t\t\t\twhile (!pp.isCommandOrEnd()) {\r\n\t\t\t\t\t\tvar newP = new svg.Point((pp.isRelativeCommand() ? pp.current.x : 0) + pp.getScalar(), pp.current.y);\r\n\t\t\t\t\t\tpp.addMarker(newP, pp.current);\r\n\t\t\t\t\t\tpp.current = newP;\r\n\t\t\t\t\t\tbb.addPoint(pp.current.x, pp.current.y);\r\n\t\t\t\t\t\tif (ctx != null) ctx.lineTo(pp.current.x, pp.current.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'V':\r\n\t\t\t\tcase 'v':\r\n\t\t\t\t\twhile (!pp.isCommandOrEnd()) {\r\n\t\t\t\t\t\tvar newP = new svg.Point(pp.current.x, (pp.isRelativeCommand() ? pp.current.y : 0) + pp.getScalar());\r\n\t\t\t\t\t\tpp.addMarker(newP, pp.current);\r\n\t\t\t\t\t\tpp.current = newP;\r\n\t\t\t\t\t\tbb.addPoint(pp.current.x, pp.current.y);\r\n\t\t\t\t\t\tif (ctx != null) ctx.lineTo(pp.current.x, pp.current.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'C':\r\n\t\t\t\tcase 'c':\r\n\t\t\t\t\twhile (!pp.isCommandOrEnd()) {\r\n\t\t\t\t\t\tvar curr = pp.current;\r\n\t\t\t\t\t\tvar p1 = pp.getPoint();\r\n\t\t\t\t\t\tvar cntrl = pp.getAsControlPoint();\r\n\t\t\t\t\t\tvar cp = pp.getAsCurrentPoint();\r\n\t\t\t\t\t\tpp.addMarker(cp, cntrl, p1);\r\n\t\t\t\t\t\tbb.addBezierCurve(curr.x, curr.y, p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\r\n\t\t\t\t\t\tif (ctx != null) ctx.bezierCurveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'S':\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\twhile (!pp.isCommandOrEnd()) {\r\n\t\t\t\t\t\tvar curr = pp.current;\r\n\t\t\t\t\t\tvar p1 = pp.getReflectedControlPoint();\r\n\t\t\t\t\t\tvar cntrl = pp.getAsControlPoint();\r\n\t\t\t\t\t\tvar cp = pp.getAsCurrentPoint();\r\n\t\t\t\t\t\tpp.addMarker(cp, cntrl, p1);\r\n\t\t\t\t\t\tbb.addBezierCurve(curr.x, curr.y, p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\r\n\t\t\t\t\t\tif (ctx != null) ctx.bezierCurveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Q':\r\n\t\t\t\tcase 'q':\r\n\t\t\t\t\twhile (!pp.isCommandOrEnd()) {\r\n\t\t\t\t\t\tvar curr = pp.current;\r\n\t\t\t\t\t\tvar cntrl = pp.getAsControlPoint();\r\n\t\t\t\t\t\tvar cp = pp.getAsCurrentPoint();\r\n\t\t\t\t\t\tpp.addMarker(cp, cntrl, cntrl);\r\n\t\t\t\t\t\tbb.addQuadraticCurve(curr.x, curr.y, cntrl.x, cntrl.y, cp.x, cp.y);\r\n\t\t\t\t\t\tif (ctx != null) ctx.quadraticCurveTo(cntrl.x, cntrl.y, cp.x, cp.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'T':\r\n\t\t\t\tcase 't':\r\n\t\t\t\t\twhile (!pp.isCommandOrEnd()) {\r\n\t\t\t\t\t\tvar curr = pp.current;\r\n\t\t\t\t\t\tvar cntrl = pp.getReflectedControlPoint();\r\n\t\t\t\t\t\tpp.control = cntrl;\r\n\t\t\t\t\t\tvar cp = pp.getAsCurrentPoint();\r\n\t\t\t\t\t\tpp.addMarker(cp, cntrl, cntrl);\r\n\t\t\t\t\t\tbb.addQuadraticCurve(curr.x, curr.y, cntrl.x, cntrl.y, cp.x, cp.y);\r\n\t\t\t\t\t\tif (ctx != null) ctx.quadraticCurveTo(cntrl.x, cntrl.y, cp.x, cp.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'A':\r\n\t\t\t\tcase 'a':\r\n\t\t\t\t\twhile (!pp.isCommandOrEnd()) {\r\n\t\t\t\t\t    var curr = pp.current;\r\n\t\t\t\t\t\tvar rx = pp.getScalar();\r\n\t\t\t\t\t\tvar ry = pp.getScalar();\r\n\t\t\t\t\t\tvar xAxisRotation = pp.getScalar() * (Math.PI / 180.0);\r\n\t\t\t\t\t\tvar largeArcFlag = pp.getScalar();\r\n\t\t\t\t\t\tvar sweepFlag = pp.getScalar();\r\n\t\t\t\t\t\tvar cp = pp.getAsCurrentPoint();\r\n\r\n\t\t\t\t\t\t// Conversion from endpoint to center parameterization\r\n\t\t\t\t\t\t// http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\r\n\t\t\t\t\t\t// x1', y1'\r\n\t\t\t\t\t\tvar currp = new svg.Point(\r\n\t\t\t\t\t\t\tMath.cos(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.sin(xAxisRotation) * (curr.y - cp.y) / 2.0,\r\n\t\t\t\t\t\t\t-Math.sin(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.cos(xAxisRotation) * (curr.y - cp.y) / 2.0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t// adjust radii\r\n\t\t\t\t\t\tvar l = Math.pow(currp.x,2)/Math.pow(rx,2)+Math.pow(currp.y,2)/Math.pow(ry,2);\r\n\t\t\t\t\t\tif (l > 1) {\r\n\t\t\t\t\t\t\trx *= Math.sqrt(l);\r\n\t\t\t\t\t\t\try *= Math.sqrt(l);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// cx', cy'\r\n\t\t\t\t\t\tvar s = (largeArcFlag == sweepFlag ? -1 : 1) * Math.sqrt(\r\n\t\t\t\t\t\t\t((Math.pow(rx,2)*Math.pow(ry,2))-(Math.pow(rx,2)*Math.pow(currp.y,2))-(Math.pow(ry,2)*Math.pow(currp.x,2))) /\r\n\t\t\t\t\t\t\t(Math.pow(rx,2)*Math.pow(currp.y,2)+Math.pow(ry,2)*Math.pow(currp.x,2))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (isNaN(s)) s = 0;\r\n\t\t\t\t\t\tvar cpp = new svg.Point(s * rx * currp.y / ry, s * -ry * currp.x / rx);\r\n\t\t\t\t\t\t// cx, cy\r\n\t\t\t\t\t\tvar centp = new svg.Point(\r\n\t\t\t\t\t\t\t(curr.x + cp.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y,\r\n\t\t\t\t\t\t\t(curr.y + cp.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t// vector magnitude\r\n\t\t\t\t\t\tvar m = function(v) { return Math.sqrt(Math.pow(v[0],2) + Math.pow(v[1],2)); }\r\n\t\t\t\t\t\t// ratio between two vectors\r\n\t\t\t\t\t\tvar r = function(u, v) { return (u[0]*v[0]+u[1]*v[1]) / (m(u)*m(v)) }\r\n\t\t\t\t\t\t// angle between two vectors\r\n\t\t\t\t\t\tvar a = function(u, v) { return (u[0]*v[1] < u[1]*v[0] ? -1 : 1) * Math.acos(r(u,v)); }\r\n\t\t\t\t\t\t// initial angle\r\n\t\t\t\t\t\tvar a1 = a([1,0], [(currp.x-cpp.x)/rx,(currp.y-cpp.y)/ry]);\r\n\t\t\t\t\t\t// angle delta\r\n\t\t\t\t\t\tvar u = [(currp.x-cpp.x)/rx,(currp.y-cpp.y)/ry];\r\n\t\t\t\t\t\tvar v = [(-currp.x-cpp.x)/rx,(-currp.y-cpp.y)/ry];\r\n\t\t\t\t\t\tvar ad = a(u, v);\r\n\t\t\t\t\t\tif (r(u,v) <= -1) ad = Math.PI;\r\n\t\t\t\t\t\tif (r(u,v) >= 1) ad = 0;\r\n\r\n\t\t\t\t\t\t// for markers\r\n\t\t\t\t\t\tvar dir = 1 - sweepFlag ? 1.0 : -1.0;\r\n\t\t\t\t\t\tvar ah = a1 + dir * (ad / 2.0);\r\n\t\t\t\t\t\tvar halfWay = new svg.Point(\r\n\t\t\t\t\t\t\tcentp.x + rx * Math.cos(ah),\r\n\t\t\t\t\t\t\tcentp.y + ry * Math.sin(ah)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tpp.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);\r\n\t\t\t\t\t\tpp.addMarkerAngle(cp, ah - dir * Math.PI);\r\n\r\n\t\t\t\t\t\tbb.addPoint(cp.x, cp.y); // TODO: this is too naive, make it better\r\n\t\t\t\t\t\tif (ctx != null) {\r\n\t\t\t\t\t\t\tvar r = rx > ry ? rx : ry;\r\n\t\t\t\t\t\t\tvar sx = rx > ry ? 1 : rx / ry;\r\n\t\t\t\t\t\t\tvar sy = rx > ry ? ry / rx : 1;\r\n\r\n\t\t\t\t\t\t\tctx.translate(centp.x, centp.y);\r\n\t\t\t\t\t\t\tctx.rotate(xAxisRotation);\r\n\t\t\t\t\t\t\tctx.scale(sx, sy);\r\n\t\t\t\t\t\t\tctx.arc(0, 0, r, a1, a1 + ad, 1 - sweepFlag);\r\n\t\t\t\t\t\t\tctx.scale(1/sx, 1/sy);\r\n\t\t\t\t\t\t\tctx.rotate(-xAxisRotation);\r\n\t\t\t\t\t\t\tctx.translate(-centp.x, -centp.y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Z':\r\n\t\t\t\tcase 'z':\r\n\t\t\t\t\tif (ctx != null) ctx.closePath();\r\n\t\t\t\t\tpp.current = pp.start;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn bb;\r\n\t\t}\r\n\r\n\t\tthis.getMarkers = function() {\r\n\t\t\tvar points = this.PathParser.getMarkerPoints();\r\n\t\t\tvar angles = this.PathParser.getMarkerAngles();\r\n\r\n\t\t\tvar markers = [];\r\n\t\t\tfor (var i=0; i<points.length; i++) {\r\n\t\t\t\tmarkers.push([points[i], angles[i]]);\r\n\t\t\t}\r\n\t\t\treturn markers;\r\n\t\t}\r\n\t}\r\n\tsvg.Element.path.prototype = new svg.Element.PathElementBase;\r\n\r\n\t// pattern element\r\n\tsvg.Element.pattern = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.createPattern = function(ctx, element) {\r\n\t\t\tvar width = this.attribute('width').toPixels('x', true);\r\n\t\t\tvar height = this.attribute('height').toPixels('y', true);\r\n\r\n\t\t\t// render me using a temporary svg element\r\n\t\t\tvar tempSvg = new svg.Element.svg();\r\n\t\t\ttempSvg.attributes['viewBox'] = new svg.Property('viewBox', this.attribute('viewBox').value);\r\n\t\t\ttempSvg.attributes['width'] = new svg.Property('width', width + 'px');\r\n\t\t\ttempSvg.attributes['height'] = new svg.Property('height', height + 'px');\r\n\t\t\ttempSvg.attributes['transform'] = new svg.Property('transform', this.attribute('patternTransform').value);\r\n\t\t\ttempSvg.children = this.children;\r\n\r\n\t\t\tvar c = document.createElement('canvas');\r\n\t\t\tc.width = width;\r\n\t\t\tc.height = height;\r\n\t\t\tvar cctx = c.getContext('2d');\r\n\t\t\tif (this.attribute('x').hasValue() && this.attribute('y').hasValue()) {\r\n\t\t\t\tcctx.translate(this.attribute('x').toPixels('x', true), this.attribute('y').toPixels('y', true));\r\n\t\t\t}\r\n\t\t\t// render 3x3 grid so when we transform there's no white space on edges\r\n\t\t\tfor (var x=-1; x<=1; x++) {\r\n\t\t\t\tfor (var y=-1; y<=1; y++) {\r\n\t\t\t\t\tcctx.save();\r\n\t\t\t\t\ttempSvg.attributes['x'] = new svg.Property('x', x * c.width);\r\n\t\t\t\t\ttempSvg.attributes['y'] = new svg.Property('y', y * c.height);\r\n\t\t\t\t\ttempSvg.render(cctx);\r\n\t\t\t\t\tcctx.restore();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar pattern = ctx.createPattern(c, 'repeat');\r\n\t\t\treturn pattern;\r\n\t\t}\r\n\t}\r\n\tsvg.Element.pattern.prototype = new svg.Element.ElementBase;\r\n\r\n\t// marker element\r\n\tsvg.Element.marker = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.baseRender = this.render;\r\n\t\tthis.render = function(ctx, point, angle) {\r\n\t\t\tctx.translate(point.x, point.y);\r\n\t\t\tif (this.attribute('orient').valueOrDefault('auto') == 'auto') ctx.rotate(angle);\r\n\t\t\tif (this.attribute('markerUnits').valueOrDefault('strokeWidth') == 'strokeWidth') ctx.scale(ctx.lineWidth, ctx.lineWidth);\r\n\t\t\tctx.save();\r\n\r\n\t\t\t// render me using a temporary svg element\r\n\t\t\tvar tempSvg = new svg.Element.svg();\r\n\t\t\ttempSvg.attributes['viewBox'] = new svg.Property('viewBox', this.attribute('viewBox').value);\r\n\t\t\ttempSvg.attributes['refX'] = new svg.Property('refX', this.attribute('refX').value);\r\n\t\t\ttempSvg.attributes['refY'] = new svg.Property('refY', this.attribute('refY').value);\r\n\t\t\ttempSvg.attributes['width'] = new svg.Property('width', this.attribute('markerWidth').value);\r\n\t\t\ttempSvg.attributes['height'] = new svg.Property('height', this.attribute('markerHeight').value);\r\n\t\t\ttempSvg.attributes['fill'] = new svg.Property('fill', this.attribute('fill').valueOrDefault('black'));\r\n\t\t\ttempSvg.attributes['stroke'] = new svg.Property('stroke', this.attribute('stroke').valueOrDefault('none'));\r\n\t\t\ttempSvg.children = this.children;\r\n\t\t\ttempSvg.render(ctx);\r\n\r\n\t\t\tctx.restore();\r\n\t\t\tif (this.attribute('markerUnits').valueOrDefault('strokeWidth') == 'strokeWidth') ctx.scale(1/ctx.lineWidth, 1/ctx.lineWidth);\r\n\t\t\tif (this.attribute('orient').valueOrDefault('auto') == 'auto') ctx.rotate(-angle);\r\n\t\t\tctx.translate(-point.x, -point.y);\r\n\t\t}\r\n\t}\r\n\tsvg.Element.marker.prototype = new svg.Element.ElementBase;\r\n\r\n\t// definitions element\r\n\tsvg.Element.defs = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.render = function(ctx) {\r\n\t\t\t// NOOP\r\n\t\t}\r\n\t}\r\n\tsvg.Element.defs.prototype = new svg.Element.ElementBase;\r\n\r\n\t// base for gradients\r\n\tsvg.Element.GradientBase = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.stops = [];\r\n\t\tfor (var i=0; i<this.children.length; i++) {\r\n\t\t\tvar child = this.children[i];\r\n\t\t\tif (child.type == 'stop') this.stops.push(child);\r\n\t\t}\r\n\r\n\t\tthis.getGradient = function() {\r\n\t\t\t// OVERRIDE ME!\r\n\t\t}\r\n\r\n\t\tthis.gradientUnits = function () {\r\n\t\t\treturn this.attribute('gradientUnits').valueOrDefault('objectBoundingBox');\r\n\t\t}\r\n\r\n\t\tthis.attributesToInherit = ['gradientUnits'];\r\n\r\n\t\tthis.inheritStopContainer = function (stopsContainer) {\r\n\t\t\tfor (var i=0; i<this.attributesToInherit.length; i++) {\r\n\t\t\t\tvar attributeToInherit = this.attributesToInherit[i];\r\n\t\t\t\tif (!this.attribute(attributeToInherit).hasValue() && stopsContainer.attribute(attributeToInherit).hasValue()) {\r\n\t\t\t\t\tthis.attribute(attributeToInherit, true).value = stopsContainer.attribute(attributeToInherit).value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.createGradient = function(ctx, element, parentOpacityProp) {\r\n\t\t\tvar stopsContainer = this;\r\n\t\t\tif (this.getHrefAttribute().hasValue()) {\r\n\t\t\t\tstopsContainer = this.getHrefAttribute().getDefinition();\r\n\t\t\t\tthis.inheritStopContainer(stopsContainer);\r\n\t\t\t}\r\n\r\n\t\t\tvar addParentOpacity = function (color) {\r\n\t\t\t\tif (parentOpacityProp.hasValue()) {\r\n\t\t\t\t\tvar p = new svg.Property('color', color);\r\n\t\t\t\t\treturn p.addOpacity(parentOpacityProp).value;\r\n\t\t\t\t}\r\n\t\t\t\treturn color;\r\n\t\t\t};\r\n\r\n\t\t\tvar g = this.getGradient(ctx, element);\r\n\t\t\tif (g == null) return addParentOpacity(stopsContainer.stops[stopsContainer.stops.length - 1].color);\r\n\t\t\tfor (var i=0; i<stopsContainer.stops.length; i++) {\r\n\t\t\t\tg.addColorStop(stopsContainer.stops[i].offset, addParentOpacity(stopsContainer.stops[i].color));\r\n\t\t\t}\r\n\r\n\t\t\tif (this.attribute('gradientTransform').hasValue()) {\r\n\t\t\t\t// render as transformed pattern on temporary canvas\r\n\t\t\t\tvar rootView = svg.ViewPort.viewPorts[0];\r\n\r\n\t\t\t\tvar rect = new svg.Element.rect();\r\n\t\t\t\trect.attributes['x'] = new svg.Property('x', -svg.MAX_VIRTUAL_PIXELS/3.0);\r\n\t\t\t\trect.attributes['y'] = new svg.Property('y', -svg.MAX_VIRTUAL_PIXELS/3.0);\r\n\t\t\t\trect.attributes['width'] = new svg.Property('width', svg.MAX_VIRTUAL_PIXELS);\r\n\t\t\t\trect.attributes['height'] = new svg.Property('height', svg.MAX_VIRTUAL_PIXELS);\r\n\r\n\t\t\t\tvar group = new svg.Element.g();\r\n\t\t\t\tgroup.attributes['transform'] = new svg.Property('transform', this.attribute('gradientTransform').value);\r\n\t\t\t\tgroup.children = [ rect ];\r\n\r\n\t\t\t\tvar tempSvg = new svg.Element.svg();\r\n\t\t\t\ttempSvg.attributes['x'] = new svg.Property('x', 0);\r\n\t\t\t\ttempSvg.attributes['y'] = new svg.Property('y', 0);\r\n\t\t\t\ttempSvg.attributes['width'] = new svg.Property('width', rootView.width);\r\n\t\t\t\ttempSvg.attributes['height'] = new svg.Property('height', rootView.height);\r\n\t\t\t\ttempSvg.children = [ group ];\r\n\r\n\t\t\t\tvar c = document.createElement('canvas');\r\n\t\t\t\tc.width = rootView.width;\r\n\t\t\t\tc.height = rootView.height;\r\n\t\t\t\tvar tempCtx = c.getContext('2d');\r\n\t\t\t\ttempCtx.fillStyle = g;\r\n\t\t\t\ttempSvg.render(tempCtx);\r\n\t\t\t\treturn tempCtx.createPattern(c, 'no-repeat');\r\n\t\t\t}\r\n\r\n\t\t\treturn g;\r\n\t\t}\r\n\t}\r\n\tsvg.Element.GradientBase.prototype = new svg.Element.ElementBase;\r\n\r\n\t// linear gradient element\r\n\tsvg.Element.linearGradient = function(node) {\r\n\t\tthis.base = svg.Element.GradientBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.attributesToInherit.push('x1');\r\n\t\tthis.attributesToInherit.push('y1');\r\n\t\tthis.attributesToInherit.push('x2');\r\n\t\tthis.attributesToInherit.push('y2');\r\n\r\n\t\tthis.getGradient = function(ctx, element) {\r\n\t\t\tvar bb = this.gradientUnits() == 'objectBoundingBox' ? element.getBoundingBox() : null;\r\n\r\n\t\t\tif (!this.attribute('x1').hasValue()\r\n\t\t\t && !this.attribute('y1').hasValue()\r\n\t\t\t && !this.attribute('x2').hasValue()\r\n\t\t\t && !this.attribute('y2').hasValue()) {\r\n\t\t\t\tthis.attribute('x1', true).value = 0;\r\n\t\t\t\tthis.attribute('y1', true).value = 0;\r\n\t\t\t\tthis.attribute('x2', true).value = 1;\r\n\t\t\t\tthis.attribute('y2', true).value = 0;\r\n\t\t\t }\r\n\r\n\t\t\tvar x1 = (this.gradientUnits() == 'objectBoundingBox'\r\n\t\t\t\t? bb.x() + bb.width() * this.attribute('x1').numValue()\r\n\t\t\t\t: this.attribute('x1').toPixels('x'));\r\n\t\t\tvar y1 = (this.gradientUnits() == 'objectBoundingBox'\r\n\t\t\t\t? bb.y() + bb.height() * this.attribute('y1').numValue()\r\n\t\t\t\t: this.attribute('y1').toPixels('y'));\r\n\t\t\tvar x2 = (this.gradientUnits() == 'objectBoundingBox'\r\n\t\t\t\t? bb.x() + bb.width() * this.attribute('x2').numValue()\r\n\t\t\t\t: this.attribute('x2').toPixels('x'));\r\n\t\t\tvar y2 = (this.gradientUnits() == 'objectBoundingBox'\r\n\t\t\t\t? bb.y() + bb.height() * this.attribute('y2').numValue()\r\n\t\t\t\t: this.attribute('y2').toPixels('y'));\r\n\r\n\t\t\tif (x1 == x2 && y1 == y2) return null;\r\n\t\t\treturn ctx.createLinearGradient(x1, y1, x2, y2);\r\n\t\t}\r\n\t}\r\n\tsvg.Element.linearGradient.prototype = new svg.Element.GradientBase;\r\n\r\n\t// radial gradient element\r\n\tsvg.Element.radialGradient = function(node) {\r\n\t\tthis.base = svg.Element.GradientBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.attributesToInherit.push('cx');\r\n\t\tthis.attributesToInherit.push('cy');\r\n\t\tthis.attributesToInherit.push('r');\r\n\t\tthis.attributesToInherit.push('fx');\r\n\t\tthis.attributesToInherit.push('fy');\r\n\r\n\t\tthis.getGradient = function(ctx, element) {\r\n\t\t\tvar bb = element.getBoundingBox();\r\n\r\n\t\t\tif (!this.attribute('cx').hasValue()) this.attribute('cx', true).value = '50%';\r\n\t\t\tif (!this.attribute('cy').hasValue()) this.attribute('cy', true).value = '50%';\r\n\t\t\tif (!this.attribute('r').hasValue()) this.attribute('r', true).value = '50%';\r\n\r\n\t\t\tvar cx = (this.gradientUnits() == 'objectBoundingBox'\r\n\t\t\t\t? bb.x() + bb.width() * this.attribute('cx').numValue()\r\n\t\t\t\t: this.attribute('cx').toPixels('x'));\r\n\t\t\tvar cy = (this.gradientUnits() == 'objectBoundingBox'\r\n\t\t\t\t? bb.y() + bb.height() * this.attribute('cy').numValue()\r\n\t\t\t\t: this.attribute('cy').toPixels('y'));\r\n\r\n\t\t\tvar fx = cx;\r\n\t\t\tvar fy = cy;\r\n\t\t\tif (this.attribute('fx').hasValue()) {\r\n\t\t\t\tfx = (this.gradientUnits() == 'objectBoundingBox'\r\n\t\t\t\t? bb.x() + bb.width() * this.attribute('fx').numValue()\r\n\t\t\t\t: this.attribute('fx').toPixels('x'));\r\n\t\t\t}\r\n\t\t\tif (this.attribute('fy').hasValue()) {\r\n\t\t\t\tfy = (this.gradientUnits() == 'objectBoundingBox'\r\n\t\t\t\t? bb.y() + bb.height() * this.attribute('fy').numValue()\r\n\t\t\t\t: this.attribute('fy').toPixels('y'));\r\n\t\t\t}\r\n\r\n\t\t\tvar r = (this.gradientUnits() == 'objectBoundingBox'\r\n\t\t\t\t? (bb.width() + bb.height()) / 2.0 * this.attribute('r').numValue()\r\n\t\t\t\t: this.attribute('r').toPixels());\r\n\r\n\t\t\treturn ctx.createRadialGradient(fx, fy, 0, cx, cy, r);\r\n\t\t}\r\n\t}\r\n\tsvg.Element.radialGradient.prototype = new svg.Element.GradientBase;\r\n\r\n\t// gradient stop element\r\n\tsvg.Element.stop = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.offset = this.attribute('offset').numValue();\r\n\t\tif (this.offset < 0) this.offset = 0;\r\n\t\tif (this.offset > 1) this.offset = 1;\r\n\r\n\t\tvar stopColor = this.style('stop-color', true);\r\n\t\tif (stopColor.value == '') stopColor.value = '#000';\r\n\t\tif (this.style('stop-opacity').hasValue()) stopColor = stopColor.addOpacity(this.style('stop-opacity'));\r\n\t\tthis.color = stopColor.value;\r\n\t}\r\n\tsvg.Element.stop.prototype = new svg.Element.ElementBase;\r\n\r\n\t// animation base element\r\n\tsvg.Element.AnimateBase = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tsvg.Animations.push(this);\r\n\r\n\t\tthis.duration = 0.0;\r\n\t\tthis.begin = this.attribute('begin').toMilliseconds();\r\n\t\tthis.maxDuration = this.begin + this.attribute('dur').toMilliseconds();\r\n\r\n\t\tthis.getProperty = function() {\r\n\t\t\tvar attributeType = this.attribute('attributeType').value;\r\n\t\t\tvar attributeName = this.attribute('attributeName').value;\r\n\r\n\t\t\tif (attributeType == 'CSS') {\r\n\t\t\t\treturn this.parent.style(attributeName, true);\r\n\t\t\t}\r\n\t\t\treturn this.parent.attribute(attributeName, true);\r\n\t\t};\r\n\r\n\t\tthis.initialValue = null;\r\n\t\tthis.initialUnits = '';\r\n\t\tthis.removed = false;\r\n\r\n\t\tthis.calcValue = function() {\r\n\t\t\t// OVERRIDE ME!\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\tthis.update = function(delta) {\r\n\t\t\t// set initial value\r\n\t\t\tif (this.initialValue == null) {\r\n\t\t\t\tthis.initialValue = this.getProperty().value;\r\n\t\t\t\tthis.initialUnits = this.getProperty().getUnits();\r\n\t\t\t}\r\n\r\n\t\t\t// if we're past the end time\r\n\t\t\tif (this.duration > this.maxDuration) {\r\n\t\t\t\t// loop for indefinitely repeating animations\r\n\t\t\t\tif (this.attribute('repeatCount').value == 'indefinite'\r\n\t\t\t\t || this.attribute('repeatDur').value == 'indefinite') {\r\n\t\t\t\t\tthis.duration = 0.0\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.attribute('fill').valueOrDefault('remove') == 'freeze' && !this.frozen) {\r\n\t\t\t\t\tthis.frozen = true;\r\n\t\t\t\t\tthis.parent.animationFrozen = true;\r\n\t\t\t\t\tthis.parent.animationFrozenValue = this.getProperty().value;\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.attribute('fill').valueOrDefault('remove') == 'remove' && !this.removed) {\r\n\t\t\t\t\tthis.removed = true;\r\n\t\t\t\t\tthis.getProperty().value = this.parent.animationFrozen ? this.parent.animationFrozenValue : this.initialValue;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.duration = this.duration + delta;\r\n\r\n\t\t\t// if we're past the begin time\r\n\t\t\tvar updated = false;\r\n\t\t\tif (this.begin < this.duration) {\r\n\t\t\t\tvar newValue = this.calcValue(); // tween\r\n\r\n\t\t\t\tif (this.attribute('type').hasValue()) {\r\n\t\t\t\t\t// for transform, etc.\r\n\t\t\t\t\tvar type = this.attribute('type').value;\r\n\t\t\t\t\tnewValue = type + '(' + newValue + ')';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.getProperty().value = newValue;\r\n\t\t\t\tupdated = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn updated;\r\n\t\t}\r\n\r\n\t\tthis.from = this.attribute('from');\r\n\t\tthis.to = this.attribute('to');\r\n\t\tthis.values = this.attribute('values');\r\n\t\tif (this.values.hasValue()) this.values.value = this.values.value.split(';');\r\n\r\n\t\t// fraction of duration we've covered\r\n\t\tthis.progress = function() {\r\n\t\t\tvar ret = { progress: (this.duration - this.begin) / (this.maxDuration - this.begin) };\r\n\t\t\tif (this.values.hasValue()) {\r\n\t\t\t\tvar p = ret.progress * (this.values.value.length - 1);\r\n\t\t\t\tvar lb = Math.floor(p), ub = Math.ceil(p);\r\n\t\t\t\tret.from = new svg.Property('from', parseFloat(this.values.value[lb]));\r\n\t\t\t\tret.to = new svg.Property('to', parseFloat(this.values.value[ub]));\r\n\t\t\t\tret.progress = (p - lb) / (ub - lb);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tret.from = this.from;\r\n\t\t\t\tret.to = this.to;\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t}\r\n\t}\r\n\tsvg.Element.AnimateBase.prototype = new svg.Element.ElementBase;\r\n\r\n\t// animate element\r\n\tsvg.Element.animate = function(node) {\r\n\t\tthis.base = svg.Element.AnimateBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.calcValue = function() {\r\n\t\t\tvar p = this.progress();\r\n\r\n\t\t\t// tween value linearly\r\n\t\t\tvar newValue = p.from.numValue() + (p.to.numValue() - p.from.numValue()) * p.progress;\r\n\t\t\treturn newValue + this.initialUnits;\r\n\t\t};\r\n\t}\r\n\tsvg.Element.animate.prototype = new svg.Element.AnimateBase;\r\n\r\n\t// animate color element\r\n\tsvg.Element.animateColor = function(node) {\r\n\t\tthis.base = svg.Element.AnimateBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.calcValue = function() {\r\n\t\t\tvar p = this.progress();\r\n\t\t\tvar from = new RGBColor(p.from.value);\r\n\t\t\tvar to = new RGBColor(p.to.value);\r\n\r\n\t\t\tif (from.ok && to.ok) {\r\n\t\t\t\t// tween color linearly\r\n\t\t\t\tvar r = from.r + (to.r - from.r) * p.progress;\r\n\t\t\t\tvar g = from.g + (to.g - from.g) * p.progress;\r\n\t\t\t\tvar b = from.b + (to.b - from.b) * p.progress;\r\n\t\t\t\treturn 'rgb('+parseInt(r,10)+','+parseInt(g,10)+','+parseInt(b,10)+')';\r\n\t\t\t}\r\n\t\t\treturn this.attribute('from').value;\r\n\t\t};\r\n\t}\r\n\tsvg.Element.animateColor.prototype = new svg.Element.AnimateBase;\r\n\r\n\t// animate transform element\r\n\tsvg.Element.animateTransform = function(node) {\r\n\t\tthis.base = svg.Element.AnimateBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.calcValue = function() {\r\n\t\t\tvar p = this.progress();\r\n\r\n\t\t\t// tween value linearly\r\n\t\t\tvar from = svg.ToNumberArray(p.from.value);\r\n\t\t\tvar to = svg.ToNumberArray(p.to.value);\r\n\t\t\tvar newValue = '';\r\n\t\t\tfor (var i=0; i<from.length; i++) {\r\n\t\t\t\tnewValue += from[i] + (to[i] - from[i]) * p.progress + ' ';\r\n\t\t\t}\r\n\t\t\treturn newValue;\r\n\t\t};\r\n\t}\r\n\tsvg.Element.animateTransform.prototype = new svg.Element.animate;\r\n\r\n\t// font element\r\n\tsvg.Element.font = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.horizAdvX = this.attribute('horiz-adv-x').numValue();\r\n\r\n\t\tthis.isRTL = false;\r\n\t\tthis.isArabic = false;\r\n\t\tthis.fontFace = null;\r\n\t\tthis.missingGlyph = null;\r\n\t\tthis.glyphs = [];\r\n\t\tfor (var i=0; i<this.children.length; i++) {\r\n\t\t\tvar child = this.children[i];\r\n\t\t\tif (child.type == 'font-face') {\r\n\t\t\t\tthis.fontFace = child;\r\n\t\t\t\tif (child.style('font-family').hasValue()) {\r\n\t\t\t\t\tsvg.Definitions[child.style('font-family').value] = this;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (child.type == 'missing-glyph') this.missingGlyph = child;\r\n\t\t\telse if (child.type == 'glyph') {\r\n\t\t\t\tif (child.arabicForm != '') {\r\n\t\t\t\t\tthis.isRTL = true;\r\n\t\t\t\t\tthis.isArabic = true;\r\n\t\t\t\t\tif (typeof this.glyphs[child.unicode] == 'undefined') this.glyphs[child.unicode] = [];\r\n\t\t\t\t\tthis.glyphs[child.unicode][child.arabicForm] = child;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.glyphs[child.unicode] = child;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsvg.Element.font.prototype = new svg.Element.ElementBase;\r\n\r\n\t// font-face element\r\n\tsvg.Element.fontface = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.ascent = this.attribute('ascent').value;\r\n\t\tthis.descent = this.attribute('descent').value;\r\n\t\tthis.unitsPerEm = this.attribute('units-per-em').numValue();\r\n\t}\r\n\tsvg.Element.fontface.prototype = new svg.Element.ElementBase;\r\n\r\n\t// missing-glyph element\r\n\tsvg.Element.missingglyph = function(node) {\r\n\t\tthis.base = svg.Element.path;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.horizAdvX = 0;\r\n\t}\r\n\tsvg.Element.missingglyph.prototype = new svg.Element.path;\r\n\r\n\t// glyph element\r\n\tsvg.Element.glyph = function(node) {\r\n\t\tthis.base = svg.Element.path;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.horizAdvX = this.attribute('horiz-adv-x').numValue();\r\n\t\tthis.unicode = this.attribute('unicode').value;\r\n\t\tthis.arabicForm = this.attribute('arabic-form').value;\r\n\t}\r\n\tsvg.Element.glyph.prototype = new svg.Element.path;\r\n\r\n\t// text element\r\n\tsvg.Element.text = function(node) {\r\n\t\tthis.captureTextNodes = true;\r\n\t\tthis.base = svg.Element.RenderedElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.baseSetContext = this.setContext;\r\n\t\tthis.setContext = function(ctx) {\r\n\t\t\tthis.baseSetContext(ctx);\r\n\r\n\t\t\tvar textBaseline = this.style('dominant-baseline').toTextBaseline();\r\n\t\t\tif (textBaseline == null) textBaseline = this.style('alignment-baseline').toTextBaseline();\r\n\t\t\tif (textBaseline != null) ctx.textBaseline = textBaseline;\r\n\t\t}\r\n\r\n\t\tthis.getBoundingBox = function () {\r\n\t\t\tvar x = this.attribute('x').toPixels('x');\r\n\t\t\tvar y = this.attribute('y').toPixels('y');\r\n\t\t\tvar fontSize = this.parent.style('font-size').numValueOrDefault(svg.Font.Parse(svg.ctx.font).fontSize);\r\n\t\t\treturn new svg.BoundingBox(x, y - fontSize, x + Math.floor(fontSize * 2.0 / 3.0) * this.children[0].getText().length, y);\r\n\t\t}\r\n\r\n\t\tthis.renderChildren = function(ctx) {\r\n\t\t\tthis.x = this.attribute('x').toPixels('x');\r\n\t\t\tthis.y = this.attribute('y').toPixels('y');\r\n\t\t\tif (this.attribute('dx').hasValue()) this.x += this.attribute('dx').toPixels('x');\r\n\t\t\tif (this.attribute('dy').hasValue()) this.y += this.attribute('dy').toPixels('y');\r\n\t\t\tthis.x += this.getAnchorDelta(ctx, this, 0);\r\n\t\t\tfor (var i=0; i<this.children.length; i++) {\r\n\t\t\t\tthis.renderChild(ctx, this, this, i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.getAnchorDelta = function (ctx, parent, startI) {\r\n\t\t\tvar textAnchor = this.style('text-anchor').valueOrDefault('start');\r\n\t\t\tif (textAnchor != 'start') {\r\n\t\t\t\tvar width = 0;\r\n\t\t\t\tfor (var i=startI; i<parent.children.length; i++) {\r\n\t\t\t\t\tvar child = parent.children[i];\r\n\t\t\t\t\tif (i > startI && child.attribute('x').hasValue()) break; // new group\r\n\t\t\t\t\twidth += child.measureTextRecursive(ctx);\r\n\t\t\t\t}\r\n\t\t\t\treturn -1 * (textAnchor == 'end' ? width : width / 2.0);\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tthis.renderChild = function(ctx, textParent, parent, i) {\r\n\t\t\tvar child = parent.children[i];\r\n\t\t\tif (child.attribute('x').hasValue()) {\r\n\t\t\t\tchild.x = child.attribute('x').toPixels('x') + textParent.getAnchorDelta(ctx, parent, i);\r\n\t\t\t\tif (child.attribute('dx').hasValue()) child.x += child.attribute('dx').toPixels('x');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (child.attribute('dx').hasValue()) textParent.x += child.attribute('dx').toPixels('x');\r\n\t\t\t\tchild.x = textParent.x;\r\n\t\t\t}\r\n\t\t\ttextParent.x = child.x + child.measureText(ctx);\r\n\r\n\t\t\tif (child.attribute('y').hasValue()) {\r\n\t\t\t\tchild.y = child.attribute('y').toPixels('y');\r\n\t\t\t\tif (child.attribute('dy').hasValue()) child.y += child.attribute('dy').toPixels('y');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (child.attribute('dy').hasValue()) textParent.y += child.attribute('dy').toPixels('y');\r\n\t\t\t\tchild.y = textParent.y;\r\n\t\t\t}\r\n\t\t\ttextParent.y = child.y;\r\n\r\n\t\t\tchild.render(ctx);\r\n\r\n\t\t\tfor (var i=0; i<child.children.length; i++) {\r\n\t\t\t\ttextParent.renderChild(ctx, textParent, child, i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsvg.Element.text.prototype = new svg.Element.RenderedElementBase;\r\n\r\n\t// text base\r\n\tsvg.Element.TextElementBase = function(node) {\r\n\t\tthis.base = svg.Element.RenderedElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.getGlyph = function(font, text, i) {\r\n\t\t\tvar c = text[i];\r\n\t\t\tvar glyph = null;\r\n\t\t\tif (font.isArabic) {\r\n\t\t\t\tvar arabicForm = 'isolated';\r\n\t\t\t\tif ((i==0 || text[i-1]==' ') && i<text.length-2 && text[i+1]!=' ') arabicForm = 'terminal';\r\n\t\t\t\tif (i>0 && text[i-1]!=' ' && i<text.length-2 && text[i+1]!=' ') arabicForm = 'medial';\r\n\t\t\t\tif (i>0 && text[i-1]!=' ' && (i == text.length-1 || text[i+1]==' ')) arabicForm = 'initial';\r\n\t\t\t\tif (typeof font.glyphs[c] != 'undefined') {\r\n\t\t\t\t\tglyph = font.glyphs[c][arabicForm];\r\n\t\t\t\t\tif (glyph == null && font.glyphs[c].type == 'glyph') glyph = font.glyphs[c];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tglyph = font.glyphs[c];\r\n\t\t\t}\r\n\t\t\tif (glyph == null) glyph = font.missingGlyph;\r\n\t\t\treturn glyph;\r\n\t\t}\r\n\r\n\t\tthis.renderChildren = function(ctx) {\r\n\t\t\tvar customFont = this.parent.style('font-family').getDefinition();\r\n\t\t\tif (customFont != null) {\r\n\t\t\t\tvar fontSize = this.parent.style('font-size').numValueOrDefault(svg.Font.Parse(svg.ctx.font).fontSize);\r\n\t\t\t\tvar fontStyle = this.parent.style('font-style').valueOrDefault(svg.Font.Parse(svg.ctx.font).fontStyle);\r\n\t\t\t\tvar text = this.getText();\r\n\t\t\t\tif (customFont.isRTL) text = text.split(\"\").reverse().join(\"\");\r\n\r\n\t\t\t\tvar dx = svg.ToNumberArray(this.parent.attribute('dx').value);\r\n\t\t\t\tfor (var i=0; i<text.length; i++) {\r\n\t\t\t\t\tvar glyph = this.getGlyph(customFont, text, i);\r\n\t\t\t\t\tvar scale = fontSize / customFont.fontFace.unitsPerEm;\r\n\t\t\t\t\tctx.translate(this.x, this.y);\r\n\t\t\t\t\tctx.scale(scale, -scale);\r\n\t\t\t\t\tvar lw = ctx.lineWidth;\r\n\t\t\t\t\tctx.lineWidth = ctx.lineWidth * customFont.fontFace.unitsPerEm / fontSize;\r\n\t\t\t\t\tif (fontStyle == 'italic') ctx.transform(1, 0, .4, 1, 0, 0);\r\n\t\t\t\t\tglyph.render(ctx);\r\n\t\t\t\t\tif (fontStyle == 'italic') ctx.transform(1, 0, -.4, 1, 0, 0);\r\n\t\t\t\t\tctx.lineWidth = lw;\r\n\t\t\t\t\tctx.scale(1/scale, -1/scale);\r\n\t\t\t\t\tctx.translate(-this.x, -this.y);\r\n\r\n\t\t\t\t\tthis.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / customFont.fontFace.unitsPerEm;\r\n\t\t\t\t\tif (typeof dx[i] != 'undefined' && !isNaN(dx[i])) {\r\n\t\t\t\t\t\tthis.x += dx[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (ctx.fillStyle != '') ctx.fillText(svg.compressSpaces(this.getText()), this.x, this.y);\r\n\t\t\tif (ctx.strokeStyle != '') ctx.strokeText(svg.compressSpaces(this.getText()), this.x, this.y);\r\n\t\t}\r\n\r\n\t\tthis.getText = function() {\r\n\t\t\t// OVERRIDE ME\r\n\t\t}\r\n\r\n\t\tthis.measureTextRecursive = function(ctx) {\r\n\t\t\tvar width = this.measureText(ctx);\r\n\t\t\tfor (var i=0; i<this.children.length; i++) {\r\n\t\t\t\twidth += this.children[i].measureTextRecursive(ctx);\r\n\t\t\t}\r\n\t\t\treturn width;\r\n\t\t}\r\n\r\n\t\tthis.measureText = function(ctx) {\r\n\t\t\tvar customFont = this.parent.style('font-family').getDefinition();\r\n\t\t\tif (customFont != null) {\r\n\t\t\t\tvar fontSize = this.parent.style('font-size').numValueOrDefault(svg.Font.Parse(svg.ctx.font).fontSize);\r\n\t\t\t\tvar measure = 0;\r\n\t\t\t\tvar text = this.getText();\r\n\t\t\t\tif (customFont.isRTL) text = text.split(\"\").reverse().join(\"\");\r\n\t\t\t\tvar dx = svg.ToNumberArray(this.parent.attribute('dx').value);\r\n\t\t\t\tfor (var i=0; i<text.length; i++) {\r\n\t\t\t\t\tvar glyph = this.getGlyph(customFont, text, i);\r\n\t\t\t\t\tmeasure += (glyph.horizAdvX || customFont.horizAdvX) * fontSize / customFont.fontFace.unitsPerEm;\r\n\t\t\t\t\tif (typeof dx[i] != 'undefined' && !isNaN(dx[i])) {\r\n\t\t\t\t\t\tmeasure += dx[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn measure;\r\n\t\t\t}\r\n\r\n\t\t\tvar textToMeasure = svg.compressSpaces(this.getText());\r\n\t\t\tif (!ctx.measureText) return textToMeasure.length * 10;\r\n\r\n\t\t\tctx.save();\r\n\t\t\tthis.setContext(ctx);\r\n\t\t\tvar width = ctx.measureText(textToMeasure).width;\r\n\t\t\tctx.restore();\r\n\t\t\treturn width;\r\n\t\t}\r\n\t}\r\n\tsvg.Element.TextElementBase.prototype = new svg.Element.RenderedElementBase;\r\n\r\n\t// tspan\r\n\tsvg.Element.tspan = function(node) {\r\n\t\tthis.captureTextNodes = true;\r\n\t\tthis.base = svg.Element.TextElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.text = svg.compressSpaces(node.value || node.text || node.textContent || '');\r\n\t\tthis.getText = function() {\r\n\t\t\t// if this node has children, then they own the text\r\n\t\t\tif (this.children.length > 0) { return ''; }\r\n\t\t\treturn this.text;\r\n\t\t}\r\n\t}\r\n\tsvg.Element.tspan.prototype = new svg.Element.TextElementBase;\r\n\r\n\t// tref\r\n\tsvg.Element.tref = function(node) {\r\n\t\tthis.base = svg.Element.TextElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.getText = function() {\r\n\t\t\tvar element = this.getHrefAttribute().getDefinition();\r\n\t\t\tif (element != null) return element.children[0].getText();\r\n\t\t}\r\n\t}\r\n\tsvg.Element.tref.prototype = new svg.Element.TextElementBase;\r\n\r\n\t// a element\r\n\tsvg.Element.a = function(node) {\r\n\t\tthis.base = svg.Element.TextElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.hasText = node.childNodes.length > 0;\r\n\t\tfor (var i=0; i<node.childNodes.length; i++) {\r\n\t\t\tif (node.childNodes[i].nodeType != 3) this.hasText = false;\r\n\t\t}\r\n\r\n\t\t// this might contain text\r\n\t\tthis.text = this.hasText ? node.childNodes[0].value : '';\r\n\t\tthis.getText = function() {\r\n\t\t\treturn this.text;\r\n\t\t}\r\n\r\n\t\tthis.baseRenderChildren = this.renderChildren;\r\n\t\tthis.renderChildren = function(ctx) {\r\n\t\t\tif (this.hasText) {\r\n\t\t\t\t// render as text element\r\n\t\t\t\tthis.baseRenderChildren(ctx);\r\n\t\t\t\tvar fontSize = new svg.Property('fontSize', svg.Font.Parse(svg.ctx.font).fontSize);\r\n\t\t\t\tsvg.Mouse.checkBoundingBox(this, new svg.BoundingBox(this.x, this.y - fontSize.toPixels('y'), this.x + this.measureText(ctx), this.y));\r\n\t\t\t}\r\n\t\t\telse if (this.children.length > 0) {\r\n\t\t\t\t// render as temporary group\r\n\t\t\t\tvar g = new svg.Element.g();\r\n\t\t\t\tg.children = this.children;\r\n\t\t\t\tg.parent = this;\r\n\t\t\t\tg.render(ctx);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.onclick = function() {\r\n\t\t\twindow.open(this.getHrefAttribute().value);\r\n\t\t}\r\n\r\n\t\tthis.onmousemove = function() {\r\n\t\t\tsvg.ctx.canvas.style.cursor = 'pointer';\r\n\t\t}\r\n\t}\r\n\tsvg.Element.a.prototype = new svg.Element.TextElementBase;\r\n\r\n\t// image element\r\n\tsvg.Element.image = function(node) {\r\n\t\tthis.base = svg.Element.RenderedElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tvar href = this.getHrefAttribute().value;\r\n\t\tif (href == '') { return; }\r\n\t\tvar isSvg = href.match(/\\.svg$/)\r\n\r\n\t\tsvg.Images.push(this);\r\n\t\tthis.loaded = false;\r\n\t\tif (!isSvg) {\r\n\t\t\tthis.img = document.createElement('img');\r\n\t\t\tif (svg.opts['useCORS'] == true) { this.img.crossOrigin = 'Anonymous'; }\r\n\t\t\tvar self = this;\r\n\t\t\tthis.img.onload = function() { self.loaded = true; }\r\n\t\t\tthis.img.onerror = function() { svg.log('ERROR: image \"' + href + '\" not found'); self.loaded = true; }\r\n\t\t\tthis.img.src = href;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.img = svg.ajax(href);\r\n\t\t\tthis.loaded = true;\r\n\t\t}\r\n\r\n\t\tthis.renderChildren = function(ctx) {\r\n\t\t\tvar x = this.attribute('x').toPixels('x');\r\n\t\t\tvar y = this.attribute('y').toPixels('y');\r\n\r\n\t\t\tvar width = this.attribute('width').toPixels('x');\r\n\t\t\tvar height = this.attribute('height').toPixels('y');\r\n\t\t\tif (width == 0 || height == 0) return;\r\n\r\n\t\t\tctx.save();\r\n\t\t\tif (isSvg) {\r\n\t\t\t\tctx.drawSvg(this.img, x, y, width, height);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tctx.translate(x, y);\r\n\t\t\t\tsvg.AspectRatio(ctx,\r\n\t\t\t\t\t\t\t\tthis.attribute('preserveAspectRatio').value,\r\n\t\t\t\t\t\t\t\twidth,\r\n\t\t\t\t\t\t\t\tthis.img.width,\r\n\t\t\t\t\t\t\t\theight,\r\n\t\t\t\t\t\t\t\tthis.img.height,\r\n\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t0);\r\n\t\t\t\tctx.drawImage(this.img, 0, 0);\r\n\t\t\t}\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\r\n\t\tthis.getBoundingBox = function() {\r\n\t\t\tvar x = this.attribute('x').toPixels('x');\r\n\t\t\tvar y = this.attribute('y').toPixels('y');\r\n\t\t\tvar width = this.attribute('width').toPixels('x');\r\n\t\t\tvar height = this.attribute('height').toPixels('y');\r\n\t\t\treturn new svg.BoundingBox(x, y, x + width, y + height);\r\n\t\t}\r\n\t}\r\n\tsvg.Element.image.prototype = new svg.Element.RenderedElementBase;\r\n\r\n\t// group element\r\n\tsvg.Element.g = function(node) {\r\n\t\tthis.base = svg.Element.RenderedElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.getBoundingBox = function() {\r\n\t\t\tvar bb = new svg.BoundingBox();\r\n\t\t\tfor (var i=0; i<this.children.length; i++) {\r\n\t\t\t\tbb.addBoundingBox(this.children[i].getBoundingBox());\r\n\t\t\t}\r\n\t\t\treturn bb;\r\n\t\t};\r\n\t}\r\n\tsvg.Element.g.prototype = new svg.Element.RenderedElementBase;\r\n\r\n\t// symbol element\r\n\tsvg.Element.symbol = function(node) {\r\n\t\tthis.base = svg.Element.RenderedElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.render = function(ctx) {\r\n\t\t\t// NO RENDER\r\n\t\t};\r\n\t}\r\n\tsvg.Element.symbol.prototype = new svg.Element.RenderedElementBase;\r\n\r\n\t// style element\r\n\tsvg.Element.style = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\t// text, or spaces then CDATA\r\n\t\tvar css = ''\r\n\t\tfor (var i=0; i<node.childNodes.length; i++) {\r\n\t\t  css += node.childNodes[i].data;\r\n\t\t}\r\n\t\tcss = css.replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*\\/]|[\\r\\n])))*\\*+\\/)|(^[\\s]*\\/\\/.*)/gm, ''); // remove comments\r\n\t\tcss = svg.compressSpaces(css); // replace whitespace\r\n\t\tvar cssDefs = css.split('}');\r\n\t\tfor (var i=0; i<cssDefs.length; i++) {\r\n\t\t\tif (svg.trim(cssDefs[i]) != '') {\r\n\t\t\t\tvar cssDef = cssDefs[i].split('{');\r\n\t\t\t\tvar cssClasses = cssDef[0].split(',');\r\n\t\t\t\tvar cssProps = cssDef[1].split(';');\r\n\t\t\t\tfor (var j=0; j<cssClasses.length; j++) {\r\n\t\t\t\t\tvar cssClass = svg.trim(cssClasses[j]);\r\n\t\t\t\t\tif (cssClass != '') {\r\n\t\t\t\t\t\tvar props = svg.Styles[cssClass] || {};\r\n\t\t\t\t\t\tfor (var k=0; k<cssProps.length; k++) {\r\n\t\t\t\t\t\t\tvar prop = cssProps[k].indexOf(':');\r\n\t\t\t\t\t\t\tvar name = cssProps[k].substr(0, prop);\r\n\t\t\t\t\t\t\tvar value = cssProps[k].substr(prop + 1, cssProps[k].length - prop);\r\n\t\t\t\t\t\t\tif (name != null && value != null) {\r\n\t\t\t\t\t\t\t\tprops[svg.trim(name)] = new svg.Property(svg.trim(name), svg.trim(value));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsvg.Styles[cssClass] = props;\r\n\t\t\t\t\t\tsvg.StylesSpecificity[cssClass] = getSelectorSpecificity(cssClass);\r\n\t\t\t\t\t\tif (cssClass == '@font-face') {\r\n\t\t\t\t\t\t\tvar fontFamily = props['font-family'].value.replace(/\"/g,'');\r\n\t\t\t\t\t\t\tvar srcs = props['src'].value.split(',');\r\n\t\t\t\t\t\t\tfor (var s=0; s<srcs.length; s++) {\r\n\t\t\t\t\t\t\t\tif (srcs[s].indexOf('format(\"svg\")') > 0) {\r\n\t\t\t\t\t\t\t\t\tvar urlStart = srcs[s].indexOf('url');\r\n\t\t\t\t\t\t\t\t\tvar urlEnd = srcs[s].indexOf(')', urlStart);\r\n\t\t\t\t\t\t\t\t\tvar url = srcs[s].substr(urlStart + 5, urlEnd - urlStart - 6);\r\n\t\t\t\t\t\t\t\t\tvar doc = svg.parseXml(svg.ajax(url));\r\n\t\t\t\t\t\t\t\t\tvar fonts = doc.getElementsByTagName('font');\r\n\t\t\t\t\t\t\t\t\tfor (var f=0; f<fonts.length; f++) {\r\n\t\t\t\t\t\t\t\t\t\tvar font = svg.CreateElement(fonts[f]);\r\n\t\t\t\t\t\t\t\t\t\tsvg.Definitions[fontFamily] = font;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsvg.Element.style.prototype = new svg.Element.ElementBase;\r\n\r\n\t// use element\r\n\tsvg.Element.use = function(node) {\r\n\t\tthis.base = svg.Element.RenderedElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.baseSetContext = this.setContext;\r\n\t\tthis.setContext = function(ctx) {\r\n\t\t\tthis.baseSetContext(ctx);\r\n\t\t\tif (this.attribute('x').hasValue()) ctx.translate(this.attribute('x').toPixels('x'), 0);\r\n\t\t\tif (this.attribute('y').hasValue()) ctx.translate(0, this.attribute('y').toPixels('y'));\r\n\t\t}\r\n\r\n\t\tvar element = this.getHrefAttribute().getDefinition();\r\n\r\n\t\tthis.path = function(ctx) {\r\n\t\t\tif (element != null) element.path(ctx);\r\n\t\t}\r\n\r\n\t\tthis.getBoundingBox = function() {\r\n\t\t\tif (element != null) return element.getBoundingBox();\r\n\t\t}\r\n\r\n\t\tthis.renderChildren = function(ctx) {\r\n\t\t\tif (element != null) {\r\n\t\t\t\tvar tempSvg = element;\r\n\t\t\t\tif (element.type == 'symbol') {\r\n\t\t\t\t\t// render me using a temporary svg element in symbol cases (http://www.w3.org/TR/SVG/struct.html#UseElement)\r\n\t\t\t\t\ttempSvg = new svg.Element.svg();\r\n\t\t\t\t\ttempSvg.type = 'svg';\r\n\t\t\t\t\ttempSvg.attributes['viewBox'] = new svg.Property('viewBox', element.attribute('viewBox').value);\r\n\t\t\t\t\ttempSvg.attributes['preserveAspectRatio'] = new svg.Property('preserveAspectRatio', element.attribute('preserveAspectRatio').value);\r\n\t\t\t\t\ttempSvg.attributes['overflow'] = new svg.Property('overflow', element.attribute('overflow').value);\r\n\t\t\t\t\ttempSvg.children = element.children;\r\n\t\t\t\t}\r\n\t\t\t\tif (tempSvg.type == 'svg') {\r\n\t\t\t\t\t// if symbol or svg, inherit width/height from me\r\n\t\t\t\t\tif (this.attribute('width').hasValue()) tempSvg.attributes['width'] = new svg.Property('width', this.attribute('width').value);\r\n\t\t\t\t\tif (this.attribute('height').hasValue()) tempSvg.attributes['height'] = new svg.Property('height', this.attribute('height').value);\r\n\t\t\t\t}\r\n\t\t\t\tvar oldParent = tempSvg.parent;\r\n\t\t\t\ttempSvg.parent = null;\r\n\t\t\t\ttempSvg.render(ctx);\r\n\t\t\t\ttempSvg.parent = oldParent;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsvg.Element.use.prototype = new svg.Element.RenderedElementBase;\r\n\r\n\t// mask element\r\n\tsvg.Element.mask = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.apply = function(ctx, element) {\r\n\t\t\t// render as temp svg\r\n\t\t\tvar x = this.attribute('x').toPixels('x');\r\n\t\t\tvar y = this.attribute('y').toPixels('y');\r\n\t\t\tvar width = this.attribute('width').toPixels('x');\r\n\t\t\tvar height = this.attribute('height').toPixels('y');\r\n\r\n\t\t\tif (width == 0 && height == 0) {\r\n\t\t\t\tvar bb = new svg.BoundingBox();\r\n\t\t\t\tfor (var i=0; i<this.children.length; i++) {\r\n\t\t\t\t\tbb.addBoundingBox(this.children[i].getBoundingBox());\r\n\t\t\t\t}\r\n\t\t\t\tvar x = Math.floor(bb.x1);\r\n\t\t\t\tvar y = Math.floor(bb.y1);\r\n\t\t\t\tvar width = Math.floor(bb.width());\r\n\t\t\t\tvar\theight = Math.floor(bb.height());\r\n\t\t\t}\r\n\r\n\t\t\t// temporarily remove mask to avoid recursion\r\n\t\t\tvar mask = element.attribute('mask').value;\r\n\t\t\telement.attribute('mask').value = '';\r\n\r\n\t\t\t\tvar cMask = document.createElement('canvas');\r\n\t\t\t\tcMask.width = x + width;\r\n\t\t\t\tcMask.height = y + height;\r\n\t\t\t\tvar maskCtx = cMask.getContext('2d');\r\n\t\t\t\tthis.renderChildren(maskCtx);\r\n\r\n\t\t\t\tvar c = document.createElement('canvas');\r\n\t\t\t\tc.width = x + width;\r\n\t\t\t\tc.height = y + height;\r\n\t\t\t\tvar tempCtx = c.getContext('2d');\r\n\t\t\t\telement.render(tempCtx);\r\n\t\t\t\ttempCtx.globalCompositeOperation = 'destination-in';\r\n\t\t\t\ttempCtx.fillStyle = maskCtx.createPattern(cMask, 'no-repeat');\r\n\t\t\t\ttempCtx.fillRect(0, 0, x + width, y + height);\r\n\r\n\t\t\t\tctx.fillStyle = tempCtx.createPattern(c, 'no-repeat');\r\n\t\t\t\tctx.fillRect(0, 0, x + width, y + height);\r\n\r\n\t\t\t// reassign mask\r\n\t\t\telement.attribute('mask').value = mask;\r\n\t\t}\r\n\r\n\t\tthis.render = function(ctx) {\r\n\t\t\t// NO RENDER\r\n\t\t}\r\n\t}\r\n\tsvg.Element.mask.prototype = new svg.Element.ElementBase;\r\n\r\n\t// clip element\r\n\tsvg.Element.clipPath = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.apply = function(ctx) {\r\n\t\t\tvar oldBeginPath = CanvasRenderingContext2D.prototype.beginPath;\r\n\t\t\tCanvasRenderingContext2D.prototype.beginPath = function () { };\r\n\r\n\t\t\tvar oldClosePath = CanvasRenderingContext2D.prototype.closePath;\r\n\t\t\tCanvasRenderingContext2D.prototype.closePath = function () { };\r\n\r\n\t\t\toldBeginPath.call(ctx);\r\n\t\t\tfor (var i=0; i<this.children.length; i++) {\r\n\t\t\t\tvar child = this.children[i];\r\n\t\t\t\tif (typeof child.path != 'undefined') {\r\n\t\t\t\t\tvar transform = null;\r\n\t\t\t\t\tif (child.style('transform', false, true).hasValue()) {\r\n\t\t\t\t\t\ttransform = new svg.Transform(child.style('transform', false, true).value);\r\n\t\t\t\t\t\ttransform.apply(ctx);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tchild.path(ctx);\r\n\t\t\t\t\tCanvasRenderingContext2D.prototype.closePath = oldClosePath;\r\n\t\t\t\t\tif (transform) { transform.unapply(ctx); }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\toldClosePath.call(ctx);\r\n\t\t\tctx.clip();\r\n\r\n\t\t\tCanvasRenderingContext2D.prototype.beginPath = oldBeginPath;\r\n\t\t\tCanvasRenderingContext2D.prototype.closePath = oldClosePath;\r\n\t\t}\r\n\r\n\t\tthis.render = function(ctx) {\r\n\t\t\t// NO RENDER\r\n\t\t}\r\n\t}\r\n\tsvg.Element.clipPath.prototype = new svg.Element.ElementBase;\r\n\r\n\t// filters\r\n\tsvg.Element.filter = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.apply = function(ctx, element) {\r\n\t\t\t// render as temp svg\r\n\t\t\tvar bb = element.getBoundingBox();\r\n\t\t\tvar x = Math.floor(bb.x1);\r\n\t\t\tvar y = Math.floor(bb.y1);\r\n\t\t\tvar width = Math.floor(bb.width());\r\n\t\t\tvar\theight = Math.floor(bb.height());\r\n\r\n\t\t\t// temporarily remove filter to avoid recursion\r\n\t\t\tvar filter = element.style('filter').value;\r\n\t\t\telement.style('filter').value = '';\r\n\r\n\t\t\tvar px = 0, py = 0;\r\n\t\t\tfor (var i=0; i<this.children.length; i++) {\r\n\t\t\t\tvar efd = this.children[i].extraFilterDistance || 0;\r\n\t\t\t\tpx = Math.max(px, efd);\r\n\t\t\t\tpy = Math.max(py, efd);\r\n\t\t\t}\r\n\r\n\t\t\tvar c = document.createElement('canvas');\r\n\t\t\tc.width = width + 2*px;\r\n\t\t\tc.height = height + 2*py;\r\n\t\t\tvar tempCtx = c.getContext('2d');\r\n\t\t\ttempCtx.translate(-x + px, -y + py);\r\n\t\t\telement.render(tempCtx);\r\n\r\n\t\t\t// apply filters\r\n\t\t\tfor (var i=0; i<this.children.length; i++) {\r\n\t\t\t\tif (typeof this.children[i].apply == 'function') {\r\n\t\t\t\t\tthis.children[i].apply(tempCtx, 0, 0, width + 2*px, height + 2*py);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// render on me\r\n\t\t\tctx.drawImage(c, 0, 0, width + 2*px, height + 2*py, x - px, y - py, width + 2*px, height + 2*py);\r\n\r\n\t\t\t// reassign filter\r\n\t\t\telement.style('filter', true).value = filter;\r\n\t\t}\r\n\r\n\t\tthis.render = function(ctx) {\r\n\t\t\t// NO RENDER\r\n\t\t}\r\n\t}\r\n\tsvg.Element.filter.prototype = new svg.Element.ElementBase;\r\n\r\n\tsvg.Element.feMorphology = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.apply = function(ctx, x, y, width, height) {\r\n\t\t\t// TODO: implement\r\n\t\t}\r\n\t}\r\n\tsvg.Element.feMorphology.prototype = new svg.Element.ElementBase;\r\n\r\n\tsvg.Element.feComposite = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.apply = function(ctx, x, y, width, height) {\r\n\t\t\t// TODO: implement\r\n\t\t}\r\n\t}\r\n\tsvg.Element.feComposite.prototype = new svg.Element.ElementBase;\r\n\r\n\tsvg.Element.feColorMatrix = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tvar matrix = svg.ToNumberArray(this.attribute('values').value);\r\n\t\tswitch (this.attribute('type').valueOrDefault('matrix')) { // http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement\r\n\t\t\tcase 'saturate':\r\n\t\t\t\tvar s = matrix[0];\r\n\t\t\t\tmatrix = [0.213+0.787*s,0.715-0.715*s,0.072-0.072*s,0,0,\r\n\t\t\t\t\t\t  0.213-0.213*s,0.715+0.285*s,0.072-0.072*s,0,0,\r\n\t\t\t\t\t\t  0.213-0.213*s,0.715-0.715*s,0.072+0.928*s,0,0,\r\n\t\t\t\t\t\t  0,0,0,1,0,\r\n\t\t\t\t\t\t  0,0,0,0,1];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'hueRotate':\r\n\t\t\t\tvar a = matrix[0] * Math.PI / 180.0;\r\n\t\t\t\tvar c = function (m1,m2,m3) { return m1 + Math.cos(a)*m2 + Math.sin(a)*m3; };\r\n\t\t\t\tmatrix = [c(0.213,0.787,-0.213),c(0.715,-0.715,-0.715),c(0.072,-0.072,0.928),0,0,\r\n\t\t\t\t\t\t  c(0.213,-0.213,0.143),c(0.715,0.285,0.140),c(0.072,-0.072,-0.283),0,0,\r\n\t\t\t\t\t\t  c(0.213,-0.213,-0.787),c(0.715,-0.715,0.715),c(0.072,0.928,0.072),0,0,\r\n\t\t\t\t\t\t  0,0,0,1,0,\r\n\t\t\t\t\t\t  0,0,0,0,1];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'luminanceToAlpha':\r\n\t\t\t\tmatrix = [0,0,0,0,0,\r\n\t\t\t\t\t\t  0,0,0,0,0,\r\n\t\t\t\t\t\t  0,0,0,0,0,\r\n\t\t\t\t\t\t  0.2125,0.7154,0.0721,0,0,\r\n\t\t\t\t\t\t  0,0,0,0,1];\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tfunction imGet(img, x, y, width, height, rgba) {\r\n\t\t\treturn img[y*width*4 + x*4 + rgba];\r\n\t\t}\r\n\r\n\t\tfunction imSet(img, x, y, width, height, rgba, val) {\r\n\t\t\timg[y*width*4 + x*4 + rgba] = val;\r\n\t\t}\r\n\r\n\t\tfunction m(i, v) {\r\n\t\t\tvar mi = matrix[i];\r\n\t\t\treturn mi * (mi < 0 ? v - 255 : v);\r\n\t\t}\r\n\r\n\t\tthis.apply = function(ctx, x, y, width, height) {\r\n\t\t\t// assuming x==0 && y==0 for now\r\n\t\t\tvar srcData = ctx.getImageData(0, 0, width, height);\r\n\t\t\tfor (var y = 0; y < height; y++) {\r\n\t\t\t\tfor (var x = 0; x < width; x++) {\r\n\t\t\t\t\tvar r = imGet(srcData.data, x, y, width, height, 0);\r\n\t\t\t\t\tvar g = imGet(srcData.data, x, y, width, height, 1);\r\n\t\t\t\t\tvar b = imGet(srcData.data, x, y, width, height, 2);\r\n\t\t\t\t\tvar a = imGet(srcData.data, x, y, width, height, 3);\r\n\t\t\t\t\timSet(srcData.data, x, y, width, height, 0, m(0,r)+m(1,g)+m(2,b)+m(3,a)+m(4,1));\r\n\t\t\t\t\timSet(srcData.data, x, y, width, height, 1, m(5,r)+m(6,g)+m(7,b)+m(8,a)+m(9,1));\r\n\t\t\t\t\timSet(srcData.data, x, y, width, height, 2, m(10,r)+m(11,g)+m(12,b)+m(13,a)+m(14,1));\r\n\t\t\t\t\timSet(srcData.data, x, y, width, height, 3, m(15,r)+m(16,g)+m(17,b)+m(18,a)+m(19,1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.clearRect(0, 0, width, height);\r\n\t\t\tctx.putImageData(srcData, 0, 0);\r\n\t\t}\r\n\t}\r\n\tsvg.Element.feColorMatrix.prototype = new svg.Element.ElementBase;\r\n\r\n\tsvg.Element.feGaussianBlur = function(node) {\r\n\t\tthis.base = svg.Element.ElementBase;\r\n\t\tthis.base(node);\r\n\r\n\t\tthis.blurRadius = Math.floor(this.attribute('stdDeviation').numValue());\r\n\t\tthis.extraFilterDistance = this.blurRadius;\r\n\r\n\t\tthis.apply = function(ctx, x, y, width, height) {\r\n\t\t\tif (typeof stackblur.canvasRGBA == 'undefined') {\r\n\t\t\t\tsvg.log('ERROR: StackBlur.js must be included for blur to work');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// StackBlur requires canvas be on document\r\n\t\t\tctx.canvas.id = svg.UniqueId();\r\n\t\t\tctx.canvas.style.display = 'none';\r\n\t\t\tdocument.body.appendChild(ctx.canvas);\r\n\t\t\tstackblur.canvasRGBA(ctx.canvas.id, x, y, width, height, this.blurRadius);\r\n\t\t\tdocument.body.removeChild(ctx.canvas);\r\n\t\t}\r\n\t}\r\n\tsvg.Element.feGaussianBlur.prototype = new svg.Element.ElementBase;\r\n\r\n\t// title element, do nothing\r\n\tsvg.Element.title = function(node) {\r\n\t}\r\n\tsvg.Element.title.prototype = new svg.Element.ElementBase;\r\n\r\n\t// desc element, do nothing\r\n\tsvg.Element.desc = function(node) {\r\n\t}\r\n\tsvg.Element.desc.prototype = new svg.Element.ElementBase;\r\n\r\n\tsvg.Element.MISSING = function(node) {\r\n\t\tsvg.log('ERROR: Element \\'' + node.nodeName + '\\' not yet implemented.');\r\n\t}\r\n\tsvg.Element.MISSING.prototype = new svg.Element.ElementBase;\r\n\r\n\t// element factory\r\n\tsvg.CreateElement = function(node) {\r\n\t\tvar className = node.nodeName.replace(/^[^:]+:/,''); // remove namespace\r\n\t\tclassName = className.replace(/\\-/g,''); // remove dashes\r\n\t\tvar e = null;\r\n\t\tif (typeof svg.Element[className] != 'undefined') {\r\n\t\t\te = new svg.Element[className](node);\r\n\t\t}\r\n\t\telse {\r\n\t\t\te = new svg.Element.MISSING(node);\r\n\t\t}\r\n\r\n\t\te.type = node.nodeName;\r\n\t\treturn e;\r\n\t}\r\n\r\n\t// load from url\r\n\tsvg.load = function(ctx, url) {\r\n\t\tsvg.loadXml(ctx, svg.ajax(url));\r\n\t}\r\n\r\n\t// load from xml\r\n\tsvg.loadXml = function(ctx, xml) {\r\n\t\tsvg.loadXmlDoc(ctx, svg.parseXml(xml));\r\n\t}\r\n\r\n\tsvg.loadXmlDoc = function(ctx, dom) {\r\n\t\tsvg.init(ctx);\r\n\r\n\t\tvar mapXY = function(p) {\r\n\t\t\tvar e = ctx.canvas;\r\n\t\t\twhile (e) {\r\n\t\t\t\tp.x -= e.offsetLeft;\r\n\t\t\t\tp.y -= e.offsetTop;\r\n\t\t\t\te = e.offsetParent;\r\n\t\t\t}\r\n\t\t\tif (window.scrollX) p.x += window.scrollX;\r\n\t\t\tif (window.scrollY) p.y += window.scrollY;\r\n\t\t\treturn p;\r\n\t\t}\r\n\r\n\t\t// bind mouse\r\n\t\tif (svg.opts['ignoreMouse'] != true) {\r\n\t\t\tctx.canvas.onclick = function(e) {\r\n\t\t\t\tvar p = mapXY(new svg.Point(e != null ? e.clientX : event.clientX, e != null ? e.clientY : event.clientY));\r\n\t\t\t\tsvg.Mouse.onclick(p.x, p.y);\r\n\t\t\t};\r\n\t\t\tctx.canvas.onmousemove = function(e) {\r\n\t\t\t\tvar p = mapXY(new svg.Point(e != null ? e.clientX : event.clientX, e != null ? e.clientY : event.clientY));\r\n\t\t\t\tsvg.Mouse.onmousemove(p.x, p.y);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar e = svg.CreateElement(dom.documentElement);\r\n\t\te.root = true;\r\n\t\te.addStylesFromStyleDefinition();\r\n\r\n\t\t// render loop\r\n\t\tvar isFirstRender = true;\r\n\t\tvar draw = function() {\r\n\t\t\tsvg.ViewPort.Clear();\r\n\t\t\tif (ctx.canvas.parentNode) svg.ViewPort.SetCurrent(ctx.canvas.parentNode.clientWidth, ctx.canvas.parentNode.clientHeight);\r\n\r\n\t\t\tif (svg.opts['ignoreDimensions'] != true) {\r\n\t\t\t\t// set canvas size\r\n\t\t\t\tif (e.style('width').hasValue()) {\r\n\t\t\t\t\tctx.canvas.width = e.style('width').toPixels('x');\r\n\t\t\t\t\tctx.canvas.style.width = ctx.canvas.width + 'px';\r\n\t\t\t\t}\r\n\t\t\t\tif (e.style('height').hasValue()) {\r\n\t\t\t\t\tctx.canvas.height = e.style('height').toPixels('y');\r\n\t\t\t\t\tctx.canvas.style.height = ctx.canvas.height + 'px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar cWidth = ctx.canvas.clientWidth || ctx.canvas.width;\r\n\t\t\tvar cHeight = ctx.canvas.clientHeight || ctx.canvas.height;\r\n\t\t\tif (svg.opts['ignoreDimensions'] == true && e.style('width').hasValue() && e.style('height').hasValue()) {\r\n\t\t\t\tcWidth = e.style('width').toPixels('x');\r\n\t\t\t\tcHeight = e.style('height').toPixels('y');\r\n\t\t\t}\r\n\t\t\tsvg.ViewPort.SetCurrent(cWidth, cHeight);\r\n\r\n\t\t\tif (svg.opts['offsetX'] != null) e.attribute('x', true).value = svg.opts['offsetX'];\r\n\t\t\tif (svg.opts['offsetY'] != null) e.attribute('y', true).value = svg.opts['offsetY'];\r\n\t\t\tif (svg.opts['scaleWidth'] != null || svg.opts['scaleHeight'] != null) {\r\n\t\t\t\tvar xRatio = null, yRatio = null, viewBox = svg.ToNumberArray(e.attribute('viewBox').value);\r\n\r\n\t\t\t\tif (svg.opts['scaleWidth'] != null) {\r\n\t\t\t\t\tif (e.attribute('width').hasValue()) xRatio = e.attribute('width').toPixels('x') / svg.opts['scaleWidth'];\r\n\t\t\t\t\telse if (!isNaN(viewBox[2])) xRatio = viewBox[2] / svg.opts['scaleWidth'];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (svg.opts['scaleHeight'] != null) {\r\n\t\t\t\t\tif (e.attribute('height').hasValue()) yRatio = e.attribute('height').toPixels('y') / svg.opts['scaleHeight'];\r\n\t\t\t\t\telse if (!isNaN(viewBox[3])) yRatio = viewBox[3] / svg.opts['scaleHeight'];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (xRatio == null) { xRatio = yRatio; }\r\n\t\t\t\tif (yRatio == null) { yRatio = xRatio; }\r\n\r\n\t\t\t\te.attribute('width', true).value = svg.opts['scaleWidth'];\r\n\t\t\t\te.attribute('height', true).value = svg.opts['scaleHeight'];\r\n\t\t\t\te.style('transform', true, true).value += ' scale('+(1.0/xRatio)+','+(1.0/yRatio)+')';\r\n\t\t\t}\r\n\r\n\t\t\t// clear and render\r\n\t\t\tif (svg.opts['ignoreClear'] != true) {\r\n\t\t\t\tctx.clearRect(0, 0, cWidth, cHeight);\r\n\t\t\t}\r\n\t\t\te.render(ctx);\r\n\t\t\tif (isFirstRender) {\r\n\t\t\t\tisFirstRender = false;\r\n\t\t\t\tif (typeof svg.opts['renderCallback'] == 'function') svg.opts['renderCallback'](dom);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar waitingForImages = true;\r\n\t\tif (svg.ImagesLoaded()) {\r\n\t\t\twaitingForImages = false;\r\n\t\t\tdraw();\r\n\t\t}\r\n\t\tsvg.intervalID = setInterval(function() {\r\n\t\t\tvar needUpdate = false;\r\n\r\n\t\t\tif (waitingForImages && svg.ImagesLoaded()) {\r\n\t\t\t\twaitingForImages = false;\r\n\t\t\t\tneedUpdate = true;\r\n\t\t\t}\r\n\r\n\t\t\t// need update from mouse events?\r\n\t\t\tif (svg.opts['ignoreMouse'] != true) {\r\n\t\t\t\tneedUpdate = needUpdate | svg.Mouse.hasEvents();\r\n\t\t\t}\r\n\r\n\t\t\t// need update from animations?\r\n\t\t\tif (svg.opts['ignoreAnimation'] != true) {\r\n\t\t\t\tfor (var i=0; i<svg.Animations.length; i++) {\r\n\t\t\t\t\tneedUpdate = needUpdate | svg.Animations[i].update(1000 / svg.FRAMERATE);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// need update from redraw?\r\n\t\t\tif (typeof svg.opts['forceRedraw'] == 'function') {\r\n\t\t\t\tif (svg.opts['forceRedraw']() == true) needUpdate = true;\r\n\t\t\t}\r\n\r\n\t\t\t// render if needed\r\n\t\t\tif (needUpdate) {\r\n\t\t\t\tdraw();\r\n\t\t\t\tsvg.Mouse.runEvents(); // run and clear our events\r\n\t\t\t}\r\n\t\t}, 1000 / svg.FRAMERATE);\r\n\t}\r\n\r\n\tsvg.stop = function() {\r\n\t\tif (svg.intervalID) {\r\n\t\t\tclearInterval(svg.intervalID);\r\n\t\t}\r\n\t}\r\n\r\n\tsvg.Mouse = new (function() {\r\n\t\tthis.events = [];\r\n\t\tthis.hasEvents = function() { return this.events.length != 0; }\r\n\r\n\t\tthis.onclick = function(x, y) {\r\n\t\t\tthis.events.push({ type: 'onclick', x: x, y: y,\r\n\t\t\t\trun: function(e) { if (e.onclick) e.onclick(); }\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.onmousemove = function(x, y) {\r\n\t\t\tthis.events.push({ type: 'onmousemove', x: x, y: y,\r\n\t\t\t\trun: function(e) { if (e.onmousemove) e.onmousemove(); }\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.eventElements = [];\r\n\r\n\t\tthis.checkPath = function(element, ctx) {\r\n\t\t\tfor (var i=0; i<this.events.length; i++) {\r\n\t\t\t\tvar e = this.events[i];\r\n\t\t\t\tif (ctx.isPointInPath && ctx.isPointInPath(e.x, e.y)) this.eventElements[i] = element;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.checkBoundingBox = function(element, bb) {\r\n\t\t\tfor (var i=0; i<this.events.length; i++) {\r\n\t\t\t\tvar e = this.events[i];\r\n\t\t\t\tif (bb.isPointInBox(e.x, e.y)) this.eventElements[i] = element;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.runEvents = function() {\r\n\t\t\tsvg.ctx.canvas.style.cursor = '';\r\n\r\n\t\t\tfor (var i=0; i<this.events.length; i++) {\r\n\t\t\t\tvar e = this.events[i];\r\n\t\t\t\tvar element = this.eventElements[i];\r\n\t\t\t\twhile (element) {\r\n\t\t\t\t\te.run(element);\r\n\t\t\t\t\telement = element.parent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// done running, clear\r\n\t\t\tthis.events = [];\r\n\t\t\tthis.eventElements = [];\r\n\t\t}\r\n\t});\r\n\r\n\treturn svg;\r\n};\r\n\r\nmodule.exports = canvg;\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n\\n/*!\\n * jQuery contextMenu - Plugin for simple contextMenu handling\\n *\\n * Version: 1.5.24\\n *\\n * Authors: Rodney Rehm, Addy Osmani (patches for FF)\\n * Web: http://medialize.github.com/jQuery-contextMenu/\\n *\\n * Licensed under\\n *   MIT License http://www.opensource.org/licenses/mit-license\\n *   GPL v3 http://opensource.org/licenses/GPL-3.0\\n *\\n */\\n.context-menu-list {\\n    margin:0;\\n    padding:0;\\n\\n    min-width: 120px;\\n    max-width: 250px;\\n    display: inline-block;\\n    position: absolute;\\n    list-style-type: none;\\n\\n    border: 1px solid #DDD;\\n    background: #EEE;\\n\\n    -webkit-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\\n       -moz-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\\n        -ms-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\\n         -o-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\\n            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\\n\\n    font-family: Verdana, Arial, Helvetica, sans-serif;\\n    font-size: 11px;\\n}\\n\\n.context-menu-item {\\n    padding: 2px 2px 2px 24px;\\n    background-color: #EEE;\\n    position: relative;\\n    -webkit-user-select: none;\\n       -moz-user-select: -moz-none;\\n        -ms-user-select: none;\\n            user-select: none;\\n}\\n\\n.context-menu-separator {\\n    padding-bottom:0;\\n    border-bottom: 1px solid #DDD;\\n}\\n\\n.context-menu-item > label > input,\\n.context-menu-item > label > textarea {\\n    -webkit-user-select: text;\\n       -moz-user-select: text;\\n        -ms-user-select: text;\\n            user-select: text;\\n}\\n\\n.context-menu-item.hover {\\n    cursor: pointer;\\n    background-color: #39F;\\n}\\n\\n.context-menu-item.disabled {\\n    color: #666;\\n}\\n\\n.context-menu-input.hover,\\n.context-menu-item.disabled.hover {\\n    cursor: default;\\n    background-color: #EEE;\\n}\\n\\n.context-menu-submenu:after {\\n    content: \\\">\\\";\\n    color: #666;\\n    position: absolute;\\n    top: 0;\\n    right: 3px;\\n    z-index: 1;\\n}\\n\\n/* icons\\n    #protip:\\n    In case you want to use sprites for icons (which I would suggest you do) have a look at\\n    http://css-tricks.com/13224-pseudo-spriting/ to get an idea of how to implement\\n    .context-menu-item.icon:before {}\\n */\\n.context-menu-item.icon { min-height: 18px; background-repeat: no-repeat; background-position: 4px 2px; }\\n\\n/* vertically align inside labels */\\n.context-menu-input > label > * { vertical-align: top; }\\n\\n/* position checkboxes and radios as icons */\\n.context-menu-input > label > input[type=\\\"checkbox\\\"],\\n.context-menu-input > label > input[type=\\\"radio\\\"] {\\n    margin-left: -17px;\\n}\\n.context-menu-input > label > span {\\n    margin-left: 5px;\\n}\\n\\n.context-menu-input > label,\\n.context-menu-input > label > input[type=\\\"text\\\"],\\n.context-menu-input > label > textarea,\\n.context-menu-input > label > select {\\n    display: block;\\n    width: 100%;\\n\\n    -webkit-box-sizing: border-box;\\n       -moz-box-sizing: border-box;\\n        -ms-box-sizing: border-box;\\n         -o-box-sizing: border-box;\\n            box-sizing: border-box;\\n}\\n\\n.context-menu-input > label > textarea {\\n    height: 100px;\\n}\\n.context-menu-item > .context-menu-list {\\n    display: none;\\n    /* re-positioned by js */\\n    right: -5px;\\n    top: 5px;\\n}\\n\\n.context-menu-item.hover > .context-menu-list {\\n    display: block;\\n}\\n\\n.context-menu-accesskey {\\n    text-decoration: underline;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/css/contextmenu.css\"],\"names\":[],\"mappings\":\";;AAEA;;;;;;;;;;;;EAYE;AACF;IACI,QAAQ;IACR,SAAS;;IAET,gBAAgB;IAChB,gBAAgB;IAChB,qBAAqB;IACrB,kBAAkB;IAClB,qBAAqB;;IAErB,sBAAsB;IACtB,gBAAgB;;IAEhB,gDAAgD;OAC7C,6CAA6C;QAC5C,4CAA4C;SAC3C,2CAA2C;YACxC,wCAAwC;;IAEhD,kDAAkD;IAClD,eAAe;AACnB;;AAEA;IACI,yBAAyB;IACzB,sBAAsB;IACtB,kBAAkB;IAClB,yBAAyB;OACtB,2BAA2B;QAC1B,qBAAqB;YACjB,iBAAiB;AAC7B;;AAEA;IACI,gBAAgB;IAChB,6BAA6B;AACjC;;AAEA;;IAEI,yBAAyB;OACtB,sBAAsB;QACrB,qBAAqB;YACjB,iBAAiB;AAC7B;;AAEA;IACI,eAAe;IACf,sBAAsB;AAC1B;;AAEA;IACI,WAAW;AACf;;AAEA;;IAEI,eAAe;IACf,sBAAsB;AAC1B;;AAEA;IACI,YAAY;IACZ,WAAW;IACX,kBAAkB;IAClB,MAAM;IACN,UAAU;IACV,UAAU;AACd;;AAEA;;;;;EAKE;AACF,0BAA0B,gBAAgB,EAAE,4BAA4B,EAAE,4BAA4B,EAAE;;AAExG,mCAAmC;AACnC,kCAAkC,mBAAmB,EAAE;;AAEvD,4CAA4C;AAC5C;;IAEI,kBAAkB;AACtB;AACA;IACI,gBAAgB;AACpB;;AAEA;;;;IAII,cAAc;IACd,WAAW;;IAEX,8BAA8B;OAC3B,2BAA2B;QAC1B,0BAA0B;SACzB,yBAAyB;YACtB,sBAAsB;AAClC;;AAEA;IACI,aAAa;AACjB;AACA;IACI,aAAa;IACb,wBAAwB;IACxB,WAAW;IACX,QAAQ;AACZ;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,0BAA0B;AAC9B\",\"sourcesContent\":[\"\\n\\n/*!\\n * jQuery contextMenu - Plugin for simple contextMenu handling\\n *\\n * Version: 1.5.24\\n *\\n * Authors: Rodney Rehm, Addy Osmani (patches for FF)\\n * Web: http://medialize.github.com/jQuery-contextMenu/\\n *\\n * Licensed under\\n *   MIT License http://www.opensource.org/licenses/mit-license\\n *   GPL v3 http://opensource.org/licenses/GPL-3.0\\n *\\n */\\n.context-menu-list {\\n    margin:0;\\n    padding:0;\\n\\n    min-width: 120px;\\n    max-width: 250px;\\n    display: inline-block;\\n    position: absolute;\\n    list-style-type: none;\\n\\n    border: 1px solid #DDD;\\n    background: #EEE;\\n\\n    -webkit-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\\n       -moz-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\\n        -ms-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\\n         -o-box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\\n            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);\\n\\n    font-family: Verdana, Arial, Helvetica, sans-serif;\\n    font-size: 11px;\\n}\\n\\n.context-menu-item {\\n    padding: 2px 2px 2px 24px;\\n    background-color: #EEE;\\n    position: relative;\\n    -webkit-user-select: none;\\n       -moz-user-select: -moz-none;\\n        -ms-user-select: none;\\n            user-select: none;\\n}\\n\\n.context-menu-separator {\\n    padding-bottom:0;\\n    border-bottom: 1px solid #DDD;\\n}\\n\\n.context-menu-item > label > input,\\n.context-menu-item > label > textarea {\\n    -webkit-user-select: text;\\n       -moz-user-select: text;\\n        -ms-user-select: text;\\n            user-select: text;\\n}\\n\\n.context-menu-item.hover {\\n    cursor: pointer;\\n    background-color: #39F;\\n}\\n\\n.context-menu-item.disabled {\\n    color: #666;\\n}\\n\\n.context-menu-input.hover,\\n.context-menu-item.disabled.hover {\\n    cursor: default;\\n    background-color: #EEE;\\n}\\n\\n.context-menu-submenu:after {\\n    content: \\\">\\\";\\n    color: #666;\\n    position: absolute;\\n    top: 0;\\n    right: 3px;\\n    z-index: 1;\\n}\\n\\n/* icons\\n    #protip:\\n    In case you want to use sprites for icons (which I would suggest you do) have a look at\\n    http://css-tricks.com/13224-pseudo-spriting/ to get an idea of how to implement\\n    .context-menu-item.icon:before {}\\n */\\n.context-menu-item.icon { min-height: 18px; background-repeat: no-repeat; background-position: 4px 2px; }\\n\\n/* vertically align inside labels */\\n.context-menu-input > label > * { vertical-align: top; }\\n\\n/* position checkboxes and radios as icons */\\n.context-menu-input > label > input[type=\\\"checkbox\\\"],\\n.context-menu-input > label > input[type=\\\"radio\\\"] {\\n    margin-left: -17px;\\n}\\n.context-menu-input > label > span {\\n    margin-left: 5px;\\n}\\n\\n.context-menu-input > label,\\n.context-menu-input > label > input[type=\\\"text\\\"],\\n.context-menu-input > label > textarea,\\n.context-menu-input > label > select {\\n    display: block;\\n    width: 100%;\\n\\n    -webkit-box-sizing: border-box;\\n       -moz-box-sizing: border-box;\\n        -ms-box-sizing: border-box;\\n         -o-box-sizing: border-box;\\n            box-sizing: border-box;\\n}\\n\\n.context-menu-input > label > textarea {\\n    height: 100px;\\n}\\n.context-menu-item > .context-menu-list {\\n    display: none;\\n    /* re-positioned by js */\\n    right: -5px;\\n    top: 5px;\\n}\\n\\n.context-menu-item.hover > .context-menu-list {\\n    display: block;\\n}\\n\\n.context-menu-accesskey {\\n    text-decoration: underline;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","module.exports = \"/* \\n * Simple JavaScript Inheritance \\n * By John Resig http://ejohn.org/ \\n * MIT Licensed. \\n * \\n ****************************************************** \\n * Example Usage \\n ****************************************************** \\n var Person = Class.extend({ \\n  init: function(isDancing){ \\n    this.dancing = isDancing; \\n  }, \\n  dance: function(){ \\n    return this.dancing; \\n  } \\n}); \\n\\nvar Ninja = Person.extend({ \\n  init: function(){ \\n    this._super( false ); \\n  }, \\n  dance: function(){ \\n    // Call the inherited version of dance() \\n    return this._super(); \\n  }, \\n  swingSword: function(){ \\n    return true; \\n  } \\n}); \\n\\nvar p = new Person(true); \\np.dance(); // => true \\n\\nvar n = new Ninja(); \\nn.dance(); // => false \\nn.swingSword(); // => true \\n\\n// Should all be true \\np instanceof Person && p instanceof Class && \\nn instanceof Ninja && n instanceof Person && n instanceof Class \\n\\n ****************************************************** \\n */ \\n  \\n// Inspired by base2 and Prototype \\n(function(){ \\n  var fnTest = /xyz/.test(function(){xyz;}) ? /\\\\b_super\\\\b/ : /.*/; \\n\\n  // The base Class implementation (does nothing) \\n  this.Class = function(){}; \\n  \\n\\n  // Create a new Class that inherits from this class \\n  Class.extend = function(prop) { \\n    var _super = this.prototype; \\n    \\n    // Instantiate a base class (but only create the instance, \\n    // don't run the init constructor) \\n    initializing = true; \\n    var prototype = new this(); \\n    initializing = false; \\n    \\n     \\n    // Copy the properties over onto the new prototype \\n    for (var name in prop) { \\n      // Check if we're overwriting an existing function \\n      prototype[name] = typeof prop[name] == \\\"function\\\" && \\n        typeof _super[name] == \\\"function\\\" && fnTest.test(prop[name]) ? \\n        (function(name, fn){ \\n          return function() { \\n            var tmp = this._super; \\n            \\n            // Add a new ._super() method that is the same method \\n            // but on the super-class \\n            this._super = _super[name]; \\n            \\n            // The method only need to be bound temporarily, so we \\n            // remove it when we're done executing \\n            var ret = fn.apply(this, arguments);        \\n            this._super = tmp; \\n            \\n            return ret; \\n          }; \\n        })(name, prop[name]) : \\n        prop[name]; \\n    } \\n    \\n    // The dummy class constructor \\n    function Class() { \\n      // All construction is actually done in the init method \\n      if ( !initializing && this.init ) \\n        this.init.apply(this, arguments); \\n    } \\n    \\n    // Populate our constructed prototype object \\n    Class.prototype = prototype; \\n    \\n    // Enforce the constructor to be what we expect \\n    Class.prototype.constructor = Class; \\n\\n    // And make this class extendable \\n    Class.extend = arguments.callee; \\n    \\n    // EXTENSION BY Draw2D.org to inject methods into an existing class to provide plugins or \\n    // bugfixes for further releases \\n    // \\n    Class.inject = function (prop) { \\n        var proto = this.prototype; \\n        var parent = {}; \\n        for (var name in prop) { \\n            if (typeof (prop[name]) == \\\"function\\\" && typeof (proto[name]) == \\\"function\\\" && fnTest.test(prop[name])) { \\n                parent[name] = proto[name]; \\n                proto[name] = (function (name, fn) { \\n                    return function () { \\n                        var tmp = this.parent; \\n                        this.parent = parent[name]; \\n                        var ret = fn.apply(this, arguments); \\n                        this.parent = tmp; \\n                        return ret; \\n                    }; \\n                })(name, prop[name]); \\n            } else { \\n                proto[name] = prop[name]; \\n            } \\n        } \\n    }; \\n     \\n    return Class; \\n  }; \\n})();\\n \\n\"","module.exports = \"var PF=function(){var e=function(t,n){var r=e.resolve(t,n||\\\"/\\\"),i=e.modules[r];if(!i)throw new Error(\\\"Failed to resolve module \\\"+t+\\\", tried \\\"+r);var s=i._cached?i._cached:i();return s};return e.paths=[],e.modules={},e.extensions=[\\\".js\\\",\\\".coffee\\\"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(t,n){function u(t){if(e.modules[t])return t;for(var n=0;n<e.extensions.length;n++){var r=e.extensions[n];if(e.modules[t+r])return t+r}}function a(t){t=t.replace(/\\\\/+$/,\\\"\\\");var n=t+\\\"/package.json\\\";if(e.modules[n]){var i=e.modules[n](),s=i.browserify;if(typeof s==\\\"object\\\"&&s.main){var o=u(r.resolve(t,s.main));if(o)return o}else if(typeof s==\\\"string\\\"){var o=u(r.resolve(t,s));if(o)return o}else if(i.main){var o=u(r.resolve(t,i.main));if(o)return o}}return u(t+\\\"/index\\\")}function f(e,t){var n=l(t);for(var r=0;r<n.length;r++){var i=n[r],s=u(i+\\\"/\\\"+e);if(s)return s;var o=a(i+\\\"/\\\"+e);if(o)return o}var s=u(e);if(s)return s}function l(e){var t;e===\\\"/\\\"?t=[\\\"\\\"]:t=r.normalize(e).split(\\\"/\\\");var n=[];for(var i=t.length-1;i>=0;i--){if(t[i]===\\\"node_modules\\\")continue;var s=t.slice(0,i+1).join(\\\"/\\\")+\\\"/node_modules\\\";n.push(s)}return n}n||(n=\\\"/\\\");if(e._core[t])return t;var r=e.modules.path();n=r.resolve(\\\"/\\\",n);var i=n||\\\"/\\\";if(t.match(/^(?:\\\\.\\\\.?\\\\/|\\\\/)/)){var s=u(r.resolve(i,t))||a(r.resolve(i,t));if(s)return s}var o=f(t,i);if(o)return o;throw new Error(\\\"Cannot find module '\\\"+t+\\\"'\\\")}}(),e.alias=function(t,n){var r=e.modules.path(),i=null;try{i=e.resolve(t+\\\"/package.json\\\",\\\"/\\\")}catch(s){i=e.resolve(t,\\\"/\\\")}var o=r.dirname(i),u=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(e.modules);for(var a=0;a<u.length;a++){var f=u[a];if(f.slice(0,o.length+1)===o+\\\"/\\\"){var l=f.slice(o.length);e.modules[n+l]=e.modules[o+l]}else f===o&&(e.modules[n]=e.modules[o])}},e.define=function(t,n){var r=e._core[t]?\\\"\\\":e.modules.path().dirname(t),i=function(t){return e(t,r)};i.resolve=function(t){return e.resolve(t,r)},i.modules=e.modules,i.define=e.define;var s={exports:{}};e.modules[t]=function(){return e.modules[t]._cached=s.exports,n.call(s.exports,i,s,s.exports,r,t),e.modules[t]._cached=s.exports,s.exports}},typeof process==\\\"undefined\\\"&&(process={}),process.nextTick||(process.nextTick=function(){var e=[],t=typeof window!=\\\"undefined\\\"&&window.postMessage&&window.addEventListener;return t&&window.addEventListener(\\\"message\\\",function(t){if(t.source===window&&t.data===\\\"browserify-tick\\\"){t.stopPropagation();if(e.length>0){var n=e.shift();n()}}},!0),function(n){t?(e.push(n),window.postMessage(\\\"browserify-tick\\\",\\\"*\\\")):setTimeout(n,0)}}()),process.title||(process.title=\\\"browser\\\"),process.binding||(process.binding=function(t){if(t===\\\"evals\\\")return e(\\\"vm\\\");throw new Error(\\\"No such module\\\")}),process.cwd||(process.cwd=function(){return\\\".\\\"}),process.env||(process.env={}),process.argv||(process.argv=[]),e.define(\\\"path\\\",function(e,t,n,r,i){function s(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function o(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i==\\\".\\\"?e.splice(r,1):i===\\\"..\\\"?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift(\\\"..\\\");return e}var u=/^(.+\\\\/(?!$)|\\\\/)?((?:.+?)?(\\\\.[^.]*)?)$/;n.resolve=function(){var e=\\\"\\\",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:process.cwd();if(typeof r!=\\\"string\\\"||!r)continue;e=r+\\\"/\\\"+e,t=r.charAt(0)===\\\"/\\\"}return e=o(s(e.split(\\\"/\\\"),function(e){return!!e}),!t).join(\\\"/\\\"),(t?\\\"/\\\":\\\"\\\")+e||\\\".\\\"},n.normalize=function(e){var t=e.charAt(0)===\\\"/\\\",n=e.slice(-1)===\\\"/\\\";return e=o(s(e.split(\\\"/\\\"),function(e){return!!e}),!t).join(\\\"/\\\"),!e&&!t&&(e=\\\".\\\"),e&&n&&(e+=\\\"/\\\"),(t?\\\"/\\\":\\\"\\\")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(s(e,function(e,t){return e&&typeof e==\\\"string\\\"}).join(\\\"/\\\"))},n.dirname=function(e){var t=u.exec(e)[1]||\\\"\\\",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===\\\":\\\"?t:t.substring(0,t.length-1):\\\".\\\"},n.basename=function(e,t){var n=u.exec(e)[2]||\\\"\\\";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return u.exec(e)[3]||\\\"\\\"}}),e.define(\\\"/core/Node.js\\\",function(e,t,n,r,i){function s(e,t,n){this.x=e,this.y=t,this.walkable=n===undefined?!0:n}t.exports=s}),e.define(\\\"/core/Grid.js\\\",function(e,t,n,r,i){function o(e,t,n){this.width=e,this.height=t,this.nodes=this._buildNodes(e,t,n)}var s=e(\\\"./Node\\\");o.prototype._buildNodes=function(e,t,n){var r,i,o=new Array(t),u;for(r=0;r<t;++r){o[r]=new Array(e);for(i=0;i<e;++i)o[r][i]=new s(i,r)}if(n===undefined)return o;if(n.length!==t||n[0].length!==e)throw new Error(\\\"Matrix size does not fit\\\");for(r=0;r<t;++r)for(i=0;i<e;++i)n[r][i]&&(o[r][i].walkable=!1);return o},o.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},o.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},o.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},o.prototype.setWalkableAt=function(e,t,n){this.nodes[t][e].walkable=n},o.prototype.getNeighbors=function(e,t,n){var r=e.x,i=e.y,s=[],o=!1,u=!1,a=!1,f=!1,l=!1,c=!1,h=!1,p=!1,d=this.nodes;return this.isWalkableAt(r,i-1)&&(s.push(d[i-1][r]),o=!0),this.isWalkableAt(r+1,i)&&(s.push(d[i][r+1]),a=!0),this.isWalkableAt(r,i+1)&&(s.push(d[i+1][r]),l=!0),this.isWalkableAt(r-1,i)&&(s.push(d[i][r-1]),h=!0),t?(n?(u=h&&o,f=o&&a,c=a&&l,p=l&&h):(u=h||o,f=o||a,c=a||l,p=l||h),u&&this.isWalkableAt(r-1,i-1)&&s.push(d[i-1][r-1]),f&&this.isWalkableAt(r+1,i-1)&&s.push(d[i-1][r+1]),c&&this.isWalkableAt(r+1,i+1)&&s.push(d[i+1][r+1]),p&&this.isWalkableAt(r-1,i+1)&&s.push(d[i+1][r-1]),s):s},o.prototype.clone=function(){var e,t,n=this.width,r=this.height,i=this.nodes,u=new o(n,r),a=new Array(r),f;for(e=0;e<r;++e){a[e]=new Array(n);for(t=0;t<n;++t)a[e][t]=new s(t,e,i[e][t].walkable)}return u.nodes=a,u},t.exports=o}),e.define(\\\"/core/Heap.js\\\",function(e,t,n,r,i){(function(){var e,n,r,i,s,o,u,a,f,l,c,h,p,d,v;r=Math.floor,l=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},f=function(e,t,i,s,o){var u;i==null&&(i=0),o==null&&(o=n);if(i<0)throw new Error(\\\"lo must be non-negative\\\");s==null&&(s=e.length);while(o(i,s)<0)u=r((i+s)/2),o(t,e[u])<0?s=u:i=u+1;return[].splice.apply(e,[i,i-i].concat(t)),t},o=function(e,t,r){return r==null&&(r=n),e.push(t),d(e,0,e.length-1,r)},s=function(e,t){var r,i;return t==null&&(t=n),r=e.pop(),e.length?(i=e[0],e[0]=r,v(e,0,t)):i=r,i},a=function(e,t,r){var i;return r==null&&(r=n),i=e[0],e[0]=t,v(e,0,r),i},u=function(e,t,r){var i;return r==null&&(r=n),e.length&&r(e[0],t)<0&&(i=[e[0],t],t=i[0],e[0]=i[1],v(e,0,r)),t},i=function(e,t){var i,s,o,u,a,f,l,c;t==null&&(t=n),f=function(){c=[];for(var t=0,n=r(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)c.push(t);return c}.apply(this).reverse(),l=[];for(s=0,u=f.length;s<u;s++)i=f[s],l.push(v(e,i,t));return l},p=function(e,t,r){var i;return r==null&&(r=n),i=e.indexOf(t),d(e,0,i,r),v(e,i,r)},c=function(e,t,r){var s,o,a,f,l;r==null&&(r=n),o=e.slice(0,t);if(!o.length)return o;i(o,r),l=e.slice(t);for(a=0,f=l.length;a<f;a++)s=l[a],u(o,s,r);return o.sort(r).reverse()},h=function(e,t,r){var o,u,a,c,h,p,d,v,m,g;r==null&&(r=n);if(t*10<=e.length){c=e.slice(0,t).sort(r);if(!c.length)return c;a=c[c.length-1],v=e.slice(t);for(h=0,d=v.length;h<d;h++)o=v[h],r(o,a)<0&&(f(c,o,0,null,r),c.pop(),a=c[c.length-1]);return c}i(e,r),g=[];for(u=p=0,m=l(t,e.length);0<=m?p<m:p>m;u=0<=m?++p:--p)g.push(s(e,r));return g},d=function(e,t,r,i){var s,o,u;i==null&&(i=n),s=e[r];while(r>t){u=r-1>>1,o=e[u];if(i(s,o)<0){e[r]=o,r=u;continue}break}return e[r]=s},v=function(e,t,r){var i,s,o,u,a;r==null&&(r=n),s=e.length,a=t,o=e[t],i=2*t+1;while(i<s)u=i+1,u<s&&!(r(e[i],e[u])<0)&&(i=u),e[t]=e[i],t=i,i=2*t+1;return e[t]=o,d(e,a,t,r)},e=function(){function e(e){this.cmp=e!=null?e:n,this.nodes=[]}return e.name=\\\"Heap\\\",e.push=o,e.pop=s,e.replace=a,e.pushpop=u,e.heapify=i,e.nlargest=c,e.nsmallest=h,e.prototype.push=function(e){return o(this.nodes,e,this.cmp)},e.prototype.pop=function(){return s(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return this.nodes.indexOf(e)!==-1},e.prototype.replace=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return u(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return this.nodes.length===0},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.remove=e.prototype.pop,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),(typeof t!=\\\"undefined\\\"&&t!==null?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)}),e.define(\\\"/core/Util.js\\\",function(e,t,n,r,i){function s(e){var t=[[e.x,e.y]];while(e.parent)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function o(e,t){var n=s(e),r=s(t);return n.concat(r.reverse())}function u(e){var t,n=0,r,i,s,o;for(t=1;t<e.length;++t)r=e[t-1],i=e[t],s=r[0]-i[0],o=r[1]-i[1],n+=Math.sqrt(s*s+o*o);return n}function a(e,t,n,r){var i=Math.abs,s=[],o,u,a,f,l,c;a=i(n-e),f=i(r-t),o=e<n?1:-1,u=t<r?1:-1,l=a-f;for(;;){s.push([e,t]);if(e===n&&t===r)break;c=2*l,c>-f&&(l-=f,e+=o),c<a&&(l+=a,t+=u)}return s}function f(e,t){var n=t.length,r=t[0][0],i=t[0][1],s=t[n-1][0],o=t[n-1][1],u,f,l,c,h,p,d,v,m,g,y,b,w;u=r,f=i,h=t[1][0],p=t[1][1],d=[[u,f]];for(v=2;v<n;++v){g=t[v],l=g[0],c=g[1],y=a(u,f,l,c),w=!1;for(m=1;m<y.length;++m){b=y[m];if(!e.isWalkableAt(b[0],b[1])){w=!0,d.push([h,p]),u=h,f=p;break}}w||(h=l,p=c)}return d.push([s,o]),d}n.backtrace=s,n.biBacktrace=o,n.pathLength=u,n.getLine=a,n.smoothenPath=f}),e.define(\\\"/core/Heuristic.js\\\",function(e,t,n,r,i){t.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},chebyshev:function(e,t){return Math.max(e,t)}}}),e.define(\\\"/finders/AStarFinder.js\\\",function(e,t,n,r,i){function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||u.manhattan}var s=e(\\\"../core/Heap\\\"),o=e(\\\"../core/Util\\\"),u=e(\\\"../core/Heuristic\\\");a.prototype.findPath=function(e,t,n,r,i){var u=new s(function(e,t){return e.f-t.f}),a=i.getNodeAt(e,t),f=i.getNodeAt(n,r),l=this.heuristic,c=this.allowDiagonal,h=this.dontCrossCorners,p=Math.abs,d=Math.SQRT2,v,m,g,y,b,w,E,S;a.g=0,a.f=0,u.push(a),a.opened=!0;while(!u.empty()){v=u.pop(),v.closed=!0;if(v===f)return o.backtrace(f);m=i.getNeighbors(v,c,h);for(y=0,b=m.length;y<b;++y){g=m[y];if(g.closed)continue;w=g.x,E=g.y,S=v.g+(w-v.x===0||E-v.y===0?1:d);if(!g.opened||S<g.g)g.g=S,g.h=g.h||l(p(w-n),p(E-r)),g.f=g.g+g.h,g.parent=v,g.opened?u.updateItem(g):(u.push(g),g.opened=!0)}}return[]},t.exports=a}),e.define(\\\"/finders/BestFirstFinder.js\\\",function(e,t,n,r,i){function o(e){s.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return t(e,n)*1e6}}var s=e(\\\"./AStarFinder\\\");o.prototype=new s,o.prototype.constructor=o,t.exports=o}),e.define(\\\"/finders/BreadthFirstFinder.js\\\",function(e,t,n,r,i){function o(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners}var s=e(\\\"../core/Util\\\");o.prototype.findPath=function(e,t,n,r,i){var o=[],u=this.allowDiagonal,a=this.dontCrossCorners,f=i.getNodeAt(e,t),l=i.getNodeAt(n,r),c,h,p,d,v;o.push(f),f.opened=!0;while(o.length){p=o.shift(),p.closed=!0;if(p===l)return s.backtrace(l);c=i.getNeighbors(p,u,a);for(d=0,v=c.length;d<v;++d){h=c[d];if(h.closed||h.opened)continue;o.push(h),h.opened=!0,h.parent=p}}return[]},t.exports=o}),e.define(\\\"/finders/DijkstraFinder.js\\\",function(e,t,n,r,i){function o(e){s.call(this,e),this.heuristic=function(e,t){return 0}}var s=e(\\\"./AStarFinder\\\");o.prototype=new s,o.prototype.constructor=o,t.exports=o}),e.define(\\\"/finders/BiAStarFinder.js\\\",function(e,t,n,r,i){function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||u.manhattan}var s=e(\\\"../core/Heap\\\"),o=e(\\\"../core/Util\\\"),u=e(\\\"../core/Heuristic\\\");a.prototype.findPath=function(e,t,n,r,i){var u=function(e,t){return e.f-t.f},a=new s(u),f=new s(u),l=i.getNodeAt(e,t),c=i.getNodeAt(n,r),h=this.heuristic,p=this.allowDiagonal,d=this.dontCrossCorners,v=Math.abs,m=Math.SQRT2,g,y,b,w,E,S,x,T,N=1,C=2;l.g=0,l.f=0,a.push(l),l.opened=N,c.g=0,c.f=0,f.push(c),c.opened=C;while(!a.empty()&&!f.empty()){g=a.pop(),g.closed=!0,y=i.getNeighbors(g,p,d);for(w=0,E=y.length;w<E;++w){b=y[w];if(b.closed)continue;if(b.opened===C)return o.biBacktrace(g,b);S=b.x,x=b.y,T=g.g+(S-g.x===0||x-g.y===0?1:m);if(!b.opened||T<b.g)b.g=T,b.h=b.h||h(v(S-n),v(x-r)),b.f=b.g+b.h,b.parent=g,b.opened?a.updateItem(b):(a.push(b),b.opened=N)}g=f.pop(),g.closed=!0,y=i.getNeighbors(g,p,d);for(w=0,E=y.length;w<E;++w){b=y[w];if(b.closed)continue;if(b.opened===N)return o.biBacktrace(b,g);S=b.x,x=b.y,T=g.g+(S-g.x===0||x-g.y===0?1:m);if(!b.opened||T<b.g)b.g=T,b.h=b.h||h(v(S-e),v(x-t)),b.f=b.g+b.h,b.parent=g,b.opened?f.updateItem(b):(f.push(b),b.opened=C)}}return[]},t.exports=a}),e.define(\\\"/finders/BiBestFirstFinder.js\\\",function(e,t,n,r,i){function o(e){s.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return t(e,n)*1e6}}var s=e(\\\"./BiAStarFinder\\\");o.prototype=new s,o.prototype.constructor=o,t.exports=o}),e.define(\\\"/finders/BiBreadthFirstFinder.js\\\",function(e,t,n,r,i){function o(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners}var s=e(\\\"../core/Util\\\");o.prototype.findPath=function(e,t,n,r,i){var o=i.getNodeAt(e,t),u=i.getNodeAt(n,r),a=[],f=[],l,c,h,p=this.allowDiagonal,d=this.dontCrossCorners,v=0,m=1,g,y;a.push(o),o.opened=!0,o.by=v,f.push(u),u.opened=!0,u.by=m;while(a.length&&f.length){h=a.shift(),h.closed=!0,l=i.getNeighbors(h,p,d);for(g=0,y=l.length;g<y;++g){c=l[g];if(c.closed)continue;if(c.opened){if(c.by===m)return s.biBacktrace(h,c);continue}a.push(c),c.parent=h,c.opened=!0,c.by=v}h=f.shift(),h.closed=!0,l=i.getNeighbors(h,p,d);for(g=0,y=l.length;g<y;++g){c=l[g];if(c.closed)continue;if(c.opened){if(c.by===v)return s.biBacktrace(c,h);continue}f.push(c),c.parent=h,c.opened=!0,c.by=m}}return[]},t.exports=o}),e.define(\\\"/finders/BiDijkstraFinder.js\\\",function(e,t,n,r,i){function o(e){s.call(this,e),this.heuristic=function(e,t){return 0}}var s=e(\\\"./BiAStarFinder\\\");o.prototype=new s,o.prototype.constructor=o,t.exports=o}),e.define(\\\"/finders/JumpPointFinder.js\\\",function(e,t,n,r,i){function a(e){e=e||{},this.heuristic=e.heuristic||u.manhattan}var s=e(\\\"../core/Heap\\\"),o=e(\\\"../core/Util\\\"),u=e(\\\"../core/Heuristic\\\");a.prototype.findPath=function(e,t,n,r,i){var u=this.openList=new s(function(e,t){return e.f-t.f}),a=this.startNode=i.getNodeAt(e,t),f=this.endNode=i.getNodeAt(n,r),l;this.grid=i,a.g=0,a.f=0,u.push(a),a.opened=!0;while(!u.empty()){l=u.pop(),l.closed=!0;if(l===f)return o.backtrace(f);this._identifySuccessors(l)}return[]},a.prototype._identifySuccessors=function(e){var t=this.grid,n=this.heuristic,r=this.openList,i=this.endNode.x,s=this.endNode.y,o,a,f,l,c,h=e.x,p=e.y,d,v,m,g,y,b,w,E=Math.abs,S=Math.max;o=this._findNeighbors(e);for(l=0,c=o.length;l<c;++l){a=o[l],f=this._jump(a[0],a[1],h,p);if(f){d=f[0],v=f[1],w=t.getNodeAt(d,v);if(w.closed)continue;y=u.euclidean(E(d-h),E(v-p)),b=e.g+y;if(!w.opened||b<w.g)w.g=b,w.h=w.h||n(E(d-i),E(v-s)),w.f=w.g+w.h,w.parent=e,w.opened?r.updateItem(w):(r.push(w),w.opened=!0)}}},a.prototype._jump=function(e,t,n,r){var i=this.grid,s=e-n,o=t-r,u,a;if(!i.isWalkableAt(e,t))return null;if(i.getNodeAt(e,t)===this.endNode)return[e,t];if(s!==0&&o!==0){if(i.isWalkableAt(e-s,t+o)&&!i.isWalkableAt(e-s,t)||i.isWalkableAt(e+s,t-o)&&!i.isWalkableAt(e,t-o))return[e,t]}else if(s!==0){if(i.isWalkableAt(e+s,t+1)&&!i.isWalkableAt(e,t+1)||i.isWalkableAt(e+s,t-1)&&!i.isWalkableAt(e,t-1))return[e,t]}else if(i.isWalkableAt(e+1,t+o)&&!i.isWalkableAt(e+1,t)||i.isWalkableAt(e-1,t+o)&&!i.isWalkableAt(e-1,t))return[e,t];if(s!==0&&o!==0){u=this._jump(e+s,t,e,t),a=this._jump(e,t+o,e,t);if(u||a)return[e,t]}return i.isWalkableAt(e+s,t)||i.isWalkableAt(e,t+o)?this._jump(e+s,t+o,e,t):null},a.prototype._findNeighbors=function(e){var t=e.parent,n=e.x,r=e.y,i=this.grid,s,o,u,a,f,l,c=[],h,p,d,v;if(t)s=t.x,o=t.y,f=(n-s)/Math.max(Math.abs(n-s),1),l=(r-o)/Math.max(Math.abs(r-o),1),f!==0&&l!==0?(i.isWalkableAt(n,r+l)&&c.push([n,r+l]),i.isWalkableAt(n+f,r)&&c.push([n+f,r]),(i.isWalkableAt(n,r+l)||i.isWalkableAt(n+f,r))&&c.push([n+f,r+l]),!i.isWalkableAt(n-f,r)&&i.isWalkableAt(n,r+l)&&c.push([n-f,r+l]),!i.isWalkableAt(n,r-l)&&i.isWalkableAt(n+f,r)&&c.push([n+f,r-l])):f===0?i.isWalkableAt(n,r+l)&&(i.isWalkableAt(n,r+l)&&c.push([n,r+l]),i.isWalkableAt(n+1,r)||c.push([n+1,r+l]),i.isWalkableAt(n-1,r)||c.push([n-1,r+l])):i.isWalkableAt(n+f,r)&&(i.isWalkableAt(n+f,r)&&c.push([n+f,r]),i.isWalkableAt(n,r+1)||c.push([n+f,r+1]),i.isWalkableAt(n,r-1)||c.push([n+f,r-1]));else{h=i.getNeighbors(e,!0);for(d=0,v=h.length;d<v;++d)p=h[d],c.push([p.x,p.y])}return c},t.exports=a}),e.define(\\\"/PathFinding.js\\\",function(e,t,n,r,i){t.exports={Node:e(\\\"./core/Node\\\"),Grid:e(\\\"./core/Grid\\\"),Heap:e(\\\"./core/Heap\\\"),Util:e(\\\"./core/Util\\\"),Heuristic:e(\\\"./core/Heuristic\\\"),AStarFinder:e(\\\"./finders/AStarFinder\\\"),BestFirstFinder:e(\\\"./finders/BestFirstFinder\\\"),BreadthFirstFinder:e(\\\"./finders/BreadthFirstFinder\\\"),DijkstraFinder:e(\\\"./finders/DijkstraFinder\\\"),BiAStarFinder:e(\\\"./finders/BiAStarFinder\\\"),BiBestFirstFinder:e(\\\"./finders/BiBestFirstFinder\\\"),BiBreadthFirstFinder:e(\\\"./finders/BiBreadthFirstFinder\\\"),BiDijkstraFinder:e(\\\"./finders/BiDijkstraFinder\\\"),JumpPointFinder:e(\\\"./finders/JumpPointFinder\\\")}}),e(\\\"/PathFinding.js\\\"),e(\\\"/PathFinding\\\")}()\"","module.exports = \"\\n\\n// ┌────────────────────────────────────────────────────────────────────┐ \\\\\\\\// │ Raphaël 2.1.0 - JavaScript Vector Library                          │ \\\\\\\\\\n// ├────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ Copyright © 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    │ \\\\\\\\\\n// │ Copyright © 2008-2012 Sencha Labs (http://sencha.com)              │ \\\\\\\\\\n// ├────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\\\\\\\\\n// └────────────────────────────────────────────────────────────────────┘ \\\\\\\\\\n\\n// ┌──────────────────────────────────────────────────────────────────────────────────────┐ \\\\\\\\\\n// │ Eve 0.3.4 - JavaScript Events Library                                                │ \\\\\\\\\\n// ├──────────────────────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://dmitry.baranovskiy.com/)          │ \\\\\\\\\\n// │ Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license. │ \\\\\\\\\\n// └──────────────────────────────────────────────────────────────────────────────────────┘ \\\\\\\\\\n\\n// THIS FILES IS PATCHED BY FREEGROUP\\n// you can't replace this file with a new version without migrate all changes\\n// tagged with \\\"FREEGROUP\\\"\\n//\\n// Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n// you may not use this file except in compliance with the License.\\n// You may obtain a copy of the License at\\n//\\n// http://www.apache.org/licenses/LICENSE-2.0\\n//\\n// Unless required by applicable law or agreed to in writing, software\\n// distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n// See the License for the specific language governing permissions and\\n// limitations under the License.\\n// ┌────────────────────────────────────────────────────────────┐ \\\\\\\\\\n// │ Eve 0.4.2 - JavaScript Events Library                      │ \\\\\\\\\\n// ├────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ Author Dmitry Baranovskiy (http://dmitry.baranovskiy.com/) │ \\\\\\\\\\n// └────────────────────────────────────────────────────────────┘ \\\\\\\\\\n(function (glob, factory) {\\n    if (typeof define === \\\"function\\\" && define.amd) {\\n        define(\\\"eve\\\", function() {\\n            return factory();\\n        });\\n    } else if (typeof exports === \\\"object\\\") {\\n        module.exports = factory();\\n    } else {\\n        glob.eve = factory();\\n    }\\n}(this, function(){\\n    var version = \\\"0.4.2\\\",\\n        has = \\\"hasOwnProperty\\\",\\n        separator = /[\\\\.\\\\/]/,\\n        wildcard = \\\"*\\\",\\n        fun = function () {},\\n        numsort = function (a, b) {\\n            return a - b;\\n        },\\n        current_event,\\n        stop,\\n        events = {n: {}},\\n    /*\\\\\\n     * eve\\n     [ method ]\\n\\n     * Fires event with given `name`, given scope and other parameters.\\n\\n     > Arguments\\n\\n     - name (string) name of the *event*, dot (`.`) or slash (`/`) separated\\n     - scope (object) context for the event handlers\\n     - varargs (...) the rest of arguments will be sent to event handlers\\n\\n     = (object) array of returned values from the listeners\\n     \\\\*/\\n        eve = function (name, scope) {\\n            name = String(name);\\n            var e = events,\\n                oldstop = stop,\\n                args = Array.prototype.slice.call(arguments, 2),\\n                listeners = eve.listeners(name),\\n                z = 0,\\n                f = false,\\n                l,\\n                indexed = [],\\n                queue = {},\\n                out = [],\\n                ce = current_event,\\n                errors = [];\\n            current_event = name;\\n            stop = 0;\\n            for (var i = 0, ii = listeners.length; i < ii; i++) if (\\\"zIndex\\\" in listeners[i]) {\\n                indexed.push(listeners[i].zIndex);\\n                if (listeners[i].zIndex < 0) {\\n                    queue[listeners[i].zIndex] = listeners[i];\\n                }\\n            }\\n            indexed.sort(numsort);\\n            while (indexed[z] < 0) {\\n                l = queue[indexed[z++]];\\n                out.push(l.apply(scope, args));\\n                if (stop) {\\n                    stop = oldstop;\\n                    return out;\\n                }\\n            }\\n            for (i = 0; i < ii; i++) {\\n                l = listeners[i];\\n                if (\\\"zIndex\\\" in l) {\\n                    if (l.zIndex == indexed[z]) {\\n                        out.push(l.apply(scope, args));\\n                        if (stop) {\\n                            break;\\n                        }\\n                        do {\\n                            z++;\\n                            l = queue[indexed[z]];\\n                            l && out.push(l.apply(scope, args));\\n                            if (stop) {\\n                                break;\\n                            }\\n                        } while (l)\\n                    } else {\\n                        queue[l.zIndex] = l;\\n                    }\\n                } else {\\n                    out.push(l.apply(scope, args));\\n                    if (stop) {\\n                        break;\\n                    }\\n                }\\n            }\\n            stop = oldstop;\\n            current_event = ce;\\n            return out.length ? out : null;\\n        };\\n    // Undocumented. Debug only.\\n    eve._events = events;\\n    /*\\\\\\n     * eve.listeners\\n     [ method ]\\n\\n     * Internal method which gives you array of all event handlers that will be triggered by the given `name`.\\n\\n     > Arguments\\n\\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated\\n\\n     = (array) array of event handlers\\n     \\\\*/\\n    eve.listeners = function (name) {\\n        var names = name.split(separator),\\n            e = events,\\n            item,\\n            items,\\n            k,\\n            i,\\n            ii,\\n            j,\\n            jj,\\n            nes,\\n            es = [e],\\n            out = [];\\n        for (i = 0, ii = names.length; i < ii; i++) {\\n            nes = [];\\n            for (j = 0, jj = es.length; j < jj; j++) {\\n                e = es[j].n;\\n                items = [e[names[i]], e[wildcard]];\\n                k = 2;\\n                while (k--) {\\n                    item = items[k];\\n                    if (item) {\\n                        nes.push(item);\\n                        out = out.concat(item.f || []);\\n                    }\\n                }\\n            }\\n            es = nes;\\n        }\\n        return out;\\n    };\\n\\n    /*\\\\\\n     * eve.on\\n     [ method ]\\n     **\\n     * Binds given event handler with a given name. You can use wildcards “`*`” for the names:\\n     | eve.on(\\\"*.under.*\\\", f);\\n     | eve(\\\"mouse.under.floor\\\"); // triggers f\\n     * Use @eve to trigger the listener.\\n     **\\n     > Arguments\\n     **\\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\\n     - f (function) event handler function\\n     **\\n     = (function) returned function accepts a single numeric parameter that represents z-index of the handler. It is an optional feature and only used when you need to ensure that some subset of handlers will be invoked in a given order, despite of the order of assignment.\\n     > Example:\\n     | eve.on(\\\"mouse\\\", eatIt)(2);\\n     | eve.on(\\\"mouse\\\", scream);\\n     | eve.on(\\\"mouse\\\", catchIt)(1);\\n     * This will ensure that `catchIt()` function will be called before `eatIt()`.\\n     *\\n     * If you want to put your handler before non-indexed handlers, specify a negative value.\\n     * Note: I assume most of the time you don’t need to worry about z-index, but it’s nice to have this feature “just in case”.\\n     \\\\*/\\n    eve.on = function (name, f) {\\n        name = String(name);\\n        if (typeof f != \\\"function\\\") {\\n            return function () {};\\n        }\\n        var names = name.split(separator),\\n            e = events;\\n        for (var i = 0, ii = names.length; i < ii; i++) {\\n            e = e.n;\\n            e = e.hasOwnProperty(names[i]) && e[names[i]] || (e[names[i]] = {n: {}});\\n        }\\n        e.f = e.f || [];\\n        for (i = 0, ii = e.f.length; i < ii; i++) if (e.f[i] == f) {\\n            return fun;\\n        }\\n        e.f.push(f);\\n        return function (zIndex) {\\n            if (+zIndex == +zIndex) {\\n                f.zIndex = +zIndex;\\n            }\\n        };\\n    };\\n    /*\\\\\\n     * eve.f\\n     [ method ]\\n     **\\n     * Returns function that will fire given event with optional arguments.\\n     * Arguments that will be passed to the result function will be also\\n     * concated to the list of final arguments.\\n     | el.onclick = eve.f(\\\"click\\\", 1, 2);\\n     | eve.on(\\\"click\\\", function (a, b, c) {\\n     |     console.log(a, b, c); // 1, 2, [event object]\\n     | });\\n     > Arguments\\n     - event (string) event name\\n     - varargs (…) and any other arguments\\n     = (function) possible event handler function\\n     \\\\*/\\n    eve.f = function (event) {\\n        var attrs = [].slice.call(arguments, 1);\\n        return function () {\\n            eve.apply(null, [event, null].concat(attrs).concat([].slice.call(arguments, 0)));\\n        };\\n    };\\n    /*\\\\\\n     * eve.stop\\n     [ method ]\\n     **\\n     * Is used inside an event handler to stop the event, preventing any subsequent listeners from firing.\\n     \\\\*/\\n    eve.stop = function () {\\n        stop = 1;\\n    };\\n    /*\\\\\\n     * eve.nt\\n     [ method ]\\n     **\\n     * Could be used inside event handler to figure out actual name of the event.\\n     **\\n     > Arguments\\n     **\\n     - subname (string) #optional subname of the event\\n     **\\n     = (string) name of the event, if `subname` is not specified\\n     * or\\n     = (boolean) `true`, if current event’s name contains `subname`\\n     \\\\*/\\n    eve.nt = function (subname) {\\n        if (subname) {\\n            return new RegExp(\\\"(?:\\\\\\\\.|\\\\\\\\/|^)\\\" + subname + \\\"(?:\\\\\\\\.|\\\\\\\\/|$)\\\").test(current_event);\\n        }\\n        return current_event;\\n    };\\n    /*\\\\\\n     * eve.nts\\n     [ method ]\\n     **\\n     * Could be used inside event handler to figure out actual name of the event.\\n     **\\n     **\\n     = (array) names of the event\\n     \\\\*/\\n    eve.nts = function () {\\n        return current_event.split(separator);\\n    };\\n    /*\\\\\\n     * eve.off\\n     [ method ]\\n     **\\n     * Removes given function from the list of event listeners assigned to given name.\\n     * If no arguments specified all the events will be cleared.\\n     **\\n     > Arguments\\n     **\\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\\n     - f (function) event handler function\\n     \\\\*/\\n    /*\\\\\\n     * eve.unbind\\n     [ method ]\\n     **\\n     * See @eve.off\\n     \\\\*/\\n    eve.off = eve.unbind = function (name, f) {\\n        if (!name) {\\n            eve._events = events = {n: {}};\\n            return;\\n        }\\n        var names = name.split(separator),\\n            e,\\n            key,\\n            splice,\\n            i, ii, j, jj,\\n            cur = [events];\\n        for (i = 0, ii = names.length; i < ii; i++) {\\n            for (j = 0; j < cur.length; j += splice.length - 2) {\\n                splice = [j, 1];\\n                e = cur[j].n;\\n                if (names[i] != wildcard) {\\n                    if (e[names[i]]) {\\n                        splice.push(e[names[i]]);\\n                    }\\n                } else {\\n                    for (key in e) if (e[has](key)) {\\n                        splice.push(e[key]);\\n                    }\\n                }\\n                cur.splice.apply(cur, splice);\\n            }\\n        }\\n        for (i = 0, ii = cur.length; i < ii; i++) {\\n            e = cur[i];\\n            while (e.n) {\\n                if (f) {\\n                    if (e.f) {\\n                        for (j = 0, jj = e.f.length; j < jj; j++) if (e.f[j] == f) {\\n                            e.f.splice(j, 1);\\n                            break;\\n                        }\\n                        !e.f.length && delete e.f;\\n                    }\\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\\n                        var funcs = e.n[key].f;\\n                        for (j = 0, jj = funcs.length; j < jj; j++) if (funcs[j] == f) {\\n                            funcs.splice(j, 1);\\n                            break;\\n                        }\\n                        !funcs.length && delete e.n[key].f;\\n                    }\\n                } else {\\n                    delete e.f;\\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\\n                        delete e.n[key].f;\\n                    }\\n                }\\n                e = e.n;\\n            }\\n        }\\n    };\\n    /*\\\\\\n     * eve.once\\n     [ method ]\\n     **\\n     * Binds given event handler with a given name to only run once then unbind itself.\\n     | eve.once(\\\"login\\\", f);\\n     | eve(\\\"login\\\"); // triggers f\\n     | eve(\\\"login\\\"); // no listeners\\n     * Use @eve to trigger the listener.\\n     **\\n     > Arguments\\n     **\\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\\n     - f (function) event handler function\\n     **\\n     = (function) same return function as @eve.on\\n     \\\\*/\\n    eve.once = function (name, f) {\\n        var f2 = function () {\\n            eve.unbind(name, f2);\\n            return f.apply(this, arguments);\\n        };\\n        return eve.on(name, f2);\\n    };\\n    /*\\\\\\n     * eve.version\\n     [ property (string) ]\\n     **\\n     * Current version of the library.\\n     \\\\*/\\n    eve.version = version;\\n    eve.toString = function () {\\n        return \\\"You are running Eve \\\" + version;\\n    };\\n\\n    return eve;\\n}));\\n\\n// ┌────────────────────────────────────────────────────────────────────┐ \\\\\\\\\\n// │ Raphaël 2.1.4 - JavaScript Vector Library                      │ \\\\\\\\\\n// ├────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ Core Module                                                        │ \\\\\\\\\\n// ├────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\\\\\\\\\n// └────────────────────────────────────────────────────────────────────┘ \\\\\\\\\\n\\n(function (glob, factory) {\\n    if (typeof define === \\\"function\\\" && define.amd) {\\n        define(\\\"raphael.core\\\", [\\\"eve\\\"], function(eve) {\\n            return factory(eve);\\n        });\\n    } else if (typeof exports === \\\"object\\\") {\\n        module.exports = factory(require(\\\"eve\\\"));\\n    } else {\\n        glob.Raphael = factory(glob.eve);\\n    }\\n}(this, function (eve) {\\n    /*\\\\\\n     * Raphael\\n     [ method ]\\n     **\\n     * Creates a canvas object on which to draw.\\n     * You must do this first, as all future calls to drawing methods\\n     * from this instance will be bound to this canvas.\\n     > Parameters\\n     **\\n     - container (HTMLElement|string) DOM element or its ID which is going to be a parent for drawing surface\\n     - width (number)\\n     - height (number)\\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\\n     * or\\n     - x (number)\\n     - y (number)\\n     - width (number)\\n     - height (number)\\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\\n     * or\\n     - all (array) (first 3 or 4 elements in the array are equal to [containerID, width, height] or [x, y, width, height]. The rest are element descriptions in format {type: type, <attributes>}). See @Paper.add.\\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\\n     * or\\n     - onReadyCallback (function) function that is going to be called on DOM ready event. You can also subscribe to this event via Eve’s “DOMLoad” event. In this case method returns `undefined`.\\n     = (object) @Paper\\n     > Usage\\n     | // Each of the following examples create a canvas\\n     | // that is 320px wide by 200px high.\\n     | // Canvas is created at the viewport’s 10,50 coordinate.\\n     | var paper = Raphael(10, 50, 320, 200);\\n     | // Canvas is created at the top left corner of the #notepad element\\n     | // (or its top right corner in dir=\\\"rtl\\\" elements)\\n     | var paper = Raphael(document.getElementById(\\\"notepad\\\"), 320, 200);\\n     | // Same as above\\n     | var paper = Raphael(\\\"notepad\\\", 320, 200);\\n     | // Image dump\\n     | var set = Raphael([\\\"notepad\\\", 320, 200, {\\n     |     type: \\\"rect\\\",\\n     |     x: 10,\\n     |     y: 10,\\n     |     width: 25,\\n     |     height: 25,\\n     |     stroke: \\\"#f00\\\"\\n     | }, {\\n     |     type: \\\"text\\\",\\n     |     x: 30,\\n     |     y: 40,\\n     |     text: \\\"Dump\\\"\\n     | }]);\\n     \\\\*/\\n    function R(first) {\\n        if (R.is(first, \\\"function\\\")) {\\n            return loaded ? first() : eve.on(\\\"raphael.DOMload\\\", first);\\n        } else if (R.is(first, array)) {\\n            return R._engine.create[apply](R, first.splice(0, 3 + R.is(first[0], nu))).add(first);\\n        } else {\\n            var args = Array.prototype.slice.call(arguments, 0);\\n            if (R.is(args[args.length - 1], \\\"function\\\")) {\\n                var f = args.pop();\\n                return loaded ? f.call(R._engine.create[apply](R, args)) : eve.on(\\\"raphael.DOMload\\\", function () {\\n                    f.call(R._engine.create[apply](R, args));\\n                });\\n            } else {\\n                return R._engine.create[apply](R, arguments);\\n            }\\n        }\\n    }\\n    R.version = \\\"2.1.4\\\";\\n    R.eve = eve;\\n    var loaded,\\n        separator = /[, ]+/,\\n        elements = {circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1},\\n        formatrg = /\\\\{(\\\\d+)\\\\}/g,\\n        proto = \\\"prototype\\\",\\n        has = \\\"hasOwnProperty\\\",\\n        g = {\\n            doc: document,\\n            win: window\\n        },\\n        oldRaphael = {\\n            was: Object.prototype[has].call(g.win, \\\"Raphael\\\"),\\n            is: g.win.Raphael\\n        },\\n        Paper = function () {\\n            /*\\\\\\n             * Paper.ca\\n             [ property (object) ]\\n             **\\n             * Shortcut for @Paper.customAttributes\\n             \\\\*/\\n            /*\\\\\\n             * Paper.customAttributes\\n             [ property (object) ]\\n             **\\n             * If you have a set of attributes that you would like to represent\\n             * as a function of some number you can do it easily with custom attributes:\\n             > Usage\\n             | paper.customAttributes.hue = function (num) {\\n             |     num = num % 1;\\n             |     return {fill: \\\"hsb(\\\" + num + \\\", 0.75, 1)\\\"};\\n             | };\\n             | // Custom attribute “hue” will change fill\\n             | // to be given hue with fixed saturation and brightness.\\n             | // Now you can use it like this:\\n             | var c = paper.circle(10, 10, 10).attr({hue: .45});\\n             | // or even like this:\\n             | c.animate({hue: 1}, 1e3);\\n             |\\n             | // You could also create custom attribute\\n             | // with multiple parameters:\\n             | paper.customAttributes.hsb = function (h, s, b) {\\n             |     return {fill: \\\"hsb(\\\" + [h, s, b].join(\\\",\\\") + \\\")\\\"};\\n             | };\\n             | c.attr({hsb: \\\"0.5 .8 1\\\"});\\n             | c.animate({hsb: [1, 0, 0.5]}, 1e3);\\n             \\\\*/\\n            this.ca = this.customAttributes = {};\\n        },\\n        paperproto,\\n        appendChild = \\\"appendChild\\\",\\n        apply = \\\"apply\\\",\\n        concat = \\\"concat\\\",\\n        supportsTouch = ('ontouchstart' in g.win) || g.win.DocumentTouch && g.doc instanceof DocumentTouch, //taken from Modernizr touch test\\n        E = \\\"\\\",\\n        S = \\\" \\\",\\n        Str = String,\\n        split = \\\"split\\\",\\n        events = \\\"click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel\\\"[split](S),\\n        touchMap = {\\n            mousedown: \\\"touchstart\\\",\\n            mousemove: \\\"touchmove\\\",\\n            mouseup: \\\"touchend\\\"\\n        },\\n        lowerCase = Str.prototype.toLowerCase,\\n        math = Math,\\n        mmax = math.max,\\n        mmin = math.min,\\n        abs = math.abs,\\n        pow = math.pow,\\n        PI = math.PI,\\n        nu = \\\"number\\\",\\n        string = \\\"string\\\",\\n        array = \\\"array\\\",\\n        toString = \\\"toString\\\",\\n        fillString = \\\"fill\\\",\\n        objectToString = Object.prototype.toString,\\n        paper = {},\\n        push = \\\"push\\\",\\n        ISURL = R._ISURL = /^url\\\\(['\\\"]?(.+?)['\\\"]?\\\\)$/i,\\n        colourRegExp = /^\\\\s*((#[a-f\\\\d]{6})|(#[a-f\\\\d]{3})|rgba?\\\\(\\\\s*([\\\\d\\\\.]+%?\\\\s*,\\\\s*[\\\\d\\\\.]+%?\\\\s*,\\\\s*[\\\\d\\\\.]+%?(?:\\\\s*,\\\\s*[\\\\d\\\\.]+%?)?)\\\\s*\\\\)|hsba?\\\\(\\\\s*([\\\\d\\\\.]+(?:deg|\\\\xb0|%)?\\\\s*,\\\\s*[\\\\d\\\\.]+%?\\\\s*,\\\\s*[\\\\d\\\\.]+(?:%?\\\\s*,\\\\s*[\\\\d\\\\.]+)?)%?\\\\s*\\\\)|hsla?\\\\(\\\\s*([\\\\d\\\\.]+(?:deg|\\\\xb0|%)?\\\\s*,\\\\s*[\\\\d\\\\.]+%?\\\\s*,\\\\s*[\\\\d\\\\.]+(?:%?\\\\s*,\\\\s*[\\\\d\\\\.]+)?)%?\\\\s*\\\\))\\\\s*$/i,\\n        isnan = {\\\"NaN\\\": 1, \\\"Infinity\\\": 1, \\\"-Infinity\\\": 1},\\n        bezierrg = /^(?:cubic-)?bezier\\\\(([^,]+),([^,]+),([^,]+),([^\\\\)]+)\\\\)/,\\n        round = math.round,\\n        setAttribute = \\\"setAttribute\\\",\\n        toFloat = parseFloat,\\n        toInt = parseInt,\\n        upperCase = Str.prototype.toUpperCase,\\n        availableAttrs = R._availableAttrs = {\\n            \\\"arrow-end\\\": \\\"none\\\",\\n            \\\"arrow-start\\\": \\\"none\\\",\\n            blur: 0,\\n            \\\"clip-rect\\\": \\\"0 0 1e9 1e9\\\",\\n            cursor: \\\"default\\\",\\n            cx: 0,\\n            cy: 0,\\n            fill: \\\"#fff\\\",\\n            \\\"fill-opacity\\\": 1,\\n            font: '10px \\\"Arial\\\"',\\n            \\\"font-family\\\": '\\\"Arial\\\"',\\n            \\\"font-size\\\": \\\"10\\\",\\n            \\\"font-style\\\": \\\"normal\\\",\\n            \\\"font-weight\\\": 400,\\n            gradient: 0,\\n            height: 0,\\n            href: \\\"http://raphaeljs.com/\\\",\\n            \\\"letter-spacing\\\": 0,\\n            opacity: 1,\\n            path: \\\"M0,0\\\",\\n            r: 0,\\n            rx: 0,\\n            ry: 0,\\n            src: \\\"\\\",\\n            stroke: \\\"#000\\\",\\n            \\\"stroke-dasharray\\\": \\\"\\\",\\n            \\\"stroke-linecap\\\": \\\"butt\\\",\\n            \\\"stroke-linejoin\\\": \\\"butt\\\",\\n            \\\"stroke-miterlimit\\\": 0,\\n            \\\"stroke-opacity\\\": 1,\\n            \\\"stroke-width\\\": 1,\\n            \\\"stroke-scale\\\": false, // FreeGroup: draw2d enhancement\\n            target: \\\"_blank\\\",\\n            \\\"text-anchor\\\": \\\"middle\\\",\\n            title: \\\"Raphael\\\",\\n            transform: \\\"\\\",\\n            width: 0,\\n            x: 0,\\n            y: 0\\n        },\\n        availableAnimAttrs = R._availableAnimAttrs = {\\n            blur: nu,\\n            \\\"clip-rect\\\": \\\"csv\\\",\\n            cx: nu,\\n            cy: nu,\\n            fill: \\\"colour\\\",\\n            \\\"fill-opacity\\\": nu,\\n            \\\"font-size\\\": nu,\\n            height: nu,\\n            opacity: nu,\\n            path: \\\"path\\\",\\n            r: nu,\\n            rx: nu,\\n            ry: nu,\\n            stroke: \\\"colour\\\",\\n            \\\"stroke-opacity\\\": nu,\\n            \\\"stroke-width\\\": nu,\\n            transform: \\\"transform\\\",\\n            width: nu,\\n            x: nu,\\n            y: nu\\n        },\\n        whitespace = /[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]/g,\\n        commaSpaces = /[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*,[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*/,\\n        hsrg = {hs: 1, rg: 1},\\n        p2s = /,?([achlmqrstvxz]),?/gi,\\n        pathCommand = /([achlmrqstvz])[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029,]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*,?[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*)+)/ig,\\n        tCommand = /([rstm])[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029,]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*,?[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*)+)/ig,\\n        pathValues = /(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*,?[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*/ig,\\n        radial_gradient = R._radial_gradient = /^r(?:\\\\(([^,]+?)[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*,[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*([^\\\\)]+?)\\\\))?/,\\n        eldata = {},\\n        sortByKey = function (a, b) {\\n            return a.key - b.key;\\n        },\\n        sortByNumber = function (a, b) {\\n            return toFloat(a) - toFloat(b);\\n        },\\n        fun = function () {},\\n        pipe = function (x) {\\n            return x;\\n        },\\n        rectPath = R._rectPath = function (x, y, w, h, r) {\\n            if (r) {\\n                return [[\\\"M\\\", x + r, y], [\\\"l\\\", w - r * 2, 0], [\\\"a\\\", r, r, 0, 0, 1, r, r], [\\\"l\\\", 0, h - r * 2], [\\\"a\\\", r, r, 0, 0, 1, -r, r], [\\\"l\\\", r * 2 - w, 0], [\\\"a\\\", r, r, 0, 0, 1, -r, -r], [\\\"l\\\", 0, r * 2 - h], [\\\"a\\\", r, r, 0, 0, 1, r, -r], [\\\"z\\\"]];\\n            }\\n            return [[\\\"M\\\", x, y], [\\\"l\\\", w, 0], [\\\"l\\\", 0, h], [\\\"l\\\", -w, 0], [\\\"z\\\"]];\\n        },\\n        ellipsePath = function (x, y, rx, ry) {\\n            if (ry == null) {\\n                ry = rx;\\n            }\\n            return [[\\\"M\\\", x, y], [\\\"m\\\", 0, -ry], [\\\"a\\\", rx, ry, 0, 1, 1, 0, 2 * ry], [\\\"a\\\", rx, ry, 0, 1, 1, 0, -2 * ry], [\\\"z\\\"]];\\n        },\\n        getPath = R._getPath = {\\n            path: function (el) {\\n                return el.attr(\\\"path\\\");\\n            },\\n            circle: function (el) {\\n                var a = el.attrs;\\n                return ellipsePath(a.cx, a.cy, a.r);\\n            },\\n            ellipse: function (el) {\\n                var a = el.attrs;\\n                return ellipsePath(a.cx, a.cy, a.rx, a.ry);\\n            },\\n            rect: function (el) {\\n                var a = el.attrs;\\n                return rectPath(a.x, a.y, a.width, a.height, a.r);\\n            },\\n            image: function (el) {\\n                var a = el.attrs;\\n                return rectPath(a.x, a.y, a.width, a.height);\\n            },\\n            text: function (el) {\\n                var bbox = el._getBBox();\\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\\n            },\\n            set : function(el) {\\n                var bbox = el._getBBox();\\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\\n            }\\n        },\\n    /*\\\\\\n     * Raphael.mapPath\\n     [ method ]\\n     **\\n     * Transform the path string with given matrix.\\n     > Parameters\\n     - path (string) path string\\n     - matrix (object) see @Matrix\\n     = (string) transformed path string\\n     \\\\*/\\n        mapPath = R.mapPath = function (path, matrix) {\\n            if (!matrix) {\\n                return path;\\n            }\\n            var x, y, i, j, ii, jj, pathi;\\n            path = path2curve(path);\\n            for (i = 0, ii = path.length; i < ii; i++) {\\n                pathi = path[i];\\n                for (j = 1, jj = pathi.length; j < jj; j += 2) {\\n                    x = matrix.x(pathi[j], pathi[j + 1]);\\n                    y = matrix.y(pathi[j], pathi[j + 1]);\\n                    pathi[j] = x;\\n                    pathi[j + 1] = y;\\n                }\\n            }\\n            return path;\\n        };\\n\\n    R._g = g;\\n    /*\\\\\\n     * Raphael.type\\n     [ property (string) ]\\n     **\\n     * Can be “SVG”, “VML” or empty, depending on browser support.\\n     \\\\*/\\n    R.type = (g.win.SVGAngle || g.doc.implementation.hasFeature(\\\"http://www.w3.org/TR/SVG11/feature#BasicStructure\\\", \\\"1.1\\\") ? \\\"SVG\\\" : \\\"VML\\\");\\n    if (R.type == \\\"VML\\\") {\\n        var d = g.doc.createElement(\\\"div\\\"),\\n            b;\\n        d.innerHTML = '<v:shape adj=\\\"1\\\"/>';\\n        b = d.firstChild;\\n        b.style.behavior = \\\"url(#default#VML)\\\";\\n        if (!(b && typeof b.adj == \\\"object\\\")) {\\n            return (R.type = E);\\n        }\\n        d = null;\\n    }\\n    /*\\\\\\n     * Raphael.svg\\n     [ property (boolean) ]\\n     **\\n     * `true` if browser supports SVG.\\n     \\\\*/\\n    /*\\\\\\n     * Raphael.vml\\n     [ property (boolean) ]\\n     **\\n     * `true` if browser supports VML.\\n     \\\\*/\\n    R.svg = !(R.vml = R.type == \\\"VML\\\");\\n    R._Paper = Paper;\\n    /*\\\\\\n     * Raphael.fn\\n     [ property (object) ]\\n     **\\n     * You can add your own method to the canvas. For example if you want to draw a pie chart,\\n     * you can create your own pie chart function and ship it as a Raphaël plugin. To do this\\n     * you need to extend the `Raphael.fn` object. You should modify the `fn` object before a\\n     * Raphaël instance is created, otherwise it will take no effect. Please note that the\\n     * ability for namespaced plugins was removed in Raphael 2.0. It is up to the plugin to\\n     * ensure any namespacing ensures proper context.\\n     > Usage\\n     | Raphael.fn.arrow = function (x1, y1, x2, y2, size) {\\n     |     return this.path( ... );\\n     | };\\n     | // or create namespace\\n     | Raphael.fn.mystuff = {\\n     |     arrow: function () {…},\\n     |     star: function () {…},\\n     |     // etc…\\n     | };\\n     | var paper = Raphael(10, 10, 630, 480);\\n     | // then use it\\n     | paper.arrow(10, 10, 30, 30, 5).attr({fill: \\\"#f00\\\"});\\n     | paper.mystuff.arrow();\\n     | paper.mystuff.star();\\n     \\\\*/\\n    R.fn = paperproto = Paper.prototype = R.prototype;\\n    R._id = 0;\\n    R._oid = 0;\\n    /*\\\\\\n     * Raphael.is\\n     [ method ]\\n     **\\n     * Handful of replacements for `typeof` operator.\\n     > Parameters\\n     - o (…) any object or primitive\\n     - type (string) name of the type, i.e. “string”, “function”, “number”, etc.\\n     = (boolean) is given value is of given type\\n     \\\\*/\\n    R.is = function (o, type) {\\n        type = lowerCase.call(type);\\n        if (type == \\\"finite\\\") {\\n            return !isnan[has](+o);\\n        }\\n        if (type == \\\"array\\\") {\\n            return o instanceof Array;\\n        }\\n        return  (type == \\\"null\\\" && o === null) ||\\n            (type == typeof o && o !== null) ||\\n            (type == \\\"object\\\" && o === Object(o)) ||\\n            (type == \\\"array\\\" && Array.isArray && Array.isArray(o)) ||\\n            objectToString.call(o).slice(8, -1).toLowerCase() == type;\\n    };\\n\\n    function clone(obj) {\\n        if (typeof obj == \\\"function\\\" || Object(obj) !== obj) {\\n            return obj;\\n        }\\n        var res = new obj.constructor;\\n        for (var key in obj) if (obj[has](key)) {\\n            res[key] = clone(obj[key]);\\n        }\\n        return res;\\n    }\\n\\n    /*\\\\\\n     * Raphael.angle\\n     [ method ]\\n     **\\n     * Returns angle between two or three points\\n     > Parameters\\n     - x1 (number) x coord of first point\\n     - y1 (number) y coord of first point\\n     - x2 (number) x coord of second point\\n     - y2 (number) y coord of second point\\n     - x3 (number) #optional x coord of third point\\n     - y3 (number) #optional y coord of third point\\n     = (number) angle in degrees.\\n     \\\\*/\\n    R.angle = function (x1, y1, x2, y2, x3, y3) {\\n        if (x3 == null) {\\n            var x = x1 - x2,\\n                y = y1 - y2;\\n            if (!x && !y) {\\n                return 0;\\n            }\\n            return (180 + math.atan2(-y, -x) * 180 / PI + 360) % 360;\\n        } else {\\n            return R.angle(x1, y1, x3, y3) - R.angle(x2, y2, x3, y3);\\n        }\\n    };\\n    /*\\\\\\n     * Raphael.rad\\n     [ method ]\\n     **\\n     * Transform angle to radians\\n     > Parameters\\n     - deg (number) angle in degrees\\n     = (number) angle in radians.\\n     \\\\*/\\n    R.rad = function (deg) {\\n        return deg % 360 * PI / 180;\\n    };\\n    /*\\\\\\n     * Raphael.deg\\n     [ method ]\\n     **\\n     * Transform angle to degrees\\n     > Parameters\\n     - rad (number) angle in radians\\n     = (number) angle in degrees.\\n     \\\\*/\\n    R.deg = function (rad) {\\n        return Math.round ((rad * 180 / PI% 360)* 1000) / 1000;\\n    };\\n    /*\\\\\\n     * Raphael.snapTo\\n     [ method ]\\n     **\\n     * Snaps given value to given grid.\\n     > Parameters\\n     - values (array|number) given array of values or step of the grid\\n     - value (number) value to adjust\\n     - tolerance (number) #optional tolerance for snapping. Default is `10`.\\n     = (number) adjusted value.\\n     \\\\*/\\n    R.snapTo = function (values, value, tolerance) {\\n        tolerance = R.is(tolerance, \\\"finite\\\") ? tolerance : 10;\\n        if (R.is(values, array)) {\\n            var i = values.length;\\n            while (i--) if (abs(values[i] - value) <= tolerance) {\\n                return values[i];\\n            }\\n        } else {\\n            values = +values;\\n            var rem = value % values;\\n            if (rem < tolerance) {\\n                return value - rem;\\n            }\\n            if (rem > values - tolerance) {\\n                return value - rem + values;\\n            }\\n        }\\n        return value;\\n    };\\n\\n    /*\\\\\\n     * Raphael.createUUID\\n     [ method ]\\n     **\\n     * Returns RFC4122, version 4 ID\\n     \\\\*/\\n    var createUUID = R.createUUID = (function (uuidRegEx, uuidReplacer) {\\n        return function () {\\n            return \\\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\\\".replace(uuidRegEx, uuidReplacer).toUpperCase();\\n        };\\n    })(/[xy]/g, function (c) {\\n        var r = math.random() * 16 | 0,\\n            v = c == \\\"x\\\" ? r : (r & 3 | 8);\\n        return v.toString(16);\\n    });\\n\\n    /*\\\\\\n     * Raphael.setWindow\\n     [ method ]\\n     **\\n     * Used when you need to draw in `&lt;iframe>`. Switched window to the iframe one.\\n     > Parameters\\n     - newwin (window) new window object\\n     \\\\*/\\n    R.setWindow = function (newwin) {\\n        eve(\\\"raphael.setWindow\\\", R, g.win, newwin);\\n        g.win = newwin;\\n        g.doc = g.win.document;\\n        if (R._engine.initWin) {\\n            R._engine.initWin(g.win);\\n        }\\n    };\\n    var toHex = function (color) {\\n            if (R.vml) {\\n                // http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/\\n                var trim = /^\\\\s+|\\\\s+$/g;\\n                var bod;\\n                try {\\n                    var docum = new ActiveXObject(\\\"htmlfile\\\");\\n                    docum.write(\\\"<body>\\\");\\n                    docum.close();\\n                    bod = docum.body;\\n                } catch(e) {\\n                    bod = createPopup().document.body;\\n                }\\n                var range = bod.createTextRange();\\n                toHex = cacher(function (color) {\\n                    try {\\n                        bod.style.color = Str(color).replace(trim, E);\\n                        var value = range.queryCommandValue(\\\"ForeColor\\\");\\n                        value = ((value & 255) << 16) | (value & 65280) | ((value & 16711680) >>> 16);\\n                        return \\\"#\\\" + (\\\"000000\\\" + value.toString(16)).slice(-6);\\n                    } catch(e) {\\n                        return \\\"none\\\";\\n                    }\\n                });\\n            } else {\\n                var i = g.doc.createElement(\\\"i\\\");\\n                i.title = \\\"Rapha\\\\xebl Colour Picker\\\";\\n                i.style.display = \\\"none\\\";\\n                g.doc.body.appendChild(i);\\n                toHex = cacher(function (color) {\\n                    i.style.color = color;\\n                    return g.doc.defaultView.getComputedStyle(i, E).getPropertyValue(\\\"color\\\");\\n                });\\n            }\\n            return toHex(color);\\n        },\\n        hsbtoString = function () {\\n            return \\\"hsb(\\\" + [this.h, this.s, this.b] + \\\")\\\";\\n        },\\n        hsltoString = function () {\\n            return \\\"hsl(\\\" + [this.h, this.s, this.l] + \\\")\\\";\\n        },\\n        rgbtoString = function () {\\n            return this.hex;\\n        },\\n        prepareRGB = function (r, g, b) {\\n            if (g == null && R.is(r, \\\"object\\\") && \\\"r\\\" in r && \\\"g\\\" in r && \\\"b\\\" in r) {\\n                b = r.b;\\n                g = r.g;\\n                r = r.r;\\n            }\\n            if (g == null && R.is(r, string)) {\\n                var clr = R.getRGB(r);\\n                r = clr.r;\\n                g = clr.g;\\n                b = clr.b;\\n            }\\n            if (r > 1 || g > 1 || b > 1) {\\n                r /= 255;\\n                g /= 255;\\n                b /= 255;\\n            }\\n\\n            return [r, g, b];\\n        },\\n        packageRGB = function (r, g, b, o) {\\n            r *= 255;\\n            g *= 255;\\n            b *= 255;\\n            var rgb = {\\n                r: r,\\n                g: g,\\n                b: b,\\n                hex: R.rgb(r, g, b),\\n                toString: rgbtoString\\n            };\\n            R.is(o, \\\"finite\\\") && (rgb.opacity = o);\\n            return rgb;\\n        };\\n\\n    /*\\\\\\n     * Raphael.color\\n     [ method ]\\n     **\\n     * Parses the color string and returns object with all values for the given color.\\n     > Parameters\\n     - clr (string) color string in one of the supported formats (see @Raphael.getRGB)\\n     = (object) Combined RGB & HSB object in format:\\n     o {\\n     o     r (number) red,\\n     o     g (number) green,\\n     o     b (number) blue,\\n     o     hex (string) color in HTML/CSS format: #••••••,\\n     o     error (boolean) `true` if string can’t be parsed,\\n     o     h (number) hue,\\n     o     s (number) saturation,\\n     o     v (number) value (brightness),\\n     o     l (number) lightness\\n     o }\\n     \\\\*/\\n    R.color = function (clr) {\\n        var rgb;\\n        if (R.is(clr, \\\"object\\\") && \\\"h\\\" in clr && \\\"s\\\" in clr && \\\"b\\\" in clr) {\\n            rgb = R.hsb2rgb(clr);\\n            clr.r = rgb.r;\\n            clr.g = rgb.g;\\n            clr.b = rgb.b;\\n            clr.hex = rgb.hex;\\n        } else if (R.is(clr, \\\"object\\\") && \\\"h\\\" in clr && \\\"s\\\" in clr && \\\"l\\\" in clr) {\\n            rgb = R.hsl2rgb(clr);\\n            clr.r = rgb.r;\\n            clr.g = rgb.g;\\n            clr.b = rgb.b;\\n            clr.hex = rgb.hex;\\n        } else {\\n            if (R.is(clr, \\\"string\\\")) {\\n                clr = R.getRGB(clr);\\n            }\\n            if (R.is(clr, \\\"object\\\") && \\\"r\\\" in clr && \\\"g\\\" in clr && \\\"b\\\" in clr) {\\n                rgb = R.rgb2hsl(clr);\\n                clr.h = rgb.h;\\n                clr.s = rgb.s;\\n                clr.l = rgb.l;\\n                rgb = R.rgb2hsb(clr);\\n                clr.v = rgb.b;\\n            } else {\\n                clr = {hex: \\\"none\\\"};\\n                clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;\\n            }\\n        }\\n        clr.toString = rgbtoString;\\n        return clr;\\n    };\\n    /*\\\\\\n     * Raphael.hsb2rgb\\n     [ method ]\\n     **\\n     * Converts HSB values to RGB object.\\n     > Parameters\\n     - h (number) hue\\n     - s (number) saturation\\n     - v (number) value or brightness\\n     = (object) RGB object in format:\\n     o {\\n     o     r (number) red,\\n     o     g (number) green,\\n     o     b (number) blue,\\n     o     hex (string) color in HTML/CSS format: #••••••\\n     o }\\n     \\\\*/\\n    R.hsb2rgb = function (h, s, v, o) {\\n        if (this.is(h, \\\"object\\\") && \\\"h\\\" in h && \\\"s\\\" in h && \\\"b\\\" in h) {\\n            v = h.b;\\n            s = h.s;\\n            o = h.o;\\n            h = h.h;\\n        }\\n        h *= 360;\\n        var R, G, B, X, C;\\n        h = (h % 360) / 60;\\n        C = v * s;\\n        X = C * (1 - abs(h % 2 - 1));\\n        R = G = B = v - C;\\n\\n        h = ~~h;\\n        R += [C, X, 0, 0, X, C][h];\\n        G += [X, C, C, X, 0, 0][h];\\n        B += [0, 0, X, C, C, X][h];\\n        return packageRGB(R, G, B, o);\\n    };\\n    /*\\\\\\n     * Raphael.hsl2rgb\\n     [ method ]\\n     **\\n     * Converts HSL values to RGB object.\\n     > Parameters\\n     - h (number) hue\\n     - s (number) saturation\\n     - l (number) luminosity\\n     = (object) RGB object in format:\\n     o {\\n     o     r (number) red,\\n     o     g (number) green,\\n     o     b (number) blue,\\n     o     hex (string) color in HTML/CSS format: #••••••\\n     o }\\n     \\\\*/\\n    R.hsl2rgb = function (h, s, l, o) {\\n        if (this.is(h, \\\"object\\\") && \\\"h\\\" in h && \\\"s\\\" in h && \\\"l\\\" in h) {\\n            l = h.l;\\n            s = h.s;\\n            h = h.h;\\n        }\\n        if (h > 1 || s > 1 || l > 1) {\\n            h /= 360;\\n            s /= 100;\\n            l /= 100;\\n        }\\n        h *= 360;\\n        var R, G, B, X, C;\\n        h = (h % 360) / 60;\\n        C = 2 * s * (l < .5 ? l : 1 - l);\\n        X = C * (1 - abs(h % 2 - 1));\\n        R = G = B = l - C / 2;\\n\\n        h = ~~h;\\n        R += [C, X, 0, 0, X, C][h];\\n        G += [X, C, C, X, 0, 0][h];\\n        B += [0, 0, X, C, C, X][h];\\n        return packageRGB(R, G, B, o);\\n    };\\n    /*\\\\\\n     * Raphael.rgb2hsb\\n     [ method ]\\n     **\\n     * Converts RGB values to HSB object.\\n     > Parameters\\n     - r (number) red\\n     - g (number) green\\n     - b (number) blue\\n     = (object) HSB object in format:\\n     o {\\n     o     h (number) hue\\n     o     s (number) saturation\\n     o     b (number) brightness\\n     o }\\n     \\\\*/\\n    R.rgb2hsb = function (r, g, b) {\\n        b = prepareRGB(r, g, b);\\n        r = b[0];\\n        g = b[1];\\n        b = b[2];\\n\\n        var H, S, V, C;\\n        V = mmax(r, g, b);\\n        C = V - mmin(r, g, b);\\n        H = (C == 0 ? null :\\n                V == r ? (g - b) / C :\\n                    V == g ? (b - r) / C + 2 :\\n                    (r - g) / C + 4\\n        );\\n        H = ((H + 360) % 6) * 60 / 360;\\n        S = C == 0 ? 0 : C / V;\\n        return {h: H, s: S, b: V, toString: hsbtoString};\\n    };\\n    /*\\\\\\n     * Raphael.rgb2hsl\\n     [ method ]\\n     **\\n     * Converts RGB values to HSL object.\\n     > Parameters\\n     - r (number) red\\n     - g (number) green\\n     - b (number) blue\\n     = (object) HSL object in format:\\n     o {\\n     o     h (number) hue\\n     o     s (number) saturation\\n     o     l (number) luminosity\\n     o }\\n     \\\\*/\\n    R.rgb2hsl = function (r, g, b) {\\n        b = prepareRGB(r, g, b);\\n        r = b[0];\\n        g = b[1];\\n        b = b[2];\\n\\n        var H, S, L, M, m, C;\\n        M = mmax(r, g, b);\\n        m = mmin(r, g, b);\\n        C = M - m;\\n        H = (C == 0 ? null :\\n            M == r ? (g - b) / C :\\n                M == g ? (b - r) / C + 2 :\\n                (r - g) / C + 4);\\n        H = ((H + 360) % 6) * 60 / 360;\\n        L = (M + m) / 2;\\n        S = (C == 0 ? 0 :\\n            L < .5 ? C / (2 * L) :\\n            C / (2 - 2 * L));\\n        return {h: H, s: S, l: L, toString: hsltoString};\\n    };\\n    R._path2string = function () {\\n        return this.join(\\\",\\\").replace(p2s, \\\"$1\\\");\\n    };\\n    function repush(array, item) {\\n        for (var i = 0, ii = array.length; i < ii; i++) if (array[i] === item) {\\n            return array.push(array.splice(i, 1)[0]);\\n        }\\n    }\\n    function cacher(f, scope, postprocessor) {\\n        function newf() {\\n            var arg = Array.prototype.slice.call(arguments, 0),\\n                args = arg.join(\\\"\\\\u2400\\\"),\\n                cache = newf.cache = newf.cache || {},\\n                count = newf.count = newf.count || [];\\n            if (cache[has](args)) {\\n                repush(count, args);\\n                return postprocessor ? postprocessor(cache[args]) : cache[args];\\n            }\\n            count.length >= 1e3 && delete cache[count.shift()];\\n            count.push(args);\\n            cache[args] = f[apply](scope, arg);\\n            return postprocessor ? postprocessor(cache[args]) : cache[args];\\n        }\\n        return newf;\\n    }\\n\\n    var preload = R._preload = function (src, f) {\\n        var img = g.doc.createElement(\\\"img\\\");\\n        img.style.cssText = \\\"position:absolute;left:-9999em;top:-9999em\\\";\\n        img.onload = function () {\\n            f.call(this);\\n            this.onload = null;\\n            g.doc.body.removeChild(this);\\n        };\\n        img.onerror = function () {\\n            g.doc.body.removeChild(this);\\n        };\\n        g.doc.body.appendChild(img);\\n        img.src = src;\\n    };\\n\\n    function clrToString() {\\n        return this.hex;\\n    }\\n\\n    /*\\\\\\n     * Raphael.getRGB\\n     [ method ]\\n     **\\n     * Parses colour string as RGB object\\n     > Parameters\\n     - colour (string) colour string in one of formats:\\n     # <ul>\\n     #     <li>Colour name (“<code>red</code>”, “<code>green</code>”, “<code>cornflowerblue</code>”, etc)</li>\\n     #     <li>#••• — shortened HTML colour: (“<code>#000</code>”, “<code>#fc0</code>”, etc)</li>\\n     #     <li>#•••••• — full length HTML colour: (“<code>#000000</code>”, “<code>#bd2300</code>”)</li>\\n     #     <li>rgb(•••, •••, •••) — red, green and blue channels’ values: (“<code>rgb(200,&nbsp;100,&nbsp;0)</code>”)</li>\\n     #     <li>rgb(•••%, •••%, •••%) — same as above, but in %: (“<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>”)</li>\\n     #     <li>hsb(•••, •••, •••) — hue, saturation and brightness values: (“<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>”)</li>\\n     #     <li>hsb(•••%, •••%, •••%) — same as above, but in %</li>\\n     #     <li>hsl(•••, •••, •••) — same as hsb</li>\\n     #     <li>hsl(•••%, •••%, •••%) — same as hsb</li>\\n     # </ul>\\n     = (object) RGB object in format:\\n     o {\\n     o     r (number) red,\\n     o     g (number) green,\\n     o     b (number) blue\\n     o     hex (string) color in HTML/CSS format: #••••••,\\n     o     error (boolean) true if string can’t be parsed\\n     o }\\n     \\\\*/\\n    R.getRGB = cacher(function (colour) {\\n        if (!colour || !!((colour = Str(colour)).indexOf(\\\"-\\\") + 1)) {\\n            return {r: -1, g: -1, b: -1, hex: \\\"none\\\", error: 1, toString: clrToString};\\n        }\\n        if (colour == \\\"none\\\") {\\n            return {r: -1, g: -1, b: -1, hex: \\\"none\\\", toString: clrToString};\\n        }\\n        !(hsrg[has](colour.toLowerCase().substring(0, 2)) || colour.charAt() == \\\"#\\\") && (colour = toHex(colour));\\n        var res,\\n            red,\\n            green,\\n            blue,\\n            opacity,\\n            t,\\n            values,\\n            rgb = colour.match(colourRegExp);\\n        if (rgb) {\\n            if (rgb[2]) {\\n                blue = toInt(rgb[2].substring(5), 16);\\n                green = toInt(rgb[2].substring(3, 5), 16);\\n                red = toInt(rgb[2].substring(1, 3), 16);\\n            }\\n            if (rgb[3]) {\\n                blue = toInt((t = rgb[3].charAt(3)) + t, 16);\\n                green = toInt((t = rgb[3].charAt(2)) + t, 16);\\n                red = toInt((t = rgb[3].charAt(1)) + t, 16);\\n            }\\n            if (rgb[4]) {\\n                values = rgb[4][split](commaSpaces);\\n                red = toFloat(values[0]);\\n                values[0].slice(-1) == \\\"%\\\" && (red *= 2.55);\\n                green = toFloat(values[1]);\\n                values[1].slice(-1) == \\\"%\\\" && (green *= 2.55);\\n                blue = toFloat(values[2]);\\n                values[2].slice(-1) == \\\"%\\\" && (blue *= 2.55);\\n                rgb[1].toLowerCase().slice(0, 4) == \\\"rgba\\\" && (opacity = toFloat(values[3]));\\n                values[3] && values[3].slice(-1) == \\\"%\\\" && (opacity /= 100);\\n            }\\n            if (rgb[5]) {\\n                values = rgb[5][split](commaSpaces);\\n                red = toFloat(values[0]);\\n                values[0].slice(-1) == \\\"%\\\" && (red *= 2.55);\\n                green = toFloat(values[1]);\\n                values[1].slice(-1) == \\\"%\\\" && (green *= 2.55);\\n                blue = toFloat(values[2]);\\n                values[2].slice(-1) == \\\"%\\\" && (blue *= 2.55);\\n                (values[0].slice(-3) == \\\"deg\\\" || values[0].slice(-1) == \\\"\\\\xb0\\\") && (red /= 360);\\n                rgb[1].toLowerCase().slice(0, 4) == \\\"hsba\\\" && (opacity = toFloat(values[3]));\\n                values[3] && values[3].slice(-1) == \\\"%\\\" && (opacity /= 100);\\n                return R.hsb2rgb(red, green, blue, opacity);\\n            }\\n            if (rgb[6]) {\\n                values = rgb[6][split](commaSpaces);\\n                red = toFloat(values[0]);\\n                values[0].slice(-1) == \\\"%\\\" && (red *= 2.55);\\n                green = toFloat(values[1]);\\n                values[1].slice(-1) == \\\"%\\\" && (green *= 2.55);\\n                blue = toFloat(values[2]);\\n                values[2].slice(-1) == \\\"%\\\" && (blue *= 2.55);\\n                (values[0].slice(-3) == \\\"deg\\\" || values[0].slice(-1) == \\\"\\\\xb0\\\") && (red /= 360);\\n                rgb[1].toLowerCase().slice(0, 4) == \\\"hsla\\\" && (opacity = toFloat(values[3]));\\n                values[3] && values[3].slice(-1) == \\\"%\\\" && (opacity /= 100);\\n                return R.hsl2rgb(red, green, blue, opacity);\\n            }\\n            rgb = {r: red, g: green, b: blue, toString: clrToString};\\n            rgb.hex = \\\"#\\\" + (16777216 | blue | (green << 8) | (red << 16)).toString(16).slice(1);\\n            R.is(opacity, \\\"finite\\\") && (rgb.opacity = opacity);\\n            return rgb;\\n        }\\n        return {r: -1, g: -1, b: -1, hex: \\\"none\\\", error: 1, toString: clrToString};\\n    }, R);\\n    /*\\\\\\n     * Raphael.hsb\\n     [ method ]\\n     **\\n     * Converts HSB values to hex representation of the colour.\\n     > Parameters\\n     - h (number) hue\\n     - s (number) saturation\\n     - b (number) value or brightness\\n     = (string) hex representation of the colour.\\n     \\\\*/\\n    R.hsb = cacher(function (h, s, b) {\\n        return R.hsb2rgb(h, s, b).hex;\\n    });\\n    /*\\\\\\n     * Raphael.hsl\\n     [ method ]\\n     **\\n     * Converts HSL values to hex representation of the colour.\\n     > Parameters\\n     - h (number) hue\\n     - s (number) saturation\\n     - l (number) luminosity\\n     = (string) hex representation of the colour.\\n     \\\\*/\\n    R.hsl = cacher(function (h, s, l) {\\n        return R.hsl2rgb(h, s, l).hex;\\n    });\\n    /*\\\\\\n     * Raphael.rgb\\n     [ method ]\\n     **\\n     * Converts RGB values to hex representation of the colour.\\n     > Parameters\\n     - r (number) red\\n     - g (number) green\\n     - b (number) blue\\n     = (string) hex representation of the colour.\\n     \\\\*/\\n    R.rgb = cacher(function (r, g, b) {\\n        function round(x) { return (x + 0.5) | 0; }\\n        return \\\"#\\\" + (16777216 | round(b) | (round(g) << 8) | (round(r) << 16)).toString(16).slice(1);\\n    });\\n    /*\\\\\\n     * Raphael.getColor\\n     [ method ]\\n     **\\n     * On each call returns next colour in the spectrum. To reset it back to red call @Raphael.getColor.reset\\n     > Parameters\\n     - value (number) #optional brightness, default is `0.75`\\n     = (string) hex representation of the colour.\\n     \\\\*/\\n    R.getColor = function (value) {\\n        var start = this.getColor.start = this.getColor.start || {h: 0, s: 1, b: value || .75},\\n            rgb = this.hsb2rgb(start.h, start.s, start.b);\\n        start.h += .075;\\n        if (start.h > 1) {\\n            start.h = 0;\\n            start.s -= .2;\\n            start.s <= 0 && (this.getColor.start = {h: 0, s: 1, b: start.b});\\n        }\\n        return rgb.hex;\\n    };\\n    /*\\\\\\n     * Raphael.getColor.reset\\n     [ method ]\\n     **\\n     * Resets spectrum position for @Raphael.getColor back to red.\\n     \\\\*/\\n    R.getColor.reset = function () {\\n        delete this.start;\\n    };\\n\\n    // http://schepers.cc/getting-to-the-point\\n    function catmullRom2bezier(crp, z) {\\n        var d = [];\\n        for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\\n            var p = [\\n                {x: +crp[i - 2], y: +crp[i - 1]},\\n                {x: +crp[i],     y: +crp[i + 1]},\\n                {x: +crp[i + 2], y: +crp[i + 3]},\\n                {x: +crp[i + 4], y: +crp[i + 5]}\\n            ];\\n            if (z) {\\n                if (!i) {\\n                    p[0] = {x: +crp[iLen - 2], y: +crp[iLen - 1]};\\n                } else if (iLen - 4 == i) {\\n                    p[3] = {x: +crp[0], y: +crp[1]};\\n                } else if (iLen - 2 == i) {\\n                    p[2] = {x: +crp[0], y: +crp[1]};\\n                    p[3] = {x: +crp[2], y: +crp[3]};\\n                }\\n            } else {\\n                if (iLen - 4 == i) {\\n                    p[3] = p[2];\\n                } else if (!i) {\\n                    p[0] = {x: +crp[i], y: +crp[i + 1]};\\n                }\\n            }\\n            d.push([\\\"C\\\",\\n                (-p[0].x + 6 * p[1].x + p[2].x) / 6,\\n                (-p[0].y + 6 * p[1].y + p[2].y) / 6,\\n                (p[1].x + 6 * p[2].x - p[3].x) / 6,\\n                (p[1].y + 6*p[2].y - p[3].y) / 6,\\n                p[2].x,\\n                p[2].y\\n            ]);\\n        }\\n\\n        return d;\\n    }\\n    /*\\\\\\n     * Raphael.parsePathString\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Parses given path string into an array of arrays of path segments.\\n     > Parameters\\n     - pathString (string|array) path string or array of segments (in the last case it will be returned straight away)\\n     = (array) array of segments.\\n     \\\\*/\\n    R.parsePathString = function (pathString) {\\n        if (!pathString) {\\n            return null;\\n        }\\n        var pth = paths(pathString);\\n        if (pth.arr) {\\n            return pathClone(pth.arr);\\n        }\\n\\n        var paramCounts = {a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0},\\n            data = [];\\n        if (R.is(pathString, array) && R.is(pathString[0], array)) { // rough assumption\\n            data = pathClone(pathString);\\n        }\\n        if (!data.length) {\\n            Str(pathString).replace(pathCommand, function (a, b, c) {\\n                var params = [],\\n                    name = b.toLowerCase();\\n                c.replace(pathValues, function (a, b) {\\n                    b && params.push(+b);\\n                });\\n                if (name == \\\"m\\\" && params.length > 2) {\\n                    data.push([b][concat](params.splice(0, 2)));\\n                    name = \\\"l\\\";\\n                    b = b == \\\"m\\\" ? \\\"l\\\" : \\\"L\\\";\\n                }\\n                if (name == \\\"r\\\") {\\n                    data.push([b][concat](params));\\n                } else while (params.length >= paramCounts[name]) {\\n                    data.push([b][concat](params.splice(0, paramCounts[name])));\\n                    if (!paramCounts[name]) {\\n                        break;\\n                    }\\n                }\\n            });\\n        }\\n        data.toString = R._path2string;\\n        pth.arr = pathClone(data);\\n        return data;\\n    };\\n    /*\\\\\\n     * Raphael.parseTransformString\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Parses given path string into an array of transformations.\\n     > Parameters\\n     - TString (string|array) transform string or array of transformations (in the last case it will be returned straight away)\\n     = (array) array of transformations.\\n     \\\\*/\\n    R.parseTransformString = cacher(function (TString) {\\n        if (!TString) {\\n            return null;\\n        }\\n        var paramCounts = {r: 3, s: 4, t: 2, m: 6},\\n            data = [];\\n        if (R.is(TString, array) && R.is(TString[0], array)) { // rough assumption\\n            data = pathClone(TString);\\n        }\\n        if (!data.length) {\\n            Str(TString).replace(tCommand, function (a, b, c) {\\n                var params = [],\\n                    name = lowerCase.call(b);\\n                c.replace(pathValues, function (a, b) {\\n                    b && params.push(+b);\\n                });\\n                data.push([b][concat](params));\\n            });\\n        }\\n        data.toString = R._path2string;\\n        return data;\\n    });\\n    // PATHS\\n    var paths = function (ps) {\\n        var p = paths.ps = paths.ps || {};\\n        if (p[ps]) {\\n            p[ps].sleep = 100;\\n        } else {\\n            p[ps] = {\\n                sleep: 100\\n            };\\n        }\\n        setTimeout(function () {\\n            for (var key in p) if (p[has](key) && key != ps) {\\n                p[key].sleep--;\\n                !p[key].sleep && delete p[key];\\n            }\\n        });\\n        return p[ps];\\n    };\\n    /*\\\\\\n     * Raphael.findDotsAtSegment\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Find dot coordinates on the given cubic bezier curve at the given t.\\n     > Parameters\\n     - p1x (number) x of the first point of the curve\\n     - p1y (number) y of the first point of the curve\\n     - c1x (number) x of the first anchor of the curve\\n     - c1y (number) y of the first anchor of the curve\\n     - c2x (number) x of the second anchor of the curve\\n     - c2y (number) y of the second anchor of the curve\\n     - p2x (number) x of the second point of the curve\\n     - p2y (number) y of the second point of the curve\\n     - t (number) position on the curve (0..1)\\n     = (object) point information in format:\\n     o {\\n     o     x: (number) x coordinate of the point\\n     o     y: (number) y coordinate of the point\\n     o     m: {\\n     o         x: (number) x coordinate of the left anchor\\n     o         y: (number) y coordinate of the left anchor\\n     o     }\\n     o     n: {\\n     o         x: (number) x coordinate of the right anchor\\n     o         y: (number) y coordinate of the right anchor\\n     o     }\\n     o     start: {\\n     o         x: (number) x coordinate of the start of the curve\\n     o         y: (number) y coordinate of the start of the curve\\n     o     }\\n     o     end: {\\n     o         x: (number) x coordinate of the end of the curve\\n     o         y: (number) y coordinate of the end of the curve\\n     o     }\\n     o     alpha: (number) angle of the curve derivative at the point\\n     o }\\n     \\\\*/\\n    R.findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\\n        var t1 = 1 - t,\\n            t13 = pow(t1, 3),\\n            t12 = pow(t1, 2),\\n            t2 = t * t,\\n            t3 = t2 * t,\\n            x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,\\n            y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,\\n            mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),\\n            my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),\\n            nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),\\n            ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),\\n            ax = t1 * p1x + t * c1x,\\n            ay = t1 * p1y + t * c1y,\\n            cx = t1 * c2x + t * p2x,\\n            cy = t1 * c2y + t * p2y,\\n            alpha = (90 - math.atan2(mx - nx, my - ny) * 180 / PI);\\n        (mx > nx || my < ny) && (alpha += 180);\\n        return {\\n            x: x,\\n            y: y,\\n            m: {x: mx, y: my},\\n            n: {x: nx, y: ny},\\n            start: {x: ax, y: ay},\\n            end: {x: cx, y: cy},\\n            alpha: alpha\\n        };\\n    };\\n    /*\\\\\\n     * Raphael.bezierBBox\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Return bounding box of a given cubic bezier curve\\n     > Parameters\\n     - p1x (number) x of the first point of the curve\\n     - p1y (number) y of the first point of the curve\\n     - c1x (number) x of the first anchor of the curve\\n     - c1y (number) y of the first anchor of the curve\\n     - c2x (number) x of the second anchor of the curve\\n     - c2y (number) y of the second anchor of the curve\\n     - p2x (number) x of the second point of the curve\\n     - p2y (number) y of the second point of the curve\\n     * or\\n     - bez (array) array of six points for bezier curve\\n     = (object) point information in format:\\n     o {\\n     o     min: {\\n     o         x: (number) x coordinate of the left point\\n     o         y: (number) y coordinate of the top point\\n     o     }\\n     o     max: {\\n     o         x: (number) x coordinate of the right point\\n     o         y: (number) y coordinate of the bottom point\\n     o     }\\n     o }\\n     \\\\*/\\n    R.bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\\n        if (!R.is(p1x, \\\"array\\\")) {\\n            p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\\n        }\\n        var bbox = curveDim.apply(null, p1x);\\n        return {\\n            x: bbox.min.x,\\n            y: bbox.min.y,\\n            x2: bbox.max.x,\\n            y2: bbox.max.y,\\n            width: bbox.max.x - bbox.min.x,\\n            height: bbox.max.y - bbox.min.y\\n        };\\n    };\\n    /*\\\\\\n     * Raphael.isPointInsideBBox\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Returns `true` if given point is inside bounding boxes.\\n     > Parameters\\n     - bbox (string) bounding box\\n     - x (string) x coordinate of the point\\n     - y (string) y coordinate of the point\\n     = (boolean) `true` if point inside\\n     \\\\*/\\n    R.isPointInsideBBox = function (bbox, x, y) {\\n        return x >= bbox.x && x <= bbox.x2 && y >= bbox.y && y <= bbox.y2;\\n    };\\n    /*\\\\\\n     * Raphael.isBBoxIntersect\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Returns `true` if two bounding boxes intersect\\n     > Parameters\\n     - bbox1 (string) first bounding box\\n     - bbox2 (string) second bounding box\\n     = (boolean) `true` if they intersect\\n     \\\\*/\\n    R.isBBoxIntersect = function (bbox1, bbox2) {\\n        var i = R.isPointInsideBBox;\\n        return i(bbox2, bbox1.x, bbox1.y)\\n            || i(bbox2, bbox1.x2, bbox1.y)\\n            || i(bbox2, bbox1.x, bbox1.y2)\\n            || i(bbox2, bbox1.x2, bbox1.y2)\\n            || i(bbox1, bbox2.x, bbox2.y)\\n            || i(bbox1, bbox2.x2, bbox2.y)\\n            || i(bbox1, bbox2.x, bbox2.y2)\\n            || i(bbox1, bbox2.x2, bbox2.y2)\\n            || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)\\n            && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\\n    };\\n    function base3(t, p1, p2, p3, p4) {\\n        var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,\\n            t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\\n        return t * t2 - 3 * p1 + 3 * p2;\\n    }\\n    function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {\\n        if (z == null) {\\n            z = 1;\\n        }\\n        z = z > 1 ? 1 : z < 0 ? 0 : z;\\n        var z2 = z / 2,\\n            n = 12,\\n            Tvalues = [-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],\\n            Cvalues = [0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],\\n            sum = 0;\\n        for (var i = 0; i < n; i++) {\\n            var ct = z2 * Tvalues[i] + z2,\\n                xbase = base3(ct, x1, x2, x3, x4),\\n                ybase = base3(ct, y1, y2, y3, y4),\\n                comb = xbase * xbase + ybase * ybase;\\n            sum += Cvalues[i] * math.sqrt(comb);\\n        }\\n        return z2 * sum;\\n    }\\n    function getTatLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {\\n        if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {\\n            return;\\n        }\\n        var t = 1,\\n            step = t / 2,\\n            t2 = t - step,\\n            l,\\n            e = .01;\\n        l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\\n        while (abs(l - ll) > e) {\\n            step /= 2;\\n            t2 += (l < ll ? 1 : -1) * step;\\n            l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\\n        }\\n        return t2;\\n    }\\n    function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {\\n        if (\\n            mmax(x1, x2) < mmin(x3, x4) ||\\n            mmin(x1, x2) > mmax(x3, x4) ||\\n            mmax(y1, y2) < mmin(y3, y4) ||\\n            mmin(y1, y2) > mmax(y3, y4)\\n        ) {\\n            return;\\n        }\\n        var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\\n            ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\\n            denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\\n\\n        if (!denominator) {\\n            return;\\n        }\\n        var px = nx / denominator,\\n            py = ny / denominator,\\n            px2 = +px.toFixed(2),\\n            py2 = +py.toFixed(2);\\n        if (\\n            px2 < +mmin(x1, x2).toFixed(2) ||\\n            px2 > +mmax(x1, x2).toFixed(2) ||\\n            px2 < +mmin(x3, x4).toFixed(2) ||\\n            px2 > +mmax(x3, x4).toFixed(2) ||\\n            py2 < +mmin(y1, y2).toFixed(2) ||\\n            py2 > +mmax(y1, y2).toFixed(2) ||\\n            py2 < +mmin(y3, y4).toFixed(2) ||\\n            py2 > +mmax(y3, y4).toFixed(2)\\n        ) {\\n            return;\\n        }\\n        return {x: px, y: py};\\n    }\\n    function inter(bez1, bez2) {\\n        return interHelper(bez1, bez2);\\n    }\\n    function interCount(bez1, bez2) {\\n        return interHelper(bez1, bez2, 1);\\n    }\\n    function interHelper(bez1, bez2, justCount) {\\n        var bbox1 = R.bezierBBox(bez1),\\n            bbox2 = R.bezierBBox(bez2);\\n        if (!R.isBBoxIntersect(bbox1, bbox2)) {\\n            return justCount ? 0 : [];\\n        }\\n        var l1 = bezlen.apply(0, bez1),\\n            l2 = bezlen.apply(0, bez2),\\n            n1 = mmax(~~(l1 / 5), 1),\\n            n2 = mmax(~~(l2 / 5), 1),\\n            dots1 = [],\\n            dots2 = [],\\n            xy = {},\\n            res = justCount ? 0 : [];\\n        for (var i = 0; i < n1 + 1; i++) {\\n            var p = R.findDotsAtSegment.apply(R, bez1.concat(i / n1));\\n            dots1.push({x: p.x, y: p.y, t: i / n1});\\n        }\\n        for (i = 0; i < n2 + 1; i++) {\\n            p = R.findDotsAtSegment.apply(R, bez2.concat(i / n2));\\n            dots2.push({x: p.x, y: p.y, t: i / n2});\\n        }\\n        for (i = 0; i < n1; i++) {\\n            for (var j = 0; j < n2; j++) {\\n                var di = dots1[i],\\n                    di1 = dots1[i + 1],\\n                    dj = dots2[j],\\n                    dj1 = dots2[j + 1],\\n                    ci = abs(di1.x - di.x) < .001 ? \\\"y\\\" : \\\"x\\\",\\n                    cj = abs(dj1.x - dj.x) < .001 ? \\\"y\\\" : \\\"x\\\",\\n                    is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\\n                if (is) {\\n                    if (xy[is.x.toFixed(4)] == is.y.toFixed(4)) {\\n                        continue;\\n                    }\\n                    xy[is.x.toFixed(4)] = is.y.toFixed(4);\\n                    var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),\\n                        t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\\n                    if (t1 >= 0 && t1 <= 1.001 && t2 >= 0 && t2 <= 1.001) {\\n                        if (justCount) {\\n                            res++;\\n                        } else {\\n                            res.push({\\n                                x: is.x,\\n                                y: is.y,\\n                                t1: mmin(t1, 1),\\n                                t2: mmin(t2, 1)\\n                            });\\n                        }\\n                    }\\n                }\\n            }\\n        }\\n        return res;\\n    }\\n    /*\\\\\\n     * Raphael.pathIntersection\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Finds intersections of two paths\\n     > Parameters\\n     - path1 (string) path string\\n     - path2 (string) path string\\n     = (array) dots of intersection\\n     o [\\n     o     {\\n     o         x: (number) x coordinate of the point\\n     o         y: (number) y coordinate of the point\\n     o         t1: (number) t value for segment of path1\\n     o         t2: (number) t value for segment of path2\\n     o         segment1: (number) order number for segment of path1\\n     o         segment2: (number) order number for segment of path2\\n     o         bez1: (array) eight coordinates representing beziér curve for the segment of path1\\n     o         bez2: (array) eight coordinates representing beziér curve for the segment of path2\\n     o     }\\n     o ]\\n     \\\\*/\\n    R.pathIntersection = function (path1, path2) {\\n        return interPathHelper(path1, path2);\\n    };\\n    R.pathIntersectionNumber = function (path1, path2) {\\n        return interPathHelper(path1, path2, 1);\\n    };\\n    function interPathHelper(path1, path2, justCount) {\\n        path1 = R._path2curve(path1);\\n        path2 = R._path2curve(path2);\\n        var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,\\n            res = justCount ? 0 : [];\\n        for (var i = 0, ii = path1.length; i < ii; i++) {\\n            var pi = path1[i];\\n            if (pi[0] == \\\"M\\\") {\\n                x1 = x1m = pi[1];\\n                y1 = y1m = pi[2];\\n            } else {\\n                if (pi[0] == \\\"C\\\") {\\n                    bez1 = [x1, y1].concat(pi.slice(1));\\n                    x1 = bez1[6];\\n                    y1 = bez1[7];\\n                } else {\\n                    bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\\n                    x1 = x1m;\\n                    y1 = y1m;\\n                }\\n                for (var j = 0, jj = path2.length; j < jj; j++) {\\n                    var pj = path2[j];\\n                    if (pj[0] == \\\"M\\\") {\\n                        x2 = x2m = pj[1];\\n                        y2 = y2m = pj[2];\\n                    } else {\\n                        if (pj[0] == \\\"C\\\") {\\n                            bez2 = [x2, y2].concat(pj.slice(1));\\n                            x2 = bez2[6];\\n                            y2 = bez2[7];\\n                        } else {\\n                            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\\n                            x2 = x2m;\\n                            y2 = y2m;\\n                        }\\n                        var intr = interHelper(bez1, bez2, justCount);\\n                        if (justCount) {\\n                            res += intr;\\n                        } else {\\n                            for (var k = 0, kk = intr.length; k < kk; k++) {\\n                                intr[k].segment1 = i;\\n                                intr[k].segment2 = j;\\n                                intr[k].bez1 = bez1;\\n                                intr[k].bez2 = bez2;\\n                            }\\n                            res = res.concat(intr);\\n                        }\\n                    }\\n                }\\n            }\\n        }\\n        return res;\\n    }\\n    /*\\\\\\n     * Raphael.isPointInsidePath\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Returns `true` if given point is inside a given closed path.\\n     > Parameters\\n     - path (string) path string\\n     - x (number) x of the point\\n     - y (number) y of the point\\n     = (boolean) true, if point is inside the path\\n     \\\\*/\\n    R.isPointInsidePath = function (path, x, y) {\\n        var bbox = R.pathBBox(path);\\n        return R.isPointInsideBBox(bbox, x, y) &&\\n            interPathHelper(path, [[\\\"M\\\", x, y], [\\\"H\\\", bbox.x2 + 10]], 1) % 2 == 1;\\n    };\\n    R._removedFactory = function (methodname) {\\n        return function () {\\n            eve(\\\"raphael.log\\\", null, \\\"Rapha\\\\xebl: you are calling to method \\\\u201c\\\" + methodname + \\\"\\\\u201d of removed object\\\", methodname);\\n        };\\n    };\\n    /*\\\\\\n     * Raphael.pathBBox\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Return bounding box of a given path\\n     > Parameters\\n     - path (string) path string\\n     = (object) bounding box\\n     o {\\n     o     x: (number) x coordinate of the left top point of the box\\n     o     y: (number) y coordinate of the left top point of the box\\n     o     x2: (number) x coordinate of the right bottom point of the box\\n     o     y2: (number) y coordinate of the right bottom point of the box\\n     o     width: (number) width of the box\\n     o     height: (number) height of the box\\n     o     cx: (number) x coordinate of the center of the box\\n     o     cy: (number) y coordinate of the center of the box\\n     o }\\n     \\\\*/\\n    var pathDimensions = R.pathBBox = function (path) {\\n            var pth = paths(path);\\n            if (pth.bbox) {\\n                var b= pth.bbox;\\n                return {x: b.x, y: b.y, width: b.width, height: b.height, x2: b.x2, y2: b.y2} ; // FREEGROUP FIX!!!!!!\\n                // raphael reuse the returned bbox. You must clone it here if the caller need the bbxo for\\n                //further calculation\\n            }\\n            if (!path) {\\n                return {x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0};\\n            }\\n            path = path2curve(path);\\n            var x = 0,\\n                y = 0,\\n                X = [],\\n                Y = [],\\n                p;\\n            for (var i = 0, ii = path.length; i < ii; i++) {\\n                p = path[i];\\n                if (p[0] == \\\"M\\\") {\\n                    x = p[1];\\n                    y = p[2];\\n                    X.push(x);\\n                    Y.push(y);\\n                } else {\\n                    var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\\n                    X = X[concat](dim.min.x, dim.max.x);\\n                    Y = Y[concat](dim.min.y, dim.max.y);\\n                    x = p[5];\\n                    y = p[6];\\n                }\\n            }\\n            var xmin = mmin[apply](0, X),\\n                ymin = mmin[apply](0, Y),\\n                xmax = mmax[apply](0, X),\\n                ymax = mmax[apply](0, Y),\\n                width = xmax - xmin,\\n                height = ymax - ymin,\\n                bb = {\\n                    x: xmin,\\n                    y: ymin,\\n                    x2: xmax,\\n                    y2: ymax,\\n                    width: width,\\n                    height: height,\\n                    cx: xmin + width / 2,\\n                    cy: ymin + height / 2\\n                };\\n            pth.bbox = clone(bb);\\n            return bb;\\n        },\\n        pathClone = function (pathArray) {\\n            var res = clone(pathArray);\\n            res.toString = R._path2string;\\n            return res;\\n        },\\n        pathToRelative = R._pathToRelative = function (pathArray) {\\n            var pth = paths(pathArray);\\n            if (pth.rel) {\\n                return pathClone(pth.rel);\\n            }\\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\\n                pathArray = R.parsePathString(pathArray);\\n            }\\n            var res = [],\\n                x = 0,\\n                y = 0,\\n                mx = 0,\\n                my = 0,\\n                start = 0;\\n            if (pathArray[0][0] == \\\"M\\\") {\\n                x = pathArray[0][1];\\n                y = pathArray[0][2];\\n                mx = x;\\n                my = y;\\n                start++;\\n                res.push([\\\"M\\\", x, y]);\\n            }\\n            for (var i = start, ii = pathArray.length; i < ii; i++) {\\n                var r = res[i] = [],\\n                    pa = pathArray[i];\\n                if (pa[0] != lowerCase.call(pa[0])) {\\n                    r[0] = lowerCase.call(pa[0]);\\n                    switch (r[0]) {\\n                        case \\\"a\\\":\\n                            r[1] = pa[1];\\n                            r[2] = pa[2];\\n                            r[3] = pa[3];\\n                            r[4] = pa[4];\\n                            r[5] = pa[5];\\n                            r[6] = +(pa[6] - x).toFixed(3);\\n                            r[7] = +(pa[7] - y).toFixed(3);\\n                            break;\\n                        case \\\"v\\\":\\n                            r[1] = +(pa[1] - y).toFixed(3);\\n                            break;\\n                        case \\\"m\\\":\\n                            mx = pa[1];\\n                            my = pa[2];\\n                        default:\\n                            for (var j = 1, jj = pa.length; j < jj; j++) {\\n                                r[j] = +(pa[j] - ((j % 2) ? x : y)).toFixed(3);\\n                            }\\n                    }\\n                } else {\\n                    r = res[i] = [];\\n                    if (pa[0] == \\\"m\\\") {\\n                        mx = pa[1] + x;\\n                        my = pa[2] + y;\\n                    }\\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\\n                        res[i][k] = pa[k];\\n                    }\\n                }\\n                var len = res[i].length;\\n                switch (res[i][0]) {\\n                    case \\\"z\\\":\\n                        x = mx;\\n                        y = my;\\n                        break;\\n                    case \\\"h\\\":\\n                        x += +res[i][len - 1];\\n                        break;\\n                    case \\\"v\\\":\\n                        y += +res[i][len - 1];\\n                        break;\\n                    default:\\n                        x += +res[i][len - 2];\\n                        y += +res[i][len - 1];\\n                }\\n            }\\n            res.toString = R._path2string;\\n            pth.rel = pathClone(res);\\n            return res;\\n        },\\n        pathToAbsolute = R._pathToAbsolute = function (pathArray) {\\n            var pth = paths(pathArray);\\n            if (pth.abs) {\\n                return pathClone(pth.abs);\\n            }\\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\\n                pathArray = R.parsePathString(pathArray);\\n            }\\n            if (!pathArray || !pathArray.length) {\\n                return [[\\\"M\\\", 0, 0]];\\n            }\\n            var res = [],\\n                x = 0,\\n                y = 0,\\n                mx = 0,\\n                my = 0,\\n                start = 0;\\n            if (pathArray[0][0] == \\\"M\\\") {\\n                x = +pathArray[0][1];\\n                y = +pathArray[0][2];\\n                mx = x;\\n                my = y;\\n                start++;\\n                res[0] = [\\\"M\\\", x, y];\\n            }\\n            var crz = pathArray.length == 3 && pathArray[0][0] == \\\"M\\\" && pathArray[1][0].toUpperCase() == \\\"R\\\" && pathArray[2][0].toUpperCase() == \\\"Z\\\";\\n            for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {\\n                res.push(r = []);\\n                pa = pathArray[i];\\n                if (pa[0] != upperCase.call(pa[0])) {\\n                    r[0] = upperCase.call(pa[0]);\\n                    switch (r[0]) {\\n                        case \\\"A\\\":\\n                            r[1] = pa[1];\\n                            r[2] = pa[2];\\n                            r[3] = pa[3];\\n                            r[4] = pa[4];\\n                            r[5] = pa[5];\\n                            r[6] = +(pa[6] + x);\\n                            r[7] = +(pa[7] + y);\\n                            break;\\n                        case \\\"V\\\":\\n                            r[1] = +pa[1] + y;\\n                            break;\\n                        case \\\"H\\\":\\n                            r[1] = +pa[1] + x;\\n                            break;\\n                        case \\\"R\\\":\\n                            var dots = [x, y][concat](pa.slice(1));\\n                            for (var j = 2, jj = dots.length; j < jj; j++) {\\n                                dots[j] = +dots[j] + x;\\n                                dots[++j] = +dots[j] + y;\\n                            }\\n                            res.pop();\\n                            res = res[concat](catmullRom2bezier(dots, crz));\\n                            break;\\n                        case \\\"M\\\":\\n                            mx = +pa[1] + x;\\n                            my = +pa[2] + y;\\n                        default:\\n                            for (j = 1, jj = pa.length; j < jj; j++) {\\n                                r[j] = +pa[j] + ((j % 2) ? x : y);\\n                            }\\n                    }\\n                } else if (pa[0] == \\\"R\\\") {\\n                    dots = [x, y][concat](pa.slice(1));\\n                    res.pop();\\n                    res = res[concat](catmullRom2bezier(dots, crz));\\n                    r = [\\\"R\\\"][concat](pa.slice(-2));\\n                } else {\\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\\n                        r[k] = pa[k];\\n                    }\\n                }\\n                switch (r[0]) {\\n                    case \\\"Z\\\":\\n                        x = mx;\\n                        y = my;\\n                        break;\\n                    case \\\"H\\\":\\n                        x = r[1];\\n                        break;\\n                    case \\\"V\\\":\\n                        y = r[1];\\n                        break;\\n                    case \\\"M\\\":\\n                        mx = r[r.length - 2];\\n                        my = r[r.length - 1];\\n                    default:\\n                        x = r[r.length - 2];\\n                        y = r[r.length - 1];\\n                }\\n            }\\n            res.toString = R._path2string;\\n            pth.abs = pathClone(res);\\n            return res;\\n        },\\n        l2c = function (x1, y1, x2, y2) {\\n            return [x1, y1, x2, y2, x2, y2];\\n        },\\n        q2c = function (x1, y1, ax, ay, x2, y2) {\\n            var _13 = 1 / 3,\\n                _23 = 2 / 3;\\n            return [\\n                _13 * x1 + _23 * ax,\\n                _13 * y1 + _23 * ay,\\n                _13 * x2 + _23 * ax,\\n                _13 * y2 + _23 * ay,\\n                x2,\\n                y2\\n            ];\\n        },\\n        a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\\n            // for more information of where this math came from visit:\\n            // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\\n            var _120 = PI * 120 / 180,\\n                rad = PI / 180 * (+angle || 0),\\n                res = [],\\n                xy,\\n                rotate = cacher(function (x, y, rad) {\\n                    var X = x * math.cos(rad) - y * math.sin(rad),\\n                        Y = x * math.sin(rad) + y * math.cos(rad);\\n                    return {x: X, y: Y};\\n                });\\n            if (!recursive) {\\n                xy = rotate(x1, y1, -rad);\\n                x1 = xy.x;\\n                y1 = xy.y;\\n                xy = rotate(x2, y2, -rad);\\n                x2 = xy.x;\\n                y2 = xy.y;\\n                var cos = math.cos(PI / 180 * angle),\\n                    sin = math.sin(PI / 180 * angle),\\n                    x = (x1 - x2) / 2,\\n                    y = (y1 - y2) / 2;\\n                var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\\n                if (h > 1) {\\n                    h = math.sqrt(h);\\n                    rx = h * rx;\\n                    ry = h * ry;\\n                }\\n                var rx2 = rx * rx,\\n                    ry2 = ry * ry,\\n                    k = (large_arc_flag == sweep_flag ? -1 : 1) *\\n                        math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\\n                    cx = k * rx * y / ry + (x1 + x2) / 2,\\n                    cy = k * -ry * x / rx + (y1 + y2) / 2,\\n                    f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\\n                    f2 = math.asin(((y2 - cy) / ry).toFixed(9));\\n\\n                f1 = x1 < cx ? PI - f1 : f1;\\n                f2 = x2 < cx ? PI - f2 : f2;\\n                f1 < 0 && (f1 = PI * 2 + f1);\\n                f2 < 0 && (f2 = PI * 2 + f2);\\n                if (sweep_flag && f1 > f2) {\\n                    f1 = f1 - PI * 2;\\n                }\\n                if (!sweep_flag && f2 > f1) {\\n                    f2 = f2 - PI * 2;\\n                }\\n            } else {\\n                f1 = recursive[0];\\n                f2 = recursive[1];\\n                cx = recursive[2];\\n                cy = recursive[3];\\n            }\\n            var df = f2 - f1;\\n            if (abs(df) > _120) {\\n                var f2old = f2,\\n                    x2old = x2,\\n                    y2old = y2;\\n                f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\\n                x2 = cx + rx * math.cos(f2);\\n                y2 = cy + ry * math.sin(f2);\\n                res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\\n            }\\n            df = f2 - f1;\\n            var c1 = math.cos(f1),\\n                s1 = math.sin(f1),\\n                c2 = math.cos(f2),\\n                s2 = math.sin(f2),\\n                t = math.tan(df / 4),\\n                hx = 4 / 3 * rx * t,\\n                hy = 4 / 3 * ry * t,\\n                m1 = [x1, y1],\\n                m2 = [x1 + hx * s1, y1 - hy * c1],\\n                m3 = [x2 + hx * s2, y2 - hy * c2],\\n                m4 = [x2, y2];\\n            m2[0] = 2 * m1[0] - m2[0];\\n            m2[1] = 2 * m1[1] - m2[1];\\n            if (recursive) {\\n                return [m2, m3, m4][concat](res);\\n            } else {\\n                res = [m2, m3, m4][concat](res).join()[split](\\\",\\\");\\n                var newres = [];\\n                for (var i = 0, ii = res.length; i < ii; i++) {\\n                    newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\\n                }\\n                return newres;\\n            }\\n        },\\n        findDotAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\\n            var t1 = 1 - t;\\n            return {\\n                x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\\n                y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y\\n            };\\n        },\\n        curveDim = cacher(function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\\n            var a = (c2x - 2 * c1x + p1x) - (p2x - 2 * c2x + c1x),\\n                b = 2 * (c1x - p1x) - 2 * (c2x - c1x),\\n                c = p1x - c1x,\\n                t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a,\\n                t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a,\\n                y = [p1y, p2y],\\n                x = [p1x, p2x],\\n                dot;\\n            abs(t1) > \\\"1e12\\\" && (t1 = .5);\\n            abs(t2) > \\\"1e12\\\" && (t2 = .5);\\n            if (t1 > 0 && t1 < 1) {\\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\\n                x.push(dot.x);\\n                y.push(dot.y);\\n            }\\n            if (t2 > 0 && t2 < 1) {\\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\\n                x.push(dot.x);\\n                y.push(dot.y);\\n            }\\n            a = (c2y - 2 * c1y + p1y) - (p2y - 2 * c2y + c1y);\\n            b = 2 * (c1y - p1y) - 2 * (c2y - c1y);\\n            c = p1y - c1y;\\n            t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a;\\n            t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a;\\n            abs(t1) > \\\"1e12\\\" && (t1 = .5);\\n            abs(t2) > \\\"1e12\\\" && (t2 = .5);\\n            if (t1 > 0 && t1 < 1) {\\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\\n                x.push(dot.x);\\n                y.push(dot.y);\\n            }\\n            if (t2 > 0 && t2 < 1) {\\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\\n                x.push(dot.x);\\n                y.push(dot.y);\\n            }\\n            return {\\n                min: {x: mmin[apply](0, x), y: mmin[apply](0, y)},\\n                max: {x: mmax[apply](0, x), y: mmax[apply](0, y)}\\n            };\\n        }),\\n        path2curve = R._path2curve = cacher(function (path, path2) {\\n            var pth = !path2 && paths(path);\\n            if (!path2 && pth.curve) {\\n                return pathClone(pth.curve);\\n            }\\n            var p = pathToAbsolute(path),\\n                p2 = path2 && pathToAbsolute(path2),\\n                attrs = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\\n                attrs2 = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\\n                processPath = function (path, d, pcom) {\\n                    var nx, ny, tq = {T:1, Q:1};\\n                    if (!path) {\\n                        return [\\\"C\\\", d.x, d.y, d.x, d.y, d.x, d.y];\\n                    }\\n                    !(path[0] in tq) && (d.qx = d.qy = null);\\n                    switch (path[0]) {\\n                        case \\\"M\\\":\\n                            d.X = path[1];\\n                            d.Y = path[2];\\n                            break;\\n                        case \\\"A\\\":\\n                            path = [\\\"C\\\"][concat](a2c[apply](0, [d.x, d.y][concat](path.slice(1))));\\n                            break;\\n                        case \\\"S\\\":\\n                            if (pcom == \\\"C\\\" || pcom == \\\"S\\\") { // In \\\"S\\\" case we have to take into account, if the previous command is C/S.\\n                                nx = d.x * 2 - d.bx;          // And reflect the previous\\n                                ny = d.y * 2 - d.by;          // command's control point relative to the current point.\\n                            }\\n                            else {                            // or some else or nothing\\n                                nx = d.x;\\n                                ny = d.y;\\n                            }\\n                            path = [\\\"C\\\", nx, ny][concat](path.slice(1));\\n                            break;\\n                        case \\\"T\\\":\\n                            if (pcom == \\\"Q\\\" || pcom == \\\"T\\\") { // In \\\"T\\\" case we have to take into account, if the previous command is Q/T.\\n                                d.qx = d.x * 2 - d.qx;        // And make a reflection similar\\n                                d.qy = d.y * 2 - d.qy;        // to case \\\"S\\\".\\n                            }\\n                            else {                            // or something else or nothing\\n                                d.qx = d.x;\\n                                d.qy = d.y;\\n                            }\\n                            path = [\\\"C\\\"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\\n                            break;\\n                        case \\\"Q\\\":\\n                            d.qx = path[1];\\n                            d.qy = path[2];\\n                            path = [\\\"C\\\"][concat](q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\\n                            break;\\n                        case \\\"L\\\":\\n                            path = [\\\"C\\\"][concat](l2c(d.x, d.y, path[1], path[2]));\\n                            break;\\n                        case \\\"H\\\":\\n                            path = [\\\"C\\\"][concat](l2c(d.x, d.y, path[1], d.y));\\n                            break;\\n                        case \\\"V\\\":\\n                            path = [\\\"C\\\"][concat](l2c(d.x, d.y, d.x, path[1]));\\n                            break;\\n                        case \\\"Z\\\":\\n                            path = [\\\"C\\\"][concat](l2c(d.x, d.y, d.X, d.Y));\\n                            break;\\n                    }\\n                    return path;\\n                },\\n                fixArc = function (pp, i) {\\n                    if (pp[i].length > 7) {\\n                        pp[i].shift();\\n                        var pi = pp[i];\\n                        while (pi.length) {\\n                            pcoms1[i]=\\\"A\\\"; // if created multiple C:s, their original seg is saved\\n                            p2 && (pcoms2[i]=\\\"A\\\"); // the same as above\\n                            pp.splice(i++, 0, [\\\"C\\\"][concat](pi.splice(0, 6)));\\n                        }\\n                        pp.splice(i, 1);\\n                        ii = mmax(p.length, p2 && p2.length || 0);\\n                    }\\n                },\\n                fixM = function (path1, path2, a1, a2, i) {\\n                    if (path1 && path2 && path1[i][0] == \\\"M\\\" && path2[i][0] != \\\"M\\\") {\\n                        path2.splice(i, 0, [\\\"M\\\", a2.x, a2.y]);\\n                        a1.bx = 0;\\n                        a1.by = 0;\\n                        a1.x = path1[i][1];\\n                        a1.y = path1[i][2];\\n                        ii = mmax(p.length, p2 && p2.length || 0);\\n                    }\\n                },\\n                pcoms1 = [], // path commands of original path p\\n                pcoms2 = [], // path commands of original path p2\\n                pfirst = \\\"\\\", // temporary holder for original path command\\n                pcom = \\\"\\\"; // holder for previous path command of original path\\n            for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {\\n                p[i] && (pfirst = p[i][0]); // save current path command\\n\\n                if (pfirst != \\\"C\\\") // C is not saved yet, because it may be result of conversion\\n                {\\n                    pcoms1[i] = pfirst; // Save current path command\\n                    i && ( pcom = pcoms1[i-1]); // Get previous path command pcom\\n                }\\n                p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\\n\\n                if (pcoms1[i] != \\\"A\\\" && pfirst == \\\"C\\\") pcoms1[i] = \\\"C\\\"; // A is the only command\\n                // which may produce multiple C:s\\n                // so we have to make sure that C is also C in original path\\n\\n                fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1\\n\\n                if (p2) { // the same procedures is done to p2\\n                    p2[i] && (pfirst = p2[i][0]);\\n                    if (pfirst != \\\"C\\\")\\n                    {\\n                        pcoms2[i] = pfirst;\\n                        i && (pcom = pcoms2[i-1]);\\n                    }\\n                    p2[i] = processPath(p2[i], attrs2, pcom);\\n\\n                    if (pcoms2[i]!=\\\"A\\\" && pfirst==\\\"C\\\") pcoms2[i]=\\\"C\\\";\\n\\n                    fixArc(p2, i);\\n                }\\n                fixM(p, p2, attrs, attrs2, i);\\n                fixM(p2, p, attrs2, attrs, i);\\n                var seg = p[i],\\n                    seg2 = p2 && p2[i],\\n                    seglen = seg.length,\\n                    seg2len = p2 && seg2.length;\\n                attrs.x = seg[seglen - 2];\\n                attrs.y = seg[seglen - 1];\\n                attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\\n                attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\\n                attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);\\n                attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);\\n                attrs2.x = p2 && seg2[seg2len - 2];\\n                attrs2.y = p2 && seg2[seg2len - 1];\\n            }\\n            if (!p2) {\\n                pth.curve = pathClone(p);\\n            }\\n            return p2 ? [p, p2] : p;\\n        }, null, pathClone),\\n        parseDots = R._parseDots = cacher(function (gradient) {\\n            var dots = [];\\n            for (var i = 0, ii = gradient.length; i < ii; i++) {\\n                var dot = {},\\n                    par = gradient[i].match(/^([^:]*):?([\\\\d\\\\.]*)/);\\n                dot.color = R.getRGB(par[1]);\\n                if (dot.color.error) {\\n                    return null;\\n                }\\n                dot.opacity = dot.color.opacity;\\n                dot.color = dot.color.hex;\\n                par[2] && (dot.offset = par[2] + \\\"%\\\");\\n                dots.push(dot);\\n            }\\n            for (i = 1, ii = dots.length - 1; i < ii; i++) {\\n                if (!dots[i].offset) {\\n                    var start = toFloat(dots[i - 1].offset || 0),\\n                        end = 0;\\n                    for (var j = i + 1; j < ii; j++) {\\n                        if (dots[j].offset) {\\n                            end = dots[j].offset;\\n                            break;\\n                        }\\n                    }\\n                    if (!end) {\\n                        end = 100;\\n                        j = ii;\\n                    }\\n                    end = toFloat(end);\\n                    var d = (end - start) / (j - i + 1);\\n                    for (; i < j; i++) {\\n                        start += d;\\n                        dots[i].offset = start + \\\"%\\\";\\n                    }\\n                }\\n            }\\n            return dots;\\n        }),\\n        tear = R._tear = function (el, paper) {\\n            el == paper.top && (paper.top = el.prev);\\n            el == paper.bottom && (paper.bottom = el.next);\\n            el.next && (el.next.prev = el.prev);\\n            el.prev && (el.prev.next = el.next);\\n        },\\n        tofront = R._tofront = function (el, paper) {\\n            if (paper.top === el) {\\n                return;\\n            }\\n            tear(el, paper);\\n            el.next = null;\\n            el.prev = paper.top;\\n            paper.top.next = el;\\n            paper.top = el;\\n        },\\n        toback = R._toback = function (el, paper) {\\n            if (paper.bottom === el) {\\n                return;\\n            }\\n            tear(el, paper);\\n            el.next = paper.bottom;\\n            el.prev = null;\\n            paper.bottom.prev = el;\\n            paper.bottom = el;\\n        },\\n        insertafter = R._insertafter = function (el, el2, paper) {\\n            tear(el, paper);\\n            el2 == paper.top && (paper.top = el);\\n            el2.next && (el2.next.prev = el);\\n            el.next = el2.next;\\n            el.prev = el2;\\n            el2.next = el;\\n        },\\n        insertbefore = R._insertbefore = function (el, el2, paper) {\\n            tear(el, paper);\\n            el2 == paper.bottom && (paper.bottom = el);\\n            el2.prev && (el2.prev.next = el);\\n            el.prev = el2.prev;\\n            el2.prev = el;\\n            el.next = el2;\\n        },\\n    /*\\\\\\n     * Raphael.toMatrix\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Returns matrix of transformations applied to a given path\\n     > Parameters\\n     - path (string) path string\\n     - transform (string|array) transformation string\\n     = (object) @Matrix\\n     \\\\*/\\n        toMatrix = R.toMatrix = function (path, transform) {\\n            var bb = pathDimensions(path),\\n                el = {\\n                    _: {\\n                        transform: E\\n                    },\\n                    getBBox: function () {\\n                        return bb;\\n                    }\\n                };\\n            extractTransform(el, transform);\\n            return el.matrix;\\n        },\\n    /*\\\\\\n     * Raphael.transformPath\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Returns path transformed by a given transformation\\n     > Parameters\\n     - path (string) path string\\n     - transform (string|array) transformation string\\n     = (string) path\\n     \\\\*/\\n        transformPath = R.transformPath = function (path, transform) {\\n            return mapPath(path, toMatrix(path, transform));\\n        },\\n        extractTransform = R._extractTransform = function (el, tstr) {\\n            if (tstr == null) {\\n                return el._.transform;\\n            }\\n            tstr = Str(tstr).replace(/\\\\.{3}|\\\\u2026/g, el._.transform || E);\\n            var tdata = R.parseTransformString(tstr),\\n                deg = 0,\\n                dx = 0,\\n                dy = 0,\\n                sx = 1,\\n                sy = 1,\\n                _ = el._,\\n                m = new Matrix;\\n            _.transform = tdata || [];\\n            if (tdata) {\\n                for (var i = 0, ii = tdata.length; i < ii; i++) {\\n                    var t = tdata[i],\\n                        tlen = t.length,\\n                        command = Str(t[0]).toLowerCase(),\\n                        absolute = t[0] != command,\\n                        inver = absolute ? m.invert() : 0,\\n                        x1,\\n                        y1,\\n                        x2,\\n                        y2,\\n                        bb;\\n                    if (command == \\\"t\\\" && tlen == 3) {\\n                        if (absolute) {\\n                            x1 = inver.x(0, 0);\\n                            y1 = inver.y(0, 0);\\n                            x2 = inver.x(t[1], t[2]);\\n                            y2 = inver.y(t[1], t[2]);\\n                            m.translate(x2 - x1, y2 - y1);\\n                        } else {\\n                            m.translate(t[1], t[2]);\\n                        }\\n                    } else if (command == \\\"r\\\") {\\n                        if (tlen == 2) {\\n                            bb = bb || el.getBBox(1);\\n                            m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);\\n                            deg += t[1];\\n                        } else if (tlen == 4) {\\n                            if (absolute) {\\n                                x2 = inver.x(t[2], t[3]);\\n                                y2 = inver.y(t[2], t[3]);\\n                                m.rotate(t[1], x2, y2);\\n                            } else {\\n                                m.rotate(t[1], t[2], t[3]);\\n                            }\\n                            deg += t[1];\\n                        }\\n                    } else if (command == \\\"s\\\") {\\n                        if (tlen == 2 || tlen == 3) {\\n                            bb = bb || el.getBBox(1);\\n                            m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);\\n                            sx *= t[1];\\n                            sy *= t[tlen - 1];\\n                        } else if (tlen == 5) {\\n                            if (absolute) {\\n                                x2 = inver.x(t[3], t[4]);\\n                                y2 = inver.y(t[3], t[4]);\\n                                m.scale(t[1], t[2], x2, y2);\\n                            } else {\\n                                m.scale(t[1], t[2], t[3], t[4]);\\n                            }\\n                            sx *= t[1];\\n                            sy *= t[2];\\n                        }\\n                    } else if (command == \\\"m\\\" && tlen == 7) {\\n                        m.add(t[1], t[2], t[3], t[4], t[5], t[6]);\\n                    }\\n                    _.dirtyT = 1;\\n                    el.matrix = m;\\n                }\\n            }\\n\\n            /*\\\\\\n             * Element.matrix\\n             [ property (object) ]\\n             **\\n             * Keeps @Matrix object, which represents element transformation\\n             \\\\*/\\n            el.matrix = m;\\n\\n            _.sx = sx;\\n            _.sy = sy;\\n            _.deg = deg;\\n            _.dx = dx = m.e;\\n            _.dy = dy = m.f;\\n\\n            if (sx == 1 && sy == 1 && !deg && _.bbox) {\\n                _.bbox.x += +dx;\\n                _.bbox.y += +dy;\\n            } else {\\n                _.dirtyT = 1;\\n            }\\n        },\\n        getEmpty = function (item) {\\n            var l = item[0];\\n            switch (l.toLowerCase()) {\\n                case \\\"t\\\": return [l, 0, 0];\\n                case \\\"m\\\": return [l, 1, 0, 0, 1, 0, 0];\\n                case \\\"r\\\": if (item.length == 4) {\\n                    return [l, 0, item[2], item[3]];\\n                } else {\\n                    return [l, 0];\\n                }\\n                case \\\"s\\\": if (item.length == 5) {\\n                    return [l, 1, 1, item[3], item[4]];\\n                } else if (item.length == 3) {\\n                    return [l, 1, 1];\\n                } else {\\n                    return [l, 1];\\n                }\\n            }\\n        },\\n        equaliseTransform = R._equaliseTransform = function (t1, t2) {\\n            t2 = Str(t2).replace(/\\\\.{3}|\\\\u2026/g, t1);\\n            t1 = R.parseTransformString(t1) || [];\\n            t2 = R.parseTransformString(t2) || [];\\n            var maxlength = mmax(t1.length, t2.length),\\n                from = [],\\n                to = [],\\n                i = 0, j, jj,\\n                tt1, tt2;\\n            for (; i < maxlength; i++) {\\n                tt1 = t1[i] || getEmpty(t2[i]);\\n                tt2 = t2[i] || getEmpty(tt1);\\n                if ((tt1[0] != tt2[0]) ||\\n                    (tt1[0].toLowerCase() == \\\"r\\\" && (tt1[2] != tt2[2] || tt1[3] != tt2[3])) ||\\n                    (tt1[0].toLowerCase() == \\\"s\\\" && (tt1[3] != tt2[3] || tt1[4] != tt2[4]))\\n                ) {\\n                    return;\\n                }\\n                from[i] = [];\\n                to[i] = [];\\n                for (j = 0, jj = mmax(tt1.length, tt2.length); j < jj; j++) {\\n                    j in tt1 && (from[i][j] = tt1[j]);\\n                    j in tt2 && (to[i][j] = tt2[j]);\\n                }\\n            }\\n            return {\\n                from: from,\\n                to: to\\n            };\\n        };\\n    R._getContainer = function (x, y, w, h) {\\n        var container;\\n        container = h == null && !R.is(x, \\\"object\\\") ? g.doc.getElementById(x) : x;\\n        if (container == null) {\\n            return;\\n        }\\n        if (container.tagName) {\\n            if (y == null) {\\n                return {\\n                    container: container,\\n                    width: container.style.pixelWidth || container.offsetWidth,\\n                    height: container.style.pixelHeight || container.offsetHeight\\n                };\\n            } else {\\n                return {\\n                    container: container,\\n                    width: y,\\n                    height: w\\n                };\\n            }\\n        }\\n        return {\\n            container: 1,\\n            x: x,\\n            y: y,\\n            width: w,\\n            height: h\\n        };\\n    };\\n    /*\\\\\\n     * Raphael.pathToRelative\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Converts path to relative form\\n     > Parameters\\n     - pathString (string|array) path string or array of segments\\n     = (array) array of segments.\\n     \\\\*/\\n    R.pathToRelative = pathToRelative;\\n    R._engine = {};\\n    /*\\\\\\n     * Raphael.path2curve\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Converts path to a new path where all segments are cubic bezier curves.\\n     > Parameters\\n     - pathString (string|array) path string or array of segments\\n     = (array) array of segments.\\n     \\\\*/\\n    R.path2curve = path2curve;\\n    /*\\\\\\n     * Raphael.matrix\\n     [ method ]\\n     **\\n     * Utility method\\n     **\\n     * Returns matrix based on given parameters.\\n     > Parameters\\n     - a (number)\\n     - b (number)\\n     - c (number)\\n     - d (number)\\n     - e (number)\\n     - f (number)\\n     = (object) @Matrix\\n     \\\\*/\\n    R.matrix = function (a, b, c, d, e, f) {\\n        return new Matrix(a, b, c, d, e, f);\\n    };\\n    function Matrix(a, b, c, d, e, f) {\\n        if (a != null) {\\n            this.a = +a;\\n            this.b = +b;\\n            this.c = +c;\\n            this.d = +d;\\n            this.e = +e;\\n            this.f = +f;\\n        } else {\\n            this.a = 1;\\n            this.b = 0;\\n            this.c = 0;\\n            this.d = 1;\\n            this.e = 0;\\n            this.f = 0;\\n        }\\n    }\\n    (function (matrixproto) {\\n        /*\\\\\\n         * Matrix.add\\n         [ method ]\\n         **\\n         * Adds given matrix to existing one.\\n         > Parameters\\n         - a (number)\\n         - b (number)\\n         - c (number)\\n         - d (number)\\n         - e (number)\\n         - f (number)\\n         or\\n         - matrix (object) @Matrix\\n         \\\\*/\\n        matrixproto.add = function (a, b, c, d, e, f) {\\n            var out = [[], [], []],\\n                m = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]],\\n                matrix = [[a, c, e], [b, d, f], [0, 0, 1]],\\n                x, y, z, res;\\n\\n            if (a && a instanceof Matrix) {\\n                matrix = [[a.a, a.c, a.e], [a.b, a.d, a.f], [0, 0, 1]];\\n            }\\n\\n            for (x = 0; x < 3; x++) {\\n                for (y = 0; y < 3; y++) {\\n                    res = 0;\\n                    for (z = 0; z < 3; z++) {\\n                        res += m[x][z] * matrix[z][y];\\n                    }\\n                    out[x][y] = res;\\n                }\\n            }\\n            this.a = out[0][0];\\n            this.b = out[1][0];\\n            this.c = out[0][1];\\n            this.d = out[1][1];\\n            this.e = out[0][2];\\n            this.f = out[1][2];\\n        };\\n        /*\\\\\\n         * Matrix.invert\\n         [ method ]\\n         **\\n         * Returns inverted version of the matrix\\n         = (object) @Matrix\\n         \\\\*/\\n        matrixproto.invert = function () {\\n            var me = this,\\n                x = me.a * me.d - me.b * me.c;\\n            return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);\\n        };\\n        /*\\\\\\n         * Matrix.clone\\n         [ method ]\\n         **\\n         * Returns copy of the matrix\\n         = (object) @Matrix\\n         \\\\*/\\n        matrixproto.clone = function () {\\n            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\\n        };\\n        /*\\\\\\n         * Matrix.translate\\n         [ method ]\\n         **\\n         * Translate the matrix\\n         > Parameters\\n         - x (number)\\n         - y (number)\\n         \\\\*/\\n        matrixproto.translate = function (x, y) {\\n            this.add(1, 0, 0, 1, x, y);\\n        };\\n        /*\\\\\\n         * Matrix.scale\\n         [ method ]\\n         **\\n         * Scales the matrix\\n         > Parameters\\n         - x (number)\\n         - y (number) #optional\\n         - cx (number) #optional\\n         - cy (number) #optional\\n         \\\\*/\\n        matrixproto.scale = function (x, y, cx, cy) {\\n            y == null && (y = x);\\n            (cx || cy) && this.add(1, 0, 0, 1, cx, cy);\\n            this.add(x, 0, 0, y, 0, 0);\\n            (cx || cy) && this.add(1, 0, 0, 1, -cx, -cy);\\n        };\\n        /*\\\\\\n         * Matrix.rotate\\n         [ method ]\\n         **\\n         * Rotates the matrix\\n         > Parameters\\n         - a (number)\\n         - x (number)\\n         - y (number)\\n         \\\\*/\\n        matrixproto.rotate = function (a, x, y) {\\n            a = R.rad(a);\\n            x = x || 0;\\n            y = y || 0;\\n            var cos = +math.cos(a).toFixed(9),\\n                sin = +math.sin(a).toFixed(9);\\n            this.add(cos, sin, -sin, cos, x, y);\\n            this.add(1, 0, 0, 1, -x, -y);\\n        };\\n        /*\\\\\\n         * Matrix.x\\n         [ method ]\\n         **\\n         * Return x coordinate for given point after transformation described by the matrix. See also @Matrix.y\\n         > Parameters\\n         - x (number)\\n         - y (number)\\n         = (number) x\\n         \\\\*/\\n        matrixproto.x = function (x, y) {\\n            return x * this.a + y * this.c + this.e;\\n        };\\n        /*\\\\\\n         * Matrix.y\\n         [ method ]\\n         **\\n         * Return y coordinate for given point after transformation described by the matrix. See also @Matrix.x\\n         > Parameters\\n         - x (number)\\n         - y (number)\\n         = (number) y\\n         \\\\*/\\n        matrixproto.y = function (x, y) {\\n            return x * this.b + y * this.d + this.f;\\n        };\\n        matrixproto.get = function (i) {\\n            return +this[Str.fromCharCode(97 + i)].toFixed(4);\\n        };\\n        matrixproto.toString = function () {\\n            return R.svg ?\\n            \\\"matrix(\\\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + \\\")\\\" :\\n                [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join();\\n        };\\n        matrixproto.toFilter = function () {\\n            return \\\"progid:DXImageTransform.Microsoft.Matrix(M11=\\\" + this.get(0) +\\n                \\\", M12=\\\" + this.get(2) + \\\", M21=\\\" + this.get(1) + \\\", M22=\\\" + this.get(3) +\\n                \\\", Dx=\\\" + this.get(4) + \\\", Dy=\\\" + this.get(5) + \\\", sizingmethod='auto expand')\\\";\\n        };\\n        matrixproto.offset = function () {\\n            return [this.e.toFixed(4), this.f.toFixed(4)];\\n        };\\n        function norm(a) {\\n            return a[0] * a[0] + a[1] * a[1];\\n        }\\n        function normalize(a) {\\n            var mag = math.sqrt(norm(a));\\n            a[0] && (a[0] /= mag);\\n            a[1] && (a[1] /= mag);\\n        }\\n        /*\\\\\\n         * Matrix.split\\n         [ method ]\\n         **\\n         * Splits matrix into primitive transformations\\n         = (object) in format:\\n         o dx (number) translation by x\\n         o dy (number) translation by y\\n         o scalex (number) scale by x\\n         o scaley (number) scale by y\\n         o shear (number) shear\\n         o rotate (number) rotation in deg\\n         o isSimple (boolean) could it be represented via simple transformations\\n         \\\\*/\\n        matrixproto.split = function () {\\n            var out = {};\\n            // translation\\n            out.dx = this.e;\\n            out.dy = this.f;\\n\\n            // scale and shear\\n            var row = [[this.a, this.c], [this.b, this.d]];\\n            out.scalex = math.sqrt(norm(row[0]));\\n            normalize(row[0]);\\n\\n            out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];\\n            row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];\\n\\n            out.scaley = math.sqrt(norm(row[1]));\\n            normalize(row[1]);\\n            out.shear /= out.scaley;\\n\\n            // rotation\\n            var sin = -row[0][1],\\n                cos = row[1][1];\\n            if (cos < 0) {\\n                out.rotate = R.deg(math.acos(cos));\\n                if (sin < 0) {\\n                    out.rotate = 360 - out.rotate;\\n                }\\n            } else {\\n                out.rotate = R.deg(math.asin(sin));\\n            }\\n\\n            out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) == out.scaley.toFixed(9) || !out.rotate);\\n            out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) == out.scaley.toFixed(9) && !out.rotate;\\n            out.noRotation = !+out.shear.toFixed(9) && !out.rotate;\\n            return out;\\n        };\\n        /*\\\\\\n         * Matrix.toTransformString\\n         [ method ]\\n         **\\n         * Return transform string that represents given matrix\\n         = (string) transform string\\n         \\\\*/\\n        matrixproto.toTransformString = function (shorter) {\\n            var s = shorter || this[split]();\\n            if (s.isSimple) {\\n                s.scalex = +s.scalex.toFixed(4);\\n                s.scaley = +s.scaley.toFixed(4);\\n                s.rotate = +s.rotate.toFixed(4);\\n                return  (s.dx || s.dy ? \\\"t\\\" + [s.dx, s.dy] : E) +\\n                    (s.scalex != 1 || s.scaley != 1 ? \\\"s\\\" + [s.scalex, s.scaley, 0, 0] : E) +\\n                    (s.rotate ? \\\"r\\\" + [s.rotate, 0, 0] : E);\\n            } else {\\n                return \\\"m\\\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];\\n            }\\n        };\\n    })(Matrix.prototype);\\n\\n    var preventDefault = function () {\\n            this.returnValue = false;\\n        },\\n        preventTouch = function () {\\n            return this.originalEvent.preventDefault();\\n        },\\n        stopPropagation = function () {\\n            this.cancelBubble = true;\\n        },\\n        stopTouch = function () {\\n            return this.originalEvent.stopPropagation();\\n        },\\n        getEventPosition = function (e) {\\n            var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\\n\\n            return {\\n                x: e.clientX + scrollX,\\n                y: e.clientY + scrollY\\n            };\\n        },\\n        addEvent = (function () {\\n            if (g.doc.addEventListener) {\\n                return function (obj, type, fn, element) {\\n                    var f = function (e) {\\n                        var pos = getEventPosition(e);\\n                        return fn.call(element, e, pos.x, pos.y);\\n                    };\\n                    obj.addEventListener(type, f, false);\\n\\n                    if (supportsTouch && touchMap[type]) {\\n                        var _f = function (e) {\\n                            var pos = getEventPosition(e),\\n                                olde = e;\\n\\n                            for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {\\n                                if (e.targetTouches[i].target == obj) {\\n                                    e = e.targetTouches[i];\\n                                    e.originalEvent = olde;\\n                                    e.preventDefault = preventTouch;\\n                                    e.stopPropagation = stopTouch;\\n                                    break;\\n                                }\\n                            }\\n\\n                            return fn.call(element, e, pos.x, pos.y);\\n                        };\\n                        obj.addEventListener(touchMap[type], _f, false);\\n                    }\\n\\n                    return function () {\\n                        obj.removeEventListener(type, f, false);\\n\\n                        if (supportsTouch && touchMap[type])\\n                            obj.removeEventListener(touchMap[type], _f, false);\\n\\n                        return true;\\n                    };\\n                };\\n            } else if (g.doc.attachEvent) {\\n                return function (obj, type, fn, element) {\\n                    var f = function (e) {\\n                        e = e || g.win.event;\\n                        var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\\n                            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\\n                            x = e.clientX + scrollX,\\n                            y = e.clientY + scrollY;\\n                        e.preventDefault = e.preventDefault || preventDefault;\\n                        e.stopPropagation = e.stopPropagation || stopPropagation;\\n                        return fn.call(element, e, x, y);\\n                    };\\n                    obj.attachEvent(\\\"on\\\" + type, f);\\n                    var detacher = function () {\\n                        obj.detachEvent(\\\"on\\\" + type, f);\\n                        return true;\\n                    };\\n                    return detacher;\\n                };\\n            }\\n        })(),\\n        drag = [],\\n        dragMove = function (e) {\\n            var x = e.clientX,\\n                y = e.clientY,\\n                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\\n                dragi,\\n                j = drag.length;\\n            while (j--) {\\n                dragi = drag[j];\\n                if (supportsTouch && e.touches) {\\n                    var i = e.touches.length,\\n                        touch;\\n                    while (i--) {\\n                        touch = e.touches[i];\\n                        if (touch.identifier == dragi.el._drag.id) {\\n                            x = touch.clientX;\\n                            y = touch.clientY;\\n                            (e.originalEvent ? e.originalEvent : e).preventDefault();\\n                            break;\\n                        }\\n                    }\\n                } else {\\n                    e.preventDefault();\\n                }\\n                var node = dragi.el.node,\\n                    o,\\n                    next = node.nextSibling,\\n                    parent = node.parentNode,\\n                    display = node.style.display;\\n                g.win.opera && parent.removeChild(node);\\n                node.style.display = \\\"none\\\";\\n                o = dragi.el.paper.getElementByPoint(x, y);\\n                node.style.display = display;\\n                g.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));\\n                o && eve(\\\"raphael.drag.over.\\\" + dragi.el.id, dragi.el, o);\\n                x += scrollX;\\n                y += scrollY;\\n                eve(\\\"raphael.drag.move.\\\" + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);\\n            }\\n        },\\n        dragUp = function (e) {\\n            R.unmousemove(dragMove).unmouseup(dragUp);\\n            var i = drag.length,\\n                dragi;\\n            while (i--) {\\n                dragi = drag[i];\\n                dragi.el._drag = {};\\n                eve(\\\"raphael.drag.end.\\\" + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\\n            }\\n            drag = [];\\n        },\\n    /*\\\\\\n     * Raphael.el\\n     [ property (object) ]\\n     **\\n     * You can add your own method to elements. This is usefull when you want to hack default functionality or\\n     * want to wrap some common transformation or attributes in one method. In difference to canvas methods,\\n     * you can redefine element method at any time. Expending element methods wouldn’t affect set.\\n     > Usage\\n     | Raphael.el.red = function () {\\n     |     this.attr({fill: \\\"#f00\\\"});\\n     | };\\n     | // then use it\\n     | paper.circle(100, 100, 20).red();\\n     \\\\*/\\n        elproto = R.el = {};\\n    /*\\\\\\n     * Element.click\\n     [ method ]\\n     **\\n     * Adds event handler for click for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.unclick\\n     [ method ]\\n     **\\n     * Removes event handler for click for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n\\n    /*\\\\\\n     * Element.dblclick\\n     [ method ]\\n     **\\n     * Adds event handler for double click for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.undblclick\\n     [ method ]\\n     **\\n     * Removes event handler for double click for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n\\n    /*\\\\\\n     * Element.mousedown\\n     [ method ]\\n     **\\n     * Adds event handler for mousedown for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.unmousedown\\n     [ method ]\\n     **\\n     * Removes event handler for mousedown for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n\\n    /*\\\\\\n     * Element.mousemove\\n     [ method ]\\n     **\\n     * Adds event handler for mousemove for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.unmousemove\\n     [ method ]\\n     **\\n     * Removes event handler for mousemove for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n\\n    /*\\\\\\n     * Element.mouseout\\n     [ method ]\\n     **\\n     * Adds event handler for mouseout for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.unmouseout\\n     [ method ]\\n     **\\n     * Removes event handler for mouseout for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n\\n    /*\\\\\\n     * Element.mouseover\\n     [ method ]\\n     **\\n     * Adds event handler for mouseover for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.unmouseover\\n     [ method ]\\n     **\\n     * Removes event handler for mouseover for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n\\n    /*\\\\\\n     * Element.mouseup\\n     [ method ]\\n     **\\n     * Adds event handler for mouseup for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.unmouseup\\n     [ method ]\\n     **\\n     * Removes event handler for mouseup for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n\\n    /*\\\\\\n     * Element.touchstart\\n     [ method ]\\n     **\\n     * Adds event handler for touchstart for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.untouchstart\\n     [ method ]\\n     **\\n     * Removes event handler for touchstart for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n\\n    /*\\\\\\n     * Element.touchmove\\n     [ method ]\\n     **\\n     * Adds event handler for touchmove for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.untouchmove\\n     [ method ]\\n     **\\n     * Removes event handler for touchmove for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n\\n    /*\\\\\\n     * Element.touchend\\n     [ method ]\\n     **\\n     * Adds event handler for touchend for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.untouchend\\n     [ method ]\\n     **\\n     * Removes event handler for touchend for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n\\n    /*\\\\\\n     * Element.touchcancel\\n     [ method ]\\n     **\\n     * Adds event handler for touchcancel for the element.\\n     > Parameters\\n     - handler (function) handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    /*\\\\\\n     * Element.untouchcancel\\n     [ method ]\\n     **\\n     * Removes event handler for touchcancel for the element.\\n     > Parameters\\n     - handler (function) #optional handler for the event\\n     = (object) @Element\\n     \\\\*/\\n    for (var i = events.length; i--;) {\\n        (function (eventName) {\\n            R[eventName] = elproto[eventName] = function (fn, scope) {\\n                if (R.is(fn, \\\"function\\\")) {\\n                    this.events = this.events || [];\\n                    this.events.push({name: eventName, f: fn, unbind: addEvent(this.shape || this.node || g.doc, eventName, fn, scope || this)});\\n                }\\n                return this;\\n            };\\n            R[\\\"un\\\" + eventName] = elproto[\\\"un\\\" + eventName] = function (fn) {\\n                var events = this.events || [],\\n                    l = events.length;\\n                while (l--){\\n                    if (events[l].name == eventName && (R.is(fn, \\\"undefined\\\") || events[l].f == fn)) {\\n                        events[l].unbind();\\n                        events.splice(l, 1);\\n                        !events.length && delete this.events;\\n                    }\\n                }\\n                return this;\\n            };\\n        })(events[i]);\\n    }\\n\\n    /*\\\\\\n     * Element.data\\n     [ method ]\\n     **\\n     * Adds or retrieves given value asociated with given key.\\n     **\\n     * See also @Element.removeData\\n     > Parameters\\n     - key (string) key to store data\\n     - value (any) #optional value to store\\n     = (object) @Element\\n     * or, if value is not specified:\\n     = (any) value\\n     * or, if key and value are not specified:\\n     = (object) Key/value pairs for all the data associated with the element.\\n     > Usage\\n     | for (var i = 0, i < 5, i++) {\\n     |     paper.circle(10 + 15 * i, 10, 10)\\n     |          .attr({fill: \\\"#000\\\"})\\n     |          .data(\\\"i\\\", i)\\n     |          .click(function () {\\n     |             alert(this.data(\\\"i\\\"));\\n     |          });\\n     | }\\n     \\\\*/\\n    elproto.data = function (key, value) {\\n        var data = eldata[this.id] = eldata[this.id] || {};\\n        if (arguments.length == 0) {\\n            return data;\\n        }\\n        if (arguments.length == 1) {\\n            if (R.is(key, \\\"object\\\")) {\\n                for (var i in key) if (key[has](i)) {\\n                    this.data(i, key[i]);\\n                }\\n                return this;\\n            }\\n            eve(\\\"raphael.data.get.\\\" + this.id, this, data[key], key);\\n            return data[key];\\n        }\\n        data[key] = value;\\n        eve(\\\"raphael.data.set.\\\" + this.id, this, value, key);\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.removeData\\n     [ method ]\\n     **\\n     * Removes value associated with an element by given key.\\n     * If key is not provided, removes all the data of the element.\\n     > Parameters\\n     - key (string) #optional key\\n     = (object) @Element\\n     \\\\*/\\n    elproto.removeData = function (key) {\\n        if (key == null) {\\n            eldata[this.id] = {};\\n        } else {\\n            eldata[this.id] && delete eldata[this.id][key];\\n        }\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.getData\\n     [ method ]\\n     **\\n     * Retrieves the element data\\n     = (object) data\\n     \\\\*/\\n    elproto.getData = function () {\\n        return clone(eldata[this.id] || {});\\n    };\\n    /*\\\\\\n     * Element.hover\\n     [ method ]\\n     **\\n     * Adds event handlers for hover for the element.\\n     > Parameters\\n     - f_in (function) handler for hover in\\n     - f_out (function) handler for hover out\\n     - icontext (object) #optional context for hover in handler\\n     - ocontext (object) #optional context for hover out handler\\n     = (object) @Element\\n     \\\\*/\\n    elproto.hover = function (f_in, f_out, scope_in, scope_out) {\\n        return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);\\n    };\\n    /*\\\\\\n     * Element.unhover\\n     [ method ]\\n     **\\n     * Removes event handlers for hover for the element.\\n     > Parameters\\n     - f_in (function) handler for hover in\\n     - f_out (function) handler for hover out\\n     = (object) @Element\\n     \\\\*/\\n    elproto.unhover = function (f_in, f_out) {\\n        return this.unmouseover(f_in).unmouseout(f_out);\\n    };\\n    var draggable = [];\\n    /*\\\\\\n     * Element.drag\\n     [ method ]\\n     **\\n     * Adds event handlers for drag of the element.\\n     > Parameters\\n     - onmove (function) handler for moving\\n     - onstart (function) handler for drag start\\n     - onend (function) handler for drag end\\n     - mcontext (object) #optional context for moving handler\\n     - scontext (object) #optional context for drag start handler\\n     - econtext (object) #optional context for drag end handler\\n     * Additionaly following `drag` events will be triggered: `drag.start.<id>` on start,\\n     * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element will be dragged over another element\\n     * `drag.over.<id>` will be fired as well.\\n     *\\n     * Start event and start handler will be called in specified context or in context of the element with following parameters:\\n     o x (number) x position of the mouse\\n     o y (number) y position of the mouse\\n     o event (object) DOM event object\\n     * Move event and move handler will be called in specified context or in context of the element with following parameters:\\n     o dx (number) shift by x from the start point\\n     o dy (number) shift by y from the start point\\n     o x (number) x position of the mouse\\n     o y (number) y position of the mouse\\n     o event (object) DOM event object\\n     * End event and end handler will be called in specified context or in context of the element with following parameters:\\n     o event (object) DOM event object\\n     = (object) @Element\\n     \\\\*/\\n    elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {\\n        function start(e) {\\n            (e.originalEvent || e).preventDefault();\\n            var x = e.clientX,\\n                y = e.clientY,\\n                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\\n            this._drag.id = e.identifier;\\n            if (supportsTouch && e.touches) {\\n                var i = e.touches.length, touch;\\n                while (i--) {\\n                    touch = e.touches[i];\\n                    this._drag.id = touch.identifier;\\n                    if (touch.identifier == this._drag.id) {\\n                        x = touch.clientX;\\n                        y = touch.clientY;\\n                        break;\\n                    }\\n                }\\n            }\\n            this._drag.x = x + scrollX;\\n            this._drag.y = y + scrollY;\\n            !drag.length && R.mousemove(dragMove).mouseup(dragUp);\\n            drag.push({el: this, move_scope: move_scope, start_scope: start_scope, end_scope: end_scope});\\n            onstart && eve.on(\\\"raphael.drag.start.\\\" + this.id, onstart);\\n            onmove && eve.on(\\\"raphael.drag.move.\\\" + this.id, onmove);\\n            onend && eve.on(\\\"raphael.drag.end.\\\" + this.id, onend);\\n            eve(\\\"raphael.drag.start.\\\" + this.id, start_scope || move_scope || this, e.clientX + scrollX, e.clientY + scrollY, e);\\n        }\\n        this._drag = {};\\n        draggable.push({el: this, start: start});\\n        this.mousedown(start);\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.onDragOver\\n     [ method ]\\n     **\\n     * Shortcut for assigning event handler for `drag.over.<id>` event, where id is id of the element (see @Element.id).\\n     > Parameters\\n     - f (function) handler for event, first argument would be the element you are dragging over\\n     \\\\*/\\n    elproto.onDragOver = function (f) {\\n        f ? eve.on(\\\"raphael.drag.over.\\\" + this.id, f) : eve.unbind(\\\"raphael.drag.over.\\\" + this.id);\\n    };\\n    /*\\\\\\n     * Element.undrag\\n     [ method ]\\n     **\\n     * Removes all drag event handlers from given element.\\n     \\\\*/\\n    elproto.undrag = function () {\\n        var i = draggable.length;\\n        while (i--) if (draggable[i].el == this) {\\n            this.unmousedown(draggable[i].start);\\n            draggable.splice(i, 1);\\n            eve.unbind(\\\"raphael.drag.*.\\\" + this.id);\\n        }\\n        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\\n        drag = [];\\n    };\\n    /*\\\\\\n     * Paper.circle\\n     [ method ]\\n     **\\n     * Draws a circle.\\n     **\\n     > Parameters\\n     **\\n     - x (number) x coordinate of the centre\\n     - y (number) y coordinate of the centre\\n     - r (number) radius\\n     = (object) Raphaël element object with type “circle”\\n     **\\n     > Usage\\n     | var c = paper.circle(50, 50, 40);\\n     \\\\*/\\n    paperproto.circle = function (x, y, r) {\\n        var out = R._engine.circle(this, x || 0, y || 0, r || 0);\\n        this.__set__ && this.__set__.push(out);\\n        return out;\\n    };\\n    /*\\\\\\n     * Paper.rect\\n     [ method ]\\n     *\\n     * Draws a rectangle.\\n     **\\n     > Parameters\\n     **\\n     - x (number) x coordinate of the top left corner\\n     - y (number) y coordinate of the top left corner\\n     - width (number) width\\n     - height (number) height\\n     - r (number) #optional radius for rounded corners, default is 0\\n     = (object) Raphaël element object with type “rect”\\n     **\\n     > Usage\\n     | // regular rectangle\\n     | var c = paper.rect(10, 10, 50, 50);\\n     | // rectangle with rounded corners\\n     | var c = paper.rect(40, 40, 50, 50, 10);\\n     \\\\*/\\n    paperproto.rect = function (x, y, w, h, r) {\\n        var out = R._engine.rect(this, x || 0, y || 0, w || 0, h || 0, r || 0);\\n        this.__set__ && this.__set__.push(out);\\n        return out;\\n    };\\n    /*\\\\\\n     * Paper.ellipse\\n     [ method ]\\n     **\\n     * Draws an ellipse.\\n     **\\n     > Parameters\\n     **\\n     - x (number) x coordinate of the centre\\n     - y (number) y coordinate of the centre\\n     - rx (number) horizontal radius\\n     - ry (number) vertical radius\\n     = (object) Raphaël element object with type “ellipse”\\n     **\\n     > Usage\\n     | var c = paper.ellipse(50, 50, 40, 20);\\n     \\\\*/\\n    paperproto.ellipse = function (x, y, rx, ry) {\\n        var out = R._engine.ellipse(this, x || 0, y || 0, rx || 0, ry || 0);\\n        this.__set__ && this.__set__.push(out);\\n        return out;\\n    };\\n    /*\\\\\\n     * Paper.path\\n     [ method ]\\n     **\\n     * Creates a path element by given path data string.\\n     > Parameters\\n     - pathString (string) #optional path string in SVG format.\\n     * Path string consists of one-letter commands, followed by comma seprarated arguments in numercal form. Example:\\n     | \\\"M10,20L30,40\\\"\\n     * Here we can see two commands: “M”, with arguments `(10, 20)` and “L” with arguments `(30, 40)`. Upper case letter mean command is absolute, lower case—relative.\\n     *\\n     # <p>Here is short list of commands available, for more details see <a href=\\\"http://www.w3.org/TR/SVG/paths.html#PathData\\\" title=\\\"Details of a path's data attribute's format are described in the SVG specification.\\\">SVG path string format</a>.</p>\\n     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>\\n     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>\\n     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>\\n     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>\\n     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>\\n     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>\\n     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>\\n     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>\\n     # <tr><td>Q</td><td>quadratic Bézier curveto</td><td>(x1 y1 x y)+</td></tr>\\n     # <tr><td>T</td><td>smooth quadratic Bézier curveto</td><td>(x y)+</td></tr>\\n     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>\\n     # <tr><td>R</td><td><a href=\\\"http://en.wikipedia.org/wiki/Catmull–Rom_spline#Catmull.E2.80.93Rom_spline\\\">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>\\n     * * “Catmull-Rom curveto” is a not standard SVG command and added in 2.0 to make life easier.\\n     * Note: there is a special case when path consist of just three commands: “M10,10R…z”. In this case path will smoothly connects to its beginning.\\n     > Usage\\n     | var c = paper.path(\\\"M10 10L90 90\\\");\\n     | // draw a diagonal line:\\n     | // move to 10,10, line to 90,90\\n     * For example of path strings, check out these icons: http://raphaeljs.com/icons/\\n     \\\\*/\\n    paperproto.path = function (pathString) {\\n        pathString && !R.is(pathString, string) && !R.is(pathString[0], array) && (pathString += E);\\n        var out = R._engine.path(R.format[apply](R, arguments), this);\\n        this.__set__ && this.__set__.push(out);\\n        return out;\\n    };\\n    /*\\\\\\n     * Paper.image\\n     [ method ]\\n     **\\n     * Embeds an image into the surface.\\n     **\\n     > Parameters\\n     **\\n     - src (string) URI of the source image\\n     - x (number) x coordinate position\\n     - y (number) y coordinate position\\n     - width (number) width of the image\\n     - height (number) height of the image\\n     = (object) Raphaël element object with type “image”\\n     **\\n     > Usage\\n     | var c = paper.image(\\\"apple.png\\\", 10, 10, 80, 80);\\n     \\\\*/\\n    paperproto.image = function (src, x, y, w, h) {\\n        var out = R._engine.image(this, src || \\\"about:blank\\\", x || 0, y || 0, w || 0, h || 0);\\n        this.__set__ && this.__set__.push(out);\\n        return out;\\n    };\\n    /*\\\\\\n     * Paper.text\\n     [ method ]\\n     **\\n     * Draws a text string. If you need line breaks, put “\\\\n” in the string.\\n     **\\n     > Parameters\\n     **\\n     - x (number) x coordinate position\\n     - y (number) y coordinate position\\n     - text (string) The text string to draw\\n     = (object) Raphaël element object with type “text”\\n     **\\n     > Usage\\n     | var t = paper.text(50, 50, \\\"Raphaël\\\\nkicks\\\\nbutt!\\\");\\n     \\\\*/\\n    paperproto.text = function (x, y, text, href) {\\n        var out = R._engine.text(this, x || 0, y || 0, Str(text), href);\\n        this.__set__ && this.__set__.push(out);\\n        return out;\\n    };\\n    /*\\\\\\n     * Paper.set\\n     [ method ]\\n     **\\n     * Creates array-like object to keep and operate several elements at once.\\n     * Warning: it doesn’t create any elements for itself in the page, it just groups existing elements.\\n     * Sets act as pseudo elements — all methods available to an element can be used on a set.\\n     = (object) array-like object that represents set of elements\\n     **\\n     > Usage\\n     | var st = paper.set();\\n     | st.push(\\n     |     paper.circle(10, 10, 5),\\n     |     paper.circle(30, 10, 5)\\n     | );\\n     | st.attr({fill: \\\"red\\\"}); // changes the fill of both circles\\n     \\\\*/\\n    paperproto.set = function (itemsArray) {\\n        !R.is(itemsArray, \\\"array\\\") && (itemsArray = Array.prototype.splice.call(arguments, 0, arguments.length));\\n        var out = new Set(itemsArray);\\n        this.__set__ && this.__set__.push(out);\\n        out[\\\"paper\\\"] = this;\\n        out[\\\"type\\\"] = \\\"set\\\";\\n        return out;\\n    };\\n    /*\\\\\\n     * Paper.setStart\\n     [ method ]\\n     **\\n     * Creates @Paper.set. All elements that will be created after calling this method and before calling\\n     * @Paper.setFinish will be added to the set.\\n     **\\n     > Usage\\n     | paper.setStart();\\n     | paper.circle(10, 10, 5),\\n     | paper.circle(30, 10, 5)\\n     | var st = paper.setFinish();\\n     | st.attr({fill: \\\"red\\\"}); // changes the fill of both circles\\n     \\\\*/\\n    paperproto.setStart = function (set) {\\n        this.__set__ = set || this.set();\\n    };\\n    /*\\\\\\n     * Paper.setFinish\\n     [ method ]\\n     **\\n     * See @Paper.setStart. This method finishes catching and returns resulting set.\\n     **\\n     = (object) set\\n     \\\\*/\\n    paperproto.setFinish = function (set) {\\n        var out = this.__set__;\\n        delete this.__set__;\\n        return out;\\n    };\\n    /*\\\\\\n     * Paper.getSize\\n     [ method ]\\n     **\\n     * Obtains current paper actual size.\\n     **\\n     = (object)\\n     \\\\*/\\n    paperproto.getSize = function () {\\n        var container = this.canvas.parentNode;\\n        return {\\n            width: container.offsetWidth,\\n            height: container.offsetHeight\\n        };\\n    };\\n    /*\\\\\\n     * Paper.setSize\\n     [ method ]\\n     **\\n     * If you need to change dimensions of the canvas call this method\\n     **\\n     > Parameters\\n     **\\n     - width (number) new width of the canvas\\n     - height (number) new height of the canvas\\n     \\\\*/\\n    paperproto.setSize = function (width, height) {\\n        return R._engine.setSize.call(this, width, height);\\n    };\\n    /*\\\\\\n     * Paper.setViewBox\\n     [ method ]\\n     **\\n     * Sets the view box of the paper. Practically it gives you ability to zoom and pan whole paper surface by\\n     * specifying new boundaries.\\n     **\\n     > Parameters\\n     **\\n     - x (number) new x position, default is `0`\\n     - y (number) new y position, default is `0`\\n     - w (number) new width of the canvas\\n     - h (number) new height of the canvas\\n     - fit (boolean) `true` if you want graphics to fit into new boundary box\\n     \\\\*/\\n    paperproto.setViewBox = function (x, y, w, h, fit) {\\n        return R._engine.setViewBox.call(this, x, y, w, h, fit);\\n    };\\n    /*\\\\\\n     * Paper.top\\n     [ property ]\\n     **\\n     * Points to the topmost element on the paper\\n     \\\\*/\\n    /*\\\\\\n     * Paper.bottom\\n     [ property ]\\n     **\\n     * Points to the bottom element on the paper\\n     \\\\*/\\n    paperproto.top = paperproto.bottom = null;\\n    /*\\\\\\n     * Paper.raphael\\n     [ property ]\\n     **\\n     * Points to the @Raphael object/function\\n     \\\\*/\\n    paperproto.raphael = R;\\n    var getOffset = function (elem) {\\n        var box = elem.getBoundingClientRect(),\\n            doc = elem.ownerDocument,\\n            body = doc.body,\\n            docElem = doc.documentElement,\\n            clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0,\\n            top  = box.top  + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop ) - clientTop,\\n            left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;\\n        return {\\n            y: top,\\n            x: left\\n        };\\n    };\\n    /*\\\\\\n     * Paper.getElementByPoint\\n     [ method ]\\n     **\\n     * Returns you topmost element under given point.\\n     **\\n     = (object) Raphaël element object\\n     > Parameters\\n     **\\n     - x (number) x coordinate from the top left corner of the window\\n     - y (number) y coordinate from the top left corner of the window\\n     > Usage\\n     | paper.getElementByPoint(mouseX, mouseY).attr({stroke: \\\"#f00\\\"});\\n     \\\\*/\\n    paperproto.getElementByPoint = function (x, y) {\\n        var paper = this,\\n            svg = paper.canvas,\\n            target = g.doc.elementFromPoint(x, y);\\n        if (g.win.opera && target.tagName == \\\"svg\\\") {\\n            var so = getOffset(svg),\\n                sr = svg.createSVGRect();\\n            sr.x = x - so.x;\\n            sr.y = y - so.y;\\n            sr.width = sr.height = 1;\\n            var hits = svg.getIntersectionList(sr, null);\\n            if (hits.length) {\\n                target = hits[hits.length - 1];\\n            }\\n        }\\n        if (!target) {\\n            return null;\\n        }\\n        while (target.parentNode && target != svg.parentNode && !target.raphael) {\\n            target = target.parentNode;\\n        }\\n        target == paper.canvas.parentNode && (target = svg);\\n        target = target && target.raphael ? paper.getById(target.raphaelid) : null;\\n        return target;\\n    };\\n\\n    /*\\\\\\n     * Paper.getElementsByBBox\\n     [ method ]\\n     **\\n     * Returns set of elements that have an intersecting bounding box\\n     **\\n     > Parameters\\n     **\\n     - bbox (object) bbox to check with\\n     = (object) @Set\\n     \\\\*/\\n    paperproto.getElementsByBBox = function (bbox) {\\n        var set = this.set();\\n        this.forEach(function (el) {\\n            if (R.isBBoxIntersect(el.getBBox(), bbox)) {\\n                set.push(el);\\n            }\\n        });\\n        return set;\\n    };\\n\\n    /*\\\\\\n     * Paper.getById\\n     [ method ]\\n     **\\n     * Returns you element by its internal ID.\\n     **\\n     > Parameters\\n     **\\n     - id (number) id\\n     = (object) Raphaël element object\\n     \\\\*/\\n    paperproto.getById = function (id) {\\n        var bot = this.bottom;\\n        while (bot) {\\n            if (bot.id == id) {\\n                return bot;\\n            }\\n            bot = bot.next;\\n        }\\n        return null;\\n    };\\n    /*\\\\\\n     * Paper.forEach\\n     [ method ]\\n     **\\n     * Executes given function for each element on the paper\\n     *\\n     * If callback function returns `false` it will stop loop running.\\n     **\\n     > Parameters\\n     **\\n     - callback (function) function to run\\n     - thisArg (object) context object for the callback\\n     = (object) Paper object\\n     > Usage\\n     | paper.forEach(function (el) {\\n     |     el.attr({ stroke: \\\"blue\\\" });\\n     | });\\n     \\\\*/\\n    paperproto.forEach = function (callback, thisArg) {\\n        var bot = this.bottom;\\n        while (bot) {\\n            if (callback.call(thisArg, bot) === false) {\\n                return this;\\n            }\\n            bot = bot.next;\\n        }\\n        return this;\\n    };\\n    /*\\\\\\n     * Paper.getElementsByPoint\\n     [ method ]\\n     **\\n     * Returns set of elements that have common point inside\\n     **\\n     > Parameters\\n     **\\n     - x (number) x coordinate of the point\\n     - y (number) y coordinate of the point\\n     = (object) @Set\\n     \\\\*/\\n    paperproto.getElementsByPoint = function (x, y) {\\n        var set = this.set();\\n        this.forEach(function (el) {\\n            if (el.isPointInside(x, y)) {\\n                set.push(el);\\n            }\\n        });\\n        return set;\\n    };\\n    function x_y() {\\n        return this.x + S + this.y;\\n    }\\n    function x_y_w_h() {\\n        return this.x + S + this.y + S + this.width + \\\" \\\\xd7 \\\" + this.height;\\n    }\\n    /*\\\\\\n     * Element.isPointInside\\n     [ method ]\\n     **\\n     * Determine if given point is inside this element’s shape\\n     **\\n     > Parameters\\n     **\\n     - x (number) x coordinate of the point\\n     - y (number) y coordinate of the point\\n     = (boolean) `true` if point inside the shape\\n     \\\\*/\\n    elproto.isPointInside = function (x, y) {\\n        var rp = this.realPath = getPath[this.type](this);\\n        if (this.attr('transform') && this.attr('transform').length) {\\n            rp = R.transformPath(rp, this.attr('transform'));\\n        }\\n        return R.isPointInsidePath(rp, x, y);\\n    };\\n    /*\\\\\\n     * Element.getBBox\\n     [ method ]\\n     **\\n     * Return bounding box for a given element\\n     **\\n     > Parameters\\n     **\\n     - isWithoutTransform (boolean) flag, `true` if you want to have bounding box before transformations. Default is `false`.\\n     = (object) Bounding box object:\\n     o {\\n     o     x: (number) top left corner x\\n     o     y: (number) top left corner y\\n     o     x2: (number) bottom right corner x\\n     o     y2: (number) bottom right corner y\\n     o     width: (number) width\\n     o     height: (number) height\\n     o }\\n     \\\\*/\\n    elproto.getBBox = function (isWithoutTransform) {\\n        if (this.removed) {\\n            return {};\\n        }\\n        var _ = this._;\\n        if (isWithoutTransform) {\\n            if (_.dirty || !_.bboxwt) {\\n                this.realPath = getPath[this.type](this);\\n                _.bboxwt = pathDimensions(this.realPath);\\n                _.bboxwt.toString = x_y_w_h;\\n                _.dirty = 0;\\n            }\\n            return _.bboxwt;\\n        }\\n        if (_.dirty || _.dirtyT || !_.bbox) {\\n            if (_.dirty || !this.realPath) {\\n                _.bboxwt = 0;\\n                this.realPath = getPath[this.type](this);\\n            }\\n            _.bbox = pathDimensions(mapPath(this.realPath, this.matrix));\\n            _.bbox.toString = x_y_w_h;\\n            _.dirty = _.dirtyT = 0;\\n        }\\n        return _.bbox;\\n    };\\n    /*\\\\\\n     * Element.clone\\n     [ method ]\\n     **\\n     = (object) clone of a given element\\n     **\\n     \\\\*/\\n    elproto.clone = function () {\\n        if (this.removed) {\\n            return null;\\n        }\\n        var out = this.paper[this.type]().attr(this.attr());\\n        this.__set__ && this.__set__.push(out);\\n        return out;\\n    };\\n    /*\\\\\\n     * Element.glow\\n     [ method ]\\n     **\\n     * Return set of elements that create glow-like effect around given element. See @Paper.set.\\n     *\\n     * Note: Glow is not connected to the element. If you change element attributes it won’t adjust itself.\\n     **\\n     > Parameters\\n     **\\n     - glow (object) #optional parameters object with all properties optional:\\n     o {\\n     o     width (number) size of the glow, default is `10`\\n     o     fill (boolean) will it be filled, default is `false`\\n     o     opacity (number) opacity, default is `0.5`\\n     o     offsetx (number) horizontal offset, default is `0`\\n     o     offsety (number) vertical offset, default is `0`\\n     o     color (string) glow colour, default is `black`\\n     o }\\n     = (object) @Paper.set of elements that represents glow\\n     \\\\*/\\n    elproto.glow = function (glow) {\\n        if (this.type == \\\"text\\\") {\\n            return null;\\n        }\\n        glow = glow || {};\\n        var s = {\\n                width: (glow.width || 10) + (+this.attr(\\\"stroke-width\\\") || 1),\\n                fill: glow.fill || false,\\n                opacity: glow.opacity == null ? .5 : glow.opacity,\\n                offsetx: glow.offsetx || 0,\\n                offsety: glow.offsety || 0,\\n                color: glow.color || \\\"#000\\\"\\n            },\\n            c = s.width / 2,\\n            r = this.paper,\\n            out = r.set(),\\n            path = this.realPath || getPath[this.type](this);\\n        path = this.matrix ? mapPath(path, this.matrix) : path;\\n        for (var i = 1; i < c + 1; i++) {\\n            out.push(r.path(path).attr({\\n                stroke: s.color,\\n                fill: s.fill ? s.color : \\\"none\\\",\\n                \\\"stroke-linejoin\\\": \\\"round\\\",\\n                \\\"stroke-linecap\\\": \\\"round\\\",\\n                \\\"stroke-width\\\": +(s.width / c * i).toFixed(3),\\n                opacity: +(s.opacity / c).toFixed(3)\\n            }));\\n        }\\n        return out.insertBefore(this).translate(s.offsetx, s.offsety);\\n    };\\n    var curveslengths = {},\\n        getPointAtSegmentLength = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {\\n            if (length == null) {\\n                return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);\\n            } else {\\n                return R.findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, getTatLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));\\n            }\\n        },\\n        getLengthFactory = function (istotal, subpath) {\\n            return function (path, length, onlystart) {\\n                path = path2curve(path);\\n                var x, y, p, l, sp = \\\"\\\", subpaths = {}, point,\\n                    len = 0;\\n                for (var i = 0, ii = path.length; i < ii; i++) {\\n                    p = path[i];\\n                    if (p[0] == \\\"M\\\") {\\n                        x = +p[1];\\n                        y = +p[2];\\n                    } else {\\n                        l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\\n                        if (len + l > length) {\\n                            if (subpath && !subpaths.start) {\\n                                point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\\n                                sp += [\\\"C\\\" + point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];\\n                                if (onlystart) {return sp;}\\n                                subpaths.start = sp;\\n                                sp = [\\\"M\\\" + point.x, point.y + \\\"C\\\" + point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]].join();\\n                                len += l;\\n                                x = +p[5];\\n                                y = +p[6];\\n                                continue;\\n                            }\\n                            if (!istotal && !subpath) {\\n                                point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\\n                                return {x: point.x, y: point.y, alpha: point.alpha};\\n                            }\\n                        }\\n                        len += l;\\n                        x = +p[5];\\n                        y = +p[6];\\n                    }\\n                    sp += p.shift() + p;\\n                }\\n                subpaths.end = sp;\\n                point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);\\n                point.alpha && (point = {x: point.x, y: point.y, alpha: point.alpha});\\n                return point;\\n            };\\n        };\\n    var getTotalLength = getLengthFactory(1),\\n        getPointAtLength = getLengthFactory(),\\n        getSubpathsAtLength = getLengthFactory(0, 1);\\n    /*\\\\\\n     * Raphael.getTotalLength\\n     [ method ]\\n     **\\n     * Returns length of the given path in pixels.\\n     **\\n     > Parameters\\n     **\\n     - path (string) SVG path string.\\n     **\\n     = (number) length.\\n     \\\\*/\\n    R.getTotalLength = getTotalLength;\\n    /*\\\\\\n     * Raphael.getPointAtLength\\n     [ method ]\\n     **\\n     * Return coordinates of the point located at the given length on the given path.\\n     **\\n     > Parameters\\n     **\\n     - path (string) SVG path string\\n     - length (number)\\n     **\\n     = (object) representation of the point:\\n     o {\\n     o     x: (number) x coordinate\\n     o     y: (number) y coordinate\\n     o     alpha: (number) angle of derivative\\n     o }\\n     \\\\*/\\n    R.getPointAtLength = getPointAtLength;\\n    /*\\\\\\n     * Raphael.getSubpath\\n     [ method ]\\n     **\\n     * Return subpath of a given path from given length to given length.\\n     **\\n     > Parameters\\n     **\\n     - path (string) SVG path string\\n     - from (number) position of the start of the segment\\n     - to (number) position of the end of the segment\\n     **\\n     = (string) pathstring for the segment\\n     \\\\*/\\n    R.getSubpath = function (path, from, to) {\\n        if (this.getTotalLength(path) - to < 1e-6) {\\n            return getSubpathsAtLength(path, from).end;\\n        }\\n        var a = getSubpathsAtLength(path, to, 1);\\n        return from ? getSubpathsAtLength(a, from).end : a;\\n    };\\n    /*\\\\\\n     * Element.getTotalLength\\n     [ method ]\\n     **\\n     * Returns length of the path in pixels. Only works for element of “path” type.\\n     = (number) length.\\n     \\\\*/\\n    elproto.getTotalLength = function () {\\n        var path = this.getPath();\\n        if (!path) {\\n            return;\\n        }\\n\\n        if (this.node.getTotalLength) {\\n            return this.node.getTotalLength();\\n        }\\n\\n        return getTotalLength(path);\\n    };\\n    /*\\\\\\n     * Element.getPointAtLength\\n     [ method ]\\n     **\\n     * Return coordinates of the point located at the given length on the given path. Only works for element of “path” type.\\n     **\\n     > Parameters\\n     **\\n     - length (number)\\n     **\\n     = (object) representation of the point:\\n     o {\\n     o     x: (number) x coordinate\\n     o     y: (number) y coordinate\\n     o     alpha: (number) angle of derivative\\n     o }\\n     \\\\*/\\n    elproto.getPointAtLength = function (length) {\\n        var path = this.getPath();\\n        if (!path) {\\n            return;\\n        }\\n\\n        return getPointAtLength(path, length);\\n    };\\n    /*\\\\\\n     * Element.getPath\\n     [ method ]\\n     **\\n     * Returns path of the element. Only works for elements of “path” type and simple elements like circle.\\n     = (object) path\\n     **\\n     \\\\*/\\n    elproto.getPath = function () {\\n        var path,\\n            getPath = R._getPath[this.type];\\n\\n        if (this.type == \\\"text\\\" || this.type == \\\"set\\\") {\\n            return;\\n        }\\n\\n        if (getPath) {\\n            path = getPath(this);\\n        }\\n\\n        return path;\\n    };\\n    /*\\\\\\n     * Element.getSubpath\\n     [ method ]\\n     **\\n     * Return subpath of a given element from given length to given length. Only works for element of “path” type.\\n     **\\n     > Parameters\\n     **\\n     - from (number) position of the start of the segment\\n     - to (number) position of the end of the segment\\n     **\\n     = (string) pathstring for the segment\\n     \\\\*/\\n    elproto.getSubpath = function (from, to) {\\n        var path = this.getPath();\\n        if (!path) {\\n            return;\\n        }\\n\\n        return R.getSubpath(path, from, to);\\n    };\\n    /*\\\\\\n     * Raphael.easing_formulas\\n     [ property ]\\n     **\\n     * Object that contains easing formulas for animation. You could extend it with your own. By default it has following list of easing:\\n     # <ul>\\n     #     <li>“linear”</li>\\n     #     <li>“&lt;” or “easeIn” or “ease-in”</li>\\n     #     <li>“>” or “easeOut” or “ease-out”</li>\\n     #     <li>“&lt;>” or “easeInOut” or “ease-in-out”</li>\\n     #     <li>“backIn” or “back-in”</li>\\n     #     <li>“backOut” or “back-out”</li>\\n     #     <li>“elastic”</li>\\n     #     <li>“bounce”</li>\\n     # </ul>\\n     # <p>See also <a href=\\\"http://raphaeljs.com/easing.html\\\">Easing demo</a>.</p>\\n     \\\\*/\\n    var ef = R.easing_formulas = {\\n        linear: function (n) {\\n            return n;\\n        },\\n        \\\"<\\\": function (n) {\\n            return pow(n, 1.7);\\n        },\\n        \\\">\\\": function (n) {\\n            return pow(n, .48);\\n        },\\n        \\\"<>\\\": function (n) {\\n            var q = .48 - n / 1.04,\\n                Q = math.sqrt(.1734 + q * q),\\n                x = Q - q,\\n                X = pow(abs(x), 1 / 3) * (x < 0 ? -1 : 1),\\n                y = -Q - q,\\n                Y = pow(abs(y), 1 / 3) * (y < 0 ? -1 : 1),\\n                t = X + Y + .5;\\n            return (1 - t) * 3 * t * t + t * t * t;\\n        },\\n        backIn: function (n) {\\n            var s = 1.70158;\\n            return n * n * ((s + 1) * n - s);\\n        },\\n        backOut: function (n) {\\n            n = n - 1;\\n            var s = 1.70158;\\n            return n * n * ((s + 1) * n + s) + 1;\\n        },\\n        elastic: function (n) {\\n            if (n == !!n) {\\n                return n;\\n            }\\n            return pow(2, -10 * n) * math.sin((n - .075) * (2 * PI) / .3) + 1;\\n        },\\n        bounce: function (n) {\\n            var s = 7.5625,\\n                p = 2.75,\\n                l;\\n            if (n < (1 / p)) {\\n                l = s * n * n;\\n            } else {\\n                if (n < (2 / p)) {\\n                    n -= (1.5 / p);\\n                    l = s * n * n + .75;\\n                } else {\\n                    if (n < (2.5 / p)) {\\n                        n -= (2.25 / p);\\n                        l = s * n * n + .9375;\\n                    } else {\\n                        n -= (2.625 / p);\\n                        l = s * n * n + .984375;\\n                    }\\n                }\\n            }\\n            return l;\\n        }\\n    };\\n    ef.easeIn = ef[\\\"ease-in\\\"] = ef[\\\"<\\\"];\\n    ef.easeOut = ef[\\\"ease-out\\\"] = ef[\\\">\\\"];\\n    ef.easeInOut = ef[\\\"ease-in-out\\\"] = ef[\\\"<>\\\"];\\n    ef[\\\"back-in\\\"] = ef.backIn;\\n    ef[\\\"back-out\\\"] = ef.backOut;\\n\\n    var animationElements = [],\\n        requestAnimFrame = window.requestAnimationFrame       ||\\n            window.webkitRequestAnimationFrame ||\\n            window.mozRequestAnimationFrame    ||\\n            window.oRequestAnimationFrame      ||\\n            window.msRequestAnimationFrame     ||\\n            function (callback) {\\n                setTimeout(callback, 16);\\n            },\\n        animation = function () {\\n            var Now = +new Date,\\n                l = 0;\\n            for (; l < animationElements.length; l++) {\\n                var e = animationElements[l];\\n                if (e.el.removed || e.paused) {\\n                    continue;\\n                }\\n                var time = Now - e.start,\\n                    ms = e.ms,\\n                    easing = e.easing,\\n                    from = e.from,\\n                    diff = e.diff,\\n                    to = e.to,\\n                    t = e.t,\\n                    that = e.el,\\n                    set = {},\\n                    now,\\n                    init = {},\\n                    key;\\n                if (e.initstatus) {\\n                    time = (e.initstatus * e.anim.top - e.prev) / (e.percent - e.prev) * ms;\\n                    e.status = e.initstatus;\\n                    delete e.initstatus;\\n                    e.stop && animationElements.splice(l--, 1);\\n                } else {\\n                    e.status = (e.prev + (e.percent - e.prev) * (time / ms)) / e.anim.top;\\n                }\\n                if (time < 0) {\\n                    continue;\\n                }\\n                if (time < ms) {\\n                    var pos = easing(time / ms);\\n                    for (var attr in from) if (from[has](attr)) {\\n                        switch (availableAnimAttrs[attr]) {\\n                            case nu:\\n                                now = +from[attr] + pos * ms * diff[attr];\\n                                break;\\n                            case \\\"colour\\\":\\n                                now = \\\"rgb(\\\" + [\\n                                        upto255(round(from[attr].r + pos * ms * diff[attr].r)),\\n                                        upto255(round(from[attr].g + pos * ms * diff[attr].g)),\\n                                        upto255(round(from[attr].b + pos * ms * diff[attr].b))\\n                                    ].join(\\\",\\\") + \\\")\\\";\\n                                break;\\n                            case \\\"path\\\":\\n                                now = [];\\n                                for (var i = 0, ii = from[attr].length; i < ii; i++) {\\n                                    now[i] = [from[attr][i][0]];\\n                                    for (var j = 1, jj = from[attr][i].length; j < jj; j++) {\\n                                        now[i][j] = +from[attr][i][j] + pos * ms * diff[attr][i][j];\\n                                    }\\n                                    now[i] = now[i].join(S);\\n                                }\\n                                now = now.join(S);\\n                                break;\\n                            case \\\"transform\\\":\\n                                if (diff[attr].real) {\\n                                    now = [];\\n                                    for (i = 0, ii = from[attr].length; i < ii; i++) {\\n                                        now[i] = [from[attr][i][0]];\\n                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {\\n                                            now[i][j] = from[attr][i][j] + pos * ms * diff[attr][i][j];\\n                                        }\\n                                    }\\n                                } else {\\n                                    var get = function (i) {\\n                                        return +from[attr][i] + pos * ms * diff[attr][i];\\n                                    };\\n                                    // now = [[\\\"r\\\", get(2), 0, 0], [\\\"t\\\", get(3), get(4)], [\\\"s\\\", get(0), get(1), 0, 0]];\\n                                    now = [[\\\"m\\\", get(0), get(1), get(2), get(3), get(4), get(5)]];\\n                                }\\n                                break;\\n                            case \\\"csv\\\":\\n                                if (attr == \\\"clip-rect\\\") {\\n                                    now = [];\\n                                    i = 4;\\n                                    while (i--) {\\n                                        now[i] = +from[attr][i] + pos * ms * diff[attr][i];\\n                                    }\\n                                }\\n                                break;\\n                            default:\\n                                var from2 = [][concat](from[attr]);\\n                                now = [];\\n                                i = that.paper.customAttributes[attr].length;\\n                                while (i--) {\\n                                    now[i] = +from2[i] + pos * ms * diff[attr][i];\\n                                }\\n                                break;\\n                        }\\n                        set[attr] = now;\\n                    }\\n                    that.attr(set);\\n                    (function (id, that, anim) {\\n                        setTimeout(function () {\\n                            eve(\\\"raphael.anim.frame.\\\" + id, that, anim);\\n                        });\\n                    })(that.id, that, e.anim);\\n                } else {\\n                    (function(f, el, a) {\\n                        setTimeout(function() {\\n                            eve(\\\"raphael.anim.frame.\\\" + el.id, el, a);\\n                            eve(\\\"raphael.anim.finish.\\\" + el.id, el, a);\\n                            R.is(f, \\\"function\\\") && f.call(el);\\n                        });\\n                    })(e.callback, that, e.anim);\\n                    that.attr(to);\\n                    animationElements.splice(l--, 1);\\n                    if (e.repeat > 1 && !e.next) {\\n                        for (key in to) if (to[has](key)) {\\n                            init[key] = e.totalOrigin[key];\\n                        }\\n                        e.el.attr(init);\\n                        runAnimation(e.anim, e.el, e.anim.percents[0], null, e.totalOrigin, e.repeat - 1);\\n                    }\\n                    if (e.next && !e.stop) {\\n                        runAnimation(e.anim, e.el, e.next, null, e.totalOrigin, e.repeat);\\n                    }\\n                }\\n            }\\n            animationElements.length && requestAnimFrame(animation);\\n        },\\n        upto255 = function (color) {\\n            return color > 255 ? 255 : color < 0 ? 0 : color;\\n        };\\n    /*\\\\\\n     * Element.animateWith\\n     [ method ]\\n     **\\n     * Acts similar to @Element.animate, but ensure that given animation runs in sync with another given element.\\n     **\\n     > Parameters\\n     **\\n     - el (object) element to sync with\\n     - anim (object) animation to sync with\\n     - params (object) #optional final attributes for the element, see also @Element.attr\\n     - ms (number) #optional number of milliseconds for animation to run\\n     - easing (string) #optional easing type. Accept on of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\\n     - callback (function) #optional callback function. Will be called at the end of animation.\\n     * or\\n     - element (object) element to sync with\\n     - anim (object) animation to sync with\\n     - animation (object) #optional animation object, see @Raphael.animation\\n     **\\n     = (object) original element\\n     \\\\*/\\n    elproto.animateWith = function (el, anim, params, ms, easing, callback) {\\n        var element = this;\\n        if (element.removed) {\\n            callback && callback.call(element);\\n            return element;\\n        }\\n        var a = params instanceof Animation ? params : R.animation(params, ms, easing, callback),\\n            x, y;\\n        runAnimation(a, element, a.percents[0], null, element.attr());\\n        for (var i = 0, ii = animationElements.length; i < ii; i++) {\\n            if (animationElements[i].anim == anim && animationElements[i].el == el) {\\n                animationElements[ii - 1].start = animationElements[i].start;\\n                break;\\n            }\\n        }\\n        return element;\\n        //\\n        //\\n        // var a = params ? R.animation(params, ms, easing, callback) : anim,\\n        //     status = element.status(anim);\\n        // return this.animate(a).status(a, status * anim.ms / a.ms);\\n    };\\n    function CubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\\n        var cx = 3 * p1x,\\n            bx = 3 * (p2x - p1x) - cx,\\n            ax = 1 - cx - bx,\\n            cy = 3 * p1y,\\n            by = 3 * (p2y - p1y) - cy,\\n            ay = 1 - cy - by;\\n        function sampleCurveX(t) {\\n            return ((ax * t + bx) * t + cx) * t;\\n        }\\n        function solve(x, epsilon) {\\n            var t = solveCurveX(x, epsilon);\\n            return ((ay * t + by) * t + cy) * t;\\n        }\\n        function solveCurveX(x, epsilon) {\\n            var t0, t1, t2, x2, d2, i;\\n            for(t2 = x, i = 0; i < 8; i++) {\\n                x2 = sampleCurveX(t2) - x;\\n                if (abs(x2) < epsilon) {\\n                    return t2;\\n                }\\n                d2 = (3 * ax * t2 + 2 * bx) * t2 + cx;\\n                if (abs(d2) < 1e-6) {\\n                    break;\\n                }\\n                t2 = t2 - x2 / d2;\\n            }\\n            t0 = 0;\\n            t1 = 1;\\n            t2 = x;\\n            if (t2 < t0) {\\n                return t0;\\n            }\\n            if (t2 > t1) {\\n                return t1;\\n            }\\n            while (t0 < t1) {\\n                x2 = sampleCurveX(t2);\\n                if (abs(x2 - x) < epsilon) {\\n                    return t2;\\n                }\\n                if (x > x2) {\\n                    t0 = t2;\\n                } else {\\n                    t1 = t2;\\n                }\\n                t2 = (t1 - t0) / 2 + t0;\\n            }\\n            return t2;\\n        }\\n        return solve(t, 1 / (200 * duration));\\n    }\\n    elproto.onAnimation = function (f) {\\n        f ? eve.on(\\\"raphael.anim.frame.\\\" + this.id, f) : eve.unbind(\\\"raphael.anim.frame.\\\" + this.id);\\n        return this;\\n    };\\n    function Animation(anim, ms) {\\n        var percents = [],\\n            newAnim = {};\\n        this.ms = ms;\\n        this.times = 1;\\n        if (anim) {\\n            for (var attr in anim) if (anim[has](attr)) {\\n                newAnim[toFloat(attr)] = anim[attr];\\n                percents.push(toFloat(attr));\\n            }\\n            percents.sort(sortByNumber);\\n        }\\n        this.anim = newAnim;\\n        this.top = percents[percents.length - 1];\\n        this.percents = percents;\\n    }\\n    /*\\\\\\n     * Animation.delay\\n     [ method ]\\n     **\\n     * Creates a copy of existing animation object with given delay.\\n     **\\n     > Parameters\\n     **\\n     - delay (number) number of ms to pass between animation start and actual animation\\n     **\\n     = (object) new altered Animation object\\n     | var anim = Raphael.animation({cx: 10, cy: 20}, 2e3);\\n     | circle1.animate(anim); // run the given animation immediately\\n     | circle2.animate(anim.delay(500)); // run the given animation after 500 ms\\n     \\\\*/\\n    Animation.prototype.delay = function (delay) {\\n        var a = new Animation(this.anim, this.ms);\\n        a.times = this.times;\\n        a.del = +delay || 0;\\n        return a;\\n    };\\n    /*\\\\\\n     * Animation.repeat\\n     [ method ]\\n     **\\n     * Creates a copy of existing animation object with given repetition.\\n     **\\n     > Parameters\\n     **\\n     - repeat (number) number iterations of animation. For infinite animation pass `Infinity`\\n     **\\n     = (object) new altered Animation object\\n     \\\\*/\\n    Animation.prototype.repeat = function (times) {\\n        var a = new Animation(this.anim, this.ms);\\n        a.del = this.del;\\n        a.times = math.floor(mmax(times, 0)) || 1;\\n        return a;\\n    };\\n    function runAnimation(anim, element, percent, status, totalOrigin, times) {\\n        percent = toFloat(percent);\\n        var params,\\n            isInAnim,\\n            isInAnimSet,\\n            percents = [],\\n            next,\\n            prev,\\n            timestamp,\\n            ms = anim.ms,\\n            from = {},\\n            to = {},\\n            diff = {};\\n        if (status) {\\n            for (i = 0, ii = animationElements.length; i < ii; i++) {\\n                var e = animationElements[i];\\n                if (e.el.id == element.id && e.anim == anim) {\\n                    if (e.percent != percent) {\\n                        animationElements.splice(i, 1);\\n                        isInAnimSet = 1;\\n                    } else {\\n                        isInAnim = e;\\n                    }\\n                    element.attr(e.totalOrigin);\\n                    break;\\n                }\\n            }\\n        } else {\\n            status = +to; // NaN\\n        }\\n        for (var i = 0, ii = anim.percents.length; i < ii; i++) {\\n            if (anim.percents[i] == percent || anim.percents[i] > status * anim.top) {\\n                percent = anim.percents[i];\\n                prev = anim.percents[i - 1] || 0;\\n                ms = ms / anim.top * (percent - prev);\\n                next = anim.percents[i + 1];\\n                params = anim.anim[percent];\\n                break;\\n            } else if (status) {\\n                element.attr(anim.anim[anim.percents[i]]);\\n            }\\n        }\\n        if (!params) {\\n            return;\\n        }\\n        if (!isInAnim) {\\n            for (var attr in params) if (params[has](attr)) {\\n                if (availableAnimAttrs[has](attr) || element.paper.customAttributes[has](attr)) {\\n                    from[attr] = element.attr(attr);\\n                    (from[attr] == null) && (from[attr] = availableAttrs[attr]);\\n                    to[attr] = params[attr];\\n                    switch (availableAnimAttrs[attr]) {\\n                        case nu:\\n                            diff[attr] = (to[attr] - from[attr]) / ms;\\n                            break;\\n                        case \\\"colour\\\":\\n                            from[attr] = R.getRGB(from[attr]);\\n                            var toColour = R.getRGB(to[attr]);\\n                            diff[attr] = {\\n                                r: (toColour.r - from[attr].r) / ms,\\n                                g: (toColour.g - from[attr].g) / ms,\\n                                b: (toColour.b - from[attr].b) / ms\\n                            };\\n                            break;\\n                        case \\\"path\\\":\\n                            var pathes = path2curve(from[attr], to[attr]),\\n                                toPath = pathes[1];\\n                            from[attr] = pathes[0];\\n                            diff[attr] = [];\\n                            for (i = 0, ii = from[attr].length; i < ii; i++) {\\n                                diff[attr][i] = [0];\\n                                for (var j = 1, jj = from[attr][i].length; j < jj; j++) {\\n                                    diff[attr][i][j] = (toPath[i][j] - from[attr][i][j]) / ms;\\n                                }\\n                            }\\n                            break;\\n                        case \\\"transform\\\":\\n                            var _ = element._,\\n                                eq = equaliseTransform(_[attr], to[attr]);\\n                            if (eq) {\\n                                from[attr] = eq.from;\\n                                to[attr] = eq.to;\\n                                diff[attr] = [];\\n                                diff[attr].real = true;\\n                                for (i = 0, ii = from[attr].length; i < ii; i++) {\\n                                    diff[attr][i] = [from[attr][i][0]];\\n                                    for (j = 1, jj = from[attr][i].length; j < jj; j++) {\\n                                        diff[attr][i][j] = (to[attr][i][j] - from[attr][i][j]) / ms;\\n                                    }\\n                                }\\n                            } else {\\n                                var m = (element.matrix || new Matrix),\\n                                    to2 = {\\n                                        _: {transform: _.transform},\\n                                        getBBox: function () {\\n                                            return element.getBBox(1);\\n                                        }\\n                                    };\\n                                from[attr] = [\\n                                    m.a,\\n                                    m.b,\\n                                    m.c,\\n                                    m.d,\\n                                    m.e,\\n                                    m.f\\n                                ];\\n                                extractTransform(to2, to[attr]);\\n                                to[attr] = to2._.transform;\\n                                diff[attr] = [\\n                                    (to2.matrix.a - m.a) / ms,\\n                                    (to2.matrix.b - m.b) / ms,\\n                                    (to2.matrix.c - m.c) / ms,\\n                                    (to2.matrix.d - m.d) / ms,\\n                                    (to2.matrix.e - m.e) / ms,\\n                                    (to2.matrix.f - m.f) / ms\\n                                ];\\n                                // from[attr] = [_.sx, _.sy, _.deg, _.dx, _.dy];\\n                                // var to2 = {_:{}, getBBox: function () { return element.getBBox(); }};\\n                                // extractTransform(to2, to[attr]);\\n                                // diff[attr] = [\\n                                //     (to2._.sx - _.sx) / ms,\\n                                //     (to2._.sy - _.sy) / ms,\\n                                //     (to2._.deg - _.deg) / ms,\\n                                //     (to2._.dx - _.dx) / ms,\\n                                //     (to2._.dy - _.dy) / ms\\n                                // ];\\n                            }\\n                            break;\\n                        case \\\"csv\\\":\\n                            var values = Str(params[attr])[split](separator),\\n                                from2 = Str(from[attr])[split](separator);\\n                            if (attr == \\\"clip-rect\\\") {\\n                                from[attr] = from2;\\n                                diff[attr] = [];\\n                                i = from2.length;\\n                                while (i--) {\\n                                    diff[attr][i] = (values[i] - from[attr][i]) / ms;\\n                                }\\n                            }\\n                            to[attr] = values;\\n                            break;\\n                        default:\\n                            values = [][concat](params[attr]);\\n                            from2 = [][concat](from[attr]);\\n                            diff[attr] = [];\\n                            i = element.paper.customAttributes[attr].length;\\n                            while (i--) {\\n                                diff[attr][i] = ((values[i] || 0) - (from2[i] || 0)) / ms;\\n                            }\\n                            break;\\n                    }\\n                }\\n            }\\n            var easing = params.easing,\\n                easyeasy = R.easing_formulas[easing];\\n            if (!easyeasy) {\\n                easyeasy = Str(easing).match(bezierrg);\\n                if (easyeasy && easyeasy.length == 5) {\\n                    var curve = easyeasy;\\n                    easyeasy = function (t) {\\n                        return CubicBezierAtTime(t, +curve[1], +curve[2], +curve[3], +curve[4], ms);\\n                    };\\n                } else {\\n                    easyeasy = pipe;\\n                }\\n            }\\n            timestamp = params.start || anim.start || +new Date;\\n            e = {\\n                anim: anim,\\n                percent: percent,\\n                timestamp: timestamp,\\n                start: timestamp + (anim.del || 0),\\n                status: 0,\\n                initstatus: status || 0,\\n                stop: false,\\n                ms: ms,\\n                easing: easyeasy,\\n                from: from,\\n                diff: diff,\\n                to: to,\\n                el: element,\\n                callback: params.callback,\\n                prev: prev,\\n                next: next,\\n                repeat: times || anim.times,\\n                origin: element.attr(),\\n                totalOrigin: totalOrigin\\n            };\\n            animationElements.push(e);\\n            if (status && !isInAnim && !isInAnimSet) {\\n                e.stop = true;\\n                e.start = new Date - ms * status;\\n                if (animationElements.length == 1) {\\n                    return animation();\\n                }\\n            }\\n            if (isInAnimSet) {\\n                e.start = new Date - e.ms * status;\\n            }\\n            animationElements.length == 1 && requestAnimFrame(animation);\\n        } else {\\n            isInAnim.initstatus = status;\\n            isInAnim.start = new Date - isInAnim.ms * status;\\n        }\\n        eve(\\\"raphael.anim.start.\\\" + element.id, element, anim);\\n    }\\n    /*\\\\\\n     * Raphael.animation\\n     [ method ]\\n     **\\n     * Creates an animation object that can be passed to the @Element.animate or @Element.animateWith methods.\\n     * See also @Animation.delay and @Animation.repeat methods.\\n     **\\n     > Parameters\\n     **\\n     - params (object) final attributes for the element, see also @Element.attr\\n     - ms (number) number of milliseconds for animation to run\\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\\n     - callback (function) #optional callback function. Will be called at the end of animation.\\n     **\\n     = (object) @Animation\\n     \\\\*/\\n    R.animation = function (params, ms, easing, callback) {\\n        if (params instanceof Animation) {\\n            return params;\\n        }\\n        if (R.is(easing, \\\"function\\\") || !easing) {\\n            callback = callback || easing || null;\\n            easing = null;\\n        }\\n        params = Object(params);\\n        ms = +ms || 0;\\n        var p = {},\\n            json,\\n            attr;\\n        for (attr in params) if (params[has](attr) && toFloat(attr) != attr && toFloat(attr) + \\\"%\\\" != attr) {\\n            json = true;\\n            p[attr] = params[attr];\\n        }\\n        if (!json) {\\n            // if percent-like syntax is used and end-of-all animation callback used\\n            if(callback){\\n                // find the last one\\n                var lastKey = 0;\\n                for(var i in params){\\n                    var percent = toInt(i);\\n                    if(params[has](i) && percent > lastKey){\\n                        lastKey = percent;\\n                    }\\n                }\\n                lastKey += '%';\\n                // if already defined callback in the last keyframe, skip\\n                !params[lastKey].callback && (params[lastKey].callback = callback);\\n            }\\n            return new Animation(params, ms);\\n        } else {\\n            easing && (p.easing = easing);\\n            callback && (p.callback = callback);\\n            return new Animation({100: p}, ms);\\n        }\\n    };\\n    /*\\\\\\n     * Element.animate\\n     [ method ]\\n     **\\n     * Creates and starts animation for given element.\\n     **\\n     > Parameters\\n     **\\n     - params (object) final attributes for the element, see also @Element.attr\\n     - ms (number) number of milliseconds for animation to run\\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\\n     - callback (function) #optional callback function. Will be called at the end of animation.\\n     * or\\n     - animation (object) animation object, see @Raphael.animation\\n     **\\n     = (object) original element\\n     \\\\*/\\n    elproto.animate = function (params, ms, easing, callback) {\\n        var element = this;\\n        if (element.removed) {\\n            callback && callback.call(element);\\n            return element;\\n        }\\n        var anim = params instanceof Animation ? params : R.animation(params, ms, easing, callback);\\n        runAnimation(anim, element, anim.percents[0], null, element.attr());\\n        return element;\\n    };\\n    /*\\\\\\n     * Element.setTime\\n     [ method ]\\n     **\\n     * Sets the status of animation of the element in milliseconds. Similar to @Element.status method.\\n     **\\n     > Parameters\\n     **\\n     - anim (object) animation object\\n     - value (number) number of milliseconds from the beginning of the animation\\n     **\\n     = (object) original element if `value` is specified\\n     * Note, that during animation following events are triggered:\\n     *\\n     * On each animation frame event `anim.frame.<id>`, on start `anim.start.<id>` and on end `anim.finish.<id>`.\\n     \\\\*/\\n    elproto.setTime = function (anim, value) {\\n        if (anim && value != null) {\\n            this.status(anim, mmin(value, anim.ms) / anim.ms);\\n        }\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.status\\n     [ method ]\\n     **\\n     * Gets or sets the status of animation of the element.\\n     **\\n     > Parameters\\n     **\\n     - anim (object) #optional animation object\\n     - value (number) #optional 0 – 1. If specified, method works like a setter and sets the status of a given animation to the value. This will cause animation to jump to the given position.\\n     **\\n     = (number) status\\n     * or\\n     = (array) status if `anim` is not specified. Array of objects in format:\\n     o {\\n     o     anim: (object) animation object\\n     o     status: (number) status\\n     o }\\n     * or\\n     = (object) original element if `value` is specified\\n     \\\\*/\\n    elproto.status = function (anim, value) {\\n        var out = [],\\n            i = 0,\\n            len,\\n            e;\\n        if (value != null) {\\n            runAnimation(anim, this, -1, mmin(value, 1));\\n            return this;\\n        } else {\\n            len = animationElements.length;\\n            for (; i < len; i++) {\\n                e = animationElements[i];\\n                if (e.el.id == this.id && (!anim || e.anim == anim)) {\\n                    if (anim) {\\n                        return e.status;\\n                    }\\n                    out.push({\\n                        anim: e.anim,\\n                        status: e.status\\n                    });\\n                }\\n            }\\n            if (anim) {\\n                return 0;\\n            }\\n            return out;\\n        }\\n    };\\n    /*\\\\\\n     * Element.pause\\n     [ method ]\\n     **\\n     * Stops animation of the element with ability to resume it later on.\\n     **\\n     > Parameters\\n     **\\n     - anim (object) #optional animation object\\n     **\\n     = (object) original element\\n     \\\\*/\\n    elproto.pause = function (anim) {\\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\\n            if (eve(\\\"raphael.anim.pause.\\\" + this.id, this, animationElements[i].anim) !== false) {\\n                animationElements[i].paused = true;\\n            }\\n        }\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.resume\\n     [ method ]\\n     **\\n     * Resumes animation if it was paused with @Element.pause method.\\n     **\\n     > Parameters\\n     **\\n     - anim (object) #optional animation object\\n     **\\n     = (object) original element\\n     \\\\*/\\n    elproto.resume = function (anim) {\\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\\n            var e = animationElements[i];\\n            if (eve(\\\"raphael.anim.resume.\\\" + this.id, this, e.anim) !== false) {\\n                delete e.paused;\\n                this.status(e.anim, e.status);\\n            }\\n        }\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.stop\\n     [ method ]\\n     **\\n     * Stops animation of the element.\\n     **\\n     > Parameters\\n     **\\n     - anim (object) #optional animation object\\n     **\\n     = (object) original element\\n     \\\\*/\\n    elproto.stop = function (anim) {\\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\\n            if (eve(\\\"raphael.anim.stop.\\\" + this.id, this, animationElements[i].anim) !== false) {\\n                animationElements.splice(i--, 1);\\n            }\\n        }\\n        return this;\\n    };\\n    function stopAnimation(paper) {\\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.paper == paper) {\\n            animationElements.splice(i--, 1);\\n        }\\n    }\\n    eve.on(\\\"raphael.remove\\\", stopAnimation);\\n    eve.on(\\\"raphael.clear\\\", stopAnimation);\\n    elproto.toString = function () {\\n        return \\\"Rapha\\\\xebl\\\\u2019s object\\\";\\n    };\\n\\n    // Set\\n    var Set = function (items) {\\n            this.items = [];\\n            this.length = 0;\\n            this.type = \\\"set\\\";\\n            if (items) {\\n                for (var i = 0, ii = items.length; i < ii; i++) {\\n                    if (items[i] && (items[i].constructor == elproto.constructor || items[i].constructor == Set)) {\\n                        this[this.items.length] = this.items[this.items.length] = items[i];\\n                        this.length++;\\n                    }\\n                }\\n            }\\n        },\\n        setproto = Set.prototype;\\n    /*\\\\\\n     * Set.push\\n     [ method ]\\n     **\\n     * Adds each argument to the current set.\\n     = (object) original element\\n     \\\\*/\\n    setproto.push = function () {\\n        var item,\\n            len;\\n        for (var i = 0, ii = arguments.length; i < ii; i++) {\\n            item = arguments[i];\\n            if (item && (item.constructor == elproto.constructor || item.constructor == Set)) {\\n                len = this.items.length;\\n                this[len] = this.items[len] = item;\\n                this.length++;\\n            }\\n        }\\n        return this;\\n    };\\n    /*\\\\\\n     * Set.pop\\n     [ method ]\\n     **\\n     * Removes last element and returns it.\\n     = (object) element\\n     \\\\*/\\n    setproto.pop = function () {\\n        this.length && delete this[this.length--];\\n        return this.items.pop();\\n    };\\n    /*\\\\\\n     * Set.forEach\\n     [ method ]\\n     **\\n     * Executes given function for each element in the set.\\n     *\\n     * If function returns `false` it will stop loop running.\\n     **\\n     > Parameters\\n     **\\n     - callback (function) function to run\\n     - thisArg (object) context object for the callback\\n     = (object) Set object\\n     \\\\*/\\n    setproto.forEach = function (callback, thisArg) {\\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\\n            if (callback.call(thisArg, this.items[i], i) === false) {\\n                return this;\\n            }\\n        }\\n        return this;\\n    };\\n    for (var method in elproto) if (elproto[has](method)) {\\n        setproto[method] = (function (methodname) {\\n            return function () {\\n                var arg = arguments;\\n                return this.forEach(function (el) {\\n                    el[methodname][apply](el, arg);\\n                });\\n            };\\n        })(method);\\n    }\\n    setproto.attr = function (name, value) {\\n        if (name && R.is(name, array) && R.is(name[0], \\\"object\\\")) {\\n            for (var j = 0, jj = name.length; j < jj; j++) {\\n                this.items[j].attr(name[j]);\\n            }\\n        } else {\\n            for (var i = 0, ii = this.items.length; i < ii; i++) {\\n                this.items[i].attr(name, value);\\n            }\\n        }\\n        return this;\\n    };\\n    /*\\\\\\n     * Set.clear\\n     [ method ]\\n     **\\n     * Removes all elements from the set\\n     \\\\*/\\n    setproto.clear = function () {\\n        while (this.length) {\\n            this.pop();\\n        }\\n    };\\n    /*\\\\\\n     * Set.splice\\n     [ method ]\\n     **\\n     * Removes given element from the set\\n     **\\n     > Parameters\\n     **\\n     - index (number) position of the deletion\\n     - count (number) number of element to remove\\n     - insertion… (object) #optional elements to insert\\n     = (object) set elements that were deleted\\n     \\\\*/\\n    setproto.splice = function (index, count, insertion) {\\n        index = index < 0 ? mmax(this.length + index, 0) : index;\\n        count = mmax(0, mmin(this.length - index, count));\\n        var tail = [],\\n            todel = [],\\n            args = [],\\n            i;\\n        for (i = 2; i < arguments.length; i++) {\\n            args.push(arguments[i]);\\n        }\\n        for (i = 0; i < count; i++) {\\n            todel.push(this[index + i]);\\n        }\\n        for (; i < this.length - index; i++) {\\n            tail.push(this[index + i]);\\n        }\\n        var arglen = args.length;\\n        for (i = 0; i < arglen + tail.length; i++) {\\n            this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];\\n        }\\n        i = this.items.length = this.length -= count - arglen;\\n        while (this[i]) {\\n            delete this[i++];\\n        }\\n        return new Set(todel);\\n    };\\n    /*\\\\\\n     * Set.exclude\\n     [ method ]\\n     **\\n     * Removes given element from the set\\n     **\\n     > Parameters\\n     **\\n     - element (object) element to remove\\n     = (boolean) `true` if object was found & removed from the set\\n     \\\\*/\\n    setproto.exclude = function (el) {\\n        for (var i = 0, ii = this.length; i < ii; i++) if (this[i] == el) {\\n            this.splice(i, 1);\\n            return true;\\n        }\\n    };\\n    setproto.animate = function (params, ms, easing, callback) {\\n        (R.is(easing, \\\"function\\\") || !easing) && (callback = easing || null);\\n        var len = this.items.length,\\n            i = len,\\n            item,\\n            set = this,\\n            collector;\\n        if (!len) {\\n            return this;\\n        }\\n        callback && (collector = function () {\\n            !--len && callback.call(set);\\n        });\\n        easing = R.is(easing, string) ? easing : collector;\\n        var anim = R.animation(params, ms, easing, collector);\\n        item = this.items[--i].animate(anim);\\n        while (i--) {\\n            this.items[i] && !this.items[i].removed && this.items[i].animateWith(item, anim, anim);\\n            (this.items[i] && !this.items[i].removed) || len--;\\n        }\\n        return this;\\n    };\\n    setproto.insertAfter = function (el) {\\n        var i = this.items.length;\\n        while (i--) {\\n            this.items[i].insertAfter(el);\\n        }\\n        return this;\\n    };\\n\\n    // FREEGROUP Fix: RaphaelJS changes the order of the elements of the 'set' by calling the toBack method.\\n    //                \\\"toBack\\\" must be called reverse to care about the rendering order. In this case we override\\n    //                the buggy default implementation here.\\n    //\\n    setproto.toBack = function () {\\n        var i = this.items.length;\\n        while (i--) {\\n            this.items[i].toBack();\\n        }\\n        return this;\\n    };\\n\\n    // FREEGROUP Fix: Unfortunately raphael didn'T expose the \\\"set.prototype\\\". In this case\\n    //                I must add all extension to the raphael implementation itself.\\n    //                Provide support method for easy check if the elements are visible.\\n    setproto.isVisible = function () {\\n        var i = this.items.length;\\n        var visible = false;\\n        while (i--) {\\n            visible = visible ||this.items[i].isVisible();\\n        }\\n        return visible;\\n    };\\n\\n\\n    // FREEGROUP FIX: Adding \\\"isWithoutTransform\\\" to the function and redirect them to the elements\\n    setproto.getBBox = function (isWithoutTransform) {\\n        var x = [],\\n            y = [],\\n            x2 = [],\\n            y2 = [];\\n        for (var i = this.items.length; i--;) if (!this.items[i].removed) {\\n            var box = this.items[i].getBBox(isWithoutTransform);\\n            x.push(box.x);\\n            y.push(box.y);\\n            x2.push(box.x + box.width);\\n            y2.push(box.y + box.height);\\n        }\\n        x = mmin[apply](0, x);\\n        y = mmin[apply](0, y);\\n        x2 = mmax[apply](0, x2);\\n        y2 = mmax[apply](0, y2);\\n        return {\\n            x: x,\\n            y: y,\\n            x2: x2,\\n            y2: y2,\\n            width: x2 - x,\\n            height: y2 - y\\n        };\\n    };\\n    setproto.clone = function (s) {\\n        s = this.paper.set();\\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\\n            s.push(this.items[i].clone());\\n        }\\n        return s;\\n    };\\n    setproto.toString = function () {\\n        return \\\"Rapha\\\\xebl\\\\u2018s set\\\";\\n    };\\n\\n    setproto.glow = function(glowConfig) {\\n        var ret = this.paper.set();\\n        this.forEach(function(shape, index){\\n            var g = shape.glow(glowConfig);\\n            if(g != null){\\n                g.forEach(function(shape2, index2){\\n                    ret.push(shape2);\\n                });\\n            }\\n        });\\n        return ret;\\n    };\\n\\n\\n    /*\\\\\\n     * Set.isPointInside\\n     [ method ]\\n     **\\n     * Determine if given point is inside this set’s elements\\n     **\\n     > Parameters\\n     **\\n     - x (number) x coordinate of the point\\n     - y (number) y coordinate of the point\\n     = (boolean) `true` if point is inside any of the set's elements\\n     \\\\*/\\n    setproto.isPointInside = function (x, y) {\\n        var isPointInside = false;\\n        this.forEach(function (el) {\\n            if (el.isPointInside(x, y)) {\\n                isPointInside = true;\\n                return false; // stop loop\\n            }\\n        });\\n        return isPointInside;\\n    };\\n\\n    /*\\\\\\n     * Raphael.registerFont\\n     [ method ]\\n     **\\n     * Adds given font to the registered set of fonts for Raphaël. Should be used as an internal call from within Cufón’s font file.\\n     * Returns original parameter, so it could be used with chaining.\\n     # <a href=\\\"http://wiki.github.com/sorccu/cufon/about\\\">More about Cufón and how to convert your font form TTF, OTF, etc to JavaScript file.</a>\\n     **\\n     > Parameters\\n     **\\n     - font (object) the font to register\\n     = (object) the font you passed in\\n     > Usage\\n     | Cufon.registerFont(Raphael.registerFont({…}));\\n     \\\\*/\\n    R.registerFont = function (font) {\\n        if (!font.face) {\\n            return font;\\n        }\\n        this.fonts = this.fonts || {};\\n        var fontcopy = {\\n                w: font.w,\\n                face: {},\\n                glyphs: {}\\n            },\\n            family = font.face[\\\"font-family\\\"];\\n        for (var prop in font.face) if (font.face[has](prop)) {\\n            fontcopy.face[prop] = font.face[prop];\\n        }\\n        if (this.fonts[family]) {\\n            this.fonts[family].push(fontcopy);\\n        } else {\\n            this.fonts[family] = [fontcopy];\\n        }\\n        if (!font.svg) {\\n            fontcopy.face[\\\"units-per-em\\\"] = toInt(font.face[\\\"units-per-em\\\"], 10);\\n            for (var glyph in font.glyphs) if (font.glyphs[has](glyph)) {\\n                var path = font.glyphs[glyph];\\n                fontcopy.glyphs[glyph] = {\\n                    w: path.w,\\n                    k: {},\\n                    d: path.d && \\\"M\\\" + path.d.replace(/[mlcxtrv]/g, function (command) {\\n                        return {l: \\\"L\\\", c: \\\"C\\\", x: \\\"z\\\", t: \\\"m\\\", r: \\\"l\\\", v: \\\"c\\\"}[command] || \\\"M\\\";\\n                    }) + \\\"z\\\"\\n                };\\n                if (path.k) {\\n                    for (var k in path.k) if (path[has](k)) {\\n                        fontcopy.glyphs[glyph].k[k] = path.k[k];\\n                    }\\n                }\\n            }\\n        }\\n        return font;\\n    };\\n    /*\\\\\\n     * Paper.getFont\\n     [ method ]\\n     **\\n     * Finds font object in the registered fonts by given parameters. You could specify only one word from the font name, like “Myriad” for “Myriad Pro”.\\n     **\\n     > Parameters\\n     **\\n     - family (string) font family name or any word from it\\n     - weight (string) #optional font weight\\n     - style (string) #optional font style\\n     - stretch (string) #optional font stretch\\n     = (object) the font object\\n     > Usage\\n     | paper.print(100, 100, \\\"Test string\\\", paper.getFont(\\\"Times\\\", 800), 30);\\n     \\\\*/\\n    paperproto.getFont = function (family, weight, style, stretch) {\\n        stretch = stretch || \\\"normal\\\";\\n        style = style || \\\"normal\\\";\\n        weight = +weight || {normal: 400, bold: 700, lighter: 300, bolder: 800}[weight] || 400;\\n        if (!R.fonts) {\\n            return;\\n        }\\n        var font = R.fonts[family];\\n        if (!font) {\\n            var name = new RegExp(\\\"(^|\\\\\\\\s)\\\" + family.replace(/[^\\\\w\\\\d\\\\s+!~.:_-]/g, E) + \\\"(\\\\\\\\s|$)\\\", \\\"i\\\");\\n            for (var fontName in R.fonts) if (R.fonts[has](fontName)) {\\n                if (name.test(fontName)) {\\n                    font = R.fonts[fontName];\\n                    break;\\n                }\\n            }\\n        }\\n        var thefont;\\n        if (font) {\\n            for (var i = 0, ii = font.length; i < ii; i++) {\\n                thefont = font[i];\\n                if (thefont.face[\\\"font-weight\\\"] == weight && (thefont.face[\\\"font-style\\\"] == style || !thefont.face[\\\"font-style\\\"]) && thefont.face[\\\"font-stretch\\\"] == stretch) {\\n                    break;\\n                }\\n            }\\n        }\\n        return thefont;\\n    };\\n    /*\\\\\\n     * Paper.print\\n     [ method ]\\n     **\\n     * Creates path that represent given text written using given font at given position with given size.\\n     * Result of the method is path element that contains whole text as a separate path.\\n     **\\n     > Parameters\\n     **\\n     - x (number) x position of the text\\n     - y (number) y position of the text\\n     - string (string) text to print\\n     - font (object) font object, see @Paper.getFont\\n     - size (number) #optional size of the font, default is `16`\\n     - origin (string) #optional could be `\\\"baseline\\\"` or `\\\"middle\\\"`, default is `\\\"middle\\\"`\\n     - letter_spacing (number) #optional number in range `-1..1`, default is `0`\\n     - line_spacing (number) #optional number in range `1..3`, default is `1`\\n     = (object) resulting path element, which consist of all letters\\n     > Usage\\n     | var txt = r.print(10, 50, \\\"print\\\", r.getFont(\\\"Museo\\\"), 30).attr({fill: \\\"#fff\\\"});\\n     \\\\*/\\n    paperproto.print = function (x, y, string, font, size, origin, letter_spacing, line_spacing) {\\n        origin = origin || \\\"middle\\\"; // baseline|middle\\n        letter_spacing = mmax(mmin(letter_spacing || 0, 1), -1);\\n        line_spacing = mmax(mmin(line_spacing || 1, 3), 1);\\n        var letters = Str(string)[split](E),\\n            shift = 0,\\n            notfirst = 0,\\n            path = E,\\n            scale;\\n        R.is(font, \\\"string\\\") && (font = this.getFont(font));\\n        if (font) {\\n            scale = (size || 16) / font.face[\\\"units-per-em\\\"];\\n            var bb = font.face.bbox[split](separator),\\n                top = +bb[0],\\n                lineHeight = bb[3] - bb[1],\\n                shifty = 0,\\n                height = +bb[1] + (origin == \\\"baseline\\\" ? lineHeight + (+font.face.descent) : lineHeight / 2);\\n            for (var i = 0, ii = letters.length; i < ii; i++) {\\n                if (letters[i] == \\\"\\\\n\\\") {\\n                    shift = 0;\\n                    curr = 0;\\n                    notfirst = 0;\\n                    shifty += lineHeight * line_spacing;\\n                } else {\\n                    var prev = notfirst && font.glyphs[letters[i - 1]] || {},\\n                        curr = font.glyphs[letters[i]];\\n                    shift += notfirst ? (prev.w || font.w) + (prev.k && prev.k[letters[i]] || 0) + (font.w * letter_spacing) : 0;\\n                    notfirst = 1;\\n                }\\n                if (curr && curr.d) {\\n                    path += R.transformPath(curr.d, [\\\"t\\\", shift * scale, shifty * scale, \\\"s\\\", scale, scale, top, height, \\\"t\\\", (x - top) / scale, (y - height) / scale]);\\n                }\\n            }\\n        }\\n        return this.path(path).attr({\\n            fill: \\\"#000\\\",\\n            stroke: \\\"none\\\"\\n        });\\n    };\\n\\n    /*\\\\\\n     * Paper.add\\n     [ method ]\\n     **\\n     * Imports elements in JSON array in format `{type: type, <attributes>}`\\n     **\\n     > Parameters\\n     **\\n     - json (array)\\n     = (object) resulting set of imported elements\\n     > Usage\\n     | paper.add([\\n     |     {\\n     |         type: \\\"circle\\\",\\n     |         cx: 10,\\n     |         cy: 10,\\n     |         r: 5\\n     |     },\\n     |     {\\n     |         type: \\\"rect\\\",\\n     |         x: 10,\\n     |         y: 10,\\n     |         width: 10,\\n     |         height: 10,\\n     |         fill: \\\"#fc0\\\"\\n     |     }\\n     | ]);\\n     \\\\*/\\n    paperproto.add = function (json) {\\n        if (R.is(json, \\\"array\\\")) {\\n            var res = this.set(),\\n                i = 0,\\n                ii = json.length,\\n                j;\\n            for (; i < ii; i++) {\\n                j = json[i] || {};\\n                elements[has](j.type) && res.push(this[j.type]().attr(j));\\n            }\\n        }\\n        return res;\\n    };\\n\\n    /*\\\\\\n     * Raphael.format\\n     [ method ]\\n     **\\n     * Simple format function. Replaces construction of type “`{<number>}`” to the corresponding argument.\\n     **\\n     > Parameters\\n     **\\n     - token (string) string to format\\n     - … (string) rest of arguments will be treated as parameters for replacement\\n     = (string) formated string\\n     > Usage\\n     | var x = 10,\\n     |     y = 20,\\n     |     width = 40,\\n     |     height = 50;\\n     | // this will draw a rectangular shape equivalent to \\\"M10,20h40v50h-40z\\\"\\n     | paper.path(Raphael.format(\\\"M{0},{1}h{2}v{3}h{4}z\\\", x, y, width, height, -width));\\n     \\\\*/\\n    R.format = function (token, params) {\\n        var args = R.is(params, array) ? [0][concat](params) : arguments;\\n        token && R.is(token, string) && args.length - 1 && (token = token.replace(formatrg, function (str, i) {\\n            return args[++i] == null ? E : args[i];\\n        }));\\n        return token || E;\\n    };\\n    /*\\\\\\n     * Raphael.fullfill\\n     [ method ]\\n     **\\n     * A little bit more advanced format function than @Raphael.format. Replaces construction of type “`{<name>}`” to the corresponding argument.\\n     **\\n     > Parameters\\n     **\\n     - token (string) string to format\\n     - json (object) object which properties will be used as a replacement\\n     = (string) formated string\\n     > Usage\\n     | // this will draw a rectangular shape equivalent to \\\"M10,20h40v50h-40z\\\"\\n     | paper.path(Raphael.fullfill(\\\"M{x},{y}h{dim.width}v{dim.height}h{dim['negative width']}z\\\", {\\n     |     x: 10,\\n     |     y: 20,\\n     |     dim: {\\n     |         width: 40,\\n     |         height: 50,\\n     |         \\\"negative width\\\": -40\\n     |     }\\n     | }));\\n     \\\\*/\\n    R.fullfill = (function () {\\n        var tokenRegex = /\\\\{([^\\\\}]+)\\\\}/g,\\n            objNotationRegex = /(?:(?:^|\\\\.)(.+?)(?=\\\\[|\\\\.|$|\\\\()|\\\\[('|\\\")(.+?)\\\\2\\\\])(\\\\(\\\\))?/g, // matches .xxxxx or [\\\"xxxxx\\\"] to run over object properties\\n            replacer = function (all, key, obj) {\\n                var res = obj;\\n                key.replace(objNotationRegex, function (all, name, quote, quotedName, isFunc) {\\n                    name = name || quotedName;\\n                    if (res) {\\n                        if (name in res) {\\n                            res = res[name];\\n                        }\\n                        typeof res == \\\"function\\\" && isFunc && (res = res());\\n                    }\\n                });\\n                res = (res == null || res == obj ? all : res) + \\\"\\\";\\n                return res;\\n            };\\n        return function (str, obj) {\\n            return String(str).replace(tokenRegex, function (all, key) {\\n                return replacer(all, key, obj);\\n            });\\n        };\\n    })();\\n    /*\\\\\\n     * Raphael.ninja\\n     [ method ]\\n     **\\n     * If you want to leave no trace of Raphaël (Well, Raphaël creates only one global variable `Raphael`, but anyway.) You can use `ninja` method.\\n     * Beware, that in this case plugins could stop working, because they are depending on global variable existence.\\n     **\\n     = (object) Raphael object\\n     > Usage\\n     | (function (local_raphael) {\\n     |     var paper = local_raphael(10, 10, 320, 200);\\n     |     …\\n     | })(Raphael.ninja());\\n     \\\\*/\\n    R.ninja = function () {\\n        oldRaphael.was ? (g.win.Raphael = oldRaphael.is) : delete Raphael;\\n        return R;\\n    };\\n    /*\\\\\\n     * Raphael.st\\n     [ property (object) ]\\n     **\\n     * You can add your own method to elements and sets. It is wise to add a set method for each element method\\n     * you added, so you will be able to call the same method on sets too.\\n     **\\n     * See also @Raphael.el.\\n     > Usage\\n     | Raphael.el.red = function () {\\n     |     this.attr({fill: \\\"#f00\\\"});\\n     | };\\n     | Raphael.st.red = function () {\\n     |     this.forEach(function (el) {\\n     |         el.red();\\n     |     });\\n     | };\\n     | // then use it\\n     | paper.set(paper.circle(100, 100, 20), paper.circle(110, 100, 20)).red();\\n     \\\\*/\\n    R.st = setproto;\\n\\n    eve.on(\\\"raphael.DOMload\\\", function () {\\n        loaded = true;\\n    });\\n\\n    // Firefox <3.6 fix: http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\\n    (function (doc, loaded, f) {\\n        if (doc.readyState == null && doc.addEventListener){\\n            doc.addEventListener(loaded, f = function () {\\n                doc.removeEventListener(loaded, f, false);\\n                doc.readyState = \\\"complete\\\";\\n            }, false);\\n            doc.readyState = \\\"loading\\\";\\n        }\\n        function isLoaded() {\\n            (/in/).test(doc.readyState) ? setTimeout(isLoaded, 9) : R.eve(\\\"raphael.DOMload\\\");\\n        }\\n        isLoaded();\\n    })(document, \\\"DOMContentLoaded\\\");\\n\\n    return R;\\n}));\\n\\n// ┌─────────────────────────────────────────────────────────────────────┐ \\\\\\\\\\n// │ Raphaël 2.1.4 - JavaScript Vector Library                       │ \\\\\\\\\\n// ├─────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ SVG Module                                                          │ \\\\\\\\\\n// ├─────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\\\\\\\\\n// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\\\\\\\\\n// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\\\\\\\\\n// └─────────────────────────────────────────────────────────────────────┘ \\\\\\\\\\n\\n(function (glob, factory) {\\n    if (typeof define === \\\"function\\\" && define.amd) {\\n        define(\\\"raphael.svg\\\", [\\\"raphael.core\\\"], function(raphael) {\\n            return factory(raphael);\\n        });\\n    } else if (typeof exports === \\\"object\\\") {\\n        factory(require(\\\"./raphael.core\\\"));\\n    } else {\\n        factory(glob.Raphael);\\n    }\\n}(this, function(R) {\\n    if (R && !R.svg) {\\n        return;\\n    }\\n\\n    var has = \\\"hasOwnProperty\\\",\\n        Str = String,\\n        toFloat = parseFloat,\\n        toInt = parseInt,\\n        math = Math,\\n        mmax = math.max,\\n        abs = math.abs,\\n        pow = math.pow,\\n        separator = /[, ]+/,\\n        eve = R.eve,\\n        E = \\\"\\\",\\n        S = \\\" \\\";\\n    var xlink = \\\"http://www.w3.org/1999/xlink\\\",\\n        markers = {\\n            block: \\\"M5,0 0,2.5 5,5z\\\",\\n            classic: \\\"M5,0 0,2.5 5,5 3.5,3 3.5,2z\\\",\\n            diamond: \\\"M2.5,0 5,2.5 2.5,5 0,2.5z\\\",\\n            open: \\\"M6,1 1,3.5 6,6\\\",\\n            oval: \\\"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z\\\"\\n        },\\n        markerCounter = {};\\n    R.toString = function () {\\n        return  \\\"Your browser supports SVG.\\\\nYou are running Rapha\\\\xebl \\\" + this.version;\\n    };\\n    var $ = function (el, attr) {\\n            if (attr) {\\n                if (typeof el == \\\"string\\\") {\\n                    el = $(el);\\n                }\\n                for (var key in attr) if (attr[has](key)) {\\n                    if (key.substring(0, 6) == \\\"xlink:\\\") {\\n                        el.setAttributeNS(xlink, key.substring(6), Str(attr[key]));\\n                    } else {\\n                      try {\\n                        el.setAttribute(key, Str(attr[key]));\\n                      }\\n                      catch(e){\\n                        debugger\\n                      }\\n                    }\\n                }\\n            } else {\\n                el = R._g.doc.createElementNS(\\\"http://www.w3.org/2000/svg\\\", el);\\n                el.style && (el.style.webkitTapHighlightColor = \\\"rgba(0,0,0,0)\\\");\\n            }\\n            return el;\\n        },\\n        addGradientFill = function (element, gradient) {\\n            // even called if we reset the fill of an shape.\\n            if (gradient === null)\\n                return\\n\\n            var type = \\\"linear\\\",\\n                id = gradient.replace(/[\\\\(\\\\)\\\\s,\\\\xb0#]/g, \\\"_\\\"),\\n                fx = .5, fy = .5,\\n                o = element.node,\\n                SVG = element.paper,\\n                s = o.style,\\n                el = R._g.doc.getElementById(id);\\n            if (!el) {\\n                gradient = Str(gradient).replace(R._radial_gradient, function (all, _fx, _fy) {\\n                    type = \\\"radial\\\";\\n                    if (_fx && _fy) {\\n                        fx = toFloat(_fx);\\n                        fy = toFloat(_fy);\\n                        var dir = ((fy > .5) * 2 - 1);\\n                        pow(fx - .5, 2) + pow(fy - .5, 2) > .25 &&\\n                        (fy = math.sqrt(.25 - pow(fx - .5, 2)) * dir + .5) &&\\n                        fy != .5 &&\\n                        (fy = fy.toFixed(5) - 1e-5 * dir);\\n                    }\\n                    return E;\\n                });\\n                gradient = gradient.split(/\\\\s*\\\\-\\\\s*/);\\n                if (type == \\\"linear\\\") {\\n                    var angle = gradient.shift();\\n                    angle = -toFloat(angle);\\n                    if (isNaN(angle)) {\\n                        return null;\\n                    }\\n                    var vector = [0, 0, math.cos(R.rad(angle)), math.sin(R.rad(angle))],\\n                        max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);\\n                    vector[2] *= max;\\n                    vector[3] *= max;\\n                    if (vector[2] < 0) {\\n                        vector[0] = -vector[2];\\n                        vector[2] = 0;\\n                    }\\n                    if (vector[3] < 0) {\\n                        vector[1] = -vector[3];\\n                        vector[3] = 0;\\n                    }\\n                }\\n                var dots = R._parseDots(gradient);\\n                if (!dots) {\\n                    return null;\\n                }\\n                id = id.replace(/[\\\\(\\\\)\\\\s,\\\\xb0#]/g, \\\"_\\\");\\n\\n                if (element.gradient && id != element.gradient.id) {\\n                    SVG.defs.removeChild(element.gradient);\\n                    delete element.gradient;\\n                }\\n\\n                if (!element.gradient) {\\n                    el = $(type + \\\"Gradient\\\", {id: id});\\n                    element.gradient = el;\\n                    $(el, type == \\\"radial\\\" ? {\\n                        fx: fx,\\n                        fy: fy\\n                    } : {\\n                        x1: vector[0],\\n                        y1: vector[1],\\n                        x2: vector[2],\\n                        y2: vector[3],\\n                        gradientTransform: element.matrix.invert()\\n                    });\\n                    SVG.defs.appendChild(el);\\n                    for (var i = 0, ii = dots.length; i < ii; i++) {\\n                        el.appendChild($(\\\"stop\\\", {\\n                            offset: dots[i].offset ? dots[i].offset : i ? \\\"100%\\\" : \\\"0%\\\",\\n                            \\\"stop-color\\\": dots[i].color || \\\"#fff\\\",\\n                            \\\"stop-opacity\\\": isFinite(dots[i].opacity) ? dots[i].opacity : 1\\n                        }));\\n                    }\\n                }\\n            }\\n            /* FREEGROUP: don't push URL parameter into the drawing. This will break Apps with \\\"?\\\" in the URL\\n             * see: https://github.com/DmitryBaranovskiy/raphael/issues/693\\n             **/\\n            var url =\\\"\\\";//document.location.protocol + \\\"//\\\" + document.location.host  + document.location.pathname;\\n            $(o, {\\n                fill: \\\"url('\\\" + url + \\\"#\\\" + id + \\\"')\\\",\\n                opacity: 1,\\n                \\\"fill-opacity\\\": 1\\n            });\\n\\n            s.fill = E;\\n            s.opacity = 1;\\n            s.fillOpacity = 1;\\n            return 1;\\n        },\\n        updatePosition = function (o) {\\n            var bbox = o.getBBox(1);\\n            $(o.pattern, {patternTransform: o.matrix.invert() + \\\" translate(\\\" + bbox.x + \\\",\\\" + bbox.y + \\\")\\\"});\\n        },\\n        addArrow = function (o, value, isEnd) {\\n            if (o.type == \\\"path\\\") {\\n                var values = Str(value).toLowerCase().split(\\\"-\\\"),\\n                    p = o.paper,\\n                    se = isEnd ? \\\"end\\\" : \\\"start\\\",\\n                    node = o.node,\\n                    attrs = o.attrs,\\n                    stroke = attrs[\\\"stroke-width\\\"],\\n                    i = values.length,\\n                    type = \\\"classic\\\",\\n                    from,\\n                    to,\\n                    dx,\\n                    refX,\\n                    attr,\\n                    w = 3,\\n                    h = 3,\\n                    t = 5;\\n                while (i--) {\\n                    switch (values[i]) {\\n                        case \\\"block\\\":\\n                        case \\\"classic\\\":\\n                        case \\\"oval\\\":\\n                        case \\\"diamond\\\":\\n                        case \\\"open\\\":\\n                        case \\\"none\\\":\\n                            type = values[i];\\n                            break;\\n                        case \\\"wide\\\": h = 5; break;\\n                        case \\\"narrow\\\": h = 2; break;\\n                        case \\\"long\\\": w = 5; break;\\n                        case \\\"short\\\": w = 2; break;\\n                    }\\n                }\\n                if (type == \\\"open\\\") {\\n                    w += 2;\\n                    h += 2;\\n                    t += 2;\\n                    dx = 1;\\n                    refX = isEnd ? 4 : 1;\\n                    attr = {\\n                        fill: \\\"none\\\",\\n                        stroke: attrs.stroke\\n                    };\\n                } else {\\n                    refX = dx = w / 2;\\n                    attr = {\\n                        fill: attrs.stroke,\\n                        stroke: \\\"none\\\"\\n                    };\\n                }\\n                if (o._.arrows) {\\n                    if (isEnd) {\\n                        o._.arrows.endPath && markerCounter[o._.arrows.endPath]--;\\n                        o._.arrows.endMarker && markerCounter[o._.arrows.endMarker]--;\\n                    } else {\\n                        o._.arrows.startPath && markerCounter[o._.arrows.startPath]--;\\n                        o._.arrows.startMarker && markerCounter[o._.arrows.startMarker]--;\\n                    }\\n                } else {\\n                    o._.arrows = {};\\n                }\\n                if (type != \\\"none\\\") {\\n                    var pathId = \\\"raphael-marker-\\\" + type,\\n                        markerId = \\\"raphael-marker-\\\" + se + type + w + h + \\\"-obj\\\" + o.id;\\n                    if (!R._g.doc.getElementById(pathId)) {\\n                        p.defs.appendChild($($(\\\"path\\\"), {\\n                            \\\"stroke-linecap\\\": \\\"round\\\",\\n                            d: markers[type],\\n                            id: pathId\\n                        }));\\n                        markerCounter[pathId] = 1;\\n                    } else {\\n                        markerCounter[pathId]++;\\n                    }\\n                    var marker = R._g.doc.getElementById(markerId),\\n                        use;\\n                    if (!marker) {\\n                        marker = $($(\\\"marker\\\"), {\\n                            id: markerId,\\n                            markerHeight: h,\\n                            markerWidth: w,\\n                            orient: \\\"auto\\\",\\n                            refX: refX,\\n                            refY: h / 2\\n                        });\\n                        use = $($(\\\"use\\\"), {\\n                            \\\"xlink:href\\\": \\\"#\\\" + pathId,\\n                            transform: (isEnd ? \\\"rotate(180 \\\" + w / 2 + \\\" \\\" + h / 2 + \\\") \\\" : E) + \\\"scale(\\\" + w / t + \\\",\\\" + h / t + \\\")\\\",\\n                            \\\"stroke-width\\\": (1 / ((w / t + h / t) / 2)).toFixed(4)\\n                        });\\n                        marker.appendChild(use);\\n                        p.defs.appendChild(marker);\\n                        markerCounter[markerId] = 1;\\n                    } else {\\n                        markerCounter[markerId]++;\\n                        use = marker.getElementsByTagName(\\\"use\\\")[0];\\n                    }\\n                    $(use, attr);\\n                    var delta = dx * (type != \\\"diamond\\\" && type != \\\"oval\\\");\\n                    if (isEnd) {\\n                        from = o._.arrows.startdx * stroke || 0;\\n                        to = R.getTotalLength(attrs.path) - delta * stroke;\\n                    } else {\\n                        from = delta * stroke;\\n                        to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\\n                    }\\n                    attr = {};\\n                    attr[\\\"marker-\\\" + se] = \\\"url(#\\\" + markerId + \\\")\\\";\\n                    if (to || from) {\\n                        attr.d = R.getSubpath(attrs.path, from, to);\\n                    }\\n                    $(node, attr);\\n                    o._.arrows[se + \\\"Path\\\"] = pathId;\\n                    o._.arrows[se + \\\"Marker\\\"] = markerId;\\n                    o._.arrows[se + \\\"dx\\\"] = delta;\\n                    o._.arrows[se + \\\"Type\\\"] = type;\\n                    o._.arrows[se + \\\"String\\\"] = value;\\n                } else {\\n                    if (isEnd) {\\n                        from = o._.arrows.startdx * stroke || 0;\\n                        to = R.getTotalLength(attrs.path) - from;\\n                    } else {\\n                        from = 0;\\n                        to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\\n                    }\\n                    o._.arrows[se + \\\"Path\\\"] && $(node, {d: R.getSubpath(attrs.path, from, to)});\\n                    delete o._.arrows[se + \\\"Path\\\"];\\n                    delete o._.arrows[se + \\\"Marker\\\"];\\n                    delete o._.arrows[se + \\\"dx\\\"];\\n                    delete o._.arrows[se + \\\"Type\\\"];\\n                    delete o._.arrows[se + \\\"String\\\"];\\n                }\\n                for (attr in markerCounter) if (markerCounter[has](attr) && !markerCounter[attr]) {\\n                    var item = R._g.doc.getElementById(attr);\\n                    item && item.parentNode.removeChild(item);\\n                }\\n            }\\n        },\\n        dasharray = {\\n            \\\"-\\\": [3, 1],\\n            \\\".\\\": [1, 1],\\n            \\\"-.\\\": [3, 1, 1, 1],\\n            \\\"-..\\\": [3, 1, 1, 1, 1, 1],\\n            \\\". \\\": [1, 3],\\n            \\\"- \\\": [4, 3],\\n            \\\"--\\\": [8, 3],\\n            \\\"- .\\\": [4, 3, 1, 3],\\n            \\\"--.\\\": [8, 3, 1, 3],\\n            \\\"--..\\\": [8, 3, 1, 3, 1, 3]\\n        },\\n        addDashes = function (o, value, params) {\\n            value = dasharray[Str(value).toLowerCase()];\\n            if (value) {\\n                var width = o.attrs[\\\"stroke-width\\\"] || \\\"1\\\",\\n                    butt = {round: width, square: width, butt: 0}[o.attrs[\\\"stroke-linecap\\\"] || params[\\\"stroke-linecap\\\"]] || 0,\\n                    dashes = [],\\n                    i = value.length;\\n                while (i--) {\\n                    dashes[i] = value[i] * width + ((i % 2) ? 1 : -1) * butt;\\n                }\\n                $(o.node, {\\\"stroke-dasharray\\\": dashes.join(\\\",\\\")});\\n            }\\n            else {\\n                $(o.node, {\\\"stroke-dasharray\\\": \\\"none\\\"});\\n            }\\n        },\\n        setFillAndStroke = function (o, params) {\\n            var node = o.node,\\n                attrs = o.attrs,\\n                vis = node.style.visibility;\\n            node.style.visibility = \\\"hidden\\\";\\n            for (var att in params) {\\n                if (params[has](att)) {\\n                    if (!R._availableAttrs[has](att)) {\\n                        continue;\\n                    }\\n                    var value = params[att];\\n                    attrs[att] = value;\\n                    switch (att) {\\n                        case \\\"blur\\\":\\n                            o.blur(value);\\n                            break;\\n                        case \\\"title\\\":\\n                            var title = node.getElementsByTagName(\\\"title\\\");\\n\\n                            // Use the existing <title>.\\n                            if (title.length && (title = title[0])) {\\n                                title.firstChild.nodeValue = value;\\n                            } else {\\n                                title = $(\\\"title\\\");\\n                                var val = R._g.doc.createTextNode(value);\\n                                title.appendChild(val);\\n                                node.appendChild(title);\\n                            }\\n                            break;\\n                        case \\\"href\\\":\\n                        case \\\"target\\\":\\n                            var pn = node.parentNode;\\n                            if (pn.tagName.toLowerCase() != \\\"a\\\") {\\n                                var hl = $(\\\"a\\\");\\n                                pn.insertBefore(hl, node);\\n                                hl.appendChild(node);\\n                                pn = hl;\\n                            }\\n                            if (att == \\\"target\\\") {\\n                                pn.setAttributeNS(xlink, \\\"show\\\", value == \\\"blank\\\" ? \\\"new\\\" : value);\\n                            } else {\\n                                pn.setAttributeNS(xlink, att, value);\\n                            }\\n                            break;\\n                        case \\\"cursor\\\":\\n                            node.style.cursor = value;\\n                            break;\\n                        case \\\"transform\\\":\\n                            o.transform(value);\\n                            break;\\n                        case \\\"arrow-start\\\":\\n                            addArrow(o, value);\\n                            break;\\n                        case \\\"arrow-end\\\":\\n                            addArrow(o, value, 1);\\n                            break;\\n                        case \\\"clip-rect\\\":\\n                            var rect = Str(value).split(separator);\\n                            if (rect.length == 4) {\\n                                o.clip && o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);\\n                                var el = $(\\\"clipPath\\\"),\\n                                    rc = $(\\\"rect\\\");\\n                                el.id = R.createUUID();\\n                                $(rc, {\\n                                    x: rect[0],\\n                                    y: rect[1],\\n                                    width: rect[2],\\n                                    height: rect[3]\\n                                });\\n                                el.appendChild(rc);\\n                                o.paper.defs.appendChild(el);\\n                                $(node, {\\\"clip-path\\\": \\\"url(#\\\" + el.id + \\\")\\\"});\\n                                o.clip = rc;\\n                            }\\n                            if (!value) {\\n                                var path = node.getAttribute(\\\"clip-path\\\");\\n                                if (path) {\\n                                    var clip = R._g.doc.getElementById(path.replace(/(^url\\\\(#|\\\\)$)/g, E));\\n                                    clip && clip.parentNode.removeChild(clip);\\n                                    $(node, {\\\"clip-path\\\": E});\\n                                    delete o.clip;\\n                                }\\n                            }\\n                            break;\\n                        case \\\"path\\\":\\n                            if (o.type == \\\"path\\\") {\\n                                $(node, {d: value ? attrs.path = R._pathToAbsolute(value) : \\\"M0,0\\\"});\\n                                o._.dirty = 1;\\n                                if (o._.arrows) {\\n                                    \\\"startString\\\" in o._.arrows && addArrow(o, o._.arrows.startString);\\n                                    \\\"endString\\\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\\n                                }\\n                            }\\n                            break;\\n                        case \\\"width\\\":\\n                            node.setAttribute(att, value);\\n                            o._.dirty = 1;\\n                            if (attrs.fx) {\\n                                att = \\\"x\\\";\\n                                value = attrs.x;\\n                            } else {\\n                                break;\\n                            }\\n                        case \\\"x\\\":\\n                            if (attrs.fx) {\\n                                value = -attrs.x - (attrs.width || 0);\\n                            }\\n                        case \\\"rx\\\":\\n                            if (att == \\\"rx\\\" && o.type == \\\"rect\\\") {\\n                                break;\\n                            }\\n                        case \\\"cx\\\":\\n                            node.setAttribute(att, value);\\n                            o.pattern && updatePosition(o);\\n                            o._.dirty = 1;\\n                            break;\\n                        case \\\"height\\\":\\n                            node.setAttribute(att, value);\\n                            o._.dirty = 1;\\n                            if (attrs.fy) {\\n                                att = \\\"y\\\";\\n                                value = attrs.y;\\n                            } else {\\n                                break;\\n                            }\\n                        case \\\"y\\\":\\n                            if (attrs.fy) {\\n                                value = -attrs.y - (attrs.height || 0);\\n                            }\\n                        case \\\"ry\\\":\\n                            if (att == \\\"ry\\\" && o.type == \\\"rect\\\") {\\n                                break;\\n                            }\\n                        case \\\"cy\\\":\\n                            node.setAttribute(att, value);\\n                            o.pattern && updatePosition(o);\\n                            o._.dirty = 1;\\n                            break;\\n                        case \\\"r\\\":\\n                            if (o.type == \\\"rect\\\") {\\n                                $(node, {rx: value, ry: value});\\n                            } else {\\n                                node.setAttribute(att, value);\\n                            }\\n                            o._.dirty = 1;\\n                            break;\\n                        case \\\"src\\\":\\n                            if (o.type == \\\"image\\\") {\\n                                node.setAttributeNS(xlink, \\\"href\\\", value);\\n                            }\\n                            break;\\n                        case \\\"stroke-width\\\":\\n                            /* FREEGROUP fix\\n                             * draw2d version 3.0.3\\n                             *\\n                             * don't scale the line width if the user resize an shape/element.\\n                             * Obscure stroke-width in case of \\\"Draw2D touch\\\" usage\\n                             */\\n                            if(!attrs[\\\"stroke-scale\\\"]){\\n                                if (o._.sx != 1 || o._.sy != 1) {\\n                                    value /= mmax(abs(o._.sx), abs(o._.sy)) || 1;\\n                                }\\n                                if (o.paper._vbSize) {\\n                                //    value *= o.paper._vbSize;\\n                                }\\n                            }\\n\\n\\n                            node.setAttribute(att, value);\\n                            if (attrs[\\\"stroke-dasharray\\\"]) {\\n                                addDashes(o, attrs[\\\"stroke-dasharray\\\"], params);\\n                            }\\n                            if (o._.arrows) {\\n                                \\\"startString\\\" in o._.arrows && addArrow(o, o._.arrows.startString);\\n                                \\\"endString\\\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\\n                            }\\n                            break;\\n                        case \\\"stroke-dasharray\\\":\\n                            addDashes(o, value, params);\\n                            break;\\n                        case \\\"fill\\\":\\n                            var isURL = Str(value).match(R._ISURL);\\n                            if (isURL) {\\n                                el = $(\\\"pattern\\\");\\n                                var ig = $(\\\"image\\\");\\n                                el.id = R.createUUID();\\n                                $(el, {x: 0, y: 0, patternUnits: \\\"userSpaceOnUse\\\", height: 1, width: 1});\\n                                $(ig, {x: 0, y: 0, \\\"xlink:href\\\": isURL[1]});\\n                                el.appendChild(ig);\\n\\n                                (function (el) {\\n                                    R._preload(isURL[1], function () {\\n                                        var w = this.offsetWidth,\\n                                            h = this.offsetHeight;\\n                                        $(el, {width: w, height: h});\\n                                        $(ig, {width: w, height: h});\\n                                    });\\n                                })(el);\\n                                o.paper.defs.appendChild(el);\\n                                $(node, {fill: \\\"url(#\\\" + el.id + \\\")\\\"});\\n                                o.pattern = el;\\n                                o.pattern && updatePosition(o);\\n                                break;\\n                            }\\n                            var clr = R.getRGB(value);\\n                            if (!clr.error) {\\n                                delete params.gradient;\\n                                delete attrs.gradient;\\n                                !R.is(attrs.opacity, \\\"undefined\\\") &&\\n                                R.is(params.opacity, \\\"undefined\\\") &&\\n                                $(node, {opacity: attrs.opacity});\\n                                !R.is(attrs[\\\"fill-opacity\\\"], \\\"undefined\\\") &&\\n                                R.is(params[\\\"fill-opacity\\\"], \\\"undefined\\\") &&\\n                                $(node, {\\\"fill-opacity\\\": attrs[\\\"fill-opacity\\\"]});\\n                            } else if ((o.type == \\\"circle\\\" || o.type == \\\"ellipse\\\" || Str(value).charAt() != \\\"r\\\") && addGradientFill(o, value)) {\\n                                if (\\\"opacity\\\" in attrs || \\\"fill-opacity\\\" in attrs) {\\n                                    var gradient = R._g.doc.getElementById(node.getAttribute(\\\"fill\\\").replace(/^url\\\\(#|\\\\)$/g, E));\\n                                    if (gradient) {\\n                                        var stops = gradient.getElementsByTagName(\\\"stop\\\");\\n                                        $(stops[stops.length - 1], {\\\"stop-opacity\\\": (\\\"opacity\\\" in attrs ? attrs.opacity : 1) * (\\\"fill-opacity\\\" in attrs ? attrs[\\\"fill-opacity\\\"] : 1)});\\n                                    }\\n                                }\\n                                attrs.gradient = value;\\n                                attrs.fill = \\\"none\\\";\\n                                break;\\n                            }\\n                            clr[has](\\\"opacity\\\") && $(node, {\\\"fill-opacity\\\": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\\n                        case \\\"stroke\\\":\\n                            clr = R.getRGB(value);\\n                            node.setAttribute(att, clr.hex);\\n                            att == \\\"stroke\\\" && clr[has](\\\"opacity\\\") && $(node, {\\\"stroke-opacity\\\": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\\n                            if (att == \\\"stroke\\\" && o._.arrows) {\\n                                \\\"startString\\\" in o._.arrows && addArrow(o, o._.arrows.startString);\\n                                \\\"endString\\\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\\n                            }\\n                            break;\\n                        case \\\"gradient\\\":\\n                            (o.type == \\\"circle\\\" || o.type == \\\"ellipse\\\" || Str(value).charAt() != \\\"r\\\") && addGradientFill(o, value);\\n                            break;\\n                        case \\\"opacity\\\":\\n                            if (attrs.gradient && !attrs[has](\\\"stroke-opacity\\\")) {\\n                                $(node, {\\\"stroke-opacity\\\": value > 1 ? value / 100 : value});\\n                            }\\n                        // fall\\n                        case \\\"fill-opacity\\\":\\n\\n                            if (attrs.gradient) {\\n                                gradient = R._g.doc.getElementById(node.getAttribute(\\\"fill\\\").replace(/^url\\\\(#|\\\\)$/g, E));\\n                                if (gradient) {\\n                                    stops = gradient.getElementsByTagName(\\\"stop\\\");\\n                                    // FREEGROUP FIX\\n                                    for (gri = 0, grii = stops.length; gri < grii; gri++) {\\n                                        $(stops[gri], {\\\"stop-opacity\\\": value});\\n                                    }\\n                                    // END FIX\\n                                }\\n                                break;\\n                            }\\n                        default:\\n                            att == \\\"font-size\\\" && (value = toInt(value, 10) + \\\"px\\\");\\n                            var cssrule = att.replace(/(\\\\-.)/g, function (w) {\\n                                return w.substring(1).toUpperCase();\\n                            });\\n                            node.style[cssrule] = value;\\n                            o._.dirty = 1;\\n                            node.setAttribute(att, value);\\n                            break;\\n                    }\\n                }\\n            }\\n\\n            tuneText(o, params);\\n            node.style.visibility = vis;\\n        },\\n        leading = 1.2,\\n        tuneText = function (el, params) {\\n            if (el.type != \\\"text\\\" || !(params[has](\\\"text\\\") || params[has](\\\"font\\\") || params[has](\\\"font-size\\\") || params[has](\\\"x\\\") || params[has](\\\"y\\\"))) {\\n                return;\\n            }\\n            var a = el.attrs,\\n                node = el.node,\\n                fontSize = node.firstChild ? toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild, E).getPropertyValue(\\\"font-size\\\"), 10) : 10;\\n\\n            if (params[has](\\\"text\\\")) {\\n                a.text = params.text;\\n                while (node.firstChild) {\\n                    node.removeChild(node.firstChild);\\n                }\\n                var texts = Str(params.text).split(\\\"\\\\n\\\"),\\n                    tspans = [],\\n                    tspan;\\n                for (var i = 0, ii = texts.length; i < ii; i++) {\\n                    tspan = $(\\\"tspan\\\");\\n                    i && $(tspan, {dy: fontSize * leading, x: a.x});\\n                    tspan.appendChild(R._g.doc.createTextNode(texts[i]));\\n                    node.appendChild(tspan);\\n                    tspans[i] = tspan;\\n                }\\n            } else {\\n                tspans = node.getElementsByTagName(\\\"tspan\\\");\\n                for (i = 0, ii = tspans.length; i < ii; i++) if (i) {\\n                    $(tspans[i], {dy: fontSize * leading, x: a.x});\\n                } else {\\n                    $(tspans[0], {dy: 0});\\n                }\\n            }\\n            $(node, {x: a.x, y: a.y});\\n            el._.dirty = 1;\\n            var bb = el._getBBox(),\\n                dif = a.y - (bb.y + bb.height / 2);\\n            dif && R.is(dif, \\\"finite\\\") && $(tspans[0], {dy: dif});\\n        },\\n        getRealNode = function (node) {\\n            if (node.parentNode && node.parentNode.tagName.toLowerCase() === \\\"a\\\") {\\n                return node.parentNode;\\n            } else {\\n                return node;\\n            }\\n        },\\n        Element = function (node, svg) {\\n            var X = 0,\\n                Y = 0;\\n            /*\\\\\\n             * Element.node\\n             [ property (object) ]\\n             **\\n             * Gives you a reference to the DOM object, so you can assign event handlers or just mess around.\\n             **\\n             * Note: Don’t mess with it.\\n             > Usage\\n             | // draw a circle at coordinate 10,10 with radius of 10\\n             | var c = paper.circle(10, 10, 10);\\n             | c.node.onclick = function () {\\n             |     c.attr(\\\"fill\\\", \\\"red\\\");\\n             | };\\n             \\\\*/\\n            this[0] = this.node = node;\\n            /*\\\\\\n             * Element.raphael\\n             [ property (object) ]\\n             **\\n             * Internal reference to @Raphael object. In case it is not available.\\n             > Usage\\n             | Raphael.el.red = function () {\\n             |     var hsb = this.paper.raphael.rgb2hsb(this.attr(\\\"fill\\\"));\\n             |     hsb.h = 1;\\n             |     this.attr({fill: this.paper.raphael.hsb2rgb(hsb).hex});\\n             | }\\n             \\\\*/\\n            node.raphael = true;\\n            /*\\\\\\n             * Element.id\\n             [ property (number) ]\\n             **\\n             * Unique id of the element. Especially useful when you want to listen to events of the element,\\n             * because all events are fired in format `<module>.<action>.<id>`. Also useful for @Paper.getById method.\\n             \\\\*/\\n            this.id = R._oid++;\\n            node.raphaelid = this.id;\\n            this.matrix = R.matrix();\\n            this.realPath = null;\\n            /*\\\\\\n             * Element.paper\\n             [ property (object) ]\\n             **\\n             * Internal reference to “paper” where object drawn. Mainly for use in plugins and element extensions.\\n             > Usage\\n             | Raphael.el.cross = function () {\\n             |     this.attr({fill: \\\"red\\\"});\\n             |     this.paper.path(\\\"M10,10L50,50M50,10L10,50\\\")\\n             |         .attr({stroke: \\\"red\\\"});\\n             | }\\n             \\\\*/\\n            this.paper = svg;\\n            this.attrs = this.attrs || {};\\n            this._ = {\\n                transform: [],\\n                sx: 1,\\n                sy: 1,\\n                deg: 0,\\n                dx: 0,\\n                dy: 0,\\n                dirty: 1\\n            };\\n            !svg.bottom && (svg.bottom = this);\\n            /*\\\\\\n             * Element.prev\\n             [ property (object) ]\\n             **\\n             * Reference to the previous element in the hierarchy.\\n             \\\\*/\\n            this.prev = svg.top;\\n            svg.top && (svg.top.next = this);\\n            svg.top = this;\\n            /*\\\\\\n             * Element.next\\n             [ property (object) ]\\n             **\\n             * Reference to the next element in the hierarchy.\\n             \\\\*/\\n            this.next = null;\\n        },\\n        elproto = R.el;\\n\\n    Element.prototype = elproto;\\n    elproto.constructor = Element;\\n\\n    R._engine.path = function (pathString, SVG) {\\n        var el = $(\\\"path\\\");\\n        SVG.canvas && SVG.canvas.appendChild(el);\\n        var p = new Element(el, SVG);\\n        p.type = \\\"path\\\";\\n        setFillAndStroke(p, {\\n            fill: \\\"none\\\",\\n            stroke: \\\"#000\\\",\\n            path: pathString\\n        });\\n        return p;\\n    };\\n    /*\\\\\\n     * Element.rotate\\n     [ method ]\\n     **\\n     * Deprecated! Use @Element.transform instead.\\n     * Adds rotation by given angle around given point to the list of\\n     * transformations of the element.\\n     > Parameters\\n     - deg (number) angle in degrees\\n     - cx (number) #optional x coordinate of the centre of rotation\\n     - cy (number) #optional y coordinate of the centre of rotation\\n     * If cx & cy aren’t specified centre of the shape is used as a point of rotation.\\n     = (object) @Element\\n     \\\\*/\\n    elproto.rotate = function (deg, cx, cy) {\\n        if (this.removed) {\\n            return this;\\n        }\\n        deg = Str(deg).split(separator);\\n        if (deg.length - 1) {\\n            cx = toFloat(deg[1]);\\n            cy = toFloat(deg[2]);\\n        }\\n        deg = toFloat(deg[0]);\\n        (cy == null) && (cx = cy);\\n        if (cx == null || cy == null) {\\n            var bbox = this.getBBox(1);\\n            cx = bbox.x + bbox.width / 2;\\n            cy = bbox.y + bbox.height / 2;\\n        }\\n        this.transform(this._.transform.concat([[\\\"r\\\", deg, cx, cy]]));\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.scale\\n     [ method ]\\n     **\\n     * Deprecated! Use @Element.transform instead.\\n     * Adds scale by given amount relative to given point to the list of\\n     * transformations of the element.\\n     > Parameters\\n     - sx (number) horisontal scale amount\\n     - sy (number) vertical scale amount\\n     - cx (number) #optional x coordinate of the centre of scale\\n     - cy (number) #optional y coordinate of the centre of scale\\n     * If cx & cy aren’t specified centre of the shape is used instead.\\n     = (object) @Element\\n     \\\\*/\\n    elproto.scale = function (sx, sy, cx, cy) {\\n        if (this.removed) {\\n            return this;\\n        }\\n        sx = Str(sx).split(separator);\\n        if (sx.length - 1) {\\n            sy = toFloat(sx[1]);\\n            cx = toFloat(sx[2]);\\n            cy = toFloat(sx[3]);\\n        }\\n        sx = toFloat(sx[0]);\\n        (sy == null) && (sy = sx);\\n        (cy == null) && (cx = cy);\\n        if (cx == null || cy == null) {\\n            var bbox = this.getBBox(1);\\n        }\\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\\n        this.transform(this._.transform.concat([[\\\"s\\\", sx, sy, cx, cy]]));\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.translate\\n     [ method ]\\n     **\\n     * Deprecated! Use @Element.transform instead.\\n     * Adds translation by given amount to the list of transformations of the element.\\n     > Parameters\\n     - dx (number) horisontal shift\\n     - dy (number) vertical shift\\n     = (object) @Element\\n     \\\\*/\\n    elproto.translate = function (dx, dy) {\\n        if (this.removed) {\\n            return this;\\n        }\\n        dx = Str(dx).split(separator);\\n        if (dx.length - 1) {\\n            dy = toFloat(dx[1]);\\n        }\\n        dx = toFloat(dx[0]) || 0;\\n        dy = +dy || 0;\\n        this.transform(this._.transform.concat([[\\\"t\\\", dx, dy]]));\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.transform\\n     [ method ]\\n     **\\n     * Adds transformation to the element which is separate to other attributes,\\n     * i.e. translation doesn’t change `x` or `y` of the rectange. The format\\n     * of transformation string is similar to the path string syntax:\\n     | \\\"t100,100r30,100,100s2,2,100,100r45s1.5\\\"\\n     * Each letter is a command. There are four commands: `t` is for translate, `r` is for rotate, `s` is for\\n     * scale and `m` is for matrix.\\n     *\\n     * There are also alternative “absolute” translation, rotation and scale: `T`, `R` and `S`. They will not take previous transformation into account. For example, `...T100,0` will always move element 100 px horisontally, while `...t100,0` could move it vertically if there is `r90` before. Just compare results of `r90t100,0` and `r90T100,0`.\\n     *\\n     * So, the example line above could be read like “translate by 100, 100; rotate 30° around 100, 100; scale twice around 100, 100;\\n     * rotate 45° around centre; scale 1.5 times relative to centre”. As you can see rotate and scale commands have origin\\n     * coordinates as optional parameters, the default is the centre point of the element.\\n     * Matrix accepts six parameters.\\n     > Usage\\n     | var el = paper.rect(10, 20, 300, 200);\\n     | // translate 100, 100, rotate 45°, translate -100, 0\\n     | el.transform(\\\"t100,100r45t-100,0\\\");\\n     | // if you want you can append or prepend transformations\\n     | el.transform(\\\"...t50,50\\\");\\n     | el.transform(\\\"s2...\\\");\\n     | // or even wrap\\n     | el.transform(\\\"t50,50...t-50-50\\\");\\n     | // to reset transformation call method with empty string\\n     | el.transform(\\\"\\\");\\n     | // to get current value call it without parameters\\n     | console.log(el.transform());\\n     > Parameters\\n     - tstr (string) #optional transformation string\\n     * If tstr isn’t specified\\n     = (string) current transformation string\\n     * else\\n     = (object) @Element\\n     \\\\*/\\n    elproto.transform = function (tstr) {\\n        var _ = this._;\\n        if (tstr == null) {\\n            return _.transform;\\n        }\\n        R._extractTransform(this, tstr);\\n\\n        this.clip && $(this.clip, {transform: this.matrix.invert()});\\n        this.pattern && updatePosition(this);\\n        this.node && $(this.node, {transform: this.matrix});\\n\\n        if (_.sx != 1 || _.sy != 1) {\\n            var sw = this.attrs[has](\\\"stroke-width\\\") ? this.attrs[\\\"stroke-width\\\"] : 1;\\n            this.attr({\\\"stroke-width\\\": sw});\\n        }\\n\\n        //Reduce transform string\\n        _.transform = this.matrix.toTransformString();\\n\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.hide\\n     [ method ]\\n     **\\n     * Makes element invisible. See @Element.show.\\n     = (object) @Element\\n     \\\\*/\\n    elproto.hide = function () {\\n        if(!this.removed) this.node.style.display = \\\"none\\\";\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.show\\n     [ method ]\\n     **\\n     * Makes element visible. See @Element.hide.\\n     = (object) @Element\\n     \\\\*/\\n    elproto.show = function () {\\n        if(!this.removed) this.node.style.display = \\\"\\\";\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.remove\\n     [ method ]\\n     **\\n     * Removes element from the paper.\\n     \\\\*/\\n    elproto.remove = function () {\\n        var node = getRealNode(this.node);\\n        if (this.removed || !node.parentNode) {\\n            return;\\n        }\\n        var paper = this.paper;\\n        paper.__set__ && paper.__set__.exclude(this);\\n        eve.unbind(\\\"raphael.*.*.\\\" + this.id);\\n        if (this.gradient) {\\n            paper.defs.removeChild(this.gradient);\\n        }\\n        R._tear(this, paper);\\n\\n        node.parentNode.removeChild(node);\\n\\n        // Remove custom data for element\\n        this.removeData();\\n\\n        for (var i in this) {\\n            this[i] = typeof this[i] == \\\"function\\\" ? R._removedFactory(i) : null;\\n        }\\n        this.removed = true;\\n    };\\n    elproto._getBBox = function () {\\n        if (this.node.style.display == \\\"none\\\") {\\n            this.show();\\n            var hide = true;\\n        }\\n        var canvasHidden = false,\\n            containerStyle;\\n        if (this.paper.canvas.parentElement) {\\n            containerStyle = this.paper.canvas.parentElement.style;\\n        } //IE10+ can't find parentElement\\n        else if (this.paper.canvas.parentNode) {\\n            containerStyle = this.paper.canvas.parentNode.style;\\n        }\\n\\n        if(containerStyle && containerStyle.display == \\\"none\\\") {\\n            canvasHidden = true;\\n            containerStyle.display = \\\"\\\";\\n        }\\n        var bbox = {};\\n        try {\\n            bbox = this.node.getBBox();\\n        } catch(e) {\\n            // Firefox 3.0.x, 25.0.1 (probably more versions affected) play badly here - possible fix\\n            bbox = {\\n                x: this.node.clientLeft,\\n                y: this.node.clientTop,\\n                width: this.node.clientWidth,\\n                height: this.node.clientHeight\\n            }\\n        } finally {\\n            bbox = bbox || {};\\n            if(canvasHidden){\\n                containerStyle.display = \\\"none\\\";\\n            }\\n        }\\n        hide && this.hide();\\n        return bbox;\\n    };\\n    /*\\\\\\n     * Element.attr\\n     [ method ]\\n     **\\n     * Sets the attributes of the element.\\n     > Parameters\\n     - attrName (string) attribute’s name\\n     - value (string) value\\n     * or\\n     - params (object) object of name/value pairs\\n     * or\\n     - attrName (string) attribute’s name\\n     * or\\n     - attrNames (array) in this case method returns array of current values for given attribute names\\n     = (object) @Element if attrsName & value or params are passed in.\\n     = (...) value of the attribute if only attrsName is passed in.\\n     = (array) array of values of the attribute if attrsNames is passed in.\\n     = (object) object of attributes if nothing is passed in.\\n     > Possible parameters\\n     # <p>Please refer to the <a href=\\\"http://www.w3.org/TR/SVG/\\\" title=\\\"The W3C Recommendation for the SVG language describes these properties in detail.\\\">SVG specification</a> for an explanation of these parameters.</p>\\n     o arrow-end (string) arrowhead on the end of the path. The format for string is `<type>[-<width>[-<length>]]`. Possible types: `classic`, `block`, `open`, `oval`, `diamond`, `none`, width: `wide`, `narrow`, `medium`, length: `long`, `short`, `midium`.\\n     o clip-rect (string) comma or space separated values: x, y, width and height\\n     o cursor (string) CSS type of the cursor\\n     o cx (number) the x-axis coordinate of the center of the circle, or ellipse\\n     o cy (number) the y-axis coordinate of the center of the circle, or ellipse\\n     o fill (string) colour, gradient or image\\n     o fill-opacity (number)\\n     o font (string)\\n     o font-family (string)\\n     o font-size (number) font size in pixels\\n     o font-weight (string)\\n     o height (number)\\n     o href (string) URL, if specified element behaves as hyperlink\\n     o opacity (number)\\n     o path (string) SVG path string format\\n     o r (number) radius of the circle, ellipse or rounded corner on the rect\\n     o rx (number) horisontal radius of the ellipse\\n     o ry (number) vertical radius of the ellipse\\n     o src (string) image URL, only works for @Element.image element\\n     o stroke (string) stroke colour\\n     o stroke-dasharray (string) [“”, “none”, “`-`”, “`.`”, “`-.`”, “`-..`”, “`. `”, “`- `”, “`--`”, “`- .`”, “`--.`”, “`--..`”]\\n     o stroke-linecap (string) [“`butt`”, “`square`”, “`round`”]\\n     o stroke-linejoin (string) [“`bevel`”, “`round`”, “`miter`”]\\n     o stroke-miterlimit (number)\\n     o stroke-opacity (number)\\n     o stroke-width (number) stroke width in pixels, default is '1'\\n     o target (string) used with href\\n     o text (string) contents of the text element. Use `\\\\n` for multiline text\\n     o text-anchor (string) [“`start`”, “`middle`”, “`end`”], default is “`middle`”\\n     o title (string) will create tooltip with a given text\\n     o transform (string) see @Element.transform\\n     o width (number)\\n     o x (number)\\n     o y (number)\\n     > Gradients\\n     * Linear gradient format: “`‹angle›-‹colour›[-‹colour›[:‹offset›]]*-‹colour›`”, example: “`90-#fff-#000`” – 90°\\n     * gradient from white to black or “`0-#fff-#f00:20-#000`” – 0° gradient from white via red (at 20%) to black.\\n     *\\n     * radial gradient: “`r[(‹fx›, ‹fy›)]‹colour›[-‹colour›[:‹offset›]]*-‹colour›`”, example: “`r#fff-#000`” –\\n     * gradient from white to black or “`r(0.25, 0.75)#fff-#000`” – gradient from white to black with focus point\\n     * at 0.25, 0.75. Focus point coordinates are in 0..1 range. Radial gradients can only be applied to circles and ellipses.\\n     > Path String\\n     # <p>Please refer to <a href=\\\"http://www.w3.org/TR/SVG/paths.html#PathData\\\" title=\\\"Details of a path’s data attribute’s format are described in the SVG specification.\\\">SVG documentation regarding path string</a>. Raphaël fully supports it.</p>\\n     > Colour Parsing\\n     # <ul>\\n     #     <li>Colour name (“<code>red</code>”, “<code>green</code>”, “<code>cornflowerblue</code>”, etc)</li>\\n     #     <li>#••• — shortened HTML colour: (“<code>#000</code>”, “<code>#fc0</code>”, etc)</li>\\n     #     <li>#•••••• — full length HTML colour: (“<code>#000000</code>”, “<code>#bd2300</code>”)</li>\\n     #     <li>rgb(•••, •••, •••) — red, green and blue channels’ values: (“<code>rgb(200,&nbsp;100,&nbsp;0)</code>”)</li>\\n     #     <li>rgb(•••%, •••%, •••%) — same as above, but in %: (“<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>”)</li>\\n     #     <li>rgba(•••, •••, •••, •••) — red, green and blue channels’ values: (“<code>rgba(200,&nbsp;100,&nbsp;0, .5)</code>”)</li>\\n     #     <li>rgba(•••%, •••%, •••%, •••%) — same as above, but in %: (“<code>rgba(100%,&nbsp;175%,&nbsp;0%, 50%)</code>”)</li>\\n     #     <li>hsb(•••, •••, •••) — hue, saturation and brightness values: (“<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>”)</li>\\n     #     <li>hsb(•••%, •••%, •••%) — same as above, but in %</li>\\n     #     <li>hsba(•••, •••, •••, •••) — same as above, but with opacity</li>\\n     #     <li>hsl(•••, •••, •••) — almost the same as hsb, see <a href=\\\"http://en.wikipedia.org/wiki/HSL_and_HSV\\\" title=\\\"HSL and HSV - Wikipedia, the free encyclopedia\\\">Wikipedia page</a></li>\\n     #     <li>hsl(•••%, •••%, •••%) — same as above, but in %</li>\\n     #     <li>hsla(•••, •••, •••, •••) — same as above, but with opacity</li>\\n     #     <li>Optionally for hsb and hsl you could specify hue as a degree: “<code>hsl(240deg,&nbsp;1,&nbsp;.5)</code>” or, if you want to go fancy, “<code>hsl(240°,&nbsp;1,&nbsp;.5)</code>”</li>\\n     # </ul>\\n     \\\\*/\\n    elproto.attr = function (name, value) {\\n        if (this.removed) {\\n            return this;\\n        }\\n        if (name == null) {\\n            var res = {};\\n            for (var a in this.attrs) if (this.attrs[has](a)) {\\n                res[a] = this.attrs[a];\\n            }\\n            res.gradient && res.fill == \\\"none\\\" && (res.fill = res.gradient) && delete res.gradient;\\n            res.transform = this._.transform;\\n            return res;\\n        }\\n        if (value == null && R.is(name, \\\"string\\\")) {\\n            if (name == \\\"fill\\\" && this.attrs.fill == \\\"none\\\" && this.attrs.gradient) {\\n                return this.attrs.gradient;\\n            }\\n            if (name == \\\"transform\\\") {\\n                return this._.transform;\\n            }\\n            var names = name.split(separator),\\n                out = {};\\n            for (var i = 0, ii = names.length; i < ii; i++) {\\n                name = names[i];\\n                if (name in this.attrs) {\\n                    out[name] = this.attrs[name];\\n                } else if (R.is(this.paper.customAttributes[name], \\\"function\\\")) {\\n                    out[name] = this.paper.customAttributes[name].def;\\n                } else {\\n                    out[name] = R._availableAttrs[name];\\n                }\\n            }\\n            return ii - 1 ? out : out[names[0]];\\n        }\\n        if (value == null && R.is(name, \\\"array\\\")) {\\n            out = {};\\n            for (i = 0, ii = name.length; i < ii; i++) {\\n                out[name[i]] = this.attr(name[i]);\\n            }\\n            return out;\\n        }\\n        if (value != null) {\\n            var params = {};\\n            params[name] = value;\\n        } else if (name != null && R.is(name, \\\"object\\\")) {\\n            params = name;\\n        }\\n        for (var key in params) {\\n            eve(\\\"raphael.attr.\\\" + key + \\\".\\\" + this.id, this, params[key]);\\n        }\\n        for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], \\\"function\\\")) {\\n            var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));\\n            this.attrs[key] = params[key];\\n            for (var subkey in par) if (par[has](subkey)) {\\n                params[subkey] = par[subkey];\\n            }\\n        }\\n        setFillAndStroke(this, params);\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.toFront\\n     [ method ]\\n     **\\n     * Moves the element so it is the closest to the viewer’s eyes, on top of other elements.\\n     = (object) @Element\\n     \\\\*/\\n    elproto.toFront = function () {\\n        if (this.removed) {\\n            return this;\\n        }\\n        var node = getRealNode(this.node);\\n        node.parentNode.appendChild(node);\\n        var svg = this.paper;\\n        svg.top != this && R._tofront(this, svg);\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.toBack\\n     [ method ]\\n     **\\n     * Moves the element so it is the furthest from the viewer’s eyes, behind other elements.\\n     = (object) @Element\\n     \\\\*/\\n    elproto.toBack = function () {\\n        if (this.removed) {\\n            return this;\\n        }\\n        var node = getRealNode(this.node);\\n        var parentNode = node.parentNode;\\n        parentNode.insertBefore(node, parentNode.firstChild);\\n        R._toback(this, this.paper);\\n        var svg = this.paper;\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.insertAfter\\n     [ method ]\\n     **\\n     * Inserts current object after the given one.\\n     = (object) @Element\\n     \\\\*/\\n    elproto.insertAfter = function (element) {\\n        if (this.removed || !element) {\\n            return this;\\n        }\\n\\n        var node = getRealNode(this.node);\\n        var afterNode = getRealNode(element.node || element[element.length - 1].node);\\n        if (afterNode.nextSibling) {\\n            afterNode.parentNode.insertBefore(node, afterNode.nextSibling);\\n        } else {\\n            afterNode.parentNode.appendChild(node);\\n        }\\n        R._insertafter(this, element, this.paper);\\n        return this;\\n    };\\n    /*\\\\\\n     * Element.insertBefore\\n     [ method ]\\n     **\\n     * Inserts current object before the given one.\\n     = (object) @Element\\n     \\\\*/\\n    elproto.insertBefore = function (element) {\\n        if (this.removed || !element) {\\n            return this;\\n        }\\n\\n        var node = getRealNode(this.node);\\n        var beforeNode = getRealNode(element.node || element[0].node);\\n        beforeNode.parentNode.insertBefore(node, beforeNode);\\n        R._insertbefore(this, element, this.paper);\\n        return this;\\n    };\\n    elproto.blur = function (size) {\\n        // Experimental. No Safari support. Use it on your own risk.\\n        var t = this;\\n        if (+size !== 0) {\\n            var fltr = $(\\\"filter\\\"),\\n                blur = $(\\\"feGaussianBlur\\\");\\n            t.attrs.blur = size;\\n            fltr.id = R.createUUID();\\n            $(blur, {stdDeviation: +size || 1.5});\\n            fltr.appendChild(blur);\\n            t.paper.defs.appendChild(fltr);\\n            t._blur = fltr;\\n            $(t.node, {filter: \\\"url(#\\\" + fltr.id + \\\")\\\"});\\n        } else {\\n            if (t._blur) {\\n                t._blur.parentNode.removeChild(t._blur);\\n                delete t._blur;\\n                delete t.attrs.blur;\\n            }\\n            t.node.removeAttribute(\\\"filter\\\");\\n        }\\n        return t;\\n    };\\n    R._engine.circle = function (svg, x, y, r) {\\n        var el = $(\\\"circle\\\");\\n        svg.canvas && svg.canvas.appendChild(el);\\n        var res = new Element(el, svg);\\n        res.attrs = {cx: x, cy: y, r: r, fill: \\\"none\\\", stroke: \\\"#000\\\"};\\n        res.type = \\\"circle\\\";\\n        $(el, res.attrs);\\n        return res;\\n    };\\n    R._engine.rect = function (svg, x, y, w, h, r) {\\n        var el = $(\\\"rect\\\");\\n        svg.canvas && svg.canvas.appendChild(el);\\n        var res = new Element(el, svg);\\n        res.attrs = {x: x, y: y, width: w, height: h, rx: r || 0, ry: r || 0, fill: \\\"none\\\", stroke: \\\"#000\\\"};\\n        res.type = \\\"rect\\\";\\n        $(el, res.attrs);\\n        return res;\\n    };\\n    R._engine.ellipse = function (svg, x, y, rx, ry) {\\n        var el = $(\\\"ellipse\\\");\\n        svg.canvas && svg.canvas.appendChild(el);\\n        var res = new Element(el, svg);\\n        res.attrs = {cx: x, cy: y, rx: rx, ry: ry, fill: \\\"none\\\", stroke: \\\"#000\\\"};\\n        res.type = \\\"ellipse\\\";\\n        $(el, res.attrs);\\n        return res;\\n    };\\n    R._engine.image = function (svg, src, x, y, w, h) {\\n        var el = $(\\\"image\\\");\\n        $(el, {x: x, y: y, width: w, height: h, preserveAspectRatio: \\\"none\\\"});\\n        el.setAttributeNS(xlink, \\\"href\\\", src);\\n        svg.canvas && svg.canvas.appendChild(el);\\n        var res = new Element(el, svg);\\n        res.attrs = {x: x, y: y, width: w, height: h, src: src};\\n        res.type = \\\"image\\\";\\n        return res;\\n    };\\n    R._engine.text = function (svg, x, y, text, href) {\\n        var el = $(\\\"text\\\");\\n        svg.canvas && svg.canvas.appendChild(el);\\n        var res = new Element(el, svg);\\n        res.attrs = {\\n            x: x,\\n            y: y,\\n            \\\"text-anchor\\\": \\\"middle\\\",\\n            text: text,\\n            \\\"font-family\\\": R._availableAttrs[\\\"font-family\\\"],\\n            \\\"font-size\\\": R._availableAttrs[\\\"font-size\\\"],\\n            stroke: \\\"none\\\",\\n            fill: \\\"#000\\\",\\n            ...(href ? { href } : null),\\n        };\\n        res.type = \\\"text\\\";\\n        setFillAndStroke(res, res.attrs);\\n        return res;\\n    };\\n    R._engine.setSize = function (width, height) {\\n        this.width = width || this.width;\\n        this.height = height || this.height;\\n        this.canvas.setAttribute(\\\"width\\\", this.width);\\n        this.canvas.setAttribute(\\\"height\\\", this.height);\\n        if (this._viewBox) {\\n            this.setViewBox.apply(this, this._viewBox);\\n        }\\n        return this;\\n    };\\n    R._engine.create = function () {\\n        var con = R._getContainer.apply(0, arguments),\\n            container = con && con.container,\\n            x = con.x,\\n            y = con.y,\\n            width = con.width,\\n            height = con.height;\\n        if (!container) {\\n            throw new Error(\\\"SVG container not found.\\\");\\n        }\\n        var cnvs = $(\\\"svg\\\"),\\n            css = \\\"overflow:hidden;\\\",\\n            isFloating;\\n        x = x || 0;\\n        y = y || 0;\\n        width = width || 512;\\n        height = height || 342;\\n        $(cnvs, {\\n            height: height,\\n            version: 1.1,\\n            width: width,\\n            xmlns: \\\"http://www.w3.org/2000/svg\\\",\\n            \\\"xmlns:xlink\\\": \\\"http://www.w3.org/1999/xlink\\\"\\n        });\\n        if (container == 1) {\\n            cnvs.style.cssText = css + \\\"position:absolute;left:\\\" + x + \\\"px;top:\\\" + y + \\\"px\\\";\\n            R._g.doc.body.appendChild(cnvs);\\n            isFloating = 1;\\n        } else {\\n            cnvs.style.cssText = css + \\\"position:relative\\\";\\n            if (container.firstChild) {\\n                container.insertBefore(cnvs, container.firstChild);\\n            } else {\\n                container.appendChild(cnvs);\\n            }\\n        }\\n        container = new R._Paper;\\n        container.width = width;\\n        container.height = height;\\n        container.canvas = cnvs;\\n        container.clear();\\n        container._left = container._top = 0;\\n        isFloating && (container.renderfix = function () {});\\n        container.renderfix();\\n        return container;\\n    };\\n    R._engine.setViewBox = function (x, y, w, h, fit) {\\n        eve(\\\"raphael.setViewBox\\\", this, this._viewBox, [x, y, w, h, fit]);\\n        var paperSize = this.getSize(),\\n            size = mmax(w / paperSize.width, h / paperSize.height),\\n            top = this.top,\\n            aspectRatio = fit ? \\\"xMidYMid meet\\\" : \\\"xMinYMin\\\",\\n            vb,\\n            sw;\\n        if (x == null) {\\n            if (this._vbSize) {\\n                size = 1;\\n            }\\n            delete this._vbSize;\\n            vb = \\\"0 0 \\\" + this.width + S + this.height;\\n        } else {\\n            this._vbSize = size;\\n            vb = x + S + y + S + w + S + h;\\n        }\\n        $(this.canvas, {\\n            viewBox: vb,\\n            preserveAspectRatio: aspectRatio\\n        });\\n        while (size && top) {\\n            sw = \\\"stroke-width\\\" in top.attrs ? top.attrs[\\\"stroke-width\\\"] : 1;\\n            top.attr({\\\"stroke-width\\\": sw});\\n            top._.dirty = 1;\\n            top._.dirtyT = 1;\\n            top = top.prev;\\n        }\\n        this._viewBox = [x, y, w, h, !!fit];\\n        return this;\\n    };\\n    /*\\\\\\n     * Paper.renderfix\\n     [ method ]\\n     **\\n     * Fixes the issue of Firefox and IE9 regarding subpixel rendering. If paper is dependant\\n     * on other elements after reflow it could shift half pixel which cause for lines to lost their crispness.\\n     * This method fixes the issue.\\n     **\\n     Special thanks to Mariusz Nowak (http://www.medikoo.com/) for this method.\\n     \\\\*/\\n    R.prototype.renderfix = function () {\\n        var cnvs = this.canvas,\\n            s = cnvs.style,\\n            pos;\\n        try {\\n            pos = cnvs.getScreenCTM() || cnvs.createSVGMatrix();\\n        } catch (e) {\\n            pos = cnvs.createSVGMatrix();\\n        }\\n        var left = -pos.e % 1,\\n            top = -pos.f % 1;\\n        if (left || top) {\\n            if (left) {\\n                this._left = (this._left + left) % 1;\\n                s.left = this._left + \\\"px\\\";\\n            }\\n            if (top) {\\n                this._top = (this._top + top) % 1;\\n                s.top = this._top + \\\"px\\\";\\n            }\\n        }\\n    };\\n    /*\\\\\\n     * Paper.clear\\n     [ method ]\\n     **\\n     * Clears the paper, i.e. removes all the elements.\\n     \\\\*/\\n    R.prototype.clear = function () {\\n        R.eve(\\\"raphael.clear\\\", this);\\n        var c = this.canvas;\\n        while (c.firstChild) {\\n            c.removeChild(c.firstChild);\\n        }\\n        this.bottom = this.top = null;\\n        (this.desc = $(\\\"desc\\\")).appendChild(R._g.doc.createTextNode(\\\"Created with Rapha\\\\xebl \\\" + R.version));\\n        c.appendChild(this.desc);\\n        c.appendChild(this.defs = $(\\\"defs\\\"));\\n    };\\n    /*\\\\\\n     * Paper.remove\\n     [ method ]\\n     **\\n     * Removes the paper from the DOM.\\n     \\\\*/\\n    R.prototype.remove = function () {\\n        eve(\\\"raphael.remove\\\", this);\\n        this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);\\n        for (var i in this) {\\n            this[i] = typeof this[i] == \\\"function\\\" ? R._removedFactory(i) : null;\\n        }\\n    };\\n    var setproto = R.st;\\n    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {\\n        setproto[method] = (function (methodname) {\\n            return function () {\\n                var arg = arguments;\\n                return this.forEach(function (el) {\\n                    el[methodname].apply(el, arg);\\n                });\\n            };\\n        })(method);\\n    }\\n}));\\n\\n// ┌─────────────────────────────────────────────────────────────────────┐ \\\\\\\\\\n// │ Raphaël 2.1.4 - JavaScript Vector Library                       │ \\\\\\\\\\n// ├─────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ VML Module                                                          │ \\\\\\\\\\n// ├─────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\\\\\\\\\n// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\\\\\\\\\n// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\\\\\\\\\n// └─────────────────────────────────────────────────────────────────────┘ \\\\\\\\\\n\\n(function (glob, factory) {\\n    if (typeof define === \\\"function\\\" && define.amd) {\\n        define(\\\"raphael.vml\\\", [\\\"raphael.core\\\"], function(raphael) {\\n            return factory(raphael);\\n        });\\n    } else if (typeof exports === \\\"object\\\") {\\n        factory(require(\\\"./raphael.core\\\"));\\n    } else {\\n        factory(glob.Raphael);\\n    }\\n}(this, function(R) {\\n    if (R && !R.vml) {\\n        return;\\n    }\\n\\n    var has = \\\"hasOwnProperty\\\",\\n        Str = String,\\n        toFloat = parseFloat,\\n        math = Math,\\n        round = math.round,\\n        mmax = math.max,\\n        mmin = math.min,\\n        abs = math.abs,\\n        fillString = \\\"fill\\\",\\n        separator = /[, ]+/,\\n        eve = R.eve,\\n        ms = \\\" progid:DXImageTransform.Microsoft\\\",\\n        S = \\\" \\\",\\n        E = \\\"\\\",\\n        map = {M: \\\"m\\\", L: \\\"l\\\", C: \\\"c\\\", Z: \\\"x\\\", m: \\\"t\\\", l: \\\"r\\\", c: \\\"v\\\", z: \\\"x\\\"},\\n        bites = /([clmz]),?([^clmz]*)/gi,\\n        blurregexp = / progid:\\\\S+Blur\\\\([^\\\\)]+\\\\)/g,\\n        val = /-?[^,\\\\s-]+/g,\\n        cssDot = \\\"position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)\\\",\\n        zoom = 21600,\\n        pathTypes = {path: 1, rect: 1, image: 1},\\n        ovalTypes = {circle: 1, ellipse: 1},\\n        path2vml = function (path) {\\n            var total =  /[ahqstv]/ig,\\n                command = R._pathToAbsolute;\\n            Str(path).match(total) && (command = R._path2curve);\\n            total = /[clmz]/g;\\n            if (command == R._pathToAbsolute && !Str(path).match(total)) {\\n                var res = Str(path).replace(bites, function (all, command, args) {\\n                    var vals = [],\\n                        isMove = command.toLowerCase() == \\\"m\\\",\\n                        res = map[command];\\n                    args.replace(val, function (value) {\\n                        if (isMove && vals.length == 2) {\\n                            res += vals + map[command == \\\"m\\\" ? \\\"l\\\" : \\\"L\\\"];\\n                            vals = [];\\n                        }\\n                        vals.push(round(value * zoom));\\n                    });\\n                    return res + vals;\\n                });\\n                return res;\\n            }\\n            var pa = command(path), p, r;\\n            res = [];\\n            for (var i = 0, ii = pa.length; i < ii; i++) {\\n                p = pa[i];\\n                r = pa[i][0].toLowerCase();\\n                r == \\\"z\\\" && (r = \\\"x\\\");\\n                for (var j = 1, jj = p.length; j < jj; j++) {\\n                    r += round(p[j] * zoom) + (j != jj - 1 ? \\\",\\\" : E);\\n                }\\n                res.push(r);\\n            }\\n            return res.join(S);\\n        },\\n        compensation = function (deg, dx, dy) {\\n            var m = R.matrix();\\n            m.rotate(-deg, .5, .5);\\n            return {\\n                dx: m.x(dx, dy),\\n                dy: m.y(dx, dy)\\n            };\\n        },\\n        setCoords = function (p, sx, sy, dx, dy, deg) {\\n            var _ = p._,\\n                m = p.matrix,\\n                fillpos = _.fillpos,\\n                o = p.node,\\n                s = o.style,\\n                y = 1,\\n                flip = \\\"\\\",\\n                dxdy,\\n                kx = zoom / sx,\\n                ky = zoom / sy;\\n            s.visibility = \\\"hidden\\\";\\n            if (!sx || !sy) {\\n                return;\\n            }\\n            o.coordsize = abs(kx) + S + abs(ky);\\n            s.rotation = deg * (sx * sy < 0 ? -1 : 1);\\n            if (deg) {\\n                var c = compensation(deg, dx, dy);\\n                dx = c.dx;\\n                dy = c.dy;\\n            }\\n            sx < 0 && (flip += \\\"x\\\");\\n            sy < 0 && (flip += \\\" y\\\") && (y = -1);\\n            s.flip = flip;\\n            o.coordorigin = (dx * -kx) + S + (dy * -ky);\\n            if (fillpos || _.fillsize) {\\n                var fill = o.getElementsByTagName(fillString);\\n                fill = fill && fill[0];\\n                o.removeChild(fill);\\n                if (fillpos) {\\n                    c = compensation(deg, m.x(fillpos[0], fillpos[1]), m.y(fillpos[0], fillpos[1]));\\n                    fill.position = c.dx * y + S + c.dy * y;\\n                }\\n                if (_.fillsize) {\\n                    fill.size = _.fillsize[0] * abs(sx) + S + _.fillsize[1] * abs(sy);\\n                }\\n                o.appendChild(fill);\\n            }\\n            s.visibility = \\\"visible\\\";\\n        };\\n    R.toString = function () {\\n        return  \\\"Your browser doesn\\\\u2019t support SVG. Falling down to VML.\\\\nYou are running Rapha\\\\xebl \\\" + this.version;\\n    };\\n    var addArrow = function (o, value, isEnd) {\\n            var values = Str(value).toLowerCase().split(\\\"-\\\"),\\n                se = isEnd ? \\\"end\\\" : \\\"start\\\",\\n                i = values.length,\\n                type = \\\"classic\\\",\\n                w = \\\"medium\\\",\\n                h = \\\"medium\\\";\\n            while (i--) {\\n                switch (values[i]) {\\n                    case \\\"block\\\":\\n                    case \\\"classic\\\":\\n                    case \\\"oval\\\":\\n                    case \\\"diamond\\\":\\n                    case \\\"open\\\":\\n                    case \\\"none\\\":\\n                        type = values[i];\\n                        break;\\n                    case \\\"wide\\\":\\n                    case \\\"narrow\\\": h = values[i]; break;\\n                    case \\\"long\\\":\\n                    case \\\"short\\\": w = values[i]; break;\\n                }\\n            }\\n            var stroke = o.node.getElementsByTagName(\\\"stroke\\\")[0];\\n            stroke[se + \\\"arrow\\\"] = type;\\n            stroke[se + \\\"arrowlength\\\"] = w;\\n            stroke[se + \\\"arrowwidth\\\"] = h;\\n        },\\n        setFillAndStroke = function (o, params) {\\n            // o.paper.canvas.style.display = \\\"none\\\";\\n            o.attrs = o.attrs || {};\\n            var node = o.node,\\n                a = o.attrs,\\n                s = node.style,\\n                xy,\\n                newpath = pathTypes[o.type] && (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.cx != a.cx || params.cy != a.cy || params.rx != a.rx || params.ry != a.ry || params.r != a.r),\\n                isOval = ovalTypes[o.type] && (a.cx != params.cx || a.cy != params.cy || a.r != params.r || a.rx != params.rx || a.ry != params.ry),\\n                res = o;\\n\\n\\n            for (var par in params) if (params[has](par)) {\\n                a[par] = params[par];\\n            }\\n            if (newpath) {\\n                a.path = R._getPath[o.type](o);\\n                o._.dirty = 1;\\n            }\\n            params.href && (node.href = params.href);\\n            params.title && (node.title = params.title);\\n            params.target && (node.target = params.target);\\n            params.cursor && (s.cursor = params.cursor);\\n            \\\"blur\\\" in params && o.blur(params.blur);\\n            if (params.path && o.type == \\\"path\\\" || newpath) {\\n                node.path = path2vml(~Str(a.path).toLowerCase().indexOf(\\\"r\\\") ? R._pathToAbsolute(a.path) : a.path);\\n                o._.dirty = 1;\\n                if (o.type == \\\"image\\\") {\\n                    o._.fillpos = [a.x, a.y];\\n                    o._.fillsize = [a.width, a.height];\\n                    setCoords(o, 1, 1, 0, 0, 0);\\n                }\\n            }\\n            \\\"transform\\\" in params && o.transform(params.transform);\\n            if (isOval) {\\n                var cx = +a.cx,\\n                    cy = +a.cy,\\n                    rx = +a.rx || +a.r || 0,\\n                    ry = +a.ry || +a.r || 0;\\n                node.path = R.format(\\\"ar{0},{1},{2},{3},{4},{1},{4},{1}x\\\", round((cx - rx) * zoom), round((cy - ry) * zoom), round((cx + rx) * zoom), round((cy + ry) * zoom), round(cx * zoom));\\n                o._.dirty = 1;\\n            }\\n            if (\\\"clip-rect\\\" in params) {\\n                var rect = Str(params[\\\"clip-rect\\\"]).split(separator);\\n                if (rect.length == 4) {\\n                    rect[2] = +rect[2] + (+rect[0]);\\n                    rect[3] = +rect[3] + (+rect[1]);\\n                    var div = node.clipRect || R._g.doc.createElement(\\\"div\\\"),\\n                        dstyle = div.style;\\n                    dstyle.clip = R.format(\\\"rect({1}px {2}px {3}px {0}px)\\\", rect);\\n                    if (!node.clipRect) {\\n                        dstyle.position = \\\"absolute\\\";\\n                        dstyle.top = 0;\\n                        dstyle.left = 0;\\n                        dstyle.width = o.paper.width + \\\"px\\\";\\n                        dstyle.height = o.paper.height + \\\"px\\\";\\n                        node.parentNode.insertBefore(div, node);\\n                        div.appendChild(node);\\n                        node.clipRect = div;\\n                    }\\n                }\\n                if (!params[\\\"clip-rect\\\"]) {\\n                    node.clipRect && (node.clipRect.style.clip = \\\"auto\\\");\\n                }\\n            }\\n            if (o.textpath) {\\n                var textpathStyle = o.textpath.style;\\n                params.font && (textpathStyle.font = params.font);\\n                params[\\\"font-family\\\"] && (textpathStyle.fontFamily = '\\\"' + params[\\\"font-family\\\"].split(\\\",\\\")[0].replace(/^['\\\"]+|['\\\"]+$/g, E) + '\\\"');\\n                params[\\\"font-size\\\"] && (textpathStyle.fontSize = params[\\\"font-size\\\"]);\\n                params[\\\"font-weight\\\"] && (textpathStyle.fontWeight = params[\\\"font-weight\\\"]);\\n                params[\\\"font-style\\\"] && (textpathStyle.fontStyle = params[\\\"font-style\\\"]);\\n            }\\n            if (\\\"arrow-start\\\" in params) {\\n                addArrow(res, params[\\\"arrow-start\\\"]);\\n            }\\n            if (\\\"arrow-end\\\" in params) {\\n                addArrow(res, params[\\\"arrow-end\\\"], 1);\\n            }\\n            if (params.opacity != null ||\\n                params[\\\"stroke-width\\\"] != null ||\\n                params.fill != null ||\\n                params.src != null ||\\n                params.stroke != null ||\\n                params[\\\"stroke-width\\\"] != null ||\\n                params[\\\"stroke-opacity\\\"] != null ||\\n                params[\\\"fill-opacity\\\"] != null ||\\n                params[\\\"stroke-dasharray\\\"] != null ||\\n                params[\\\"stroke-miterlimit\\\"] != null ||\\n                params[\\\"stroke-linejoin\\\"] != null ||\\n                params[\\\"stroke-linecap\\\"] != null) {\\n                var fill = node.getElementsByTagName(fillString),\\n                    newfill = false;\\n                fill = fill && fill[0];\\n                !fill && (newfill = fill = createNode(fillString));\\n                if (o.type == \\\"image\\\" && params.src) {\\n                    fill.src = params.src;\\n                }\\n                params.fill && (fill.on = true);\\n                if (fill.on == null || params.fill == \\\"none\\\" || params.fill === null) {\\n                    fill.on = false;\\n                }\\n                if (fill.on && params.fill) {\\n                    var isURL = Str(params.fill).match(R._ISURL);\\n                    if (isURL) {\\n                        fill.parentNode == node && node.removeChild(fill);\\n                        fill.rotate = true;\\n                        fill.src = isURL[1];\\n                        fill.type = \\\"tile\\\";\\n                        var bbox = o.getBBox(1);\\n                        fill.position = bbox.x + S + bbox.y;\\n                        o._.fillpos = [bbox.x, bbox.y];\\n\\n                        R._preload(isURL[1], function () {\\n                            o._.fillsize = [this.offsetWidth, this.offsetHeight];\\n                        });\\n                    } else {\\n                        fill.color = R.getRGB(params.fill).hex;\\n                        fill.src = E;\\n                        fill.type = \\\"solid\\\";\\n                        if (R.getRGB(params.fill).error && (res.type in {circle: 1, ellipse: 1} || Str(params.fill).charAt() != \\\"r\\\") && addGradientFill(res, params.fill, fill)) {\\n                            a.fill = \\\"none\\\";\\n                            a.gradient = params.fill;\\n                            fill.rotate = false;\\n                        }\\n                    }\\n                }\\n                if (\\\"fill-opacity\\\" in params || \\\"opacity\\\" in params) {\\n                    var opacity = ((+a[\\\"fill-opacity\\\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+R.getRGB(params.fill).o + 1 || 2) - 1);\\n                    opacity = mmin(mmax(opacity, 0), 1);\\n                    fill.opacity = opacity;\\n                    if (fill.src) {\\n                        fill.color = \\\"none\\\";\\n                    }\\n                }\\n                node.appendChild(fill);\\n                var stroke = (node.getElementsByTagName(\\\"stroke\\\") && node.getElementsByTagName(\\\"stroke\\\")[0]),\\n                    newstroke = false;\\n                !stroke && (newstroke = stroke = createNode(\\\"stroke\\\"));\\n                if ((params.stroke && params.stroke != \\\"none\\\") ||\\n                    params[\\\"stroke-width\\\"] ||\\n                    params[\\\"stroke-opacity\\\"] != null ||\\n                    params[\\\"stroke-dasharray\\\"] ||\\n                    params[\\\"stroke-miterlimit\\\"] ||\\n                    params[\\\"stroke-linejoin\\\"] ||\\n                    params[\\\"stroke-linecap\\\"]) {\\n                    stroke.on = true;\\n                }\\n                (params.stroke == \\\"none\\\" || params.stroke === null || stroke.on == null || params.stroke == 0 || params[\\\"stroke-width\\\"] == 0) && (stroke.on = false);\\n                var strokeColor = R.getRGB(params.stroke);\\n                stroke.on && params.stroke && (stroke.color = strokeColor.hex);\\n                opacity = ((+a[\\\"stroke-opacity\\\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.o + 1 || 2) - 1);\\n                var width = (toFloat(params[\\\"stroke-width\\\"]) || 1) * .75;\\n                opacity = mmin(mmax(opacity, 0), 1);\\n                params[\\\"stroke-width\\\"] == null && (width = a[\\\"stroke-width\\\"]);\\n                params[\\\"stroke-width\\\"] && (stroke.weight = width);\\n                width && width < 1 && (opacity *= width) && (stroke.weight = 1);\\n                stroke.opacity = opacity;\\n\\n                params[\\\"stroke-linejoin\\\"] && (stroke.joinstyle = params[\\\"stroke-linejoin\\\"] || \\\"miter\\\");\\n                stroke.miterlimit = params[\\\"stroke-miterlimit\\\"] || 8;\\n                params[\\\"stroke-linecap\\\"] && (stroke.endcap = params[\\\"stroke-linecap\\\"] == \\\"butt\\\" ? \\\"flat\\\" : params[\\\"stroke-linecap\\\"] == \\\"square\\\" ? \\\"square\\\" : \\\"round\\\");\\n                if (\\\"stroke-dasharray\\\" in params) {\\n                    var dasharray = {\\n                        \\\"-\\\": \\\"shortdash\\\",\\n                        \\\".\\\": \\\"shortdot\\\",\\n                        \\\"-.\\\": \\\"shortdashdot\\\",\\n                        \\\"-..\\\": \\\"shortdashdotdot\\\",\\n                        \\\". \\\": \\\"dot\\\",\\n                        \\\"- \\\": \\\"dash\\\",\\n                        \\\"--\\\": \\\"longdash\\\",\\n                        \\\"- .\\\": \\\"dashdot\\\",\\n                        \\\"--.\\\": \\\"longdashdot\\\",\\n                        \\\"--..\\\": \\\"longdashdotdot\\\"\\n                    };\\n                    stroke.dashstyle = dasharray[has](params[\\\"stroke-dasharray\\\"]) ? dasharray[params[\\\"stroke-dasharray\\\"]] : E;\\n                }\\n                newstroke && node.appendChild(stroke);\\n            }\\n            if (res.type == \\\"text\\\") {\\n                res.paper.canvas.style.display = E;\\n                var span = res.paper.span,\\n                    m = 100,\\n                    fontSize = a.font && a.font.match(/\\\\d+(?:\\\\.\\\\d*)?(?=px)/);\\n                s = span.style;\\n                a.font && (s.font = a.font);\\n                a[\\\"font-family\\\"] && (s.fontFamily = a[\\\"font-family\\\"]);\\n                a[\\\"font-weight\\\"] && (s.fontWeight = a[\\\"font-weight\\\"]);\\n                a[\\\"font-style\\\"] && (s.fontStyle = a[\\\"font-style\\\"]);\\n                fontSize = toFloat(a[\\\"font-size\\\"] || fontSize && fontSize[0]) || 10;\\n                s.fontSize = fontSize * m + \\\"px\\\";\\n                res.textpath.string && (span.innerHTML = Str(res.textpath.string).replace(/</g, \\\"&#60;\\\").replace(/&/g, \\\"&#38;\\\").replace(/\\\\n/g, \\\"<br>\\\"));\\n                var brect = span.getBoundingClientRect();\\n                res.W = a.w = (brect.right - brect.left) / m;\\n                res.H = a.h = (brect.bottom - brect.top) / m;\\n                // res.paper.canvas.style.display = \\\"none\\\";\\n                res.X = a.x;\\n                res.Y = a.y + res.H / 2;\\n\\n                (\\\"x\\\" in params || \\\"y\\\" in params) && (res.path.v = R.format(\\\"m{0},{1}l{2},{1}\\\", round(a.x * zoom), round(a.y * zoom), round(a.x * zoom) + 1));\\n                var dirtyattrs = [\\\"x\\\", \\\"y\\\", \\\"text\\\", \\\"font\\\", \\\"font-family\\\", \\\"font-weight\\\", \\\"font-style\\\", \\\"font-size\\\"];\\n                for (var d = 0, dd = dirtyattrs.length; d < dd; d++) if (dirtyattrs[d] in params) {\\n                    res._.dirty = 1;\\n                    break;\\n                }\\n\\n                // text-anchor emulation\\n                switch (a[\\\"text-anchor\\\"]) {\\n                    case \\\"start\\\":\\n                        res.textpath.style[\\\"v-text-align\\\"] = \\\"left\\\";\\n                        res.bbx = res.W / 2;\\n                        break;\\n                    case \\\"end\\\":\\n                        res.textpath.style[\\\"v-text-align\\\"] = \\\"right\\\";\\n                        res.bbx = -res.W / 2;\\n                        break;\\n                    default:\\n                        res.textpath.style[\\\"v-text-align\\\"] = \\\"center\\\";\\n                        res.bbx = 0;\\n                        break;\\n                }\\n                res.textpath.style[\\\"v-text-kern\\\"] = true;\\n            }\\n            // res.paper.canvas.style.display = E;\\n        },\\n        addGradientFill = function (o, gradient, fill) {\\n            o.attrs = o.attrs || {};\\n            var attrs = o.attrs,\\n                pow = Math.pow,\\n                opacity,\\n                oindex,\\n                type = \\\"linear\\\",\\n                fxfy = \\\".5 .5\\\";\\n            o.attrs.gradient = gradient;\\n            gradient = Str(gradient).replace(R._radial_gradient, function (all, fx, fy) {\\n                type = \\\"radial\\\";\\n                if (fx && fy) {\\n                    fx = toFloat(fx);\\n                    fy = toFloat(fy);\\n                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = math.sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);\\n                    fxfy = fx + S + fy;\\n                }\\n                return E;\\n            });\\n            gradient = gradient.split(/\\\\s*\\\\-\\\\s*/);\\n            if (type == \\\"linear\\\") {\\n                var angle = gradient.shift();\\n                angle = -toFloat(angle);\\n                if (isNaN(angle)) {\\n                    return null;\\n                }\\n            }\\n            var dots = R._parseDots(gradient);\\n            if (!dots) {\\n                return null;\\n            }\\n            o = o.shape || o.node;\\n            if (dots.length) {\\n                o.removeChild(fill);\\n                fill.on = true;\\n                fill.method = \\\"none\\\";\\n                fill.color = dots[0].color;\\n                fill.color2 = dots[dots.length - 1].color;\\n                var clrs = [];\\n                for (var i = 0, ii = dots.length; i < ii; i++) {\\n                    dots[i].offset && clrs.push(dots[i].offset + S + dots[i].color);\\n                }\\n                fill.colors = clrs.length ? clrs.join() : \\\"0% \\\" + fill.color;\\n                if (type == \\\"radial\\\") {\\n                    fill.type = \\\"gradientTitle\\\";\\n                    fill.focus = \\\"100%\\\";\\n                    fill.focussize = \\\"0 0\\\";\\n                    fill.focusposition = fxfy;\\n                    fill.angle = 0;\\n                } else {\\n                    // fill.rotate= true;\\n                    fill.type = \\\"gradient\\\";\\n                    fill.angle = (270 - angle) % 360;\\n                }\\n                o.appendChild(fill);\\n            }\\n            return 1;\\n        },\\n        Element = function (node, vml) {\\n            this[0] = this.node = node;\\n            node.raphael = true;\\n            this.id = R._oid++;\\n            node.raphaelid = this.id;\\n            this.X = 0;\\n            this.Y = 0;\\n            this.attrs = {};\\n            this.paper = vml;\\n            this.matrix = R.matrix();\\n            this._ = {\\n                transform: [],\\n                sx: 1,\\n                sy: 1,\\n                dx: 0,\\n                dy: 0,\\n                deg: 0,\\n                dirty: 1,\\n                dirtyT: 1\\n            };\\n            !vml.bottom && (vml.bottom = this);\\n            this.prev = vml.top;\\n            vml.top && (vml.top.next = this);\\n            vml.top = this;\\n            this.next = null;\\n        };\\n    var elproto = R.el;\\n\\n    Element.prototype = elproto;\\n    elproto.constructor = Element;\\n    elproto.transform = function (tstr) {\\n        if (tstr == null) {\\n            return this._.transform;\\n        }\\n        var vbs = this.paper._viewBoxShift,\\n            vbt = vbs ? \\\"s\\\" + [vbs.scale, vbs.scale] + \\\"-1-1t\\\" + [vbs.dx, vbs.dy] : E,\\n            oldt;\\n        if (vbs) {\\n            oldt = tstr = Str(tstr).replace(/\\\\.{3}|\\\\u2026/g, this._.transform || E);\\n        }\\n        R._extractTransform(this, vbt + tstr);\\n        var matrix = this.matrix.clone(),\\n            skew = this.skew,\\n            o = this.node,\\n            split,\\n            isGrad = ~Str(this.attrs.fill).indexOf(\\\"-\\\"),\\n            isPatt = !Str(this.attrs.fill).indexOf(\\\"url(\\\");\\n        matrix.translate(1, 1);\\n        if (isPatt || isGrad || this.type == \\\"image\\\") {\\n            skew.matrix = \\\"1 0 0 1\\\";\\n            skew.offset = \\\"0 0\\\";\\n            split = matrix.split();\\n            if ((isGrad && split.noRotation) || !split.isSimple) {\\n                o.style.filter = matrix.toFilter();\\n                var bb = this.getBBox(),\\n                    bbt = this.getBBox(1),\\n                    dx = bb.x - bbt.x,\\n                    dy = bb.y - bbt.y;\\n                o.coordorigin = (dx * -zoom) + S + (dy * -zoom);\\n                setCoords(this, 1, 1, dx, dy, 0);\\n            } else {\\n                o.style.filter = E;\\n                setCoords(this, split.scalex, split.scaley, split.dx, split.dy, split.rotate);\\n            }\\n        } else {\\n            o.style.filter = E;\\n            skew.matrix = Str(matrix);\\n            skew.offset = matrix.offset();\\n        }\\n        if (oldt !== null) { // empty string value is true as well\\n            this._.transform = oldt;\\n            R._extractTransform(this, oldt);\\n        }\\n        return this;\\n    };\\n    elproto.rotate = function (deg, cx, cy) {\\n        if (this.removed) {\\n            return this;\\n        }\\n        if (deg == null) {\\n            return;\\n        }\\n        deg = Str(deg).split(separator);\\n        if (deg.length - 1) {\\n            cx = toFloat(deg[1]);\\n            cy = toFloat(deg[2]);\\n        }\\n        deg = toFloat(deg[0]);\\n        (cy == null) && (cx = cy);\\n        if (cx == null || cy == null) {\\n            var bbox = this.getBBox(1);\\n            cx = bbox.x + bbox.width / 2;\\n            cy = bbox.y + bbox.height / 2;\\n        }\\n        this._.dirtyT = 1;\\n        this.transform(this._.transform.concat([[\\\"r\\\", deg, cx, cy]]));\\n        return this;\\n    };\\n    elproto.translate = function (dx, dy) {\\n        if (this.removed) {\\n            return this;\\n        }\\n        dx = Str(dx).split(separator);\\n        if (dx.length - 1) {\\n            dy = toFloat(dx[1]);\\n        }\\n        dx = toFloat(dx[0]) || 0;\\n        dy = +dy || 0;\\n        if (this._.bbox) {\\n            this._.bbox.x += dx;\\n            this._.bbox.y += dy;\\n        }\\n        this.transform(this._.transform.concat([[\\\"t\\\", dx, dy]]));\\n        return this;\\n    };\\n    elproto.scale = function (sx, sy, cx, cy) {\\n        if (this.removed) {\\n            return this;\\n        }\\n        sx = Str(sx).split(separator);\\n        if (sx.length - 1) {\\n            sy = toFloat(sx[1]);\\n            cx = toFloat(sx[2]);\\n            cy = toFloat(sx[3]);\\n            isNaN(cx) && (cx = null);\\n            isNaN(cy) && (cy = null);\\n        }\\n        sx = toFloat(sx[0]);\\n        (sy == null) && (sy = sx);\\n        (cy == null) && (cx = cy);\\n        if (cx == null || cy == null) {\\n            var bbox = this.getBBox(1);\\n        }\\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\\n\\n        this.transform(this._.transform.concat([[\\\"s\\\", sx, sy, cx, cy]]));\\n        this._.dirtyT = 1;\\n        return this;\\n    };\\n    elproto.hide = function () {\\n        !this.removed && (this.node.style.display = \\\"none\\\");\\n        return this;\\n    };\\n    elproto.show = function () {\\n        !this.removed && (this.node.style.display = E);\\n        return this;\\n    };\\n    // Needed to fix the vml setViewBox issues\\n    elproto.auxGetBBox = R.el.getBBox;\\n    elproto.getBBox = function(){\\n        var b = this.auxGetBBox();\\n        if (this.paper && this.paper._viewBoxShift)\\n        {\\n            var c = {};\\n            var z = 1/this.paper._viewBoxShift.scale;\\n            c.x = b.x - this.paper._viewBoxShift.dx;\\n            c.x *= z;\\n            c.y = b.y - this.paper._viewBoxShift.dy;\\n            c.y *= z;\\n            c.width  = b.width  * z;\\n            c.height = b.height * z;\\n            c.x2 = c.x + c.width;\\n            c.y2 = c.y + c.height;\\n            return c;\\n        }\\n        return b;\\n    };\\n    elproto._getBBox = function () {\\n        if (this.removed) {\\n            return {};\\n        }\\n        return {\\n            x: this.X + (this.bbx || 0) - this.W / 2,\\n            y: this.Y - this.H,\\n            width: this.W,\\n            height: this.H\\n        };\\n    };\\n    elproto.remove = function () {\\n        if (this.removed || !this.node.parentNode) {\\n            return;\\n        }\\n        this.paper.__set__ && this.paper.__set__.exclude(this);\\n        R.eve.unbind(\\\"raphael.*.*.\\\" + this.id);\\n        R._tear(this, this.paper);\\n        this.node.parentNode.removeChild(this.node);\\n        this.shape && this.shape.parentNode.removeChild(this.shape);\\n        for (var i in this) {\\n            this[i] = typeof this[i] == \\\"function\\\" ? R._removedFactory(i) : null;\\n        }\\n        this.removed = true;\\n    };\\n    elproto.attr = function (name, value) {\\n        if (this.removed) {\\n            return this;\\n        }\\n        if (name == null) {\\n            var res = {};\\n            for (var a in this.attrs) if (this.attrs[has](a)) {\\n                res[a] = this.attrs[a];\\n            }\\n            res.gradient && res.fill == \\\"none\\\" && (res.fill = res.gradient) && delete res.gradient;\\n            res.transform = this._.transform;\\n            return res;\\n        }\\n        if (value == null && R.is(name, \\\"string\\\")) {\\n            if (name == fillString && this.attrs.fill == \\\"none\\\" && this.attrs.gradient) {\\n                return this.attrs.gradient;\\n            }\\n            var names = name.split(separator),\\n                out = {};\\n            for (var i = 0, ii = names.length; i < ii; i++) {\\n                name = names[i];\\n                if (name in this.attrs) {\\n                    out[name] = this.attrs[name];\\n                } else if (R.is(this.paper.customAttributes[name], \\\"function\\\")) {\\n                    out[name] = this.paper.customAttributes[name].def;\\n                } else {\\n                    out[name] = R._availableAttrs[name];\\n                }\\n            }\\n            return ii - 1 ? out : out[names[0]];\\n        }\\n        if (this.attrs && value == null && R.is(name, \\\"array\\\")) {\\n            out = {};\\n            for (i = 0, ii = name.length; i < ii; i++) {\\n                out[name[i]] = this.attr(name[i]);\\n            }\\n            return out;\\n        }\\n        var params;\\n        if (value != null) {\\n            params = {};\\n            params[name] = value;\\n        }\\n        value == null && R.is(name, \\\"object\\\") && (params = name);\\n        for (var key in params) {\\n            eve(\\\"raphael.attr.\\\" + key + \\\".\\\" + this.id, this, params[key]);\\n        }\\n        if (params) {\\n            for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], \\\"function\\\")) {\\n                var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));\\n                this.attrs[key] = params[key];\\n                for (var subkey in par) if (par[has](subkey)) {\\n                    params[subkey] = par[subkey];\\n                }\\n            }\\n            // this.paper.canvas.style.display = \\\"none\\\";\\n            if (params.text && this.type == \\\"text\\\") {\\n                this.textpath.string = params.text;\\n            }\\n            setFillAndStroke(this, params);\\n            // this.paper.canvas.style.display = E;\\n        }\\n        return this;\\n    };\\n    elproto.toFront = function () {\\n        !this.removed && this.node.parentNode.appendChild(this.node);\\n        this.paper && this.paper.top != this && R._tofront(this, this.paper);\\n        return this;\\n    };\\n    elproto.toBack = function () {\\n        if (this.removed) {\\n            return this;\\n        }\\n        if (this.node.parentNode.firstChild != this.node) {\\n            this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild);\\n            R._toback(this, this.paper);\\n        }\\n        return this;\\n    };\\n    elproto.insertAfter = function (element) {\\n        if (this.removed) {\\n            return this;\\n        }\\n        if (element.constructor == R.st.constructor) {\\n            element = element[element.length - 1];\\n        }\\n        if (element.node.nextSibling) {\\n            element.node.parentNode.insertBefore(this.node, element.node.nextSibling);\\n        } else {\\n            element.node.parentNode.appendChild(this.node);\\n        }\\n        R._insertafter(this, element, this.paper);\\n        return this;\\n    };\\n    elproto.insertBefore = function (element) {\\n        if (this.removed) {\\n            return this;\\n        }\\n        if (element.constructor == R.st.constructor) {\\n            element = element[0];\\n        }\\n        element.node.parentNode.insertBefore(this.node, element.node);\\n        R._insertbefore(this, element, this.paper);\\n        return this;\\n    };\\n    elproto.blur = function (size) {\\n        var s = this.node.runtimeStyle,\\n            f = s.filter;\\n        f = f.replace(blurregexp, E);\\n        if (+size !== 0) {\\n            this.attrs.blur = size;\\n            s.filter = f + S + ms + \\\".Blur(pixelradius=\\\" + (+size || 1.5) + \\\")\\\";\\n            s.margin = R.format(\\\"-{0}px 0 0 -{0}px\\\", round(+size || 1.5));\\n        } else {\\n            s.filter = f;\\n            s.margin = 0;\\n            delete this.attrs.blur;\\n        }\\n        return this;\\n    };\\n\\n    R._engine.path = function (pathString, vml) {\\n        var el = createNode(\\\"shape\\\");\\n        el.style.cssText = cssDot;\\n        el.coordsize = zoom + S + zoom;\\n        el.coordorigin = vml.coordorigin;\\n        var p = new Element(el, vml),\\n            attr = {fill: \\\"none\\\", stroke: \\\"#000\\\"};\\n        pathString && (attr.path = pathString);\\n        p.type = \\\"path\\\";\\n        p.path = [];\\n        p.Path = E;\\n        setFillAndStroke(p, attr);\\n        vml.canvas.appendChild(el);\\n        var skew = createNode(\\\"skew\\\");\\n        skew.on = true;\\n        el.appendChild(skew);\\n        p.skew = skew;\\n        p.transform(E);\\n        return p;\\n    };\\n    R._engine.rect = function (vml, x, y, w, h, r) {\\n        var path = R._rectPath(x, y, w, h, r),\\n            res = vml.path(path),\\n            a = res.attrs;\\n        res.X = a.x = x;\\n        res.Y = a.y = y;\\n        res.W = a.width = w;\\n        res.H = a.height = h;\\n        a.r = r;\\n        a.path = path;\\n        res.type = \\\"rect\\\";\\n        return res;\\n    };\\n    R._engine.ellipse = function (vml, x, y, rx, ry) {\\n        var res = vml.path(),\\n            a = res.attrs;\\n        res.X = x - rx;\\n        res.Y = y - ry;\\n        res.W = rx * 2;\\n        res.H = ry * 2;\\n        res.type = \\\"ellipse\\\";\\n        setFillAndStroke(res, {\\n            cx: x,\\n            cy: y,\\n            rx: rx,\\n            ry: ry\\n        });\\n        return res;\\n    };\\n    R._engine.circle = function (vml, x, y, r) {\\n        var res = vml.path(),\\n            a = res.attrs;\\n        res.X = x - r;\\n        res.Y = y - r;\\n        res.W = res.H = r * 2;\\n        res.type = \\\"circle\\\";\\n        setFillAndStroke(res, {\\n            cx: x,\\n            cy: y,\\n            r: r\\n        });\\n        return res;\\n    };\\n    R._engine.image = function (vml, src, x, y, w, h) {\\n        var path = R._rectPath(x, y, w, h),\\n            res = vml.path(path).attr({stroke: \\\"none\\\"}),\\n            a = res.attrs,\\n            node = res.node,\\n            fill = node.getElementsByTagName(fillString)[0];\\n        a.src = src;\\n        res.X = a.x = x;\\n        res.Y = a.y = y;\\n        res.W = a.width = w;\\n        res.H = a.height = h;\\n        a.path = path;\\n        res.type = \\\"image\\\";\\n        fill.parentNode == node && node.removeChild(fill);\\n        fill.rotate = true;\\n        fill.src = src;\\n        fill.type = \\\"tile\\\";\\n        res._.fillpos = [x, y];\\n        res._.fillsize = [w, h];\\n        node.appendChild(fill);\\n        setCoords(res, 1, 1, 0, 0, 0);\\n        return res;\\n    };\\n    R._engine.text = function (vml, x, y, text) {\\n        var el = createNode(\\\"shape\\\"),\\n            path = createNode(\\\"path\\\"),\\n            o = createNode(\\\"textpath\\\");\\n        x = x || 0;\\n        y = y || 0;\\n        text = text || \\\"\\\";\\n        path.v = R.format(\\\"m{0},{1}l{2},{1}\\\", round(x * zoom), round(y * zoom), round(x * zoom) + 1);\\n        path.textpathok = true;\\n        o.string = Str(text);\\n        o.on = true;\\n        el.style.cssText = cssDot;\\n        el.coordsize = zoom + S + zoom;\\n        el.coordorigin = \\\"0 0\\\";\\n        var p = new Element(el, vml),\\n            attr = {\\n                fill: \\\"#000\\\",\\n                stroke: \\\"none\\\",\\n                font: R._availableAttrs.font,\\n                text: text\\n            };\\n        p.shape = el;\\n        p.path = path;\\n        p.textpath = o;\\n        p.type = \\\"text\\\";\\n        p.attrs.text = Str(text);\\n        p.attrs.x = x;\\n        p.attrs.y = y;\\n        p.attrs.w = 1;\\n        p.attrs.h = 1;\\n        setFillAndStroke(p, attr);\\n        el.appendChild(o);\\n        el.appendChild(path);\\n        vml.canvas.appendChild(el);\\n        var skew = createNode(\\\"skew\\\");\\n        skew.on = true;\\n        el.appendChild(skew);\\n        p.skew = skew;\\n        p.transform(E);\\n        return p;\\n    };\\n    R._engine.setSize = function (width, height) {\\n        var cs = this.canvas.style;\\n        this.width = width;\\n        this.height = height;\\n        width == +width && (width += \\\"px\\\");\\n        height == +height && (height += \\\"px\\\");\\n        cs.width = width;\\n        cs.height = height;\\n        cs.clip = \\\"rect(0 \\\" + width + \\\" \\\" + height + \\\" 0)\\\";\\n        if (this._viewBox) {\\n            R._engine.setViewBox.apply(this, this._viewBox);\\n        }\\n        return this;\\n    };\\n    R._engine.setViewBox = function (x, y, w, h, fit) {\\n        R.eve(\\\"raphael.setViewBox\\\", this, this._viewBox, [x, y, w, h, fit]);\\n        var paperSize = this.getSize(),\\n            width = paperSize.width,\\n            height = paperSize.height,\\n            H, W;\\n        if (fit) {\\n            H = height / h;\\n            W = width / w;\\n            if (w * H < width) {\\n                x -= (width - w * H) / 2 / H;\\n            }\\n            if (h * W < height) {\\n                y -= (height - h * W) / 2 / W;\\n            }\\n        }\\n        this._viewBox = [x, y, w, h, !!fit];\\n        this._viewBoxShift = {\\n            dx: -x,\\n            dy: -y,\\n            scale: paperSize\\n        };\\n        this.forEach(function (el) {\\n            el.transform(\\\"...\\\");\\n        });\\n        return this;\\n    };\\n    var createNode;\\n    R._engine.initWin = function (win) {\\n        var doc = win.document;\\n        if (doc.styleSheets.length < 31) {\\n            doc.createStyleSheet().addRule(\\\".rvml\\\", \\\"behavior:url(#default#VML)\\\");\\n        } else {\\n            // no more room, add to the existing one\\n            // http://msdn.microsoft.com/en-us/library/ms531194%28VS.85%29.aspx\\n            doc.styleSheets[0].addRule(\\\".rvml\\\", \\\"behavior:url(#default#VML)\\\");\\n        }\\n        try {\\n            !doc.namespaces.rvml && doc.namespaces.add(\\\"rvml\\\", \\\"urn:schemas-microsoft-com:vml\\\");\\n            createNode = function (tagName) {\\n                return doc.createElement('<rvml:' + tagName + ' class=\\\"rvml\\\">');\\n            };\\n        } catch (e) {\\n            createNode = function (tagName) {\\n                return doc.createElement('<' + tagName + ' xmlns=\\\"urn:schemas-microsoft.com:vml\\\" class=\\\"rvml\\\">');\\n            };\\n        }\\n    };\\n    R._engine.initWin(R._g.win);\\n    R._engine.create = function () {\\n        var con = R._getContainer.apply(0, arguments),\\n            container = con.container,\\n            height = con.height,\\n            s,\\n            width = con.width,\\n            x = con.x,\\n            y = con.y;\\n        if (!container) {\\n            throw new Error(\\\"VML container not found.\\\");\\n        }\\n        var res = new R._Paper,\\n            c = res.canvas = R._g.doc.createElement(\\\"div\\\"),\\n            cs = c.style;\\n        x = x || 0;\\n        y = y || 0;\\n        width = width || 512;\\n        height = height || 342;\\n        res.width = width;\\n        res.height = height;\\n        width == +width && (width += \\\"px\\\");\\n        height == +height && (height += \\\"px\\\");\\n        res.coordsize = zoom * 1e3 + S + zoom * 1e3;\\n        res.coordorigin = \\\"0 0\\\";\\n        res.span = R._g.doc.createElement(\\\"span\\\");\\n        res.span.style.cssText = \\\"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;\\\";\\n        c.appendChild(res.span);\\n        cs.cssText = R.format(\\\"top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden\\\", width, height);\\n        if (container == 1) {\\n            R._g.doc.body.appendChild(c);\\n            cs.left = x + \\\"px\\\";\\n            cs.top = y + \\\"px\\\";\\n            cs.position = \\\"absolute\\\";\\n        } else {\\n            if (container.firstChild) {\\n                container.insertBefore(c, container.firstChild);\\n            } else {\\n                container.appendChild(c);\\n            }\\n        }\\n        res.renderfix = function () {};\\n        return res;\\n    };\\n    R.prototype.clear = function () {\\n        R.eve(\\\"raphael.clear\\\", this);\\n        this.canvas.innerHTML = E;\\n        this.span = R._g.doc.createElement(\\\"span\\\");\\n        this.span.style.cssText = \\\"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;\\\";\\n        this.canvas.appendChild(this.span);\\n        this.bottom = this.top = null;\\n    };\\n    R.prototype.remove = function () {\\n        R.eve(\\\"raphael.remove\\\", this);\\n        this.canvas.parentNode.removeChild(this.canvas);\\n        for (var i in this) {\\n            this[i] = typeof this[i] == \\\"function\\\" ? R._removedFactory(i) : null;\\n        }\\n        return true;\\n    };\\n\\n    var setproto = R.st;\\n    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {\\n        setproto[method] = (function (methodname) {\\n            return function () {\\n                var arg = arguments;\\n                return this.forEach(function (el) {\\n                    el[methodname].apply(el, arg);\\n                });\\n            };\\n        })(method);\\n    }\\n}));\\n\\n// ┌────────────────────────────────────────────────────────────────────┐ \\\\\\\\\\n// │ Raphaël @VERSION - JavaScript Vector Library                       │ \\\\\\\\\\n// ├────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ Copyright © 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    │ \\\\\\\\\\n// │ Copyright © 2008-2012 Sencha Labs (http://sencha.com)              │ \\\\\\\\\\n// ├────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\n// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\\\\\\\\\n// └────────────────────────────────────────────────────────────────────┘ \\\\\\\\\\n\\n(function (glob, factory) {\\n    if (typeof define === \\\"function\\\" && define.amd) {\\n        define(\\\"raphael\\\", [\\\"raphael.core\\\", \\\"raphael.svg\\\", \\\"raphael.vml\\\"], function(Raphael) {\\n            return (glob.Raphael = factory(Raphael));\\n        });\\n    } else if (typeof exports === \\\"object\\\") {\\n        var raphael = require(\\\"raphael.core\\\");\\n\\n        require(\\\"raphael.svg\\\");\\n        require(\\\"raphael.vml\\\");\\n\\n        module.exports = factory(raphael);\\n    } else {\\n        glob.Raphael = factory(glob.Raphael);\\n    }\\n}(this, function (Raphael) {\\n    return Raphael.ninja();\\n}));\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n/**\\n * FRaphael\\n * \\tAn extension for Raphael.js to make it easier to work with Filter Effects\\n *\\n * Copyright © 2013 Chris Scott <chris.scott@factmint.com>\\n * Delivered with and licensed under the MIT licence\\n *\\n */\\n\\n// Create the global FRaphael object\\n(function(scope) {\\n    var\\tversion = \\\"0.0.1\\\",\\n        license = \\\"MIT\\\";\\n\\n    var\\tns = \\\"http://www.w3.org/2000/svg\\\",\\n        idCounter = 0;\\n\\n    var FR = {\\n        // Object prototype for a filter\\n        Filter: function(id) {\\n            if (id == undefined) {\\n                id = \\\"filter-\\\" + idCounter++;\\n                while(FR.filters[id] != undefined) {\\n                    id = \\\"filter-\\\" + idCounter++;\\n                }\\n            }\\n\\n            if (FR.filters[id] != undefined) {\\n                throw \\\"A filter with id \\\" + id + \\\" already exists\\\";\\n            }\\n\\n            this.element = document.createElementNS(ns, \\\"filter\\\");\\n            this.element.setAttribute(\\\"id\\\", id);\\n            this.element.setAttribute(\\\"x\\\", \\\"-25%\\\");\\n            this.element.setAttribute(\\\"y\\\", \\\"-25%\\\");\\n            this.element.setAttribute(\\\"width\\\", \\\"150%\\\");\\n            this.element.setAttribute(\\\"height\\\", \\\"150%\\\");\\n\\n            this.lastFEResult = null;\\n\\n            FR.filters[id] = this;\\n            this.id = id;\\n        },\\n\\n        // Object prototype for an effect\\n        FilterEffect: function(type, attributes) {\\n            this.element = document.createElementNS(ns, type);\\n            for (var key in attributes) {\\n                this.element.setAttribute(key, attributes[key]);\\n            }\\n        },\\n\\n        // Return the filter applied to an element or a new filter if none are currently applied\\n        getFilter: function(element) {\\n            var filterId = element.data(\\\"filterId\\\");\\n            var filter = null;\\n\\n            if (filterId == undefined) {\\n                filterId = \\\"element-filter-\\\" + element.id;\\n                filter = element.paper.createFilter(filterId);\\n                element.filter(filterId);\\n            } else {\\n                filter = FR.filters[filterId];\\n            }\\n\\n            return filter;\\n        },\\n\\n        // maintain a list of filters by id\\n        filters: {}\\n    };\\n\\n    FR.Filter.prototype = {\\n        addEffect: function(type, attributes, children) {\\n            var effect = new FR.FilterEffect(type, attributes);\\n\\n            if (children) {\\n                if (children instanceof Array) {\\n                    for (var x in children) {\\n                        if (!children.hasOwnProperty(x)) continue;\\n\\n                        effect.element.appendChild(children[x].element);\\n                    }\\n                } else {\\n                    effect.element.appendChild(children.element);\\n                }\\n            }\\n\\n            this.element.appendChild(effect.element);\\n\\n            return this;\\n        },\\n\\n        chainEffect: function(type, attributes, children) {\\n            if (attributes == undefined) {\\n                attributes = {};\\n            }\\n\\n            var inId;\\n            var outId;\\n            if (attributes.in == undefined) {\\n                inId = this.getLastResult();\\n            } else {\\n                inId = attributes.in;\\n            }\\n            if (attributes.result == undefined) {\\n                outId = idCounter++;\\n            } else {\\n                outId = attributes.result;\\n            }\\n\\n            this.lastFEResult = outId;\\n\\n            attributes.in = inId;\\n            attributes.result = outId;\\n\\n            this.addEffect(type, attributes, children);\\n\\n            return this;\\n        },\\n\\n        getLastResult: function() {\\n            return (this.lastFEResult == undefined) ? \\\"SourceGraphic\\\" : this.lastFEResult;\\n        },\\n\\n        merge: function(in1, in2, attributes) {\\n            var mergeNode1 = new FR.FilterEffect(\\\"feMergeNode\\\", {\\n                in: in1\\n            });\\n            var mergeNode2 = new FR.FilterEffect(\\\"feMergeNode\\\", {\\n                in: in2\\n            });\\n\\n            this.chainEffect(\\\"feMerge\\\", attributes, [mergeNode1, mergeNode2]);\\n\\n            return this;\\n        },\\n\\n        compose: function(in1, in2, operator, attributes) {\\n            if (attributes == undefined) {\\n                attributes = {};\\n            }\\n\\n            if (operator == undefined) {\\n                operator = \\\"over\\\";\\n            }\\n\\n            attributes.in = in1;\\n            attributes.in2 = in2;\\n            attributes.operator = operator;\\n\\n            this.chainEffect(\\\"feComposite\\\", attributes);\\n\\n            return this;\\n        },\\n\\n        arithmeticCompose: function(in1, in2, k1, k2, k3, k4) {\\n            if (k1 == undefined) {\\n                k1 = 0;\\n            }\\n            if (k2 == undefined) {\\n                k2 = 0;\\n            }\\n            if (k3 == undefined) {\\n                k3 = 0;\\n            }\\n            if (k4 == undefined) {\\n                k4 = 0;\\n            }\\n\\n            this.compose(in1, in2, \\\"arithmetic\\\", {\\n                k1: k1,\\n                k2: k2,\\n                k3: k3,\\n                k4: k4\\n            });\\n\\n            return this;\\n        },\\n\\n        addBlur: function(stdDeviation, attributes) {\\n            if (!stdDeviation) {\\n                throw \\\"Standard deviation is required to perform a blur filter\\\";\\n            }\\n\\n            if (attributes == undefined) {\\n                attributes = {};\\n            }\\n            attributes.stdDeviation = stdDeviation;\\n\\n            this.chainEffect(\\\"feGaussianBlur\\\", attributes);\\n\\n            return this;\\n        },\\n\\n        addOffset: function(dx, dy, attributes) {\\n            if (dx == undefined | dy == undefined) {\\n                throw \\\"dx and dy values are required to perform an offset FE\\\";\\n            }\\n\\n            if (attributes == undefined) {\\n                attributes = {};\\n            }\\n            attributes.dx = dx;\\n            attributes.dy = dy;\\n\\n            this.chainEffect(\\\"feOffset\\\", attributes);\\n\\n            return this;\\n        },\\n\\n        addLighting: function(x, y, z, color, type, attributes) {\\n            if (x == undefined | y == undefined | z == undefined) {\\n                throw \\\"Three co-ordinates are required to create a light source\\\";\\n            }\\n\\n            var previousResult = this.getLastResult();\\n\\n            var id = idCounter++;\\n\\n            if (attributes == undefined) {\\n                attributes = {};\\n            }\\n\\n            attributes.result = id;\\n            if (color != undefined) {\\n                attributes[\\\"lighting-color\\\"] = color;\\n            }\\n\\n            if (type == undefined || type == \\\"diffuse\\\") {\\n                type = \\\"feDiffuseLighting\\\";\\n            } else if (type == \\\"specular\\\") {\\n                type = \\\"feSpecularLighting\\\";\\n            }\\n\\n            var lightSource = new FR.FilterEffect(\\\"fePointLight\\\", {\\n                x: x,\\n                y: y,\\n                z: z\\n            });\\n\\n            this.chainEffect(type, attributes, lightSource).arithmeticCompose(previousResult, id, 3, 0.2, 0, 0);\\n\\n            return this;\\n        },\\n\\n        addShiftToColor: function(color, moveBy, attributes) {\\n            if (color == undefined) {\\n                throw \\\"A colour string is a required argument to create a colorMatrix\\\";\\n            }\\n            if (moveBy == undefined) {\\n                moveBy = 0.5;\\n            }\\n\\n            var remainingColor = 1 - moveBy, x = remainingColor;\\n\\n            if (attributes == undefined) {\\n                attributes = {};\\n            }\\n\\n            var colorObject = Raphael.color(color);\\n            var\\tr = colorObject.r * moveBy / 255,\\n                g = colorObject.g * moveBy / 255,\\n                b = colorObject.b * moveBy / 255;\\n\\n            /**\\n             * r'\\tx 0 0 0 r\\t\\tr\\n             * g'\\t0 x 0 0 g\\t\\tg\\n             * b' =\\t0 0 x 0 b\\t.\\tb\\n             * a'\\t0 0 0 1 0\\t\\to\\n             * 1\\t\\t\\t\\t\\t1\\n             */\\n            attributes.values = x + \\\" 0 0 0 \\\" + r + \\\" 0 \\\" + x + \\\" 0 0 \\\" + g + \\\" 0 0 \\\" + x + \\\" 0 \\\" + b + \\\" 0 0 0 1 0 \\\";\\n\\n            this.chainEffect(\\\"feColorMatrix\\\", attributes);\\n\\n            return this;\\n        },\\n\\n        addRecolor: function(color, opacity, attributes) {\\n            if (color == undefined) {\\n                throw \\\"A colour string is a required argument to create a colorMatrix\\\";\\n            }\\n            if (opacity == undefined) {\\n                opacity = 1;\\n            }\\n\\n            if (attributes == undefined) {\\n                attributes = {};\\n            }\\n\\n            var colorObject = Raphael.color(color);\\n            var\\tr = colorObject.r / 255,\\n                g = colorObject.g / 255,\\n                b = colorObject.b / 255;\\n\\n            /**\\n             * r'\\t0 0 0 0 r\\t\\tr\\n             * g'\\t0 0 0 0 g\\t\\tg\\n             * b' =\\t0 0 0 0 b\\t.\\tb\\n             * a'\\t0 0 0 a 0\\t\\ta\\n             * 1\\t\\t\\t\\t\\t1\\n             */\\n            attributes.values = \\\"0 0 0 0 \\\" + r + \\\" 0 0 0 0 \\\" + g + \\\" 0 0 0 0 \\\" + b + \\\" 0 0 0 \\\" + opacity + \\\" 0 \\\";\\n\\n            this.chainEffect(\\\"feColorMatrix\\\", attributes);\\n\\n            return this;\\n        },\\n\\n        addDesaturate: function(saturation, attributes) {\\n            if (saturation == undefined) {\\n                saturnation = 0;\\n            }\\n\\n            if (attributes == undefined) {\\n                attributes = {};\\n            }\\n\\n            attributes.values = saturation;\\n            attributes.type = \\\"saturate\\\";\\n\\n            this.chainEffect(\\\"feColorMatrix\\\", attributes);\\n\\n            return this;\\n        },\\n\\n        addConvolveMatrix: function(matrix, attributes) {\\n            if (matrix == undefined) {\\n                throw \\\"A matrix (usually 9 numbers) must be provided to apply a convolve matrix transform\\\";\\n            }\\n\\n            if (attributes == undefined) {\\n                attributes = {};\\n            }\\n\\n            attributes.kernelMatrix = matrix;\\n\\n            this.chainEffect(\\\"feConvolveMatrix\\\", attributes);\\n\\n            return this;\\n        },\\n\\n        createShadow: function(dx, dy, blur, opacity, color) {\\n            if (dx == undefined) {\\n                throw \\\"dx is required for the shadow effect\\\";\\n            }\\n            if (dy == undefined) {\\n                throw \\\"dy is required for the shadow effect\\\";\\n            }\\n            if (blur == undefined) {\\n                throw \\\"blur (stdDeviation) is required for the shadow effect\\\";\\n            }\\n\\n            if (opacity == undefined) {\\n                opacity = 0.6;\\n            }\\n\\n            var previousResult = this.getLastResult();\\n\\n            if (color == undefined) {\\n                color = \\\"#000000\\\";\\n            }\\n\\n            this.addOffset(dx, dy, {\\n                in: \\\"SourceAlpha\\\"\\n            });\\n\\n            this.addRecolor(color, opacity);\\n\\n            this.addBlur(blur);\\n\\n            this.merge(this.getLastResult(), previousResult);\\n\\n            return this;\\n        },\\n\\n        createEmboss: function(height, x, y, z) {\\n            if (height == undefined) {\\n                height = 2;\\n            }\\n            if (x == undefined) {\\n                x = -1000;\\n            }\\n            if (y == undefined) {\\n                y = -5000;\\n            }\\n            if (z == undefined) {\\n                z = 300;\\n            }\\n\\n            // Create the highlight\\n\\n            this.addOffset(height * x / (x + y), height * y / (x + y), {\\n                in: \\\"SourceAlpha\\\"\\n            });\\n\\n            this.addBlur(height * 0.5);\\n\\n            var whiteLightSource = new FR.FilterEffect(\\\"fePointLight\\\", {\\n                x: x,\\n                y: y,\\n                z: z\\n            });\\n\\n            this.chainEffect(\\\"feSpecularLighting\\\", {\\n                surfaceScale: height,\\n                specularConstant: 0.8,\\n                specularExponent: 15\\n            }, whiteLightSource);\\n\\n            this.compose(this.getLastResult(), \\\"SourceAlpha\\\", \\\"in\\\");\\n            var whiteLight = this.getLastResult();\\n\\n            // Create the lowlight\\n\\n            this.addOffset(height * -1 * x / (x + y), height * -1 * y / (x + y), {\\n                in: \\\"SourceAlpha\\\"\\n            });\\n\\n            this.addBlur(height * 0.5);\\n\\n            var darkLightSource = new FR.FilterEffect(\\\"fePointLight\\\", {\\n                x: -1 * x,\\n                y: -1 * y,\\n                z:      z\\n            });\\n\\n            this.chainEffect(\\\"feSpecularLighting\\\", {\\n                surfaceScale: height,\\n                specularConstant: 1.8,\\n                specularExponent: 6\\n            }, darkLightSource);\\n\\n            this.compose(this.getLastResult(), \\\"SourceAlpha\\\", \\\"in\\\");\\n            this.chainEffect(\\\"feColorMatrix\\\", {\\n                values: \\\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0\\\"\\n            });\\n            var darkLight = this.getLastResult();\\n\\n            this.arithmeticCompose(whiteLight, darkLight, 0, 0.8, 0.5, 0);\\n\\n            this.merge(\\\"SourceGraphic\\\", this.getLastResult());\\n\\n            return this;\\n        }\\n    };\\n\\n    scope.FRaphael = FR;\\n})(this);\\n\\n/**\\n * add a filter to the paper by id\\n */\\nRaphael.fn.createFilter = function(id) {\\n    var paper = this;\\n    var filter = new FRaphael.Filter(id);\\n    paper.defs.appendChild(filter.element);\\n\\n    return filter;\\n};\\n\\n/**\\n * Apply a filter to an element by id\\n */\\nRaphael.el.filter = function(filter) {\\n    var id = (filter instanceof FRaphael.Filter) ? filter.id : filter;\\n\\n    this.node.setAttribute(\\\"filter\\\", \\\"url(#\\\" + id + \\\")\\\");\\n    this.data(\\\"filterId\\\", id);\\n\\n    return this;\\n};\\n\\n/**\\n * Get the current filter for an element or a new one if not\\n */\\nRaphael.el.getFilter = function() {\\n    return FRaphael.getFilter(this);\\n};\\n\\n/**\\n * A shorthand method for applying blur\\n */\\nRaphael.el.blur = function(stdDeviation) {\\n    if (stdDeviation == undefined) {\\n        stdDeviation = 3;\\n    }\\n\\n    this.getFilter().addBlur(stdDeviation);\\n\\n    return this;\\n};\\n\\n/**\\n * A shorthand method for applying a drop shadow\\n */\\nRaphael.el.shadow = function(dx, dy, blur, opacity, color) {\\n    if (dx == undefined) {\\n        dx = 3;\\n    }\\n    if (dy == undefined) {\\n        dy = 3;\\n    }\\n    if (blur == undefined) {\\n        blur = 3;\\n    }\\n\\n    this.getFilter().createShadow(dx, dy, blur, opacity, color);\\n\\n    return this;\\n};\\n\\n/**\\n * A shorthand method for applying lighting\\n */\\nRaphael.el.light = function(x, y, z, color, type) {\\n    if (x == undefined) {\\n        x = this.paper.width;\\n    }\\n    if (y == undefined) {\\n        y = 0;\\n    }\\n    if (z == undefined) {\\n        z = 20;\\n    }\\n\\n    this.getFilter().addLighting(x, y, z, color, type);\\n\\n    return this;\\n};\\n\\n/**\\n * A shorthand method for applying a colour shift\\n */\\nRaphael.el.colorShift = function(color, shift) {\\n    if (color == undefined) {\\n        color = \\\"black\\\";\\n    }\\n    if (shift == undefined) {\\n        shift = 0.5;\\n    }\\n\\n    this.getFilter().addShiftToColor(color, shift);\\n\\n    return this;\\n};\\n\\n/**\\n * A shorthand method for embossing\\n */\\nRaphael.el.emboss = function(height) {\\n    this.getFilter().createEmboss(height);\\n\\n    return this;\\n};\\n\\n/**\\n * A shorthand method for desaturating\\n */\\nRaphael.el.desaturate = function(saturation) {\\n    this.getFilter().addDesaturate(saturation);\\n\\n    return this;\\n};\\n\\n/**\\n * A shorthand method for complete desaturation\\n */\\nRaphael.el.greyScale = function() {\\n    this.getFilter().addDesaturate(0);\\n\\n    return this;\\n};\\n\"","/*\n\tBased on rgbcolor.js by Stoyan Stefanov <sstoo@gmail.com>\n\thttp://www.phpied.com/rgb-color-parser-in-javascript/\n*/\n\nmodule.exports = function(color_string) {\n    this.ok = false;\n    this.alpha = 1.0;\n\n    // strip any leading #\n    if (color_string.charAt(0) == '#') { // remove # if any\n        color_string = color_string.substr(1,6);\n    }\n\n    color_string = color_string.replace(/ /g,'');\n    color_string = color_string.toLowerCase();\n\n    // before getting into regexps, try simple matches\n    // and overwrite the input\n    var simple_colors = {\n        aliceblue: 'f0f8ff',\n        antiquewhite: 'faebd7',\n        aqua: '00ffff',\n        aquamarine: '7fffd4',\n        azure: 'f0ffff',\n        beige: 'f5f5dc',\n        bisque: 'ffe4c4',\n        black: '000000',\n        blanchedalmond: 'ffebcd',\n        blue: '0000ff',\n        blueviolet: '8a2be2',\n        brown: 'a52a2a',\n        burlywood: 'deb887',\n        cadetblue: '5f9ea0',\n        chartreuse: '7fff00',\n        chocolate: 'd2691e',\n        coral: 'ff7f50',\n        cornflowerblue: '6495ed',\n        cornsilk: 'fff8dc',\n        crimson: 'dc143c',\n        cyan: '00ffff',\n        darkblue: '00008b',\n        darkcyan: '008b8b',\n        darkgoldenrod: 'b8860b',\n        darkgray: 'a9a9a9',\n        darkgreen: '006400',\n        darkkhaki: 'bdb76b',\n        darkmagenta: '8b008b',\n        darkolivegreen: '556b2f',\n        darkorange: 'ff8c00',\n        darkorchid: '9932cc',\n        darkred: '8b0000',\n        darksalmon: 'e9967a',\n        darkseagreen: '8fbc8f',\n        darkslateblue: '483d8b',\n        darkslategray: '2f4f4f',\n        darkturquoise: '00ced1',\n        darkviolet: '9400d3',\n        deeppink: 'ff1493',\n        deepskyblue: '00bfff',\n        dimgray: '696969',\n        dodgerblue: '1e90ff',\n        feldspar: 'd19275',\n        firebrick: 'b22222',\n        floralwhite: 'fffaf0',\n        forestgreen: '228b22',\n        fuchsia: 'ff00ff',\n        gainsboro: 'dcdcdc',\n        ghostwhite: 'f8f8ff',\n        gold: 'ffd700',\n        goldenrod: 'daa520',\n        gray: '808080',\n        green: '008000',\n        greenyellow: 'adff2f',\n        honeydew: 'f0fff0',\n        hotpink: 'ff69b4',\n        indianred : 'cd5c5c',\n        indigo : '4b0082',\n        ivory: 'fffff0',\n        khaki: 'f0e68c',\n        lavender: 'e6e6fa',\n        lavenderblush: 'fff0f5',\n        lawngreen: '7cfc00',\n        lemonchiffon: 'fffacd',\n        lightblue: 'add8e6',\n        lightcoral: 'f08080',\n        lightcyan: 'e0ffff',\n        lightgoldenrodyellow: 'fafad2',\n        lightgrey: 'd3d3d3',\n        lightgreen: '90ee90',\n        lightpink: 'ffb6c1',\n        lightsalmon: 'ffa07a',\n        lightseagreen: '20b2aa',\n        lightskyblue: '87cefa',\n        lightslateblue: '8470ff',\n        lightslategray: '778899',\n        lightsteelblue: 'b0c4de',\n        lightyellow: 'ffffe0',\n        lime: '00ff00',\n        limegreen: '32cd32',\n        linen: 'faf0e6',\n        magenta: 'ff00ff',\n        maroon: '800000',\n        mediumaquamarine: '66cdaa',\n        mediumblue: '0000cd',\n        mediumorchid: 'ba55d3',\n        mediumpurple: '9370d8',\n        mediumseagreen: '3cb371',\n        mediumslateblue: '7b68ee',\n        mediumspringgreen: '00fa9a',\n        mediumturquoise: '48d1cc',\n        mediumvioletred: 'c71585',\n        midnightblue: '191970',\n        mintcream: 'f5fffa',\n        mistyrose: 'ffe4e1',\n        moccasin: 'ffe4b5',\n        navajowhite: 'ffdead',\n        navy: '000080',\n        oldlace: 'fdf5e6',\n        olive: '808000',\n        olivedrab: '6b8e23',\n        orange: 'ffa500',\n        orangered: 'ff4500',\n        orchid: 'da70d6',\n        palegoldenrod: 'eee8aa',\n        palegreen: '98fb98',\n        paleturquoise: 'afeeee',\n        palevioletred: 'd87093',\n        papayawhip: 'ffefd5',\n        peachpuff: 'ffdab9',\n        peru: 'cd853f',\n        pink: 'ffc0cb',\n        plum: 'dda0dd',\n        powderblue: 'b0e0e6',\n        purple: '800080',\n        red: 'ff0000',\n        rosybrown: 'bc8f8f',\n        royalblue: '4169e1',\n        saddlebrown: '8b4513',\n        salmon: 'fa8072',\n        sandybrown: 'f4a460',\n        seagreen: '2e8b57',\n        seashell: 'fff5ee',\n        sienna: 'a0522d',\n        silver: 'c0c0c0',\n        skyblue: '87ceeb',\n        slateblue: '6a5acd',\n        slategray: '708090',\n        snow: 'fffafa',\n        springgreen: '00ff7f',\n        steelblue: '4682b4',\n        tan: 'd2b48c',\n        teal: '008080',\n        thistle: 'd8bfd8',\n        tomato: 'ff6347',\n        turquoise: '40e0d0',\n        violet: 'ee82ee',\n        violetred: 'd02090',\n        wheat: 'f5deb3',\n        white: 'ffffff',\n        whitesmoke: 'f5f5f5',\n        yellow: 'ffff00',\n        yellowgreen: '9acd32'\n    };\n    color_string = simple_colors[color_string] || color_string;\n    // emd of simple type-in colors\n\n    // array of color definition objects\n    var color_defs = [\n        {\n            re: /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*((?:\\d?\\.)?\\d)\\)$/,\n            example: ['rgba(123, 234, 45, 0.8)', 'rgba(255,234,245,1.0)'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1]),\n                    parseInt(bits[2]),\n                    parseInt(bits[3]),\n                    parseFloat(bits[4])\n                ];\n            }\n        },\n        {\n            re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n            example: ['rgb(123, 234, 45)', 'rgb(255,234,245)'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1]),\n                    parseInt(bits[2]),\n                    parseInt(bits[3])\n                ];\n            }\n        },\n        {\n            re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n            example: ['#00ff00', '336699'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1], 16),\n                    parseInt(bits[2], 16),\n                    parseInt(bits[3], 16)\n                ];\n            }\n        },\n        {\n            re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n            example: ['#fb0', 'f0f'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1] + bits[1], 16),\n                    parseInt(bits[2] + bits[2], 16),\n                    parseInt(bits[3] + bits[3], 16)\n                ];\n            }\n        }\n    ];\n\n    // search through the definitions to find a match\n    for (var i = 0; i < color_defs.length; i++) {\n        var re = color_defs[i].re;\n        var processor = color_defs[i].process;\n        var bits = re.exec(color_string);\n        if (bits) {\n            var channels = processor(bits);\n            this.r = channels[0];\n            this.g = channels[1];\n            this.b = channels[2];\n            if (channels.length > 3) {\n                this.alpha = channels[3];\n            }\n            this.ok = true;\n        }\n\n    }\n\n    // validate/cleanup values\n    this.r = (this.r < 0 || isNaN(this.r)) ? 0 : ((this.r > 255) ? 255 : this.r);\n    this.g = (this.g < 0 || isNaN(this.g)) ? 0 : ((this.g > 255) ? 255 : this.g);\n    this.b = (this.b < 0 || isNaN(this.b)) ? 0 : ((this.b > 255) ? 255 : this.b);\n    this.alpha = (this.alpha < 0) ? 0 : ((this.alpha > 1.0 || isNaN(this.alpha)) ? 1.0 : this.alpha);\n\n    // some getters\n    this.toRGB = function () {\n        return 'rgb(' + this.r + ', ' + this.g + ', ' + this.b + ')';\n    }\n    this.toRGBA = function () {\n        return 'rgba(' + this.r + ', ' + this.g + ', ' + this.b + ', ' + this.alpha + ')';\n    }\n    this.toHex = function () {\n        var r = this.r.toString(16);\n        var g = this.g.toString(16);\n        var b = this.b.toString(16);\n        if (r.length == 1) r = '0' + r;\n        if (g.length == 1) g = '0' + g;\n        if (b.length == 1) b = '0' + b;\n        return '#' + r + g + b;\n    }\n\n    // help\n    this.getHelpXML = function () {\n\n        var examples = new Array();\n        // add regexps\n        for (var i = 0; i < color_defs.length; i++) {\n            var example = color_defs[i].example;\n            for (var j = 0; j < example.length; j++) {\n                examples[examples.length] = example[j];\n            }\n        }\n        // add type-in colors\n        for (var sc in simple_colors) {\n            examples[examples.length] = sc;\n        }\n\n        var xml = document.createElement('ul');\n        xml.setAttribute('id', 'rgbcolor-examples');\n        for (var i = 0; i < examples.length; i++) {\n            try {\n                var list_item = document.createElement('li');\n                var list_color = new RGBColor(examples[i]);\n                var example_div = document.createElement('div');\n                example_div.style.cssText =\n                        'margin: 3px; '\n                        + 'border: 1px solid black; '\n                        + 'background:' + list_color.toHex() + '; '\n                        + 'color:' + list_color.toHex()\n                ;\n                example_div.appendChild(document.createTextNode('test'));\n                var list_item_value = document.createTextNode(\n                    ' ' + examples[i] + ' -> ' + list_color.toRGB() + ' -> ' + list_color.toHex()\n                );\n                list_item.appendChild(example_div);\n                list_item.appendChild(list_item_value);\n                xml.appendChild(list_item);\n\n            } catch(e){}\n        }\n        return xml;\n\n    }\n\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nmodule.exports = function(src) {\n\tfunction log(error) {\n\t\t(typeof console !== \"undefined\")\n\t\t&& (console.error || console.log)(\"[Script Loader]\", error);\n\t}\n\n\t// Check for IE =< 8\n\tfunction isIE() {\n\t\treturn typeof attachEvent !== \"undefined\" && typeof addEventListener === \"undefined\";\n\t}\n\n\ttry {\n\t\tif (typeof execScript !== \"undefined\" && isIE()) {\n\t\t\texecScript(src);\n\t\t} else if (typeof eval !== \"undefined\") {\n\t\t\teval.call(null, src);\n\t\t} else {\n\t\t\tlog(\"EvalError: No eval function available\");\n\t\t}\n\t} catch (error) {\n\t\tlog(error);\n\t}\n}\n","/*! 2.3.1 */\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"shifty\",[],e):\"object\"==typeof exports?exports.shifty=e():t.shifty=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"/assets/\",e(e.s=6)}([function(t,e,n){\"use strict\";(function(t){function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new j,n=e.tween(t);return n.tweenable=e,n}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Tweenable=e.composeEasingObject=e.tweenProps=e.clone=e.each=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t};e.tween=o;var c=n(5),s=r(c),f=n(1),h=function(t){return t&&t.__esModule?t:{default:t}}(f),l=n(7),p=r(l),d=\"undefined\"!=typeof window?window:t,m=d.cancelAnimationFrame||d.webkitCancelAnimationFrame||d.oCancelAnimationFrame||d.msCancelAnimationFrame||d.mozCancelRequestAnimationFrame||d.clearTimeout,_=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame||d.mozCancelRequestAnimationFrame&&d.mozRequestAnimationFrame||setTimeout,v=function(){},y=e.each=function(t,e){return Object.keys(t).forEach(e)},w=e.clone=function(t){return(0,h.default)({},t)},g=w(s),b=function(t,e,n,r){return t+(e-t)*n(r)},O=e.tweenProps=function(t,e,n,r,i,o,u){var a=t<o?0:(t-o)/i;return y(e,function(t){var i=u[t],o=\"function\"==typeof i?i:g[i];e[t]=b(n[t],r[t],o,a)}),e},M=e.composeEasingObject=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"linear\",n={},r=void 0===e?\"undefined\":a(e);return\"string\"===r||\"function\"===r?y(t,function(t){return n[t]=e}):y(t,function(t){return n[t]=n[t]||e[t]||\"linear\"}),n},j=e.Tweenable=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;i(this,t),this._currentState=e,this._configured=!1,this._scheduleFunction=_,void 0!==n&&this.setConfig(n)}return u(t,[{key:\"_applyFilter\",value:function(e){var n=this,r=t.filters,i=this._filterArgs;y(r,function(t){var o=r[t][e];void 0!==o&&o.apply(n,i)})}},{key:\"_timeoutHandler\",value:function(e){var n=this,r=arguments,i=this._currentState,o=this._delay,u=this._duration,a=this._step,c=this._targetState,s=this._timestamp,f=s+o+u,h=Math.min(e||t.now(),f),l=h>=f,p=u-(f-h);this.isPlaying()&&(l?(a(c,this._attachment,p),this.stop(!0)):(this._scheduleId=this._scheduleFunction.call(d,function(){return n._timeoutHandler.apply(n,r)},1e3/60),this._applyFilter(\"beforeTween\"),h<s+o?(h=1,u=1,s=1):s+=o,O(h,i,this._originalState,c,u,s,this._easing),this._applyFilter(\"afterTween\"),a(i,this._attachment,p)))}},{key:\"tween\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=this._attachment,r=this._configured;return this._isTweening?this:(void 0===e&&r||this.setConfig(e),this._timestamp=t.now(),this._start(this.get(),n),this.resume())}},{key:\"setConfig\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._configured=!0,this._attachment=e.attachment,(0,h.default)(this,{_pausedAtTime:null,_scheduleId:null,_delay:e.delay||0,_start:e.start||v,_step:e.step||v,_duration:e.duration||500,_currentState:w(e.from||this.get())}),(0,h.default)(this,{_originalState:this.get(),_targetState:w(e.to||this.get())});var n=this._currentState;this._targetState=(0,h.default)({},n,this._targetState),this._easing=M(n,e.easing),this._filterArgs=[n,this._originalState,this._targetState,this._easing],this._applyFilter(\"tweenCreated\");var r=e.promise||Promise;return this._promise=new r(function(e,n){t._resolve=e,t._reject=n}),this._promise.catch(v),this}},{key:\"get\",value:function(){return w(this._currentState)}},{key:\"set\",value:function(t){this._currentState=t}},{key:\"pause\",value:function(){return this._pausedAtTime=t.now(),this._isPaused=!0,this}},{key:\"resume\",value:function(){return this._isPaused&&(this._timestamp+=t.now()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this._promise}},{key:\"seek\",value:function(e){e=Math.max(e,0);var n=t.now();return this._timestamp+e===0?this:(this._timestamp=n-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,this._timeoutHandler(n),this.pause()),this)}},{key:\"stop\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._attachment,n=this._currentState,r=this._easing,i=this._originalState,o=this._targetState;return this._isTweening=!1,this._isPaused=!1,m(this._scheduleId),t?(this._applyFilter(\"beforeTween\"),O(1,n,i,o,1,0,r),this._applyFilter(\"afterTween\"),this._applyFilter(\"afterTweenEnd\"),this._resolve(n,e)):this._reject(n,e),this}},{key:\"isPlaying\",value:function(){return this._isTweening&&!this._isPaused}},{key:\"setScheduleFunction\",value:function(t){this._scheduleFunction=t}},{key:\"dispose\",value:function(){var t=this;y(this,function(e){return delete t[e]})}}]),t}();(0,h.default)(j,{formulas:g,filters:{token:p},now:Date.now||function(t){return+new Date}})}).call(e,n(4))},function(t,e,n){\"use strict\";function r(t){if(null===t||void 0===t)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(t)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String(\"abc\");if(t[5]=\"de\",\"5\"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e[\"_\"+String.fromCharCode(n)]=n;if(\"0123456789\"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(\"\"))return!1;var r={};return\"abcdefghijklmnopqrst\".split(\"\").forEach(function(t){r[t]=t}),\"abcdefghijklmnopqrst\"===Object.keys(Object.assign({},r)).join(\"\")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,c=r(t),s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var f in n)o.call(n,f)&&(c[f]=n[f]);if(i){a=i(n);for(var h=0;h<a.length;h++)u.call(n,a[h])&&(c[a[h]]=n[a[h]])}}return c}},function(t,e,n){\"use strict\";function r(t,e,n,r,i,o){var u=0,a=0,c=0,s=0,f=0,h=0,l=function(t){return((u*t+a)*t+c)*t},p=function(t){return((s*t+f)*t+h)*t},d=function(t){return(3*u*t+2*a)*t+c},m=function(t){return t>=0?t:0-t},_=function(t,e){var n=void 0,r=void 0,i=void 0,o=void 0,u=void 0,a=void 0;for(i=t,a=0;a<8;a++){if(o=l(i)-t,m(o)<e)return i;if(u=d(i),m(u)<1e-6)break;i-=o/u}if(n=0,r=1,(i=t)<n)return n;if(i>r)return r;for(;n<r;){if(o=l(i),m(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i};return c=3*e,a=3*(r-e)-c,u=1-c-a,h=3*n,f=3*(i-n)-h,s=1-h-f,function(t,e){return p(_(t,e))}(t,function(t){return 1/(200*t)}(o))}Object.defineProperty(e,\"__esModule\",{value:!0}),e.unsetBezierFunction=e.setBezierFunction=void 0;var i=n(0),o=n(1),u=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(t,e,n,i){return function(o){return r(o,t,e,n,i,1)}};e.setBezierFunction=function(t,e,n,r,o){return i.Tweenable.formulas[t]=(0,u.default)(a(e,n,r,o),{displayName:t,x1:e,y1:n,x2:r,y2:o})},e.unsetBezierFunction=function(t){return delete i.Tweenable.formulas[t]}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.interpolate=void 0;var r=n(0),i=new r.Tweenable;i._filterArgs=[];e.interpolate=function(t,e,n,o){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=(0,r.clone)(t),c=(0,r.composeEasingObject)(t,o);i.set({}),i._filterArgs=[a,t,e,c],i._applyFilter(\"tweenCreated\"),i._applyFilter(\"beforeTween\");var s=(0,r.tweenProps)(n,a,t,e,1,u,c);return i._applyFilter(\"afterTween\"),s}},function(t,e,n){\"use strict\";var r,i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t};r=function(){return this}();try{r=r||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"===(\"undefined\"==typeof window?\"undefined\":i(window))&&(r=window)}t.exports=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.linear=function(t){return t},e.easeInQuad=function(t){return Math.pow(t,2)},e.easeOutQuad=function(t){return-(Math.pow(t-1,2)-1)},e.easeInOutQuad=function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},e.easeInCubic=function(t){return Math.pow(t,3)},e.easeOutCubic=function(t){return Math.pow(t-1,3)+1},e.easeInOutCubic=function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},e.easeInQuart=function(t){return Math.pow(t,4)},e.easeOutQuart=function(t){return-(Math.pow(t-1,4)-1)},e.easeInOutQuart=function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},e.easeInQuint=function(t){return Math.pow(t,5)},e.easeOutQuint=function(t){return Math.pow(t-1,5)+1},e.easeInOutQuint=function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},e.easeInSine=function(t){return 1-Math.cos(t*(Math.PI/2))},e.easeOutSine=function(t){return Math.sin(t*(Math.PI/2))},e.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.easeInExpo=function(t){return 0===t?0:Math.pow(2,10*(t-1))},e.easeOutExpo=function(t){return 1===t?1:1-Math.pow(2,-10*t)},e.easeInOutExpo=function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},e.easeInCirc=function(t){return-(Math.sqrt(1-t*t)-1)},e.easeOutCirc=function(t){return Math.sqrt(1-Math.pow(t-1,2))},e.easeInOutCirc=function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.easeOutBounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.easeInBack=function(t){var e=1.70158;return t*t*((e+1)*t-e)},e.easeOutBack=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},e.easeInOutBack=function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},e.elastic=function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1},e.swingFromTo=function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},e.swingFrom=function(t){var e=1.70158;return t*t*((e+1)*t-e)},e.swingTo=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},e.bounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bouncePast=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},e.easeFromTo=function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},e.easeFrom=function(t){return Math.pow(t,4)},e.easeTo=function(t){return Math.pow(t,.25)}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(0);Object.defineProperty(e,\"Tweenable\",{enumerable:!0,get:function(){return r.Tweenable}}),Object.defineProperty(e,\"tween\",{enumerable:!0,get:function(){return r.tween}});var i=n(3);Object.defineProperty(e,\"interpolate\",{enumerable:!0,get:function(){return i.interpolate}});var o=n(2);Object.defineProperty(e,\"setBezierFunction\",{enumerable:!0,get:function(){return o.setBezierFunction}}),Object.defineProperty(e,\"unsetBezierFunction\",{enumerable:!0,get:function(){return o.unsetBezierFunction}})},function(t,e,n){\"use strict\";function r(t){return parseInt(t,16)}function i(t,e,n){[t,e,n].forEach(_),this._tokenData=g(t)}function o(t,e,n,r){var i=this._tokenData;P(r,i),[t,e,n].forEach(function(t){return b(t,i)})}function u(t,e,n,r){var i=this._tokenData;[t,e,n].forEach(function(t){return F(t,i)}),S(r,i)}Object.defineProperty(e,\"__esModule\",{value:!0}),e.tweenCreated=i,e.beforeTween=o,e.afterTween=u;var a=n(0),c=function(){var t=/[0-9.\\-]+/g.source,e=/,\\s*/.source;return new RegExp(\"rgb\\\\(\"+t+e+t+e+t+\"\\\\)\",\"g\")}(),s=/#([0-9]|[a-f]){3,6}/gi,f=function(t,e){return t.map(function(t,n){return\"_\"+e+\"_\"+n})},h=function(t){var e=t.match(/([^\\-0-9\\.]+)/g);return e?(1===e.length||t.charAt(0).match(/(\\d|\\-|\\.)/))&&e.unshift(\"\"):e=[\"\",\"\"],e.join(\"VAL\")},l=function(t){return t=t.replace(/#/,\"\"),3===t.length&&(t=t.split(\"\"),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[r(t.substr(0,2)),r(t.substr(2,2)),r(t.substr(4,2))]},p=function(t){return\"rgb(\"+l(t).join(\",\")+\")\"},d=function(t,e,n){var r=e.match(t),i=e.replace(t,\"VAL\");return r&&r.forEach(function(t){return i=i.replace(\"VAL\",n(t))}),i},m=function(t){return d(s,t,p)},_=function(t){(0,a.each)(t,function(e){var n=t[e];\"string\"==typeof n&&n.match(s)&&(t[e]=m(n))})},v=function(t){var e=t.match(/[0-9.\\-]+/g).map(Math.floor);return\"\"+t.match(/^.*\\(/)[0]+e.join(\",\")+\")\"},y=function(t){return d(c,t,v)},w=function(t){return t.match(/[0-9.\\-]+/g)},g=function(t){var e={};return(0,a.each)(t,function(n){var r=t[n];\"string\"==typeof r&&(e[n]={formatString:h(r),chunkNames:f(w(r),n)})}),e},b=function(t,e){(0,a.each)(e,function(n){w(t[n]).forEach(function(r,i){return t[e[n].chunkNames[i]]=+r}),delete t[n]})},O=function(t,e){var n={};return e.forEach(function(e){n[e]=t[e],delete t[e]}),n},M=function(t,e){return e.map(function(e){return t[e]})},j=function(t,e){return e.forEach(function(e){return t=t.replace(\"VAL\",+e.toFixed(4))}),t},F=function(t,e){(0,a.each)(e,function(n){var r=e[n],i=r.chunkNames,o=r.formatString,u=j(o,M(O(t,i),i));t[n]=y(u)})},P=function(t,e){(0,a.each)(e,function(n){var r=e[n].chunkNames,i=t[n];\"string\"==typeof i?function(){var e=i.split(\" \"),n=e[e.length-1];r.forEach(function(r,i){return t[r]=e[i]||n})}():r.forEach(function(e){return t[e]=i}),delete t[n]})},S=function(t,e){(0,a.each)(e,function(n){var r=e[n].chunkNames,i=(r.length,t[r[0]]);t[n]=\"string\"==typeof i?r.map(function(e){var n=t[e];return delete t[e],n}).join(\" \"):i})}}])});\n//# sourceMappingURL=shifty.js.map","/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion: \t0.5\nAuthor:\t\tMario Klingemann\nContact: \tmario@quasimondo.com\nWebsite:\thttp://www.quasimondo.com/StackBlurForCanvas\nTwitter:\t@quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr: \nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nvar mul_table = [\n        512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,\n        454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,\n        482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,\n        437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,\n        497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,\n        320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,\n        446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,\n        329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,\n        505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,\n        399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,\n        324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,\n        268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,\n        451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,\n        385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,\n        332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,\n        289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];\n        \n   \nvar shg_table = [\n\t     9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, \n\t\t17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, \n\t\t19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,\n\t\t20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, \n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, \n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, \n\t\t23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, \n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24 ];\n\nfunction blur( pixels, width, height, radius )\n{\n\tif ( isNaN(radius) || radius < 1 ) return;\n\tradius |= 0;\n\n\tvar x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, \n\tr_out_sum, g_out_sum, b_out_sum, a_out_sum,\n\tr_in_sum, g_in_sum, b_in_sum, a_in_sum, \n\tpr, pg, pb, pa, rbs;\n\t\t\t\n\tvar div = radius + radius + 1;\n\tvar w4 = width << 2;\n\tvar widthMinus1  = width - 1;\n\tvar heightMinus1 = height - 1;\n\tvar radiusPlus1  = radius + 1;\n\tvar sumFactor = radiusPlus1 * ( radiusPlus1 + 1 ) / 2;\n\t\n\tvar stackStart = new BlurStack();\n\tvar stack = stackStart;\n\tfor ( i = 1; i < div; i++ )\n\t{\n\t\tstack = stack.next = new BlurStack();\n\t\tif ( i == radiusPlus1 ) var stackEnd = stack;\n\t}\n\tstack.next = stackStart;\n\tvar stackIn = null;\n\tvar stackOut = null;\n\t\n\tyw = yi = 0;\n\t\n\tvar mul_sum = mul_table[radius];\n\tvar shg_sum = shg_table[radius];\n\t\n\tfor ( y = 0; y < height; y++ )\n\t{\n\t\tr_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n\t\t\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi] );\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1] );\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2] );\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3] );\n\t\t\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\t\ta_sum += sumFactor * pa;\n\t\t\n\t\tstack = stackStart;\n\t\t\n\t\tfor( i = 0; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack.a = pa;\n\t\t\tstack = stack.next;\n\t\t}\n\t\t\n\t\tfor( i = 1; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tp = yi + (( widthMinus1 < i ? widthMinus1 : i ) << 2 );\n\t\t\tr_sum += ( stack.r = ( pr = pixels[p])) * ( rbs = radiusPlus1 - i );\n\t\t\tg_sum += ( stack.g = ( pg = pixels[p+1])) * rbs;\n\t\t\tb_sum += ( stack.b = ( pb = pixels[p+2])) * rbs;\n\t\t\ta_sum += ( stack.a = ( pa = pixels[p+3])) * rbs;\n\t\t\t\n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\t\t\ta_in_sum += pa;\n\t\t\t\n\t\t\tstack = stack.next;\n\t\t}\n\t\t\n\t\t\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor ( x = 0; x < width; x++ )\n\t\t{\n\t\t\tpixels[yi+3] = pa = (a_sum * mul_sum) >> shg_sum;\n\t\t\tif ( pa != 0 )\n\t\t\t{\n\t\t\t\tpa = 255 / pa;\n\t\t\t\tpixels[yi]   = ((r_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t\tpixels[yi+1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t\tpixels[yi+2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t} else {\n\t\t\t\tpixels[yi] = pixels[yi+1] = pixels[yi+2] = 0;\n\t\t\t}\n\t\t\t\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\t\t\ta_sum -= a_out_sum;\n\t\t\t\n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\t\t\ta_out_sum -= stackIn.a;\n\t\t\t\n\t\t\tp =  ( yw + ( ( p = x + radius + 1 ) < widthMinus1 ? p : widthMinus1 ) ) << 2;\n\t\t\t\n\t\t\tr_in_sum += ( stackIn.r = pixels[p]);\n\t\t\tg_in_sum += ( stackIn.g = pixels[p+1]);\n\t\t\tb_in_sum += ( stackIn.b = pixels[p+2]);\n\t\t\ta_in_sum += ( stackIn.a = pixels[p+3]);\n\t\t\t\n\t\t\tr_sum += r_in_sum;\n\t\t\tg_sum += g_in_sum;\n\t\t\tb_sum += b_in_sum;\n\t\t\ta_sum += a_in_sum;\n\t\t\t\n\t\t\tstackIn = stackIn.next;\n\t\t\t\n\t\t\tr_out_sum += ( pr = stackOut.r );\n\t\t\tg_out_sum += ( pg = stackOut.g );\n\t\t\tb_out_sum += ( pb = stackOut.b );\n\t\t\ta_out_sum += ( pa = stackOut.a );\n\t\t\t\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\t\t\ta_in_sum -= pa;\n\t\t\t\n\t\t\tstackOut = stackOut.next;\n\n\t\t\tyi += 4;\n\t\t}\n\t\tyw += width;\n\t}\n\n\t\n\tfor ( x = 0; x < width; x++ )\n\t{\n\t\tg_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n\t\t\n\t\tyi = x << 2;\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi]);\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1]);\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2]);\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3]);\n\t\t\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\t\ta_sum += sumFactor * pa;\n\t\t\n\t\tstack = stackStart;\n\t\t\n\t\tfor( i = 0; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack.a = pa;\n\t\t\tstack = stack.next;\n\t\t}\n\t\t\n\t\typ = width;\n\t\t\n\t\tfor( i = 1; i <= radius; i++ )\n\t\t{\n\t\t\tyi = ( yp + x ) << 2;\n\t\t\t\n\t\t\tr_sum += ( stack.r = ( pr = pixels[yi])) * ( rbs = radiusPlus1 - i );\n\t\t\tg_sum += ( stack.g = ( pg = pixels[yi+1])) * rbs;\n\t\t\tb_sum += ( stack.b = ( pb = pixels[yi+2])) * rbs;\n\t\t\ta_sum += ( stack.a = ( pa = pixels[yi+3])) * rbs;\n\t\t   \n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\t\t\ta_in_sum += pa;\n\t\t\t\n\t\t\tstack = stack.next;\n\t\t\n\t\t\tif( i < heightMinus1 )\n\t\t\t{\n\t\t\t\typ += width;\n\t\t\t}\n\t\t}\n\t\t\n\t\tyi = x;\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor ( y = 0; y < height; y++ )\n\t\t{\n\t\t\tp = yi << 2;\n\t\t\tpixels[p+3] = pa = (a_sum * mul_sum) >> shg_sum;\n\t\t\tif ( pa > 0 )\n\t\t\t{\n\t\t\t\tpa = 255 / pa;\n\t\t\t\tpixels[p]   = ((r_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t\tpixels[p+1] = ((g_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t\tpixels[p+2] = ((b_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t} else {\n\t\t\t\tpixels[p] = pixels[p+1] = pixels[p+2] = 0;\n\t\t\t}\n\t\t\t\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\t\t\ta_sum -= a_out_sum;\n\t\t   \n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\t\t\ta_out_sum -= stackIn.a;\n\t\t\t\n\t\t\tp = ( x + (( ( p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1 ) * width )) << 2;\n\t\t\t\n\t\t\tr_sum += ( r_in_sum += ( stackIn.r = pixels[p]));\n\t\t\tg_sum += ( g_in_sum += ( stackIn.g = pixels[p+1]));\n\t\t\tb_sum += ( b_in_sum += ( stackIn.b = pixels[p+2]));\n\t\t\ta_sum += ( a_in_sum += ( stackIn.a = pixels[p+3]));\n\t\t   \n\t\t\tstackIn = stackIn.next;\n\t\t\t\n\t\t\tr_out_sum += ( pr = stackOut.r );\n\t\t\tg_out_sum += ( pg = stackOut.g );\n\t\t\tb_out_sum += ( pb = stackOut.b );\n\t\t\ta_out_sum += ( pa = stackOut.a );\n\t\t\t\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\t\t\ta_in_sum -= pa;\n\t\t\t\n\t\t\tstackOut = stackOut.next;\n\t\t\t\n\t\t\tyi += width;\n\t\t}\n\t}\n}\n\nfunction BlurStack()\n{\n\tthis.r = 0;\n\tthis.g = 0;\n\tthis.b = 0;\n\tthis.a = 0;\n\tthis.next = null;\n}\n\nmodule.exports = blur;","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./contextmenu.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./contextmenu.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","function DOMParser(options){\r\n\tthis.options = options ||{locator:{}};\r\n\t\r\n}\r\nDOMParser.prototype.parseFromString = function(source,mimeType){\r\n\tvar options = this.options;\r\n\tvar sax =  new XMLReader();\r\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\r\n\tvar errorHandler = options.errorHandler;\r\n\tvar locator = options.locator;\r\n\tvar defaultNSMap = options.xmlns||{};\r\n\tvar entityMap = {'lt':'<','gt':'>','amp':'&','quot':'\"','apos':\"'\"}\r\n\tif(locator){\r\n\t\tdomBuilder.setDocumentLocator(locator)\r\n\t}\r\n\t\r\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\r\n\tsax.domBuilder = options.domBuilder || domBuilder;\r\n\tif(/\\/x?html?$/.test(mimeType)){\r\n\t\tentityMap.nbsp = '\\xa0';\r\n\t\tentityMap.copy = '\\xa9';\r\n\t\tdefaultNSMap['']= 'http://www.w3.org/1999/xhtml';\r\n\t}\r\n\tdefaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\r\n\tif(source){\r\n\t\tsax.parse(source,defaultNSMap,entityMap);\r\n\t}else{\r\n\t\tsax.errorHandler.error(\"invalid doc source\");\r\n\t}\r\n\treturn domBuilder.doc;\r\n}\r\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\r\n\tif(!errorImpl){\r\n\t\tif(domBuilder instanceof DOMHandler){\r\n\t\t\treturn domBuilder;\r\n\t\t}\r\n\t\terrorImpl = domBuilder ;\r\n\t}\r\n\tvar errorHandler = {}\r\n\tvar isCallback = errorImpl instanceof Function;\r\n\tlocator = locator||{}\r\n\tfunction build(key){\r\n\t\tvar fn = errorImpl[key];\r\n\t\tif(!fn && isCallback){\r\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\r\n\t\t}\r\n\t\terrorHandler[key] = fn && function(msg){\r\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\r\n\t\t}||function(){};\r\n\t}\r\n\tbuild('warning');\r\n\tbuild('error');\r\n\tbuild('fatalError');\r\n\treturn errorHandler;\r\n}\r\n\r\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\r\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler \r\n * \r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\r\nfunction DOMHandler() {\r\n    this.cdata = false;\r\n}\r\nfunction position(locator,node){\r\n\tnode.lineNumber = locator.lineNumber;\r\n\tnode.columnNumber = locator.columnNumber;\r\n}\r\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */ \r\nDOMHandler.prototype = {\r\n\tstartDocument : function() {\r\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\r\n    \tif (this.locator) {\r\n        \tthis.doc.documentURI = this.locator.systemId;\r\n    \t}\r\n\t},\r\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\r\n\t\tvar doc = this.doc;\r\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\r\n\t    var len = attrs.length;\r\n\t    appendElement(this, el);\r\n\t    this.currentElement = el;\r\n\t    \r\n\t\tthis.locator && position(this.locator,el)\r\n\t    for (var i = 0 ; i < len; i++) {\r\n\t        var namespaceURI = attrs.getURI(i);\r\n\t        var value = attrs.getValue(i);\r\n\t        var qName = attrs.getQName(i);\r\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\r\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\r\n\t\t\tattr.value = attr.nodeValue = value;\r\n\t\t\tel.setAttributeNode(attr)\r\n\t    }\r\n\t},\r\n\tendElement:function(namespaceURI, localName, qName) {\r\n\t\tvar current = this.currentElement\r\n\t\tvar tagName = current.tagName;\r\n\t\tthis.currentElement = current.parentNode;\r\n\t},\r\n\tstartPrefixMapping:function(prefix, uri) {\r\n\t},\r\n\tendPrefixMapping:function(prefix) {\r\n\t},\r\n\tprocessingInstruction:function(target, data) {\r\n\t    var ins = this.doc.createProcessingInstruction(target, data);\r\n\t    this.locator && position(this.locator,ins)\r\n\t    appendElement(this, ins);\r\n\t},\r\n\tignorableWhitespace:function(ch, start, length) {\r\n\t},\r\n\tcharacters:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t\t//console.log(chars)\r\n\t\tif(chars){\r\n\t\t\tif (this.cdata) {\r\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\r\n\t\t\t} else {\r\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\r\n\t\t\t}\r\n\t\t\tif(this.currentElement){\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t}else if(/^\\s*$/.test(chars)){\r\n\t\t\t\tthis.doc.appendChild(charNode);\r\n\t\t\t\t//process xml\r\n\t\t\t}\r\n\t\t\tthis.locator && position(this.locator,charNode)\r\n\t\t}\r\n\t},\r\n\tskippedEntity:function(name) {\r\n\t},\r\n\tendDocument:function() {\r\n\t\tthis.doc.normalize();\r\n\t},\r\n\tsetDocumentLocator:function (locator) {\r\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\r\n\t    \tlocator.lineNumber = 0;\r\n\t    }\r\n\t},\r\n\t//LexicalHandler\r\n\tcomment:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t    var comm = this.doc.createComment(chars);\r\n\t    this.locator && position(this.locator,comm)\r\n\t    appendElement(this, comm);\r\n\t},\r\n\t\r\n\tstartCDATA:function() {\r\n\t    //used in characters() methods\r\n\t    this.cdata = true;\r\n\t},\r\n\tendCDATA:function() {\r\n\t    this.cdata = false;\r\n\t},\r\n\t\r\n\tstartDTD:function(name, publicId, systemId) {\r\n\t\tvar impl = this.doc.implementation;\r\n\t    if (impl && impl.createDocumentType) {\r\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\r\n\t        this.locator && position(this.locator,dt)\r\n\t        appendElement(this, dt);\r\n\t    }\r\n\t},\r\n\t/**\r\n\t * @see org.xml.sax.ErrorHandler\r\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n\t */\r\n\twarning:function(error) {\r\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\r\n\t},\r\n\terror:function(error) {\r\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\r\n\t},\r\n\tfatalError:function(error) {\r\n\t\tconsole.error('[xmldom fatalError]\\t'+error,_locator(this.locator));\r\n\t    throw error;\r\n\t}\r\n}\r\nfunction _locator(l){\r\n\tif(l){\r\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\r\n\t}\r\n}\r\nfunction _toString(chars,start,length){\r\n\tif(typeof chars == 'string'){\r\n\t\treturn chars.substr(start,length)\r\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\r\n\t\tif(chars.length >= start+length || start){\r\n\t\t\treturn new java.lang.String(chars,start,length)+'';\r\n\t\t}\r\n\t\treturn chars;\r\n\t}\r\n}\r\n\r\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\r\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\r\n\tDOMHandler.prototype[key] = function(){return null}\r\n})\r\n\r\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\r\nfunction appendElement (hander,node) {\r\n    if (!hander.currentElement) {\r\n        hander.doc.appendChild(node);\r\n    } else {\r\n        hander.currentElement.appendChild(node);\r\n    }\r\n}//appendChild and setAttributeNS are preformance key\r\n\r\n//if(typeof require == 'function'){\r\n\tvar XMLReader = require('./sax').XMLReader;\r\n\tvar DOMImplementation = exports.DOMImplementation = require('./dom').DOMImplementation;\r\n\texports.XMLSerializer = require('./dom').XMLSerializer ;\r\n\texports.DOMParser = DOMParser;\r\n//}\r\n","/*\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n */\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tdest[p] = src[p];\n\t}\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(Object.create){\n\t\tvar ppt = Object.create(Super.prototype)\n\t\tpt.__proto__ = ppt;\n\t}\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknow Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\nvar htmlns = 'http://www.w3.org/1999/xhtml' ;\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0, \n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long \n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t}\n};\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n/**\n * \n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes that can be accessed by name. Note that NamedNodeMap does not inherit from NodeList; NamedNodeMaps are not maintained in any particular order. Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index, but this is simply to allow convenient enumeration of the contents of a NamedNodeMap, and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t\t\n\t\t\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\t\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n/**\n * @see http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490\n */\nfunction DOMImplementation(/* Object */ features) {\n\tthis._features = {};\n\tif (features) {\n\t\tfor (var feature in features) {\n\t\t\t this._features = features[feature];\n\t\t}\n\t}\n};\n\nDOMImplementation.prototype = {\n\thasFeature: function(/* string */ feature, /* string */ version) {\n\t\tvar versions = this._features[feature.toLowerCase()];\n\t\tif (versions && (!version || version in versions)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocument:function(namespaceURI,  qualifiedName, doctype){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR,WRONG_DOCUMENT_ERR\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype;\n\t\tif(doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif(qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI,qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocumentType:function(qualifiedName, publicId, systemId){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId;\n\t\tnode.systemId = systemId;\n\t\t// Introduced in DOM Level 2:\n\t\t//readonly attribute DOMString        internalSubset;\n\t\t\n\t\t//TODO:..\n\t\t//  readonly attribute NamedNodeMap     entities;\n\t\t//  readonly attribute NamedNodeMap     notations;\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises \n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises \n\t\tthis.insertBefore(newChild,oldChild);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n    \t\t\t\tif(map[n] == namespaceURI){\n    \t\t\t\t\treturn n;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(prefix in map){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n}\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\nfunction _onUpdateChild(doc,el,newChild){\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif(newChild){\n\t\t\tcs[cs.length++] = newChild;\n\t\t}else{\n\t\t\t//console.log(1)\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile(child){\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild =child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t}\n\t}\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode,child){\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif(previous){\n\t\tprevious.nextSibling = next;\n\t}else{\n\t\tparentNode.firstChild = next\n\t}\n\tif(next){\n\t\tnext.previousSibling = previous;\n\t}else{\n\t\tparentNode.lastChild = previous;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument,parentNode);\n\treturn child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode,newChild,nextChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tcp.removeChild(newChild);//remove and update\n\t}\n\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = newChild.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn newChild;\n\t\t}\n\t\tvar newLast = newChild.lastChild;\n\t}else{\n\t\tnewFirst = newLast = newChild;\n\t}\n\tvar pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = nextChild;\n\t\n\t\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparentNode.firstChild = newFirst;\n\t}\n\tif(nextChild == null){\n\t\tparentNode.lastChild = newLast;\n\t}else{\n\t\tnextChild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parentNode;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);\n\t//console.log(parentNode.lastChild.nextSibling == null)\n\tif (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnewChild.firstChild = newChild.lastChild = null;\n\t}\n\treturn newChild;\n}\nfunction _appendSingleChild(parentNode,newChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tvar pre = parentNode.lastChild;\n\t\tcp.removeChild(newChild);//remove and update\n\t\tvar pre = parentNode.lastChild;\n\t}\n\tvar pre = parentNode.lastChild;\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = pre;\n\tnewChild.nextSibling = null;\n\tif(pre){\n\t\tpre.nextSibling = newChild;\n\t}else{\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);\n\treturn newChild;\n\t//console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\t\n\tinsertBefore :  function(newChild, refChild){//raises \n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\tif(this.documentElement == null && newChild.nodeType == ELEMENT_NODE){\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t\t\n\t\treturn _insertBefore(this,newChild,refChild),(newChild.ownerDocument = this),newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\t\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\t\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\t\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\t\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t\t\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\t\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9?this.documentElement:this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\t\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\nfunction needNamespaceDefine(node,isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix||'';\n\tvar uri = node.namespaceURI;\n\tif (!prefix && !uri){\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === \"http://www.w3.org/XML/1998/namespace\" \n\t\t|| uri == 'http://www.w3.org/2000/xmlns/'){\n\t\treturn false;\n\t}\n\t\n\tvar i = visibleNamespaces.length \n\t//console.log('@@@@',node.tagName,prefix,uri,visibleNamespaces)\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\t//console.log(node.nodeType,node.tagName,ns.prefix,prefix)\n\t\tif (ns.prefix == prefix){\n\t\t\treturn ns.namespace != uri;\n\t\t}\n\t}\n\t//console.log(isHTML,uri,prefix=='')\n\t//if(isHTML && prefix ==null && uri == 'http://www.w3.org/1999/xhtml'){\n\t//\treturn false;\n\t//}\n\t//node.flag = '11111'\n\t//console.error(3,true,node.flag,node.prefix,node.namespaceURI)\n\treturn true;\n}\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tif (!visibleNamespaces) visibleNamespaces = [];\n\t\tvar startVisibleNamespaces = visibleNamespaces.length;\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\t\t\n\t\tisHTML =  (htmlns === node.namespaceURI) ||isHTML \n\t\tbuf.push('<',nodeName);\n\t\t\n\t\t\n\t\t\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\t\t// add namespace for current node\t\t\n\t\tif (needNamespaceDefine(node,isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\t\t\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',nodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn buf.push(' ',node.name,'=\"',node.value.replace(/[<&\"]/g,_xmlEncoder),'\"');\n\tcase TEXT_NODE:\n\t\treturn buf.push(node.data.replace(/[<&]/g,_xmlEncoder));\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC \"',pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push( '\" \"',sysid);\n\t\t\t}\n\t\t\tbuf.push('\">');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM \"',sysid,'\">');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE：\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor(var n in node){\n\t\tvar v = node[n];\n\t\tif(typeof v != 'object' ){\n\t\t\tif(v != node2[n]){\n\t\t\t\tnode2[n] = v;\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//TODO:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DOMImplementation = DOMImplementation;\n\texports.XMLSerializer = XMLSerializer;\n//}\n","//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\r\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\r\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\r\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\r\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\r\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\r\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\r\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\r\n\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\nvar S_TAG = 0;//tag name offerring\r\nvar S_ATTR = 1;//attr name offerring \r\nvar S_ATTR_SPACE=2;//attr name end and space offer\r\nvar S_EQ = 3;//=space?\r\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\r\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\r\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\r\nvar S_TAG_CLOSE = 7;//closed el<el />\r\n\r\nfunction XMLReader(){\r\n\t\r\n}\r\n\r\nXMLReader.prototype = {\r\n\tparse:function(source,defaultNSMap,entityMap){\r\n\t\tvar domBuilder = this.domBuilder;\r\n\t\tdomBuilder.startDocument();\r\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\r\n\t\tparse(source,defaultNSMap,entityMap,\r\n\t\t\t\tdomBuilder,this.errorHandler);\r\n\t\tdomBuilder.endDocument();\r\n\t}\r\n}\r\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\r\n\tfunction fixedFromCharCode(code) {\r\n\t\t// String.prototype.fromCharCode does not supports\r\n\t\t// > 2 bytes unicode chars directly\r\n\t\tif (code > 0xffff) {\r\n\t\t\tcode -= 0x10000;\r\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\r\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\r\n\r\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\r\n\t\t} else {\r\n\t\t\treturn String.fromCharCode(code);\r\n\t\t}\r\n\t}\r\n\tfunction entityReplacer(a){\r\n\t\tvar k = a.slice(1,-1);\r\n\t\tif(k in entityMap){\r\n\t\t\treturn entityMap[k]; \r\n\t\t}else if(k.charAt(0) === '#'){\r\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\r\n\t\t}else{\r\n\t\t\terrorHandler.error('entity not found:'+a);\r\n\t\t\treturn a;\r\n\t\t}\r\n\t}\r\n\tfunction appendText(end){//has some bugs\r\n\t\tif(end>start){\r\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\tlocator&&position(start);\r\n\t\t\tdomBuilder.characters(xt,0,end-start);\r\n\t\t\tstart = end\r\n\t\t}\r\n\t}\r\n\tfunction position(p,m){\r\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\r\n\t\t\tlineStart = m.index;\r\n\t\t\tlineEnd = lineStart + m[0].length;\r\n\t\t\tlocator.lineNumber++;\r\n\t\t\t//console.log('line++:',locator,startPos,endPos)\r\n\t\t}\r\n\t\tlocator.columnNumber = p-lineStart+1;\r\n\t}\r\n\tvar lineStart = 0;\r\n\tvar lineEnd = 0;\r\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\r\n\tvar locator = domBuilder.locator;\r\n\t\r\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\r\n\tvar closeMap = {};\r\n\tvar start = 0;\r\n\twhile(true){\r\n\t\ttry{\r\n\t\t\tvar tagStart = source.indexOf('<',start);\r\n\t\t\tif(tagStart<0){\r\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\r\n\t\t\t\t\tvar doc = domBuilder.doc;\r\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\r\n\t    \t\t\tdoc.appendChild(text);\r\n\t    \t\t\tdomBuilder.currentElement = text;\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(tagStart>start){\r\n\t\t\t\tappendText(tagStart);\r\n\t\t\t}\r\n\t\t\tswitch(source.charAt(tagStart+1)){\r\n\t\t\tcase '/':\r\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\r\n\t\t\t\tvar tagName = source.substring(tagStart+2,end);\r\n\t\t\t\tvar config = parseStack.pop();\r\n\t\t\t\tif(end<0){\r\n\t\t\t\t\t\r\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\r\n\t        \t\t//console.error('#@@@@@@'+tagName)\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t        \t}else if(tagName.match(/\\s</)){\r\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t\t\t\t}\r\n\t\t\t\t//console.error(parseStack.length,parseStack)\r\n\t\t\t\t//console.error(config);\r\n\t\t\t\tvar localNSMap = config.localNSMap;\r\n\t\t\t\tvar endMatch = config.tagName == tagName;\r\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\r\n\t\t        if(endIgnoreCaseMach){\r\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\r\n\t\t\t\t\tif(localNSMap){\r\n\t\t\t\t\t\tfor(var prefix in localNSMap){\r\n\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix) ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!endMatch){\r\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName );\r\n\t\t\t\t\t}\r\n\t\t        }else{\r\n\t\t        \tparseStack.push(config)\r\n\t\t        }\r\n\t\t\t\t\r\n\t\t\t\tend++;\r\n\t\t\t\tbreak;\r\n\t\t\t\t// end elment\r\n\t\t\tcase '?':// <?...?>\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\r\n\t\t\t\tbreak;\r\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tvar el = new ElementAttributes();\r\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\t\t\t\t//elStartEnd\r\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\r\n\t\t\t\tvar len = el.length;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\r\n\t\t\t\t\tel.closed = true;\r\n\t\t\t\t\tif(!entityMap.nbsp){\r\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(locator && len){\r\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\r\n\t\t\t\t\t//try{//attribute position fixed\r\n\t\t\t\t\tfor(var i = 0;i<len;i++){\r\n\t\t\t\t\t\tvar a = el[i];\r\n\t\t\t\t\t\tposition(a.offset);\r\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//}catch(e){console.error('@@@@@'+e)}\r\n\t\t\t\t\tdomBuilder.locator = locator2\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdomBuilder.locator = locator;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed){\r\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tend++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}catch(e){\r\n\t\t\terrorHandler.error('element parse error: '+e)\r\n\t\t\t//errorHandler.error('element parse error: '+e);\r\n\t\t\tend = -1;\r\n\t\t\t//throw e;\r\n\t\t}\r\n\t\tif(end>start){\r\n\t\t\tstart = end;\r\n\t\t}else{\r\n\t\t\t//TODO: 这里有可能sax回退，有位置错误风险\r\n\t\t\tappendText(Math.max(tagStart,start)+1);\r\n\t\t}\r\n\t}\r\n}\r\nfunction copyLocator(f,t){\r\n\tt.lineNumber = f.lineNumber;\r\n\tt.columnNumber = f.columnNumber;\r\n\treturn t;\r\n}\r\n\r\n/**\r\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\r\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\r\n */\r\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\r\n\tvar attrName;\r\n\tvar value;\r\n\tvar p = ++start;\r\n\tvar s = S_TAG;//status\r\n\twhile(true){\r\n\t\tvar c = source.charAt(p);\r\n\t\tswitch(c){\r\n\t\tcase '=':\r\n\t\t\tif(s === S_ATTR){//attrName\r\n\t\t\t\tattrName = source.slice(start,p);\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else if(s === S_ATTR_SPACE){\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\r\n\t\t\t\tthrow new Error('attribute equal must after attrName');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '\\'':\r\n\t\tcase '\"':\r\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\r\n\t\t\t\t){//equal\r\n\t\t\t\tif(s === S_ATTR){\r\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t}\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\tp = source.indexOf(c,start)\r\n\t\t\t\tif(p>0){\r\n\t\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\tel.add(attrName,value,start-1);\r\n\t\t\t\t\ts = S_ATTR_END;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//fatalError: no end quot match\r\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\r\n\t\t\t\t}\r\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t//console.log(attrName,value,start,p)\r\n\t\t\t\tel.add(attrName,value,start);\r\n\t\t\t\t//console.dir(el)\r\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\ts = S_ATTR_END\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: no equal before\r\n\t\t\t\tthrow new Error('attribute value must after \"=\"');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '/':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\ts =S_TAG_CLOSE;\r\n\t\t\t\tel.closed = true;\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\tcase S_ATTR:\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tbreak;\r\n\t\t\t//case S_EQ:\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\")\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase ''://end document\r\n\t\t\t//throw new Error('unexpected end of input')\r\n\t\t\terrorHandler.error('unexpected end of input');\r\n\t\t\tif(s == S_TAG){\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\t}\r\n\t\t\treturn p;\r\n\t\tcase '>':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\tbreak;//normal\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\r\n\t\t\tcase S_ATTR:\r\n\t\t\t\tvalue = source.slice(start,p);\r\n\t\t\t\tif(value.slice(-1) === '/'){\r\n\t\t\t\t\tel.closed  = true;\r\n\t\t\t\t\tvalue = value.slice(0,-1)\r\n\t\t\t\t}\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tif(s === S_ATTR_SPACE){\r\n\t\t\t\t\tvalue = attrName;\r\n\t\t\t\t}\r\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value.replace(/&#?\\w+;/g,entityReplacer),start)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !value.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(value,value,start)\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase S_EQ:\r\n\t\t\t\tthrow new Error('attribute value missed!!');\r\n\t\t\t}\r\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\r\n\t\t\treturn p;\r\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\r\n\t\tcase '\\u0080':\r\n\t\t\tc = ' ';\r\n\t\tdefault:\r\n\t\t\tif(c<= ' '){//space\r\n\t\t\t\tswitch(s){\r\n\t\t\t\tcase S_TAG:\r\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR:\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t\ts = S_ATTR_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\t\t\tvar value = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value,start)\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//case S_TAG_SPACE:\r\n\t\t\t\t//case S_EQ:\r\n\t\t\t\t//case S_ATTR_SPACE:\r\n\t\t\t\t//\tvoid();break;\r\n\t\t\t\t//case S_TAG_CLOSE:\r\n\t\t\t\t\t//ignore warning\r\n\t\t\t\t}\r\n\t\t\t}else{//not space\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\n\t\t\t\tswitch(s){\r\n\t\t\t\t//case S_TAG:void();break;\r\n\t\t\t\t//case S_ATTR:void();break;\r\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\r\n\t\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\t\tvar tagName =  el.tagName;\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !attrName.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(attrName,attrName,start);\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\r\n\t\t\t\tcase S_TAG_SPACE:\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_EQ:\r\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}//end outer switch\r\n\t\t//console.log('p++',p)\r\n\t\tp++;\r\n\t}\r\n}\r\n/**\r\n * @return true if has new namespace define\r\n */\r\nfunction appendElement(el,domBuilder,currentNSMap){\r\n\tvar tagName = el.tagName;\r\n\tvar localNSMap = null;\r\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\tvar a = el[i];\r\n\t\tvar qName = a.qName;\r\n\t\tvar value = a.value;\r\n\t\tvar nsp = qName.indexOf(':');\r\n\t\tif(nsp>0){\r\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\r\n\t\t\tvar localName = qName.slice(nsp+1);\r\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\r\n\t\t}else{\r\n\t\t\tlocalName = qName;\r\n\t\t\tprefix = null\r\n\t\t\tnsPrefix = qName === 'xmlns' && ''\r\n\t\t}\r\n\t\t//can not set prefix,because prefix !== ''\r\n\t\ta.localName = localName ;\r\n\t\t//prefix == null for no ns prefix attribute \r\n\t\tif(nsPrefix !== false){//hack!!\r\n\t\t\tif(localNSMap == null){\r\n\t\t\t\tlocalNSMap = {}\r\n\t\t\t\t//console.log(currentNSMap,0)\r\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\r\n\t\t\t\t//console.log(currentNSMap,1)\r\n\t\t\t}\r\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\r\n\t\t\ta.uri = 'http://www.w3.org/2000/xmlns/'\r\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value) \r\n\t\t}\r\n\t}\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\ta = el[i];\r\n\t\tvar prefix = a.prefix;\r\n\t\tif(prefix){//no prefix attribute has no namespace\r\n\t\t\tif(prefix === 'xml'){\r\n\t\t\t\ta.uri = 'http://www.w3.org/XML/1998/namespace';\r\n\t\t\t}if(prefix !== 'xmlns'){\r\n\t\t\t\ta.uri = currentNSMap[prefix || '']\r\n\t\t\t\t\r\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar nsp = tagName.indexOf(':');\r\n\tif(nsp>0){\r\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\r\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\r\n\t}else{\r\n\t\tprefix = null;//important!!\r\n\t\tlocalName = el.localName = tagName;\r\n\t}\r\n\t//no prefix element has default namespace\r\n\tvar ns = el.uri = currentNSMap[prefix || ''];\r\n\tdomBuilder.startElement(ns,localName,tagName,el);\r\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\r\n\t//localNSMap = null\r\n\tif(el.closed){\r\n\t\tdomBuilder.endElement(ns,localName,tagName);\r\n\t\tif(localNSMap){\r\n\t\t\tfor(prefix in localNSMap){\r\n\t\t\t\tdomBuilder.endPrefixMapping(prefix) \r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tel.currentNSMap = currentNSMap;\r\n\t\tel.localNSMap = localNSMap;\r\n\t\t//parseStack.push(el);\r\n\t\treturn true;\r\n\t}\r\n}\r\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\r\n\tif(/^(?:script|textarea)$/i.test(tagName)){\r\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\r\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\r\n\t\tif(/[&<]/.test(text)){\r\n\t\t\tif(/^script$/i.test(tagName)){\r\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\r\n\t\t\t\t\t//lexHandler.startCDATA();\r\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\t\t//lexHandler.endCDATA();\r\n\t\t\t\t\treturn elEndStart;\r\n\t\t\t\t//}\r\n\t\t\t}//}else{//text area\r\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\treturn elEndStart;\r\n\t\t\t//}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\treturn elStartEnd+1;\r\n}\r\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\r\n\t//if(tagName in closeMap){\r\n\tvar pos = closeMap[tagName];\r\n\tif(pos == null){\r\n\t\t//console.log(tagName)\r\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\r\n\t\tif(pos<elStartEnd){//忘记闭合\r\n\t\t\tpos = source.lastIndexOf('</'+tagName)\r\n\t\t}\r\n\t\tcloseMap[tagName] =pos\r\n\t}\r\n\treturn pos<elStartEnd;\r\n\t//} \r\n}\r\nfunction _copy(source,target){\r\n\tfor(var n in source){target[n] = source[n]}\r\n}\r\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\r\n\tvar next= source.charAt(start+2)\r\n\tswitch(next){\r\n\tcase '-':\r\n\t\tif(source.charAt(start + 3) === '-'){\r\n\t\t\tvar end = source.indexOf('-->',start+4);\r\n\t\t\t//append comment source.substring(4,end)//<!--\r\n\t\t\tif(end>start){\r\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\r\n\t\t\t\treturn end+3;\r\n\t\t\t}else{\r\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\tdefault:\r\n\t\tif(source.substr(start+3,6) == 'CDATA['){\r\n\t\t\tvar end = source.indexOf(']]>',start+9);\r\n\t\t\tdomBuilder.startCDATA();\r\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\r\n\t\t\tdomBuilder.endCDATA() \r\n\t\t\treturn end+3;\r\n\t\t}\r\n\t\t//<!DOCTYPE\r\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \r\n\t\tvar matchs = split(source,start);\r\n\t\tvar len = matchs.length;\r\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\r\n\t\t\tvar name = matchs[1][0];\r\n\t\t\tvar pubid = len>3 && /^public$/i.test(matchs[2][0]) && matchs[3][0]\r\n\t\t\tvar sysid = len>4 && matchs[4][0];\r\n\t\t\tvar lastMatch = matchs[len-1]\r\n\t\t\tdomBuilder.startDTD(name,pubid && pubid.replace(/^(['\"])(.*?)\\1$/,'$2'),\r\n\t\t\t\t\tsysid && sysid.replace(/^(['\"])(.*?)\\1$/,'$2'));\r\n\t\t\tdomBuilder.endDTD();\r\n\t\t\t\r\n\t\t\treturn lastMatch.index+lastMatch[0].length\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n\r\n\r\nfunction parseInstruction(source,start,domBuilder){\r\n\tvar end = source.indexOf('?>',start);\r\n\tif(end){\r\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\r\n\t\tif(match){\r\n\t\t\tvar len = match[0].length;\r\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\r\n\t\t\treturn end+2;\r\n\t\t}else{//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n/**\r\n * @param source\r\n */\r\nfunction ElementAttributes(source){\r\n\t\r\n}\r\nElementAttributes.prototype = {\r\n\tsetTagName:function(tagName){\r\n\t\tif(!tagNamePattern.test(tagName)){\r\n\t\t\tthrow new Error('invalid tagName:'+tagName)\r\n\t\t}\r\n\t\tthis.tagName = tagName\r\n\t},\r\n\tadd:function(qName,value,offset){\r\n\t\tif(!tagNamePattern.test(qName)){\r\n\t\t\tthrow new Error('invalid attribute:'+qName)\r\n\t\t}\r\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\r\n\t},\r\n\tlength:0,\r\n\tgetLocalName:function(i){return this[i].localName},\r\n\tgetLocator:function(i){return this[i].locator},\r\n\tgetQName:function(i){return this[i].qName},\r\n\tgetURI:function(i){return this[i].uri},\r\n\tgetValue:function(i){return this[i].value}\r\n//\t,getIndex:function(uri, localName)){\r\n//\t\tif(localName){\r\n//\t\t\t\r\n//\t\t}else{\r\n//\t\t\tvar qName = uri\r\n//\t\t}\r\n//\t},\r\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\r\n//\tgetType:function(uri,localName){}\r\n//\tgetType:function(i){},\r\n}\r\n\r\n\r\n\r\n\r\nfunction _set_proto_(thiz,parent){\r\n\tthiz.__proto__ = parent;\r\n\treturn thiz;\r\n}\r\nif(!(_set_proto_({},_set_proto_.prototype) instanceof _set_proto_)){\r\n\t_set_proto_ = function(thiz,parent){\r\n\t\tfunction p(){};\r\n\t\tp.prototype = parent;\r\n\t\tp = new p();\r\n\t\tfor(parent in thiz){\r\n\t\t\tp[parent] = thiz[parent];\r\n\t\t}\r\n\t\treturn p;\r\n\t}\r\n}\r\n\r\nfunction split(source,start){\r\n\tvar match;\r\n\tvar buf = [];\r\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\r\n\treg.lastIndex = start;\r\n\treg.exec(source);//skip <\r\n\twhile(match = reg.exec(source)){\r\n\t\tbuf.push(match);\r\n\t\tif(match[1])return buf;\r\n\t}\r\n}\r\n\r\nexports.XMLReader = XMLReader;\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.js\");\n"],"names":["root","factory","exports","module","define","amd","self","require","draw2d","Canvas","Class","extend","NAME","init","canvasId","width","height","_this","this","setScrollArea","document","body","html","$","css","isNaN","parseFloat","initialWidth","getWidth","initialHeight","getHeight","parseInt","droppable","accept","over","event","ui","onDragEnter","draggable","out","onDragLeave","drop","_getEvent","helperPos","helper","position","pos","fromDocumentToCanvasCoordinate","clientX","clientY","onDrop","getX","left","getY","top","shiftKey","ctrlKey","appendTo","stack","zIndex","drag","onDrag","stop","e","start","addClass","paper","Raphael","canvas","style","zoomPolicy","zoomFactor","selection","Selection","currentDropTarget","currentHoverFigure","regionDragDropConstraint","policy","figure","RegionEditPolicy","eventSubscriptions","editPolicy","util","ArrayList","figures","lines","commonPorts","resizeHandles","commandStack","command","CommandStack","linesToRepaintAfterDragDrop","lineIntersections","installEditPolicy","WheelZoomPolicy","DefaultKeyboardPolicy","BoundingboxSelectionPolicy","DropInterceptorPolicy","connection","ComposedConnectionCreatePolicy","DragConnectionCreatePolicy","ClickConnectionCreatePolicy","addEventListener","isPostChangeEvent","calculateConnectionIntersection","each","i","line","svgPathString","repaint","mouseDown","mouseDownX","mouseDownY","mouseDragDiffX","mouseDragDiffY","bind","onMouseUp","x","y","hover","getBestFigure","onMouseLeave","fireEvent","onMouseEnter","exc","console","log","onMouseMove","hoverFigure","diffXAbs","diffYAbs","onMouseDrag","which","preventDefault","onMouseDown","stopPropagation","onRightMouseDown","on","onDoubleClick","onClick","originalEvent","delta","type","wheelDelta","detail","onMouseWheel","keyupCallback","target","is","KeyboardPolicy","onKeyUp","keyCode","keydownCallback","onKeyDown","destroy","clear","unbind","remove","clone","markSaveLocation","hideDecoration","showDecoration","getLines","getSize","l1","removeElementAt","ii","l2","partInter","intersection","add","other","SelectionPolicy","getSelection","getAll","unselect","grep","p","stay","onUninstall","ZoomPolicy","ConnectionCreatePolicy","uninstallEditPolicy","onInstall","removed","name","getDropInterceptorPolicies","setZoom","animated","getZoom","getDimension","geo","Rectangle","setDimension","dim","widths","getFigures","map","f","getAbsoluteX","heights","getAbsoluteY","Math","max","asArray","w","h","setSize","Point","getScrollLeft","getScrollTop","fromCanvasToDocumentCoordinate","getHtmlContainer","touches","length","changedTouches","elementSelector","scrollArea","getScrollArea","scrollLeft","scrollTop","setScrollLeft","setScrollTop","scrollTo","offset","getCanvas","shape","basic","Line","setPosition","setCanvas","getShapeElement","dx","dy","PolyLine","contains","Connection","disconnect","getLine","id","count","get","getId","getFigure","getIntersection","result","entry","j","justTouching","snapToHelper","orig","SnapToEditPolicy","snap","registerPort","port","unregisterPort","getAllPorts","getCommandStack","getPrimarySelection","getPrimary","setCurrentSelection","object","addSelection","select","blacklist","whitelist","Array","isArray","testFigure","isInList","list","len","considering","isInBlacklist","item","isInWhitelist","checkRecursive","children","c","isVisible","hitTest","figureResult","childResult","lineResult","getBestLine","array","node","index","filter","sort","a","b","lineToIgnore","Figure","inArray","draggedDomNode","droppedDomNode","relX","relY","onContextMenu","returnValue","args","subscribers","callback","events","split","push","off","eventOrFunction","Configuration","version","i18n","move","assignShape","groupShapes","ungroupShapes","deleteShape","moveShape","moveLine","addShape","moveVertex","moveVertices","deleteVertex","resizeShape","rotateShape","collection","addVertex","changeAttributes","connectPorts","menu","deleteSegment","addSegment","dialog","filenamePrompt","createResizeHandle","owner","ResizeHandle","createConnection","sourcePort","targetPort","dropTarget","createInputPort","relatedFigure","InputPort","createOutputPort","OutputPort","createHybridPort","HybridPort","attr","setter","getter","oldPoint","sourceDecorator","targetDecorator","sourceDecoratorNode","targetDecoratorNode","isMoving","moveListener","setStartPoint","setEndPoint","_super","color","stroke","radius","setSourceDecorator","setTargetDecorator","source","setSource","setTarget","getSourceDecorator","getTargetDecorator","getSource","getTarget","connections","onDisconnect","fireSourcePortRouteEvent","fireTargetPortRouteEvent","reconnect","onConnect","routingRequired","isResizeable","isDraggable","child","locator","layout","ConnectionLocator","decorator","setParent","calculatePath","routingHints","z1","getZOrder","z2","toBack","attributes","repaintBlocked","paint","getVertices","first","transform","getStartAngle","opacity","alpha","getColor","lineColor","hex","forEach","setAttribute","cssClass","end","last","getEndAngle","hash","postProcess","postProcessCache","router","dx2","dy2","updateVertices","DragDropEditPolicy","moved","toFront","insertAfter","getStartPoint","refPoint","getStartPosition","getConnectionAnchorLocation","getConnectionAnchorReferencePoint","getEndPoint","getEndPosition","getPeerPort","sharingPorts","notiCanvas","lineSegments","p1","p2","sqrt","angle","PI","asin","abs","getConnections","conn","createCommand","request","getPolicy","CommandType","MOVE","CommandMoveVertices","MOVE_BASEPOINT","CommandReconnect","getPersistentAttributes","memento","parentNode","getParent","getName","decoration","setPersistentAttributes","eval","MIN_TIMER_INTERVAL","setterWhitelist","setId","setX","setY","setWidth","setHeight","boundingBox","setBoundingBox","minWidth","setMinWidth","minHeight","setMinHeight","setCssClass","userData","setUserData","setDraggable","resizeable","setResizeable","selectable","setSelectable","setRotationAngle","setAlpha","glow","setGlow","visible","setVisible","keepAspectRatio","setKeepAspectRatio","getterWhitelist","getRotationAngle","getUserData","isSelectable","getAlpha","UUID","create","cachedZOrder","isResizeHandle","deleteable","canSnapToHelper","snapToGridAnchor","timerId","timerInterval","parent","composite","rotationAngle","replace","RegExp","getMinWidth","getMinHeight","isInDragDrop","ox","oy","lastAppliedAttributes","selectionHandles","panningDelegate","relocateChildrenEventCallback","relocate","defaultSelectionAdapter","selectionAdapter","RectangleSelectionFeedbackPolicy","value","isPlainObject","key","substring","jsonUtil","set","func","param","undefined","call","data","Object","assign","keys","k","pick","obj","var_keys","arguments","prototype","slice","asPrimarySelection","onSelect","onUnselect","setSelectionAdapter","adapter","getSelectionAdapter","isSelected","newId","getCssClass","trim","removeAttribute","hasCssClass","className","test","addCssClass","removeCssClass","newClass","indexOf","toggleCssClass","stopTimer","startTimer","milliSeconds","window","setInterval","onTimer","clearInterval","StrongComposite","getTopLevelShapeElement","insertElementAt","handle","insertBefore","SelectionFeedbackPolicy","__proto__","removedPolicy","debug","warn","getChildren","resetChildren","createShapeElement","hide","visibleDuration","fadeOut","show","fadeIn","flatDiff","getOwnPropertyNames","applyTransformation","flag","getHandleBBox","onDragStart","bbox","translate","getAbsolutePosition","scale","getBestChild","canStartDrag","newPos","adjustPosition","getCanSnapToHelper","onPanning","onPanningEnd","onDragEnd","execute","delegateTarget","draggedFigure","delegate","onCatch","droppedFigure","percent","min","duration","getKeepAspectRatio","from","setCanSnapToHelper","getSnapToGridAnchor","setSnapToGridAnchor","point","getAbsoluteBounds","oldPos","getPosition","old","newDim","adjustDimension","rect","getBoundingBox","getOuterBoundingBox","parentBB","childBB","merge","iX","iY","corona","isMemberDraggable","isMemberSelectable","isStrechable","isDeleteable","setDeleteable","containedFigure","getRoot","setComposite","getComposite","_inEvent","context","___originalCallback","figureToIgnore","CommandMove","DELETE","CommandDelete","RESIZE","CommandResize","cloneMetaData","excludeChildren","initialId","HeadlessCanvas","Port","InputPortLocator","maxFanIn","Number","MAX_SAFE_INTEGER","setMaxFanIn","getMaxFanIn","CONNECT","CommandConnect","OutputPortLocator","Circle","DEFAULT_BORDER_COLOR","Color","lighterBgColor","coronaWidth","bgColor","diameter","setCoronaWidth","semanticGroup","setSemanticGroup","getCoronaWidth","getSemanticGroup","useGradient","preferredConnectionDirection","emitter","connectionAnchor","anchor","ConnectionAnchor","maxFanOut","IntrusivePortsFeedbackPolicy","portSelectionAdapter","setMaxFanOut","getMaxFanOut","group","setConnectionAnchor","setOwner","referencePoint","inquiringConnection","getLocation","getReferencePoint","getConnectionDirection","peerPort","getDirection","setConnectionDirection","direction","setLocator","getLocator","setBackgroundColor","lighter","setValue","onPortValueChanged","getValue","cx","cy","rx","ry","cursor","fill","rgba","join","_oldstroke","getStroke","setStroke","setName","iX2","iY2","Corona","setDiameter","d","CommandMovePort","ports","setColor","zoomCallback","origWidth","origHeight","origRadius","origStroke","blockEvent","setType","getOwner","getType","commandMove","commandResize","getSnapToDirection","SnapToHelper","NORTH_WEST","NORTH","NORTH_EAST","EAST","SOUTH_EAST","SOUTH","SOUTH_WEST","WEST","NSEW","updateCursor","oldX","oldY","diffX","diffY","objPosX","objPosY","objWidth","objHeight","newX","newY","corrPos","isTouchDevice","offset2","bgGradient","darker","supportsSnapToHelper","ctrl","SVGFigure","SetFigure","svg","setSVG","getSVG","createSet","importSVG","svgNodes","newSVGNodes","oldSVG","rawSVG","svgDOM","_dimensionReadFromJSON","findStyle","element","tagName","substr","nodeName","nodeValue","exec","$1","$2","r","circle","ellipse","path","x1","y1","x2","y2","points","polygon","image","childNodes","firstChild","nodeType","subShape","text","subAttr","getBBox","nextSibling","error","alert","primary","all","setPrimary","checkDescendant","figureToCheck","expand","addRecursive","addAll","getAssignedFigures","reverse","originalWidth","originalHeight","scaleX","scaleY","strokeScale","applyAlpha","s","before","rs","getPorts","bb","VectorFigure","Node","dasharray","strokeBeforeGlow","glowIsActive","setDashArray","setRadius","getDashArray","getRadius","getBackgroundColor","dashPattern","Command","label","getLabel","canExecute","cancel","undo","redo","CommandAdd","CommandAddVertex","newPoint","removeVertexAt","insertVertexAt","CommandAssignFigure","assignedConnections","isNode","oldBoundingBox","assignFigure","oldComposite","unassignFigure","stickFigures","CommandAttr","newAttributes","oldAttributes","CommandBoundingBox","newBoundingBox","equals","CommandCollection","commandLabel","commands","labels","unique","canExec","cmd","setConnection","getConnection","optionalCallback","removedParentEntry","indexOfChild","CommandDeleteGroup","batchDelete","CommandUngroup","CommandGroup","Group","isEmpty","setStartPosition","CommandMoveConnection","setTranslation","CommandMoveLine","CommandMoveVertex","setIndex","origPoint","updatePosition","setVertex","oldVertices","newVertices","setVertices","con","oldSourcePort","oldTargetPort","setNewPorts","newSourcePort","newTargetPort","CommandRemoveVertex","CommandReplaceVertices","originalVertices","oldWidth","oldHeight","newWidth","newHeight","CommandRotate","oldAngle","newAngle","rotate","portRelayoutRequired","undostack","redostack","maxundo","transactionCommand","eventListeners","setUndoLimit","notifyListeners","POST_EXECUTE","PRE_EXECUTE","startTransaction","isInTransaction","commitTransaction","pop","PRE_UNDO","POST_UNDO","PRE_REDO","POST_REDO","getRedoLabel","getUndoLabel","canRedo","canUndo","listener","CommandStackEventListener","stackChanged","removeEventListener","state","action","CommandStackEvent","size","POST_INIT","POST_MASK","PRE_MASK","details","getStack","getCommand","getDetails","isPreChangeEvent","MOVE_VERTEX","MOVE_VERTICES","MOVE_GHOST_VERTEX","RESET","ROTATE","ArrowDecorator","Decorator","st","backgroundColor","BarDecorator","CircleDecorator","DiamondDecorator","inverseLerp","X1","Y1","X2","Y2","px","py","nenner","zaehler","pointProjection","minx","maxx","miny","maxy","U","pow","distance","projlenSq","dotprod","lenSq","bx","by","bw","bh","setBoundary","adjustBoundary","PositionConstants","getDistance","translated","factor","scaled","getScaled","subtract","that","dot","cross","lerp","t","Ray","isHorizontal","similarity","otherRay","getAveraged","resize","dw","dh","setBounds","getLeft","getRight","getTop","getBottom","getTopLeft","getTopCenter","getTopRight","getCenterLeft","getCenterRight","getBottomLeft","getBottomCenter","getCenter","getBottomRight","moveInside","newRect","pointOrRectangle","cw","ch","ow","oh","oct","determineOctant","r2","HISTERESE","current","DIRECTION_UP","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_DOWN","o","isInside","intersects","x11","y11","x12","y12","x21","y21","x22","y22","intersectionWithLine","v","toJSON","Util","insetPoint","distanceFromStart","vx","vy","localDistance","io","Reader","unmarshal","Writer","marshal","resultCallback","formatXml","xml","formatted","reg","pad","indent","match","padding","json","JSON","parse","createFigureFromElement","createFigureFromType","val","getPort","base64Content","Base64","encode","stringify","canvg","png","cropBoundingBox","canvasState","origPos","outerHTML","zoom","XMLSerializer","serializeToString","find","canvasDomNode","append","fullSizeCanvas","ignoreMouse","ignoreAnimation","renderCallback","sourceX","sourceY","sourceWidth","sourceHeight","croppedCanvas","createElement","getContext","drawImage","dataUrl","toDataURL","base64Image","img","CenterEdgeConnectionAnchor","ref","dir","center","getBox","ChopboxConnectionAnchor","reference","FanConnectionAnchor","separation","ray","xSeparation","ySeparation","intersections","reduce","previous","p0","ShortesPathConnectionAnchor","Oval","CircuitConnectionRouter","ManhattanConnectionRouter","setBridgeRadius","setVertexRadius","abortRoutingOnFirstVertexNode","LineSelectionFeedbackPolicy","vertexNodes","vertexRadius","setJunctionRadius","bridgeRadius","bridge_LR","bridge_RL","route","fromPt","fromDir","toPt","toDir","_route","intersectionsASC","intersectionsDESC","intersectionForCalc","ps","oldP","bridgeWidth","bridgeCode","lastVertexNode","interP","hit","otherZ","vertexNode","exclude","ConnectionRouter","_paint","inset","adjust","toFixed","lastP","canRemoveVertexAt","canRemoveSegmentAt","verticesSet","DirectRouter","invalidate","addPoint","FanConnectionRouter","routeCollision","midPoint","bendPoint","InteractiveManhattanConnectionRouter","OrthogonalSelectionFeedbackPolicy","_routingMetaData","routedByUserInteraction","halfRoute","MINDIST","vertexCount","vertex","startMoved","endMoved","segmentCount","tmpConn","vertices","draggedSegment","getVertex","getSegments","lp0","lp1","routingMetaData","ManhattanBridgedConnectionRouter","BRIDGE_HORIZONTAL_LR","BRIDGE_HORIZONTAL_RL","TOL","TOLxTOL","TOGGLE_DIST","UP","RIGHT","DOWN","LEFT","xDiff","yDiff","ROUTER_RECTS","MazeConnectionRouter","useSpline","useSimplify","useSimplifyValue","useDebug","useShift","portOutletOffset","finder","PF","JumpPointFinder","allowDiagonal","dontCrossCorners","shift","oldToPt","oldFromPt","getAdjustedPoint","grid","generateNoGoGrid","findPath","isWalkableAt","svgPathBefore","adjustPath","pt","spline","CubicSpline","splinePoints","generate","simplify","oneShift2","canvasWidth","canvasHeight","Grid","box","r_orig","b_orig","setWalkableAt","adjustment","getSquareDistance","getSquareSegmentDistance","simplifyRadialDistance","sqTolerance","prevPoint","newPoints","simplifyDouglasPeucker","maxSqDist","sqDist","markers","Uint8Array","firstStack","lastStack","tolerance","highestQuality","MuteableManhattanConnectionRouter","rowsUsed","colsUsed","constraints","reservedInfo","startPoint","endPoint","average","startNormal","getStartDirection","endNormal","getEndDirection","positions","horizontal","isCycle","next","trial","findFirstFigureAtStraightLine","EMPTY_LIST","getExcludingFigures","processPositions","getColumnNear","n","proximity","reserveColumn","getRowNear","reserveRow","removeReservedLines","prev","rInfo","reservedRows","reservedCols","column","info","row","getConstraint","setConstraint","constraint","excluding","col","getMidpoint","RubberbandRouter","thickness","uv","uv2","strength","second","third","start90","start270","first90","first270","second90","second270","third90","third270","end90","end270","SketchConnectionRouter","SplineConnectionRouter","VertexRouter","VertexSelectionFeedbackPolicy","startAnchor","endAnchor","BottomLocator","Locator","targetBoundingBox","CenterLocator","DraggableLocator","PortLocator","dividerFactor","thisNAME","portIndex","applyConsiderRotation","LeftLocator","margin","ManhattanMidpointLocator","segmentIndex","floor","ParallelMidpointLocator","setDistance","nx","ny","radian","rotAnchor","rotCenterOfLabel","xm","ym","cos","sin","PolylineMidpointLocator","halfW","halfH","rotAngle","m","matrix","ratio","RightLocator","SmartDraggableLocator","boundedCorners","dist","xOffset","yOffset","calcBoundingCorner","i_parent","i_child","parentVertices","childVertices","TopLocator","XYAbsPortLocator","XYRelPortLocator","mesh","ExplodeLayouter","MeshLayouter","MIN_MARGIN","figureToAdd","changes","dis","currentOctChanges","ProposedMeshChange","r1","uid","Date","autoResize","defaults","onResize","onBeforeResize","onAfterResize","animate","complete","extraSpace","maxHeight","maxWidth","config","resizableFilterSelector","AutoResizer","el","toLowerCase","previousScrollTop","overflowY","apply","cloneCSSProperties","cloneCSSValues","overflow","fn","check","proxy","setTimeout","createClone","removeAttr","whiteSpace","immediate","injectClone","prevValue","cloneWidth","currentWidth","removeData","cloneContainer","jQuery","support","htmlMenuitem","htmlCommand","eventSelectstart","documentElement","widget","_cleanData","cleanData","elems","elem","triggerHandler","$currentTrigger","initialized","$win","counter","namespaces","menus","types","selector","trigger","autoHide","delay","reposition","determinePosition","$menu","my","at","of","collision","outerHeight","outerWidth","opt","bottom","right","positionSubmenu","animation","noop","items","hoveract","timer","pageX","pageY","abortevent","stopImmediatePropagation","contextmenu","$this","hasClass","build","built","isEmptyObject","Error","$trigger","op","click","Event","mousedown","button","mouseup","mouseenter","$related","relatedTarget","$document","closest","mousemove","mouseleave","clearTimeout","layerClick","$window","triggerAction","elementFromPoint","$layer","has","one","contextMenu","keyStop","isInput","$selected","blur","prop","$parent","itemdata","String","fromCharCode","toUpperCase","accesskeys","$node","prevItem","$s","$children","$prev","$round","itemMouseleave","itemMouseenter","$input","focus","nextItem","$next","focusInput","contextMenuRoot","blurInput","menuMouseenter","hovering","menuMouseleave","itemClick","contextMenuKey","isFunction","callbacks","hasOwnProperty","update","inputClick","hideMenu","force","focusItem","siblings","blurItem","removeClass","$t","zin","$tt","zindex","layer","$label","accesskey","ak","aks","splitAccesskey","_name","hasTypes","inputs","selected","prependTo","radio","options","icon","nested","display","ceil","andSelf","$item","disabled","fixedPosition","inputLabel","menuChildren","operation","$context","_hasContext","ns","$visibleMenu","fromMenu","setInputValues","getInputValues","dimetric","arrow","note","diagram","flowchart","analog","pert","navigator","platform","EditPolicy","host","SingleSelectionPolicy","isInsideMode","rect1","rect2","intersectsMode","decision","boundingBoxFigure1","boundingBoxFigure2","canDrawBoundingBox","oldSelection","setDecisionMode","useIntersectionMode","currentSelection","mouseMovedDuringMouseDown","canDragStart","delegated","mouseDraggingElement","mouseDownElement","draggingLineCommand","draggingLine","fakeDragX","fakeDragY","handleRect","dash","LineResizeHandle","selectionRect","CanvasPolicy","mouseX","mouseY","createMonochromGif","gif","red","green","blue","bit","byte_","writeBit","chunklen","CoronaDecorationPolicy","DecorationPolicy","startDragX","startDragY","diameterToBeFullVisible","diameterToBeVisible","sumDiameter","setDiameterToBeVisible","setDiameterToBeFullVisible","getDiameterToBeVisible","getDiameterToBeFullVisible","__origAlpha","updatePorts","connectInquirer","connectIntent","Hub","inputConnections","outputConnections","ExtendedKeyboardPolicy","FadeoutDecorationPolicy","DEFAULT_FADEOUT_DURATION","DEFAULT_ALPHA_DECREMENT","alphaDec","hidePortsCounter","portDragging","duringHide","GhostMoveSelectionPolicy","ghostRectangle1","ghostRectangle2","sel","resetPorts","_newPos","draggingElement","redrawConnection","inter","PanningSelectionPolicy","area","ReadOnlySelectionPolicy","ShowChessboardEditPolicy","GRID_COLOR","GRID_WIDTH","oldBg","setGrid","onZoomCallback","emitterFigure","zoomData","gridColor","background","backgroundSize","backgroundPosition","ShowDimetricGridEditPolicy","shapes","setGridColor","props","angle26","atan","angle153","cos30","sin30","cos150","sin150","setStart","setFinish","ShowDotEditPolicy","DOT_COLOR","DOT_RADIUS","DOT_DISTANCE","dotDistance","dotRadius","dotColor","ShowGridEditPolicy","GRID_STOKE","gridDistance","gridStroke","gridWidth","SnapToCenterEditPolicy","SNAP_THRESHOLD","FADEOUT_DURATION","centers","horizontalGuideLines","verticalGuideLines","hideHorizontalGuides","hideVerticalGuides","modifiedPos","originalPos","allowXChanges","allowYChanges","inputCenter","snapHorizontal","snapped","showHorizontalGuides","diff","vertical","snapVertical","showVerticalGuides","populateCenters","candidates","snappedPoint","causedFigure","fast","SnapToDimetricGridEditPolicy","snapPoint","g","CENTER_H","CENTER_V","NORTH_SOUTH","EAST_WEST","setLineColor","getLineColor","SnapToGeometryEditPolicy","rows","cols","vline","hline","hideVerticalLine","hideHorizontalLine","snapDirections","edge","showVerticalLine","showHorizontalLine","inputBounds","snapRectangle","bounds","resultBounds","topLeft","bottomRight","snapOrientation","inputPoint","resultPoint","populateRowsAndCols","rightCorrection","getCorrectionFor","leftCorrection","bottomCorrection","topCorrection","location","entries","side","resultMag","magnitude","removeAll","causedBox","causedCenter","fromY","maxLength","yLength","snappedBox","fromX","xLength","SnapToGridEditPolicy","showGrid","renderer","SnapToInBetweenEditPolicy","populateBounds","intersectionPoint","leftIntersections","leftInputPoint","causedBBox","rightIntersections","rightInputPoint","snappedRect","leftSide","rightSide","topIntersections","topInputPoint","bottomIntersections","bottomInputPoint","topSide","bottomSide","snapTopLeft","snapTopRight","snapBottomRight","SnapToVerticesEditPolicy","VertexResizeHandle","correction","vertexResizeHandle","diffx","diffy","SNAP","snappedPos","debouncedZoomedCallback","_debounce","__wheelZoom","newZoom","client","_zoom","scrollWidth","centerY","centerX","Tweenable","tween","to","easing","step","params","finish","setViewBox","coordsAfter","wait","timeout","callNow","z","viewBoxWidth","viewBoxHeight","port1","beeline","pulse","tempConnection","ripple","setEndPosition","setRouter","policies","_arg","anim","circle1","circle2","anim1","repeat","Infinity","anim2","currentTarget","de","ct","PortFeedbackPolicy","onHoverLeave","onHoverEnter","OrthogonalConnectionCreatePolicy","getRouter","beforeVertex","lastVertex","portPos","lastSegmentDir","orthogonal","xDist","AntSelectionFeedbackPolicy","isPrimarySelection","_updateBeeLine","projection","center1","center2","BigRectangleSelectionFeedbackPolicy","BusSelectionFeedbackPolicy","r4","r6","r8","xPos","yPos","FigureEditPolicy","moveCallback","originalAlpha","GlowSelectionFeedbackPolicy","HBusSelectionFeedbackPolicy","HorizontalEditPolicy","RaftSelectionFeedbackPolicy","RaftResizeHandle","dashArray","r3","r5","r7","constRect","diffW","diffH","ResizeSelectionFeedbackPolicy","RoundRectangleSelectionFeedbackPolicy","SlimSelectionFeedbackPolicy","VBusSelectionFeedbackPolicy","GhostVertexResizeHandle","VerticalEditPolicy","WidthSelectionFeedbackPolicy","LineStartResizeHandle","LineEndResizeHandle","p_m1","p3","resizeWidthHalf","resizeHeightHalf","removeSegment","splitSegment","newSegLength","np1","np2","np3","np4","segment","hitSegment","startHandle","endHandle","ElasticStrapFeedbackPolicy","connectionLine","hoverFiger","tweenable","growFactor","allPorts","__beforeInflate","dispose","OpAmp","MyInputPortLocator","calcY","inputLocator","createPort","ResistorBridge","MyOutputPortLocator","outputLocator","ResistorVertical","VoltageSupplyHorizontal","VoltageSupplyVertical","CalligrapherArrowDownLeft","CalligrapherArrowLeft","Arc","startAngle","endAngle","a1","a2","w2","h2","getDiameter","setCenter","Diamond","Polygon","resetVertices","precursorIndex","maxOpacity","Image","setPath","getPath","src","Label","FONT_FALLBACK","cachedWidth","cachedHeight","cachedMinWidth","cachedMinHeight","fontSize","fontColor","fontFamily","outlineStroke","outlineColor","bold","editor","setText","installEditor","setOutlineStroke","setOutlineColor","setFontFamily","setFontSize","setFontColor","setPadding","setBold","getText","getOutlineStroke","getOutlineColor","getFontFamily","getFontSize","getFontColor","getPadding","isBold","lastAppliedLabelRotation","lastAppliedTextAttributes","clearCache","lattr","calculateTextAttr","attrDiff","ts","font","polySides","oddNodes","pi","pj","DEFAULT_COLOR","isGlowing","outlineVisible","startX","setStartX","startY","setStartY","endX","setEndX","endY","setEndY","setCorona","getCorona","isFaked","_lineColor","_stroke","minX","minY","getStartX","getStartY","getEndX","getEndY","getLength","getAngle","percentage","segments1","segments2","s1","s2","b1","b2","ua_t","ub_t","u_b","ua","ub","getRelatedPort","getOppositePort","objPos","getIndex","origin","mDir","mDiff","t_a","t_b","removedPoint","lastDist","lastValidLength","maxX","maxY","begin","modStart","modEnd","updateBoundingBox","fracWidth","fracHeight","thisX","thisY","rot","pattern","Text","cachedWrappedAttr","wrappedTextAttr","longestWord","arg1","arg2","svgText","words","abc","letterWidth","l","LINE_COLOR","isDead","getEnclosingAngle","trans","acos","Composite","assignedFigures","Jailhouse","Raft","WeakComposite","aboardFigures","getAboardFigures","dontApplyToChildren","aboardedFigures","recalculate","raftBoundingBox","getNextComposite","figureToTest","nextComposite","dontMoveChildren","Diagram","cache","setData","getData","Pie","COLORS","TWO_PI","d2","sum","_sum","pie","offsetAngle","seg","drawSegment","polarPath","theta","rotation","resolution","Sparkline","pathString","prev_pt","idx","toCoords","Document","amplitude","calcPath","w4","Acw","Icon","Alarm","Anonymous","Apple","Apps","ArrowDown","ArrowLeft","ArrowLeft2","ArrowRight","ArrowRight2","ArrowUp","Aumade","BarChart","BioHazard","Book","Bookmark","Books","Bubble","Bug","Calendar","Cart","Ccw","Chat","Check","Chrome","Clip","Clock","Cloud","Cloud2","CloudDown","CloudUp","Cloudy","Code","CodeTalk","CommandLine","Connect","Contract","Crop","Cross","Cube","Customer","Db","Detour","Disconnect","DockBottom","DockLeft","DockRight","DockTop","Download","Dry","Employee","End","Ethernet","Exchange","Expand","Export","Fave","Feed","Ff","Firefox","Flag","Flickr","Folder","Font","Fork","ForkAlt","FullCube","Future","GRaphael","Gear","Gear2","GitHub","GitHubAlt","Glasses","Globe","GlobeAlt","GlobeAlt2","Hail","Hammer","HammerAndScrewDriver","HangUp","Help","History","Home","IMac","offsetY","offsetX","Icons","Ie","Ie9","Import","InkScape","Ipad","Iphone","JQuery","Jigsaw","Key","Lab","Lamp","Lamp_alt","Landing","Landscape1","Landscape2","LineChart","Link","LinkedIn","Linux","List","Location","Lock","Locked","Magic","Magnet","Mail","Man","Merge","Mic","MicMute","Minus","NewWindow","No","NoMagnet","NodeJs","Notebook","Noview","Opera","Package","Page","Page2","Pallete","Palm","Paper","Parent","Pc","Pen","Pensil","People","Phone","Photo","Picker","Picture","PieChart","Plane","Plugin","Plus","Power","Ppt","Printer","Quote","Rain","ReflectH","ReflectV","Refresh","Resize2","Rotate","Ruler","Run","Rw","Safari","ScrewDriver","Search","Sencha","Settings","SettingsAlt","Shuffle","Skull","Skype","SlideShare","Smile","Smile2","Snow","Split","Star","Star2","Star2Off","Star3","Star3Off","StarOff","Start","Sticker","Stop","StopWatch","Sun","Svg","TShirt","Tag","TakeOff","Talke","Talkq","Thunder","Trash","Twitter","TwitterBird","Umbrella","Undo","Unlock","Usb","User","Users","Video","View","Vim","Volume0","Volume1","Volume2","Volume3","Warning","WheelChair","Windows","Woman","Wrench","Wrench2","Wrench3","ZoomIn","ZoomOut","FlexGridLayout","Layout","cellLocator","gridDef","layoutRequired","_layout","cell","__cellConstraint","valign","align","debugLines","def_cols","def_rows","min_height","min_width","minGridWidth","minGridHeight","hResizeable","vResizeable","resizeListener","columns","cellWidthFromDef","cellConstraint","rowspan","colspan","paintDebugGrid","eHeight","cHeight","cellHeight","_getGridWidth","_getGridHeight","gridHeight","cellWidth","cellX","cellY","posX","posY","newLine","def","HorizontalLayout","gap","setGap","getGap","markup","StackLayout","visibleLayer","setVisibleLayer","getVisibleLayer","_recursiveWidth","_recursiveHeight","TableLayout","DUMMY_CELL","__cell","getCellLayout","widthOffset","layoutInfos","setCellPadding","calculateLayout","getCellPadding","removeRow","removedRow","splice","addRow","figuresToAdd","columnCount","missingColumns","setCellVerticalAlign","getCellVerticalAlign","setCellAlign","getCellAlign","layouts","rowCount","newLayoutInfos","layoutWidths","layoutHeights","VerticalLayout","Between","Fulcrum","_orig_hitTest","setConnectionDirStrategy","HorizontalBus","BACKGROUND_COLOR","setLabel","_port","CONNECTION_DIR_STRATEGY","getHybridPort","strategy","dirStrategy","inputPorts","outputPorts","hybridPorts","persistPorts","cachedPorts","setPersistPorts","getPersistPorts","__initialVisibilityState","recursive","getInputPorts","getOutputPorts","excludePorts","clonePort","addPort","portName","getInputPort","portNameOrIndex","getOutputPort","removePort","newPort","c_size","oldCanvas","layoutPorts","relatedPort","locatorAttr","VerticalBus","labelString","mustAdjustTheAngel","PostIt","Activity","mementoValues","darkerBgColor","earlyStartLabel","createLabel","durationLabel","LabelEditor","onCommit","setDuration","earlyEndLabel","activityLabel","LabelInplaceEditor","inputPort","getActivity","anyValue","outputPort","lateStartLabel","stackLabel","lateEndLabel","getEarlyStart","lateFinish","setLateFinish","getEarlyEnd","latestEarlyEnd","parentActivity","lateStart","txt","innerCircle","State","Slider","Widget","DEFAULT_COLOR_THUMB","DEFAULT_COLOR_BG","currentValue","slideBoundingBox","panning","thumbGrow","thumb","onValueChange","panningX","panningY","grow","sliderWidth","figurePos","sliderPos","thumbX","configuration","onCancel","onStart","newText","prompt","commitCallback","commit","objs","avoidDuplicates","concat","elements","includes","deep","newVector","overwriteElementAt","byteToCharMap_","charToByteMap_","byteToCharMapWebSafe_","charToByteMapWebSafe_","ENCODED_VALS_BASE","ENCODED_VALS","ENCODED_VALS_WEBSAFE","encodeByteArray","input","opt_webSafe","byteToCharMap","output","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","stringToByteArray","decode","charToByteMap","charAt","byte4","str","charCodeAt","hashString","hex2rgb","getHTMLStyle","getRed","getGreen","getBlue","getIdealTextColor","temp_elem","appendChild","getComputedStyle","removeChild","int2hex","round","fraction","fadeTo","pc","callback_func","callback_force","aps","log_level","log_methods","pass_methods","logs","method","level","log_arr","exec_callback","is_level","firebug","setLevel","setCallback","parentKey","pathList","grandParent","grandParentKey","addObj","constructor","paths","propertyIsEnumerable","obj1","obj2","v1","v2","ensureDefault","attribute","ontouchmove","pointString","poly","random","toString","extended","global","BezierSpline","Spline","controlPoints","parts","cp","blend","CatmullRomSpline","RGBColor","stackblur","opts","getElementById","matchesSelector","Element","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","Zepto","Sizzle","getMatchesSelector","CanvasRenderingContext2D","drawSvg","cOpts","ignoreDimensions","ignoreClear","scaleWidth","scaleHeight","FRAMERATE","MAX_VIRTUAL_PIXELS","msg","ctx","uniqueId","UniqueId","Definitions","Styles","StylesSpecificity","Animations","Images","ViewPort","viewPorts","Clear","SetCurrent","RemoveCurrent","Current","ComputeSize","ImagesLoaded","loaded","compressSpaces","ajax","url","AJAX","XMLHttpRequest","ActiveXObject","open","send","responseText","parseXml","Data","Xml","xmlDoc","Dom","XmlDocument","settings","XmlLoadSettings","prohibitDtd","loadXml","DOMParser","parseFromString","async","loadXML","Property","hasValue","numValue","valueOrDefault","numValueOrDefault","addOpacity","opacityProp","newValue","ok","getDefinition","isUrlDefinition","getFillStyleDefinition","createGradient","createPattern","getHrefAttribute","getDPI","viewPort","getEM","em","Parse","toPixels","getUnits","processPercent","toMilliseconds","toRadians","textBaselineMapping","toTextBaseline","Variants","Weights","CreateFont","fontStyle","fontVariant","fontWeight","inherit","ff","ToNumberArray","angleTo","atan2","applyTransform","xp","yp","CreatePoint","CreatePath","BoundingBox","NaN","addX","addY","addBoundingBox","addQuadraticCurve","p0x","p0y","p1x","p1y","p2x","p2y","cp1x","cp1y","cp2x","cp2y","addBezierCurve","p3x","p3y","b2ac","t1","t2","isPointInBox","Transform","Type","unapply","applyToPoint","det","SkewBase","base","skewX","tan","skewY","transforms","transformType","AspectRatio","aspectRatio","desiredWidth","desiredHeight","refX","refY","meetOrSlice","scaleMin","scaleMax","EmptyProperty","ElementBase","styles","stylesSpecificity","createIfNotExists","skipAncestors","render","save","mask","setContext","renderChildren","clearContext","restore","addChild","childNode","CreateElement","addStylesFromStyleDefinition","specificity","existingSpecificity","captureTextNodes","textContent","tspan","RenderedElementBase","fs","fillStyle","strokeStyle","newLineWidth","lineWidth","lineCap","lineJoin","miterLimit","gaps","setLineDash","webkitLineDash","mozDash","lineDashOffset","webkitLineDashOffset","mozDashOffset","clip","globalAlpha","PathElementBase","beginPath","Mouse","checkPath","getMarkers","marker","baseClearContext","baseSetContext","getPropertyValue","moveTo","lineTo","closePath","viewBox","quadraticCurveTo","arc","KAPPA","bezierCurveTo","getPoints","polyline","basePath","PathParser","tokens","reset","previousCommand","control","angles","isEnd","isCommandOrEnd","isRelativeCommand","getToken","getScalar","nextCommand","getPoint","makeAbsolute","getAsControlPoint","getAsCurrentPoint","getReflectedControlPoint","addMarker","priorTo","addMarkerAngle","getMarkerPoints","getMarkerAngles","pp","newP","curr","cntrl","xAxisRotation","largeArcFlag","sweepFlag","currp","cpp","centp","u","ad","ah","halfWay","sx","sy","tempSvg","cctx","baseRender","defs","GradientBase","stops","getGradient","gradientUnits","attributesToInherit","inheritStopContainer","stopsContainer","attributeToInherit","parentOpacityProp","addParentOpacity","addColorStop","rootView","tempCtx","linearGradient","createLinearGradient","radialGradient","fx","fy","createRadialGradient","stopColor","AnimateBase","maxDuration","getProperty","attributeType","attributeName","initialValue","initialUnits","calcValue","frozen","animationFrozen","animationFrozenValue","updated","values","progress","ret","lb","animateColor","animateTransform","horizAdvX","isRTL","isArabic","fontFace","missingGlyph","glyphs","arabicForm","unicode","fontface","ascent","descent","unitsPerEm","missingglyph","glyph","textBaseline","getAnchorDelta","renderChild","startI","textAnchor","measureTextRecursive","textParent","measureText","TextElementBase","getGlyph","customFont","fillText","strokeText","lw","measure","textToMeasure","tref","hasText","baseRenderChildren","checkBoundingBox","onclick","onmousemove","href","isSvg","crossOrigin","onload","onerror","symbol","cssDefs","cssDef","cssClasses","cssProps","getSelectorSpecificity","srcs","urlStart","urlEnd","fonts","getElementsByTagName","use","oldParent","cMask","maskCtx","globalCompositeOperation","fillRect","clipPath","oldBeginPath","oldClosePath","efd","extraFilterDistance","feMorphology","feComposite","feColorMatrix","m1","m2","m3","imGet","imSet","mi","srcData","getImageData","clearRect","putImageData","feGaussianBlur","blurRadius","canvasRGBA","title","desc","MISSING","load","loadXmlDoc","dom","mapXY","offsetLeft","offsetTop","offsetParent","scrollX","scrollY","isFirstRender","draw","clientWidth","clientHeight","cWidth","xRatio","yRatio","waitingForImages","intervalID","needUpdate","hasEvents","runEvents","run","eventElements","isPointInPath","svgTags","querySelectorAll","svgTag","div","innerHTML","typeCount","findMatch","regex","___CSS_LOADER_EXPORT___","cssWithMappingToString","content","needLayer","modules","media","dedupe","supports","alreadyImportedModules","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","sourceMapping","color_string","simple_colors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","feldspar","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslateblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","violetred","wheat","white","whitesmoke","yellow","yellowgreen","color_defs","re","example","process","bits","processor","channels","toRGB","toRGBA","toHex","getHelpXML","examples","sc","list_item","list_color","example_div","cssText","createTextNode","list_item_value","execScript","attachEvent","defineProperty","configurable","enumerable","__esModule","default","TypeError","composeEasingObject","tweenProps","writable","Symbol","iterator","cancelAnimationFrame","webkitCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","mozCancelRequestAnimationFrame","_","requestAnimationFrame","webkitRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","mozRequestAnimationFrame","O","M","_currentState","_configured","_scheduleFunction","setConfig","filters","_filterArgs","_delay","_duration","_step","_targetState","_timestamp","now","isPlaying","_attachment","_scheduleId","_timeoutHandler","_applyFilter","_originalState","_easing","_isTweening","_start","resume","attachment","_pausedAtTime","promise","Promise","_promise","_resolve","_reject","catch","_isPaused","pause","formulas","token","getOwnPropertySymbols","unsetBezierFunction","setBezierFunction","displayName","interpolate","Function","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeOutBounce","easeInBack","easeOutBack","easeInOutBack","elastic","swingFromTo","swingFrom","swingTo","bounce","bouncePast","easeFromTo","easeFrom","easeTo","_tokenData","P","F","S","tweenCreated","beforeTween","afterTween","unshift","formatString","chunkNames","mul_table","shg_table","BlurStack","pixels","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pr","pg","pb","pa","rbs","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","stackEnd","stackIn","stackOut","mul_sum","shg_sum","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","indexByIdentifier","sourceMap","references","updater","addElementStyle","byIndex","api","newObj","lastIdentifiers","newList","newLastIdentifiers","_i","_index","memo","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","styleElement","nonce","removeStyleElement","styleSheet","DOMHandler","cdata","lineNumber","columnNumber","_locator","systemId","_toString","chars","java","lang","appendElement","hander","currentElement","doc","mimeType","sax","XMLReader","domBuilder","errorHandler","defaultNSMap","xmlns","entityMap","setDocumentLocator","errorImpl","isCallback","buildErrorHandler","nbsp","copy","startDocument","DOMImplementation","createDocument","documentURI","startElement","namespaceURI","localName","qName","attrs","createElementNS","getURI","getQName","createAttributeNS","setAttributeNode","endElement","startPrefixMapping","prefix","uri","endPrefixMapping","processingInstruction","ins","createProcessingInstruction","ignorableWhitespace","characters","charNode","createCDATASection","skippedEntity","endDocument","normalize","comment","comm","createComment","startCDATA","endCDATA","startDTD","publicId","impl","implementation","createDocumentType","dt","warning","fatalError","dest","_extends","Super","ppt","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","code","message","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ownerDocument","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","_nsMap","_onAddAttribute","_removeNamedNode","lastIndex","features","_features","feature","_xmlEncoder","_visitNode","_onUpdateChild","newChild","cs","_removeChild","previousSibling","lastChild","_insertBefore","nextChild","newFirst","newLast","pre","Attr","CharacterData","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","nodeSerializeToString","isHtml","nodeFilter","buf","refNode","lookupPrefix","visibleNamespaces","namespace","needNamespaceDefine","isHTML","pubid","sysid","sub","internalSubset","importNode","node2","cloneNode","attrs2","_ownerElement","getNamedItem","setNamedItem","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","versions","qualifiedName","doctype","refChild","replaceChild","oldChild","hasChildNodes","appendData","isSupported","hasAttributes","lookupNamespaceURI","isDefaultNamespace","importedNode","rtv","getAttribute","createDocumentFragment","createAttribute","specified","createEntityReference","pl","hasAttribute","getAttributeNode","removeAttributeNode","_appendSingleChild","setAttributeNodeNS","removeAttributeNS","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","getElementsByTagNameNS","substringData","insertData","replaceData","deleteData","splitText","newNode","getTextContent","$$length","nameStartChar","nameChar","tagNamePattern","copyLocator","parseElementStartPart","currentNSMap","entityReplacer","attrName","setTagName","closed","localNSMap","nsp","nsPrefix","_copy","parseHtmlSpecialContent","elStartEnd","elEndStart","fixSelfClosed","closeMap","lastIndexOf","parseDCC","matchs","lastMatch","endDTD","parseInstruction","ElementAttributes","_set_proto_","thiz","defaultNSMapCopy","fixedFromCharCode","surrogate1","surrogate2","appendText","xt","lineEnd","linePattern","lineStart","parseStack","tagStart","endMatch","locator2","getLocalName","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","globalThis","toStringTag","nc","__webpack_exports__"],"sourceRoot":""}